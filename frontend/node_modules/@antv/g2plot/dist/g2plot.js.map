{"version":3,"sources":["webpack://G2Plot/webpack/universalModuleDefinition","webpack://G2Plot/webpack/bootstrap","webpack://G2Plot/../src/is-array-like.ts","webpack://G2Plot/../src/contains.ts","webpack://G2Plot/../src/filter.ts","webpack://G2Plot/../src/difference.ts","webpack://G2Plot/../src/is-type.ts","webpack://G2Plot/../src/is-function.ts","webpack://G2Plot/../src/is-nil.ts","webpack://G2Plot/../src/is-array.ts","webpack://G2Plot/../src/is-object.ts","webpack://G2Plot/../src/each.ts","webpack://G2Plot/../src/keys.ts","webpack://G2Plot/../src/is-match.ts","webpack://G2Plot/../src/is-object-like.ts","webpack://G2Plot/../src/is-plain-object.ts","webpack://G2Plot/../src/find.ts","webpack://G2Plot/../src/find-index.ts","webpack://G2Plot/../src/first-value.ts","webpack://G2Plot/../src/flatten.ts","webpack://G2Plot/../src/flatten-deep.ts","webpack://G2Plot/../src/get-range.ts","webpack://G2Plot/../src/pull.ts","webpack://G2Plot/../src/pull-at.ts","webpack://G2Plot/../src/reduce.ts","webpack://G2Plot/../src/remove.ts","webpack://G2Plot/../src/is-string.ts","webpack://G2Plot/../src/sort-by.ts","webpack://G2Plot/../src/uniq.ts","webpack://G2Plot/../src/union.ts","webpack://G2Plot/../src/values-of-key.ts","webpack://G2Plot/../src/head.ts","webpack://G2Plot/../src/last.ts","webpack://G2Plot/../src/starts-with.ts","webpack://G2Plot/../src/ends-with.ts","webpack://G2Plot/../src/every.ts","webpack://G2Plot/../src/some.ts","webpack://G2Plot/../src/group-by.ts","webpack://G2Plot/../src/group-to-map.ts","webpack://G2Plot/../src/group.ts","webpack://G2Plot/../src/get-wrap-behavior.ts","webpack://G2Plot/../src/wrap-behavior.ts","webpack://G2Plot/../src/number2color.ts","webpack://G2Plot/../src/parse-radius.ts","webpack://G2Plot/../src/clamp.ts","webpack://G2Plot/../src/fixed-base.ts","webpack://G2Plot/../src/is-number.ts","webpack://G2Plot/../src/is-decimal.ts","webpack://G2Plot/../src/is-even.ts","webpack://G2Plot/../src/is-integer.ts","webpack://G2Plot/../src/is-negative.ts","webpack://G2Plot/../src/is-number-equal.ts","webpack://G2Plot/../src/is-odd.ts","webpack://G2Plot/../src/is-positive.ts","webpack://G2Plot/../src/max-by.ts","webpack://G2Plot/../src/min-by.ts","webpack://G2Plot/../src/mod.ts","webpack://G2Plot/../src/to-degree.ts","webpack://G2Plot/../src/to-integer.ts","webpack://G2Plot/../src/to-radian.ts","webpack://G2Plot/../src/for-in.ts","webpack://G2Plot/../src/has.ts","webpack://G2Plot/../src/has-key.ts","webpack://G2Plot/../src/values.ts","webpack://G2Plot/../src/has-value.ts","webpack://G2Plot/../src/to-string.ts","webpack://G2Plot/../src/lower-case.ts","webpack://G2Plot/../src/lower-first.ts","webpack://G2Plot/../src/substitute.ts","webpack://G2Plot/../src/upper-case.ts","webpack://G2Plot/../src/upper-first.ts","webpack://G2Plot/../src/get-type.ts","webpack://G2Plot/../src/is-arguments.ts","webpack://G2Plot/../src/is-boolean.ts","webpack://G2Plot/../src/is-date.ts","webpack://G2Plot/../src/is-error.ts","webpack://G2Plot/../src/is-finite.ts","webpack://G2Plot/../src/is-null.ts","webpack://G2Plot/../src/is-prototype.ts","webpack://G2Plot/../src/is-reg-exp.ts","webpack://G2Plot/../src/is-undefined.ts","webpack://G2Plot/../src/is-element.ts","webpack://G2Plot/../src/request-animation-frame.ts","webpack://G2Plot/../src/clear-animation-frame.ts","webpack://G2Plot/../src/mix.ts","webpack://G2Plot/../src/augment.ts","webpack://G2Plot/../src/clone.ts","webpack://G2Plot/../src/debounce.ts","webpack://G2Plot/../src/memoize.ts","webpack://G2Plot/../src/deep-mix.ts","webpack://G2Plot/../src/extend.ts","webpack://G2Plot/../src/index-of.ts","webpack://G2Plot/../src/is-empty.ts","webpack://G2Plot/../src/is-equal.ts","webpack://G2Plot/../src/is-equal-with.ts","webpack://G2Plot/../src/map.ts","webpack://G2Plot/../src/map-values.ts","webpack://G2Plot/../src/get.ts","webpack://G2Plot/../src/set.ts","webpack://G2Plot/../src/pick.ts","webpack://G2Plot/../src/throttle.ts","webpack://G2Plot/../src/to-array.ts","webpack://G2Plot/../src/unique-id.ts","webpack://G2Plot/../src/noop.ts","webpack://G2Plot/../src/identity.ts","webpack://G2Plot/../src/size.ts","webpack://G2Plot/../src/cache.ts","webpack://G2Plot/./node_modules/_tslib@1.11.1@tslib/tslib.es6.js","webpack://G2Plot/../src/mat3.ts","webpack://G2Plot/../src/vec2.ts","webpack://G2Plot/../src/vec3.ts","webpack://G2Plot/../src/transform.ts","webpack://G2Plot/./src/base/plot.ts","webpack://G2Plot/./src/base/global.ts","webpack://G2Plot/../src/add-event-listener.ts","webpack://G2Plot/../src/create-dom.ts","webpack://G2Plot/../src/get-style.ts","webpack://G2Plot/../src/get-height.ts","webpack://G2Plot/../src/get-outer-height.ts","webpack://G2Plot/../src/get-width.ts","webpack://G2Plot/../src/get-outer-width.ts","webpack://G2Plot/../src/get-ratio.ts","webpack://G2Plot/../src/modify-css.ts","webpack://G2Plot/./node_modules/_gl-matrix@3.3.0@gl-matrix/esm/common.js","webpack://G2Plot/./src/dependents.ts","webpack://G2Plot/../../src/util/path.ts","webpack://G2Plot/../../src/event/graph-event.ts","webpack://G2Plot/../../src/util/util.ts","webpack://G2Plot/../../src/abstract/base.ts","webpack://G2Plot/../../src/util/matrix.ts","webpack://G2Plot/../../src/abstract/element.ts","webpack://G2Plot/../../src/abstract/container.ts","webpack://G2Plot/./node_modules/_d3-timer@1.0.10@d3-timer/src/timer.js","webpack://G2Plot/./node_modules/_d3-ease@1.0.6@d3-ease/src/linear.js","webpack://G2Plot/./node_modules/_d3-ease@1.0.6@d3-ease/src/quad.js","webpack://G2Plot/./node_modules/_d3-ease@1.0.6@d3-ease/src/cubic.js","webpack://G2Plot/./node_modules/_d3-ease@1.0.6@d3-ease/src/poly.js","webpack://G2Plot/./node_modules/_d3-ease@1.0.6@d3-ease/src/sin.js","webpack://G2Plot/./node_modules/_d3-ease@1.0.6@d3-ease/src/exp.js","webpack://G2Plot/./node_modules/_d3-ease@1.0.6@d3-ease/src/circle.js","webpack://G2Plot/./node_modules/_d3-ease@1.0.6@d3-ease/src/bounce.js","webpack://G2Plot/./node_modules/_d3-ease@1.0.6@d3-ease/src/back.js","webpack://G2Plot/./node_modules/_d3-ease@1.0.6@d3-ease/src/elastic.js","webpack://G2Plot/./node_modules/_d3-color@1.4.1@d3-color/src/define.js","webpack://G2Plot/./node_modules/_d3-color@1.4.1@d3-color/src/color.js","webpack://G2Plot/./node_modules/_d3-interpolate@1.4.0@d3-interpolate/src/basis.js","webpack://G2Plot/./node_modules/_d3-interpolate@1.4.0@d3-interpolate/src/constant.js","webpack://G2Plot/./node_modules/_d3-interpolate@1.4.0@d3-interpolate/src/color.js","webpack://G2Plot/./node_modules/_d3-interpolate@1.4.0@d3-interpolate/src/rgb.js","webpack://G2Plot/./node_modules/_d3-interpolate@1.4.0@d3-interpolate/src/basisClosed.js","webpack://G2Plot/./node_modules/_d3-interpolate@1.4.0@d3-interpolate/src/numberArray.js","webpack://G2Plot/./node_modules/_d3-interpolate@1.4.0@d3-interpolate/src/array.js","webpack://G2Plot/./node_modules/_d3-interpolate@1.4.0@d3-interpolate/src/date.js","webpack://G2Plot/./node_modules/_d3-interpolate@1.4.0@d3-interpolate/src/number.js","webpack://G2Plot/./node_modules/_d3-interpolate@1.4.0@d3-interpolate/src/object.js","webpack://G2Plot/./node_modules/_d3-interpolate@1.4.0@d3-interpolate/src/string.js","webpack://G2Plot/./node_modules/_d3-interpolate@1.4.0@d3-interpolate/src/value.js","webpack://G2Plot/../../src/animate/timeline.ts","webpack://G2Plot/../../src/util/color.ts","webpack://G2Plot/../../src/abstract/canvas.ts","webpack://G2Plot/../../src/abstract/group.ts","webpack://G2Plot/../../src/abstract/shape.ts","webpack://G2Plot/../src/index.ts","webpack://G2Plot/./src/util/event.ts","webpack://G2Plot/./src/util/bbox.ts","webpack://G2Plot/./src/theme/index.ts","webpack://G2Plot/./src/base/view-layer.ts","webpack://G2Plot/./src/geoms/factory.ts","webpack://G2Plot/../src/line.ts","webpack://G2Plot/./src/components/label/base.ts","webpack://G2Plot/../../src/tick-method/register.ts","webpack://G2Plot/../src/base.ts","webpack://G2Plot/../../src/category/base.ts","webpack://G2Plot/../../src/util/time.ts","webpack://G2Plot/../../src/util/bisector.ts","webpack://G2Plot/../../src/category/time.ts","webpack://G2Plot/../../src/continuous/base.ts","webpack://G2Plot/../../src/continuous/linear.ts","webpack://G2Plot/../../src/util/math.ts","webpack://G2Plot/../../src/continuous/log.ts","webpack://G2Plot/../../src/continuous/pow.ts","webpack://G2Plot/../../src/continuous/time.ts","webpack://G2Plot/../../src/continuous/quantize.ts","webpack://G2Plot/../../src/continuous/quantile.ts","webpack://G2Plot/../src/factory.ts","webpack://G2Plot/../../src/identity/index.ts","webpack://G2Plot/../../src/util/extended.ts","webpack://G2Plot/../../src/tick-method/cat.ts","webpack://G2Plot/../../src/util/d3-linear.ts","webpack://G2Plot/../../src/util/interval.ts","webpack://G2Plot/../../src/util/strict-limit.ts","webpack://G2Plot/../../src/util/pretty.ts","webpack://G2Plot/../../src/tick-method/quantile.ts","webpack://G2Plot/../../src/tick-method/time-pretty.ts","webpack://G2Plot/../../src/tick-method/index.ts","webpack://G2Plot/../../src/tick-method/time-cat.ts","webpack://G2Plot/../../src/tick-method/linear.ts","webpack://G2Plot/../../src/tick-method/r-prettry.ts","webpack://G2Plot/../../src/tick-method/time.ts","webpack://G2Plot/../../src/tick-method/log.ts","webpack://G2Plot/../../src/tick-method/pow.ts","webpack://G2Plot/../../src/tick-method/d3-linear.ts","webpack://G2Plot/../../src/abstract/component.ts","webpack://G2Plot/../../src/abstract/group-component.ts","webpack://G2Plot/../../src/util/event.ts","webpack://G2Plot/../../src/util/theme.ts","webpack://G2Plot/../../src/annotation/line.ts","webpack://G2Plot/../../src/annotation/text.ts","webpack://G2Plot/../../src/annotation/arc.ts","webpack://G2Plot/../../src/annotation/region.ts","webpack://G2Plot/../../src/annotation/image.ts","webpack://G2Plot/../../src/annotation/data-marker.ts","webpack://G2Plot/../../src/annotation/data-region.ts","webpack://G2Plot/../../src/annotation/region-filter.ts","webpack://G2Plot/../../src/util/state.ts","webpack://G2Plot/../../src/axis/base.ts","webpack://G2Plot/../../../src/axis/overlap/auto-ellipsis.ts","webpack://G2Plot/../../src/util/label.ts","webpack://G2Plot/../../../src/axis/overlap/auto-hide.ts","webpack://G2Plot/../../../src/axis/overlap/auto-rotate.ts","webpack://G2Plot/../../src/axis/line.ts","webpack://G2Plot/../../src/axis/circle.ts","webpack://G2Plot/../../src/crosshair/base.ts","webpack://G2Plot/../../src/crosshair/line.ts","webpack://G2Plot/../../src/crosshair/circle.ts","webpack://G2Plot/../../src/abstract/html-component.ts","webpack://G2Plot/../../src/crosshair/html-theme.ts","webpack://G2Plot/../../src/crosshair/css-const.ts","webpack://G2Plot/../../src/crosshair/html.ts","webpack://G2Plot/../../src/grid/base.ts","webpack://G2Plot/../../src/grid/circle.ts","webpack://G2Plot/../../src/grid/line.ts","webpack://G2Plot/../../src/legend/base.ts","webpack://G2Plot/../../src/legend/category.ts","webpack://G2Plot/../../src/legend/continuous.ts","webpack://G2Plot/../../src/tooltip/css-const.ts","webpack://G2Plot/../../src/tooltip/html-theme.ts","webpack://G2Plot/../../src/tooltip/html.ts","webpack://G2Plot/../../src/util/align.ts","webpack://G2Plot/../../src/trend/constant.ts","webpack://G2Plot/../../src/trend/path.ts","webpack://G2Plot/../../src/trend/trend.ts","webpack://G2Plot/../../src/slider/constant.ts","webpack://G2Plot/../../src/slider/handler.ts","webpack://G2Plot/../../src/slider/slider.ts","webpack://G2Plot/../../src/scrollbar/scrollbar.ts","webpack://G2Plot/./node_modules/_@antv_gl-matrix@2.7.1@@antv/gl-matrix/lib/gl-matrix/mat3.js","webpack://G2Plot/./src/components/factory.ts","webpack://G2Plot/./src/util/math.ts","webpack://G2Plot/./src/util/scale.ts","webpack://G2Plot/./src/util/view.ts","webpack://G2Plot/./src/util/color.ts","webpack://G2Plot/./node_modules/_@antv_gl-matrix@2.7.1@@antv/gl-matrix/lib/gl-matrix/vec2.js","webpack://G2Plot/../src/util.ts","webpack://G2Plot/./node_modules/_warning@4.0.3@warning/warning.js","webpack://G2Plot/../src/constant.ts","webpack://G2Plot/../../src/engine/index.ts","webpack://G2Plot/../../src/util/dom.ts","webpack://G2Plot/../../src/attributes/base.ts","webpack://G2Plot/../../src/attributes/color.ts","webpack://G2Plot/../../src/attributes/opacity.ts","webpack://G2Plot/../../src/attributes/position.ts","webpack://G2Plot/../../src/attributes/shape.ts","webpack://G2Plot/../../src/attributes/size.ts","webpack://G2Plot/../src/dependents.ts","webpack://G2Plot/../../src/util/scale.ts","webpack://G2Plot/../../src/util/axis.ts","webpack://G2Plot/../../src/facet/facet.ts","webpack://G2Plot/../../src/facet/index.ts","webpack://G2Plot/../../../src/interaction/action/base.ts","webpack://G2Plot/../../../src/interaction/action/callback.ts","webpack://G2Plot/../../../src/interaction/action/register.ts","webpack://G2Plot/../../src/util/graphics.ts","webpack://G2Plot/../../src/util/helper.ts","webpack://G2Plot/../../src/util/coordinate.ts","webpack://G2Plot/../../../../src/geometry/shape/util/path.ts","webpack://G2Plot/../../src/util/padding.ts","webpack://G2Plot/../../src/util/bbox.ts","webpack://G2Plot/../../../src/interaction/action/util.ts","webpack://G2Plot/../../src/interaction/context.ts","webpack://G2Plot/../../src/interaction/interaction.ts","webpack://G2Plot/../../src/interaction/grammar-interaction.ts","webpack://G2Plot/../../src/interaction/index.ts","webpack://G2Plot/../../../src/theme/style-sheet/light.ts","webpack://G2Plot/../../src/theme/index.ts","webpack://G2Plot/../../src/util/tooltip.ts","webpack://G2Plot/../../../src/chart/controller/index.ts","webpack://G2Plot/../../../src/chart/controller/coordinate.ts","webpack://G2Plot/../../src/chart/event.ts","webpack://G2Plot/../../../src/chart/layout/padding-cal.ts","webpack://G2Plot/../../../src/chart/layout/auto.ts","webpack://G2Plot/../../../src/chart/layout/index.ts","webpack://G2Plot/../../../src/chart/util/scale-pool.ts","webpack://G2Plot/../../src/chart/view.ts","webpack://G2Plot/../../src/chart/chart.ts","webpack://G2Plot/../../../src/chart/controller/base.ts","webpack://G2Plot/../../src/adjusts/adjust.ts","webpack://G2Plot/../../src/adjusts/dodge.ts","webpack://G2Plot/../../src/adjusts/jitter.ts","webpack://G2Plot/../../src/adjusts/stack.ts","webpack://G2Plot/../../src/adjusts/symmetric.ts","webpack://G2Plot/../../../src/animate/animation/index.ts","webpack://G2Plot/../../src/animate/index.ts","webpack://G2Plot/../../../src/geometry/element/index.ts","webpack://G2Plot/../../../src/geometry/label/index.ts","webpack://G2Plot/../../../src/geometry/shape/base.ts","webpack://G2Plot/../../../src/geometry/util/is-model-change.ts","webpack://G2Plot/../../../src/geometry/util/parse-fields.ts","webpack://G2Plot/../../src/geometry/base.ts","webpack://G2Plot/../../../src/geometry/util/group-data.ts","webpack://G2Plot/../../src/util/transform.ts","webpack://G2Plot/../../src/component/labels.ts","webpack://G2Plot/../../../src/geometry/label/base.ts","webpack://G2Plot/../src/core.ts","webpack://G2Plot/../../../src/theme/style-sheet/dark.ts","webpack://G2Plot/../../../../src/geometry/shape/util/get-path-points.ts","webpack://G2Plot/../../../../src/geometry/shape/util/get-style.ts","webpack://G2Plot/../../../../src/geometry/shape/util/split-points.ts","webpack://G2Plot/../../../../src/geometry/shape/line/util.ts","webpack://G2Plot/../../../../src/geometry/shape/line/index.ts","webpack://G2Plot/../../src/geometry/path.ts","webpack://G2Plot/../../../../src/geometry/shape/area/util.ts","webpack://G2Plot/../../../../src/geometry/shape/area/index.ts","webpack://G2Plot/../../src/geometry/area.ts","webpack://G2Plot/../../../../src/geometry/shape/edge/index.ts","webpack://G2Plot/../../src/geometry/edge.ts","webpack://G2Plot/../../src/geometry/heatmap.ts","webpack://G2Plot/../../../../src/geometry/shape/interval/util.ts","webpack://G2Plot/../../../../src/geometry/shape/interval/index.ts","webpack://G2Plot/../../../src/geometry/util/shape-size.ts","webpack://G2Plot/../../src/geometry/interval.ts","webpack://G2Plot/../../src/geometry/line.ts","webpack://G2Plot/../../src/util/marker.ts","webpack://G2Plot/../../../../src/geometry/shape/point/util.ts","webpack://G2Plot/../../../../src/geometry/shape/point/index.ts","webpack://G2Plot/../../src/geometry/point.ts","webpack://G2Plot/../../../../src/geometry/shape/polygon/index.ts","webpack://G2Plot/../../src/geometry/polygon.ts","webpack://G2Plot/../../../../src/geometry/shape/schema/index.ts","webpack://G2Plot/../../src/geometry/schema.ts","webpack://G2Plot/../../../../src/geometry/shape/edge/util.ts","webpack://G2Plot/../../../../src/geometry/shape/area/line.ts","webpack://G2Plot/../../../../src/geometry/shape/area/smooth.ts","webpack://G2Plot/../../../../src/geometry/shape/area/smooth-line.ts","webpack://G2Plot/../../../../src/geometry/shape/edge/arc.ts","webpack://G2Plot/../../../../src/geometry/shape/edge/smooth.ts","webpack://G2Plot/../../../../src/geometry/shape/edge/vhv.ts","webpack://G2Plot/../../../../src/geometry/shape/interval/funnel.ts","webpack://G2Plot/../../../../src/geometry/shape/interval/hollow-rect.ts","webpack://G2Plot/../../../../src/geometry/shape/interval/line.ts","webpack://G2Plot/../../../../src/geometry/shape/interval/pyramid.ts","webpack://G2Plot/../../../../src/geometry/shape/interval/tick.ts","webpack://G2Plot/../../../../src/geometry/shape/line/step.ts","webpack://G2Plot/../../../../src/geometry/shape/schema/box.ts","webpack://G2Plot/../../../../src/geometry/shape/schema/candle.ts","webpack://G2Plot/../../../../src/geometry/shape/point/hollow.ts","webpack://G2Plot/../../../../src/geometry/shape/point/image.ts","webpack://G2Plot/../../../../src/geometry/shape/point/solid.ts","webpack://G2Plot/../../../src/geometry/label/interval.ts","webpack://G2Plot/../../../src/geometry/label/polar.ts","webpack://G2Plot/../../../src/geometry/label/pie.ts","webpack://G2Plot/../../../../src/geometry/label/layout/overlap.ts","webpack://G2Plot/../../../src/animate/animation/util.ts","webpack://G2Plot/../../../src/animate/animation/sector-path-update.ts","webpack://G2Plot/../../../src/animate/animation/zoom.ts","webpack://G2Plot/../../src/util/facet.ts","webpack://G2Plot/../../src/facet/circle.ts","webpack://G2Plot/../../src/facet/list.ts","webpack://G2Plot/../../src/facet/matrix.ts","webpack://G2Plot/../../src/facet/mirror.ts","webpack://G2Plot/../../src/facet/rect.ts","webpack://G2Plot/../../src/facet/tree.ts","webpack://G2Plot/../../../src/chart/controller/annotation.ts","webpack://G2Plot/../../src/util/grid.ts","webpack://G2Plot/../../../src/chart/controller/axis.ts","webpack://G2Plot/../../src/util/direction.ts","webpack://G2Plot/../../src/util/attr.ts","webpack://G2Plot/../../src/util/legend.ts","webpack://G2Plot/../../../src/chart/controller/legend.ts","webpack://G2Plot/../../../src/chart/controller/slider.ts","webpack://G2Plot/../../../src/chart/controller/tooltip.ts","webpack://G2Plot/../../../src/interaction/action/active-region.ts","webpack://G2Plot/../../../../src/interaction/action/component/tooltip.ts","webpack://G2Plot/../../../../src/interaction/action/component/sibling-tooltp.ts","webpack://G2Plot/../../../../src/interaction/action/element/state-base.ts","webpack://G2Plot/../../../../src/interaction/action/element/state.ts","webpack://G2Plot/../../../../src/interaction/action/element/active.ts","webpack://G2Plot/../../../../src/interaction/action/element/link-by-color.ts","webpack://G2Plot/../../../../src/interaction/action/element/range-state.ts","webpack://G2Plot/../../../../src/interaction/action/element/range-active.ts","webpack://G2Plot/../../../../src/interaction/action/element/single-state.ts","webpack://G2Plot/../../../../src/interaction/action/element/single-active.ts","webpack://G2Plot/../../../../src/interaction/action/element/highlight-util.ts","webpack://G2Plot/../../../../src/interaction/action/element/highlight.ts","webpack://G2Plot/../../../../src/interaction/action/element/highlight-by-color.ts","webpack://G2Plot/../../../../src/interaction/action/element/highlight-by-x.ts","webpack://G2Plot/../../../../src/interaction/action/element/range-highlight.ts","webpack://G2Plot/../../../../src/interaction/action/element/single-highlight.ts","webpack://G2Plot/../../../../src/interaction/action/element/range-selected.ts","webpack://G2Plot/../../../../src/interaction/action/element/selected.ts","webpack://G2Plot/../../../../src/interaction/action/element/single-selected.ts","webpack://G2Plot/../../../../src/interaction/action/component/list-state.ts","webpack://G2Plot/../../../../src/interaction/action/component/list-active.ts","webpack://G2Plot/../../../../src/interaction/action/component/list-highlight.ts","webpack://G2Plot/../../../../src/interaction/action/component/list-highlight-util.ts","webpack://G2Plot/../../../../src/interaction/action/component/list-selected.ts","webpack://G2Plot/../../../../src/interaction/action/component/list-unchecked.ts","webpack://G2Plot/../../../../src/interaction/action/mask/base.ts","webpack://G2Plot/../../../../src/interaction/action/mask/circle.ts","webpack://G2Plot/../../../../src/interaction/action/mask/rect.ts","webpack://G2Plot/../../../../src/interaction/action/mask/dim-rect.ts","webpack://G2Plot/../../../../src/interaction/action/mask/path.ts","webpack://G2Plot/../../../../src/interaction/action/mask/smooth-path.ts","webpack://G2Plot/../../../src/interaction/action/cursor.ts","webpack://G2Plot/../../../../src/interaction/action/data/filter.ts","webpack://G2Plot/../../../../src/interaction/action/data/range-filter.ts","webpack://G2Plot/../../../../src/interaction/action/data/sibling-filter.ts","webpack://G2Plot/../../../../src/interaction/action/element/filter.ts","webpack://G2Plot/../../../../src/interaction/action/element/sibling-filter.ts","webpack://G2Plot/../../../../src/interaction/action/view/button.ts","webpack://G2Plot/../../../../src/interaction/action/view/drag.ts","webpack://G2Plot/../../../../src/interaction/action/view/move.ts","webpack://G2Plot/../../../../src/interaction/action/view/scale-transform.ts","webpack://G2Plot/../../../../src/interaction/action/view/scale-translate.ts","webpack://G2Plot/../../../../src/interaction/action/view/scale-zoom.ts","webpack://G2Plot/../../../../src/geometry/label/layout/distribute.ts","webpack://G2Plot/../../../../src/geometry/label/layout/limit-in-shape.ts","webpack://G2Plot/../../../../src/geometry/label/layout/limit-in-canvas.ts","webpack://G2Plot/../../../src/animate/animation/fade.ts","webpack://G2Plot/../../../src/animate/animation/grow-in.ts","webpack://G2Plot/../../../src/animate/animation/scale-in.ts","webpack://G2Plot/../../../src/animate/animation/wave-in.ts","webpack://G2Plot/../../../src/animate/animation/position-update.ts","webpack://G2Plot/../../../src/animate/animation/path-in.ts","webpack://G2Plot/./node_modules/_fecha@3.0.3@fecha/src/fecha.js","webpack://G2Plot/./src/theme/global.ts","webpack://G2Plot/../src/cubic.ts","webpack://G2Plot/./src/interaction/base.ts","webpack://G2Plot/./src/util/responsive/rules/text-hide.ts","webpack://G2Plot/../../src/coord/base.ts","webpack://G2Plot/../../src/coord/cartesian.ts","webpack://G2Plot/../../src/coord/helix.ts","webpack://G2Plot/../../src/coord/polar.ts","webpack://G2Plot/./src/base/layer.ts","webpack://G2Plot/./src/util/common.ts","webpack://G2Plot/./src/util/responsive/theme.ts","webpack://G2Plot/./src/geoms/base.ts","webpack://G2Plot/./src/util/g-util.ts","webpack://G2Plot/./src/plots/column/layer.ts","webpack://G2Plot/./src/plots/column/component/label.ts","webpack://G2Plot/./src/sparkline/tiny-layer.ts","webpack://G2Plot/./src/components/base.ts","webpack://G2Plot/./src/base/controller/state.ts","webpack://G2Plot/./src/util/responsive/apply/axis.ts","webpack://G2Plot/./src/plots/bar/layer.ts","webpack://G2Plot/./src/plots/pie/component/label/base-label.ts","webpack://G2Plot/./src/plots/calendar/constant.ts","webpack://G2Plot/../../src/bbox/index.ts","webpack://G2Plot/../../src/util/text.ts","webpack://G2Plot/../src/path-2-absolute.ts","webpack://G2Plot/../src/polyline.ts","webpack://G2Plot/../../src/event/event-contoller.ts","webpack://G2Plot/../src/catmull-rom-2-bezier.ts","webpack://G2Plot/../src/parse-path-string.ts","webpack://G2Plot/./node_modules/_@antv_gl-matrix@2.7.1@@antv/gl-matrix/lib/gl-matrix/common.js","webpack://G2Plot/../../src/bbox/util.ts","webpack://G2Plot/./src/interaction/core.ts","webpack://G2Plot/./src/util/path.ts","webpack://G2Plot/./src/geoms/line/main.ts","webpack://G2Plot/./src/util/responsive/responsive.ts","webpack://G2Plot/./src/components/label/point.ts","webpack://G2Plot/./src/plots/bar/theme.ts","webpack://G2Plot/./src/plots/bar/component/label.ts","webpack://G2Plot/./src/plots/stacked-bar/layer.ts","webpack://G2Plot/./src/util/data.ts","webpack://G2Plot/./src/plots/area/layer.ts","webpack://G2Plot/./src/plots/stacked-area/layer.ts","webpack://G2Plot/./src/plots/column/theme.ts","webpack://G2Plot/./src/plots/stacked-column/layer.ts","webpack://G2Plot/./src/plots/pie/component/label/utils/index.ts","webpack://G2Plot/./src/plots/rose/layer.ts","webpack://G2Plot/./src/plots/waterfall/layer.ts","webpack://G2Plot/./src/util/date.ts","webpack://G2Plot/./src/plots/gauge/layer.ts","webpack://G2Plot/../../src/util/offscreen.ts","webpack://G2Plot/../src/quadratic.ts","webpack://G2Plot/../src/path-2-segments.ts","webpack://G2Plot/../../src/util/parse.ts","webpack://G2Plot/../../src/util/arc-params.ts","webpack://G2Plot/../../src/util/arrow.ts","webpack://G2Plot/../../src/util/draw.ts","webpack://G2Plot/../../src/shape/base.ts","webpack://G2Plot/../../src/shape/circle.ts","webpack://G2Plot/../../src/shape/ellipse.ts","webpack://G2Plot/../../src/shape/image.ts","webpack://G2Plot/../../../src/util/in-stroke/line.ts","webpack://G2Plot/../../src/shape/line.ts","webpack://G2Plot/../../src/shape/marker.ts","webpack://G2Plot/../../../src/util/in-path/point-in-path.ts","webpack://G2Plot/../../../src/util/in-path/polygon.ts","webpack://G2Plot/../../../src/util/in-stroke/arc.ts","webpack://G2Plot/./node_modules/_gl-matrix@3.3.0@gl-matrix/esm/mat3.js","webpack://G2Plot/./node_modules/_gl-matrix@3.3.0@gl-matrix/esm/vec3.js","webpack://G2Plot/../../src/shape/path.ts","webpack://G2Plot/../../../src/util/in-stroke/polyline.ts","webpack://G2Plot/../../src/shape/polygon.ts","webpack://G2Plot/../../src/shape/polyline.ts","webpack://G2Plot/../../src/shape/rect.ts","webpack://G2Plot/../../../src/util/in-stroke/rect-radius.ts","webpack://G2Plot/../../../src/util/in-stroke/rect.ts","webpack://G2Plot/../../src/shape/text.ts","webpack://G2Plot/../../src/util/hit.ts","webpack://G2Plot/../src/canvas.ts","webpack://G2Plot/../../src/util/svg.ts","webpack://G2Plot/../../src/shape/dom.ts","webpack://G2Plot/../../../src/shape/marker/symbols.ts","webpack://G2Plot/../../../src/shape/marker/index.ts","webpack://G2Plot/../../src/util/format.ts","webpack://G2Plot/../../src/defs/gradient.ts","webpack://G2Plot/../../src/defs/shadow.ts","webpack://G2Plot/../../src/defs/arrow.ts","webpack://G2Plot/../../src/defs/clip.ts","webpack://G2Plot/../../src/defs/pattern.ts","webpack://G2Plot/../../src/defs/index.ts","webpack://G2Plot/./src/interface/config.ts","webpack://G2Plot/../src/bezier.ts","webpack://G2Plot/../src/get-arc-params.ts","webpack://G2Plot/./src/util/formatter.ts","webpack://G2Plot/./src/util/state-manager.ts","webpack://G2Plot/./src/interaction/helper/data-range.ts","webpack://G2Plot/./src/base/controller/theme.ts","webpack://G2Plot/./src/theme/default.ts","webpack://G2Plot/./src/plots/index.ts","webpack://G2Plot/./src/plots/line/layer.ts","webpack://G2Plot/./src/geoms/area/main.ts","webpack://G2Plot/./src/geoms/line/mini.ts","webpack://G2Plot/./src/util/responsive/node/shape-nodes.ts","webpack://G2Plot/./src/util/responsive/constraints/index.ts","webpack://G2Plot/./src/util/responsive/rules/index.ts","webpack://G2Plot/./src/util/responsive/rules/clear-overlapping.ts","webpack://G2Plot/./src/util/responsive/rules/datetime-string-abbrevaite.ts","webpack://G2Plot/./src/util/responsive/rules/digits-abbreviate.ts","webpack://G2Plot/./src/util/responsive/rules/nodes-resampling.ts","webpack://G2Plot/./src/util/responsive/rules/text-abbreviate.ts","webpack://G2Plot/./src/util/responsive/apply/base.ts","webpack://G2Plot/./src/util/responsive/apply/label.ts","webpack://G2Plot/./src/components/label/point-auto.ts","webpack://G2Plot/./src/plots/line/component/label/line-label.ts","webpack://G2Plot/./src/components/conversion-tag.ts","webpack://G2Plot/./src/plots/bar/component/label-auto.ts","webpack://G2Plot/./src/plots/grouped-bar/layer.ts","webpack://G2Plot/./src/plots/percent-stacked-bar/layer.ts","webpack://G2Plot/./src/plots/area/component/label/area-point.ts","webpack://G2Plot/./src/plots/area/component/label/area-point-auto.ts","webpack://G2Plot/./src/plots/area/theme.ts","webpack://G2Plot/./src/plots/percent-stacked-area/layer.ts","webpack://G2Plot/./src/plots/column/component/label-auto.ts","webpack://G2Plot/./src/plots/column/event.ts","webpack://G2Plot/./src/plots/grouped-column/layer.ts","webpack://G2Plot/./src/plots/stacked-column/component/label.ts","webpack://G2Plot/./src/plots/percent-stacked-column/layer.ts","webpack://G2Plot/./src/plots/pie/layer.ts","webpack://G2Plot/./src/plots/pie/component/label/index.ts","webpack://G2Plot/./src/plots/donut/layer.ts","webpack://G2Plot/./src/plots/scatter/layer.ts","webpack://G2Plot/./src/plots/scatter/event.ts","webpack://G2Plot/./src/plots/gauge/geometry/shape/gauge-shape.ts","webpack://G2Plot/./src/sparkline/progress/layer.ts","webpack://G2Plot/./src/combo-plots/util/adjustColorConfig.ts","webpack://G2Plot/./src/combo-plots/util/padding.ts","webpack://G2Plot/./node_modules/_@antv_gl-matrix@2.7.1@@antv/gl-matrix/lib/gl-matrix/vec3.js","webpack://G2Plot/./node_modules/_detect-browser@4.8.0@detect-browser/index.js","webpack://G2Plot/../src/is-polygons-intersect.ts","webpack://G2Plot/./src/index.ts","webpack://G2Plot/../../src/bbox/register.ts","webpack://G2Plot/../../src/bbox/rect.ts","webpack://G2Plot/../../src/bbox/circle.ts","webpack://G2Plot/../../src/bbox/polyline.ts","webpack://G2Plot/../../src/bbox/polygon.ts","webpack://G2Plot/../../src/bbox/text.ts","webpack://G2Plot/../../src/bbox/path.ts","webpack://G2Plot/./node_modules/_gl-matrix@3.3.0@gl-matrix/esm/vec2.js","webpack://G2Plot/../src/arc.ts","webpack://G2Plot/../src/ellipse.ts","webpack://G2Plot/../src/parse-path.ts","webpack://G2Plot/../../src/bbox/line.ts","webpack://G2Plot/../../src/bbox/ellipse.ts","webpack://G2Plot/../src/segments.ts","webpack://G2Plot/./node_modules/_process@0.11.10@process/browser.js","webpack://G2Plot/../src/interface.ts","webpack://G2Plot/../src/point-in-polygon.ts","webpack://G2Plot/../src/get-line-intersect.ts","webpack://G2Plot/../../../src/chart/controller/gesture.ts","webpack://G2Plot/./src/components/description.ts","webpack://G2Plot/./src/components/axis/parser.ts","webpack://G2Plot/./src/components/guide-line.ts","webpack://G2Plot/./src/components/label/parser.ts","webpack://G2Plot/./src/components/axis/state.ts","webpack://G2Plot/./src/components/label/state.ts","webpack://G2Plot/./src/components/tooltip/state.ts","webpack://G2Plot/./src/interaction/index.ts","webpack://G2Plot/./src/interaction/scrollbar.ts","webpack://G2Plot/./src/interaction/slider.ts","webpack://G2Plot/./src/interaction/timeline.ts","webpack://G2Plot/./src/components/timeline/index.ts","webpack://G2Plot/./src/components/timeline/button.ts","webpack://G2Plot/./src/base/controller/padding.ts","webpack://G2Plot/./src/theme/dark.ts","webpack://G2Plot/./src/theme/theme.ts","webpack://G2Plot/./src/theme/utils.ts","webpack://G2Plot/./src/util/responsive/default.ts","webpack://G2Plot/./src/base/controller/canvas.ts","webpack://G2Plot/./node_modules/_resize-observer-polyfill@1.5.1@resize-observer-polyfill/dist/ResizeObserver.es.js","webpack://G2Plot/(webpack)/buildin/global.js","webpack://G2Plot/./src/base/controller/event.ts","webpack://G2Plot/./src/plots/line/index.ts","webpack://G2Plot/./src/geoms/area/index.ts","webpack://G2Plot/./src/geoms/area/mini.ts","webpack://G2Plot/./src/geoms/interval/index.ts","webpack://G2Plot/./src/geoms/interval/main.ts","webpack://G2Plot/./src/geoms/line/index.ts","webpack://G2Plot/./src/geoms/line/guide.ts","webpack://G2Plot/./src/geoms/point/index.ts","webpack://G2Plot/./src/geoms/point/circle.ts","webpack://G2Plot/./src/geoms/point/guide.ts","webpack://G2Plot/./src/plots/line/animation/clipIn-with-data.ts","webpack://G2Plot/./src/plots/line/apply-responsive/index.ts","webpack://G2Plot/./src/plots/line/apply-responsive/axis.ts","webpack://G2Plot/./src/util/responsive/constraints/column-width.ts","webpack://G2Plot/./src/util/responsive/constraints/element-collision.ts","webpack://G2Plot/./src/util/responsive/constraints/element-dist.ts","webpack://G2Plot/./src/util/responsive/constraints/element-dist-vertical.ts","webpack://G2Plot/./src/util/responsive/constraints/element-width.ts","webpack://G2Plot/./src/util/responsive/constraints/min-ring-thickness.ts","webpack://G2Plot/./src/util/responsive/constraints/ring-thickness.ts","webpack://G2Plot/./src/util/responsive/rules/node-jitter.ts","webpack://G2Plot/./src/util/responsive/rules/node-jitter-upward.ts","webpack://G2Plot/./src/util/responsive/rules/nodes-resampling-by-abbrevate.ts","webpack://G2Plot/./src/util/responsive/rules/nodes-resampling-by-change.ts","webpack://G2Plot/./src/util/responsive/rules/nodes-resampling-by-state.ts","webpack://G2Plot/./src/util/responsive/rules/robust-abbrevaite.ts","webpack://G2Plot/./src/util/responsive/rules/text-rotation.ts","webpack://G2Plot/./src/util/responsive/rules/text-wrapper.ts","webpack://G2Plot/./src/plots/line/apply-responsive/label.ts","webpack://G2Plot/./src/plots/line/event.ts","webpack://G2Plot/./src/components/marker-point.ts","webpack://G2Plot/./src/plots/line/theme.ts","webpack://G2Plot/./src/plots/line/apply-responsive/theme.ts","webpack://G2Plot/./src/plots/line/interaction/index.ts","webpack://G2Plot/./src/plots/line/interaction/line-active.ts","webpack://G2Plot/./src/plots/line/interaction/line-select.ts","webpack://G2Plot/./src/plots/treemap/index.ts","webpack://G2Plot/./src/plots/treemap/layer.ts","webpack://G2Plot/./src/plots/treemap/layout/squarify.ts","webpack://G2Plot/./src/plots/treemap/layout/dice.ts","webpack://G2Plot/./src/plots/treemap/layout/slice.ts","webpack://G2Plot/./src/plots/treemap/interaction/index.ts","webpack://G2Plot/./src/plots/treemap/interaction/drillDown.ts","webpack://G2Plot/./src/components/breadcrumb.ts","webpack://G2Plot/./src/plots/treemap/interaction/animation.ts","webpack://G2Plot/./src/plots/treemap/event.ts","webpack://G2Plot/./src/plots/treemap/components/label.ts","webpack://G2Plot/./src/plots/step-line/index.ts","webpack://G2Plot/./src/plots/step-line/layer.ts","webpack://G2Plot/./src/plots/bar/index.ts","webpack://G2Plot/./src/plots/bar/apply-responsive/index.ts","webpack://G2Plot/./src/plots/bar/apply-responsive/axis.ts","webpack://G2Plot/./src/plots/bar/event.ts","webpack://G2Plot/./src/plots/stacked-bar/index.ts","webpack://G2Plot/./src/plots/stacked-bar/theme.ts","webpack://G2Plot/./src/plots/stacked-bar/component/label.ts","webpack://G2Plot/./src/plots/stacked-bar/component/label-auto.ts","webpack://G2Plot/./src/plots/grouped-bar/index.ts","webpack://G2Plot/./src/plots/grouped-bar/theme.ts","webpack://G2Plot/./src/plots/percent-stacked-bar/index.ts","webpack://G2Plot/./src/plots/range-bar/index.ts","webpack://G2Plot/./src/plots/range-bar/layer.ts","webpack://G2Plot/./src/plots/range-bar/component/label.ts","webpack://G2Plot/./src/plots/range-bar/animation.ts","webpack://G2Plot/./src/plots/area/index.ts","webpack://G2Plot/./src/plots/area/apply-responsive/index.ts","webpack://G2Plot/./src/plots/area/apply-responsive/axis.ts","webpack://G2Plot/./src/plots/area/event.ts","webpack://G2Plot/./src/plots/stacked-area/index.ts","webpack://G2Plot/./src/plots/stacked-area/component/index.ts","webpack://G2Plot/./src/plots/stacked-area/component/label/line-label.ts","webpack://G2Plot/./src/plots/stacked-area/component/label/area-label.ts","webpack://G2Plot/./src/plots/stacked-area/component/label/area-point.ts","webpack://G2Plot/./src/plots/stacked-area/component/label/area-point-auto.ts","webpack://G2Plot/./src/plots/stacked-area/theme.ts","webpack://G2Plot/./src/plots/percent-stacked-area/index.ts","webpack://G2Plot/./src/plots/column/index.ts","webpack://G2Plot/./src/plots/column/apply-responsive/index.ts","webpack://G2Plot/./src/plots/column/apply-responsive/axis.ts","webpack://G2Plot/./src/plots/column/apply-responsive/label.ts","webpack://G2Plot/./src/plots/column/apply-responsive/theme.ts","webpack://G2Plot/./src/plots/grouped-column/index.ts","webpack://G2Plot/./src/plots/grouped-column/theme.ts","webpack://G2Plot/./src/plots/stacked-column/index.ts","webpack://G2Plot/./src/components/connected-area.ts","webpack://G2Plot/./src/plots/stacked-column/theme.ts","webpack://G2Plot/./src/plots/stacked-column/component/label-auto.ts","webpack://G2Plot/./src/plots/range-column/index.ts","webpack://G2Plot/./src/plots/range-column/layer.ts","webpack://G2Plot/./src/plots/range-column/component/label.ts","webpack://G2Plot/./src/plots/range-column/animation.ts","webpack://G2Plot/./src/plots/percent-stacked-column/index.ts","webpack://G2Plot/./src/plots/pie/index.ts","webpack://G2Plot/./src/plots/pie/event.ts","webpack://G2Plot/./src/plots/pie/component/label/utils/text.ts","webpack://G2Plot/./src/plots/pie/component/label/inner-label.ts","webpack://G2Plot/./src/plots/pie/component/label/outer-label.ts","webpack://G2Plot/./src/plots/pie/component/label/outer-center-label.ts","webpack://G2Plot/./src/plots/pie/component/label/spider-label.ts","webpack://G2Plot/./src/plots/pie/theme.ts","webpack://G2Plot/./src/plots/density-heatmap/index.ts","webpack://G2Plot/./src/plots/density-heatmap/layer.ts","webpack://G2Plot/./src/geoms/heatmap/linear.ts","webpack://G2Plot/./src/plots/density-heatmap/components/index.ts","webpack://G2Plot/./src/plots/density-heatmap/components/background.ts","webpack://G2Plot/./src/plots/density-heatmap/components/legend.ts","webpack://G2Plot/./src/plots/density-heatmap/event.ts","webpack://G2Plot/./src/plots/heatmap/index.ts","webpack://G2Plot/./src/plots/heatmap/layer.ts","webpack://G2Plot/./src/plots/heatmap/shape.ts","webpack://G2Plot/./src/plots/heatmap/component/index.ts","webpack://G2Plot/./src/plots/heatmap/component/label.ts","webpack://G2Plot/./src/plots/heatmap/component/legend.ts","webpack://G2Plot/./src/plots/word-cloud/index.ts","webpack://G2Plot/./src/plots/word-cloud/layer.ts","webpack://G2Plot/./src/plots/word-cloud/word-cloud-tooltips.ts","webpack://G2Plot/./src/plots/word-cloud/wordcloud2.ts","webpack://G2Plot/./src/plots/rose/index.ts","webpack://G2Plot/./src/plots/rose/event.ts","webpack://G2Plot/./src/plots/funnel/index.ts","webpack://G2Plot/./src/plots/funnel/layer.ts","webpack://G2Plot/./src/plots/funnel/theme.ts","webpack://G2Plot/./src/plots/funnel/geometry/shape/funnel-basic-rect.ts","webpack://G2Plot/./src/plots/funnel/geometry/shape/funnel-dynamic-rect.ts","webpack://G2Plot/./src/plots/funnel/animation/funnel-scale-in-x.ts","webpack://G2Plot/./src/plots/funnel/animation/funnel-scale-in-y.ts","webpack://G2Plot/./src/plots/stacked-rose/index.ts","webpack://G2Plot/./src/plots/stacked-rose/layer.ts","webpack://G2Plot/./src/plots/grouped-rose/index.ts","webpack://G2Plot/./src/plots/grouped-rose/layer.ts","webpack://G2Plot/./src/plots/radar/index.ts","webpack://G2Plot/./src/plots/radar/layer.ts","webpack://G2Plot/./src/plots/radar/event.ts","webpack://G2Plot/./src/plots/radar/theme.ts","webpack://G2Plot/./src/plots/liquid/index.ts","webpack://G2Plot/./src/plots/liquid/layer.ts","webpack://G2Plot/./src/plots/liquid/event.ts","webpack://G2Plot/./src/plots/liquid/geometry/shape/liquid.ts","webpack://G2Plot/./src/plots/liquid/animation/liquid-move-in.ts","webpack://G2Plot/./src/plots/histogram/index.ts","webpack://G2Plot/./src/plots/histogram/layer.ts","webpack://G2Plot/./src/plots/density/index.ts","webpack://G2Plot/./src/plots/density/layer.ts","webpack://G2Plot/./src/plots/donut/index.ts","webpack://G2Plot/./src/plots/donut/apply-responsive/index.ts","webpack://G2Plot/./src/plots/donut/apply-responsive/geometry.ts","webpack://G2Plot/./src/util/responsive/node/variable-node.ts","webpack://G2Plot/./src/plots/donut/apply-responsive/theme.ts","webpack://G2Plot/./src/plots/donut/event.ts","webpack://G2Plot/./src/plots/donut/component/ring-statistic.ts","webpack://G2Plot/./src/plots/donut/component/statistic.ts","webpack://G2Plot/./src/plots/donut/component/statistic-template.ts","webpack://G2Plot/./src/plots/waterfall/index.ts","webpack://G2Plot/./src/plots/waterfall/geometry/shape/waterfall.ts","webpack://G2Plot/./src/plots/waterfall/event.ts","webpack://G2Plot/./src/plots/waterfall/component/label/waterfall-label.ts","webpack://G2Plot/./src/plots/waterfall/component/label/diff-label.ts","webpack://G2Plot/./src/plots/scatter/index.ts","webpack://G2Plot/./src/plots/scatter/components/quadrant.ts","webpack://G2Plot/./src/plots/scatter/components/trendline.ts","webpack://G2Plot/./src/plots/scatter/theme.ts","webpack://G2Plot/./src/plots/bubble/index.ts","webpack://G2Plot/./src/plots/bubble/layer.ts","webpack://G2Plot/./src/plots/bubble/shape.ts","webpack://G2Plot/./src/plots/bubble/theme.ts","webpack://G2Plot/./src/plots/bullet/index.ts","webpack://G2Plot/./src/plots/bullet/layer.ts","webpack://G2Plot/./src/plots/bullet/event.ts","webpack://G2Plot/./src/plots/bullet/component/bulletRect.ts","webpack://G2Plot/./src/plots/bullet/component/bulletTarget.ts","webpack://G2Plot/./src/plots/bullet/theme.ts","webpack://G2Plot/./src/plots/calendar/index.ts","webpack://G2Plot/./src/plots/calendar/layer.ts","webpack://G2Plot/./src/plots/calendar/util.ts","webpack://G2Plot/./src/plots/calendar/event.ts","webpack://G2Plot/./src/plots/calendar/shape.ts","webpack://G2Plot/./src/plots/gauge/index.ts","webpack://G2Plot/./src/plots/gauge/event.ts","webpack://G2Plot/./src/plots/fan-gauge/index.ts","webpack://G2Plot/./src/plots/fan-gauge/layer.ts","webpack://G2Plot/./src/plots/meter-gauge/index.ts","webpack://G2Plot/./src/plots/meter-gauge/layer.ts","webpack://G2Plot/./src/plots/compatiblePlots/index.ts","webpack://G2Plot/./src/plots/compatiblePlots/ring/index.ts","webpack://G2Plot/./src/plots/compatiblePlots/group-column/index.ts","webpack://G2Plot/./src/plots/compatiblePlots/group-bar/index.ts","webpack://G2Plot/./src/plots/compatiblePlots/percentage-stack-area/index.ts","webpack://G2Plot/./src/plots/compatiblePlots/percentage-stack-bar/index.ts","webpack://G2Plot/./src/plots/compatiblePlots/percentage-stack-column/index.ts","webpack://G2Plot/./src/plots/compatiblePlots/stack-area/index.ts","webpack://G2Plot/./src/plots/compatiblePlots/stack-bar/index.ts","webpack://G2Plot/./src/plots/compatiblePlots/stack-column/index.ts","webpack://G2Plot/./src/sparkline/progress/index.ts","webpack://G2Plot/./src/sparkline/progress/component/marker.ts","webpack://G2Plot/./src/sparkline/progress/event.ts","webpack://G2Plot/./src/sparkline/ring-progress/index.ts","webpack://G2Plot/./src/sparkline/ring-progress/layer.ts","webpack://G2Plot/./src/sparkline/ring-progress/event.ts","webpack://G2Plot/./src/sparkline/tiny-column/index.ts","webpack://G2Plot/./src/sparkline/tiny-column/layer.ts","webpack://G2Plot/./src/sparkline/tiny-column/event.ts","webpack://G2Plot/./src/sparkline/tiny-area/index.ts","webpack://G2Plot/./src/sparkline/tiny-area/layer.ts","webpack://G2Plot/./src/sparkline/tiny-area/event.ts","webpack://G2Plot/./src/sparkline/tiny-line/index.ts","webpack://G2Plot/./src/sparkline/tiny-line/layer.ts","webpack://G2Plot/./src/sparkline/tiny-line/event.ts","webpack://G2Plot/./src/combo-plots/overlapped.ts","webpack://G2Plot/./src/combo-plots/base.ts","webpack://G2Plot/./src/combo-plots/util/index.ts","webpack://G2Plot/./src/combo-plots/util/globalLegend.ts","webpack://G2Plot/./src/combo-plots/util/globalAxis.ts","webpack://G2Plot/./src/combo-plots/util/globalTooltip.ts","webpack://G2Plot/./node_modules/_d3-regression@1.3.4@d3-regression/src/utils/points.js","webpack://G2Plot/./node_modules/_d3-regression@1.3.4@d3-regression/src/utils/determination.js","webpack://G2Plot/./node_modules/_d3-regression@1.3.4@d3-regression/src/utils/geometry.js","webpack://G2Plot/./node_modules/_d3-regression@1.3.4@d3-regression/src/utils/interpose.js","webpack://G2Plot/./node_modules/_d3-regression@1.3.4@d3-regression/src/utils/ols.js","webpack://G2Plot/./node_modules/_d3-regression@1.3.4@d3-regression/src/exponential.js","webpack://G2Plot/./node_modules/_d3-regression@1.3.4@d3-regression/src/linear.js","webpack://G2Plot/./node_modules/_d3-regression@1.3.4@d3-regression/src/utils/median.js","webpack://G2Plot/./node_modules/_d3-regression@1.3.4@d3-regression/src/loess.js","webpack://G2Plot/./node_modules/_d3-regression@1.3.4@d3-regression/src/logarithmic.js","webpack://G2Plot/./node_modules/_d3-regression@1.3.4@d3-regression/src/quadratic.js","webpack://G2Plot/./node_modules/_d3-regression@1.3.4@d3-regression/src/polynomial.js","webpack://G2Plot/./node_modules/_d3-regression@1.3.4@d3-regression/src/power.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","result","arr","str","base","toString","index","indexOf","length","num","precision","maxData","data","obj","rst","k","memoized","dist","superObj","func","default_1","extendStatics","b","setPrototypeOf","__proto__","Array","__extends","__","this","constructor","__assign","assign","arguments","apply","__rest","e","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","desc","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","iterator","v","op","TypeError","pop","push","__exportStar","__values","__read","ar","error","__spread","concat","__spreadArrays","il","a","j","jl","__await","__asyncGenerator","asyncIterator","q","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","__importDefault","default","__classPrivateFieldGet","receiver","privateMap","has","__classPrivateFieldSet","set","out","container","props","containerDOM","document","getElementById","forceFit","isNil","width","height","renderer","pixelRatio","theme","localRefresh","canvasController","plot","canvas","layers","destroyed","createLayers","eventController","bindEvents","parseEvents","destroy","eachLayer","layer","clearEvents","repaint","draw","updateConfig","config","all","updateCanvasSize","updateCanvasTheme","changeData","getPlotTheme","getData","bindStateManager","stateManager","cfg","setActive","condition","style","setSelected","setDisable","setDefault","getView","view","getLayer","idx","getCanvas","getLayers","render","cb","each","addLayer","findIndex","item","type","viewLayer","getPlotType","deepMix","x","eventsName","keys","CANVAS_EVENT_MAP","events","contains","isFunction","eventName","handler","on","GLOBAL_PLOT_MAP","ctr","toLowerCase","addEventListener","remove","TABLE","getStyle","dom","parseFloat","el","modifyCSS","EPSILON","ARRAY_TYPE","Float32Array","RANDOM","Math","random","PI","hypot","sqrt","IElement","ICanvas","IGroup","IShape","BBox","Canvas","View","registerAnimation","registerGeometry","Geometry","Interaction","registerInteraction","registerShape","getTheme","Util","getShapeFactory","registerComponentController","VIEW_LIFE_CIRCLE","COMPONENT_TYPE","FIELD_ORIGIN","Gestrue","MarkerSymbols","Datum","Data","LooseObject","Options","Point","ShapeInfo","AttributeOption","AdjustOption","LabelOption","MappingDatum","DEFAULT_ANIMATE_CFG","getDefaultAnimateCfg","doAnimate","HtmlTooltip","HtmlTooltipTheme","TooltipCssConst","GroupComponent","Axis","Legend","Tooltip","Slider","Scrollbar","GroupComponentCfg","TooltipCfg","Coordinate","ORIGIN","Base","a10","a11","a12","a20","a21","a22","Element","repeat","minX","maxX","minY","maxY","group","shape","Container","taskHead","taskTail","frame","timeout","interval","clockLast","clockNow","clockSkew","clock","performance","now","Date","setFrame","requestAnimationFrame","setTimeout","clearNow","Timer","_call","_time","_next","timer","callback","delay","time","restart","wake","timerFlush","t0","t2","t1","Infinity","sleep","nap","poke","clearTimeout","clearInterval","setInterval","linear","quadIn","quadOut","quadInOut","cubicIn","cubicOut","cubicInOut","stop","polyIn","custom","pow","exponent","polyOut","polyInOut","pi","halfPi","sinIn","cos","sinOut","sin","sinInOut","expIn","expOut","expInOut","circleIn","circleOut","circleInOut","b0","bounceIn","bounceOut","bounceInOut","backIn","overshoot","backOut","backInOut","tau","elasticIn","asin","max","amplitude","period","elasticOut","elasticInOut","extend","parent","definition","Color","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","format","trim","exec","parseInt","rgbn","Rgb","rgba","hsla","NaN","rgbConvert","opacity","rgb_formatHex","hex","rgb_formatRgb","isNaN","min","round","h","Hsl","hslConvert","hsl2rgb","m1","m2","basis","v0","v1","v2","v3","t3","copy","channels","displayable","formatHsl","brighter","darker","gamma","nogamma","exponential","constant","rgbGamma","start","end","colorRgb","rgbSpline","spline","colors","values","floor","slice","isNumberArray","ArrayBuffer","isView","DataView","genericArray","nb","na","setTime","reA","reB","source","am","bm","bs","bi","lastIndex","number","one","zero","join","string","date","numberArray","isArray","valueOf","update","duration","animation","easing","elapsed","ratio","cPathPoint","cProps","Timeline","_this","child","AbstractShape","eventNames","mobileEventNames","getEventMap","title","description","breadcrumb","getRegionEventMap","LAYER_EVENT_MAP","EVENT_MAP","axis","legend","getMobileEventMap","map","eventMap","namePrefix","upperFirst","eventPrefix","event","prefix","eventList","onEvent","ev","eventData","clientX","clientY","gEvent","fromBBoxObject","bbox","fromRange","equals","getGlobalTheme","registerGlobalTheme","registerTheme","convertToG2Theme","interactions","labels","options","getOptions","initialOptions","paddingController","stateController","themeController","getDefaultOptions","visible","alignTo","text","padding","position","tooltip","shared","showCrosshairs","crosshairs","offset","xAxis","grid","line","tickLine","autoRotate","autoHide","yAxis","curOptions","defaultOptions","reduce","flatten","src","cur","splice","beforeInit","init","processData","scales","legends","showTitle","axes","coordinate","geometries","annotations","panelRange","animate","views","clear","drawTitle","drawDescription","interaction","coord","scale","addGeometry","annotation","viewRange","getViewRange","region","viewRangeToRegion","backgroundGroup","addGroup","middleGroup","foregroundGroup","getPadding","applyInteractions","AFTER_RENDER","afterRender","afterInit","defaultState","defaultStates","processAutoPadding","customContent","customTooltip","isEmpty","doDestroy","processOptions","getPlot","getLabels","getResponsiveTheme","getInteractions","setState","scaleTypes","mapValues","scaleConfig","meta","setConfig","xAxis_parser","getComponent","dim","yAxis_parser","axesConfig","xField","yField","tooltipOptions","domStyles","customContentCfg","isString","getElementsByClassName","hideTooltip","getLegendPosition","positionList","split","flipOption","clickable","formatter","offsetX","offsetY","isUndefined","flipPage","marker","guideLine","forEach","inst","Ctor","getInteraction","getInteractionRange","layerBBox","eventParser","range","isTextUsable","leftMargin","rightMargin","topMargin","mix","wrapperWidth","registerPadding","titleBBox","getBBox","doRenderLabel","geometry","labelsContainer","getLabelComponent","doDestroyInteractions","doDestroyLabels","processOuterPadding","GEOMETRY_MAP","area","point","Geom","box","pointAt","pointDistance","pointToLine","vec2","tangentAngle","labelsCfgMap","lastLabelsCfgMap","getGeometry","show","hide","getCoordinate","AFTER_PAINT","addDisposable","off","renderInner","elements","element","elementIdx","drawLabelItem","adjustLabel","clone","attrs","layoutLabels","animateCfg","animateOption","id","findById","oldAttrs","updateAnimateCfg","attr","toAttrs","appearAnimateCfg","leaveAnimateCfg","tempShape","addShape","drawLabelText","extraCfgs","elementIndex","model","getModel","items","getLabelItemAttrs","getDefaultOffset","offsetPoint","getLabelOffset","dataItem","mappingData","getLabelId","Number","isNumber","getLabelOffsetByDimAndFactor","factor","origin","_origin","xScale","getXScale","yScale","getYScale","labelId","getElementId","field","getCoordinateBBox","getWidth","getHeight","LABEL_CONFIG_MAP","component","hi","calBase","E","log","appendPercent","w","pretty","log10","toFixed","ceil","abs","unit","nu","res","registerTickMethod","lastValue","tickInterval","ticks","tick","startStr","startIndex","hasAdd","isVertical","path","_super","center","closed","x1","getElementByLocalId","stroke","subGroup","pages","currentPoint","leftArrow","maxLabel","getDefaultCfg","px","py","validCfg","sub","mul","undefined","glMatrix","fromMat4","fromValues","m00","m01","m02","m10","m11","m12","m20","m21","m22","identity","transpose","a01","a02","invert","a00","b01","b11","b21","det","adjoint","determinant","multiply","translate","rotate","rad","fromTranslation","fromRotation","fromScaling","fromMat2d","fromQuat","z","x2","y2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","normalFromMat4","a03","a13","a23","a30","a31","a32","a33","b00","b02","b03","b04","b05","b06","b07","b08","b09","b10","projection","frob","add","subtract","multiplyScalar","multiplyScalarAndAdd","exactEquals","a0","a1","a2","a3","a4","a5","a6","a7","a8","b1","b2","b3","b4","b5","b6","b7","b8","newObj","_interopRequireWildcard","require","b12","b20","b22","COMPONENT_MAPPER","STATE_MAPPER","Components","magnitude","sum","dotProduct2D","va","vb","applyMatrix","matrix","tag","vector","matrixUtil","vec3","transformMat3","isBetween","angleTo","magA","magB","dot","acos","crossProduct2D","angle","crossProduct3D","ax","ay","az","bx","by","bz","sub2D","isPointInPolygon","polygon","inside","xi","yi","xj","yj","sqr","dist2","distBetweenPointLine","p1","p2","l2","distSquare","minDistBetweenPointPolygon","isPolygonIntersection","polyA","polyB","getLineIntersect","p0","p3","D0","D1","kross","distBetweenPoints","minDistBetweenConvexPolygon","minA","minB","localMin","bboxOnRotate","ulMatrix","bboxWidth","bboxHeight","top_left","top_right","bottom_left","bottom_right","points","sort","tops","bottoms","topLeft","topRight","bottomLeft","bottomRight","left","right","top","bottom","centerX","centerY","lineSimplification","DouglasPeucker","threshold","endIndex","list1","list2","getMedian","array","list","half","getMean","sturges","LN2","curX","curY","desScale","axisConfig","intervals","intervalArr","basicInterval","intervalCount","tickCount","timeIntervals","mask","minLimit","maxLimit","nice","tickMethod","validData","filter","getAllGeometryByType","getOverlapArea","margin","head","dones","compare","some","panel","deltaX","deltaY","rgb2arr","colorStr","substr","toHex","band","reflect","from","to","isContrastColorWhite","sqrLen","sqrDist","div","len","divide","scaleAndAdd","distance","squaredDistance","squaredLength","negate","inverse","normalize","cross","lerp","transformMat2","transformMat2d","transformMat4","sinC","cosC","y1","len1","len2","cosine","vec","stride","count","fn","arg","minNum","xArr","yArr","warning","Opacity","Shape","Size","tmp","curPoint","subBBox","context","scaleKeys","getGeometryLabel","values_1","labelPointCfg","startAngle","rowValues","facet","facets","leafs","rowValue","cls","LinkByColor","unlink","sibling","boxes","fecha","token","word","literal","noop","shorten","sLen","newArr","monthUpdate","arrName","i18n","charAt","toUpperCase","month","pad","val","String","dayNames","monthNames","monthNamesShort","dayNamesShort","amPm","DoFn","D","formatFlags","dateObj","getDate","DD","Do","getDay","dd","ddd","dddd","M","getMonth","MM","MMM","MMMM","YY","getFullYear","YYYY","getHours","hh","H","HH","getMinutes","mm","getSeconds","ss","S","getMilliseconds","SS","SSS","A","ZZ","getTimezoneOffset","parseFlags","day","cent","year","hour","minute","second","millisecond","isPm","minutes","parts","match","timezoneOffset","masks","shortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","i18nSettings","getTime","Error","literals","replace","$0","$1","parse","dateStr","dateInfo","parseInfo","newFormat","info","matches","today","UTC","GLOBAL_THEME_MAP","DEFAULT_GLOBAL_THEME","dark","DEFAULT_DARK_THEME","console","warn","defaultTheme","cubicAt","onet","interactionRange","interactionConfig","disposables","ctor","BaseInteraction","GLOBAL_INTERACTION_MAP","registerPlotInteraction","plotType","PLOT_INTERACTION_MAP","layerRange","getViewLayer","getRange","getInteractionConfig","visibility","rendered","eventHandlers","getLayerBBox","layerRegion","getLayerRegion","removeLayer","updateBBox","recursive","originRange","newRange","updateBBoxByParent","getGlobalPosition","globalX","globalY","getGlobalBBox","globalPosition","parentWidth","parentHeight","parentX","parentY","breaks","pos","getComponents","co","AXIS","findAll","RESPONSIVE_THEME_MAP","DEFAULT_RESPONSIVE_THEME","fields","positionFields","actions","MatrixUtil","transform","setMatrix","radian","G2_GEOM_MAP","column","PLOT_GEOM_MAP","showMarkers","adjustColor","conversionTag","responsive","applyResponsive","renderLabel","geometryParser","originData","processedData","extractScale","adjustColumn","getGeom","columnWidthRatio","geometryTooltip","colorField","EventParser","getGeometryByType","stage","methods","method","registerPlotType","BaseColumnLayer","getValue","getPosition","fill","getTextFill","getTextStroke","textAlign","getTextAlign","textBaseline","getTextBaseLine","adjustPosition","labelRange","shapeRange","getElementShapeBBox","yPosition","dir","shapeColor","shapeOpacity","mappingColor","convertPoint","xValues","xValuesMin","xValueMax","yValues","yValuesMin","yValuesMax","registerLabelComponent","ColumnLabel","defaultGuidelineCfg","lineWidth","getGroup","exp","shapeContainers","createStateManager","manager","_updateStateProcess","onStateChange","_stateChangeProcess","states","state","related","shapes","_getShapes","originAttrs","_getOriginAttrs","shapeOrigin","stateStyle","_getDefaultStateStyle","originAttr","setZIndex","_parserRelated","setStateCfg","_eventParser","onChangeCfg","geoms","geom","shapeContainer","getShapes","eventCfg","styleField","getComponentStateMethod","stateType","children","resetZIndex","obj1","obj2","_INDEX","SCALE_MAPPER","cat","timeCat","axisInstance","getAxisInstance","shouldApply","responsiveTheme","rawLabels","shapeNodes","constraints","rules","nodes","onEnd","updateTicks","origion_nodes","getType","scaleType","getScaleByField","axisIndex","getController","tickLineContainer","bar","inputData","reverse","adjustBar","getLabelOptionsByPosition","BaseBarLayer","percent2Number","endsWith","CROOK_DISTANCE","coordinateBBox","adjustOption","adjustOverlap","overlapArea","prev","prevBox","currBox","near","checkInPanel","adjustItem","initArcPoints","drawTexts","drawLines","getFilteredSum","angleField","filteredData","pre","filteredDataItem","allowOverlap","shapeInfos","getItems","shapeInfo","filteredSum","percent","content","textShape","panelBox","adjustText","layout","rotateLabel","getLabelRotate","ellipsisTexts","getEllipsisText","itemGroups","labelGroup","anchor","arcPoints","inLeft","getLinePath","smooth","radius","breakAt","getEndPoint","labelPosition","smoothPath","straightPath","linePath","getCenter","getRadius","getMatrix","anchors","ele","endAngle","getAngleByPoint","DAY_FIELD","WEEK_FIELD","DATE_FIELD","IS_MONTH_CENTER_FIELD","FORMATTER","MONTHS","WEEKS","register_1","register","lineCount","offscreen_1","getOffScreenContext","util_1","eventObj","isOverEvent","catmullRom2Bezier","crp","setMatrixArrayType","toRadian","degree","startArrowShape","endArrowShape","EVENT_TYPES","defaultCfg","_eventHandlers","_bindEvents","startEvent","processEvent","endEvent","resetEvent","_start","preStart","afterStart","_process","preProcess","process","afterProcess","_end","preEnd","afterEnd","_reset","preReset","reset","afterReset","wrapBehavior","_unbindEvents","eh","vector2","_getPointRadius","_convertArr","catmullRom2bezier","constraint","isLoop","pointList","cp1","cp2","controlPointList","smoothBezier","d1","isInCircle","command","_points2path","prevPoint","nextPoint","cps","hasConstraint","d0","cp0","constaint","first","prePoint","splinePath","unshift","atan2","subPath","transposed","isTransposed","xDim","angleRange","direction","flag","middlePoint","middleConvertPoint","_convertPolarPath","_filterFullCirleLine","connectNulls","lineSize","parseSize","seriesField","parseColor","lineStyle","parseStyle","sizeProps","size","styleProps","iterationTime","iterationIndex","rulesLocker","constraintIndex","currentConstraint","_run","onStart","_iteration","measureNodes","_applyRules","onIteration","constraintPassed","_constraintsTest","constraintsLib","constraintOption","option","usage","_constraintCompare","_constraintAssignment","expression","_chainConstraintCompare","_paddingConstraintCompare","_groupConstraintCompare","_chainConstraintAssign","_paddingConstraintAssign","node","ruleCfg","rule","rulesLib","_applyRule","datum","last","PointLabel","DEFAULT_BAR_THEME","darkStyle","fillOpacity","lightStyle","columnStyle","normal","active","disable","selected","getTextBaseline","xPosition","middle","BarLabel","autoRotateTitle","adjust","stackField","StackedBarLayer","transformDataPercentage","groupField","measures","chain","groupBy","vals","groupTotals","newData","total","itemIdx","fieldIdx","GEOM_MAP","areaStyle","lineJoin","lineCap","wordSpacing","adjustArea","addLine","addPoint","adjustLine","adjustPoint","lineConfig","AreaLayer","plotComponents","lineLabel","areaLabel","renderPlotComponents","getPlotComponents","StackedAreaLayer","DEFAULT_COLUMN_THEME","connectedArea","triggerOn","StackedColumnLayer","xOverlap","yOverlap","includes","HALF_PI","rose","innerRadius","alignTick","sectorStyle","categoryField","radiusField","coordConfig","widthRatio","extractLabel","adjustRoseAdjust","adjustLabelOptions","labelType","labelOptions","RoseLayer","waterfall","VALUE_FIELD","IS_TOTAL","diffLabel","leaderLine","showTotal","waterfallStyle","adjustLegendOptions","adjustMeta","_parseStyle","_parseColor","plotData","prevValue","totalValue","args","isObject","rising","falling","legendOptions","metaOptions","valueFieldMeta","alias","WaterfallLayer","advanceBy","ms","setMilliseconds","DAY_MS","dates","ds","curr","oneJan","rangeBackgroundStyle","rangeSize","statistic","subTickCount","fontSize","pivot","thickness","pin","pointer","rangeSorted","valueText","initG2Shape","gaugeShape","GaugeShape","uniqueId","setOption","textPosition","offsetValue","textStyle","defaultColor","annotationConfigs","statistics","renderStatistic","containerSize","GaugeLayer","quadraticAt","segments","nextParams","params","startTangent","endTangent","startMovePoint","lastStartMovePointIndex","segment","vRatio","u","arrowShape","Group","ShapeBase","Marker","onAttrChange","arc","cx","cy","isHit","r2","r4","Text","parentNode","clip","hasAttribute","createDom","sortDom","afterAttrsChange","getDefaultAttrs","circle","square","diamond","triangle","triangleDown","createPath","Polyline","r1","r3","DAY","miniute","week","combineFormatter","formatters","curText","getNoopFormatter","getPrecisionFormatter","getSuffixFormatter","suffix","_states","_stateStack","_onUpdate","getState","getAllStates","_changeTimer","stateStack","_triggerEvent","emit","getDataByScaleRange","vertical","groupedData","newValues","G2DefaultTheme","plotG2Theme","COLOR_PLATE_10","COLOR_PLATE_20","DESCRIPTION_BOTTOM_MARGIN","legendPosition","TOP_BLEEDING","titleVisible","descriptionVisible","BOTTOM_BLEEDING","bleeding","colors_20","fontFamily","lineHeight","alignWithAxis","lineDash","autoHideLabel","alignWithLabel","innerPadding","boxShadow","LineConfig","TreemapConfig","StepLineConfig","BarConfig","StackedBarConfig","GroupedBarConfig","PercentStackedBarConfig","RangeBarConfig","AreaConfig","StackedAreaConfig","PercentStackedAreaConfig","ColumnConfig","GroupedColumnConfig","StackedColumnConfig","RangeColumnConfig","PercentStackedColumnConfig","PieConfig","DensityHeatmapConfig","HeatmapConfig","WordCloudConfig","RoseConfig","FunnelConfig","StackedRoseConfig","GroupedRoseConfig","RadarConfig","LiquidConfig","HistogramConfig","DensityConfig","DonutConfig","WaterfallConfig","ScatterConfig","BubbleConfig","BulletConfig","CalendarConfig","GaugeConfig","FanGaugeConfig","MeterGaugeConfig","markerPoints","markerPoint","markerPointOpt","trySetScaleMinToZero","getPlotOption","LineActive","LineSelect","singleLineLabelCheck","LineLayer","_getColorMappingField","colorMappingField","getSplinePath","parseShape","_parserNodes","measure","MathUtil","elementDist","elementDistVertical","elementCollision","elementWidth","columnWidth","ringThickness","minRingThickness","textWrapper","textRotation","textAbbreviate","textHide","digitsAbbreviate","datetimeStringAbbrevaite","robustAbbrevaite","nodesResampling","nodesResamplingByAbbrevate","nodesResamplingByChange","nodesResamplingByState","nodeJitter","nodeJitterUpward","clearOverlapping","isNodeOverlap","nodeA","nodeB","current","overlapped","_shape","getDateTimeMode","mapper","campareText","startText","endText","timeDuration","timeCycle","previousText","previous","currentStamp","previousStamp","needAbbrevaite","cycle","times","getAbbrevaiteFormatter","sameSectionFormatter","test","unitMapper","abbravateDigitsByUnit","unitname","order","decimal","numbers","extractNumbers","unitNumber","getUnitByNumber","unitBit","intervalBit","remainder","remainderBit","getDigitsDecimal","getLinearNodesInterval","isKeep","keepCfg","conditions","oddKeep","keep","isOdd","abbravateText","abbreviateBy","resetMatrix","labelShapesContainer","labelShapes","groupedMap","xValue","sortLabels","checkOriginEqual","datumLeft","datumRight","moveInPanel","downFail","checkShapeOverlap","getXYFields","sorted","PointAutoLabel","getShapeInfo","labelStyle","find","originPoints","lastPoint","parsePoints","parsedPoints","_init","spacing","arrow","headSize","valueUpper","valueLower","shapeLower","shapeUpper","_drawTag","pointUpper","pointLower","_drawTagArrow","_drawTagValue","totalHeight","totalWidth","tagArrow","_fadeInTagShape","tagValue","textWidth","cWidth","cEnd","textAdjusted","shouldInShapeLabels","inShapeLabels","autoHideLabels","every","labelBBox","groupedLabels","curGroup","fillWhile","shapeBBox","filteredLabels","filterLabels","todo","uniq","BarAutoLabel","names","valuesOfKey","origin_items","defaultMeta","marginRatio","GroupedBarLayer","metaConfig","PercentStackedBarLayer","AreaPointLabel","adjustAreaLabelsStyle","areaGeometry","areas","getGeometryShapes","getStrokePoints","bgColor","fillWhite","AreaPointAutoLabel","DEFAULT_AREA_THEME","pointStyle","fillStyle","shadowBlur","shadowColor","strokeOpacity","PercentStackedAreaLayer","ColumnAutoLabel","SHAPE_EVENT_MAP","GroupedColumnLayer","StackedColumnLabel","PercentStackedColumnLayer","pie","pieStyle","labelComponent","labelConfig","LabelCtor","getPieLabel","PieLayer","PieLabelConfig","PieLabels","inner","outer","ring","totalLabel","triggerOff","DonutLayer","centralId","statisticClass","adjustLabelDefaultOptions","removeChild","wrapperNode","labelStyleConfig","scatter","pointSize","quadrant","trendline","plotOptions","isValidLinearValue","xAxisType","yAxisType","timeLineInteraction","keyField","titleField","extractTooltip","ScatterLayer","confidence","quadrantLabel","quadrantLine","uid","Gauge","gauge","parsePoint","ringRadius","starAngle","currentAngle","drawBarGauge","drawInSideAxis","drawGauge","drawOutSideAxis","drawAxis","drawPivot","drawBottomRing","drawRangeColor","drawCurrentRing","rangeStyle","valueToAngle","path2","getPath","drawRing","backgroundStyle","path3","startValue","drawRect","tickLineStyle","result1","sortedLastIndex","colorIndex","getAngleRange","angleValue","param","xA1","yA1","xB1","yB1","thick","xA2","yA2","xB2","yB2","largeArcFlag","pivotConfig","bigCircle","smCircle","dirVec","angle1","angle2","progress","DEFAULT_COLOR","isEntered","processProps","barSize","getSize","barStyle","progressStyle","parseColorProps","hasKey","styleUpdateAnimation","updateColorConfigByStyle","updateMarkers","markers","markerCfg","progressSize","progressContainer","rect","colorOption","markerLength","animationOptions","getUpdateAnimationOptions","progressShapes","ProgressLayer","SINGLE_TYPE","isSingleGraph","single","isSingle","components","it","viewMinX","viewMaxX","viewMinY","viewMaxY","top_padding","hermite","factorTimes2","factor1","factor2","factor3","factor4","bezier","inverseFactor","inverseFactorTimesTwo","zScale","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","rotateX","rotateY","rotateZ","tempA","tempB","BrowserInfo","version","os","NodeInfo","platform","BotInfo","bot","userAgentRules","operatingSystemRules","parseUserAgent","ua","matchedRule","matched","_a","browser","regex","uaMatch","versionParts","output","ii","createVersionParts","detectOS","getNodeVersion","detect","userAgent","navigator","parseToLines","lines","LayerConfig","ViewConfig","PlotConfig","TinyLayerConfig","ProgressConfig","RingProgressConfig","TinyColumnConfig","TinyAreaConfig","TinyLineConfig","OverlappedComboPlotConfig","registerResponsiveConstraint","IConstraint","registerResponsiveRule","registerResponsiveTheme","util_2","text_1","mag","analyzePoints","totalLength","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","runClearTimeout","Item","nextTick","env","argv","versions","addListener","once","removeListener","removeAllListeners","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","base_1","Component","textContent","tShape","wrappedTextArr","wrappedText","chars","breakIndex","breakText","propertyMapping","themeConfig","_needDraw","_styleParser","localProps","_isVisible","_lineParser","_gridParser","_tickLineParser","_labelParser","_titleParser","propos","propsConfig","applyThemeConfig","alternateColor","restLabelProps","parseFormatter","titleConfig","defaultStyle","getDefaultStyle","baseConfig","stateValue","_getState","toArray","minValue","maxValue","getScale","extractXValue","_extractValues","getDefaultTextAlign","textConfig","originConfig","rest","getConfig","parseCallBack","labelProps","parseOffset","onActive","getAllAxisLabels","labelData","con","disableStyle","fontWeight","axisComponentOption","labelArr","scaleField","beforeCompare","getAllLabels","geomLabels","POSITION_MAPPER","getPositionField","shouldActive","getXY","processState","showTooltip","expected","originItems","getValidScrollbarConfig","_cfg","categorySize","onChangeFn","throttle","onChange","leading","paddingTop","paddingRight","paddingBottom","paddingLeft","thumbOffset","isEqual","trackLen","renderScrollbar","measureScrollBar","changeViewData","getScrollRange","scrollbar","thumbLen","isHorizontal","yScales","getYScales","cnt","xScaleCfg","yScalesCfg","clamp","startIdx","endIdx","origData","metaCfg","origAnimate","getValidSliderConfig","foregroundStyle","handlerStyle","trendCfg","curStart","curEnd","renderSlider","getSliderData","slider","getSliderConfig","minText","maxText","isArea","getSliderTrendData","getSliderMinMaxText","getValidTimeLineConfig","loop","auto","speed","setAnimate","isAnimate","renderTimeLine","viewBBox","getTicks","timeLineConfig","tl","defaultCurrentTick","timeline","originAnimation","getFilterData","filterData","firstRender","BEFORE_RENDER","BEFORE_PAINT","isPlay","changePlayStatus","onTimeSelectMouseMove","stopPropagation","preventDefault","pageX","prevX","setTimeSelectX","onTimeSelectMouseUp","syncCurrnentTick","removeEventListener","onTimeSelectMouseDown","originalEvent","currentTick","renderPlayButton","renderTimeSelect","timeLineButton","timeSelect","playHandler","cancelAnimationFrame","initEvent","getTimeLinePath","timeLine","tickPosList","textList","lastX","tickValue","timeSelectText","adjustTickIndex","timeSelectX","startPlay","isSync","updateElement","renderMarker","initElement","startMarker","getStartMarkerPath","pauseGroupMarker","pauseLeftMarker","pauseRightMarker","sideLength","innerPaddingComponents","outerPaddingComponents","checkIfExist","clearOuterComponents","_getInnerAutoPadding","components_bbox","_getAxis","_mergeBBox","_getLegend","panelPadding","_getPanel","bboxes","getAxisComponents","layoutBBox","getLayoutBBox","legendContainer","getLegendShapes","groups","rightDist","leftDist","topDist","bottomDist","_adjustLegend","move","_getLegendInnerPadding","_mergeBleeding","backgroundColor","PLOT_THEME_MAP","styleMapShape","g2Theme","geometryTheme","styleKey","convertThemeToG2Theme","plotTheme","category","lineNumber","dateTime","onResize","debounce","getCanvasSize","offsetWidth","offsetHeight","getCanvasDOM","changeSize","globalTheme","updateCanvasStyle","styles","display","verticalAlign","resizeObserver","unobserve","disconnect","bindForceFit","observe","initGCanvas","G","SVG","MapShim","Map","getIndex","entry","class_1","__entries__","configurable","entries","ctx","_i","isBrowser","global$1","global","self","Function","requestAnimationFrame$1","transitionKeys","mutationObserverSupported","MutationObserver","ResizeObserverController","connected_","mutationEventsAdded_","mutationsObserver_","observers_","onTransitionEnd_","refresh","leadingCall","trailingCall","lastCallTime","resolvePending","proxy","timeoutCallback","timeStamp","addObserver","observer","connect_","removeObserver","observers","disconnect_","updateObservers_","activeObservers","gatherActive","hasActive","broadcastActive","attributes","childList","characterData","subtree","_b","propertyName","getInstance","instance_","defineConfigurable","writable","getWindowOf","ownerDocument","defaultView","emptyRect","createRectInit","toFloat","getBordersSize","positions","getHTMLElementContentRect","clientWidth","clientHeight","getComputedStyle","paddings","positions_1","getPaddings","horizPad","vertPad","boxSizing","documentElement","isDocumentElement","vertScrollbar","horizScrollbar","isSVGGraphicsElement","SVGGraphicsElement","SVGElement","getContentRect","getSVGContentRect","ResizeObservation","broadcastWidth","broadcastHeight","contentRect_","isActive","broadcastRect","ResizeObserverEntry","rectInit","Constr","contentRect","DOMRectReadOnly","ResizeObserverSPI","controller","callbackCtx","activeObservations_","observations_","callback_","controller_","callbackCtx_","observations","clearActive","observation","WeakMap","ResizeObserver","addEvent","eventType","onEvents","getEventObj","isShapeInView","onLayerEvent","onMove","shape1","shape2","lastShape","groupName","parentName","isPointInBBox","subLayers","layerProps","Line","main","mini","isSmooth","topLinePoints","bottomLinePoints","topPath","getStraightPath","bottomPath","parseGradient","COLOR_MAPPER","_needParserColor","_getSizeProps","_getStyleProps","guide","_needParseAttribute","sizeField","shapeName","mappingField","_parseColorByField","shapeCfg","getValuesByField","plotInfo","getPositionByRatio","dataPoints","currentX","animationConfig","shapeData","setClip","onFrame","yText","yRatio","getDataByPosition","afterRenderResponsive","preRender","polygonA","polygonB","minThickness","vector_horizontal","mag_horizontal","adjustAngle","distX","distY","startPoint","shapeBbox","shapeId","getShapeById","getShapeId","originX","originY","labelLine","origin_position","tolerance","nodesClone","getGlobalTolerance","findPrevious","getNodeByNumber","stateNodes","extract_data","min_node","max_node","median","median_node","getStateNodes","initialProps","isState","isTime","wrapperText","ApplyResponsiveLineLabel","DEFAULT_STYLE","ACTIVE_STYLE","SELECTED_STYLE","dataArray","getDataArray","_renderPoints","_addInteraction","dataItemIdx","isMatch","pointAttrs","symbol","startsWith","imageUrl","img","_animatePoint","_renderLabel","labelCfg","pointShape","selectedPoint","_onActive","_onInactive","_onSelected","endState","Treemap","maxLevel","isDrilldown","treemapData","getTreemapData","rootData","level","getAllNodes","depth","isNested","adjustStyleByDepth","rectStyle","interactionCfg","inter","Ctr","INTERACTION_MAP","rows","showLabel","isLeaf","cliperHeight","y0","labelHeight","getLabelHeight","parentLabelOffset","c_rows","x0","fillColorField","fieldName","PARENT_NODE_OFFSET","nested","TreemapLayer","sumValue","alpha","beta","newRatio","minRatio","nodeValue","row","dice","node_x","node_y","drilldown","startNode","itemWidth","itemHeight","currentNode","currentDepth","drillingDown","cache","tempoData","adjustScale","initGeometry","saveOriginMapping","startNodeName","onInteraction","currentWidth","rootItem","getRootItem","parents","findParent","targetParent","rollingUp","updateRoot","previousDepth","mappingInfo","originMapping","mapping","mappingCfg","DrillDownInteraction","onItemGroupToggleActive","itemGroup","rectShape","itemActiveBackgroundStyle","itemBackgroundStyle","offEvents","itemPadding","separator","separatorStyle","maxItemWidth","renderItems","startX","startY","topPadding","rightPadding","bottomPadding","leftPadding","backgroundRect","class","cursor","textShapeBBox","backgroundRectAttr","sepShape","emitEventName","clickCallback","dblclickCallback","mouseEnterCallback","mouseLeaveCallback","getTemShapes","tem_shapes","capture","getRect","hideLabel","xRatio","transformMatrix","tem_container","stopAnimate","groupTransform","findShapeByName","shrinkTemp","tailShape","tailWidth","abbreviateWidth","isLeafNode","adjustLeafLabel","adjustParentLabel","labelText","LEAF_LABEL_OFFSET","StepLineLayer","StepLine","Bar","StackedBar","StackedBarLabel","StackedBarAutoLabel","GroupedBar","PercentStackedBar","RangeBar","shapeCaches","setShapeCache","appear","RangeBarLayer","leftStyle","rightStyle","getTextColor","doAnimation","getShapeBbox","la","lb","shapeMinX","shapeMaxX","shapeWidth","shapeCache","clipInFromCenter","updateFromCenter","fromPath","getShapeFromCache","toPath","animationName","Area","StackedArea","ComponentsInfo","componentInfo","interpolateY","leftPoint","rightPoint","getXIndex","scaleFactor","groupedPoints","labelPoints","pointArray","labelPoint","drawLabel","labelSize","getFontSize","autoScale","maxHeight","xRange","resolution","interpolatedPoints","getInterpolatedPoints","getLabelBbox","fitOption","aspect","justTest","bisection","testFit","fit","testOption","maxIteration","passesTest","x1_index","ceiling","ceilingFloor","StackedAreaPointLabel","StackedAreaPointAutoLabel","PercentStackedArea","Column","ApplyResponsiveColumnLabel","GroupedColumn","StackedColumn","_areaStyle","_lineStyle","groupedShapes","_getGroupedShapes","_drawConnection","_initialAnimation","_onDisabled","originColor","_getShapeStyle","shapeType","styleName","mappedStyle","getClip","StackedColumnAutoLabel","RangeColumn","RangeColumnLayer","topStyle","bottomStyle","textBaeline","shapeMinY","shapeMaxY","shapeHeight","DEFAULT_OFFSET","clipInFromCenterVertical","updateFromCenterVertical","PercentStackedColumn","Pie","createElement","getContext","measureTextWidth","memoize","font","fontStyle","fontVariant","measureText","maxWidth","leftText","DOT_WIDTH","currentText","leftWidth","prevLabel","resolveCollision","prevBBox","pos1","pos2","yMover","actualPos","leftHalf","isLeft","_antiCollision","isRight","totalR","maxLabelsCount","overlapping","labelBox","targets","previousBox","posInCompositeBox","topLabels","bottomLabels","adjustLabels","isBottom","ry","maxLabelWidth","rx","rxPow2","ryPow2","boxCenter","dyPow2","endPoint","distance_offset","xPos","_adjustOptions","halves","getScalesByDim","polarRadius","targetAngle","middleAngle","anchorPoint","inflectionPoint","shapeIndex","_anchor","_inflection","_data","textGroup","_side","texts","formatted","textAttrs","lowerText","lowerTextAttrs","maxCountForOneSide","sidePadding","canvasHeight","totalH","MIN_VALUE","labelY","labelWidth","drawnLabels","_drawLabel","_drawLabelLine","x_dir","point1","point2","point3","starter","DensityHeatmap","intensity","defaultConfig","DensityHeatmapLayer","paletteCache","createElements","prepareRange","prepareSize","prepareBlur","prepareGreyScaleBlurredCircle","drawWithRange","clearShadowCanvasCtx","getAttribute","getFields","getDefaultValue","getDefaultSize","blur","styleOption","colorize","colorAttr","pixels","palette","colorUtil","gradient","circleCanvas","grayScaleCanvas","circleRadius","clearRect","shadowOffsetX","shadowOffsetY","beginPath","closePath","drawGrayScaleBlurredCircle","globalAlpha","drawImage","getShadowCanvasCtx","shadowCanvas","globalCompositeOperation","getImageShape","imageShape","valueField","getDrawCfg","colored","getImageData","putImageData","Image","toDataURL","LinearHeatmap","background","renderColorBackground","renderImageBackground","callbackCfg","dataSlides","getDarkOptions","getLayout","getDefaultWidth","getDefaultHeight","plotContainer","getScales","colorScale","renderHorizontal","renderVertical","legendLayout","addInteraction","origin_bbox","gridWidth","gridHeight","gridLineContainer","gridColors","valueStep","appendInfo","dataSlide","getDataSlide","gridlineStyle","plotWidth","plotHeight","getTopPosition","targetInfo","relativeData","getFilteredData","slide","heatmap","legendLabel","heatmapBackground","changeShape","mappingSize","disableMappingSize","Heatmap","gridSize","gridAlign","align","circleToRect","rectToCircle","rectSizeMapping","circleSizeMapping","rectDisableSizeMapping","circleDisableSizeMapping","geomConfig","getGridSize","addRect","addCircle","shapeStyle","styleConfig","shapeSize","sizeRatio","curvePath","getCircleCurve","rectPath","getRectPath","ps","offsetRatio","circlePath","getCirclePath","HeatmapLayer","getContent","interactiveEvents","offEvent","colorStep","tickStep","gradientColor","ticklineStyle","tri_path","tri_height","anchorStyle","tri_width","geomEventHandler","moveAnchor","mouseleaveHandler","mouseleave","_toolTipsAction","dimension","evt","_toolTips","weight","_configHoverAction","onWordCloudHover","_enableToolTips","enableToolTips","_initToolTips","_render","follow","inPanel","_targetCanvas","maskImage","_handleMaskImage","image","crossOrigin","onload","naturalHeight","naturalWidth","_startWithMaskImage","onerror","_handleG2PlotConfig","targetCtx","wordStyle","rotation","minFontSize","maxFontSize","minRotation","maxRotation","maskImageCanvas","maskImageContext","bctx","fillRect","bgPixel","imageData","newImageData","createImageData","clearCanvas","_scaleMaskImageCanvas","maskCanvasScaled","imageSmoothingEnabled","_transformWhite2BlackPixels","newCfg","itemTpl","setImmediate","msSetImmediate","webkitSetImmediate","mozSetImmediate","oSetImmediate","postMessage","callbacks","message","stopImmediatePropagation","clearImmediate","msClearImmediate","webkitClearImmediate","mozClearImmediate","oClearImmediate","isSupported","fillText","hanWidth","mWidth","shuffleArray","WordCloud","tagName","appendChild","settings","animatable","drawOutOfBound","drawMask","maskColor","maskGapWidth","wait","abortThreshold","abort","rotateRatio","rotationSteps","shuffle","ellipticity","classes","onWordCloudClick","interactionItems","fontKey","maxWeight","isCardioid","theta","thetaPrime","ngx","ngy","maxRadius","escapeTime","maskRectWidth","rotationRange","random_hsl_color","getTextClasses","hovered","interactive","infoGrid","getInfoGridFromMouseTouchEvent","currentTarget","getBoundingClientRect","touches","eventX","eventY","defaultHoverAction","wordcloudhover","wordcloudclick","pointsAtRadius","getPointsAtRadius","T","exceedTime","getTextInfo","rotateDeg","getRealFontSize","mu","fcanvas","fctx","willReadFrequently","fw","fh","boxWidth","boxHeight","fgw","fgh","fillTextOffsetX","fillTextOffsetY","cgh","cgw","setAttribute","gy","occupied","gx","bounds","singleGridLoop","gw","gh","fillTextWidth","fillTextHeight","drawText","getInteractionItemById","save","transX","transY","restore","span","transformRule","styleRules","whiteSpace","webkitTransform","msTransform","transformOrigin","webkitTransformOrigin","msTransformOrigin","cssProp","attribute","className","fillGridAt","tryToPutWordAtPoint","gxy","canFitText","updateGrid","rot","putWord","sendEvent","cancelable","detail","createEvent","initCustomEvent","dispatchEvent","webkitTapHighlightColor","stopInteraction","loopingFunction","stoppingFunction","listener","anotherWordCloudStart","drawn","canceled","Rose","Funnel","_shouldResetPercentages","_shouldResetLabels","_shouldResetCompareTexts","_legendsListenerAttached","_onLegendContainerMouseDown","legendItem","refreshPercentages","refreshLabels","dynamicHeight","_findCheckedDataByMouseDownLegendItem","_genCustomFieldForDynamicHeight","compareField","_updateDataForCompare","refreshCompareTexts","adjustProps","_reduceDataForCompare","yValue","percentage","yValueUpper","yValueLower","compareText","adjustFunnel","funnel","funnelStyle","htmlContent","clss","elMarker","CONTAINER_CLASS","elRoot","TITLE_CLASS","elTitle","MARKER_CLASS","LIST_CLASS","pairs","compareValues","compareValue","LIST_ITEM_CLASS","elListItem","NAME_CLASS","VALUE_CLASS","appearDuration","_animationAppearTimeoutHandler","fadeInPercentages","fadeInCompareTexts","fadeInLabels","enter","resetLabels","resetPercentages","resetCompareTexts","percentageContainer","_findPercentageContainer","compareTextContainer","_findCompareTextContainer","checkedData","_findCheckedDataInNewData","adjustTimestamp","_eachShape","datumLower","datumUpper","percentageLine","valueWidth","textProc","percentageText","valueProc","percentageValue","eachProc","lastBBox","members","_findPercentageMembersInContainerByIndex","currBBox","eachCalc","member","fadeOutPercentages","fadeOutDuration","fadeInDuration","createIfNotFound","lineId","textId","valueId","_calcRefreshFadeDurations","updateDuration","enterDuration","datumTop","compareTop","__compare__","_getAdjustedTextFillByShape","_findLabelInContainerByIndex","targetShape","fadeOutLabels","shapeParentBBox","fadeOutCompareTexts","_findCheckedData","dataLen","_getGeometry","ratioUpper","ratioLower","datumIndex","dataLength","flags","uncheckedXValues","checkedXValues","compareValueFirstVisited","newDatum","yValuesNext","yTotal","FunnelLayer","getPoints","pointInfo","isPyramid","yMin","yMax","xMin","xMax","_getRectPoints","parsePath","nextPoints","yRatios","yOffset","yRatiosNext","yValueNext","_getFunnelPath","getMarker","firstPoint","firstPointX","pointX","_getRectPath","isInPolar","funnelScaleInX","shapeTargetAttrs","funnelScaleInY","StackedRose","StackedRoseLayer","GroupedRose","GroupedRoseLayer","Radar","angleAxis","radiusAxis","gridType","RadarLayer","changeValue","Liquid","shouldFadeInAnnotation","liquidStyle","adjustLiquid","liquid","statisticConfig","extractStatistic","fadeInAnnotation","colorStyle","calcAnnotationColorStyle","forIn","darkColorStyle","waveColor","strokeWidth","LiquidLayer","ShapeUtil","ValueUtil","getLineAttrs","defaultAttrs","getWaterWavePositions","waveLength","getWaterWavePath","waterLevel","phase","curves","_phase","waveRight","cp","minP","xWidth","waves","clipCircle","waveCount","wave","addWaterWave","liquidMoveIn","wrap","wrapTargetOpacity","wavesTargetMatrix","Histogram","binField","binWidth","binNumber","originData_copy","sortBy","rangeWidth","_binWidth","_defaultBinNumber","bins","bin","getBin","binName","HistogramLayer","Density","kernels","epanechnikov","gaussian","uniform","quartic","triweight","cosinus","originXAxisConfig","kernel","kernelFunc","originDataCopy","_binNumber","samples","densities","density","kernelDensityEstimator","DensityLayer","Donut","preRenderResponsive","adjustOptions","triggerOnEvent","displayData","parseStatisticData","htmlString","getStatisticHtmlString","updateHtml","triggerOffEvent","getTotalValue","getStatisticTemplate","html","getStatisticSize","statisticTemplate","getSingleDataTemplate","getTwoDataTemplate","triggerOnConfig","isElement","htmlNode","setDomPosition","innerHTML","updatePosition","alignX","alignY","getOuterWidth","getOuterHeight","containerStyle","valueStyle","classId","Waterfall","isStroke","isFill","linkPath","shapeBox","diff","yPos","WaterfallLabel","formattedText","Scatter","quadrantGroups","regionData","lineData","xRegion","xBaseline","yBaseline","verticalLineData","horizontalLineData","topQuadrant","bottomQuadrant","rightTopQuadrant","rightBottomQuadrant","leftTopQuadrant","leftBottomQuadrant","getRegionStyle","getLabelConfig","regionStyle","REGRESSION_MAP","regressionExp","regressionLinear","loess","regressionLoess","regressionLog","poly","regressionPoly","regressionPow","quad","regressionQuad","showConfidence","confidenceStyle","reg","xscale_view","yscale_view","trendlineData","LinearScale","yRange","confidencePath","getConfidencePath","getTrendlinePoints","conf","rSquared","confidenceData","upperPoints","lowerPoints","y0Ratio","y1Ratio","viewScale","dataMin","minBy","dataMax","maxBy","maxRatio","trendMin","trendMax","inactive","Bubble","BubbleLayer","drawPoints","Bullet","bullet","STACK_FIELD","X_FIELD","Y_FIELD","rangeColors","measureSize","markerSize","markerColors","markerStyle","trigger","removeInteraction","ranges","bulletRect","rangeMax","bulletTarget","markerColor","measureColors","adjustYAxisOptions","dataOptions","dataIdx","valueIdx","BulletLayer","rangeBox","drawBulletTicks","ticksStyle","tickPosition","tickOffset","tickIdx","tickText","tickLineCfg","drawTarget","Calendar","dateField","dateRange","getDateRange","generateCalendarData","polygonConfig","monthWeek","getMonthCenterWeek","weeks","months","CalendarLayer","parseDateRange","fromDate","toDate","dateString","getWeek","monthWeekMap","append","isLastWeekOfMonth","zIndex","isLastDayOfMonth","FanGauge","rangeColor","bottomRatio","1","siderTexts","renderSideText","allAnnotations","FanGaugeLayer","MeterGauge","MeterGaugeLayer","RingConfig","GroupColumnConfig","GroupBarConfig","PercentageStackAreaConfig","PercentageStackBarConfig","PercentageStackColumnConfig","StackAreaConfig","StackBarConfig","StackColumnConfig","Ring","GroupColumn","GroupBar","PercentageStackArea","PercentageStackBar","PercentageStackColumn","StackArea","StackBar","StackColumn","Progress","updateCfg","convert","origin_attr","RingProgress","getThickness","RingProgressLayer","ringProgress","TinyColumn","columnSize","columnNumber","getColumnNum","TinyColumnLayer","onColumnClick","onColumnDblclick","onColumnMousemove","onColumnMousedown","onColumnMouseup","onColumnMouseenter","onColumnMouseleave","onColumnContextmenu","TinyArea","TinyAreaLayer","onAreaClick","onAreaDblclick","onAreaMousemove","onAreaMousedown","onAreaMouseup","onAreaMouseenter","onAreaMouseleave","onAreaContextmenu","onLineClick","onLineDblclick","onLineMousemove","onLineMousedown","onLineMouseup","onLineMouseenter","onLineMouseleave","onLineContextmenu","TinyLine","TinyLineLayer","autoRotateLabel","colorMapping","synchroTick","createComboLayers","layerOptionsFilter","legendInfo","axisInfo","paddingComponents","globalComponents","singleGeomCount","backLayer","layerCfg","overlapConfig","getOverlappedConfig","viewLayerCtr","viewLayerProps","ComboUtil","getAxisData","globalOptions","getLegendData","topLayer","colorCfg","getColorConfig","overlappingLegend","legendItems","mergeLegendData","createLegend","legendPadding","getOverlappingPadding","axisComponents","axesLayout","leftAxis","containerLayer","drawYGrid","clearComponents","filterOptions","getGlobalOptions","mergeAxisScale","createAxis","shapeFactory","checked","markerValue","legendTheme","legendCfg","maxSize","titleDistance","autoWrap","itemMarginBottom","backgroundPadding","maxLength","Category","setLocation","filteredValue","pull","addLegendInteraction","paddingBbox","axisOptions","sameScaleTest","scaleValues","getCatScale","getLinearScale","mergeXAxis","isSameScale","calValues","linearScale","mergeYAxis","scaleMin","scaleMax","sampleDataSource","originalData","sampleField","tickValues","getAxisTicks","parser","toAxisStyle","verticalFactor","scalesInfo","singleGraph","scaleInfo","xAxisScale","xAxisHeight","yAxisScale","leftContainer","leftBbox","temp_width","axisLayout","axisPadding","ypos","gridCfg","gridGroup","labelItems","getUniqueItems","indexOfArray","tooltipTheme","panelGroup","coodinateBBox","frontgroundGroup","Html","renderTooltip","tooltipItems","getTooltipItems","isFinite","xv","yv","X","Float64Array","Y","ux","uy","visitPoints","iterations","dx","dy","determination","uY","predict","SSE","SST","sse","sst","interpose","xmin","xmax","LOG10E","iter","found","mp","ols","uX","uXY","uX2","delta","slope","domain","YL","XY","XYL","X2Y","ly","xy","X2","intercept","bandwidth","bw","yhat","residuals","robustWeights","i0","i1","edge","W","denom","xk","yk","tricube","xkw","updateInterval","medianResidual","logarithmic","lx","quadratic","X3","X4","n0","X2X2","polynomial","coefficients","lhs","rhs","coef","gaussianElimination","uncenter","power","YS"],"mappings":"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","file":"g2plot.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"G2Plot\"] = factory();\n\telse\n\t\troot[\"G2Plot\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 160);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isArrayLike = function (value) {\n    /**\n     * isArrayLike([1, 2, 3]) => true\n     * isArrayLike(document.body.children) => true\n     * isArrayLike('abc') => true\n     * isArrayLike(Function) => false\n     */\n    return value !== null && typeof value !== 'function' && isFinite(value.length);\n};\nexports.default = isArrayLike;\n//# sourceMappingURL=is-array-like.js.map","import isArrayLike from './is-array-like';\nvar contains = function (arr, value) {\n    if (!isArrayLike(arr)) {\n        return false;\n    }\n    return arr.indexOf(value) > -1;\n};\nexport default contains;\n//# sourceMappingURL=contains.js.map","import isArrayLike from './is-array-like';\nvar filter = function (arr, func) {\n    if (!isArrayLike(arr)) {\n        return arr;\n    }\n    var result = [];\n    for (var index = 0; index < arr.length; index++) {\n        var value = arr[index];\n        if (func(value, index)) {\n            result.push(value);\n        }\n    }\n    return result;\n};\nexport default filter;\n//# sourceMappingURL=filter.js.map","import filter from './filter';\nimport contains from './contains';\n/**\n * Flattens `array` a single level deep.\n *\n * @param {Array} arr The array to inspect.\n * @param {Array} values The values to exclude.\n * @return {Array} Returns the new array of filtered values.\n * @example\n * difference([2, 1], [2, 3]);  // => [1]\n */\nvar difference = function (arr, values) {\n    if (values === void 0) { values = []; }\n    return filter(arr, function (value) { return !contains(values, value); });\n};\nexport default difference;\n//# sourceMappingURL=difference.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar toString = {}.toString;\nvar isType = function (value, type) { return toString.call(value) === '[object ' + type + ']'; };\nexports.default = isType;\n//# sourceMappingURL=is-type.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * 是否为函数\n * @param  {*} fn 对象\n * @return {Boolean}  是否函数\n */\nvar is_type_1 = require(\"./is-type\");\nexports.default = (function (value) {\n    return is_type_1.default(value, 'Function');\n});\n//# sourceMappingURL=is-function.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// isFinite,\nvar isNil = function (value) {\n    /**\n     * isNil(null) => true\n     * isNil() => true\n     */\n    return value === null || value === undefined;\n};\nexports.default = isNil;\n//# sourceMappingURL=is-nil.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar is_type_1 = require(\"./is-type\");\nexports.default = (function (value) {\n    return Array.isArray ?\n        Array.isArray(value) :\n        is_type_1.default(value, 'Array');\n});\n//# sourceMappingURL=is-array.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = (function (value) {\n    /**\n     * isObject({}) => true\n     * isObject([1, 2, 3]) => true\n     * isObject(Function) => true\n     * isObject(null) => false\n     */\n    var type = typeof value;\n    return value !== null && type === 'object' || type === 'function';\n});\n//# sourceMappingURL=is-object.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar is_array_1 = require(\"./is-array\");\nvar is_object_1 = require(\"./is-object\");\nfunction each(elements, func) {\n    if (!elements) {\n        return;\n    }\n    var rst;\n    if (is_array_1.default(elements)) {\n        for (var i = 0, len = elements.length; i < len; i++) {\n            rst = func(elements[i], i);\n            if (rst === false) {\n                break;\n            }\n        }\n    }\n    else if (is_object_1.default(elements)) {\n        for (var k in elements) {\n            if (elements.hasOwnProperty(k)) {\n                rst = func(elements[k], k);\n                if (rst === false) {\n                    break;\n                }\n            }\n        }\n    }\n}\nexports.default = each;\n//# sourceMappingURL=each.js.map","import each from './each';\nimport isFunction from './is-function';\nvar keys = Object.keys ? function (obj) { return Object.keys(obj); } : function (obj) {\n    var result = [];\n    each(obj, function (value, key) {\n        if (!(isFunction(obj) && key === 'prototype')) {\n            result.push(key);\n        }\n    });\n    return result;\n};\nexport default keys;\n//# sourceMappingURL=keys.js.map","import isNil from './is-nil';\nimport keys from './keys';\nfunction isMatch(obj, attrs) {\n    var _keys = keys(attrs);\n    var length = _keys.length;\n    if (isNil(obj))\n        return !length;\n    for (var i = 0; i < length; i += 1) {\n        var key = _keys[i];\n        if (attrs[key] !== obj[key] || !(key in obj)) {\n            return false;\n        }\n    }\n    return true;\n}\nexport default isMatch;\n//# sourceMappingURL=is-match.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isObjectLike = function (value) {\n    /**\n     * isObjectLike({}) => true\n     * isObjectLike([1, 2, 3]) => true\n     * isObjectLike(Function) => false\n     * isObjectLike(null) => false\n     */\n    return typeof value === 'object' && value !== null;\n};\nexports.default = isObjectLike;\n//# sourceMappingURL=is-object-like.js.map","import isObjectLike from './is-object-like';\nimport isType from './is-type';\nvar isPlainObject = function (value) {\n    /**\n     * isObjectLike(new Foo) => false\n     * isObjectLike([1, 2, 3]) => false\n     * isObjectLike({ x: 0, y: 0 }) => true\n     * isObjectLike(Object.create(null)) => true\n     */\n    if (!isObjectLike(value) || !isType(value, 'Object')) {\n        return false;\n    }\n    if (Object.getPrototypeOf(value) === null) {\n        return true;\n    }\n    var proto = value;\n    while (Object.getPrototypeOf(proto) !== null) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    return Object.getPrototypeOf(value) === proto;\n};\nexport default isPlainObject;\n//# sourceMappingURL=is-plain-object.js.map","import isFunction from './is-function';\nimport isMatch from './is-match';\nimport isArray from './is-array';\nimport isPlainObject from './is-plain-object';\nfunction find(arr, predicate) {\n    if (!isArray(arr))\n        return null;\n    var _predicate;\n    if (isFunction(predicate)) {\n        _predicate = predicate;\n    }\n    if (isPlainObject(predicate)) {\n        _predicate = function (a) { return isMatch(a, predicate); };\n    }\n    if (_predicate) {\n        for (var i = 0; i < arr.length; i += 1) {\n            if (_predicate(arr[i])) {\n                return arr[i];\n            }\n        }\n    }\n    return null;\n}\nexport default find;\n//# sourceMappingURL=find.js.map","function findIndex(arr, predicate, fromIndex) {\n    if (fromIndex === void 0) { fromIndex = 0; }\n    for (var i = fromIndex; i < arr.length; i++) {\n        if (predicate(arr[i], i)) {\n            // 找到终止循环\n            return i;\n        }\n    }\n    return -1;\n}\nexport default findIndex;\n//# sourceMappingURL=find-index.js.map","import isNil from './is-nil';\nimport isArray from './is-array';\nvar firstValue = function (data, name) {\n    var rst = null;\n    for (var i = 0; i < data.length; i++) {\n        var obj = data[i];\n        var value = obj[name];\n        if (!isNil(value)) {\n            if (isArray(value)) {\n                rst = value[0]; // todo 这里是否应该使用递归，调用 firstValue @绝云\n            }\n            else {\n                rst = value;\n            }\n            break;\n        }\n    }\n    return rst;\n};\nexport default firstValue;\n//# sourceMappingURL=first-value.js.map","import isArray from './is-array';\n/**\n * Flattens `array` a single level deep.\n *\n * @param {Array} arr The array to flatten.\n * @return {Array} Returns the new flattened array.\n * @example\n *\n * flatten([1, [2, [3, [4]], 5]]);  // => [1, 2, [3, [4]], 5]\n */\nvar flatten = function (arr) {\n    if (!isArray(arr)) {\n        return [];\n    }\n    var rst = [];\n    for (var i = 0; i < arr.length; i++) {\n        rst = rst.concat(arr[i]);\n    }\n    return rst;\n};\nexport default flatten;\n//# sourceMappingURL=flatten.js.map","import isArray from './is-array';\n/**\n * Flattens `array` a single level deep.\n *\n * @param {Array} arr The array to flatten.\n * @param {Array} result The array to return.\n * @return {Array} Returns the new flattened array.\n * @example\n *\n * flattenDeep([1, [2, [3, [4]], 5]]);  // => [1, 2, 3, 4, 5]\n */\nvar flattenDeep = function (arr, result) {\n    if (result === void 0) { result = []; }\n    if (!isArray(arr)) {\n        result.push(arr);\n    }\n    else {\n        for (var i = 0; i < arr.length; i += 1) {\n            flattenDeep(arr[i], result);\n        }\n    }\n    return result;\n};\nexport default flattenDeep;\n//# sourceMappingURL=flatten-deep.js.map","import isArray from './is-array';\nvar getRange = function (values) {\n    // 存在 NaN 时，min,max 判定会出问题\n    var filterValues = values.filter(function (v) { return !isNaN(v); });\n    if (!filterValues.length) { // 如果没有数值则直接返回0\n        return {\n            min: 0,\n            max: 0,\n        };\n    }\n    if (isArray(values[0])) {\n        var tmp = [];\n        for (var i = 0; i < values.length; i++) {\n            tmp = tmp.concat(values[i]);\n        }\n        filterValues = tmp;\n    }\n    var max = Math.max.apply(null, filterValues);\n    var min = Math.min.apply(null, filterValues);\n    return {\n        min: min,\n        max: max,\n    };\n};\nexport default getRange;\n//# sourceMappingURL=get-range.js.map","var arrPrototype = Array.prototype;\nvar splice = arrPrototype.splice;\nvar indexOf = arrPrototype.indexOf;\nvar pull = function (arr) {\n    var values = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        values[_i - 1] = arguments[_i];\n    }\n    for (var i = 0; i < values.length; i++) {\n        var value = values[i];\n        var fromIndex = -1;\n        while ((fromIndex = indexOf.call(arr, value)) > -1) {\n            splice.call(arr, fromIndex, 1);\n        }\n    }\n    return arr;\n};\nexport default pull;\n//# sourceMappingURL=pull.js.map","import isArrayLike from './is-array-like';\nvar splice = Array.prototype.splice;\nvar pullAt = function pullAt(arr, indexes) {\n    if (!isArrayLike(arr)) {\n        return [];\n    }\n    var length = arr ? indexes.length : 0;\n    var last = length - 1;\n    while (length--) {\n        var previous = void 0;\n        var index = indexes[length];\n        if (length === last || index !== previous) {\n            previous = index;\n            splice.call(arr, index, 1);\n        }\n    }\n    return arr;\n};\nexport default pullAt;\n//# sourceMappingURL=pull-at.js.map","import each from './each';\nimport isArray from './is-array';\nimport isPlainObject from './is-plain-object';\nvar reduce = function (arr, fn, init) {\n    if (!isArray(arr) && !isPlainObject(arr)) {\n        return arr;\n    }\n    var result = init;\n    each(arr, function (data, i) {\n        result = fn(result, data, i);\n    });\n    return result;\n};\nexport default reduce;\n//# sourceMappingURL=reduce.js.map","import isArrayLike from './is-array-like';\nimport pullAt from './pull-at';\nvar remove = function (arr, predicate) {\n    /**\n     * const arr = [1, 2, 3, 4]\n     * const evens = remove(arr, n => n % 2 == 0)\n     * console.log(arr) // => [1, 3]\n     * console.log(evens) // => [2, 4]\n     */\n    var result = [];\n    if (!isArrayLike(arr)) {\n        return result;\n    }\n    var i = -1;\n    var indexes = [];\n    var length = arr.length;\n    while (++i < length) {\n        var value = arr[i];\n        if (predicate(value, i, arr)) {\n            result.push(value);\n            indexes.push(i);\n        }\n    }\n    pullAt(arr, indexes);\n    return result;\n};\nexport default remove;\n//# sourceMappingURL=remove.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar is_type_1 = require(\"./is-type\");\nexports.default = (function (str) {\n    return is_type_1.default(str, 'String');\n});\n//# sourceMappingURL=is-string.js.map","import isArray from './is-array';\nimport isString from './is-string';\nimport isFunction from './is-function';\nfunction sortBy(arr, key) {\n    var comparer;\n    if (isFunction(key)) {\n        comparer = function (a, b) { return key(a) - key(b); };\n    }\n    else {\n        var keys_1 = [];\n        if (isString(key)) {\n            keys_1.push(key);\n        }\n        else if (isArray(key)) {\n            keys_1 = key;\n        }\n        comparer = function (a, b) {\n            for (var i = 0; i < keys_1.length; i += 1) {\n                var prop = keys_1[i];\n                if (a[prop] > b[prop]) {\n                    return 1;\n                }\n                if (a[prop] < b[prop]) {\n                    return -1;\n                }\n            }\n            return 0;\n        };\n    }\n    arr.sort(comparer);\n    return arr;\n}\nexport default sortBy;\n//# sourceMappingURL=sort-by.js.map","import contains from './contains';\nimport each from './each';\nvar uniq = function (arr) {\n    var resultArr = [];\n    each(arr, function (item) {\n        if (!contains(resultArr, item)) {\n            resultArr.push(item);\n        }\n    });\n    return resultArr;\n};\nexport default uniq;\n//# sourceMappingURL=uniq.js.map","import uniq from './uniq';\nvar union = function () {\n    var sources = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        sources[_i] = arguments[_i];\n    }\n    return uniq([].concat.apply([], sources));\n};\nexport default union;\n//# sourceMappingURL=union.js.map","import isArray from './is-array';\nimport isNil from './is-nil';\nexport default (function (data, name) {\n    var rst = [];\n    var tmpMap = {};\n    for (var i = 0; i < data.length; i++) {\n        var obj = data[i];\n        var value = obj[name];\n        if (!isNil(value)) {\n            // flatten\n            if (!isArray(value)) {\n                value = [value];\n            }\n            for (var j = 0; j < value.length; j++) {\n                var val = value[j];\n                // unique\n                if (!tmpMap[val]) {\n                    rst.push(val);\n                    tmpMap[val] = true;\n                }\n            }\n        }\n    }\n    return rst;\n});\n//# sourceMappingURL=values-of-key.js.map","import isArrayLike from './is-array-like';\nexport default function head(o) {\n    if (isArrayLike(o)) {\n        return o[0];\n    }\n    return undefined;\n}\n//# sourceMappingURL=head.js.map","import isArrayLike from './is-array-like';\nexport default function last(o) {\n    if (isArrayLike(o)) {\n        var arr = o;\n        return arr[arr.length - 1];\n    }\n    return undefined;\n}\n//# sourceMappingURL=last.js.map","import isArray from './is-array';\nimport isString from './is-string';\nfunction startsWith(arr, e) {\n    return (isArray(arr) || isString(arr)) ? arr[0] === e : false;\n}\nexport default startsWith;\n//# sourceMappingURL=starts-with.js.map","import isArray from './is-array';\nimport isString from './is-string';\nfunction endsWith(arr, e) {\n    return (isArray(arr) || isString(arr)) ? arr[arr.length - 1] === e : false;\n}\nexport default endsWith;\n//# sourceMappingURL=ends-with.js.map","/**\n * 只要有一个不满足条件就返回 false\n * @param arr\n * @param func\n */\nvar every = function (arr, func) {\n    for (var i = 0; i < arr.length; i++) {\n        if (!func(arr[i], i))\n            return false;\n    }\n    return true;\n};\nexport default every;\n//# sourceMappingURL=every.js.map","/**\n * 只要有一个满足条件就返回 true\n * @param arr\n * @param func\n */\nvar some = function (arr, func) {\n    for (var i = 0; i < arr.length; i++) {\n        if (func(arr[i], i))\n            return true;\n    }\n    return false;\n};\nexport default some;\n//# sourceMappingURL=some.js.map","import isArray from './is-array';\nimport isFunction from './is-function';\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction groupBy(data, condition) {\n    if (!condition || !isArray(data)) {\n        return {};\n    }\n    var result = {};\n    // 兼容方法和 字符串的写法\n    var predicate = isFunction(condition) ? condition : function (item) { return item[condition]; };\n    var key;\n    for (var i = 0; i < data.length; i++) {\n        var item = data[i];\n        key = predicate(item);\n        if (hasOwnProperty.call(result, key)) {\n            result[key].push(item);\n        }\n        else {\n            result[key] = [item];\n        }\n    }\n    return result;\n}\nexport default groupBy;\n//# sourceMappingURL=group-by.js.map","import isArray from './is-array';\nimport isFunction from './is-function';\nimport groupBy from './group-by';\nvar groupToMap = function (data, condition) {\n    if (!condition) {\n        return {\n            0: data,\n        };\n    }\n    if (!isFunction(condition)) {\n        var paramsCondition_1 = isArray(condition) ? condition : condition.replace(/\\s+/g, '').split('*');\n        condition = function (row) {\n            var unique = '_'; // 避免出现数字作为Key的情况，会进行按照数字的排序\n            for (var i = 0, l = paramsCondition_1.length; i < l; i++) {\n                unique += row[paramsCondition_1[i]] && row[paramsCondition_1[i]].toString();\n            }\n            return unique;\n        };\n    }\n    var groups = groupBy(data, condition);\n    return groups;\n};\nexport default groupToMap;\n//# sourceMappingURL=group-to-map.js.map","import { __extends } from \"tslib\";\nimport { AbstractGroup } from '@antv/g-base';\nimport { each } from '@antv/util';\nimport * as Shape from './shape';\nimport { drawChildren, refreshElement } from './util/draw';\nimport { setClip, setTransform } from './util/svg';\nimport { SVG_ATTR_MAP } from './constant';\nimport { createSVGElement } from './util/dom';\nvar Group = /** @class */ (function (_super) {\n    __extends(Group, _super);\n    function Group() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // SVG 中分组对应实体标签 <g>\n    Group.prototype.isEntityGroup = function () {\n        return true;\n    };\n    Group.prototype.createDom = function () {\n        var element = createSVGElement('g');\n        this.set('el', element);\n        var parent = this.getParent();\n        if (parent) {\n            var parentNode = parent.get('el');\n            if (parentNode) {\n                parentNode.appendChild(element);\n            }\n            else {\n                // parentNode maybe null for group\n                parentNode = parent.createDom();\n                parent.set('el', parentNode);\n                parentNode.appendChild(element);\n            }\n        }\n        return element;\n    };\n    // 覆盖基类的 afterAttrsChange 方法\n    Group.prototype.afterAttrsChange = function (targetAttrs) {\n        _super.prototype.afterAttrsChange.call(this, targetAttrs);\n        var canvas = this.get('canvas');\n        // 只有挂载到画布下，才对元素进行实际渲染\n        if (canvas && canvas.get('autoDraw')) {\n            var context = canvas.get('context');\n            this.createPath(context, targetAttrs);\n        }\n    };\n    /**\n     * 一些方法调用会引起画布变化\n     * @param {ChangeType} changeType 改变的类型\n     */\n    Group.prototype.onCanvasChange = function (changeType) {\n        refreshElement(this, changeType);\n    };\n    Group.prototype.getShapeBase = function () {\n        return Shape;\n    };\n    Group.prototype.getGroupBase = function () {\n        return Group;\n    };\n    Group.prototype.draw = function (context) {\n        var children = this.getChildren();\n        var el = this.get('el');\n        if (this.get('destroyed')) {\n            if (el) {\n                el.parentNode.removeChild(el);\n            }\n        }\n        else {\n            if (!el) {\n                this.createDom();\n            }\n            setClip(this, context);\n            this.createPath(context);\n            if (children.length) {\n                drawChildren(context, children);\n            }\n        }\n    };\n    /**\n     * 绘制分组的路径\n     * @param {Defs} context 上下文\n     * @param {ShapeAttrs} targetAttrs 渲染的目标属性\n     */\n    Group.prototype.createPath = function (context, targetAttrs) {\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n        setTransform(this);\n    };\n    return Group;\n}(AbstractGroup));\nexport default Group;\n//# sourceMappingURL=group.js.map","/**\n * 获取封装的事件\n * @protected\n * @param  {Object} obj   对象\n * @param  {String} action 事件名称\n * @return {Function}        返回事件处理函数\n */\nfunction getWrapBehavior(obj, action) {\n    return obj['_wrap_' + action];\n}\nexport default getWrapBehavior;\n//# sourceMappingURL=get-wrap-behavior.js.map","/**\n * 封装事件，便于使用上下文this,和便于解除事件时使用\n * @protected\n * @param  {Object} obj   对象\n * @param  {String} action 事件名称\n * @return {Function}        返回事件处理函数\n */\nfunction wrapBehavior(obj, action) {\n    if (obj['_wrap_' + action]) {\n        return obj['_wrap_' + action];\n    }\n    var method = function (e) {\n        obj[action](e);\n    };\n    obj['_wrap_' + action] = method;\n    return method;\n}\nexport default wrapBehavior;\n//# sourceMappingURL=wrap-behavior.js.map","var numColorCache = {};\nfunction numberToColor(num) {\n    // 增加缓存\n    var color = numColorCache[num];\n    if (!color) {\n        var str = num.toString(16);\n        for (var i = str.length; i < 6; i++) {\n            str = '0' + str;\n        }\n        color = '#' + str;\n        numColorCache[num] = color;\n    }\n    return color;\n}\nexport default numberToColor;\n//# sourceMappingURL=number2color.js.map","import isArray from './is-array';\nfunction parseRadius(radius) {\n    var r1 = 0, r2 = 0, r3 = 0, r4 = 0;\n    if (isArray(radius)) {\n        if (radius.length === 1) {\n            r1 = r2 = r3 = r4 = radius[0];\n        }\n        else if (radius.length === 2) {\n            r1 = r3 = radius[0];\n            r2 = r4 = radius[1];\n        }\n        else if (radius.length === 3) {\n            r1 = radius[0];\n            r2 = r4 = radius[1];\n            r3 = radius[2];\n        }\n        else {\n            r1 = radius[0];\n            r2 = radius[1];\n            r3 = radius[2];\n            r4 = radius[3];\n        }\n    }\n    else {\n        r1 = r2 = r3 = r4 = radius;\n    }\n    return {\n        r1: r1,\n        r2: r2,\n        r3: r3,\n        r4: r4\n    };\n}\nexport default parseRadius;\n//# sourceMappingURL=parse-radius.js.map","var clamp = function (a, min, max) {\n    if (a < min) {\n        return min;\n    }\n    else if (a > max) {\n        return max;\n    }\n    return a;\n};\nexport default clamp;\n//# sourceMappingURL=clamp.js.map","var fixedBase = function (v, base) {\n    var str = base.toString();\n    var index = str.indexOf('.');\n    if (index === -1) {\n        return Math.round(v);\n    }\n    var length = str.substr(index + 1).length;\n    if (length > 20) {\n        length = 20;\n    }\n    return parseFloat(v.toFixed(length));\n};\nexport default fixedBase;\n//# sourceMappingURL=fixed-base.js.map","/**\n * 判断是否数字\n * @return {Boolean} 是否数字\n */\nimport isType from './is-type';\nvar isNumber = function (value) {\n    return isType(value, 'Number');\n};\nexport default isNumber;\n//# sourceMappingURL=is-number.js.map","import isNumber from './is-number';\nvar isDecimal = function (num) {\n    return isNumber(num) && num % 1 !== 0;\n};\nexport default isDecimal;\n//# sourceMappingURL=is-decimal.js.map","import isNumber from './is-number';\nvar isEven = function (num) {\n    return isNumber(num) && num % 2 === 0;\n};\nexport default isEven;\n//# sourceMappingURL=is-even.js.map","import isNumber from './is-number';\nvar isInteger = Number.isInteger ? Number.isInteger : function (num) {\n    return isNumber(num) && num % 1 === 0;\n};\nexport default isInteger;\n//# sourceMappingURL=is-integer.js.map","import isNumber from './is-number';\nvar isNegative = function (num) {\n    return isNumber(num) && num < 0;\n};\nexport default isNegative;\n//# sourceMappingURL=is-negative.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PRECISION = 0.00001; // numbers less than this is considered as 0\nfunction isNumberEqual(a, b, precision) {\n    if (precision === void 0) { precision = PRECISION; }\n    return Math.abs((a - b)) < precision;\n}\nexports.default = isNumberEqual;\n;\n//# sourceMappingURL=is-number-equal.js.map","import isNumber from './is-number';\nvar isOdd = function (num) {\n    return isNumber(num) && num % 2 !== 0;\n};\nexport default isOdd;\n//# sourceMappingURL=is-odd.js.map","import isNumber from './is-number';\nvar isPositive = function (num) {\n    return isNumber(num) && num > 0;\n};\nexport default isPositive;\n//# sourceMappingURL=is-positive.js.map","import each from './each';\nimport isArray from './is-array';\nimport isFunction from './is-function';\n/**\n * @param {Array} arr The array to iterate over.\n * @param {Function} [fn] The iteratee invoked per element.\n * @return {*} Returns the maximum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * maxBy(objects, function(o) { return o.n; });\n * // => { 'n': 2 }\n *\n * maxBy(objects, 'n');\n * // => { 'n': 2 }\n */\nexport default (function (arr, fn) {\n    if (!isArray(arr)) {\n        return undefined;\n    }\n    var max = arr[0];\n    var maxData;\n    if (isFunction(fn)) {\n        maxData = fn(arr[0]);\n    }\n    else {\n        maxData = arr[0][fn];\n    }\n    var data;\n    each(arr, function (val) {\n        if (isFunction(fn)) {\n            data = fn(val);\n        }\n        else {\n            data = val[fn];\n        }\n        if (data > maxData) {\n            max = val;\n            maxData = data;\n        }\n    });\n    return max;\n});\n//# sourceMappingURL=max-by.js.map","import each from './each';\nimport isArray from './is-array';\nimport isFunction from './is-function';\n/**\n * @param {Array} arr The array to iterate over.\n * @param {Function} [fn] The iteratee invoked per element.\n * @return {*} Returns the minimum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * minBy(objects, function(o) { return o.n; });\n * // => { 'n': 1 }\n *\n * minBy(objects, 'n');\n * // => { 'n': 1 }\n */\nexport default (function (arr, fn) {\n    if (!isArray(arr)) {\n        return undefined;\n    }\n    var min = arr[0];\n    var minData;\n    if (isFunction(fn)) {\n        minData = fn(arr[0]);\n    }\n    else {\n        minData = arr[0][fn];\n    }\n    var data;\n    each(arr, function (val) {\n        if (isFunction(fn)) {\n            data = fn(val);\n        }\n        else {\n            data = val[fn];\n        }\n        if (data < minData) {\n            min = val;\n            minData = data;\n        }\n    });\n    return min;\n});\n//# sourceMappingURL=min-by.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mod = function (n, m) {\n    return ((n % m) + m) % m;\n};\nexports.default = mod;\n//# sourceMappingURL=mod.js.map","var DEGREE = 180 / Math.PI;\nvar toDegree = function (radian) {\n    return DEGREE * radian;\n};\nexport default toDegree;\n//# sourceMappingURL=to-degree.js.map","export default parseInt;\n//# sourceMappingURL=to-integer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RADIAN = Math.PI / 180;\nvar toRadian = function (degree) {\n    return RADIAN * degree;\n};\nexports.default = toRadian;\n//# sourceMappingURL=to-radian.js.map","import each from './each';\nexport default each;\n//# sourceMappingURL=for-in.js.map","export default (function (obj, key) { return obj.hasOwnProperty(key); });\n//# sourceMappingURL=has.js.map","import has from './has';\nexport default has;\n//# sourceMappingURL=has-key.js.map","import each from './each';\nimport isFunction from './is-function';\n// @ts-ignore\nvar values = Object.values ? function (obj) { return Object.values(obj); } : function (obj) {\n    var result = [];\n    each(obj, function (value, key) {\n        if (!(isFunction(obj) && key === 'prototype')) {\n            result.push(value);\n        }\n    });\n    return result;\n};\nexport default values;\n//# sourceMappingURL=values.js.map","import contains from './contains';\nimport values from './values';\nexport default (function (obj, value) { return contains(values(obj), value); });\n//# sourceMappingURL=has-value.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar is_nil_1 = require(\"./is-nil\");\nexports.default = (function (value) {\n    if (is_nil_1.default(value))\n        return '';\n    return value.toString();\n});\n//# sourceMappingURL=to-string.js.map","import toString from './to-string';\nvar lowerCase = function (str) {\n    return toString(str).toLowerCase();\n};\nexport default lowerCase;\n//# sourceMappingURL=lower-case.js.map","import toString from './to-string';\nvar lowerFirst = function (value) {\n    var str = toString(value);\n    return str.charAt(0).toLowerCase() + str.substring(1);\n};\nexport default lowerFirst;\n//# sourceMappingURL=lower-first.js.map","function substitute(str, o) {\n    if (!str || !o) {\n        return str;\n    }\n    return str.replace(/\\\\?\\{([^{}]+)\\}/g, function (match, name) {\n        if (match.charAt(0) === '\\\\') {\n            return match.slice(1);\n        }\n        return (o[name] === undefined) ? '' : o[name];\n    });\n}\nexport default substitute;\n//# sourceMappingURL=substitute.js.map","import toString from './to-string';\nvar upperCase = function (str) {\n    return toString(str).toUpperCase();\n};\nexport default upperCase;\n//# sourceMappingURL=upper-case.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar to_string_1 = require(\"./to-string\");\nvar upperFirst = function (value) {\n    var str = to_string_1.default(value);\n    return str.charAt(0).toUpperCase() + str.substring(1);\n};\nexports.default = upperFirst;\n//# sourceMappingURL=upper-first.js.map","var toString = {}.toString;\nvar getType = function (value) {\n    return toString.call(value).replace(/^\\[object /, '').replace(/]$/, '');\n};\nexport default getType;\n//# sourceMappingURL=get-type.js.map","/**\n * 是否是参数类型\n *\n * @param {Object} value 测试的值\n * @return {Boolean}\n */\nimport isType from './is-type';\nvar isArguments = function (value) {\n    return isType(value, 'Arguments');\n};\nexport default isArguments;\n//# sourceMappingURL=is-arguments.js.map","/**\n * 是否是布尔类型\n *\n * @param {Object} value 测试的值\n * @return {Boolean}\n */\nimport isType from './is-type';\nvar isBoolean = function (value) {\n    return isType(value, 'Boolean');\n};\nexport default isBoolean;\n//# sourceMappingURL=is-boolean.js.map","import isType from './is-type';\nvar isDate = function (value) {\n    return isType(value, 'Date');\n};\nexport default isDate;\n//# sourceMappingURL=is-date.js.map","/**\n * 是否是参数类型\n *\n * @param {Object} value 测试的值\n * @return {Boolean}\n */\nimport isType from './is-type';\nvar isError = function (value) {\n    return isType(value, 'Error');\n};\nexport default isError;\n//# sourceMappingURL=is-error.js.map","/**\n * 判断是否为有限数\n * @return {Boolean}\n */\nimport isNumber from './is-number';\nexport default function (value) {\n    return isNumber(value) && isFinite(value);\n}\n//# sourceMappingURL=is-finite.js.map","var isNull = function (value) {\n    return value === null;\n};\nexport default isNull;\n//# sourceMappingURL=is-null.js.map","var objectProto = Object.prototype;\nvar isPrototype = function (value) {\n    var Ctor = value && value.constructor;\n    var proto = (typeof Ctor === 'function' && Ctor.prototype) || objectProto;\n    return value === proto;\n};\nexport default isPrototype;\n//# sourceMappingURL=is-prototype.js.map","import isType from './is-type';\nvar isRegExp = function (str) {\n    return isType(str, 'RegExp');\n};\nexport default isRegExp;\n//# sourceMappingURL=is-reg-exp.js.map","var isUndefined = function (value) {\n    return value === undefined;\n};\nexport default isUndefined;\n//# sourceMappingURL=is-undefined.js.map","/**\n * 判断是否HTML元素\n * @return {Boolean} 是否HTML元素\n */\nvar isElement = function (o) {\n    return o instanceof Element || o instanceof HTMLDocument;\n};\nexport default isElement;\n//# sourceMappingURL=is-element.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction requestAnimationFrame(fn) {\n    var method = window.requestAnimationFrame ||\n        window.webkitRequestAnimationFrame ||\n        // @ts-ignore\n        window.mozRequestAnimationFrame ||\n        // @ts-ignore\n        window.msRequestAnimationFrame ||\n        function (f) {\n            return setTimeout(f, 16);\n        };\n    return method(fn);\n}\nexports.default = requestAnimationFrame;\n;\n//# sourceMappingURL=request-animation-frame.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction cancelAnimationFrame(handler) {\n    var method = window.cancelAnimationFrame ||\n        window.webkitCancelAnimationFrame ||\n        // @ts-ignore\n        window.mozCancelAnimationFrame ||\n        // @ts-ignore\n        window.msCancelAnimationFrame ||\n        clearTimeout;\n    method(handler);\n}\nexports.default = cancelAnimationFrame;\n;\n//# sourceMappingURL=clear-animation-frame.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// FIXME: Mutable param should be forbidden in static lang.\nfunction _mix(dist, obj) {\n    for (var key in obj) {\n        if (obj.hasOwnProperty(key) && key !== 'constructor' && obj[key] !== undefined) {\n            dist[key] = obj[key];\n        }\n    }\n}\nfunction mix(dist, src1, src2, src3) {\n    if (src1)\n        _mix(dist, src1);\n    if (src2)\n        _mix(dist, src2);\n    if (src3)\n        _mix(dist, src3);\n    return dist;\n}\nexports.default = mix;\n//# sourceMappingURL=mix.js.map","import mix from './mix';\nimport isFunction from './is-function';\nvar augment = function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var c = args[0];\n    for (var i = 1; i < args.length; i++) {\n        var obj = args[i];\n        if (isFunction(obj)) {\n            obj = obj.prototype;\n        }\n        mix(c.prototype, obj);\n    }\n};\nexport default augment;\n//# sourceMappingURL=augment.js.map","import isArray from './is-array';\nvar clone = function (obj) {\n    if (typeof obj !== 'object' || obj === null) {\n        return obj;\n    }\n    var rst;\n    if (isArray(obj)) {\n        rst = [];\n        for (var i = 0, l = obj.length; i < l; i++) {\n            if (typeof obj[i] === 'object' && obj[i] != null) {\n                rst[i] = clone(obj[i]);\n            }\n            else {\n                rst[i] = obj[i];\n            }\n        }\n    }\n    else {\n        rst = {};\n        for (var k in obj) {\n            if (typeof obj[k] === 'object' && obj[k] != null) {\n                rst[k] = clone(obj[k]);\n            }\n            else {\n                rst[k] = obj[k];\n            }\n        }\n    }\n    return rst;\n};\nexport default clone;\n//# sourceMappingURL=clone.js.map","function debounce(func, wait, immediate) {\n    var timeout;\n    return function () {\n        var context = this, args = arguments;\n        var later = function () {\n            timeout = null;\n            if (!immediate) {\n                func.apply(context, args);\n            }\n        };\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) {\n            func.apply(context, args);\n        }\n    };\n}\nexport default debounce;\n//# sourceMappingURL=debounce.js.map","import isFunction from './is-function';\n/**\n * _.memoize(calColor);\n * _.memoize(calColor, (...args) => args[0]);\n * @param f\n * @param resolver\n */\nexport default (function (f, resolver) {\n    if (!isFunction(f)) {\n        throw new TypeError('Expected a function');\n    }\n    var memoized = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        // 使用方法构造 key，如果不存在 resolver，则直接取第一个参数作为 key\n        var key = resolver ? resolver.apply(this, args) : args[0];\n        var cache = memoized.cache;\n        if (cache.has(key)) {\n            return cache.get(key);\n        }\n        var result = f.apply(this, args);\n        // 缓存起来\n        cache.set(key, result);\n        return result;\n    };\n    memoized.cache = new Map();\n    return memoized;\n});\n//# sourceMappingURL=memoize.js.map","import isArray from './is-array';\nimport isPlainObject from './is-plain-object';\nvar MAX_MIX_LEVEL = 5;\nfunction _deepMix(dist, src, level, maxLevel) {\n    level = level || 0;\n    maxLevel = maxLevel || MAX_MIX_LEVEL;\n    for (var key in src) {\n        if (src.hasOwnProperty(key)) {\n            var value = src[key];\n            if (value !== null && isPlainObject(value)) {\n                if (!isPlainObject(dist[key])) {\n                    dist[key] = {};\n                }\n                if (level < maxLevel) {\n                    _deepMix(dist[key], value, level + 1, maxLevel);\n                }\n                else {\n                    dist[key] = src[key];\n                }\n            }\n            else if (isArray(value)) {\n                dist[key] = [];\n                dist[key] = dist[key].concat(value);\n            }\n            else if (value !== undefined) {\n                dist[key] = value;\n            }\n        }\n    }\n}\n// todo 重写\nvar deepMix = function (rst) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    for (var i = 0; i < args.length; i += 1) {\n        _deepMix(rst, args[i]);\n    }\n    return rst;\n};\nexport default deepMix;\n//# sourceMappingURL=deep-mix.js.map","import mix from './mix';\nimport isFunction from './is-function';\nvar extend = function (subclass, superclass, overrides, staticOverrides) {\n    // 如果只提供父类构造函数，则自动生成子类构造函数\n    if (!isFunction(superclass)) {\n        overrides = superclass;\n        superclass = subclass;\n        subclass = function () { };\n    }\n    var create = Object.create ?\n        function (proto, c) {\n            return Object.create(proto, {\n                constructor: {\n                    value: c\n                }\n            });\n        } :\n        function (proto, c) {\n            function Tmp() { }\n            Tmp.prototype = proto;\n            var o = new Tmp();\n            o.constructor = c;\n            return o;\n        };\n    var superObj = create(superclass.prototype, subclass); // new superclass(),//实例化父类作为子类的prototype\n    subclass.prototype = mix(superObj, subclass.prototype); // 指定子类的prototype\n    subclass.superclass = create(superclass.prototype, superclass);\n    mix(superObj, overrides);\n    mix(subclass, staticOverrides);\n    return subclass;\n};\nexport default extend;\n//# sourceMappingURL=extend.js.map","import isArrayLike from './is-array-like';\nvar indexOf = function (arr, obj) {\n    if (!isArrayLike(arr)) {\n        return -1;\n    }\n    var m = Array.prototype.indexOf;\n    if (m) {\n        return m.call(arr, obj);\n    }\n    var index = -1;\n    for (var i = 0; i < arr.length; i++) {\n        if (arr[i] === obj) {\n            index = i;\n            break;\n        }\n    }\n    return index;\n};\nexport default indexOf;\n//# sourceMappingURL=index-of.js.map","import isNil from './is-nil';\nimport isArrayLike from './is-array-like';\nimport getType from './get-type';\nimport isPrototype from './is-prototype';\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction isEmpty(value) {\n    /**\n     * isEmpty(null) => true\n     * isEmpty() => true\n     * isEmpty(true) => true\n     * isEmpty(1) => true\n     * isEmpty([1, 2, 3]) => false\n     * isEmpty('abc') => false\n     * isEmpty({ a: 1 }) => false\n     */\n    if (isNil(value)) {\n        return true;\n    }\n    if (isArrayLike(value)) {\n        return !value.length;\n    }\n    var type = getType(value);\n    if (type === 'Map' || type === 'Set') {\n        return !value.size;\n    }\n    if (isPrototype(value)) {\n        return !Object.keys(value).length;\n    }\n    for (var key in value) {\n        if (hasOwnProperty.call(value, key)) {\n            return false;\n        }\n    }\n    return true;\n}\nexport default isEmpty;\n//# sourceMappingURL=is-empty.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar is_object_like_1 = require(\"./is-object-like\");\nvar is_array_like_1 = require(\"./is-array-like\");\nvar is_string_1 = require(\"./is-string\");\nvar isEqual = function (value, other) {\n    if (value === other) {\n        return true;\n    }\n    if (!value || !other) {\n        return false;\n    }\n    if (is_string_1.default(value) || is_string_1.default(other)) {\n        return false;\n    }\n    if (is_array_like_1.default(value) || is_array_like_1.default(other)) {\n        if (value.length !== other.length) {\n            return false;\n        }\n        var rst = true;\n        for (var i = 0; i < value.length; i++) {\n            rst = isEqual(value[i], other[i]);\n            if (!rst) {\n                break;\n            }\n        }\n        return rst;\n    }\n    if (is_object_like_1.default(value) || is_object_like_1.default(other)) {\n        var valueKeys = Object.keys(value);\n        var otherKeys = Object.keys(other);\n        if (valueKeys.length !== otherKeys.length) {\n            return false;\n        }\n        var rst = true;\n        for (var i = 0; i < valueKeys.length; i++) {\n            rst = isEqual(value[valueKeys[i]], other[valueKeys[i]]);\n            if (!rst) {\n                break;\n            }\n        }\n        return rst;\n    }\n    return false;\n};\nexports.default = isEqual;\n//# sourceMappingURL=is-equal.js.map","import isFunction from './is-function';\nimport isEqual from './is-equal';\n/**\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [fn] The function to customize comparisons.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * function isGreeting(value) {\n *   return /^h(?:i|ello)$/.test(value);\n * }\n *\n * function customizer(objValue, othValue) {\n *   if (isGreeting(objValue) && isGreeting(othValue)) {\n *     return true;\n *   }\n * }\n *\n * var array = ['hello', 'goodbye'];\n * var other = ['hi', 'goodbye'];\n *\n * isEqualWith(array, other, customizer);  // => true\n */\nexport default (function (value, other, fn) {\n    if (!isFunction(fn)) {\n        return isEqual(value, other);\n    }\n    return !!fn(value, other);\n});\n//# sourceMappingURL=is-equal-with.js.map","import isArrayLike from './is-array-like';\nvar map = function (arr, func) {\n    if (!isArrayLike(arr)) {\n        // @ts-ignore\n        return arr;\n    }\n    var result = [];\n    for (var index = 0; index < arr.length; index++) {\n        var value = arr[index];\n        result.push(func(value, index));\n    }\n    return result;\n};\nexport default map;\n//# sourceMappingURL=map.js.map","import isNil from './is-nil';\nimport isObject from './is-object';\nvar identity = function (v) { return v; };\nexport default (function (object, func) {\n    if (func === void 0) { func = identity; }\n    var r = {};\n    if (isObject(object) && !isNil(object)) {\n        Object.keys(object).forEach(function (key) {\n            // @ts-ignore\n            r[key] = func(object[key], key);\n        });\n    }\n    return r;\n});\n//# sourceMappingURL=map-values.js.map","import isString from './is-string';\n/**\n * https://github.com/developit/dlv/blob/master/index.js\n * @param obj\n * @param key\n * @param defaultValue\n */\nexport default (function (obj, key, defaultValue) {\n    var p = 0;\n    var keyArr = isString(key) ? key.split('.') : key;\n    while (obj && p < keyArr.length) {\n        obj = obj[keyArr[p++]];\n    }\n    return (obj === undefined || p < keyArr.length) ? defaultValue : obj;\n});\n//# sourceMappingURL=get.js.map","import isObject from './is-object';\nimport isString from './is-string';\nimport isNumber from './is-number';\n/**\n * https://github.com/developit/dlv/blob/master/index.js\n * @param obj\n * @param path\n * @param value\n */\nexport default (function (obj, path, value) {\n    var o = obj;\n    var keyArr = isString(path) ? path.split('.') : path;\n    keyArr.forEach(function (key, idx) {\n        // 不是最后一个\n        if (idx < keyArr.length - 1) {\n            if (!isObject(o[key])) {\n                o[key] = isNumber(keyArr[idx + 1]) ? [] : {};\n            }\n            o = o[key];\n        }\n        else {\n            o[key] = value;\n        }\n    });\n    return obj;\n});\n//# sourceMappingURL=set.js.map","import each from './each';\nimport isPlainObject from './is-plain-object';\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nexport default (function (object, keys) {\n    if (object === null || !isPlainObject(object)) {\n        return {};\n    }\n    var result = {};\n    each(keys, function (key) {\n        if (hasOwnProperty.call(object, key)) {\n            result[key] = object[key];\n        }\n    });\n    return result;\n});\n//# sourceMappingURL=pick.js.map","export default (function (func, wait, options) {\n    var timeout, context, args, result;\n    var previous = 0;\n    if (!options)\n        options = {};\n    var later = function () {\n        previous = options.leading === false ? 0 : Date.now();\n        timeout = null;\n        result = func.apply(context, args);\n        if (!timeout)\n            context = args = null;\n    };\n    var throttled = function () {\n        var now = Date.now();\n        if (!previous && options.leading === false)\n            previous = now;\n        var remaining = wait - (now - previous);\n        context = this;\n        args = arguments;\n        if (remaining <= 0 || remaining > wait) {\n            if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n            }\n            previous = now;\n            result = func.apply(context, args);\n            if (!timeout)\n                context = args = null;\n        }\n        else if (!timeout && options.trailing !== false) {\n            timeout = setTimeout(later, remaining);\n        }\n        return result;\n    };\n    throttled.cancel = function () {\n        clearTimeout(timeout);\n        previous = 0;\n        timeout = context = args = null;\n    };\n    return throttled;\n});\n//# sourceMappingURL=throttle.js.map","import isArrayLike from './is-array-like';\nexport default (function (value) {\n    return isArrayLike(value) ? Array.prototype.slice.call(value) : [];\n});\n//# sourceMappingURL=to-array.js.map","var map = {};\nexport default (function (prefix) {\n    prefix = prefix || 'g';\n    if (!map[prefix]) {\n        map[prefix] = 1;\n    }\n    else {\n        map[prefix] += 1;\n    }\n    return prefix + map[prefix];\n});\n//# sourceMappingURL=unique-id.js.map","export default (function () { });\n//# sourceMappingURL=noop.js.map","export default (function (v) { return v; });\n//# sourceMappingURL=identity.js.map","import isNil from './is-nil';\nimport isArraylike from './is-array-like';\nexport default function size(o) {\n    if (isNil(o)) {\n        return 0;\n    }\n    if (isArraylike(o)) {\n        return o.length;\n    }\n    return Object.keys(o).length;\n}\n//# sourceMappingURL=size.js.map","/**\n * k-v 存储\n */\nvar default_1 = /** @class */ (function () {\n    function default_1() {\n        this.map = {};\n    }\n    default_1.prototype.has = function (key) {\n        return this.map[key] !== undefined;\n    };\n    default_1.prototype.get = function (key, def) {\n        var v = this.map[key];\n        return v === undefined ? def : v;\n    };\n    default_1.prototype.set = function (key, value) {\n        this.map[key] = value;\n    };\n    default_1.prototype.clear = function () {\n        this.map = {};\n    };\n    default_1.prototype.delete = function (key) {\n        delete this.map[key];\n    };\n    default_1.prototype.size = function () {\n        return Object.keys(this.map).length;\n    };\n    return default_1;\n}());\nexport default default_1;\n//# sourceMappingURL=cache.js.map","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import * as mat3 from '@antv/gl-matrix/lib/gl-matrix/mat3';\nmat3.translate = function (out, a, v) {\n    var transMat = new Array(9);\n    mat3.fromTranslation(transMat, v);\n    return mat3.multiply(out, transMat, a);\n};\nmat3.rotate = function (out, a, rad) {\n    var rotateMat = new Array(9);\n    mat3.fromRotation(rotateMat, rad);\n    return mat3.multiply(out, rotateMat, a);\n};\nmat3.scale = function (out, a, v) {\n    var scaleMat = new Array(9);\n    mat3.fromScaling(scaleMat, v);\n    return mat3.multiply(out, scaleMat, a);\n};\nmat3.transform = function (m, actions) {\n    var out = [].concat(m);\n    for (var i = 0, len = actions.length; i < len; i++) {\n        var action = actions[i];\n        switch (action[0]) {\n            case 't':\n                mat3.translate(out, out, [action[1], action[2]]);\n                break;\n            case 's':\n                mat3.scale(out, out, [action[1], action[2]]);\n                break;\n            case 'r':\n                mat3.rotate(out, out, action[1]);\n                break;\n            default:\n                break;\n        }\n    }\n    return out;\n};\nexport default mat3;\n//# sourceMappingURL=mat3.js.map","import * as vec2 from '@antv/gl-matrix/lib/gl-matrix/vec2';\nimport { clamp } from '@antv/util';\nvec2.angle = function (v1, v2) {\n    var theta = vec2.dot(v1, v2) / (vec2.length(v1) * vec2.length(v2));\n    return Math.acos(clamp(theta, -1, 1));\n};\n/**\n * 向量 v1 到 向量 v2 夹角的方向\n * @param  {Array} v1 向量\n * @param  {Array} v2 向量\n * @return {Boolean} >= 0 顺时针 < 0 逆时针\n */\nvec2.direction = function (v1, v2) {\n    return v1[0] * v2[1] - v2[0] * v1[1];\n};\nvec2.angleTo = function (v1, v2, direct) {\n    var angle = vec2.angle(v1, v2);\n    var angleLargeThanPI = vec2.direction(v1, v2) >= 0;\n    if (direct) {\n        if (angleLargeThanPI) {\n            return Math.PI * 2 - angle;\n        }\n        return angle;\n    }\n    if (angleLargeThanPI) {\n        return angle;\n    }\n    return Math.PI * 2 - angle;\n};\nvec2.vertical = function (out, v, flag) {\n    if (flag) {\n        out[0] = v[1];\n        out[1] = -1 * v[0];\n    }\n    else {\n        out[0] = -1 * v[1];\n        out[1] = v[0];\n    }\n    return out;\n};\nexport default vec2;\n//# sourceMappingURL=vec2.js.map","import * as vec3 from '@antv/gl-matrix/lib/gl-matrix/vec3';\nexport default vec3;\n//# sourceMappingURL=vec3.js.map","import { each, clone } from '@antv/util';\nimport mat3 from './mat3';\nexport default (function (m, ts) {\n    // 上层使用时会传入为 null 的 matrix，此时按照单位矩阵处理\n    var matrix = m ? clone(m) : [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    each(ts, function (t) {\n        switch (t[0]) {\n            case 't':\n                mat3.translate(matrix, matrix, [t[1], t[2]]);\n                break;\n            case 's':\n                mat3.scale(matrix, matrix, [t[1], t[2]]);\n                break;\n            case 'r':\n                mat3.rotate(matrix, matrix, t[1]);\n                break;\n            case 'm':\n                mat3.multiply(matrix, matrix, t[1]);\n                break;\n            default:\n                return false;\n        }\n    });\n    return matrix;\n});\n//# sourceMappingURL=transform.js.map","import EventEmitter from '@antv/event-emitter';\nimport { ICanvas } from '../dependents';\nimport { isNil, each, findIndex, deepMix, keys, contains, isFunction } from '@antv/util';\nimport { RecursivePartial, LooseMap } from '../interface/types';\nimport StateManager from '../util/state-manager';\nimport CanvasController from './controller/canvas';\nimport EventController from './controller/event';\nimport { getPlotType } from './global';\nimport Layer from './layer';\nimport ViewLayer from './view-layer';\nimport { CANVAS_EVENT_MAP } from '../util/event';\n\nexport interface PlotConfig {\n  forceFit?: boolean;\n  width?: number;\n  renderer?: string;\n  height?: number;\n  pixelRatio?: number;\n  theme?: LooseMap | string;\n  localRefresh?: boolean;\n}\n\ntype LayerCtor<C> = ViewLayer<C>;\n\nexport default class BasePlot<\n  T extends PlotConfig = PlotConfig,\n  L extends LayerCtor<T> = LayerCtor<T>\n> extends EventEmitter {\n  public width: number;\n  public height: number;\n  public forceFit: boolean;\n  public renderer: string;\n  public pixelRatio: number;\n  public theme: string | object;\n  public localRefresh?: boolean;\n  public canvas: ICanvas;\n  public destroyed: boolean;\n  protected layers: Array<L>;\n  private canvasController: CanvasController;\n  private eventController: EventController;\n  protected containerDOM: HTMLElement;\n\n  constructor(container: HTMLElement, props: T) {\n    super();\n    this.containerDOM = typeof container === 'string' ? document.getElementById(container) : container;\n    this.forceFit = !isNil(props.forceFit) ? props.forceFit : isNil(props.width) && isNil(props.height);\n    this.renderer = props.renderer || 'canvas';\n    this.pixelRatio = props.pixelRatio || null;\n    this.width = props.width;\n    this.height = props.height;\n    this.theme = props.theme;\n    this.localRefresh = props.localRefresh;\n    this.canvasController = new CanvasController({\n      containerDOM: this.containerDOM,\n      plot: this,\n    });\n    /** update layer properties */\n    this.width = this.canvasController.width;\n    this.height = this.canvasController.height;\n    this.canvas = this.canvasController.canvas;\n    this.layers = [];\n    this.destroyed = false;\n\n    this.createLayers(props);\n\n    /** bind events */\n    this.eventController = new EventController({\n      plot: this,\n      canvas: this.canvasController.canvas,\n    });\n\n    this.eventController.bindEvents();\n    this.parseEvents(props);\n  }\n\n  /** 生命周期 */\n  public destroy() {\n    this.eachLayer((layer) => {\n      layer.destroy();\n    });\n    this.canvasController.destroy();\n    this.eventController.clearEvents();\n    this.layers = [];\n    this.destroyed = true;\n  }\n\n  /**\n   * 重新绘制图形\n   */\n  public repaint(): void {\n    this.canvasController.canvas.draw();\n  }\n\n  public updateConfig(config: RecursivePartial<T>, all: boolean = false) {\n    if (all) {\n      this.eachLayer((layer) => {\n        if (layer instanceof ViewLayer) {\n          layer.updateConfig(config);\n        }\n      });\n    } else {\n      const layer: any = this.layers[0];\n      if (layer instanceof Layer) {\n        layer.updateConfig(config);\n      }\n    }\n\n    if (config.width) {\n      this.width = config.width as number;\n    }\n    if (config.height) {\n      this.height = config.height as number;\n    }\n    if (config.theme) {\n      this.theme = config.theme;\n    }\n\n    this.canvasController.updateCanvasSize();\n    this.canvasController.updateCanvasTheme();\n  }\n\n  public changeData(data: any[], all: boolean = false) {\n    if (all) {\n      this.eachLayer((layer) => {\n        if (layer instanceof ViewLayer) {\n          layer.changeData(data);\n        }\n      });\n    } else {\n      const layer: any = this.layers[0];\n      if (layer instanceof ViewLayer) {\n        layer.changeData(data);\n      }\n    }\n  }\n\n  public getPlotTheme() {\n    const layer: any = this.layers[0];\n    return layer.getPlotTheme();\n  }\n\n  public getData() {\n    const layer: any = this.layers[0];\n    return layer.getData();\n  }\n\n  /**\n   * 绑定一个外部的stateManager\n   * 先直接传递给各个子 Layer\n   *\n   *  @param stateManager\n   *  @param cfg\n   */\n  public bindStateManager(stateManager: StateManager, cfg: any) {\n    this.eachLayer((layer) => {\n      if (layer instanceof ViewLayer) {\n        layer.bindStateManager(stateManager, cfg);\n      }\n    });\n  }\n\n  /**\n   * 响应状态量更新的快捷方法\n   *\n   *  @param condition\n   * @param style\n   */\n  public setActive(condition: any, style: any) {\n    this.eachLayer((layer) => {\n      if (layer instanceof ViewLayer) {\n        layer.setActive(condition, style);\n      }\n    });\n  }\n\n  public setSelected(condition: any, style: any) {\n    this.eachLayer((layer) => {\n      if (layer instanceof ViewLayer) {\n        layer.setSelected(condition, style);\n      }\n    });\n  }\n\n  public setDisable(condition: any, style: any) {\n    this.eachLayer((layer) => {\n      if (layer instanceof ViewLayer) {\n        layer.setDisable(condition, style);\n      }\n    });\n  }\n\n  public setDefault(condition: any, style: any) {\n    this.eachLayer((layer) => {\n      if (layer instanceof ViewLayer) {\n        layer.setDefault(condition, style);\n      }\n    });\n  }\n\n  /**\n   * 获取 Plot 的 View\n   */\n  public getView() {\n    // 临时：避免 getLayer 的类型转换问题\n    return (this.layers[0] as ViewLayer<T>).view;\n  }\n\n  /**\n   * 获取图形下的图层 Layer，默认第一个 Layer\n   * @param idx\n   */\n  public getLayer(idx: number = 0) {\n    return this.layers[idx];\n  }\n\n  public getCanvas() {\n    return this.canvasController.canvas;\n  }\n\n  public getLayers() {\n    return this.layers;\n  }\n\n  public render() {\n    this.eachLayer((layer) => layer.render());\n  }\n\n  protected eachLayer(cb: (layer: Layer<any>) => void) {\n    each(this.layers, cb);\n  }\n\n  /**\n   * add children layer\n   * @param layer\n   */\n  public addLayer(layer: L) {\n    const idx = findIndex(this.layers, (item) => item === layer);\n    if (idx < 0) {\n      this.layers.push(layer);\n    }\n  }\n\n  protected createLayers(props: T & { type?: string; layers?: any }) {\n    if (props.layers) {\n      // TODO: combo plot\n    } else if (props.type) {\n      const viewLayerCtr = getPlotType(props.type);\n      const viewLayerProps: T = deepMix({}, props, {\n        canvas: this.canvasController.canvas,\n        x: 0,\n        y: 0,\n        width: this.width,\n        height: this.height,\n      });\n      const viewLayer = new viewLayerCtr(viewLayerProps);\n      this.addLayer(viewLayer);\n    }\n  }\n\n  protected parseEvents(props) {\n    const eventsName = keys(CANVAS_EVENT_MAP);\n    if (props.events) {\n      each(props.events, (e, k) => {\n        if (contains(eventsName, k) && isFunction(e)) {\n          const eventName = CANVAS_EVENT_MAP[k] || k;\n          const handler = e;\n          this.on(eventName, handler);\n        }\n      });\n    }\n  }\n}\n","/** 所有统计图形 */\nconst GLOBAL_PLOT_MAP: Record<string, any> = {};\n\nexport function registerPlotType(name: string, ctr: any): void {\n  GLOBAL_PLOT_MAP[name.toLowerCase()] = ctr;\n}\n\nexport function getPlotType(name: string) {\n  return GLOBAL_PLOT_MAP[name.toLowerCase()];\n}\n","export default function addEventListener(target, eventType, callback) {\n    if (target) {\n        if (typeof target.addEventListener === 'function') {\n            target.addEventListener(eventType, callback, false);\n            return {\n                remove: function () {\n                    target.removeEventListener(eventType, callback, false);\n                },\n            };\n            // @ts-ignore\n        }\n        if (typeof target.attachEvent === 'function') {\n            // @ts-ignore\n            target.attachEvent('on' + eventType, callback);\n            return {\n                remove: function () {\n                    // @ts-ignore\n                    target.detachEvent('on' + eventType, callback);\n                },\n            };\n        }\n    }\n}\n//# sourceMappingURL=add-event-listener.js.map","/**\n * 创建DOM 节点\n * @param  {String} str Dom 字符串\n * @return {HTMLElement}  DOM 节点\n */\nvar TABLE;\nvar TABLE_TR;\nvar FRAGMENT_REG;\nvar CONTAINERS;\nfunction initConstants() {\n    TABLE = document.createElement('table');\n    TABLE_TR = document.createElement('tr');\n    FRAGMENT_REG = /^\\s*<(\\w+|!)[^>]*>/;\n    CONTAINERS = {\n        tr: document.createElement('tbody'),\n        tbody: TABLE,\n        thead: TABLE,\n        tfoot: TABLE,\n        td: TABLE_TR,\n        th: TABLE_TR,\n        '*': document.createElement('div'),\n    };\n}\nexport default function createDom(str) {\n    if (!TABLE) {\n        initConstants();\n    }\n    var name = FRAGMENT_REG.test(str) && RegExp.$1;\n    if (!name || !(name in CONTAINERS)) {\n        name = '*';\n    }\n    var container = CONTAINERS[name];\n    str = str.replace(/(^\\s*)|(\\s*$)/g, '');\n    container.innerHTML = '' + str;\n    var dom = container.childNodes[0];\n    container.removeChild(dom);\n    return dom;\n}\n//# sourceMappingURL=create-dom.js.map","/**\n * 获取样式\n * @param  {Object} dom DOM节点\n * @param  {String} name 样式名\n * @param  {Any} defaultValue 默认值\n * @return {String} 属性值\n */\nexport default function getStyle(dom, name, defaultValue) {\n    var v;\n    try {\n        v = window.getComputedStyle ?\n            window.getComputedStyle(dom, null)[name] :\n            dom.style[name]; // 一般不会走到这个逻辑，dom.style 获取的是标签 style 属性，也不准确\n    }\n    catch (e) {\n        // do nothing\n    }\n    finally {\n        v = v === undefined ? defaultValue : v;\n    }\n    return v;\n}\n//# sourceMappingURL=get-style.js.map","import getStyle from './get-style';\nexport default function getHeight(el, defaultValue) {\n    var height = getStyle(el, 'height', defaultValue);\n    if (height === 'auto') {\n        height = el.offsetHeight;\n    }\n    return parseFloat(height);\n}\n//# sourceMappingURL=get-height.js.map","import getStyle from './get-style';\nimport getHeight from './get-height';\nexport default function getOuterHeight(el, defaultValue) {\n    var height = getHeight(el, defaultValue);\n    var bTop = parseFloat(getStyle(el, 'borderTopWidth')) || 0;\n    var pTop = parseFloat(getStyle(el, 'paddingTop')) || 0;\n    var pBottom = parseFloat(getStyle(el, 'paddingBottom')) || 0;\n    var bBottom = parseFloat(getStyle(el, 'borderBottomWidth')) || 0;\n    var mTop = parseFloat(getStyle(el, 'marginTop')) || 0;\n    var mBottom = parseFloat(getStyle(el, 'marginBottom')) || 0;\n    return height + bTop + bBottom + pTop + pBottom + mTop + mBottom;\n}\n//# sourceMappingURL=get-outer-height.js.map","import getStyle from './get-style';\nexport default function getHeight(el, defaultValue) {\n    var width = getStyle(el, 'width', defaultValue);\n    if (width === 'auto') {\n        width = el.offsetWidth;\n    }\n    return parseFloat(width);\n}\n//# sourceMappingURL=get-width.js.map","import getStyle from './get-style';\nimport getWidth from './get-width';\nexport default function getOuterWidth(el, defaultValue) {\n    var width = getWidth(el, defaultValue);\n    var bLeft = parseFloat(getStyle(el, 'borderLeftWidth')) || 0;\n    var pLeft = parseFloat(getStyle(el, 'paddingLeft')) || 0;\n    var pRight = parseFloat(getStyle(el, 'paddingRight')) || 0;\n    var bRight = parseFloat(getStyle(el, 'borderRightWidth')) || 0;\n    var mRight = parseFloat(getStyle(el, 'marginRight')) || 0;\n    var mLeft = parseFloat(getStyle(el, 'marginLeft')) || 0;\n    return width + bLeft + bRight + pLeft + pRight + mLeft + mRight;\n}\n//# sourceMappingURL=get-outer-width.js.map","export default function getRatio() {\n    return window.devicePixelRatio ? window.devicePixelRatio : 2;\n}\n//# sourceMappingURL=get-ratio.js.map","export default function modifyCSS(dom, css) {\n    if (dom) {\n        for (var key in css) {\n            if (css.hasOwnProperty(key)) {\n                dom.style[key] = css[key];\n            }\n        }\n    }\n    return dom;\n}\n//# sourceMappingURL=modify-css.js.map","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","// G\nexport { IElement, ICanvas, IGroup, IShape, BBox } from '@antv/g-base';\nexport { Canvas } from '@antv/g-canvas';\nexport { Canvas as SVG } from '@antv/g-svg';\n\n// G2\nexport {\n  View,\n  registerAnimation,\n  registerGeometry,\n  Geometry,\n  Interaction,\n  registerInteraction,\n  registerShape,\n  getTheme,\n  Util,\n  getShapeFactory,\n  registerComponentController,\n} from '@antv/g2';\nexport { VIEW_LIFE_CIRCLE, COMPONENT_TYPE, FIELD_ORIGIN } from '@antv/g2/lib/constant';\nimport Gestrue from '@antv/g2/lib/chart/controller/gesture';\nexport { Gestrue };\nexport { MarkerSymbols } from '@antv/g2/lib/util/marker';\nexport {\n  Datum,\n  Data,\n  LooseObject,\n  Options,\n  Point,\n  ShapeInfo,\n  AttributeOption,\n  AdjustOption,\n  LabelOption,\n  MappingDatum,\n} from '@antv/g2/lib/interface';\nexport { DEFAULT_ANIMATE_CFG, getDefaultAnimateCfg, doAnimate } from '@antv/g2/lib/animate';\nexport { default as Element } from '@antv/g2/lib/geometry/element';\n\n// Component\nimport HtmlTooltip from '@antv/component/lib/tooltip/html';\nimport HtmlTooltipTheme from '@antv/component/lib/tooltip/html-theme';\nimport TooltipCssConst from '@antv/component/lib/tooltip/css-const';\nexport { HtmlTooltip, HtmlTooltipTheme, TooltipCssConst };\nexport { GroupComponent, Axis, Legend, Tooltip, Slider, Scrollbar } from '@antv/component';\nexport { GroupComponentCfg, TooltipCfg } from '@antv/component/lib/types';\n\n// Coordinate\nexport { Coordinate } from '@antv/coord';\n\n// Common\nexport const ORIGIN = 'origin';\n","import { __assign } from \"tslib\";\n/**\n * @fileoverview path 的一些工具\n * @author dxq613@gmail.com\n */\nimport { PathUtil } from '@antv/g-base';\nimport QuadUtil from '@antv/g-math/lib/quadratic';\nimport CubicUtil from '@antv/g-math/lib/cubic';\nimport { inBox } from './util';\nimport inLine from './in-stroke/line';\nimport inArc from './in-stroke/arc';\nimport * as mat3 from 'gl-matrix/mat3';\nimport * as vec3 from 'gl-matrix/vec3';\nfunction hasArc(path) {\n    var hasArc = false;\n    var count = path.length;\n    for (var i = 0; i < count; i++) {\n        var params = path[i];\n        var cmd = params[0];\n        if (cmd === 'C' || cmd === 'A' || cmd === 'Q') {\n            hasArc = true;\n            break;\n        }\n    }\n    return hasArc;\n}\nfunction isPointInStroke(segments, lineWidth, x, y) {\n    var isHit = false;\n    var halfWidth = lineWidth / 2;\n    for (var i = 0; i < segments.length; i++) {\n        var segment = segments[i];\n        var currentPoint = segment.currentPoint, params = segment.params, prePoint = segment.prePoint, box = segment.box;\n        // 如果在前面已经生成过包围盒，直接按照包围盒计算\n        if (box && !inBox(box.x - halfWidth, box.y - halfWidth, box.width + lineWidth, box.height + lineWidth, x, y)) {\n            continue;\n        }\n        switch (segment.command) {\n            // L 和 Z 都是直线， M 不进行拾取\n            case 'L':\n            case 'Z':\n                isHit = inLine(prePoint[0], prePoint[1], currentPoint[0], currentPoint[1], lineWidth, x, y);\n                break;\n            case 'Q':\n                var qDistance = QuadUtil.pointDistance(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4], x, y);\n                isHit = qDistance <= lineWidth / 2;\n                break;\n            case 'C':\n                var cDistance = CubicUtil.pointDistance(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4], params[5], params[6], x, y);\n                isHit = cDistance <= lineWidth / 2;\n                break;\n            case 'A':\n                // 计算点到椭圆圆弧的距离，暂时使用近似算法，后面可以改成切割法求最近距离\n                var arcParams = segment.arcParams;\n                var cx = arcParams.cx, cy = arcParams.cy, rx = arcParams.rx, ry = arcParams.ry, startAngle = arcParams.startAngle, endAngle = arcParams.endAngle, xRotation = arcParams.xRotation;\n                var p = [x, y, 1];\n                var m = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n                var r = rx > ry ? rx : ry;\n                var scaleX = rx > ry ? 1 : rx / ry;\n                var scaleY = rx > ry ? ry / rx : 1;\n                mat3.translate(m, m, [-cx, -cy]);\n                mat3.rotate(m, m, -xRotation);\n                mat3.scale(m, m, [1 / scaleX, 1 / scaleY]);\n                vec3.transformMat3(p, p, m);\n                isHit = inArc(0, 0, r, startAngle, endAngle, lineWidth, p[0], p[1]);\n                break;\n            default:\n                break;\n        }\n        if (isHit) {\n            break;\n        }\n    }\n    return isHit;\n}\n/**\n * 提取出内部的闭合多边形和非闭合的多边形，假设 path 不存在圆弧\n * @param {Array} path 路径\n * @returns {Array} 点的集合\n */\nfunction extractPolygons(path) {\n    var count = path.length;\n    var polygons = [];\n    var polylines = [];\n    var points = []; // 防止第一个命令不是 'M'\n    for (var i = 0; i < count; i++) {\n        var params = path[i];\n        var cmd = params[0];\n        if (cmd === 'M') {\n            // 遇到 'M' 判定是否是新数组，新数组中没有点\n            if (points.length) {\n                // 如果存在点，则说明没有遇到 'Z'，开始了一个新的多边形\n                polylines.push(points);\n                points = []; // 创建新的点\n            }\n            points.push([params[1], params[2]]);\n        }\n        else if (cmd === 'Z') {\n            if (points.length) {\n                // 存在点\n                polygons.push(points);\n                points = []; // 开始新的点集合\n            }\n            // 如果不存在点，同时 'Z'，则说明是错误，不处理\n        }\n        else {\n            points.push([params[1], params[2]]);\n        }\n    }\n    // 说明 points 未放入 polygons 或者 polyline\n    // 仅当只有一个 M，没有 Z 时会发生这种情况\n    if (points.length > 0) {\n        polylines.push(points);\n    }\n    return {\n        polygons: polygons,\n        polylines: polylines,\n    };\n}\nexport default __assign({ hasArc: hasArc,\n    extractPolygons: extractPolygons,\n    isPointInStroke: isPointInStroke }, PathUtil);\n//# sourceMappingURL=path.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GraphEvent = /** @class */ (function () {\n    function GraphEvent(type, event) {\n        /**\n         * 是否允许冒泡\n         * @type {boolean}\n         */\n        this.bubbles = true;\n        /**\n         * 触发对象\n         * @type {object}\n         */\n        this.target = null;\n        /**\n         * 监听对象\n         * @type {object}\n         */\n        this.currentTarget = null;\n        /**\n         * 委托对象\n         * @type {object}\n         */\n        this.delegateTarget = null;\n        /**\n         * 委托事件监听对象的代理对象，即 ev.delegateObject = ev.currentTarget.get('delegateObject')\n         * @type {object}\n         */\n        this.delegateObject = null;\n        /**\n         * 是否阻止了原生事件\n         * @type {boolean}\n         */\n        this.defaultPrevented = false;\n        /**\n         * 是否阻止传播（向上冒泡）\n         * @type {boolean}\n         */\n        this.propagationStopped = false;\n        /**\n         * 触发事件的图形\n         * @type {IShape}\n         */\n        this.shape = null;\n        /**\n         * 开始触发事件的图形\n         * @type {IShape}\n         */\n        this.fromShape = null;\n        /**\n         * 事件结束时的触发图形\n         * @type {IShape}\n         */\n        this.toShape = null;\n        // 触发事件的路径\n        this.propagationPath = [];\n        this.type = type;\n        this.name = type;\n        this.originalEvent = event;\n        this.timeStamp = event.timeStamp;\n    }\n    /**\n     * 阻止浏览器默认的行为\n     */\n    GraphEvent.prototype.preventDefault = function () {\n        this.defaultPrevented = true;\n        if (this.originalEvent.preventDefault) {\n            this.originalEvent.preventDefault();\n        }\n    };\n    /**\n     * 阻止冒泡\n     */\n    GraphEvent.prototype.stopPropagation = function () {\n        this.propagationStopped = true;\n    };\n    GraphEvent.prototype.toString = function () {\n        var type = this.type;\n        return \"[Event (type=\" + type + \")]\";\n    };\n    GraphEvent.prototype.save = function () { };\n    GraphEvent.prototype.restore = function () { };\n    return GraphEvent;\n}());\nexports.default = GraphEvent;\n//# sourceMappingURL=graph-event.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getPixelRatio() {\n    return window ? window.devicePixelRatio : 1;\n}\nexports.getPixelRatio = getPixelRatio;\n/**\n * 两点之间的距离\n * @param {number} x1 起始点 x\n * @param {number} y1 起始点 y\n * @param {number} x2 结束点 x\n * @param {number} y2 结束点 y\n */\nfunction distance(x1, y1, x2, y2) {\n    var dx = x1 - x2;\n    var dy = y1 - y2;\n    return Math.sqrt(dx * dx + dy * dy);\n}\nexports.distance = distance;\n/**\n * 是否在包围盒内\n * @param {number} minX   包围盒开始的点 x\n * @param {number} minY   包围盒开始的点 y\n * @param {number} width  宽度\n * @param {number} height 高度\n * @param {[type]} x      检测点的 x\n * @param {[type]} y      监测点的 y\n */\nfunction inBox(minX, minY, width, height, x, y) {\n    return x >= minX && x <= minX + width && y >= minY && y <= minY + height;\n}\nexports.inBox = inBox;\nfunction intersectRect(box1, box2) {\n    return !(box2.minX > box1.maxX || box2.maxX < box1.minX || box2.minY > box1.maxY || box2.maxY < box1.minY);\n}\nexports.intersectRect = intersectRect;\n// 合并两个区域\nfunction mergeRegion(region1, region2) {\n    if (!region1 || !region2) {\n        return region1 || region2;\n    }\n    return {\n        minX: Math.min(region1.minX, region2.minX),\n        minY: Math.min(region1.minY, region2.minY),\n        maxX: Math.max(region1.maxX, region2.maxX),\n        maxY: Math.max(region1.maxY, region2.maxY),\n    };\n}\nexports.mergeRegion = mergeRegion;\n/**\n * 判断两个点是否重合，点坐标的格式为 [x, y]\n * @param {Array} point1 第一个点\n * @param {Array} point2 第二个点\n */\nfunction isSamePoint(point1, point2) {\n    return point1[0] === point2[0] && point1[1] === point2[1];\n}\nexports.isSamePoint = isSamePoint;\nvar is_nil_1 = require(\"@antv/util/lib/is-nil\");\nexports.isNil = is_nil_1.default;\nvar is_string_1 = require(\"@antv/util/lib/is-string\");\nexports.isString = is_string_1.default;\nvar is_function_1 = require(\"@antv/util/lib/is-function\");\nexports.isFunction = is_function_1.default;\nvar is_array_1 = require(\"@antv/util/lib/is-array\");\nexports.isArray = is_array_1.default;\nvar each_1 = require(\"@antv/util/lib/each\");\nexports.each = each_1.default;\nvar to_radian_1 = require(\"@antv/util/lib/to-radian\");\nexports.toRadian = to_radian_1.default;\nvar mod_1 = require(\"@antv/util/lib/mod\");\nexports.mod = mod_1.default;\nvar is_number_equal_1 = require(\"@antv/util/lib/is-number-equal\");\nexports.isNumberEqual = is_number_equal_1.default;\nvar request_animation_frame_1 = require(\"@antv/util/lib/request-animation-frame\");\nexports.requestAnimationFrame = request_animation_frame_1.default;\nvar clear_animation_frame_1 = require(\"@antv/util/lib/clear-animation-frame\");\nexports.clearAnimationFrame = clear_animation_frame_1.default;\n//# sourceMappingURL=util.js.map","import { __extends } from \"tslib\";\nimport EE from '@antv/event-emitter';\nimport { mix } from '../util/util';\nvar Base = /** @class */ (function (_super) {\n    __extends(Base, _super);\n    function Base(cfg) {\n        var _this = _super.call(this) || this;\n        /**\n         * 是否被销毁\n         * @type {boolean}\n         */\n        _this.destroyed = false;\n        var defaultCfg = _this.getDefaultCfg();\n        _this.cfg = mix(defaultCfg, cfg);\n        return _this;\n    }\n    /**\n     * @protected\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    Base.prototype.getDefaultCfg = function () {\n        return {};\n    };\n    // 实现接口的方法\n    Base.prototype.get = function (name) {\n        return this.cfg[name];\n    };\n    // 实现接口的方法\n    Base.prototype.set = function (name, value) {\n        this.cfg[name] = value;\n    };\n    // 实现接口的方法\n    Base.prototype.destroy = function () {\n        this.cfg = {\n            destroyed: true,\n        };\n        this.off();\n        this.destroyed = true;\n    };\n    return Base;\n}(EE));\nexport default Base;\n//# sourceMappingURL=base.js.map","\"use strict\";\n/**\n * @fileoverview 矩阵运算，本来是要引入 gl-matrix, 但是考虑到 g-mobile 对大小有限制，同时 g-webgl 使用的 matrix 不一致\n * 所以，这里仅实现 2D 几个运算，上层自己引入 gl-matrix\n * @author dxq613@gmail.com\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * 3阶矩阵相乘\n * @param {number[]} a 矩阵1\n * @param {number[]} b 矩阵2\n */\nfunction multiplyMatrix(a, b) {\n    var out = [];\n    var a00 = a[0];\n    var a01 = a[1];\n    var a02 = a[2];\n    var a10 = a[3];\n    var a11 = a[4];\n    var a12 = a[5];\n    var a20 = a[6];\n    var a21 = a[7];\n    var a22 = a[8];\n    var b00 = b[0];\n    var b01 = b[1];\n    var b02 = b[2];\n    var b10 = b[3];\n    var b11 = b[4];\n    var b12 = b[5];\n    var b20 = b[6];\n    var b21 = b[7];\n    var b22 = b[8];\n    out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n    out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n    out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n    out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n    out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n    out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n    out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n    out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n    out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n    return out;\n}\nexports.multiplyMatrix = multiplyMatrix;\n/**\n * 3阶矩阵同2阶向量相乘\n * @param {number[]} m 矩阵\n * @param {number[]} v 二阶向量\n */\nfunction multiplyVec2(m, v) {\n    var out = [];\n    var x = v[0];\n    var y = v[1];\n    out[0] = m[0] * x + m[3] * y + m[6];\n    out[1] = m[1] * x + m[4] * y + m[7];\n    return out;\n}\nexports.multiplyVec2 = multiplyVec2;\n/**\n * 矩阵的逆\n * @param {number[]} a 矩阵\n */\nfunction invert(a) {\n    var out = [];\n    var a00 = a[0];\n    var a01 = a[1];\n    var a02 = a[2];\n    var a10 = a[3];\n    var a11 = a[4];\n    var a12 = a[5];\n    var a20 = a[6];\n    var a21 = a[7];\n    var a22 = a[8];\n    var b01 = a22 * a11 - a12 * a21;\n    var b11 = -a22 * a10 + a12 * a20;\n    var b21 = a21 * a10 - a11 * a20;\n    // Calculate the determinant\n    var det = a00 * b01 + a01 * b11 + a02 * b21;\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n    out[0] = b01 * det;\n    out[1] = (-a22 * a01 + a02 * a21) * det;\n    out[2] = (a12 * a01 - a02 * a11) * det;\n    out[3] = b11 * det;\n    out[4] = (a22 * a00 - a02 * a20) * det;\n    out[5] = (-a12 * a00 + a02 * a10) * det;\n    out[6] = b21 * det;\n    out[7] = (-a21 * a00 + a01 * a20) * det;\n    out[8] = (a11 * a00 - a01 * a10) * det;\n    return out;\n}\nexports.invert = invert;\n//# sourceMappingURL=matrix.js.map","import { __extends } from \"tslib\";\nimport { each, isEqual, isFunction, isNumber, isObject, isArray, noop, mix, upperFirst, uniqueId } from '@antv/util';\nimport { transform } from '@antv/matrix-util';\nimport { removeFromArray, isParent } from '../util/util';\nimport { multiplyMatrix, multiplyVec2, invert } from '../util/matrix';\nimport Base from './base';\nvar MATRIX = 'matrix';\nvar CLONE_CFGS = ['zIndex', 'capture', 'visible', 'type'];\n// 可以在 toAttrs 中设置，但不属于绘图属性的字段\nvar RESERVED_PORPS = ['repeat'];\nvar DELEGATION_SPLIT = ':';\nvar WILDCARD = '*';\n// 需要考虑数组嵌套数组的场景\n// 数组嵌套对象的场景不考虑\nfunction _cloneArrayAttr(arr) {\n    var result = [];\n    for (var i = 0; i < arr.length; i++) {\n        if (isArray(arr[i])) {\n            result.push([].concat(arr[i]));\n        }\n        else {\n            result.push(arr[i]);\n        }\n    }\n    return result;\n}\nfunction getFormatFromAttrs(toAttrs, shape) {\n    var fromAttrs = {};\n    var attrs = shape.attrs;\n    for (var k in toAttrs) {\n        fromAttrs[k] = attrs[k];\n    }\n    return fromAttrs;\n}\nfunction getFormatToAttrs(props, shape) {\n    var toAttrs = {};\n    var attrs = shape.attr();\n    each(props, function (v, k) {\n        if (RESERVED_PORPS.indexOf(k) === -1 && !isEqual(attrs[k], v)) {\n            toAttrs[k] = v;\n        }\n    });\n    return toAttrs;\n}\nfunction checkExistedAttrs(animations, animation) {\n    if (animation.onFrame) {\n        return animations;\n    }\n    var startTime = animation.startTime, delay = animation.delay, duration = animation.duration;\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    each(animations, function (item) {\n        // 后一个动画开始执行的时间 < 前一个动画的结束时间 && 后一个动画的执行时间 > 前一个动画的延迟\n        if (startTime + delay < item.startTime + item.delay + item.duration && duration > item.delay) {\n            each(animation.toAttrs, function (v, k) {\n                if (hasOwnProperty.call(item.toAttrs, k)) {\n                    delete item.toAttrs[k];\n                    delete item.fromAttrs[k];\n                }\n            });\n        }\n    });\n    return animations;\n}\nvar Element = /** @class */ (function (_super) {\n    __extends(Element, _super);\n    function Element(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        /**\n         * @protected\n         * 图形属性\n         * @type {ShapeAttrs}\n         */\n        _this.attrs = {};\n        var attrs = _this.getDefaultAttrs();\n        mix(attrs, cfg.attrs);\n        _this.attrs = attrs;\n        _this.initAttrs(attrs);\n        _this.initAnimate(); // 初始化动画\n        return _this;\n    }\n    // override\n    Element.prototype.getDefaultCfg = function () {\n        return {\n            visible: true,\n            capture: true,\n            zIndex: 0,\n        };\n    };\n    /**\n     * @protected\n     * 获取默认的属相\n     */\n    Element.prototype.getDefaultAttrs = function () {\n        return {\n            matrix: this.getDefaultMatrix(),\n            opacity: 1,\n        };\n    };\n    /**\n     * @protected\n     * 一些方法调用会引起画布变化\n     * @param {ChangeType} changeType 改变的类型\n     */\n    Element.prototype.onCanvasChange = function (changeType) { };\n    /**\n     * @protected\n     * 初始化属性，有些属性需要加工\n     * @param {object} attrs 属性值\n     */\n    Element.prototype.initAttrs = function (attrs) { };\n    /**\n     * @protected\n     * 初始化动画\n     */\n    Element.prototype.initAnimate = function () {\n        this.set('animable', true);\n        this.set('animating', false);\n    };\n    Element.prototype.isGroup = function () {\n        return false;\n    };\n    Element.prototype.getParent = function () {\n        return this.get('parent');\n    };\n    Element.prototype.getCanvas = function () {\n        return this.get('canvas');\n    };\n    Element.prototype.attr = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var name = args[0], value = args[1];\n        if (!name)\n            return this.attrs;\n        if (isObject(name)) {\n            for (var k in name) {\n                this.setAttr(k, name[k]);\n            }\n            this.afterAttrsChange(name);\n            return this;\n        }\n        if (args.length === 2) {\n            this.setAttr(name, value);\n            this.afterAttrsChange((_a = {},\n                _a[name] = value,\n                _a));\n            return this;\n        }\n        return this.attrs[name];\n    };\n    // 是否被裁剪，被裁剪则不显示，不参与拾取\n    Element.prototype.isClipped = function (refX, refY) {\n        var clip = this.getClip();\n        return clip && !clip.isHit(refX, refY);\n    };\n    /**\n     * 内部设置属性值的接口\n     * @param {string} name 属性名\n     * @param {any} value 属性值\n     */\n    Element.prototype.setAttr = function (name, value) {\n        var originValue = this.attrs[name];\n        if (originValue !== value) {\n            this.attrs[name] = value;\n            this.onAttrChange(name, value, originValue);\n        }\n    };\n    /**\n     * @protected\n     * 属性值发生改变\n     * @param {string} name 属性名\n     * @param {any} value 属性值\n     * @param {any} originValue 属性值\n     */\n    Element.prototype.onAttrChange = function (name, value, originValue) {\n        if (name === 'matrix') {\n            this.set('totalMatrix', null);\n        }\n    };\n    /**\n     * 属性更改后需要做的事情\n     * @protected\n     */\n    Element.prototype.afterAttrsChange = function (targetAttrs) {\n        this.onCanvasChange('attr');\n    };\n    Element.prototype.show = function () {\n        // 不是高频操作直接使用 set\n        this.set('visible', true);\n        this.onCanvasChange('show');\n        return this;\n    };\n    Element.prototype.hide = function () {\n        // 不是高频操作直接使用 set\n        this.set('visible', false);\n        this.onCanvasChange('hide');\n        return this;\n    };\n    Element.prototype.setZIndex = function (zIndex) {\n        this.set('zIndex', zIndex);\n        var parent = this.getParent();\n        if (parent) {\n            // 改变 zIndex 不应该立即触发渲染 (调用 onCanvasChange('zIndex'))，需要经过 sort 再触发\n            parent.sort();\n        }\n        return this;\n    };\n    Element.prototype.toFront = function () {\n        var parent = this.getParent();\n        if (!parent) {\n            return;\n        }\n        var children = parent.getChildren();\n        var el = this.get('el');\n        var index = children.indexOf(this);\n        children.splice(index, 1);\n        children.push(this);\n        this.onCanvasChange('zIndex');\n    };\n    Element.prototype.toBack = function () {\n        var parent = this.getParent();\n        if (!parent) {\n            return;\n        }\n        var children = parent.getChildren();\n        var el = this.get('el');\n        var index = children.indexOf(this);\n        children.splice(index, 1);\n        children.unshift(this);\n        this.onCanvasChange('zIndex');\n    };\n    Element.prototype.remove = function (destroy) {\n        if (destroy === void 0) { destroy = true; }\n        var parent = this.getParent();\n        if (parent) {\n            removeFromArray(parent.getChildren(), this);\n            if (!parent.get('clearing')) {\n                // 如果父元素正在清理，当前元素不触发 remove\n                this.onCanvasChange('remove');\n            }\n        }\n        else {\n            this.onCanvasChange('remove');\n        }\n        if (destroy) {\n            this.destroy();\n        }\n    };\n    Element.prototype.resetMatrix = function () {\n        this.attr(MATRIX, this.getDefaultMatrix());\n        this.onCanvasChange('matrix');\n    };\n    Element.prototype.getMatrix = function () {\n        return this.attr(MATRIX);\n    };\n    Element.prototype.setMatrix = function (m) {\n        this.attr(MATRIX, m);\n        this.onCanvasChange('matrix');\n    };\n    // 获取总的 matrix\n    Element.prototype.getTotalMatrix = function () {\n        var totalMatrix = this.get('totalMatrix');\n        if (!totalMatrix) {\n            var currentMatrix = this.attr('matrix');\n            var parentMatrix = this.get('parentMatrix');\n            if (parentMatrix && currentMatrix) {\n                totalMatrix = multiplyMatrix(parentMatrix, currentMatrix);\n            }\n            else {\n                totalMatrix = currentMatrix || parentMatrix;\n            }\n            this.set('totalMatrix', totalMatrix);\n        }\n        return totalMatrix;\n    };\n    // 上层分组设置 matrix\n    Element.prototype.applyMatrix = function (matrix) {\n        var currentMatrix = this.attr('matrix');\n        var totalMatrix = null;\n        if (matrix && currentMatrix) {\n            totalMatrix = multiplyMatrix(matrix, currentMatrix);\n        }\n        else {\n            totalMatrix = currentMatrix || matrix;\n        }\n        this.set('totalMatrix', totalMatrix);\n        this.set('parentMatrix', matrix);\n    };\n    /**\n     * @protected\n     * 获取默认的矩阵\n     * @returns {number[]|null} 默认的矩阵\n     */\n    Element.prototype.getDefaultMatrix = function () {\n        return null;\n    };\n    // 将向量应用设置的矩阵\n    Element.prototype.applyToMatrix = function (v) {\n        var matrix = this.attr('matrix');\n        if (matrix) {\n            return multiplyVec2(matrix, v);\n        }\n        return v;\n    };\n    // 根据设置的矩阵，将向量转换相对于图形/分组的位置\n    Element.prototype.invertFromMatrix = function (v) {\n        var matrix = this.attr('matrix');\n        if (matrix) {\n            var invertMatrix = invert(matrix);\n            if (invertMatrix) {\n                return multiplyVec2(invertMatrix, v);\n            }\n        }\n        return v;\n    };\n    // 设置 clip\n    Element.prototype.setClip = function (clipCfg) {\n        var canvas = this.getCanvas();\n        // 应该只设置当前元素的 clip，不应该去修改 clip 本身，方便 clip 被复用\n        // TODO: setClip 的传参既 shape 配置，也支持 shape 对象\n        // const preShape = this.get('clipShape');\n        // if (preShape) {\n        //   // 将之前的 clipShape 销毁\n        //   preShape.destroy();\n        // }\n        var clipShape = null;\n        // 如果配置项为 null，则不移除 clipShape\n        if (clipCfg) {\n            var ShapeBase = this.getShapeBase();\n            var shapeType = upperFirst(clipCfg.type);\n            var Cons = ShapeBase[shapeType];\n            if (Cons) {\n                clipShape = new Cons({\n                    type: clipCfg.type,\n                    isClipShape: true,\n                    attrs: clipCfg.attrs,\n                    canvas: canvas,\n                });\n            }\n        }\n        this.set('clipShape', clipShape);\n        this.onCanvasChange('clip');\n        return clipShape;\n    };\n    Element.prototype.getClip = function () {\n        // 高频率调用的地方直接使用 this.cfg.xxx\n        var clipShape = this.cfg.clipShape;\n        // 未设置时返回 Null，保证一致性\n        if (!clipShape) {\n            return null;\n        }\n        return clipShape;\n    };\n    Element.prototype.clone = function () {\n        var _this = this;\n        var originAttrs = this.attrs;\n        var attrs = {};\n        each(originAttrs, function (i, k) {\n            if (isArray(originAttrs[k])) {\n                attrs[k] = _cloneArrayAttr(originAttrs[k]);\n            }\n            else {\n                attrs[k] = originAttrs[k];\n            }\n        });\n        var cons = this.constructor;\n        // @ts-ignore\n        var clone = new cons({ attrs: attrs });\n        each(CLONE_CFGS, function (cfgName) {\n            clone.set(cfgName, _this.get(cfgName));\n        });\n        return clone;\n    };\n    Element.prototype.destroy = function () {\n        var destroyed = this.destroyed;\n        if (destroyed) {\n            return;\n        }\n        this.attrs = {};\n        _super.prototype.destroy.call(this);\n        // this.onCanvasChange('destroy');\n    };\n    /**\n     * 是否处于动画暂停状态\n     * @return {boolean} 是否处于动画暂停状态\n     */\n    Element.prototype.isAnimatePaused = function () {\n        return this.get('_pause').isPaused;\n    };\n    /**\n     * 执行动画，支持多种函数签名\n     * 1. animate(toAttrs: ElementAttrs, duration: number, easing?: string, callback?: () => void, delay?: number)\n     * 2. animate(onFrame: OnFrame, duration: number, easing?: string, callback?: () => void, delay?: number)\n     * 3. animate(toAttrs: ElementAttrs, cfg: AnimateCfg)\n     * 4. animate(onFrame: OnFrame, cfg: AnimateCfg)\n     * 各个参数的含义为:\n     *   toAttrs  动画最终状态\n     *   onFrame  自定义帧动画函数\n     *   duration 动画执行时间\n     *   easing   动画缓动效果\n     *   callback 动画执行后的回调\n     *   delay    动画延迟时间\n     */\n    Element.prototype.animate = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        this.set('animating', true);\n        var timeline = this.get('timeline');\n        if (!timeline) {\n            timeline = this.get('canvas').get('timeline');\n            this.set('timeline', timeline);\n        }\n        var animations = this.get('animations') || [];\n        // 初始化 tick\n        if (!timeline.timer) {\n            timeline.initTimer();\n        }\n        var toAttrs = args[0], duration = args[1], _a = args[2], easing = _a === void 0 ? 'easeLinear' : _a, _b = args[3], callback = _b === void 0 ? noop : _b, _c = args[4], delay = _c === void 0 ? 0 : _c;\n        var onFrame;\n        var repeat;\n        var pauseCallback;\n        var resumeCallback;\n        var animateCfg;\n        // 第二个参数，既可以是动画最终状态 toAttrs，也可以是自定义帧动画函数 onFrame\n        if (isFunction(toAttrs)) {\n            onFrame = toAttrs;\n            toAttrs = {};\n        }\n        else if (isObject(toAttrs) && toAttrs.onFrame) {\n            // 兼容 3.0 中的写法，onFrame 和 repeat 可在 toAttrs 中设置\n            onFrame = toAttrs.onFrame;\n            repeat = toAttrs.repeat;\n        }\n        // 第二个参数，既可以是执行时间 duration，也可以是动画参数 animateCfg\n        if (isObject(duration)) {\n            animateCfg = duration;\n            duration = animateCfg.duration;\n            easing = animateCfg.easing || 'easeLinear';\n            delay = animateCfg.delay || 0;\n            // animateCfg 中的设置优先级更高\n            repeat = animateCfg.repeat || repeat || false;\n            callback = animateCfg.callback || noop;\n            pauseCallback = animateCfg.pauseCallback || noop;\n            resumeCallback = animateCfg.resumeCallback || noop;\n        }\n        else {\n            // 第四个参数，既可以是回调函数 callback，也可以是延迟时间 delay\n            if (isNumber(callback)) {\n                delay = callback;\n                callback = null;\n            }\n            // 第三个参数，既可以是缓动参数 easing，也可以是回调函数 callback\n            if (isFunction(easing)) {\n                callback = easing;\n                easing = 'easeLinear';\n            }\n            else {\n                easing = easing || 'easeLinear';\n            }\n        }\n        var formatToAttrs = getFormatToAttrs(toAttrs, this);\n        var animation = {\n            fromAttrs: getFormatFromAttrs(formatToAttrs, this),\n            toAttrs: formatToAttrs,\n            duration: duration,\n            easing: easing,\n            repeat: repeat,\n            callback: callback,\n            pauseCallback: pauseCallback,\n            resumeCallback: resumeCallback,\n            delay: delay,\n            startTime: timeline.getTime(),\n            id: uniqueId(),\n            onFrame: onFrame,\n            pathFormatted: false,\n        };\n        // 如果动画元素队列中已经有这个图形了\n        if (animations.length > 0) {\n            // 先检查是否需要合并属性。若有相同的动画，将该属性从前一个动画中删除,直接用后一个动画中\n            animations = checkExistedAttrs(animations, animation);\n        }\n        else {\n            // 否则将图形添加到动画元素队列\n            timeline.addAnimator(this);\n        }\n        animations.push(animation);\n        this.set('animations', animations);\n        this.set('_pause', { isPaused: false });\n    };\n    /**\n     * 停止动画\n     * @param {boolean} toEnd 是否到动画的最终状态\n     */\n    Element.prototype.stopAnimate = function (toEnd) {\n        var _this = this;\n        if (toEnd === void 0) { toEnd = true; }\n        var animations = this.get('animations');\n        each(animations, function (animation) {\n            // 将动画执行到最后一帧\n            if (toEnd) {\n                if (animation.onFrame) {\n                    _this.attr(animation.onFrame(1));\n                }\n                else {\n                    _this.attr(animation.toAttrs);\n                }\n            }\n            if (animation.callback) {\n                // 动画停止时的回调\n                animation.callback();\n            }\n        });\n        this.set('animating', false);\n        this.set('animations', []);\n    };\n    /**\n     * 暂停动画\n     */\n    Element.prototype.pauseAnimate = function () {\n        var timeline = this.get('timeline');\n        var animations = this.get('animations');\n        var pauseTime = timeline.getTime();\n        each(animations, function (animation) {\n            animation._paused = true;\n            animation._pauseTime = pauseTime;\n            if (animation.pauseCallback) {\n                // 动画暂停时的回调\n                animation.pauseCallback();\n            }\n        });\n        // 记录下是在什么时候暂停的\n        this.set('_pause', {\n            isPaused: true,\n            pauseTime: pauseTime,\n        });\n        return this;\n    };\n    /**\n     * 恢复动画\n     */\n    Element.prototype.resumeAnimate = function () {\n        var timeline = this.get('timeline');\n        var current = timeline.getTime();\n        var animations = this.get('animations');\n        var pauseTime = this.get('_pause').pauseTime;\n        // 之后更新属性需要计算动画已经执行的时长，如果暂停了，就把初始时间调后\n        each(animations, function (animation) {\n            animation.startTime = animation.startTime + (current - pauseTime);\n            animation._paused = false;\n            animation._pauseTime = null;\n            if (animation.resumeCallback) {\n                animation.resumeCallback();\n            }\n        });\n        this.set('_pause', {\n            isPaused: false,\n        });\n        this.set('animations', animations);\n        return this;\n    };\n    /**\n     * 触发委托事件\n     * @param  {string}     type 事件类型\n     * @param  {GraphEvent} eventObj 事件对象\n     */\n    Element.prototype.emitDelegation = function (type, eventObj) {\n        var _this = this;\n        var paths = eventObj.propagationPath;\n        var events = this.getEvents();\n        var relativeShape;\n        if (type === 'mouseenter') {\n            relativeShape = eventObj.fromShape;\n        }\n        else if (type === 'mouseleave') {\n            relativeShape = eventObj.toShape;\n        }\n        var _loop_1 = function (i) {\n            var element = paths[i];\n            // 暂定跟 name 绑定\n            var name_1 = element.get('name');\n            if (name_1) {\n                // 第一个 mouseenter 和 mouseleave 的停止即可，因为后面的都是前面的 Parent\n                if (\n                // 只有 element 是 Group 或者 Canvas 的时候，才需要判断 isParent\n                (element.isGroup() || (element.isCanvas && element.isCanvas())) &&\n                    relativeShape &&\n                    isParent(element, relativeShape)) {\n                    return \"break\";\n                }\n                if (isArray(name_1)) {\n                    each(name_1, function (subName) {\n                        _this.emitDelegateEvent(element, subName, eventObj);\n                    });\n                }\n                else {\n                    this_1.emitDelegateEvent(element, name_1, eventObj);\n                }\n            }\n        };\n        var this_1 = this;\n        // 至少有一个对象，且第一个对象为 shape\n        for (var i = 0; i < paths.length; i++) {\n            var state_1 = _loop_1(i);\n            if (state_1 === \"break\")\n                break;\n        }\n    };\n    Element.prototype.emitDelegateEvent = function (element, name, eventObj) {\n        var events = this.getEvents();\n        // 事件委托的形式 name:type\n        var eventName = name + DELEGATION_SPLIT + eventObj.type;\n        if (events[eventName] || events[WILDCARD]) {\n            // 对于通配符 *，事件名称 = 委托事件名称\n            eventObj.name = eventName;\n            eventObj.currentTarget = element;\n            eventObj.delegateTarget = this;\n            // 将委托事件的监听对象 delegateObject 挂载到事件对象上\n            eventObj.delegateObject = element.get('delegateObject');\n            this.emit(eventName, eventObj);\n        }\n    };\n    /**\n     * 移动元素\n     * @param {number} translateX 水平移动距离\n     * @param {number} translateY 垂直移动距离\n     * @return {IElement} 元素\n     */\n    Element.prototype.translate = function (translateX, translateY) {\n        if (translateX === void 0) { translateX = 0; }\n        if (translateY === void 0) { translateY = 0; }\n        var matrix = this.getMatrix();\n        var newMatrix = transform(matrix, [['t', translateX, translateY]]);\n        this.setMatrix(newMatrix);\n        return this;\n    };\n    /**\n     * 移动元素到目标位置\n     * @param {number} targetX 目标位置的水平坐标\n     * @param {number} targetX 目标位置的垂直坐标\n     * @return {IElement} 元素\n     */\n    Element.prototype.move = function (targetX, targetY) {\n        var x = this.attr('x') || 0;\n        var y = this.attr('y') || 0;\n        this.translate(targetX - x, targetY - y);\n        return this;\n    };\n    /**\n     * 移动元素到目标位置，等价于 move 方法。由于 moveTo 的语义性更强，因此在文档中推荐使用 moveTo 方法\n     * @param {number} targetX 目标位置的 x 轴坐标\n     * @param {number} targetY 目标位置的 y 轴坐标\n     * @return {IElement} 元素\n     */\n    Element.prototype.moveTo = function (targetX, targetY) {\n        return this.move(targetX, targetY);\n    };\n    /**\n     * 缩放元素\n     * @param {number} ratioX 水平缩放比例\n     * @param {number} ratioY 垂直缩放比例\n     * @return {IElement} 元素\n     */\n    Element.prototype.scale = function (ratioX, ratioY) {\n        var matrix = this.getMatrix();\n        var newMatrix = transform(matrix, [['s', ratioX, ratioY || ratioX]]);\n        this.setMatrix(newMatrix);\n        return this;\n    };\n    /**\n     * 以画布左上角 (0, 0) 为中心旋转元素\n     * @param {number} radian 旋转角度(弧度值)\n     * @return {IElement} 元素\n     */\n    Element.prototype.rotate = function (radian) {\n        var matrix = this.getMatrix();\n        var newMatrix = transform(matrix, [['r', radian]]);\n        this.setMatrix(newMatrix);\n        return this;\n    };\n    /**\n     * 以起始点为中心旋转元素\n     * @param {number} radian 旋转角度(弧度值)\n     * @return {IElement} 元素\n     */\n    Element.prototype.rotateAtStart = function (rotate) {\n        var _a = this.attr(), x = _a.x, y = _a.y;\n        var matrix = this.getMatrix();\n        var newMatrix = transform(matrix, [\n            ['t', -x, -y],\n            ['r', rotate],\n            ['t', x, y],\n        ]);\n        this.setMatrix(newMatrix);\n        return this;\n    };\n    /**\n     * 以任意点 (x, y) 为中心旋转元素\n     * @param {number} radian 旋转角度(弧度值)\n     * @return {IElement} 元素\n     */\n    Element.prototype.rotateAtPoint = function (x, y, rotate) {\n        var matrix = this.getMatrix();\n        var newMatrix = transform(matrix, [\n            ['t', -x, -y],\n            ['r', rotate],\n            ['t', x, y],\n        ]);\n        this.setMatrix(newMatrix);\n        return this;\n    };\n    return Element;\n}(Base));\nexport default Element;\n//# sourceMappingURL=element.js.map","import { __extends } from \"tslib\";\nimport Element from './element';\nimport { isFunction, isObject, each, removeFromArray, upperFirst, isAllowCapture } from '../util/util';\nvar SHAPE_MAP = {};\nvar INDEX = '_INDEX';\nfunction afterAdd(element) {\n    if (element.isGroup()) {\n        if (element.isEntityGroup() || element.get('children').length) {\n            element.onCanvasChange('add');\n        }\n    }\n    else {\n        element.onCanvasChange('add');\n    }\n}\n/**\n * 设置 canvas\n * @param {IElement} element 元素\n * @param {ICanvas}  canvas  画布\n */\nfunction setCanvas(element, canvas) {\n    element.set('canvas', canvas);\n    if (element.isGroup()) {\n        var children = element.get('children');\n        if (children.length) {\n            children.forEach(function (child) {\n                setCanvas(child, canvas);\n            });\n        }\n    }\n}\n/**\n * 设置 timeline\n * @param {IElement} element  元素\n * @param {Timeline} timeline 时间轴\n */\nfunction setTimeline(element, timeline) {\n    element.set('timeline', timeline);\n    if (element.isGroup()) {\n        var children = element.get('children');\n        if (children.length) {\n            children.forEach(function (child) {\n                setTimeline(child, timeline);\n            });\n        }\n    }\n}\nfunction contains(container, element) {\n    var children = container.getChildren();\n    return children.indexOf(element) >= 0;\n}\nfunction removeChild(container, element, destroy) {\n    if (destroy === void 0) { destroy = true; }\n    // 不再调用 element.remove() 方法，会出现循环调用\n    if (destroy) {\n        element.destroy();\n    }\n    else {\n        element.set('parent', null);\n        element.set('canvas', null);\n    }\n    removeFromArray(container.getChildren(), element);\n}\nfunction getComparer(compare) {\n    return function (left, right) {\n        var result = compare(left, right);\n        return result === 0 ? left[INDEX] - right[INDEX] : result;\n    };\n}\nvar Container = /** @class */ (function (_super) {\n    __extends(Container, _super);\n    function Container() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Container.prototype.isCanvas = function () {\n        return false;\n    };\n    // 根据子节点确定 BBox\n    Container.prototype.getBBox = function () {\n        // 所有的值可能在画布的可视区外\n        var minX = Infinity;\n        var maxX = -Infinity;\n        var minY = Infinity;\n        var maxY = -Infinity;\n        var xArr = [];\n        var yArr = [];\n        // 将可见元素、图形以及不为空的图形分组筛选出来，用于包围盒合并\n        var children = this.getChildren().filter(function (child) {\n            return child.get('visible') && (!child.isGroup() || (child.isGroup() && child.getChildren().length > 0));\n        });\n        if (children.length > 0) {\n            each(children, function (child) {\n                var box = child.getBBox();\n                xArr.push(box.minX, box.maxX);\n                yArr.push(box.minY, box.maxY);\n            });\n            minX = Math.min.apply(null, xArr);\n            maxX = Math.max.apply(null, xArr);\n            minY = Math.min.apply(null, yArr);\n            maxY = Math.max.apply(null, yArr);\n        }\n        else {\n            minX = 0;\n            maxX = 0;\n            minY = 0;\n            maxY = 0;\n        }\n        var box = {\n            x: minX,\n            y: minY,\n            minX: minX,\n            minY: minY,\n            maxX: maxX,\n            maxY: maxY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n        return box;\n    };\n    // 获取画布的包围盒\n    Container.prototype.getCanvasBBox = function () {\n        var minX = Infinity;\n        var maxX = -Infinity;\n        var minY = Infinity;\n        var maxY = -Infinity;\n        var xArr = [];\n        var yArr = [];\n        // 将可见元素、图形以及不为空的图形分组筛选出来，用于包围盒合并\n        var children = this.getChildren().filter(function (child) {\n            return child.get('visible') && (!child.isGroup() || (child.isGroup() && child.getChildren().length > 0));\n        });\n        if (children.length > 0) {\n            each(children, function (child) {\n                var box = child.getCanvasBBox();\n                xArr.push(box.minX, box.maxX);\n                yArr.push(box.minY, box.maxY);\n            });\n            minX = Math.min.apply(null, xArr);\n            maxX = Math.max.apply(null, xArr);\n            minY = Math.min.apply(null, yArr);\n            maxY = Math.max.apply(null, yArr);\n        }\n        else {\n            minX = 0;\n            maxX = 0;\n            minY = 0;\n            maxY = 0;\n        }\n        var box = {\n            x: minX,\n            y: minY,\n            minX: minX,\n            minY: minY,\n            maxX: maxX,\n            maxY: maxY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n        return box;\n    };\n    Container.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        cfg['children'] = [];\n        return cfg;\n    };\n    Container.prototype.onAttrChange = function (name, value, originValue) {\n        _super.prototype.onAttrChange.call(this, name, value, originValue);\n        if (name === 'matrix') {\n            var totalMatrix = this.getTotalMatrix();\n            this._applyChildrenMarix(totalMatrix);\n        }\n    };\n    // 不但应用到自己身上还要应用于子元素\n    Container.prototype.applyMatrix = function (matrix) {\n        var preTotalMatrix = this.getTotalMatrix();\n        _super.prototype.applyMatrix.call(this, matrix);\n        var totalMatrix = this.getTotalMatrix();\n        // totalMatrix 没有发生变化时，这里仅考虑两者都为 null 时\n        // 不继续向下传递矩阵\n        if (totalMatrix === preTotalMatrix) {\n            return;\n        }\n        this._applyChildrenMarix(totalMatrix);\n    };\n    // 在子元素上设置矩阵\n    Container.prototype._applyChildrenMarix = function (totalMatrix) {\n        var children = this.getChildren();\n        each(children, function (child) {\n            child.applyMatrix(totalMatrix);\n        });\n    };\n    // 兼容老版本的接口\n    Container.prototype.addShape = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var type = args[0];\n        var cfg = args[1];\n        if (isObject(type)) {\n            cfg = type;\n        }\n        else {\n            cfg['type'] = type;\n        }\n        var shapeType = SHAPE_MAP[cfg.type];\n        if (!shapeType) {\n            shapeType = upperFirst(cfg.type);\n            SHAPE_MAP[cfg.type] = shapeType;\n        }\n        var ShapeBase = this.getShapeBase();\n        var shape = new ShapeBase[shapeType](cfg);\n        this.add(shape);\n        return shape;\n    };\n    Container.prototype.addGroup = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var groupClass = args[0], cfg = args[1];\n        var group;\n        if (isFunction(groupClass)) {\n            if (cfg) {\n                group = new groupClass(cfg);\n            }\n            else {\n                group = new groupClass({\n                    // canvas,\n                    parent: this,\n                });\n            }\n        }\n        else {\n            var tmpCfg = groupClass || {};\n            var TmpGroupClass = this.getGroupBase();\n            group = new TmpGroupClass(tmpCfg);\n        }\n        this.add(group);\n        return group;\n    };\n    Container.prototype.getCanvas = function () {\n        var canvas;\n        if (this.isCanvas()) {\n            canvas = this;\n        }\n        else {\n            canvas = this.get('canvas');\n        }\n        return canvas;\n    };\n    Container.prototype.getShape = function (x, y, ev) {\n        // 如果不支持拾取，则直接返回\n        if (!isAllowCapture(this)) {\n            return null;\n        }\n        var children = this.getChildren();\n        var shape;\n        // 如果容器是 group\n        if (!this.isCanvas()) {\n            var v = [x, y, 1];\n            // 将 x, y 转换成对应于 group 的局部坐标\n            v = this.invertFromMatrix(v);\n            if (!this.isClipped(v[0], v[1])) {\n                shape = this._findShape(children, v[0], v[1], ev);\n            }\n        }\n        else {\n            shape = this._findShape(children, x, y, ev);\n        }\n        return shape;\n    };\n    Container.prototype._findShape = function (children, x, y, ev) {\n        var shape = null;\n        for (var i = children.length - 1; i >= 0; i--) {\n            var child = children[i];\n            if (isAllowCapture(child)) {\n                if (child.isGroup()) {\n                    shape = child.getShape(x, y, ev);\n                }\n                else if (child.isHit(x, y)) {\n                    shape = child;\n                }\n            }\n            if (shape) {\n                break;\n            }\n        }\n        return shape;\n    };\n    Container.prototype.add = function (element) {\n        var canvas = this.getCanvas();\n        var children = this.getChildren();\n        var timeline = this.get('timeline');\n        var preParent = element.getParent();\n        if (preParent) {\n            removeChild(preParent, element, false);\n        }\n        element.set('parent', this);\n        if (canvas) {\n            setCanvas(element, canvas);\n        }\n        if (timeline) {\n            setTimeline(element, timeline);\n        }\n        children.push(element);\n        afterAdd(element);\n        this._applyElementMatrix(element);\n    };\n    // 将当前容器的矩阵应用到子元素\n    Container.prototype._applyElementMatrix = function (element) {\n        var totalMatrix = this.getTotalMatrix();\n        // 添加图形或者分组时，需要把当前图元的矩阵设置进去\n        if (totalMatrix) {\n            element.applyMatrix(totalMatrix);\n        }\n    };\n    Container.prototype.getChildren = function () {\n        return this.get('children');\n    };\n    Container.prototype.sort = function () {\n        var children = this.getChildren();\n        // 稳定排序\n        each(children, function (child, index) {\n            child[INDEX] = index;\n            return child;\n        });\n        children.sort(getComparer(function (obj1, obj2) {\n            return obj1.get('zIndex') - obj2.get('zIndex');\n        }));\n        this.onCanvasChange('sort');\n    };\n    Container.prototype.clear = function () {\n        this.set('clearing', true);\n        if (this.destroyed) {\n            return;\n        }\n        var children = this.getChildren();\n        for (var i = children.length - 1; i >= 0; i--) {\n            children[i].destroy(); // 销毁子元素\n        }\n        this.set('children', []);\n        this.onCanvasChange('clear');\n        this.set('clearing', false);\n    };\n    Container.prototype.destroy = function () {\n        if (this.get('destroyed')) {\n            return;\n        }\n        this.clear();\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * 获取第一个子元素\n     * @return {IElement} 第一个元素\n     */\n    Container.prototype.getFirst = function () {\n        return this.getChildByIndex(0);\n    };\n    /**\n     * 获取最后一个子元素\n     * @return {IElement} 元素\n     */\n    Container.prototype.getLast = function () {\n        var children = this.getChildren();\n        return this.getChildByIndex(children.length - 1);\n    };\n    /**\n     * 根据索引获取子元素\n     * @return {IElement} 第一个元素\n     */\n    Container.prototype.getChildByIndex = function (index) {\n        var children = this.getChildren();\n        return children[index];\n    };\n    /**\n     * 子元素的数量\n     * @return {number} 子元素数量\n     */\n    Container.prototype.getCount = function () {\n        var children = this.getChildren();\n        return children.length;\n    };\n    /**\n     * 是否包含对应元素\n     * @param {IElement} element 元素\n     * @return {boolean}\n     */\n    Container.prototype.contain = function (element) {\n        var children = this.getChildren();\n        return children.indexOf(element) > -1;\n    };\n    /**\n     * 移除对应子元素\n     * @param {IElement} element 子元素\n     * @param {boolean} destroy 是否销毁子元素，默认为 true\n     */\n    Container.prototype.removeChild = function (element, destroy) {\n        if (destroy === void 0) { destroy = true; }\n        if (this.contain(element)) {\n            element.remove(destroy);\n        }\n    };\n    /**\n     * 查找所有匹配的元素\n     * @param  {ElementFilterFn}   fn  匹配函数\n     * @return {IElement[]} 元素数组\n     */\n    Container.prototype.findAll = function (fn) {\n        var rst = [];\n        var children = this.getChildren();\n        each(children, function (element) {\n            if (fn(element)) {\n                rst.push(element);\n            }\n            if (element.isGroup()) {\n                rst = rst.concat(element.findAll(fn));\n            }\n        });\n        return rst;\n    };\n    /**\n     * 查找元素，找到第一个返回\n     * @param  {ElementFilterFn} fn    匹配函数\n     * @return {IElement|null} 元素，可以为空\n     */\n    Container.prototype.find = function (fn) {\n        var rst = null;\n        var children = this.getChildren();\n        each(children, function (element) {\n            if (fn(element)) {\n                rst = element;\n            }\n            else if (element.isGroup()) {\n                rst = element.find(fn);\n            }\n            if (rst) {\n                return false;\n            }\n        });\n        return rst;\n    };\n    /**\n     * 根据 ID 查找元素\n     * @param {string} id 元素 id\n     * @return {IElement|null} 元素\n     */\n    Container.prototype.findById = function (id) {\n        return this.find(function (element) {\n            return element.get('id') === id;\n        });\n    };\n    /**\n     * 该方法即将废弃，不建议使用\n     * 根据 className 查找元素\n     * TODO: 该方式定义暂时只给 G6 3.3 以后的版本使用，待 G6 中的 findByClassName 方法移除后，G 也需要同步移除\n     * @param {string} className 元素 className\n     * @return {IElement | null} 元素\n     */\n    Container.prototype.findByClassName = function (className) {\n        return this.find(function (element) {\n            return element.get('className') === className;\n        });\n    };\n    /**\n     * 根据 name 查找元素列表\n     * @param {string}      name 元素名称\n     * @return {IElement[]} 元素\n     */\n    Container.prototype.findAllByName = function (name) {\n        return this.findAll(function (element) {\n            return element.get('name') === name;\n        });\n    };\n    return Container;\n}(Element));\nexport default Container;\n//# sourceMappingURL=container.js.map","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","export function linear(t) {\n  return +t;\n}\n","export function quadIn(t) {\n  return t * t;\n}\n\nexport function quadOut(t) {\n  return t * (2 - t);\n}\n\nexport function quadInOut(t) {\n  return ((t *= 2) <= 1 ? t * t : --t * (2 - t) + 1) / 2;\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","var exponent = 3;\n\nexport var polyIn = (function custom(e) {\n  e = +e;\n\n  function polyIn(t) {\n    return Math.pow(t, e);\n  }\n\n  polyIn.exponent = custom;\n\n  return polyIn;\n})(exponent);\n\nexport var polyOut = (function custom(e) {\n  e = +e;\n\n  function polyOut(t) {\n    return 1 - Math.pow(1 - t, e);\n  }\n\n  polyOut.exponent = custom;\n\n  return polyOut;\n})(exponent);\n\nexport var polyInOut = (function custom(e) {\n  e = +e;\n\n  function polyInOut(t) {\n    return ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2;\n  }\n\n  polyInOut.exponent = custom;\n\n  return polyInOut;\n})(exponent);\n","var pi = Math.PI,\n    halfPi = pi / 2;\n\nexport function sinIn(t) {\n  return 1 - Math.cos(t * halfPi);\n}\n\nexport function sinOut(t) {\n  return Math.sin(t * halfPi);\n}\n\nexport function sinInOut(t) {\n  return (1 - Math.cos(pi * t)) / 2;\n}\n","export function expIn(t) {\n  return Math.pow(2, 10 * t - 10);\n}\n\nexport function expOut(t) {\n  return 1 - Math.pow(2, -10 * t);\n}\n\nexport function expInOut(t) {\n  return ((t *= 2) <= 1 ? Math.pow(2, 10 * t - 10) : 2 - Math.pow(2, 10 - 10 * t)) / 2;\n}\n","export function circleIn(t) {\n  return 1 - Math.sqrt(1 - t * t);\n}\n\nexport function circleOut(t) {\n  return Math.sqrt(1 - --t * t);\n}\n\nexport function circleInOut(t) {\n  return ((t *= 2) <= 1 ? 1 - Math.sqrt(1 - t * t) : Math.sqrt(1 - (t -= 2) * t) + 1) / 2;\n}\n","var b1 = 4 / 11,\n    b2 = 6 / 11,\n    b3 = 8 / 11,\n    b4 = 3 / 4,\n    b5 = 9 / 11,\n    b6 = 10 / 11,\n    b7 = 15 / 16,\n    b8 = 21 / 22,\n    b9 = 63 / 64,\n    b0 = 1 / b1 / b1;\n\nexport function bounceIn(t) {\n  return 1 - bounceOut(1 - t);\n}\n\nexport function bounceOut(t) {\n  return (t = +t) < b1 ? b0 * t * t : t < b3 ? b0 * (t -= b2) * t + b4 : t < b6 ? b0 * (t -= b5) * t + b7 : b0 * (t -= b8) * t + b9;\n}\n\nexport function bounceInOut(t) {\n  return ((t *= 2) <= 1 ? 1 - bounceOut(1 - t) : bounceOut(t - 1) + 1) / 2;\n}\n","var overshoot = 1.70158;\n\nexport var backIn = (function custom(s) {\n  s = +s;\n\n  function backIn(t) {\n    return t * t * ((s + 1) * t - s);\n  }\n\n  backIn.overshoot = custom;\n\n  return backIn;\n})(overshoot);\n\nexport var backOut = (function custom(s) {\n  s = +s;\n\n  function backOut(t) {\n    return --t * t * ((s + 1) * t + s) + 1;\n  }\n\n  backOut.overshoot = custom;\n\n  return backOut;\n})(overshoot);\n\nexport var backInOut = (function custom(s) {\n  s = +s;\n\n  function backInOut(t) {\n    return ((t *= 2) < 1 ? t * t * ((s + 1) * t - s) : (t -= 2) * t * ((s + 1) * t + s) + 2) / 2;\n  }\n\n  backInOut.overshoot = custom;\n\n  return backInOut;\n})(overshoot);\n","var tau = 2 * Math.PI,\n    amplitude = 1,\n    period = 0.3;\n\nexport var elasticIn = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticIn(t) {\n    return a * Math.pow(2, 10 * --t) * Math.sin((s - t) / p);\n  }\n\n  elasticIn.amplitude = function(a) { return custom(a, p * tau); };\n  elasticIn.period = function(p) { return custom(a, p); };\n\n  return elasticIn;\n})(amplitude, period);\n\nexport var elasticOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticOut(t) {\n    return 1 - a * Math.pow(2, -10 * (t = +t)) * Math.sin((t + s) / p);\n  }\n\n  elasticOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticOut.period = function(p) { return custom(a, p); };\n\n  return elasticOut;\n})(amplitude, period);\n\nexport var elasticInOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticInOut(t) {\n    return ((t = t * 2 - 1) < 0\n        ? a * Math.pow(2, 10 * t) * Math.sin((s - t) / p)\n        : 2 - a * Math.pow(2, -10 * t) * Math.sin((s + t) / p)) / 2;\n  }\n\n  elasticInOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticInOut.period = function(p) { return custom(a, p); };\n\n  return elasticInOut;\n})(amplitude, period);\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","import { isEqual, isNumber, isFunction } from '@antv/util';\nimport * as d3Timer from 'd3-timer';\nimport * as d3Ease from 'd3-ease';\nimport { interpolate, interpolateArray } from 'd3-interpolate'; // 目前整体动画只需要数值和数组的差值计算\nimport * as PathUtil from '../util/path';\nimport { isColorProp, isGradientColor } from '../util/color';\nvar IDENTITY_MATRIX = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n/**\n * 使用 ratio 进行插值计算来更新属性\n * @param {IElement}  shape    元素\n * @param {Animation} animation 动画\n * @param {number}    ratio    比例\n * @return {boolean}  动画是否执行完成\n */\nfunction _update(shape, animation, ratio) {\n    var cProps = {}; // 此刻属性\n    var fromAttrs = animation.fromAttrs, toAttrs = animation.toAttrs;\n    if (shape.destroyed) {\n        return;\n    }\n    var interf; //  差值函数\n    for (var k in toAttrs) {\n        if (!isEqual(fromAttrs[k], toAttrs[k])) {\n            if (k === 'path') {\n                var toPath = toAttrs[k];\n                var fromPath = fromAttrs[k];\n                if (toPath.length > fromPath.length) {\n                    toPath = PathUtil.parsePathString(toAttrs[k]); // 终点状态\n                    fromPath = PathUtil.parsePathString(fromAttrs[k]); // 起始状态\n                    fromPath = PathUtil.fillPathByDiff(fromPath, toPath);\n                    fromPath = PathUtil.formatPath(fromPath, toPath);\n                    animation.fromAttrs.path = fromPath;\n                    animation.toAttrs.path = toPath;\n                }\n                else if (!animation.pathFormatted) {\n                    toPath = PathUtil.parsePathString(toAttrs[k]);\n                    fromPath = PathUtil.parsePathString(fromAttrs[k]);\n                    fromPath = PathUtil.formatPath(fromPath, toPath);\n                    animation.fromAttrs.path = fromPath;\n                    animation.toAttrs.path = toPath;\n                    animation.pathFormatted = true;\n                }\n                cProps[k] = [];\n                for (var i = 0; i < toPath.length; i++) {\n                    var toPathPoint = toPath[i];\n                    var fromPathPoint = fromPath[i];\n                    var cPathPoint = [];\n                    for (var j = 0; j < toPathPoint.length; j++) {\n                        if (isNumber(toPathPoint[j]) && fromPathPoint && isNumber(fromPathPoint[j])) {\n                            interf = interpolate(fromPathPoint[j], toPathPoint[j]);\n                            cPathPoint.push(interf(ratio));\n                        }\n                        else {\n                            cPathPoint.push(toPathPoint[j]);\n                        }\n                    }\n                    cProps[k].push(cPathPoint);\n                }\n            }\n            else if (k === 'matrix') {\n                /*\n                 对矩阵进行插值时，需要保证矩阵不为空，为空则使用单位矩阵\n                 TODO: 二维和三维场景下单位矩阵不同，之后 WebGL 版需要做进一步处理\n                 */\n                var matrixFn = interpolateArray(fromAttrs[k] || IDENTITY_MATRIX, toAttrs[k] || IDENTITY_MATRIX);\n                var currentMatrix = matrixFn(ratio);\n                cProps[k] = currentMatrix;\n            }\n            else if (isColorProp(k) && isGradientColor(toAttrs[k])) {\n                cProps[k] = toAttrs[k];\n            }\n            else if (!isFunction(toAttrs[k])) {\n                // 非函数类型的值才能做插值\n                interf = interpolate(fromAttrs[k], toAttrs[k]);\n                cProps[k] = interf(ratio);\n            }\n        }\n    }\n    shape.attr(cProps);\n}\n/**\n * 根据自定义帧动画函数 onFrame 来更新属性\n * @param {IElement}  shape    元素\n * @param {Animation} animation 动画\n * @param {number}    elapsed  动画执行时间(毫秒)\n * @return {boolean}  动画是否执行完成\n */\nfunction update(shape, animation, elapsed) {\n    var startTime = animation.startTime, delay = animation.delay;\n    // 如果还没有开始执行或暂停，先不更新\n    if (elapsed < startTime + delay || animation._paused) {\n        return false;\n    }\n    var ratio;\n    var duration = animation.duration;\n    var easing = animation.easing;\n    // 已执行时间\n    elapsed = elapsed - startTime - animation.delay;\n    if (animation.repeat) {\n        // 如果动画重复执行，则 elapsed > duration，计算 ratio 时需取模\n        ratio = (elapsed % duration) / duration;\n        ratio = d3Ease[easing](ratio);\n    }\n    else {\n        ratio = elapsed / duration;\n        if (ratio < 1) {\n            // 动画未执行完\n            ratio = d3Ease[easing](ratio);\n        }\n        else {\n            // 动画已执行完\n            if (animation.onFrame) {\n                shape.attr(animation.onFrame(1));\n            }\n            else {\n                shape.attr(animation.toAttrs);\n            }\n            return true;\n        }\n    }\n    if (animation.onFrame) {\n        var attrs = animation.onFrame(ratio);\n        shape.attr(attrs);\n    }\n    else {\n        _update(shape, animation, ratio);\n    }\n    return false;\n}\nvar Timeline = /** @class */ (function () {\n    /**\n     * 时间轴构造函数，依赖于画布\n     * @param {}\n     */\n    function Timeline(canvas) {\n        /**\n         * 执行动画的元素列表\n         * @type {IElement[]}\n         */\n        this.animators = [];\n        /**\n         * 当前时间\n         * @type {number}\n         */\n        this.current = 0;\n        /**\n         * 定时器\n         * @type {d3Timer.Timer}\n         */\n        this.timer = null;\n        this.canvas = canvas;\n    }\n    /**\n     * 初始化定时器\n     */\n    Timeline.prototype.initTimer = function () {\n        var _this = this;\n        var isFinished = false;\n        var shape;\n        var animations;\n        var animation;\n        this.timer = d3Timer.timer(function (elapsed) {\n            _this.current = elapsed;\n            if (_this.animators.length > 0) {\n                for (var i = _this.animators.length - 1; i >= 0; i--) {\n                    shape = _this.animators[i];\n                    if (shape.destroyed) {\n                        // 如果已经被销毁，直接移出队列\n                        _this.removeAnimator(i);\n                        continue;\n                    }\n                    if (!shape.isAnimatePaused()) {\n                        animations = shape.get('animations');\n                        for (var j = animations.length - 1; j >= 0; j--) {\n                            animation = animations[j];\n                            isFinished = update(shape, animation, elapsed);\n                            if (isFinished) {\n                                animations.splice(j, 1);\n                                isFinished = false;\n                                if (animation.callback) {\n                                    animation.callback();\n                                }\n                            }\n                        }\n                    }\n                    if (animations.length === 0) {\n                        _this.removeAnimator(i);\n                    }\n                }\n                var autoDraw = _this.canvas.get('autoDraw');\n                // 非自动渲染模式下，手动调用 canvas.draw() 重新渲染\n                if (!autoDraw) {\n                    _this.canvas.draw();\n                }\n            }\n        });\n    };\n    /**\n     * 增加动画元素\n     */\n    Timeline.prototype.addAnimator = function (shape) {\n        this.animators.push(shape);\n    };\n    /**\n     * 移除动画元素\n     */\n    Timeline.prototype.removeAnimator = function (index) {\n        this.animators.splice(index, 1);\n    };\n    /**\n     * 是否有动画在执行\n     */\n    Timeline.prototype.isAnimating = function () {\n        return !!this.animators.length;\n    };\n    /**\n     * 停止定时器\n     */\n    Timeline.prototype.stop = function () {\n        if (this.timer) {\n            this.timer.stop();\n        }\n    };\n    /**\n     * 停止时间轴上所有元素的动画，并置空动画元素列表\n     * @param {boolean} toEnd 是否到动画的最终状态，用来透传给动画元素的 stopAnimate 方法\n     */\n    Timeline.prototype.stopAllAnimations = function (toEnd) {\n        if (toEnd === void 0) { toEnd = true; }\n        this.animators.forEach(function (animator) {\n            animator.stopAnimate(toEnd);\n        });\n        this.animators = [];\n        this.canvas.draw();\n    };\n    /**\n     * 获取当前时间\n     */\n    Timeline.prototype.getTime = function () {\n        return this.current;\n    };\n    return Timeline;\n}());\nexport default Timeline;\n//# sourceMappingURL=timeline.js.map","export var isColorProp = function (prop) { return ['fill', 'stroke', 'fillStyle', 'strokeStyle'].includes(prop); };\nexport var isGradientColor = function (val) { return /^[r,R,L,l]{1}[\\s]*\\(/.test(val); };\n//# sourceMappingURL=color.js.map","import { __extends } from \"tslib\";\nimport Container from './container';\nimport { isBrowser, isString } from '../util/util';\nimport Timeline from '../animate/timeline';\nvar PX_SUFFIX = 'px';\nvar Canvas = /** @class */ (function (_super) {\n    __extends(Canvas, _super);\n    function Canvas(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.initContainer();\n        _this.initDom();\n        _this.initEvents();\n        _this.initTimeline();\n        return _this;\n    }\n    Canvas.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        // set default cursor style for canvas\n        cfg['cursor'] = 'default';\n        return cfg;\n    };\n    /**\n     * @protected\n     * 初始化容器\n     */\n    Canvas.prototype.initContainer = function () {\n        var container = this.get('container');\n        if (isString(container)) {\n            container = document.getElementById(container);\n            this.set('container', container);\n        }\n    };\n    /**\n     * @protected\n     * 初始化 DOM\n     */\n    Canvas.prototype.initDom = function () {\n        var el = this.createDom();\n        this.set('el', el);\n        // 附加到容器\n        var container = this.get('container');\n        container.appendChild(el);\n        // 设置初始宽度\n        this.setDOMSize(this.get('width'), this.get('height'));\n    };\n    /**\n     * @protected\n     * 初始化绑定的事件\n     */\n    Canvas.prototype.initEvents = function () { };\n    /**\n     * @protected\n     * 初始化时间轴\n     */\n    Canvas.prototype.initTimeline = function () {\n        var timeline = new Timeline(this);\n        this.set('timeline', timeline);\n    };\n    /**\n     * @protected\n     * 修改画布对应的 DOM 的大小\n     * @param {number} width  宽度\n     * @param {number} height 高度\n     */\n    Canvas.prototype.setDOMSize = function (width, height) {\n        var el = this.get('el');\n        if (isBrowser) {\n            el.style.width = width + PX_SUFFIX;\n            el.style.height = height + PX_SUFFIX;\n        }\n    };\n    // 实现接口\n    Canvas.prototype.changeSize = function (width, height) {\n        this.setDOMSize(width, height);\n        this.set('width', width);\n        this.set('height', height);\n        this.onCanvasChange('changeSize');\n    };\n    /**\n     * 获取当前的渲染引擎\n     * @return {Renderer} 返回当前的渲染引擎\n     */\n    Canvas.prototype.getRenderer = function () {\n        return this.get('renderer');\n    };\n    /**\n     * 获取画布的 cursor 样式\n     * @return {Cursor}\n     */\n    Canvas.prototype.getCursor = function () {\n        return this.get('cursor');\n    };\n    /**\n     * 设置画布的 cursor 样式\n     * @param {Cursor} cursor  cursor 样式\n     */\n    Canvas.prototype.setCursor = function (cursor) {\n        this.set('cursor', cursor);\n        var el = this.get('el');\n        if (isBrowser && el) {\n            // 直接设置样式，不等待鼠标移动时再设置\n            el.style.cursor = cursor;\n        }\n    };\n    // 实现接口\n    Canvas.prototype.getPointByClient = function (clientX, clientY) {\n        var el = this.get('el');\n        var bbox = el.getBoundingClientRect();\n        return {\n            x: clientX - bbox.left,\n            y: clientY - bbox.top,\n        };\n    };\n    // 实现接口\n    Canvas.prototype.getClientByPoint = function (x, y) {\n        var el = this.get('el');\n        var bbox = el.getBoundingClientRect();\n        return {\n            x: x + bbox.left,\n            y: y + bbox.top,\n        };\n    };\n    // 实现接口\n    Canvas.prototype.draw = function () { };\n    /**\n     * @protected\n     * 销毁 DOM 容器\n     */\n    Canvas.prototype.removeDom = function () {\n        var el = this.get('el');\n        el.parentNode.removeChild(el);\n    };\n    /**\n     * @protected\n     * 清理所有的事件\n     */\n    Canvas.prototype.clearEvents = function () { };\n    Canvas.prototype.isCanvas = function () {\n        return true;\n    };\n    Canvas.prototype.getParent = function () {\n        return null;\n    };\n    Canvas.prototype.destroy = function () {\n        var timeline = this.get('timeline');\n        if (this.get('destroyed')) {\n            return;\n        }\n        this.clear();\n        // 同初始化时相反顺序调用\n        if (timeline) {\n            // 画布销毁时自动停止动画\n            timeline.stop();\n        }\n        this.clearEvents();\n        this.removeDom();\n        _super.prototype.destroy.call(this);\n    };\n    return Canvas;\n}(Container));\nexport default Canvas;\n//# sourceMappingURL=canvas.js.map","import { __extends } from \"tslib\";\nimport Container from './container';\nvar AbstractGroup = /** @class */ (function (_super) {\n    __extends(AbstractGroup, _super);\n    function AbstractGroup() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AbstractGroup.prototype.isGroup = function () {\n        return true;\n    };\n    AbstractGroup.prototype.isEntityGroup = function () {\n        return false;\n    };\n    AbstractGroup.prototype.clone = function () {\n        var clone = _super.prototype.clone.call(this);\n        // 获取构造函数\n        var children = this.getChildren();\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            clone.add(child.clone());\n        }\n        return clone;\n    };\n    return AbstractGroup;\n}(Container));\nexport default AbstractGroup;\n//# sourceMappingURL=group.js.map","import { __extends } from \"tslib\";\nimport Element from './element';\nimport { multiplyVec2 } from '../util/matrix';\nvar AbstractShape = /** @class */ (function (_super) {\n    __extends(AbstractShape, _super);\n    function AbstractShape(cfg) {\n        return _super.call(this, cfg) || this;\n    }\n    // 是否在包围盒内\n    AbstractShape.prototype._isInBBox = function (refX, refY) {\n        var bbox = this.getBBox();\n        return bbox.minX <= refX && bbox.maxX >= refX && bbox.minY <= refY && bbox.maxY >= refY;\n    };\n    /**\n     * 属性更改后需要做的事情\n     * @protected\n     * @param {ShapeAttrs} targetAttrs 渲染的图像属性\n     */\n    AbstractShape.prototype.afterAttrsChange = function (targetAttrs) {\n        _super.prototype.afterAttrsChange.call(this, targetAttrs);\n        this.clearCacheBBox();\n    };\n    // 计算包围盒时，需要缓存，这是一个高频的操作\n    AbstractShape.prototype.getBBox = function () {\n        var bbox = this.get('bbox');\n        if (!bbox) {\n            bbox = this.calculateBBox();\n            this.set('bbox', bbox);\n        }\n        return bbox;\n    };\n    // 计算相对于画布的包围盒\n    AbstractShape.prototype.getCanvasBBox = function () {\n        var canvasBox = this.get('canvasBox');\n        if (!canvasBox) {\n            canvasBox = this.calculateCanvasBBox();\n            this.set('canvasBox', canvasBox);\n        }\n        return canvasBox;\n    };\n    AbstractShape.prototype.applyMatrix = function (matrix) {\n        _super.prototype.applyMatrix.call(this, matrix);\n        // 清理掉缓存的包围盒\n        this.set('canvasBox', null);\n    };\n    /**\n     * 计算相对于画布的包围盒，默认等同于 bbox\n     * @return {BBox} 包围盒\n     */\n    AbstractShape.prototype.calculateCanvasBBox = function () {\n        var bbox = this.getBBox();\n        var totalMatrix = this.getTotalMatrix();\n        var minX = bbox.minX, minY = bbox.minY, maxX = bbox.maxX, maxY = bbox.maxY;\n        if (totalMatrix) {\n            var topLeft = multiplyVec2(totalMatrix, [bbox.minX, bbox.minY]);\n            var topRight = multiplyVec2(totalMatrix, [bbox.maxX, bbox.minY]);\n            var bottomLeft = multiplyVec2(totalMatrix, [bbox.minX, bbox.maxY]);\n            var bottomRight = multiplyVec2(totalMatrix, [bbox.maxX, bbox.maxY]);\n            minX = Math.min(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]);\n            maxX = Math.max(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]);\n            minY = Math.min(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]);\n            maxY = Math.max(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]);\n        }\n        var attrs = this.attrs;\n        // 如果存在 shadow 则计算 shadow\n        if (attrs.shadowColor) {\n            var _a = attrs.shadowBlur, shadowBlur = _a === void 0 ? 0 : _a, _b = attrs.shadowOffsetX, shadowOffsetX = _b === void 0 ? 0 : _b, _c = attrs.shadowOffsetY, shadowOffsetY = _c === void 0 ? 0 : _c;\n            var shadowLeft = minX - shadowBlur + shadowOffsetX;\n            var shadowRight = maxX + shadowBlur + shadowOffsetX;\n            var shadowTop = minY - shadowBlur + shadowOffsetY;\n            var shadowBottom = maxY + shadowBlur + shadowOffsetY;\n            minX = Math.min(minX, shadowLeft);\n            maxX = Math.max(maxX, shadowRight);\n            minY = Math.min(minY, shadowTop);\n            maxY = Math.max(maxY, shadowBottom);\n        }\n        return {\n            x: minX,\n            y: minY,\n            minX: minX,\n            minY: minY,\n            maxX: maxX,\n            maxY: maxY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    };\n    /**\n     * @protected\n     * 清理缓存的 bbox\n     */\n    AbstractShape.prototype.clearCacheBBox = function () {\n        this.set('bbox', null);\n        this.set('canvasBox', null);\n    };\n    // 实现接口\n    AbstractShape.prototype.isClipShape = function () {\n        return this.get('isClipShape');\n    };\n    /**\n     * @protected\n     * 不同的图形自己实现是否在图形内部的逻辑，要判断边和填充区域\n     * @param  {number}  refX 相对于图形的坐标 x\n     * @param  {number}  refY 相对于图形的坐标 Y\n     * @return {boolean} 点是否在图形内部\n     */\n    AbstractShape.prototype.isInShape = function (refX, refY) {\n        return false;\n    };\n    /**\n     * 是否仅仅使用 BBox 检测就可以判定拾取到图形\n     * 默认是 false，但是有些图形例如 image、marker 等都可直接使用 BBox 的检测而不需要使用图形拾取\n     * @return {Boolean} 仅仅使用 BBox 进行拾取\n     */\n    AbstractShape.prototype.isOnlyHitBox = function () {\n        return false;\n    };\n    // 不同的 Shape 各自实现\n    AbstractShape.prototype.isHit = function (x, y) {\n        var startArrowShape = this.get('startArrowShape');\n        var endArrowShape = this.get('endArrowShape');\n        var vec = [x, y, 1];\n        vec = this.invertFromMatrix(vec);\n        var refX = vec[0], refY = vec[1];\n        var inBBox = this._isInBBox(refX, refY);\n        // 跳过图形的拾取，在某些图形中可以省略一倍的检测成本\n        if (this.isOnlyHitBox()) {\n            return inBBox;\n        }\n        // 被裁减掉的和不在包围盒内的不进行计算\n        if (inBBox && !this.isClipped(refX, refY)) {\n            // 对图形进行拾取判断\n            if (this.isInShape(refX, refY)) {\n                return true;\n            }\n            // 对起始箭头进行拾取判断\n            if (startArrowShape && startArrowShape.isHit(refX, refY)) {\n                return true;\n            }\n            // 对结束箭头进行拾取判断\n            if (endArrowShape && endArrowShape.isHit(refX, refY)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    return AbstractShape;\n}(Element));\nexport default AbstractShape;\n//# sourceMappingURL=shape.js.map","import * as Shape from './shape';\nvar pkg = require('../package.json');\nexport var version = pkg.version;\nexport { Event } from '@antv/g-base';\nexport { default as Canvas } from './canvas';\nexport { default as Group } from './group';\nexport { Shape };\n//# sourceMappingURL=index.js.map","import ViewLayer from '../base/view-layer';\nimport { LooseMap } from '../interface/types';\nimport { each, deepMix, upperFirst } from '@antv/util';\n\ntype IEventmap = LooseMap<string>;\n\ntype Handler = (...__: any[]) => {};\n\nconst eventNames = [\n  'click',\n  'dblclick',\n  'mousemove',\n  'mouseenter',\n  'mouseleave',\n  'mousedown',\n  'mouseup',\n  'contextmenu',\n];\n\nconst mobileEventNames = [\n  'touchstart',\n  'touchmove',\n  'touchend',\n  'pressstart',\n  'press',\n  'pressend',\n  'swipestart',\n  'swipe',\n  'swipeend',\n  'pinchstart',\n  'pinch',\n  'pinchend',\n  'panstart',\n  'pan',\n  'panend',\n];\n\nconst viewComponentMap = {\n  axis: 'axis-label',\n  label: 'label',\n  legend: 'legend-item',\n};\n\nconst canvasComponentMap = {\n  title: 'title',\n  description: 'description',\n  breadcrumb: 'breadcrumb',\n};\n\nconst CANVAS_EVENT_MAP: IEventmap = deepMix(getEventMap(canvasComponentMap), getRegionEventMap('Plot', eventNames));\n\nconst LAYER_EVENT_MAP: IEventmap = getRegionEventMap('Layer', eventNames);\n\n//移动端事件暂时只支持view级\nconst EVENT_MAP: IEventmap = deepMix(\n  {},\n  getEventMap(viewComponentMap),\n  getRegionEventMap('View', eventNames),\n  getMobileEventMap()\n);\n\nfunction onEvent(layer: ViewLayer, eventName: string, handler: Handler) {\n  layer.view.on(eventName, (ev?: any) => {\n    const eventData = {\n      x: ev?.x,\n      y: ev?.y,\n      clientX: ev?.clientX,\n      clientY: ev?.clientY,\n      target: ev?.target,\n      data: ev?.data ? ev.data.data : null,\n      plot: layer,\n      canvas: layer.canvas,\n      gEvent: ev?.gEvent,\n    };\n    handler(eventData);\n  });\n}\n\nexport function getEventMap(map) {\n  const eventMap: IEventmap = {};\n  each(map, (item, key) => {\n    const componentName = upperFirst(key);\n    const namePrefix = `on${componentName}`;\n    const eventPrefix = `${item}:`;\n    each(eventNames, (name) => {\n      const eventName = upperFirst(name);\n      const eventKey = `${namePrefix}${eventName}`;\n      const event = `${eventPrefix}${name}`;\n      eventMap[eventKey] = event;\n    });\n  });\n  return eventMap;\n}\n\nexport function getRegionEventMap(prefix, eventList) {\n  const eventMap: IEventmap = {};\n  const namePrefix = `on`;\n  each(eventList, (name) => {\n    const eventName = upperFirst(name);\n    const eventKey = `${namePrefix}${prefix}${eventName}`;\n    eventMap[eventKey] = name;\n  });\n  return eventMap;\n}\n\nexport function getMobileEventMap() {\n  const eventMap: IEventmap = {};\n  const namePrefix = `on`;\n  each(mobileEventNames, (name) => {\n    const eventName = upperFirst(name);\n    const eventKey = `${namePrefix}${eventName}`;\n    eventMap[eventKey] = name;\n  });\n  return eventMap;\n}\n\nexport { IEventmap, EVENT_MAP, CANVAS_EVENT_MAP, LAYER_EVENT_MAP, onEvent };\n","export interface PointType {\n  readonly x: number;\n  readonly y: number;\n}\n\nexport default class BBox {\n  readonly x: number;\n  readonly y: number;\n  readonly height: number;\n  readonly width: number;\n\n  static fromBBoxObject(bbox: any) {\n    return new BBox(bbox.x, bbox.y, bbox.width, bbox.height);\n  }\n\n  static fromRange(minX: number, minY: number, maxX: number, maxY: number) {\n    return new BBox(minX, minY, maxX - minX, maxY - minY);\n  }\n\n  constructor(x: number = 0, y: number = 0, width: number = 0, height: number = 0) {\n    // range\n    this.height = height;\n    this.width = width;\n    this.x = x;\n    this.y = y;\n  }\n\n  public equals(bbox: BBox): boolean {\n    return this.x === bbox.x && this.y === bbox.y && this.width === bbox.width && this.height === bbox.height;\n  }\n\n  public get minX() {\n    return this.x;\n  }\n\n  public get maxX() {\n    return this.x + this.width;\n  }\n\n  public get minY() {\n    return this.y;\n  }\n\n  public get maxY() {\n    return this.y + this.height;\n  }\n\n  public get tl() {\n    return { x: this.x, y: this.y };\n  }\n\n  public get tr() {\n    return { x: this.maxX, y: this.y };\n  }\n\n  public get bl() {\n    return { x: this.x, y: this.maxY };\n  }\n\n  public get br() {\n    return { x: this.maxX, y: this.maxY };\n  }\n}\n","// // defaultTheme 必须首先注册\n// import defaultTheme from './default';\n//\n// import Theme from './theme';\n//\n// export { Theme as default, defaultTheme };\n\n// 全局主题的方法\nexport { getGlobalTheme, registerGlobalTheme } from './global';\n// 图表主题的方法\nexport { getTheme, registerTheme } from './theme';\n// 工具函数\nexport { convertToG2Theme } from './utils';\n","import {\n  deepMix,\n  isEmpty,\n  mapValues,\n  get,\n  isUndefined,\n  each,\n  assign,\n  isFunction,\n  mix,\n  map,\n  flatten,\n  reduce,\n  findIndex,\n  isString,\n} from '@antv/util';\nimport { View, BBox, Geometry, VIEW_LIFE_CIRCLE, registerComponentController, Gestrue } from '../dependents';\nimport TextDescription from '../components/description';\nimport BaseLabel, { LabelComponentConfig, getLabelComponent } from '../components/label/base';\nimport { getComponent } from '../components/factory';\nimport Interaction from '../interaction/core';\nimport BaseInteraction, { InteractionCtor } from '../interaction/index';\nimport {\n  Axis,\n  IDescription,\n  IInteractions,\n  ITitle,\n  Label,\n  Legend,\n  StateConfig,\n  Tooltip,\n  DataItem,\n  Animation,\n  Meta,\n  GuideLineConfig,\n  CustomTooltipConfig,\n} from '../interface/config';\nimport { G2Config } from '../interface/config';\nimport { EVENT_MAP, onEvent } from '../util/event';\nimport PaddingController from './controller/padding';\nimport StateController from './controller/state';\nimport ThemeController from './controller/theme';\nimport Layer, { LayerConfig } from './layer';\nimport { isTextUsable } from '../util/common';\nimport { LooseMap } from '../interface/types';\n\nexport interface ViewConfig {\n  renderer?: string;\n  data?: DataItem[];\n  meta?: LooseMap<Meta>;\n  padding?: number | number[] | string;\n  xField?: string;\n  yField?: string;\n  color?: string | string[] | {};\n  xAxis?: Axis;\n  yAxis?: Axis;\n  label?: Label;\n  tooltip?: Tooltip;\n  legend?: Legend;\n  animation?: Animation | boolean;\n  theme?: LooseMap | string;\n  responsiveTheme?: {} | string;\n  interactions?: IInteractions[];\n  responsive?: boolean;\n  title?: ITitle;\n  description?: IDescription;\n  guideLine?: GuideLineConfig;\n  events?: {\n    [k: string]: ((...args: any[]) => any) | boolean;\n  };\n  defaultState?: {\n    active?: StateConfig;\n    inActive?: StateConfig;\n    selected?: StateConfig;\n    disabled?: StateConfig;\n  };\n  name?: string;\n}\n\nexport interface ViewLayerConfig extends ViewConfig, LayerConfig {}\n\nregisterComponentController('gesture', Gestrue);\n\nexport default abstract class ViewLayer<T extends ViewLayerConfig = ViewLayerConfig> extends Layer<T> {\n  public static getDefaultOptions(): Partial<ViewConfig> {\n    return {\n      renderer: 'canvas',\n      title: {\n        visible: false,\n        alignTo: 'left',\n        text: '',\n      },\n      description: {\n        visible: false,\n        text: '',\n        alignTo: 'left',\n      },\n      padding: 'auto',\n      legend: {\n        visible: true,\n        position: 'bottom-center',\n      },\n      tooltip: {\n        visible: true,\n        shared: true,\n        showCrosshairs: true,\n        crosshairs: {\n          type: 'x',\n        },\n        offset: 20,\n      },\n      xAxis: {\n        visible: true,\n        grid: {\n          visible: false,\n        },\n        line: {\n          visible: true,\n        },\n        tickLine: {\n          visible: true,\n        },\n        label: {\n          visible: true,\n          autoRotate: true,\n          autoHide: true,\n        },\n        title: {\n          visible: false,\n          offset: 12,\n        },\n      },\n      yAxis: {\n        visible: true,\n        grid: {\n          visible: true,\n        },\n        line: {\n          visible: false,\n        },\n        tickLine: {\n          visible: false,\n        },\n        label: {\n          visible: true,\n          autoHide: true,\n          autoRotate: false,\n        },\n        title: {\n          autoRotate: true,\n          visible: false,\n          offset: 12,\n        },\n      },\n      label: {\n        visible: false,\n      },\n      interactions: [{ type: 'tooltip' }, { type: 'legend-active' }, { type: 'legend-filter' }],\n      animation: false,\n    };\n  }\n  public type: string;\n  public view: View;\n  public theme: any;\n  public initialOptions: T;\n  public title: TextDescription;\n  public description: TextDescription;\n  public viewRange: BBox;\n  protected paddingController: PaddingController;\n  protected stateController: StateController;\n  protected themeController: ThemeController;\n  public config: G2Config;\n  protected interactions: Interaction[] = [];\n  protected labels: BaseLabel[] = [];\n\n  constructor(props: T) {\n    super(props);\n    this.options = this.getOptions(props);\n    this.initialOptions = deepMix({}, this.options);\n    this.paddingController = new PaddingController({\n      plot: this,\n    });\n    this.stateController = new StateController({\n      plot: this,\n    });\n    this.themeController = new ThemeController();\n  }\n\n  public getOptions(props: Partial<T>): T {\n    const curOptions = this.options || {};\n    const options = super.getOptions(props);\n    // @ts-ignore\n    const defaultOptions = this.constructor.getDefaultOptions(props);\n    // interactions 需要合并去重下\n    const interactions = reduce(\n      flatten(map([options, defaultOptions, curOptions, props], (src) => get(src, 'interactions', []))),\n      (result, cur) => {\n        const idx = findIndex(result, (item) => item.type === cur.type);\n        if (idx >= 0) {\n          result.splice(idx, 1);\n        }\n        return [...result, cur];\n      },\n      []\n    );\n    return deepMix({}, options, defaultOptions, curOptions, props, { interactions });\n  }\n\n  public beforeInit() {\n    super.beforeInit();\n  }\n\n  public init() {\n    super.init();\n    this.theme = this.themeController.getTheme(this.options, this.type);\n    this.config = {\n      data: this.processData(this.options.data),\n      scales: {},\n      legends: {},\n      tooltip: {\n        showTitle: true,\n      },\n      axes: {},\n      coordinate: { type: 'cartesian' },\n      geometries: [],\n      annotations: [],\n      interactions: [],\n      theme: this.theme,\n      panelRange: {},\n      animate: {} as any,\n      views: [],\n    };\n\n    this.paddingController.clear();\n\n    this.drawTitle();\n    this.drawDescription();\n    // 有些interaction要调整配置项，所以顺序提前\n    this.interaction();\n    this.coord();\n    this.scale();\n    this.axis();\n    this.tooltip();\n    this.legend();\n    this.addGeometry();\n    this.annotation();\n    this.animation();\n\n    this.viewRange = this.getViewRange();\n    const region = this.viewRangeToRegion(this.viewRange);\n    this.view = new View({\n      parent: null,\n      canvas: this.canvas,\n      backgroundGroup: this.container.addGroup(),\n      middleGroup: this.container.addGroup(),\n      foregroundGroup: this.container.addGroup(),\n      padding: this.paddingController.getPadding(),\n      theme: this.theme,\n      options: this.config,\n      region,\n    });\n    this.applyInteractions();\n    this.view.on(VIEW_LIFE_CIRCLE.AFTER_RENDER, () => {\n      this.afterRender();\n    });\n  }\n\n  public afterInit() {\n    super.afterInit();\n    if (!this.view || this.view.destroyed) {\n      return;\n    }\n    if (this.options.padding !== 'auto') {\n      this.parseEvents();\n    }\n  }\n\n  public afterRender() {\n    if (!this.view || this.view.destroyed) {\n      return;\n    }\n    const { options } = this;\n    const padding = options.padding ? options.padding : this.config.theme.padding;\n    /** defaultState */\n    if (options.defaultState && padding !== 'auto') {\n      this.stateController.defaultStates(options.defaultState);\n    }\n    /** autopadding */\n    if (padding === 'auto') {\n      this.paddingController.processAutoPadding();\n    }\n    if (options.tooltip && options.tooltip.customContent && options.padding !== 'auto') {\n      this.customTooltip();\n    }\n  }\n\n  /** 完整生命周期渲染 */\n  public render(): void {\n    super.render();\n    const { data } = this.options;\n    if (!isEmpty(data)) {\n      this.view.render();\n    }\n  }\n\n  /** 销毁 */\n  public destroy(): void {\n    this.doDestroy();\n    super.destroy();\n  }\n\n  /** 更新配置项 */\n  public updateConfig(cfg: Partial<T>): void {\n    this.doDestroy();\n    if (!cfg.padding && this.initialOptions.padding && this.initialOptions.padding === 'auto') {\n      cfg.padding = 'auto';\n    }\n    this.options = this.getOptions(cfg);\n    this.processOptions(this.options);\n  }\n\n  public changeData(data: DataItem[]): void {\n    this.options.data = this.processData(data);\n    this.view.changeData(this.options.data);\n  }\n\n  // plot 不断销毁重建，需要一个api获取最新的plot\n  public getPlot() {\n    return this.view;\n  }\n\n  /**\n   * 获取已渲染的数据标签组件\n   */\n  public getLabels() {\n    return this.labels;\n  }\n\n  // 获取对应的G2 Theme\n  public getTheme() {\n    if (!this.theme) {\n      return this.themeController.getTheme(this.options, this.type);\n    }\n    return this.theme;\n  }\n\n  public getResponsiveTheme() {\n    return this.themeController.getResponsiveTheme(this.type);\n  }\n\n  // 获取对应的Plot Theme\n  public getPlotTheme() {\n    return this.themeController.getPlotTheme(this.options, this.type);\n  }\n\n  public getInteractions() {\n    return this.interactions;\n  }\n\n  // 绑定一个外部的stateManager\n  public bindStateManager(stateManager, cfg): void {\n    this.stateController.bindStateManager(stateManager, cfg);\n  }\n\n  // 响应状态量更新的快捷方法\n  public setActive(condition, style) {\n    this.stateController.setState({ type: 'active', condition, style });\n  }\n\n  public setSelected(condition, style) {\n    this.stateController.setState({ type: 'selected', condition, style });\n  }\n\n  public setDisable(condition, style) {\n    this.stateController.setState({ type: 'disable', condition, style });\n  }\n\n  public setDefault(condition, style) {\n    this.stateController.setState({ type: 'default', condition, style });\n  }\n\n  // 获取 ViewLayer 的数据项\n  public getData(start?: number, end?: number): object[] {\n    return this.processData((this.options.data || []).slice(start, end));\n  }\n\n  protected processData(data?: DataItem[]): DataItem[] | undefined {\n    return data;\n  }\n\n  protected abstract coord(): void;\n\n  protected scale(): void {\n    /** scale meta配置 */\n    // 1. this.config.scales中已有子图形在处理xAxis/yAxis是写入的xField/yField对应的scale信息，这里再检查用户设置的meta，将meta信息合并到默认的scale中\n    // 2. 同时xAxis/yAxis中的type优先级更高，覆盖meta中的type配置\n    const scaleTypes = mapValues(this.config.scales, (scaleConfig: any) => {\n      const type = scaleConfig.type;\n      return type ? { type } : {};\n    });\n    const scales = deepMix({}, this.config.scales, this.options.meta || {}, scaleTypes);\n\n    this.setConfig('scales', scales);\n  }\n\n  protected axis(): void {\n    const xAxis_parser = getComponent('axis', {\n      plot: this,\n      dim: 'x',\n    });\n    const yAxis_parser = getComponent('axis', {\n      plot: this,\n      dim: 'y',\n    });\n    const axesConfig = {};\n    axesConfig[this.options.xField] = xAxis_parser;\n    axesConfig[this.options.yField] = yAxis_parser;\n    /** 存储坐标轴配置项到config */\n    this.setConfig('axes', axesConfig);\n  }\n\n  protected tooltip(): void {\n    if (this.options.tooltip.visible === false) {\n      this.setConfig('tooltip', false);\n      return;\n    }\n    const tooltipOptions = get(this.options, 'tooltip');\n    if (tooltipOptions.customContent && tooltipOptions.customContent.container) {\n      tooltipOptions.container = tooltipOptions.customContent.container;\n    }\n    this.setConfig('tooltip', deepMix({}, tooltipOptions));\n\n    deepMix(this.config.theme.tooltip, this.options.tooltip.domStyles);\n  }\n\n  protected customTooltip() {\n    const customContentCfg = this.options.tooltip.customContent;\n    let container;\n    if (customContentCfg.container) {\n      container = isString(customContentCfg.container)\n        ? document.getElementById(customContentCfg.container)\n        : customContentCfg.container;\n    }\n    this.view.on('tooltip:show', () => {\n      if (!customContentCfg.container) {\n        container = document.getElementsByClassName('g2-tooltip')[0];\n      }\n    });\n    this.view.hideTooltip();\n    this.view.on('tooltip:change', (ev: CustomTooltipConfig) => {\n      if (container) {\n        customContentCfg.callback(container, ev);\n      }\n    });\n  }\n\n  protected getLegendPosition(position: string): any {\n    const positionList = position.split('-');\n    // G2 4.0 兼容 XXX-center 到 XXX 的场景\n    if (positionList && positionList.length > 1 && positionList[1] === 'center') {\n      return positionList[0];\n    }\n    return position;\n  }\n\n  protected legend(): void {\n    if (this.options.legend.visible === false) {\n      this.setConfig('legends', false);\n      return;\n    }\n    const flipOption = get(this.options, 'legend.flipPage');\n    const clickable = get(this.options, 'legend.clickable');\n    this.setConfig('legends', {\n      position: this.getLegendPosition(get(this.options, 'legend.position')),\n      formatter: get(this.options, 'legend.formatter'),\n      offsetX: get(this.options, 'legend.offsetX'),\n      offsetY: get(this.options, 'legend.offsetY'),\n      clickable: isUndefined(clickable) ? true : clickable,\n      // wordSpacing: get(this.options, 'legend.wordSpacing'),\n      flipPage: flipOption,\n      marker: get(this.options, 'legend.marker'),\n      title: get(this.options, 'legend.title'),\n    });\n  }\n\n  protected annotation() {\n    const config = [];\n    if (this.config.coordinate.type === 'cartesian' && this.options.guideLine) {\n      each(this.options.guideLine, (line) => {\n        const guideLine = getComponent('guideLine', {\n          plot: this,\n          cfg: line,\n        });\n        config.push(guideLine);\n      });\n    }\n    this.setConfig('annotations', config);\n  }\n\n  protected abstract addGeometry(): void;\n  protected abstract geometryParser(dim: string, type: string): string;\n\n  protected interaction() {\n    const { interactions = [] } = this.options;\n    each(interactions, (interaction) => {\n      const { type } = interaction;\n      if (type === 'slider' || type === 'scrollbar') {\n        const axisConfig = {\n          label: {\n            autoHide: true,\n            autoRotate: false,\n          },\n        };\n        this.options.xAxis = deepMix({}, this.options.xAxis, axisConfig);\n      }\n      this.setConfig('interaction', interaction);\n    });\n  }\n\n  protected animation() {\n    if (this.options.animation === false) {\n      this.setConfig('animate', false);\n    }\n  }\n\n  protected applyInteractions(): void {\n    const { interactions = [] } = this.options;\n    if (this.interactions) {\n      this.interactions.forEach((inst) => {\n        inst.destroy();\n      });\n    }\n    this.interactions = [];\n    interactions.forEach((interaction) => {\n      const Ctor: InteractionCtor | undefined = BaseInteraction.getInteraction(interaction.type, this.type);\n      if (Ctor) {\n        const inst: BaseInteraction = new Ctor(\n          { view: this.view },\n          this,\n          Ctor.getInteractionRange(this.layerBBox, interaction.cfg),\n          interaction.cfg\n        );\n        this.interactions.push(inst);\n      }\n    });\n  }\n\n  /** 设置G2 config，带有类型推导 */\n  protected setConfig<K extends keyof G2Config>(key: K, config: G2Config[K] | boolean): void {\n    if (key === 'geometry') {\n      this.config.geometries.push(config as G2Config['geometry']);\n      return;\n    }\n    if (key === 'interaction') {\n      this.config.interactions.push(config as any);\n      return;\n    }\n    if (config === false) {\n      this.config[key] = false;\n      return;\n    }\n    assign(this.config[key], config);\n  }\n\n  protected parseEvents(eventParser?): void {\n    const { options } = this;\n    if (options.events) {\n      super.parseEvents(options.events);\n      const eventmap = eventParser ? eventParser.EVENT_MAP : EVENT_MAP;\n      each(options.events, (e, k) => {\n        if (isFunction(e)) {\n          const eventName = eventmap[k] || k;\n          const handler = e;\n          onEvent(this, eventName, handler);\n        }\n      });\n    }\n  }\n\n  protected drawTitle(): void {\n    const props = this.options;\n    const range = this.layerBBox;\n    if (this.title) {\n      this.title.destroy();\n      this.title = null;\n    }\n\n    if (isTextUsable(props.title)) {\n      const width = this.width;\n      const theme = this.config.theme;\n      const title = new TextDescription({\n        leftMargin: range.minX + theme.title.padding[3],\n        rightMargin: range.maxX - theme.title.padding[1],\n        topMargin: range.minY + theme.title.padding[0],\n        text: props.title.text,\n        style: mix(theme.title, props.title.style),\n        wrapperWidth: width - theme.title.padding[3] - theme.title.padding[1],\n        container: this.container.addGroup() as any,\n        theme,\n        index: isTextUsable(props.description) ? 0 : 1,\n        plot: this,\n        alignTo: props.title.alignTo,\n        name: 'title',\n      });\n      this.title = title;\n      this.paddingController.registerPadding(title, 'outer');\n    }\n  }\n\n  protected drawDescription(): void {\n    const props = this.options;\n    const range = this.layerBBox;\n    if (this.description) {\n      this.description.destroy();\n      this.description = null;\n    }\n\n    if (isTextUsable(props.description)) {\n      const width = this.width;\n      const theme = this.config.theme;\n      let topMargin = 0;\n\n      if (this.title) {\n        const titleBBox = this.title.getBBox();\n        topMargin += titleBBox.minY + titleBBox.height;\n        topMargin += theme.description.padding[0];\n      } else {\n        // 无title的情况下使用title的上padding\n        topMargin += range.minY + theme.title.padding[0];\n      }\n\n      const description = new TextDescription({\n        leftMargin: range.minX + theme.description.padding[3],\n        topMargin,\n        rightMargin: range.maxX - theme.title.padding[1],\n        text: props.description.text,\n        style: mix(theme.description, props.description.style),\n        wrapperWidth: width - theme.description.padding[3] - theme.description.padding[1],\n        container: this.container.addGroup() as any,\n        theme,\n        index: 1,\n        plot: this,\n        alignTo: props.description.alignTo,\n        name: 'description',\n      });\n      this.description = description;\n      this.paddingController.registerPadding(description, 'outer');\n    }\n  }\n\n  protected doRenderLabel(geometry: Geometry, label: Label) {\n    each(this.labels, (item) => {\n      item.destroy();\n    });\n    this.labels = [];\n    const config: LabelComponentConfig = {\n      layer: this,\n      container: geometry.labelsContainer,\n      geometry,\n      label,\n    };\n    const Ctor = getLabelComponent(label.type);\n    if (Ctor) {\n      const label = new Ctor(config);\n      label.render();\n      this.labels.push(label);\n    }\n  }\n\n  /** 抽取destroy和updateConfig共有代码为_destroy方法 */\n  private doDestroy() {\n    this.doDestroyInteractions();\n    this.doDestroyLabels();\n    /** 销毁g2.view实例 */\n    if (!this.view.destroyed) {\n      this.view.destroy();\n    }\n  }\n\n  private doDestroyInteractions() {\n    // 移除注册的 interactions\n    if (this.interactions) {\n      this.interactions.forEach((inst) => {\n        inst.destroy();\n      });\n    }\n    this.interactions = [];\n  }\n\n  private doDestroyLabels() {\n    // 移除各 geometry 的 label\n    each(this.labels, (label: BaseLabel) => {\n      label.destroy();\n    });\n    this.labels = [];\n  }\n\n  protected getViewRange() {\n    // 有 Range 的 Interaction 参与 ViewMargin 计算\n    const { interactions = [] } = this.options;\n    const layerBBox = this.layerBBox;\n    interactions.forEach((interaction) => {\n      const Ctor: InteractionCtor | undefined = BaseInteraction.getInteraction(interaction.type, this.type);\n      const range: BBox | undefined = Ctor && Ctor.getInteractionRange(layerBBox, interaction.cfg);\n      let position = '';\n      if (range) {\n        // 先只考虑 Range 靠边的情况\n        if (range.maxY === layerBBox.maxY && range.minY > layerBBox.minY) {\n          // margin[2] += range.height;\n          position = 'bottom';\n        } else if (range.maxX === layerBBox.maxX && range.minX > layerBBox.minX) {\n          // margin[1] += range.width;\n          position = 'right';\n        } else if (range.minX === layerBBox.minX && range.maxX > layerBBox.maxX) {\n          // margin[3] += range.width;\n          position = 'left';\n        } else if (range.minY === layerBBox.minY && range.maxY > layerBBox.maxY) {\n          // margin[0] += range.height;\n          position = 'top';\n        }\n        this.paddingController.registerPadding(\n          {\n            getBBox: () => {\n              return range;\n            },\n            position,\n          },\n          'outer'\n        );\n      }\n    });\n    const viewRange = this.paddingController.processOuterPadding();\n    return viewRange;\n  }\n\n  private viewRangeToRegion(viewRange) {\n    const { width, height } = this;\n    const start = { x: 0, y: 0 },\n      end = { x: 1, y: 1 };\n    start.x = viewRange.minX / width;\n    start.y = viewRange.minY / height;\n    end.x = viewRange.maxX / width;\n    end.y = viewRange.maxY / height;\n\n    return {\n      start,\n      end,\n    };\n  }\n}\n","import Area from './area/index';\nimport Interval from './interval/index';\nimport Line from './line/index';\nimport Point from './point/index';\n/**\n * 将element的配置逻辑拆离出来，并将每类element细分为主体图形、辅助图形、mini图形三种\n * 这样也方便未来更灵活的调用和组装g2的element模块\n */\n\nconst GEOMETRY_MAP = {\n  area: Area,\n  line: Line,\n  point: Point,\n  interval: Interval,\n};\n\ntype FirstCtrParam<T> = T extends new (first: infer R) => any ? R : never;\n\ntype MapType = typeof GEOMETRY_MAP;\n\nexport function getGeom<T extends keyof MapType, U extends keyof MapType[T]>(\n  name: T,\n  type: U,\n  cfg: FirstCtrParam<MapType[T][U]>\n) {\n  const Geom: any = GEOMETRY_MAP[name][type];\n  return new Geom(cfg).config;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nvar vec2 = require(\"gl-matrix/vec2\");\nexports.default = {\n    /**\n     * 计算线段的包围盒\n     * @param {number} x1 起始点 x\n     * @param {number} y1 起始点 y\n     * @param {number} x2 结束点 x\n     * @param {number} y2 结束点 y\n     * @return {object} 包围盒对象\n     */\n    box: function (x1, y1, x2, y2) {\n        return util_1.getBBoxByArray([x1, x2], [y1, y2]);\n    },\n    /**\n     * 线段的长度\n     * @param {number} x1 起始点 x\n     * @param {number} y1 起始点 y\n     * @param {number} x2 结束点 x\n     * @param {number} y2 结束点 y\n     * @return {number} 距离\n     */\n    length: function (x1, y1, x2, y2) {\n        return util_1.distance(x1, y1, x2, y2);\n    },\n    /**\n     * 根据比例获取点\n     * @param {number} x1 起始点 x\n     * @param {number} y1 起始点 y\n     * @param {number} x2 结束点 x\n     * @param {number} y2 结束点 y\n     * @param {number} t 指定比例\n     * @return {object} 包含 x, y 的点\n     */\n    pointAt: function (x1, y1, x2, y2, t) {\n        return {\n            x: (1 - t) * x1 + t * x2,\n            y: (1 - t) * y1 + t * y2,\n        };\n    },\n    /**\n     * 点到线段的距离\n     * @param {number} x1 起始点 x\n     * @param {number} y1 起始点 y\n     * @param {number} x2 结束点 x\n     * @param {number} y2 结束点 y\n     * @param {number} x  测试点 x\n     * @param {number} y  测试点 y\n     * @return {number} 距离\n     */\n    pointDistance: function (x1, y1, x2, y2, x, y) {\n        // 投影距离 x1, y1 的向量，假设 p, p1, p2 三个点，投影点为 a\n        // p1a = p1p.p1p2/|p1p2| * (p1p 的单位向量)\n        var cross = (x2 - x1) * (x - x1) + (y2 - y1) * (y - y1);\n        if (cross < 0) {\n            return util_1.distance(x1, y1, x, y);\n        }\n        var lengthSquare = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);\n        if (cross > lengthSquare) {\n            return util_1.distance(x2, y2, x, y);\n        }\n        return this.pointToLine(x1, y1, x2, y2, x, y);\n    },\n    /**\n     * 点到直线的距离，而不是点到线段的距离\n     * @param {number} x1 起始点 x\n     * @param {number} y1 起始点 y\n     * @param {number} x2 结束点 x\n     * @param {number} y2 结束点 y\n     * @param {number} x  测试点 x\n     * @param {number} y  测试点 y\n     * @return {number} 距离\n     */\n    pointToLine: function (x1, y1, x2, y2, x, y) {\n        var d = [x2 - x1, y2 - y1];\n        // 如果端点相等，则判定点到点的距离\n        if (vec2.exactEquals(d, [0, 0])) {\n            return Math.sqrt((x - x1) * (x - x1) + (y - y1) * (y - y1));\n        }\n        var u = [-d[1], d[0]];\n        vec2.normalize(u, u);\n        var a = [x - x1, y - y1];\n        return Math.abs(vec2.dot(a, u));\n    },\n    /**\n     * 线段的角度\n     * @param {number} x1 起始点 x\n     * @param {number} y1 起始点 y\n     * @param {number} x2 结束点 x\n     * @param {number} y2 结束点 y\n     * @return {number} 导数\n     */\n    tangentAngle: function (x1, y1, x2, y2) {\n        return Math.atan2(y2 - y1, x2 - x1);\n    },\n};\n//# sourceMappingURL=line.js.map","import { deepMix, each, map, isArray, get, clone, isNumber } from '@antv/util';\nimport ViewLayer from '../../base/view-layer';\nimport BaseComponent, { BaseComponentConfig } from '../base';\nimport {\n  IGroup,\n  IShape,\n  View,\n  Geometry,\n  Element,\n  Coordinate,\n  MappingDatum,\n  VIEW_LIFE_CIRCLE,\n  getDefaultAnimateCfg,\n  doAnimate,\n  ORIGIN,\n} from '../../dependents';\nimport { Label, TextStyle } from '../../interface/config';\nimport { LooseMap } from '../../interface/types';\nimport BBox from '../../util/bbox';\n\nexport interface LabelComponentConfig extends BaseComponentConfig {\n  layer: ViewLayer;\n  geometry: Geometry;\n  label: Label;\n}\n\nexport interface LabelComponentCtor<T extends LabelComponentConfig = LabelComponentConfig> {\n  new (config: T): LabelComponent;\n}\n\nexport default abstract class LabelComponent<L extends Label = Label> extends BaseComponent<LabelComponentConfig> {\n  protected layer: ViewLayer;\n  protected view: View;\n  protected geometry: Geometry;\n  protected coord: Coordinate;\n  protected options: L;\n  protected labels: IShape[];\n  private labelsCfgMap: Record<string, TextStyle> = {};\n  private lastLabelsCfgMap: Record<string, TextStyle> = {};\n\n  public getGeometry() {\n    return this.geometry;\n  }\n\n  public getLabels() {\n    return this.labels;\n  }\n\n  public show() {\n    this.container.show();\n  }\n\n  public hide() {\n    this.container.hide();\n  }\n\n  protected init(config: LabelComponentConfig) {\n    this.layer = config.layer;\n    const view = this.layer.view;\n    this.view = view;\n    this.geometry = config.geometry;\n    this.coord = view.getCoordinate();\n    this.options = deepMix(this.getDefaultOptions(), config.label);\n\n    const callback = () => {\n      this.clear();\n      this.render();\n    };\n    view.on(VIEW_LIFE_CIRCLE.AFTER_PAINT, callback);\n    this.addDisposable(() => {\n      view.off(VIEW_LIFE_CIRCLE.AFTER_PAINT, callback);\n    });\n  }\n\n  protected renderInner(group: IGroup) {\n    this.labels = [];\n    this.labelsCfgMap = {};\n\n    // 绘制 Label 图形\n    each(this.geometry.elements, (element: Element, elementIdx: number) => {\n      const labels = [].concat(this.drawLabelItem(group, element, elementIdx));\n      each(labels, (label, idx) => {\n        this.adjustLabel(label, element, idx);\n        if (!label.destroyed) {\n          this.labels.push(label);\n          this.labelsCfgMap[label.get('id')] = clone(label.attrs);\n        }\n      });\n    });\n\n    // 执行布局\n    this.layoutLabels(this.geometry, this.labels);\n\n    // 执行动画：参照 G2 Label 动画\n    const lastLabelsCfgMap = this.lastLabelsCfgMap;\n    const labelsCfgMap = this.labelsCfgMap;\n    const animateCfg = this.geometry.animateOption ? getDefaultAnimateCfg('label', this.coord) : false;\n    each(labelsCfgMap, (attrs: TextStyle, id: string) => {\n      const shape = group.findById(id) as IShape;\n      if (shape) {\n        if (lastLabelsCfgMap[id]) {\n          const oldAttrs = lastLabelsCfgMap[id];\n          // 图形发生更新\n          const updateAnimateCfg = get(animateCfg, 'update');\n          if (updateAnimateCfg) {\n            shape.attr(oldAttrs);\n            doAnimate(shape, updateAnimateCfg, {\n              toAttrs: {\n                ...attrs,\n              },\n              coordinate: this.coord,\n            });\n          }\n        } else {\n          // 新生成的 shape\n          const appearAnimateCfg = get(animateCfg, 'appear');\n          if (appearAnimateCfg) {\n            doAnimate(shape, appearAnimateCfg, {\n              toAttrs: {\n                ...shape.attr(),\n              },\n              coordinate: this.coord,\n            });\n          }\n        }\n      }\n      delete lastLabelsCfgMap[id];\n    });\n    each(lastLabelsCfgMap, (attrs: TextStyle, id) => {\n      // 移除\n      const leaveAnimateCfg = get(animateCfg, 'leave');\n      if (leaveAnimateCfg) {\n        const tempShape = group.addShape('text', {\n          attrs,\n          id,\n          name: 'label',\n        });\n        doAnimate(tempShape, leaveAnimateCfg, {\n          toAttrs: null,\n          coordinate: this.coord,\n        });\n      }\n    });\n    this.lastLabelsCfgMap = this.labelsCfgMap;\n  }\n\n  protected drawLabelText(group: IGroup, attrs: TextStyle, extraCfgs: LooseMap = {}): IShape {\n    return group.addShape('text', {\n      attrs,\n      ...extraCfgs,\n    });\n  }\n\n  protected drawLabelItem(group: IGroup, element: Element, elementIndex: number): IShape | IShape[] {\n    const model = element.getModel();\n    const items = [].concat(this.getLabelItemAttrs(element, elementIndex));\n    const offset = this.getDefaultOffset();\n    const offsetPoint = this.getLabelOffset();\n    return map(items, (attrs, index) => {\n      const position = {\n        x: attrs.x + offsetPoint.x,\n        y: attrs.y + offsetPoint.y,\n      };\n      const dataItem = isArray(model.mappingData) ? model.mappingData[index] : model.mappingData;\n      const id = this.getLabelId(dataItem);\n      return this.drawLabelText(\n        group,\n        { ...attrs, ...position },\n        {\n          id,\n          name: 'label',\n          offset,\n          element,\n          [ORIGIN]: dataItem,\n        }\n      );\n    });\n  }\n\n  /** 获取当前 Label 的 offset */\n  protected getDefaultOffset() {\n    return Number(this.options.offset);\n  }\n\n  /** 默认实现：获取当前 Label 的 offset 点：包括 offset、offsetX、offsetY */\n  protected getLabelOffset() {\n    const { offsetX, offsetY } = this.options;\n    return {\n      x: isNumber(offsetX) ? offsetX : 0,\n      y: isNumber(offsetY) ? offsetY : 0,\n    };\n  }\n\n  /** 通过指定方向和系数获取整体 offset 点 */\n  protected getLabelOffsetByDimAndFactor(dim: 'x' | 'y', factor: number) {\n    const { offsetX, offsetY } = this.options;\n    const offset = this.getDefaultOffset();\n    const offsetPoint = {\n      x: 0,\n      y: 0,\n    };\n    offsetPoint[dim] = offset * factor;\n    if (isNumber(offsetX)) {\n      offsetPoint.x += offsetX;\n    }\n    if (isNumber(offsetY)) {\n      offsetPoint.y += offsetY;\n    }\n    return offsetPoint;\n  }\n\n  /** 初始化默认全局配置 */\n  protected getDefaultOptions(): Partial<L> {\n    return {};\n  }\n\n  /** 获取绘制当前 Label 的属性配置 */\n  protected abstract getLabelItemAttrs(element: Element, idx: number): TextStyle | TextStyle[];\n\n  /** 在当前 Label 绘制之后的调整 */\n  protected abstract adjustLabel(label: IShape, element: Element, datumIdx: number): void;\n\n  /** 整理对所有 Labels 的布局调整 */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected layoutLabels(geometry: Geometry, labels: IShape[]): void {\n    // empty\n  }\n\n  protected getLabelId(data: MappingDatum): string {\n    const origin = data._origin;\n    const type = this.geometry.type;\n    const xScale = this.geometry.getXScale();\n    const yScale = this.geometry.getYScale();\n    let labelId = this.geometry.getElementId(data);\n    if (type === 'line' || type === 'area') {\n      // 折线图以及区域图，一条线会对应一组数据，即多个 labels，为了区分这些 labels，需要在 line id 的前提下加上 x 字段值\n      labelId += ` ${origin[xScale.field]}`;\n    } else if (type === 'path') {\n      // path 路径图，无序，有可能存在相同 x 不同 y 的情况，需要通过 x y 来确定唯一 id\n      labelId += ` ${origin[xScale.field]}-${origin[yScale.field]}`;\n    }\n\n    return labelId;\n  }\n\n  protected getCoordinateBBox() {\n    const { coord } = this;\n    const { start, end } = coord;\n    return new BBox(Math.min(start.x, end.x), Math.min(start.y, end.y), coord.getWidth(), coord.getHeight());\n  }\n}\n\n// Label 组件注册\nconst LABEL_CONFIG_MAP: Record<string, LabelComponentCtor> = {};\n\nexport function registerLabelComponent(type: string, component: LabelComponentCtor) {\n  LABEL_CONFIG_MAP[type] = component;\n}\n\nexport function getLabelComponent(type: string): LabelComponentCtor {\n  return LABEL_CONFIG_MAP[type];\n}\n","var methodCache = {};\n/**\n * 获取计算 ticks 的方法\n * @param key 键值\n * @returns 计算 ticks 的方法\n */\nexport function getTickMethod(key) {\n    return methodCache[key];\n}\n/**\n * 注册计算 ticks 的方法\n * @param key 键值\n * @param method 方法\n */\nexport function registerTickMethod(key, method) {\n    methodCache[key] = method;\n}\n//# sourceMappingURL=register.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar event_emitter_1 = tslib_1.__importDefault(require(\"@antv/event-emitter\"));\n/**\n * G2 Chart、View、Geometry 以及 Element 等的基类，提供事件以及一些通用的方法。\n */\nvar Base = /** @class */ (function (_super) {\n    tslib_1.__extends(Base, _super);\n    function Base(cfg) {\n        var _this = _super.call(this) || this;\n        /** 标识对象是否已销毁 */\n        _this.destroyed = false;\n        var _a = cfg.visible, visible = _a === void 0 ? true : _a;\n        _this.visible = visible;\n        return _this;\n    }\n    /**\n     * 显示。\n     */\n    Base.prototype.show = function () {\n        var visible = this.visible;\n        if (!visible) {\n            this.visible = true;\n            this.changeVisible(true);\n        }\n    };\n    /**\n     * 隐藏。\n     */\n    Base.prototype.hide = function () {\n        var visible = this.visible;\n        if (visible) {\n            this.visible = false;\n            this.changeVisible(false);\n        }\n    };\n    /**\n     * 销毁。\n     */\n    Base.prototype.destroy = function () {\n        this.off();\n        this.destroyed = true;\n    };\n    /**\n     * 显示或者隐藏。\n     * @param visible\n     * @returns\n     */\n    Base.prototype.changeVisible = function (visible) {\n        if (this.visible === visible) {\n            return;\n        }\n        this.visible = visible;\n    };\n    return Base;\n}(event_emitter_1.default));\nexports.default = Base;\n//# sourceMappingURL=base.js.map","import { __extends, __spreadArrays } from \"tslib\";\nimport { indexOf, isNil, isNumber } from '@antv/util';\nimport Base from '../base';\n/**\n * 分类度量\n * @class\n */\nvar Category = /** @class */ (function (_super) {\n    __extends(Category, _super);\n    function Category() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'cat';\n        _this.isCategory = true;\n        return _this;\n    }\n    Category.prototype.translate = function (value) {\n        var index = indexOf(this.values, value);\n        if (index === -1) {\n            return isNumber(value) ? value : NaN;\n        }\n        return index;\n    };\n    Category.prototype.scale = function (value) {\n        var order = this.translate(value);\n        // 分类数据允许 0.5 范围内调整\n        // if (order < this.min - 0.5 || order > this.max + 0.5) {\n        //   return NaN;\n        // }\n        var percent = this.calcPercent(order, this.min, this.max);\n        return this.calcValue(percent, this.rangeMin(), this.rangeMax());\n    };\n    Category.prototype.invert = function (scaledValue) {\n        var domainRange = this.max - this.min;\n        var percent = this.calcPercent(scaledValue, this.rangeMin(), this.rangeMax());\n        var idx = Math.round(domainRange * percent) + this.min;\n        if (idx < this.min || idx > this.max) {\n            return NaN;\n        }\n        return this.values[idx];\n    };\n    Category.prototype.getText = function (value) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var v = value;\n        // value为index\n        if (isNumber(value) && !this.values.includes(value)) {\n            v = this.values[v];\n        }\n        return _super.prototype.getText.apply(this, __spreadArrays([v], args));\n    };\n    // 复写属性\n    Category.prototype.initCfg = function () {\n        this.tickMethod = 'cat';\n    };\n    // 设置 min, max\n    Category.prototype.setDomain = function () {\n        // 用户有可能设置 min\n        if (isNil(this.getConfig('min'))) {\n            this.min = 0;\n        }\n        if (isNil(this.getConfig('max'))) {\n            var size = this.values.length;\n            this.max = size > 1 ? size - 1 : size;\n        }\n    };\n    return Category;\n}(Base));\nexport default Category;\n//# sourceMappingURL=base.js.map","import { isDate, isString, last } from '@antv/util';\nimport fecha from 'fecha';\nimport * as fecha1 from 'fecha';\nimport bisector from './bisector';\nvar FORMAT_METHOD = 'format';\nexport function timeFormat(time, mask) {\n    var method = fecha1[FORMAT_METHOD] || fecha[FORMAT_METHOD];\n    return method(time, mask);\n}\n/**\n * 转换成时间戳\n * @param value 时间值\n */\nexport function toTimeStamp(value) {\n    if (isString(value)) {\n        if (value.indexOf('T') > 0) {\n            value = new Date(value).getTime();\n        }\n        else {\n            // new Date('2010/01/10') 和 new Date('2010-01-10') 的差别在于:\n            // 如果仅有年月日时，前者是带有时区的: Fri Jan 10 2020 02:40:13 GMT+0800 (中国标准时间)\n            // 后者会格式化成 Sun Jan 10 2010 08:00:00 GMT+0800 (中国标准时间)\n            value = new Date(value.replace(/-/gi, '/')).getTime();\n        }\n    }\n    if (isDate(value)) {\n        value = value.getTime();\n    }\n    return value;\n}\nvar SECOND = 1000;\nvar MINUTE = 60 * SECOND;\nvar HOUR = 60 * MINUTE;\nvar DAY = 24 * HOUR;\nvar MONTH = DAY * 31;\nvar YEAR = DAY * 365;\nexport { SECOND, MINUTE, HOUR, DAY, MONTH, YEAR };\nvar intervals = [\n    ['HH:mm:ss', SECOND],\n    ['HH:mm:ss', SECOND * 10],\n    ['HH:mm:ss', SECOND * 30],\n    ['HH:mm', MINUTE],\n    ['HH:mm', MINUTE * 10],\n    ['HH:mm', MINUTE * 30],\n    ['HH', HOUR],\n    ['HH', HOUR * 6],\n    ['HH', HOUR * 12],\n    ['YYYY-MM-DD', DAY],\n    ['YYYY-MM-DD', DAY * 4],\n    ['YYYY-WW', DAY * 7],\n    ['YYYY-MM', MONTH],\n    ['YYYY-MM', MONTH * 4],\n    ['YYYY-MM', MONTH * 6],\n    ['YYYY', DAY * 380],\n];\nexport function getTickInterval(min, max, tickCount) {\n    var target = (max - min) / tickCount;\n    var idx = bisector(function (o) { return o[1]; })(intervals, target) - 1;\n    var interval = intervals[idx];\n    if (idx < 0) {\n        interval = intervals[0];\n    }\n    else if (idx >= intervals.length) {\n        interval = last(intervals);\n    }\n    return interval;\n}\n//# sourceMappingURL=time.js.map","import { isNil } from '@antv/util';\n/**\n * 二分右侧查找\n * https://github.com/d3/d3-array/blob/master/src/bisector.js\n */\nexport default function (getter) {\n    /**\n     * x: 目标值\n     * lo: 起始位置\n     * hi: 结束位置\n     */\n    return function (a, x, _lo, _hi) {\n        var lo = isNil(_lo) ? 0 : _lo;\n        var hi = isNil(_hi) ? a.length : _hi;\n        while (lo < hi) {\n            var mid = (lo + hi) >>> 1;\n            if (getter(a[mid]) > x) {\n                hi = mid;\n            }\n            else {\n                lo = mid + 1;\n            }\n        }\n        return lo;\n    };\n}\n//# sourceMappingURL=bisector.js.map","import { __extends } from \"tslib\";\nimport { each, isNumber } from '@antv/util';\nimport { timeFormat, toTimeStamp } from '../util/time';\nimport Category from './base';\n/**\n * 时间分类度量\n * @class\n */\nvar TimeCat = /** @class */ (function (_super) {\n    __extends(TimeCat, _super);\n    function TimeCat() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @override\n     */\n    TimeCat.prototype.translate = function (value) {\n        value = toTimeStamp(value);\n        var index = this.values.indexOf(value);\n        if (index === -1) {\n            if (isNumber(value) && value < this.values.length) {\n                index = value;\n            }\n            else {\n                index = NaN;\n            }\n        }\n        return index;\n    };\n    /**\n     * 由于时间类型数据需要转换一下，所以复写 getText\n     * @override\n     */\n    TimeCat.prototype.getText = function (value, tickIndex) {\n        var index = this.translate(value);\n        if (index > -1) {\n            var result = this.values[index];\n            var formatter = this.formatter;\n            result = formatter ? formatter(result, tickIndex) : timeFormat(result, this.mask);\n            return result;\n        }\n        return value;\n    };\n    TimeCat.prototype.initCfg = function () {\n        this.tickMethod = 'time-cat';\n        this.mask = 'YYYY-MM-DD';\n        this.tickCount = 7; // 一般时间数据会显示 7， 14， 30 天的数字\n    };\n    TimeCat.prototype.setDomain = function () {\n        var values = this.values;\n        // 针对时间分类类型，会将时间统一转换为时间戳\n        each(values, function (v, i) {\n            values[i] = toTimeStamp(v);\n        });\n        values.sort(function (v1, v2) {\n            return v1 - v2;\n        });\n        _super.prototype.setDomain.call(this);\n    };\n    return TimeCat;\n}(Category));\nexport default TimeCat;\n//# sourceMappingURL=time.js.map","import { __extends } from \"tslib\";\nimport { filter, getRange, head, isNil, last } from '@antv/util';\nimport Base from '../base';\n/**\n * 连续度量的基类\n * @class\n */\nvar Continuous = /** @class */ (function (_super) {\n    __extends(Continuous, _super);\n    function Continuous() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isContinuous = true;\n        return _this;\n    }\n    Continuous.prototype.scale = function (value) {\n        if (isNil(value)) {\n            return NaN;\n        }\n        var rangeMin = this.rangeMin();\n        var rangeMax = this.rangeMax();\n        var max = this.max;\n        var min = this.min;\n        if (max === min) {\n            return rangeMin;\n        }\n        var percent = this.getScalePercent(value);\n        return rangeMin + percent * (rangeMax - rangeMin);\n    };\n    Continuous.prototype.init = function () {\n        _super.prototype.init.call(this);\n        // init 完成后保证 min, max 包含 ticks 的范围\n        var ticks = this.ticks;\n        var firstTick = head(ticks);\n        var lastTick = last(ticks);\n        if (firstTick < this.min) {\n            this.min = firstTick;\n        }\n        if (lastTick > this.max) {\n            this.max = lastTick;\n        }\n        // strict-limit 方式\n        if (!isNil(this.minLimit)) {\n            this.min = firstTick;\n        }\n        if (!isNil(this.maxLimit)) {\n            this.max = lastTick;\n        }\n    };\n    Continuous.prototype.setDomain = function () {\n        var _a = getRange(this.values), min = _a.min, max = _a.max;\n        if (isNil(this.min)) {\n            this.min = min;\n        }\n        if (isNil(this.max)) {\n            this.max = max;\n        }\n        if (this.min > this.max) {\n            this.min = min;\n            this.max = max;\n        }\n    };\n    Continuous.prototype.calculateTicks = function () {\n        var _this = this;\n        var ticks = _super.prototype.calculateTicks.call(this);\n        if (!this.nice) {\n            ticks = filter(ticks, function (tick) {\n                return tick >= _this.min && tick <= _this.max;\n            });\n        }\n        return ticks;\n    };\n    // 计算原始值值占的百分比\n    Continuous.prototype.getScalePercent = function (value) {\n        var max = this.max;\n        var min = this.min;\n        return (value - min) / (max - min);\n    };\n    Continuous.prototype.getInvertPercent = function (value) {\n        return (value - this.rangeMin()) / (this.rangeMax() - this.rangeMin());\n    };\n    return Continuous;\n}(Base));\nexport default Continuous;\n//# sourceMappingURL=base.js.map","import { __extends } from \"tslib\";\nimport Continuous from './base';\n/**\n * 线性度量\n * @class\n */\nvar Linear = /** @class */ (function (_super) {\n    __extends(Linear, _super);\n    function Linear() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'linear';\n        _this.isLinear = true;\n        return _this;\n    }\n    Linear.prototype.invert = function (value) {\n        var percent = this.getInvertPercent(value);\n        return this.min + percent * (this.max - this.min);\n    };\n    Linear.prototype.initCfg = function () {\n        this.tickMethod = 'wilkinson-extended';\n        this.nice = false;\n    };\n    return Linear;\n}(Continuous));\nexport default Linear;\n//# sourceMappingURL=linear.js.map","import { each, isNil } from '@antv/util';\n// 求以a为次幂，结果为b的基数，如 x^^a = b;求x\n// 虽然数学上 b 不支持负数，但是这里需要支持 负数\nexport function calBase(a, b) {\n    var e = Math.E;\n    var value;\n    if (b >= 0) {\n        value = Math.pow(e, Math.log(b) / a); // 使用换底公式求底\n    }\n    else {\n        value = Math.pow(e, Math.log(-b) / a) * -1; // 使用换底公式求底\n    }\n    return value;\n}\nexport function log(a, b) {\n    if (a === 1) {\n        return 1;\n    }\n    return Math.log(b) / Math.log(a);\n}\nexport function getLogPositiveMin(values, base, max) {\n    if (isNil(max)) {\n        max = Math.max.apply(null, values);\n    }\n    var positiveMin = max;\n    each(values, function (value) {\n        if (value > 0 && value < positiveMin) {\n            positiveMin = value;\n        }\n    });\n    if (positiveMin === max) {\n        positiveMin = max / base;\n    }\n    if (positiveMin > 1) {\n        positiveMin = 1;\n    }\n    return positiveMin;\n}\n//# sourceMappingURL=math.js.map","import { __extends } from \"tslib\";\nimport { getLogPositiveMin, log } from '../util/math';\nimport Continuous from './base';\n/**\n * Log 度量，处理非均匀分布\n */\nvar Log = /** @class */ (function (_super) {\n    __extends(Log, _super);\n    function Log() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'log';\n        return _this;\n    }\n    /**\n     * @override\n     */\n    Log.prototype.invert = function (value) {\n        var base = this.base;\n        var max = log(base, this.max);\n        var rangeMin = this.rangeMin();\n        var range = this.rangeMax() - rangeMin;\n        var min;\n        var positiveMin = this.positiveMin;\n        if (positiveMin) {\n            if (value === 0) {\n                return 0;\n            }\n            min = log(base, positiveMin / base);\n            var appendPercent = (1 / (max - min)) * range; // 0 到 positiveMin的占比\n            if (value < appendPercent) {\n                // 落到 0 - positiveMin 之间\n                return (value / appendPercent) * positiveMin;\n            }\n        }\n        else {\n            min = log(base, this.min);\n        }\n        var percent = (value - rangeMin) / range;\n        var tmp = percent * (max - min) + min;\n        return Math.pow(base, tmp);\n    };\n    Log.prototype.initCfg = function () {\n        this.tickMethod = 'log';\n        this.base = 10;\n        this.tickCount = 6;\n        this.nice = true;\n    };\n    // 设置\n    Log.prototype.setDomain = function () {\n        _super.prototype.setDomain.call(this);\n        var min = this.min;\n        if (min < 0) {\n            throw new Error('When you use log scale, the minimum value must be greater than zero!');\n        }\n        if (min === 0) {\n            this.positiveMin = getLogPositiveMin(this.values, this.base, this.max);\n        }\n    };\n    // 根据当前值获取占比\n    Log.prototype.getScalePercent = function (value) {\n        var max = this.max;\n        var min = this.min;\n        if (max === min) {\n            return 0;\n        }\n        // 如果值小于等于0，则按照0处理\n        if (value <= 0) {\n            return 0;\n        }\n        var base = this.base;\n        var positiveMin = this.positiveMin;\n        // 如果min == 0, 则根据比0大的最小值，计算比例关系。这个最小值作为坐标轴上的第二个tick，第一个是0但是不显示\n        if (positiveMin) {\n            min = (positiveMin * 1) / base;\n        }\n        var percent;\n        // 如果数值小于次小值，那么就计算 value / 次小值 占整体的比例\n        if (value < positiveMin) {\n            percent = value / positiveMin / (log(base, max) - log(base, min));\n        }\n        else {\n            percent = (log(base, value) - log(base, min)) / (log(base, max) - log(base, min));\n        }\n        return percent;\n    };\n    return Log;\n}(Continuous));\nexport default Log;\n//# sourceMappingURL=log.js.map","import { __extends } from \"tslib\";\nimport { calBase } from '../util/math';\nimport Continuous from './base';\n/**\n * Pow 度量，处理非均匀分布\n */\nvar Pow = /** @class */ (function (_super) {\n    __extends(Pow, _super);\n    function Pow() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'pow';\n        return _this;\n    }\n    /**\n     * @override\n     */\n    Pow.prototype.invert = function (value) {\n        var percent = this.getInvertPercent(value);\n        var exponent = this.exponent;\n        var max = calBase(exponent, this.max);\n        var min = calBase(exponent, this.min);\n        var tmp = percent * (max - min) + min;\n        var factor = tmp >= 0 ? 1 : -1;\n        return Math.pow(tmp, exponent) * factor;\n    };\n    Pow.prototype.initCfg = function () {\n        this.tickMethod = 'pow';\n        this.exponent = 2;\n        this.tickCount = 5;\n        this.nice = true;\n    };\n    // 获取度量计算时，value占的定义域百分比\n    Pow.prototype.getScalePercent = function (value) {\n        var max = this.max;\n        var min = this.min;\n        if (max === min) {\n            return 0;\n        }\n        var exponent = this.exponent;\n        var percent = (calBase(exponent, value) - calBase(exponent, min)) / (calBase(exponent, max) - calBase(exponent, min));\n        return percent;\n    };\n    return Pow;\n}(Continuous));\nexport default Pow;\n//# sourceMappingURL=pow.js.map","import { __extends } from \"tslib\";\nimport { each, isDate, isNil, isNumber, isString } from '@antv/util';\nimport { timeFormat, toTimeStamp } from '../util/time';\nimport Linear from './linear';\n/**\n * 时间度量\n * @class\n */\nvar Time = /** @class */ (function (_super) {\n    __extends(Time, _super);\n    function Time() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'time';\n        return _this;\n    }\n    /**\n     * @override\n     */\n    Time.prototype.getText = function (value, index) {\n        var numberValue = this.translate(value);\n        var formatter = this.formatter;\n        return formatter ? formatter(numberValue, index) : timeFormat(numberValue, this.mask);\n    };\n    /**\n     * @override\n     */\n    Time.prototype.scale = function (value) {\n        var v = value;\n        if (isString(v) || isDate(v)) {\n            v = this.translate(v);\n        }\n        return _super.prototype.scale.call(this, v);\n    };\n    /**\n     * 将时间转换成数字\n     * @override\n     */\n    Time.prototype.translate = function (v) {\n        return toTimeStamp(v);\n    };\n    Time.prototype.initCfg = function () {\n        this.tickMethod = 'time-pretty';\n        this.mask = 'YYYY-MM-DD';\n        this.tickCount = 7;\n        this.nice = false;\n    };\n    Time.prototype.setDomain = function () {\n        var values = this.values;\n        // 是否设置了 min, max，而不是直接取 this.min, this.max\n        var minConfig = this.getConfig('min');\n        var maxConfig = this.getConfig('max');\n        // 如果设置了 min,max 则转换成时间戳\n        if (!isNil(minConfig) || !isNumber(minConfig)) {\n            this.min = this.translate(this.min);\n        }\n        if (!isNil(maxConfig) || !isNumber(maxConfig)) {\n            this.max = this.translate(this.max);\n        }\n        // 没有设置 min, max 时\n        if (values && values.length) {\n            // 重新计算最大最小值\n            var timeStamps_1 = [];\n            var min_1 = Infinity; // 最小值\n            var secondMin_1 = min_1; // 次小值\n            var max_1 = 0;\n            // 使用一个循环，计算min,max,secondMin\n            each(values, function (v) {\n                var timeStamp = toTimeStamp(v);\n                if (isNaN(timeStamp)) {\n                    throw new TypeError(\"Invalid Time: \" + v + \" in time scale!\");\n                }\n                if (min_1 > timeStamp) {\n                    secondMin_1 = min_1;\n                    min_1 = timeStamp;\n                }\n                else if (secondMin_1 > timeStamp) {\n                    secondMin_1 = timeStamp;\n                }\n                if (max_1 < timeStamp) {\n                    max_1 = timeStamp;\n                }\n                timeStamps_1.push(timeStamp);\n            });\n            // 存在多个值时，设置最小间距\n            if (values.length > 1) {\n                this.minTickInterval = secondMin_1 - min_1;\n            }\n            if (isNil(minConfig)) {\n                this.min = min_1;\n            }\n            if (isNil(maxConfig)) {\n                this.max = max_1;\n            }\n        }\n    };\n    return Time;\n}(Linear));\nexport default Time;\n//# sourceMappingURL=time.js.map","import { __extends } from \"tslib\";\nimport { each, head, last } from '@antv/util';\nimport Continuous from './base';\n/**\n * 分段度量\n */\nvar Quantize = /** @class */ (function (_super) {\n    __extends(Quantize, _super);\n    function Quantize() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'quantize';\n        return _this;\n    }\n    Quantize.prototype.invert = function (value) {\n        var ticks = this.ticks;\n        var length = ticks.length;\n        var percent = this.getInvertPercent(value);\n        var minIndex = Math.floor(percent * (length - 1));\n        // 最后一个\n        if (minIndex >= length - 1) {\n            return last(ticks);\n        }\n        // 超出左边界， 则取第一个\n        if (minIndex < 0) {\n            return head(ticks);\n        }\n        var minTick = ticks[minIndex];\n        var nextTick = ticks[minIndex + 1];\n        // 比当前值小的 tick 在度量上的占比\n        var minIndexPercent = minIndex / (length - 1);\n        var maxIndexPercent = (minIndex + 1) / (length - 1);\n        return minTick + (percent - minIndexPercent) / (maxIndexPercent - minIndexPercent) * (nextTick - minTick);\n    };\n    Quantize.prototype.initCfg = function () {\n        this.tickMethod = 'r-pretty';\n        this.tickCount = 5;\n        this.nice = true;\n    };\n    Quantize.prototype.calculateTicks = function () {\n        var ticks = _super.prototype.calculateTicks.call(this);\n        if (!this.nice) { // 如果 nice = false ,补充 min, max\n            if (last(ticks) !== this.max) {\n                ticks.push(this.max);\n            }\n            if (head(ticks) !== this.min) {\n                ticks.unshift(this.min);\n            }\n        }\n        return ticks;\n    };\n    // 计算当前值在刻度中的占比\n    Quantize.prototype.getScalePercent = function (value) {\n        var ticks = this.ticks;\n        // 超出左边界\n        if (value < head(ticks)) {\n            return 0;\n        }\n        // 超出右边界\n        if (value > last(ticks)) {\n            return 1;\n        }\n        var minIndex = 0;\n        each(ticks, function (tick, index) {\n            if (value >= tick) {\n                minIndex = index;\n            }\n            else {\n                return false;\n            }\n        });\n        return minIndex / (ticks.length - 1);\n    };\n    return Quantize;\n}(Continuous));\nexport default Quantize;\n//# sourceMappingURL=quantize.js.map","import { __extends } from \"tslib\";\nimport Quantize from './quantize';\nvar Quantile = /** @class */ (function (_super) {\n    __extends(Quantile, _super);\n    function Quantile() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'quantile';\n        return _this;\n    }\n    Quantile.prototype.initCfg = function () {\n        this.tickMethod = 'quantile';\n        this.tickCount = 5;\n        this.nice = true;\n    };\n    return Quantile;\n}(Quantize));\nexport default Quantile;\n//# sourceMappingURL=quantile.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar base_1 = require(\"./attributes/base\");\nexports.Attribute = base_1.default;\n// 所有的 attribute map\nvar ATTRIBUTE_MAP = {};\n/**\n * 通过类型获得 Attribute 类\n * @param type\n */\nvar getAttribute = function (type) {\n    return ATTRIBUTE_MAP[type.toLowerCase()];\n};\nexports.getAttribute = getAttribute;\nvar registerAttribute = function (type, ctor) {\n    // 注册的时候，需要校验 type 重名，不区分大小写\n    if (getAttribute(type)) {\n        throw new Error(\"Attribute type '\" + type + \"' existed.\");\n    }\n    // 存储到 map 中\n    ATTRIBUTE_MAP[type.toLowerCase()] = ctor;\n};\nexports.registerAttribute = registerAttribute;\ntslib_1.__exportStar(require(\"./interface\"), exports);\n//# sourceMappingURL=factory.js.map","import { __extends } from \"tslib\";\nimport { isNumber } from '@antv/util';\nimport Base from '../base';\n/**\n * identity scale原则上是定义域和值域一致，scale/invert方法也是一致的\n * 参考R的实现：https://github.com/r-lib/scales/blob/master/R/pal-identity.r\n * 参考d3的实现（做了下转型）：https://github.com/d3/d3-scale/blob/master/src/identity.js\n */\nvar Identity = /** @class */ (function (_super) {\n    __extends(Identity, _super);\n    function Identity() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'identity';\n        _this.isIdentity = true;\n        return _this;\n    }\n    Identity.prototype.calculateTicks = function () {\n        return this.values;\n    };\n    Identity.prototype.scale = function (value) {\n        // 如果传入的值不等于 identity 的值，则直接返回，用于一维图时的 dodge\n        if (this.values[0] !== value && isNumber(value)) {\n            return value;\n        }\n        return this.range[0];\n    };\n    Identity.prototype.invert = function (value) {\n        var range = this.range;\n        if (value < range[0] || value > range[1]) {\n            return NaN;\n        }\n        return this.values[0];\n    };\n    return Identity;\n}(Base));\nexport default Identity;\n//# sourceMappingURL=index.js.map","import { head, indexOf, last, map, size } from '@antv/util';\nexport var DEFAULT_Q = [1, 5, 2, 2.5, 4, 3];\nexport var ALL_Q = [1, 5, 2, 2.5, 4, 3, 1.5, 7, 6, 8, 9];\nvar eps = Number.EPSILON * 100;\n// https://stackoverflow.com/questions/4467539/javascript-modulo-gives-a-negative-result-for-negative-numbers\nfunction mod(n, m) {\n    return ((n % m) + m) % m;\n}\nfunction simplicity(q, Q, j, lmin, lmax, lstep) {\n    var n = size(Q);\n    var i = indexOf(Q, q);\n    var v = 0;\n    var m = mod(lmin, lstep);\n    if ((m < eps || lstep - m < eps) && lmin <= 0 && lmax >= 0) {\n        v = 1;\n    }\n    return 1 - i / (n - 1) - j + v;\n}\nfunction simplicityMax(q, Q, j) {\n    var n = size(Q);\n    var i = indexOf(Q, q);\n    var v = 1;\n    return 1 - i / (n - 1) - j + v;\n}\nfunction density(k, m, dmin, dmax, lmin, lmax) {\n    var r = (k - 1) / (lmax - lmin);\n    var rt = (m - 1) / (Math.max(lmax, dmax) - Math.min(dmin, lmin));\n    return 2 - Math.max(r / rt, rt / r);\n}\nfunction densityMax(k, m) {\n    if (k >= m) {\n        return 2 - (k - 1) / (m - 1);\n    }\n    return 1;\n}\nfunction coverage(dmin, dmax, lmin, lmax) {\n    var range = dmax - dmin;\n    return 1 - (0.5 * (Math.pow(dmax - lmax, 2) + Math.pow(dmin - lmin, 2))) / Math.pow(0.1 * range, 2);\n}\nfunction coverageMax(dmin, dmax, span) {\n    var range = dmax - dmin;\n    if (span > range) {\n        var half = (span - range) / 2;\n        return 1 - Math.pow(half, 2) / Math.pow(0.1 * range, 2);\n    }\n    return 1;\n}\nfunction legibility() {\n    return 1;\n}\n/**\n * An Extension of Wilkinson's Algorithm for Position Tick Labels on Axes\n * https://www.yuque.com/preview/yuque/0/2019/pdf/185317/1546999150858-45c3b9c2-4e86-4223-bf1a-8a732e8195ed.pdf\n * @param dmin 最小值\n * @param dmax 最大值\n * @param m tick个数\n * @param onlyLoose 是否允许扩展min、max，不绝对强制，例如[3, 97]\n * @param Q nice numbers集合\n * @param w 四个优化组件的权重\n */\nexport default function extended(dmin, dmax, m, onlyLoose, Q, w) {\n    if (m === void 0) { m = 5; }\n    if (onlyLoose === void 0) { onlyLoose = true; }\n    if (Q === void 0) { Q = DEFAULT_Q; }\n    if (w === void 0) { w = [0.25, 0.2, 0.5, 0.05]; }\n    if (dmin === dmax || m === 1) {\n        return {\n            min: dmin,\n            max: dmax,\n            ticks: [dmin],\n        };\n    }\n    var best = {\n        score: -2,\n        lmin: 0,\n        lmax: 0,\n        lstep: 0,\n    };\n    var j = 1;\n    while (j < Infinity) {\n        for (var _i = 0, Q_1 = Q; _i < Q_1.length; _i++) {\n            var q = Q_1[_i];\n            var sm = simplicityMax(q, Q, j);\n            if (Number.isNaN(sm)) {\n                throw new Error('NaN');\n            }\n            if (w[0] * sm + w[1] + w[2] + w[3] < best.score) {\n                j = Infinity;\n                break;\n            }\n            var k = 2;\n            while (k < Infinity) {\n                var dm = densityMax(k, m);\n                if (w[0] * sm + w[1] + w[2] * dm + w[3] < best.score) {\n                    break;\n                }\n                var delta = (dmax - dmin) / (k + 1) / j / q;\n                var z = Math.ceil(Math.log10(delta));\n                while (z < Infinity) {\n                    var step = j * q * Math.pow(10, z);\n                    var cm = coverageMax(dmin, dmax, step * (k - 1));\n                    if (w[0] * sm + w[1] * cm + w[2] * dm + w[3] < best.score) {\n                        break;\n                    }\n                    var minStart = Math.floor(dmax / step) * j - (k - 1) * j;\n                    var maxStart = Math.ceil(dmin / step) * j;\n                    if (minStart > maxStart) {\n                        z = z + 1;\n                        continue;\n                    }\n                    for (var start = minStart; start <= maxStart; start = start + 1) {\n                        var lmin = start * (step / j);\n                        var lmax = lmin + step * (k - 1);\n                        var lstep = step;\n                        var s = simplicity(q, Q, j, lmin, lmax, lstep);\n                        var c = coverage(dmin, dmax, lmin, lmax);\n                        var g = density(k, m, dmin, dmax, lmin, lmax);\n                        var l = legibility();\n                        var score = w[0] * s + w[1] * c + w[2] * g + w[3] * l;\n                        if (score > best.score && (!onlyLoose || (lmin <= dmin && lmax >= dmax))) {\n                            best.lmin = lmin;\n                            best.lmax = lmax;\n                            best.lstep = lstep;\n                            best.score = score;\n                        }\n                    }\n                    z = z + 1;\n                }\n                k = k + 1;\n            }\n        }\n        j = j + 1;\n    }\n    // 步长为浮点数时处理精度\n    var toFixed = Number.isInteger(best.lstep) ? 0 : Math.ceil(Math.abs(Math.log10(best.lstep)));\n    var range = [];\n    for (var tick = best.lmin; tick <= best.lmax; tick += best.lstep) {\n        range.push(tick);\n    }\n    var ticks = toFixed ? map(range, function (x) { return Number.parseFloat(x.toFixed(toFixed)); }) : range;\n    return {\n        min: Math.min(dmin, head(ticks)),\n        max: Math.max(dmax, last(ticks)),\n        ticks: ticks,\n    };\n}\n//# sourceMappingURL=extended.js.map","import { filter, isNil, isNumber } from '@antv/util';\nimport extended from '../util/extended';\n/**\n * 计算分类 ticks\n * @param cfg 度量的配置项\n * @returns 计算后的 ticks\n */\nexport default function calculateCatTicks(cfg) {\n    var values = cfg.values, tickInterval = cfg.tickInterval, tickCount = cfg.tickCount;\n    var ticks = values;\n    if (isNumber(tickInterval)) {\n        return filter(ticks, function (__, i) { return i % tickInterval === 0; });\n    }\n    var min = cfg.min, max = cfg.max;\n    if (isNil(min)) {\n        min = 0;\n    }\n    if (isNil(max)) {\n        max = values.length - 1;\n    }\n    if (isNumber(tickCount) && tickCount < max - min) {\n        // 简单过滤，部分情况下小数的倍数也可以是整数\n        // tslint:disable-next-line: no-shadowed-variable\n        var ticks_1 = extended(min, max, tickCount, false, [1, 2, 5, 3, 4, 7, 6, 8, 9]).ticks;\n        var valid = filter(ticks_1, function (tick) { return tick >= min && tick <= max; });\n        return valid.map(function (index) { return values[index]; });\n    }\n    return values.slice(min, max + 1);\n}\n//# sourceMappingURL=cat.js.map","export default function d3Linear(cfg) {\n    var min = cfg.min, max = cfg.max, nice = cfg.nice, tickCount = cfg.tickCount;\n    var linear = new D3Linear();\n    linear.domain([min, max]);\n    if (nice) {\n        linear.nice(tickCount);\n    }\n    return linear.ticks(tickCount);\n}\nvar DEFAULT_COUNT = 5;\nvar e10 = Math.sqrt(50);\nvar e5 = Math.sqrt(10);\nvar e2 = Math.sqrt(2);\n// https://github.com/d3/d3-scale\nvar D3Linear = /** @class */ (function () {\n    function D3Linear() {\n        this._domain = [0, 1];\n    }\n    D3Linear.prototype.domain = function (domain) {\n        if (domain) {\n            this._domain = Array.from(domain, Number);\n            return this;\n        }\n        return this._domain.slice();\n    };\n    D3Linear.prototype.nice = function (count) {\n        var _a, _b;\n        if (count === void 0) { count = DEFAULT_COUNT; }\n        var d = this._domain.slice();\n        var i0 = 0;\n        var i1 = this._domain.length - 1;\n        var start = this._domain[i0];\n        var stop = this._domain[i1];\n        var step;\n        if (stop < start) {\n            _a = [stop, start], start = _a[0], stop = _a[1];\n            _b = [i1, i0], i0 = _b[0], i1 = _b[1];\n        }\n        step = tickIncrement(start, stop, count);\n        if (step > 0) {\n            start = Math.floor(start / step) * step;\n            stop = Math.ceil(stop / step) * step;\n            step = tickIncrement(start, stop, count);\n        }\n        else if (step < 0) {\n            start = Math.ceil(start * step) / step;\n            stop = Math.floor(stop * step) / step;\n            step = tickIncrement(start, stop, count);\n        }\n        if (step > 0) {\n            d[i0] = Math.floor(start / step) * step;\n            d[i1] = Math.ceil(stop / step) * step;\n            this.domain(d);\n        }\n        else if (step < 0) {\n            d[i0] = Math.ceil(start * step) / step;\n            d[i1] = Math.floor(stop * step) / step;\n            this.domain(d);\n        }\n        return this;\n    };\n    D3Linear.prototype.ticks = function (count) {\n        if (count === void 0) { count = DEFAULT_COUNT; }\n        return d3ArrayTicks(this._domain[0], this._domain[this._domain.length - 1], count || DEFAULT_COUNT);\n    };\n    return D3Linear;\n}());\nexport { D3Linear };\nfunction d3ArrayTicks(start, stop, count) {\n    var reverse;\n    var i = -1;\n    var n;\n    var ticks;\n    var step;\n    (stop = +stop), (start = +start), (count = +count);\n    if (start === stop && count > 0) {\n        return [start];\n    }\n    // tslint:disable-next-line\n    if ((reverse = stop < start)) {\n        (n = start), (start = stop), (stop = n);\n    }\n    // tslint:disable-next-line\n    if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) {\n        return [];\n    }\n    if (step > 0) {\n        start = Math.ceil(start / step);\n        stop = Math.floor(stop / step);\n        ticks = new Array((n = Math.ceil(stop - start + 1)));\n        while (++i < n) {\n            ticks[i] = (start + i) * step;\n        }\n    }\n    else {\n        start = Math.floor(start * step);\n        stop = Math.ceil(stop * step);\n        ticks = new Array((n = Math.ceil(start - stop + 1)));\n        while (++i < n) {\n            ticks[i] = (start - i) / step;\n        }\n    }\n    if (reverse) {\n        ticks.reverse();\n    }\n    return ticks;\n}\nfunction tickIncrement(start, stop, count) {\n    var step = (stop - start) / Math.max(0, count);\n    var power = Math.floor(Math.log(step) / Math.LN10);\n    var error = step / Math.pow(10, power);\n    return power >= 0\n        ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n        : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n//# sourceMappingURL=d3-linear.js.map","import { fixedBase } from '@antv/util';\nfunction snapMultiple(v, base, snapType) {\n    var div;\n    if (snapType === 'ceil') {\n        div = Math.ceil(v / base);\n    }\n    else if (snapType === 'floor') {\n        div = Math.floor(v / base);\n    }\n    else {\n        div = Math.round(v / base);\n    }\n    return div * base;\n}\nexport default function intervalTicks(min, max, interval) {\n    // 变成 interval 的倍数\n    var minTick = snapMultiple(min, interval, 'floor');\n    var maxTick = snapMultiple(max, interval, 'ceil');\n    // 统一小数位数\n    minTick = fixedBase(minTick, interval);\n    maxTick = fixedBase(maxTick, interval);\n    var ticks = [];\n    for (var i = minTick; i <= maxTick; i = i + interval) {\n        var tickValue = fixedBase(i, interval); // 防止浮点数加法出现问题\n        ticks.push(tickValue);\n    }\n    return {\n        min: minTick,\n        max: maxTick,\n        ticks: ticks\n    };\n}\n//# sourceMappingURL=interval.js.map","import { isNil } from '@antv/util';\n/**\n * 按照给定的 minLimit/maxLimit/tickCount 均匀计算出刻度 ticks\n *\n * @param cfg Scale 配置项\n * @return ticks\n */\nexport default function strictLimit(cfg, defaultMin, defaultMax) {\n    var _a;\n    var minLimit = cfg.minLimit, maxLimit = cfg.maxLimit, min = cfg.min, max = cfg.max, _b = cfg.tickCount, tickCount = _b === void 0 ? 5 : _b;\n    var tickMin = isNil(minLimit) ? (isNil(defaultMin) ? min : defaultMin) : minLimit;\n    var tickMax = isNil(maxLimit) ? (isNil(defaultMax) ? max : defaultMax) : maxLimit;\n    if (tickMin > tickMax) {\n        _a = [tickMin, tickMax], tickMax = _a[0], tickMin = _a[1];\n    }\n    if (tickCount <= 2) {\n        return [tickMin, tickMax];\n    }\n    var step = (tickMax - tickMin) / (tickCount - 1);\n    var ticks = [];\n    for (var i = 0; i < tickCount; i++) {\n        ticks.push(tickMin + step * i);\n    }\n    return ticks;\n}\n//# sourceMappingURL=strict-limit.js.map","export default function pretty(min, max, n) {\n    if (n === void 0) { n = 5; }\n    var res = {\n        max: 0,\n        min: 0,\n        ticks: [],\n    };\n    /*\n      R pretty:\n      https://svn.r-project.org/R/trunk/src/appl/pretty.c\n      https://www.rdocumentation.org/packages/base/versions/3.5.2/topics/pretty\n      */\n    var h = 1.5; // high.u.bias\n    var h5 = 0.5 + 1.5 * h; // u5.bias\n    // 反正我也不会调参，跳过所有判断步骤\n    var d = max - min;\n    var c = d / n;\n    // 当d非常小的时候触发，但似乎没什么用\n    // const min_n = Math.floor(n / 3);\n    // const shrink_sml = Math.pow(2, 5);\n    // if (Math.log10(d) < -2) {\n    //   c = (_.max([ Math.abs(max), Math.abs(min) ]) * shrink_sml) / min_n;\n    // }\n    var base = Math.pow(10, Math.floor(Math.log10(c)));\n    var toFixed = base < 1 ? Math.ceil(Math.abs(Math.log10(base))) : 0;\n    var unit = base;\n    if (2 * base - c < h * (c - unit)) {\n        unit = 2 * base;\n        if (5 * base - c < h5 * (c - unit)) {\n            unit = 5 * base;\n            if (10 * base - c < h * (c - unit)) {\n                unit = 10 * base;\n            }\n        }\n    }\n    var nu = Math.ceil(max / unit);\n    var ns = Math.floor(min / unit);\n    res.max = Math.max(nu * unit, max);\n    res.min = Math.min(ns * unit, min);\n    var x = Number.parseFloat((ns * unit).toFixed(toFixed));\n    while (x < max) {\n        res.ticks.push(x);\n        x += unit;\n        if (toFixed) {\n            x = Number.parseFloat(x.toFixed(toFixed));\n        }\n    }\n    res.ticks.push(x);\n    return res;\n}\n//# sourceMappingURL=pretty.js.map","/**\n * 计算几分位 https://github.com/simple-statistics/simple-statistics/blob/master/src/quantile_sorted.js\n * @param x  数组\n * @param p  百分比\n */\nfunction quantileSorted(x, p) {\n    var idx = x.length * p;\n    /*if (x.length === 0) { // 当前场景这些条件不可能命中\n      throw new Error('quantile requires at least one value.');\n    } else if (p < 0 || p > 1) {\n      throw new Error('quantiles must be between 0 and 1');\n    } else */\n    if (p === 1) {\n        // If p is 1, directly return the last element\n        return x[x.length - 1];\n    }\n    else if (p === 0) {\n        // If p is 0, directly return the first element\n        return x[0];\n    }\n    else if (idx % 1 !== 0) {\n        // If p is not integer, return the next element in array\n        return x[Math.ceil(idx) - 1];\n    }\n    else if (x.length % 2 === 0) {\n        // If the list has even-length, we'll take the average of this number\n        // and the next value, if there is one\n        return (x[idx - 1] + x[idx]) / 2;\n    }\n    else {\n        // Finally, in the simple case of an integer value\n        // with an odd-length list, return the x value at the index.\n        return x[idx];\n    }\n}\nexport default function calculateTicks(cfg) {\n    var tickCount = cfg.tickCount, values = cfg.values;\n    if (!values || !values.length) {\n        return [];\n    }\n    var sorted = values.slice().sort(function (a, b) {\n        return a - b;\n    });\n    var ticks = [];\n    for (var i = 0; i < tickCount; i++) {\n        var p = i / (tickCount - 1);\n        ticks.push(quantileSorted(sorted, p));\n    }\n    return ticks;\n}\n//# sourceMappingURL=quantile.js.map","import { DAY, HOUR, MINUTE, MONTH, SECOND, YEAR } from '../util/time';\nfunction getYear(date) {\n    return new Date(date).getFullYear();\n}\nfunction createYear(year) {\n    return new Date(year, 0, 1).getTime();\n}\nfunction getMonth(date) {\n    return new Date(date).getMonth();\n}\nfunction diffMonth(min, max) {\n    var minYear = getYear(min);\n    var maxYear = getYear(max);\n    var minMonth = getMonth(min);\n    var maxMonth = getMonth(max);\n    return (maxYear - minYear) * 12 + ((maxMonth - minMonth) % 12);\n}\nfunction creatMonth(year, month) {\n    return new Date(year, month, 1).getTime();\n}\nfunction diffDay(min, max) {\n    return Math.ceil((max - min) / DAY);\n}\nfunction diffHour(min, max) {\n    return Math.ceil((max - min) / HOUR);\n}\nfunction diffMinus(min, max) {\n    return Math.ceil((max - min) / (60 * 1000));\n}\n/**\n * 计算 time 的 ticks，对 month, year 进行 pretty 处理\n * @param cfg 度量的配置项\n * @returns 计算后的 ticks\n */\nexport default function timePretty(cfg) {\n    var min = cfg.min, max = cfg.max, minTickInterval = cfg.minTickInterval;\n    var tickInterval = cfg.tickInterval;\n    var tickCount = cfg.tickCount;\n    var ticks = [];\n    // 指定 tickInterval 后 tickCount 不生效，需要重新计算\n    if (!tickInterval) {\n        tickInterval = (max - min) / tickCount;\n        // 如果设置了最小间距，则使用最小间距\n        if (minTickInterval && tickInterval < minTickInterval) {\n            tickInterval = minTickInterval;\n        }\n    }\n    var minYear = getYear(min);\n    // 如果间距大于 1 年，则将开始日期从整年开始\n    if (tickInterval > YEAR) {\n        var maxYear = getYear(max);\n        var yearInterval = Math.ceil(tickInterval / YEAR);\n        for (var i = minYear; i <= maxYear + yearInterval; i = i + yearInterval) {\n            ticks.push(createYear(i));\n        }\n    }\n    else if (tickInterval > MONTH) {\n        // 大于月时\n        var monthInterval = Math.ceil(tickInterval / MONTH);\n        var mmMoth = getMonth(min);\n        var dMonths = diffMonth(min, max);\n        for (var i = 0; i <= dMonths + monthInterval; i = i + monthInterval) {\n            ticks.push(creatMonth(minYear, i + mmMoth));\n        }\n    }\n    else if (tickInterval > DAY) {\n        // 大于天\n        var date = new Date(min);\n        var year = date.getFullYear();\n        var month = date.getMonth();\n        var mday = date.getDate();\n        var day = Math.ceil(tickInterval / DAY);\n        var ddays = diffDay(min, max);\n        for (var i = 0; i < ddays + day; i = i + day) {\n            ticks.push(new Date(year, month, mday + i).getTime());\n        }\n    }\n    else if (tickInterval > HOUR) {\n        // 大于小时\n        var date = new Date(min);\n        var year = date.getFullYear();\n        var month = date.getMonth();\n        var day = date.getDate();\n        var hour = date.getHours();\n        var hours = Math.ceil(tickInterval / HOUR);\n        var dHours = diffHour(min, max);\n        for (var i = 0; i <= dHours + hours; i = i + hours) {\n            ticks.push(new Date(year, month, day, hour + i).getTime());\n        }\n    }\n    else if (tickInterval > MINUTE) {\n        // 大于分钟\n        var dMinus = diffMinus(min, max);\n        var minutes = Math.ceil(tickInterval / MINUTE);\n        for (var i = 0; i <= dMinus + minutes; i = i + minutes) {\n            ticks.push(min + i * MINUTE);\n        }\n    }\n    else {\n        // 小于分钟\n        var interval = tickInterval;\n        if (interval < SECOND) {\n            interval = SECOND;\n        }\n        var minSecond = Math.floor(min / SECOND) * SECOND;\n        var dSeconds = Math.ceil((max - min) / SECOND);\n        var seconds = Math.ceil(interval / SECOND);\n        for (var i = 0; i < dSeconds + seconds; i = i + seconds) {\n            ticks.push(minSecond + i * SECOND);\n        }\n    }\n    return ticks;\n}\n//# sourceMappingURL=time-pretty.js.map","import cat from './cat';\nimport d3Linear from './d3-linear';\nimport linear from './linear';\nimport log from './log';\nimport pow from './pow';\nimport quantile from './quantile';\nimport rPretty from './r-prettry';\nimport { getTickMethod, registerTickMethod } from './register';\nimport time from './time';\nimport timeCat from './time-cat';\nimport timePretty from './time-pretty';\nregisterTickMethod('cat', cat);\nregisterTickMethod('time-cat', timeCat);\nregisterTickMethod('wilkinson-extended', linear);\nregisterTickMethod('r-pretty', rPretty);\nregisterTickMethod('time', time);\nregisterTickMethod('time-pretty', timePretty);\nregisterTickMethod('log', log);\nregisterTickMethod('pow', pow);\nregisterTickMethod('quantile', quantile);\nregisterTickMethod('d3-linear', d3Linear);\nexport { getTickMethod };\n//# sourceMappingURL=index.js.map","import { last } from '@antv/util';\nimport catTicks from './cat';\n/**\n * 计算时间分类的 ticks, 保头，保尾\n * @param cfg 度量的配置项\n * @returns 计算后的 ticks\n */\nexport default function calculateTimeCatTicks(cfg) {\n    var ticks = catTicks(cfg);\n    var lastValue = last(cfg.values);\n    if (lastValue !== last(ticks)) {\n        ticks.push(lastValue);\n    }\n    return ticks;\n}\n//# sourceMappingURL=time-cat.js.map","import { head, isNil, last } from '@antv/util';\nimport extended from '../util/extended';\nimport interval from '../util/interval';\nimport strictLimit from '../util/strict-limit';\n/**\n * 计算线性的 ticks，使用 wilkinson extended 方法\n * @param cfg 度量的配置项\n * @returns 计算后的 ticks\n */\nexport default function linear(cfg) {\n    var min = cfg.min, max = cfg.max, tickCount = cfg.tickCount, nice = cfg.nice, tickInterval = cfg.tickInterval, minLimit = cfg.minLimit, maxLimit = cfg.maxLimit;\n    var ticks = extended(min, max, tickCount, nice).ticks;\n    if (!isNil(minLimit) || !isNil(maxLimit)) {\n        return strictLimit(cfg, head(ticks), last(ticks));\n    }\n    if (tickInterval) {\n        return interval(min, max, tickInterval).ticks;\n    }\n    return ticks;\n}\n//# sourceMappingURL=linear.js.map","import { head, isNil, last } from '@antv/util';\nimport interval from '../util/interval';\nimport pretty from '../util/pretty';\nimport strictLimit from '../util/strict-limit';\n/**\n * 计算线性的 ticks，使用 R's pretty 方法\n * @param cfg 度量的配置项\n * @returns 计算后的 ticks\n */\nexport default function linearPretty(cfg) {\n    var min = cfg.min, max = cfg.max, tickCount = cfg.tickCount, tickInterval = cfg.tickInterval, minLimit = cfg.minLimit, maxLimit = cfg.maxLimit;\n    var ticks = pretty(min, max, tickCount).ticks;\n    if (!isNil(minLimit) || !isNil(maxLimit)) {\n        return strictLimit(cfg, head(ticks), last(ticks));\n    }\n    if (tickInterval) {\n        return interval(min, max, tickInterval).ticks;\n    }\n    return ticks;\n}\n//# sourceMappingURL=r-prettry.js.map","import { getTickInterval } from '../util/time';\nexport default function calculateTimeTicks(cfg) {\n    var min = cfg.min, max = cfg.max, minTickInterval = cfg.minTickInterval;\n    var tickInterval = cfg.tickInterval;\n    var tickCount = cfg.tickCount;\n    // 指定 tickInterval 后 tickCount 不生效，需要重新计算\n    if (tickInterval) {\n        tickCount = Math.ceil((max - min) / tickInterval);\n    }\n    else {\n        tickInterval = getTickInterval(min, max, tickCount)[1];\n        var count = (max - min) / tickInterval;\n        var ratio = count / tickCount;\n        if (ratio > 1) {\n            tickInterval = tickInterval * Math.ceil(ratio);\n        }\n        // 如果设置了最小间距，则使用最小间距\n        if (minTickInterval && tickInterval < minTickInterval) {\n            tickInterval = minTickInterval;\n        }\n    }\n    var ticks = [];\n    for (var i = min; i < max + tickInterval; i += tickInterval) {\n        ticks.push(i);\n    }\n    return ticks;\n}\n//# sourceMappingURL=time.js.map","import { getLogPositiveMin, log } from '../util/math';\n/**\n * 计算 log 的 ticks，考虑 min = 0 的场景\n * @param cfg 度量的配置项\n * @returns 计算后的 ticks\n */\nexport default function calculateLogTicks(cfg) {\n    var base = cfg.base, tickCount = cfg.tickCount, min = cfg.min, max = cfg.max, values = cfg.values;\n    var minTick;\n    var maxTick = log(base, max);\n    if (min > 0) {\n        minTick = Math.floor(log(base, min));\n    }\n    else {\n        var positiveMin = getLogPositiveMin(values, base, max);\n        minTick = Math.floor(log(base, positiveMin));\n    }\n    var count = maxTick - minTick;\n    var avg = Math.ceil(count / tickCount);\n    var ticks = [];\n    for (var i = minTick; i < maxTick + avg; i = i + avg) {\n        ticks.push(Math.pow(base, i));\n    }\n    if (min <= 0) {\n        // 最小值 <= 0 时显示 0\n        ticks.unshift(0);\n    }\n    return ticks;\n}\n//# sourceMappingURL=log.js.map","import { calBase } from '../util/math';\nimport pretty from '../util/pretty';\n/**\n * 计算 Pow 的 ticks\n * @param cfg 度量的配置项\n * @returns 计算后的 ticks\n */\nexport default function calculatePowTicks(cfg) {\n    var exponent = cfg.exponent, tickCount = cfg.tickCount;\n    var max = Math.ceil(calBase(exponent, cfg.max));\n    var min = Math.floor(calBase(exponent, cfg.min));\n    var ticks = pretty(min, max, tickCount).ticks;\n    return ticks.map(function (tick) {\n        var factor = tick >= 0 ? 1 : -1;\n        return Math.pow(tick, exponent) * factor;\n    });\n}\n//# sourceMappingURL=pow.js.map","import { head, isNil, last } from '@antv/util';\nimport d3Linear from '../util/d3-linear';\nimport interval from '../util/interval';\nimport strictLimit from '../util/strict-limit';\nexport default function d3LinearTickMethod(cfg) {\n    var min = cfg.min, max = cfg.max, tickInterval = cfg.tickInterval, minLimit = cfg.minLimit, maxLimit = cfg.maxLimit;\n    var ticks = d3Linear(cfg);\n    if (!isNil(minLimit) || !isNil(maxLimit)) {\n        return strictLimit(cfg, head(ticks), last(ticks));\n    }\n    if (tickInterval) {\n        return interval(min, max, tickInterval).ticks;\n    }\n    return ticks;\n}\n//# sourceMappingURL=d3-linear.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar g_base_1 = require(\"@antv/g-base\");\nvar util_1 = require(\"@antv/util\");\nvar LOCATION_FIELD_MAP = {\n    none: [],\n    point: ['x', 'y'],\n    region: ['start', 'end'],\n    points: ['points'],\n    circle: ['center', 'radius', 'startAngle', 'endAngle'],\n};\nvar Component = /** @class */ (function (_super) {\n    tslib_1.__extends(Component, _super);\n    function Component(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.initCfg();\n        return _this;\n    }\n    /**\n     * @protected\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    Component.prototype.getDefaultCfg = function () {\n        return {\n            id: '',\n            name: '',\n            type: '',\n            locationType: 'none',\n            offsetX: 0,\n            offsetY: 0,\n            animate: false,\n            capture: true,\n            updateAutoRender: false,\n            animateOption: {\n                appear: null,\n                update: {\n                    duration: 400,\n                    easing: 'easeQuadInOut',\n                },\n                enter: {\n                    duration: 400,\n                    easing: 'easeQuadInOut',\n                },\n                leave: {\n                    duration: 350,\n                    easing: 'easeQuadIn',\n                },\n            },\n            events: null,\n            defaultCfg: {},\n            visible: true,\n        };\n    };\n    /**\n     * 清理组件的内容，一般配合 render 使用\n     * @example\n     * axis.clear();\n     * axis.render();\n     */\n    Component.prototype.clear = function () { };\n    /**\n     * 更新组件\n     * @param {object} cfg 更新属性\n     */\n    Component.prototype.update = function (cfg) {\n        var _this = this;\n        var defaultCfg = this.get('defaultCfg');\n        util_1.each(cfg, function (value, name) {\n            var originCfg = _this.get(name);\n            var newCfg = value;\n            if (originCfg !== value) {\n                // 判断两者是否相等，主要是进行 null 的判定\n                if (util_1.isObject(value) && defaultCfg[name]) {\n                    // 新设置的属性与默认值进行合并\n                    newCfg = util_1.deepMix({}, defaultCfg[name], value);\n                }\n                _this.set(name, newCfg);\n            }\n        });\n        this.updateInner(cfg);\n        this.afterUpdate(cfg);\n    };\n    // 更新内部\n    Component.prototype.updateInner = function (cfg) {\n    };\n    Component.prototype.afterUpdate = function (cfg) {\n        // 更新时考虑显示、隐藏\n        if (util_1.hasKey(cfg, 'visible')) {\n            if (cfg.visible) {\n                this.show();\n            }\n            else {\n                this.hide();\n            }\n        }\n        // 更新时考虑capture\n        if (util_1.hasKey(cfg, 'capture')) {\n            this.setCapture(cfg.capture);\n        }\n    };\n    Component.prototype.getLayoutBBox = function () {\n        return this.getBBox(); // 默认返回 getBBox，不同的组件内部单独实现\n    };\n    Component.prototype.getLocationType = function () {\n        return this.get('locationType');\n    };\n    Component.prototype.getOffset = function () {\n        return {\n            offsetX: this.get('offsetX'),\n            offsetY: this.get('offsetY'),\n        };\n    };\n    // 默认使用 update\n    Component.prototype.setOffset = function (offsetX, offsetY) {\n        this.update({\n            offsetX: offsetX,\n            offsetY: offsetY,\n        });\n    };\n    Component.prototype.setLocation = function (cfg) {\n        var location = tslib_1.__assign({}, cfg);\n        this.update(location);\n    };\n    // 实现 ILocation 接口的 getLocation\n    Component.prototype.getLocation = function () {\n        var _this = this;\n        var location = {};\n        var locationType = this.get('locationType');\n        var fields = LOCATION_FIELD_MAP[locationType];\n        util_1.each(fields, function (field) {\n            location[field] = _this.get(field);\n        });\n        return location;\n    };\n    Component.prototype.isList = function () {\n        return false;\n    };\n    Component.prototype.isSlider = function () {\n        return false;\n    };\n    /**\n     * @protected\n     * 初始化，用于具体的组件继承\n     */\n    Component.prototype.init = function () { };\n    // 将组件默认的配置项设置合并到传入的配置项\n    Component.prototype.initCfg = function () {\n        var _this = this;\n        var defaultCfg = this.get('defaultCfg');\n        util_1.each(defaultCfg, function (value, name) {\n            var cfg = _this.get(name);\n            if (util_1.isObject(cfg)) {\n                var newCfg = util_1.deepMix({}, value, cfg);\n                _this.set(name, newCfg);\n            }\n        });\n    };\n    return Component;\n}(g_base_1.Base));\nexports.default = Component;\n//# sourceMappingURL=component.js.map","import { __assign, __extends, __rest } from \"tslib\";\nimport { difference, each, isNil, keys, mix, pick } from '@antv/util';\nimport { propagationDelegate } from '../util/event';\nimport { applyMatrix2BBox, getMatrixByTranslate } from '../util/matrix';\nimport { getBBoxWithClip, updateClip } from '../util/util';\nimport Component from './component';\nvar STATUS_UPDATE = 'update_status';\nvar COPY_PROPERTIES = ['visible', 'tip', 'delegateObject']; // 更新对象时需要复制的属性\nvar COPY_PROPERTIES_EXCLUDES = ['container', 'group', 'shapesMap', 'isRegister', 'isUpdating', 'destroyed']; // 更新子组件时排除的属性\nvar GroupComponent = /** @class */ (function (_super) {\n    __extends(GroupComponent, _super);\n    function GroupComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupComponent.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { container: null, \n            /**\n             * @private\n             * 缓存图形的 Map\n             */\n            shapesMap: {}, group: null, capture: true, \n            /**\n             * @private 组件或者图形是否允许注册\n             * @type {false}\n             */\n            isRegister: false, \n            /**\n             * @private 是否正在更新\n             * @type {false}\n             */\n            isUpdating: false, \n            /**\n             * @private\n             * 是否初始状态，一旦 render，update 后，这个状态就变成 false, clear 后恢复\n             */\n            isInit: true });\n    };\n    GroupComponent.prototype.remove = function () {\n        this.clear();\n        var group = this.get('group');\n        group.remove();\n    };\n    GroupComponent.prototype.clear = function () {\n        var group = this.get('group');\n        group.clear();\n        this.set('shapesMap', {});\n        this.clearOffScreenCache();\n        this.set('isInit', true);\n    };\n    GroupComponent.prototype.getChildComponentById = function (id) {\n        var group = this.getElementById(id);\n        var inst = group && group.get('component');\n        return inst;\n    };\n    GroupComponent.prototype.getElementById = function (id) {\n        return this.get('shapesMap')[id];\n    };\n    GroupComponent.prototype.getElementByLocalId = function (localId) {\n        var id = this.getElementId(localId);\n        return this.getElementById(id);\n    };\n    GroupComponent.prototype.getElementsByName = function (name) {\n        var rst = [];\n        each(this.get('shapesMap'), function (elem) {\n            if (elem.get('name') === name) {\n                rst.push(elem);\n            }\n        });\n        return rst;\n    };\n    GroupComponent.prototype.getContainer = function () {\n        return this.get('container');\n    };\n    GroupComponent.prototype.updateInner = function (cfg) {\n        // this.updateInner();\n        // this.set('isUpdating', false);\n        this.offScreenRender();\n        if (this.get('updateAutoRender')) {\n            this.render();\n        }\n    };\n    GroupComponent.prototype.render = function () {\n        var offScreenGroup = this.get('offScreenGroup');\n        if (!offScreenGroup) {\n            offScreenGroup = this.offScreenRender();\n        }\n        var group = this.get('group');\n        this.updateElements(offScreenGroup, group);\n        this.deleteElements();\n        this.applyOffset();\n        if (!this.get('eventInitted')) {\n            this.initEvent();\n            this.set('eventInitted', true);\n        }\n        this.set('isInit', false);\n    };\n    GroupComponent.prototype.show = function () {\n        var group = this.get('group');\n        group.show();\n        this.set('visible', true);\n    };\n    GroupComponent.prototype.hide = function () {\n        var group = this.get('group');\n        group.hide();\n        this.set('visible', false);\n    };\n    GroupComponent.prototype.setCapture = function (capture) {\n        var group = this.get('group');\n        group.set('capture', capture);\n        this.set('capture', capture);\n    };\n    GroupComponent.prototype.destroy = function () {\n        this.removeEvent();\n        this.remove();\n        _super.prototype.destroy.call(this);\n    };\n    GroupComponent.prototype.getBBox = function () {\n        return this.get('group').getCanvasBBox();\n    };\n    GroupComponent.prototype.getLayoutBBox = function () {\n        var group = this.get('group');\n        // 防止被 clear 了，offScreenBBox 不存在\n        var bbox = this.getInnerLayoutBBox();\n        var matrix = group.getTotalMatrix();\n        if (matrix) {\n            bbox = applyMatrix2BBox(matrix, bbox);\n        }\n        return bbox; // 默认返回 getBBox，不同的组件内部单独实现\n    };\n    // 复写 on, off, emit 透传到 group\n    GroupComponent.prototype.on = function (evt, callback, once) {\n        var group = this.get('group');\n        group.on(evt, callback, once);\n        return this;\n    };\n    GroupComponent.prototype.off = function (evt, callback) {\n        var group = this.get('group');\n        group && group.off(evt, callback);\n        return this;\n    };\n    GroupComponent.prototype.emit = function (eventName, eventObject) {\n        var group = this.get('group');\n        group.emit(eventName, eventObject);\n    };\n    GroupComponent.prototype.init = function () {\n        _super.prototype.init.call(this);\n        if (!this.get('group')) {\n            this.initGroup();\n        }\n        this.offScreenRender(); // 绘制离屏 group\n    };\n    // 获取组件内部布局占的包围盒\n    GroupComponent.prototype.getInnerLayoutBBox = function () {\n        return this.get('offScreenBBox') || this.get('group').getBBox();\n    };\n    // 抛出委托对象\n    GroupComponent.prototype.delegateEmit = function (eventName, eventObject) {\n        var group = this.get('group');\n        eventObject.target = group;\n        group.emit(eventName, eventObject);\n        propagationDelegate(group, eventName, eventObject);\n    };\n    // 创建离屏的 group ,不添加在 canvas 中\n    GroupComponent.prototype.createOffScreenGroup = function () {\n        var group = this.get('group');\n        var GroupClass = group.getGroupBase(); // 获取分组的构造函数\n        var newGroup = new GroupClass({\n            delegateObject: this.getDelegateObject(),\n        });\n        return newGroup;\n    };\n    // 应用 offset\n    GroupComponent.prototype.applyOffset = function () {\n        var offsetX = this.get('offsetX');\n        var offsetY = this.get('offsetY');\n        this.moveElementTo(this.get('group'), {\n            x: offsetX,\n            y: offsetY,\n        });\n    };\n    GroupComponent.prototype.initGroup = function () {\n        var container = this.get('container');\n        this.set('group', container.addGroup({\n            id: this.get('id'),\n            name: this.get('name'),\n            capture: this.get('capture'),\n            visible: this.get('visible'),\n            isComponent: true,\n            component: this,\n            delegateObject: this.getDelegateObject(),\n        }));\n    };\n    // 离屏渲染\n    GroupComponent.prototype.offScreenRender = function () {\n        this.clearOffScreenCache();\n        var offScreenGroup = this.createOffScreenGroup();\n        this.renderInner(offScreenGroup);\n        this.set('offScreenGroup', offScreenGroup);\n        // 包含包围盒的 bbox\n        this.set('offScreenBBox', getBBoxWithClip(offScreenGroup));\n        return offScreenGroup;\n    };\n    /**\n     * @protected\n     * 在组件上添加分组，主要解决 isReigeter 的问题\n     * @param {IGroup} parent 父元素\n     * @param {object} cfg    分组的配置项\n     */\n    GroupComponent.prototype.addGroup = function (parent, cfg) {\n        this.appendDelegateObject(parent, cfg);\n        var group = parent.addGroup(cfg);\n        if (this.get('isRegister')) {\n            this.registerElement(group);\n        }\n        return group;\n    };\n    /**\n     * @protected\n     * 在组件上添加图形，主要解决 isReigeter 的问题\n     * @param {IGroup} parent 父元素\n     * @param {object} cfg    分组的配置项\n     */\n    GroupComponent.prototype.addShape = function (parent, cfg) {\n        this.appendDelegateObject(parent, cfg);\n        var shape = parent.addShape(cfg);\n        if (this.get('isRegister')) {\n            this.registerElement(shape);\n        }\n        return shape;\n    };\n    /**\n     * 在组件上添加子组件\n     *\n     * @param parent 父元素\n     * @param cfg 子组件配置项\n     */\n    GroupComponent.prototype.addComponent = function (parent, cfg) {\n        var id = cfg.id, Ctor = cfg.component, restCfg = __rest(cfg, [\"id\", \"component\"]);\n        // @ts-ignore\n        var inst = new Ctor(__assign(__assign({}, restCfg), { id: id, container: parent, updateAutoRender: this.get('updateAutoRender') }));\n        inst.init();\n        inst.render();\n        if (this.get('isRegister')) {\n            this.registerElement(inst.get('group'));\n        }\n        return inst;\n    };\n    GroupComponent.prototype.initEvent = function () { };\n    GroupComponent.prototype.removeEvent = function () {\n        var group = this.get('group');\n        group.off();\n    };\n    GroupComponent.prototype.getElementId = function (localId) {\n        var id = this.get('id'); // 组件的 Id\n        var name = this.get('name'); // 组件的名称\n        return id + \"-\" + name + \"-\" + localId;\n    };\n    GroupComponent.prototype.registerElement = function (element) {\n        var id = element.get('id');\n        this.get('shapesMap')[id] = element;\n    };\n    GroupComponent.prototype.unregisterElement = function (element) {\n        var id = element.get('id');\n        delete this.get('shapesMap')[id];\n    };\n    // 移动元素\n    GroupComponent.prototype.moveElementTo = function (element, point) {\n        var matrix = getMatrixByTranslate(point);\n        element.attr('matrix', matrix);\n    };\n    /**\n     * 图形元素新出现时的动画，默认图形从透明度 0 到当前透明度\n     * @protected\n     * @param {string} elmentName 图形元素名称\n     * @param {IElement} newElement  新的图形元素\n     * @param {object} animateCfg 动画的配置项\n     */\n    GroupComponent.prototype.addAnimation = function (elmentName, newElement, animateCfg) {\n        // 缓存透明度\n        var originOpacity = newElement.attr('opacity');\n        if (isNil(originOpacity)) {\n            originOpacity = 1;\n        }\n        newElement.attr('opacity', 0);\n        newElement.animate({ opacity: originOpacity }, animateCfg);\n    };\n    /**\n     * 图形元素新出现时的动画，默认图形从透明度 0 到当前透明度\n     * @protected\n     * @param {string} elmentName 图形元素名称\n     * @param {IElement} originElement 要删除的图形元素\n     * @param {object} animateCfg 动画的配置项\n     */\n    GroupComponent.prototype.removeAnimation = function (elementName, originElement, animateCfg) {\n        originElement.animate({ opacity: 0 }, animateCfg);\n    };\n    /**\n     * 图形元素的更新动画\n     * @param {string} elmentName 图形元素名称\n     * @param {IElement} originElement 现有的图形元素\n     * @param {object} newAttrs  新的图形元素\n     * @param {object} animateCfg 动画的配置项\n     */\n    GroupComponent.prototype.updateAnimation = function (elementName, originElement, newAttrs, animateCfg) {\n        originElement.animate(newAttrs, animateCfg);\n    };\n    // 更新组件的图形\n    GroupComponent.prototype.updateElements = function (newGroup, originGroup) {\n        var _this = this;\n        var animate = this.get('animate');\n        var animateOption = this.get('animateOption');\n        var children = newGroup.getChildren().slice(0); // 创建一个新数组，防止添加到 originGroup 时， children 变动\n        var preElement; // 前面已经匹配到的图形元素，用于\n        each(children, function (element) {\n            var elementId = element.get('id');\n            var originElement = _this.getElementById(elementId);\n            var elementName = element.get('name');\n            if (originElement) {\n                if (element.get('isComponent')) {\n                    // 嵌套子组件更新\n                    var childComponent = element.get('component');\n                    var origChildComponent = originElement.get('component');\n                    var newCfg = pick(childComponent.cfg, difference(keys(childComponent.cfg), COPY_PROPERTIES_EXCLUDES));\n                    origChildComponent.update(newCfg);\n                    originElement.set(STATUS_UPDATE, 'update');\n                }\n                else {\n                    var replaceAttrs = _this.getReplaceAttrs(originElement, element);\n                    // 更新\n                    if (animate && animateOption.update) {\n                        // 没有动画\n                        _this.updateAnimation(elementName, originElement, replaceAttrs, animateOption.update);\n                    }\n                    else {\n                        // originElement.attrs = replaceAttrs; // 直接替换\n                        originElement.attr(replaceAttrs);\n                    }\n                    // 如果是分组，则继续执行\n                    if (element.isGroup()) {\n                        _this.updateElements(element, originElement);\n                    }\n                    // 复制属性\n                    each(COPY_PROPERTIES, function (name) {\n                        originElement.set(name, element.get(name));\n                    });\n                    updateClip(originElement, element);\n                    preElement = originElement;\n                    // 执行完更新后设置状态位为更新\n                    originElement.set(STATUS_UPDATE, 'update');\n                }\n            }\n            else {\n                // 没有对应的图形，则插入当前图形\n                originGroup.add(element); // 应该在 group 加个 insertAt 的方法\n                var siblings = originGroup.getChildren(); // 兄弟节点\n                siblings.splice(siblings.length - 1, 1); // 先从数组中移除，然后放到合适的位置\n                if (preElement) {\n                    // 前面已经有更新的图形或者插入的图形，则在这个图形后面插入\n                    var index = siblings.indexOf(preElement);\n                    siblings.splice(index + 1, 0, element); // 在已经更新的图形元素后面插入\n                }\n                else {\n                    siblings.unshift(element);\n                }\n                _this.registerElement(element); // 注册节点\n                element.set(STATUS_UPDATE, 'add'); // 执行完更新后设置状态位为添加\n                if (element.get('isComponent')) {\n                    // 直接新增子组件container属性，实例不变\n                    var childComponent = element.get('component');\n                    childComponent.set('container', originGroup);\n                }\n                else if (element.isGroup()) {\n                    // 如果元素是新增加的元素，则遍历注册所有的子节点\n                    _this.registerNewGroup(element);\n                }\n                preElement = element;\n                if (animate) {\n                    var animateCfg = _this.get('isInit') ? animateOption.appear : animateOption.enter;\n                    if (animateCfg) {\n                        _this.addAnimation(elementName, element, animateCfg);\n                    }\n                }\n            }\n        });\n    };\n    GroupComponent.prototype.clearUpdateStatus = function (group) {\n        var children = group.getChildren();\n        each(children, function (el) {\n            el.set(STATUS_UPDATE, null); // 清理掉更新状态\n        });\n    };\n    // 清理离屏缓存\n    GroupComponent.prototype.clearOffScreenCache = function () {\n        var offScreenGroup = this.get('offScreenGroup');\n        if (offScreenGroup) {\n            // 销毁原先的离线 Group\n            offScreenGroup.destroy();\n        }\n        this.set('offScreenGroup', null);\n        this.set('offScreenBBox', null);\n    };\n    // private updateInner() {\n    //   const group = this.get('group');\n    //   const newGroup = this.createOffScreenGroup();\n    //   this.renderInner(newGroup);\n    //   this.applyOffset();\n    //   this.updateElements(newGroup, group);\n    //   this.deleteElements();\n    //   newGroup.destroy(); // 销毁虚拟分组\n    // }\n    // 获取发生委托时的对象，在事件中抛出\n    GroupComponent.prototype.getDelegateObject = function () {\n        var _a;\n        var name = this.get('name');\n        var delegateObject = (_a = {},\n            _a[name] = this,\n            _a.component = this,\n            _a);\n        return delegateObject;\n    };\n    // 附加委托信息，用于事件\n    GroupComponent.prototype.appendDelegateObject = function (parent, cfg) {\n        var parentObject = parent.get('delegateObject');\n        if (!cfg.delegateObject) {\n            cfg.delegateObject = {};\n        }\n        mix(cfg.delegateObject, parentObject); // 将父元素上的委托信息复制到自身\n    };\n    // 获取需要替换的属性，如果原先图形元素存在，而新图形不存在，则设置 undefined\n    GroupComponent.prototype.getReplaceAttrs = function (originElement, newElement) {\n        var originAttrs = originElement.attr();\n        var newAttrs = newElement.attr();\n        each(originAttrs, function (v, k) {\n            if (newAttrs[k] === undefined) {\n                newAttrs[k] = undefined;\n            }\n        });\n        return newAttrs;\n    };\n    GroupComponent.prototype.registerNewGroup = function (group) {\n        var _this = this;\n        var children = group.getChildren();\n        each(children, function (element) {\n            _this.registerElement(element); // 注册节点\n            element.set(STATUS_UPDATE, 'add'); // 执行完更新后设置状态位为添加\n            if (element.isGroup()) {\n                _this.registerNewGroup(element);\n            }\n        });\n    };\n    // 移除多余的元素\n    GroupComponent.prototype.deleteElements = function () {\n        var _this = this;\n        var shapesMap = this.get('shapesMap');\n        var deleteArray = [];\n        // 遍历获取需要删除的图形元素\n        each(shapesMap, function (element, id) {\n            if (!element.get(STATUS_UPDATE) || element.destroyed) {\n                deleteArray.push([id, element]);\n            }\n            else {\n                element.set(STATUS_UPDATE, null); // 清理掉更新状态\n            }\n        });\n        var animate = this.get('animate');\n        var animateOption = this.get('animateOption');\n        // 删除图形元素\n        each(deleteArray, function (item) {\n            var id = item[0], element = item[1];\n            if (!element.destroyed) {\n                var elementName = element.get('name');\n                if (animate && animateOption.leave) {\n                    // 需要动画结束时移除图形\n                    var callbackAnimCfg = mix({\n                        callback: function () {\n                            _this.removeElement(element);\n                        },\n                    }, animateOption.leave);\n                    _this.removeAnimation(elementName, element, callbackAnimCfg);\n                }\n                else {\n                    _this.removeElement(element);\n                }\n            }\n            delete shapesMap[id]; // 从缓存中移除\n        });\n    };\n    GroupComponent.prototype.removeElement = function (element) {\n        if (element.get('isGroup')) {\n            var component = element.get('component');\n            if (component) {\n                component.destroy();\n            }\n        }\n        element.remove();\n    };\n    return GroupComponent;\n}(Component));\nexport default GroupComponent;\n//# sourceMappingURL=group-component.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar graph_event_1 = require(\"@antv/g-base/lib/event/graph-event\");\n/**\n *\n * @param group 分组\n * @param eventName 事件名\n * @param eventObject 事件对象\n */\nfunction propagationDelegate(group, eventName, eventObject) {\n    var event = new graph_event_1.default(eventName, eventObject);\n    event.target = group;\n    event.propagationPath.push(group); // 从当前 group 开始触发 delegation\n    group.emitDelegation(eventName, event);\n    var parent = group.getParent();\n    // 执行冒泡\n    while (parent) {\n        // 委托事件要先触发\n        parent.emitDelegation(eventName, event);\n        event.propagationPath.push(parent);\n        parent = parent.getParent();\n    }\n}\nexports.propagationDelegate = propagationDelegate;\n//# sourceMappingURL=event.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = {\n    fontFamily: \"\\n  \\\"-apple-system\\\", BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto,\\\"Helvetica Neue\\\",\\n  Helvetica, \\\"PingFang SC\\\", \\\"Hiragino Sans GB\\\", \\\"Microsoft YaHei\\\",\\n  SimSun, \\\"sans-serif\\\"\",\n    textColor: '#2C3542',\n    activeTextColor: '#333333',\n    uncheckedColor: '#D8D8D8',\n    lineColor: '#416180',\n    regionColor: '#CCD7EB',\n    verticalAxisRotate: -Math.PI / 4,\n    horizontalAxisRotate: Math.PI / 4,\n};\n//# sourceMappingURL=theme.js.map","import { __assign, __extends } from \"tslib\";\nimport { isNumber, isString } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport { getMatrixByAngle } from '../util/matrix';\nimport Theme from '../util/theme';\nimport { getValueByPercent } from '../util/util';\nvar LineAnnotation = /** @class */ (function (_super) {\n    __extends(LineAnnotation, _super);\n    function LineAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @protected\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    LineAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'line', locationType: 'region', start: null, end: null, style: {}, text: null, defaultCfg: {\n                style: {\n                    fill: Theme.textColor,\n                    fontSize: 12,\n                    textAlign: 'center',\n                    textBaseline: 'bottom',\n                    fontFamily: Theme.fontFamily,\n                },\n                text: {\n                    position: 'center',\n                    autoRotate: true,\n                    content: null,\n                    offsetX: 0,\n                    offsetY: 0,\n                    style: {\n                        stroke: Theme.lineColor,\n                        lineWidth: 1,\n                    },\n                },\n            } });\n    };\n    LineAnnotation.prototype.renderInner = function (group) {\n        this.renderLine(group);\n        if (this.get('text')) {\n            this.renderLabel(group);\n        }\n    };\n    // 绘制线\n    LineAnnotation.prototype.renderLine = function (group) {\n        var start = this.get('start');\n        var end = this.get('end');\n        var style = this.get('style');\n        this.addShape(group, {\n            type: 'line',\n            id: this.getElementId('line'),\n            name: 'annotation-line',\n            attrs: __assign({ x1: start.x, y1: start.y, x2: end.x, y2: end.y }, style),\n        });\n    };\n    // 获取 label 的位置\n    LineAnnotation.prototype.getLabelPoint = function (start, end, position) {\n        var percent;\n        if (position === 'start') {\n            percent = 0;\n        }\n        else if (position === 'center') {\n            percent = 0.5;\n        }\n        else if (isString(position) && position.indexOf('%') !== -1) {\n            percent = parseInt(position, 10) / 100;\n        }\n        else if (isNumber(position)) {\n            percent = position;\n        }\n        else {\n            percent = 1;\n        }\n        if (percent > 1 || percent < 0) {\n            percent = 1;\n        }\n        return {\n            x: getValueByPercent(start.x, end.x, percent),\n            y: getValueByPercent(start.y, end.y, percent),\n        };\n    };\n    // 绘制 label\n    LineAnnotation.prototype.renderLabel = function (group) {\n        var text = this.get('text');\n        var start = this.get('start');\n        var end = this.get('end');\n        var position = text.position, content = text.content, style = text.style, offsetX = text.offsetX, offsetY = text.offsetY, autoRotate = text.autoRotate;\n        var point = this.getLabelPoint(start, end, position);\n        var attrs = __assign({ x: point.x + offsetX, y: point.y + offsetY, text: content }, style);\n        // 如果自动旋转，需要计算矩阵\n        if (autoRotate) {\n            var vector = [end.x - start.x, end.y - start.y];\n            var angle = Math.atan2(vector[1], vector[0]);\n            var matrix = getMatrixByAngle(point, angle);\n            attrs.matrix = matrix;\n        }\n        this.addShape(group, {\n            type: 'text',\n            id: this.getElementId('line-text'),\n            name: 'annotation-line-text',\n            attrs: attrs,\n        });\n    };\n    return LineAnnotation;\n}(GroupComponent));\nexport default LineAnnotation;\n//# sourceMappingURL=line.js.map","import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport { getMatrixByAngle } from '../util/matrix';\nimport Theme from '../util/theme';\nvar TextAnnotation = /** @class */ (function (_super) {\n    __extends(TextAnnotation, _super);\n    function TextAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @protected\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    TextAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'text', locationType: 'point', x: 0, y: 0, content: '', rotate: null, style: {}, defaultCfg: {\n                style: {\n                    fill: Theme.textColor,\n                    fontSize: 12,\n                    textAlign: 'center',\n                    textBaseline: 'middle',\n                    fontFamily: Theme.fontFamily,\n                },\n            } });\n    };\n    // 复写 setLocation 方法，不需要重新创建 text\n    TextAnnotation.prototype.setLocation = function (location) {\n        this.set('x', location.x);\n        this.set('y', location.y);\n        this.resetLocation();\n    };\n    TextAnnotation.prototype.renderInner = function (group) {\n        this.renderText(group);\n    };\n    TextAnnotation.prototype.renderText = function (group) {\n        var _a = this.getLocation(), x = _a.x, y = _a.y;\n        var content = this.get('content');\n        var style = this.get('style');\n        var text = this.addShape(group, {\n            type: 'text',\n            id: this.getElementId('text'),\n            name: 'annotation-text',\n            attrs: __assign({ x: x,\n                y: y, text: content }, style),\n        });\n        this.applyRotate(text, x, y);\n    };\n    TextAnnotation.prototype.applyRotate = function (textShape, x, y) {\n        var rotate = this.get('rotate');\n        var matrix = null;\n        if (rotate) {\n            matrix = getMatrixByAngle({ x: x, y: y }, rotate);\n        }\n        textShape.attr('matrix', matrix);\n    };\n    TextAnnotation.prototype.resetLocation = function () {\n        var textShape = this.getElementByLocalId('text');\n        if (textShape) {\n            var _a = this.getLocation(), x = _a.x, y = _a.y;\n            textShape.attr({\n                x: x,\n                y: y,\n            });\n            this.applyRotate(textShape, x, y);\n        }\n    };\n    return TextAnnotation;\n}(GroupComponent));\nexport default TextAnnotation;\n//# sourceMappingURL=text.js.map","import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport { getCirclePoint } from '../util/util';\nvar ArcAnnotation = /** @class */ (function (_super) {\n    __extends(ArcAnnotation, _super);\n    function ArcAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @protected\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    ArcAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'arc', locationType: 'circle', center: null, radius: 100, startAngle: -Math.PI / 2, endAngle: (Math.PI * 3) / 2, style: {\n                stroke: '#999',\n                lineWidth: 1,\n            } });\n    };\n    ArcAnnotation.prototype.renderInner = function (group) {\n        this.renderArc(group);\n    };\n    ArcAnnotation.prototype.getArcPath = function () {\n        var _a = this.getLocation(), center = _a.center, radius = _a.radius, startAngle = _a.startAngle, endAngle = _a.endAngle;\n        var startPoint = getCirclePoint(center, radius, startAngle);\n        var endPoint = getCirclePoint(center, radius, endAngle);\n        var largeFlag = endAngle - startAngle > Math.PI ? 1 : 0;\n        var path = [['M', startPoint.x, startPoint.y]];\n        if (endAngle - startAngle === Math.PI * 2) {\n            // 整个圆是分割成两个圆\n            var middlePoint = getCirclePoint(center, radius, startAngle + Math.PI);\n            path.push(['A', radius, radius, 0, largeFlag, 1, middlePoint.x, middlePoint.y]);\n            path.push(['A', radius, radius, 0, largeFlag, 1, endPoint.x, endPoint.y]);\n        }\n        else {\n            path.push(['A', radius, radius, 0, largeFlag, 1, endPoint.x, endPoint.y]);\n        }\n        return path;\n    };\n    // 绘制 arc\n    ArcAnnotation.prototype.renderArc = function (group) {\n        // 也可以 通过 get('center') 类似的方式逐个获取\n        var path = this.getArcPath();\n        var style = this.get('style');\n        this.addShape(group, {\n            type: 'path',\n            id: this.getElementId('arc'),\n            name: 'annotation-arc',\n            attrs: __assign({ path: path }, style),\n        });\n    };\n    return ArcAnnotation;\n}(GroupComponent));\nexport default ArcAnnotation;\n//# sourceMappingURL=arc.js.map","import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport Theme from '../util/theme';\nimport { regionToBBox } from '../util/util';\nvar RegionAnnotation = /** @class */ (function (_super) {\n    __extends(RegionAnnotation, _super);\n    function RegionAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @protected\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    RegionAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'region', locationType: 'region', start: null, end: null, style: {}, defaultCfg: {\n                style: {\n                    lineWidth: 0,\n                    fill: Theme.regionColor,\n                    opacity: 0.4,\n                },\n            } });\n    };\n    RegionAnnotation.prototype.renderInner = function (group) {\n        this.renderRegion(group);\n    };\n    RegionAnnotation.prototype.renderRegion = function (group) {\n        var start = this.get('start');\n        var end = this.get('end');\n        var style = this.get('style');\n        var bbox = regionToBBox({ start: start, end: end });\n        this.addShape(group, {\n            type: 'rect',\n            id: this.getElementId('region'),\n            name: 'annotation-region',\n            attrs: __assign({ x: bbox.x, y: bbox.y, width: bbox.width, height: bbox.height }, style),\n        });\n    };\n    return RegionAnnotation;\n}(GroupComponent));\nexport default RegionAnnotation;\n//# sourceMappingURL=region.js.map","import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport { regionToBBox } from '../util/util';\nvar ImageAnnotation = /** @class */ (function (_super) {\n    __extends(ImageAnnotation, _super);\n    function ImageAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @protected\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    ImageAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'image', locationType: 'region', start: null, end: null, src: null, style: {} });\n    };\n    ImageAnnotation.prototype.renderInner = function (group) {\n        this.renderImage(group);\n    };\n    ImageAnnotation.prototype.getImageAttrs = function () {\n        var start = this.get('start');\n        var end = this.get('end');\n        var style = this.get('style');\n        var bbox = regionToBBox({ start: start, end: end });\n        var src = this.get('src');\n        return __assign({ x: bbox.x, y: bbox.y, img: src, width: bbox.width, height: bbox.height }, style);\n    };\n    // 绘制图片\n    ImageAnnotation.prototype.renderImage = function (group) {\n        this.addShape(group, {\n            type: 'image',\n            id: this.getElementId('image'),\n            name: 'annotation-image',\n            attrs: this.getImageAttrs(),\n        });\n    };\n    return ImageAnnotation;\n}(GroupComponent));\nexport default ImageAnnotation;\n//# sourceMappingURL=image.js.map","import { __assign, __extends } from \"tslib\";\nimport { get } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport Theme from '../util/theme';\nvar DataMarkerAnnotation = /** @class */ (function (_super) {\n    __extends(DataMarkerAnnotation, _super);\n    function DataMarkerAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    DataMarkerAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'dataMarker', locationType: 'point', x: 0, y: 0, point: {}, line: {}, text: {}, direction: 'upward', autoAdjust: true, coordinateBBox: null, defaultCfg: {\n                point: {\n                    display: true,\n                    style: {\n                        r: 3,\n                        fill: '#FFFFFF',\n                        stroke: '#1890FF',\n                        lineWidth: 2,\n                    },\n                },\n                line: {\n                    display: true,\n                    length: 20,\n                    style: {\n                        stroke: Theme.lineColor,\n                        lineWidth: 1,\n                    },\n                },\n                text: {\n                    content: '',\n                    display: true,\n                    style: {\n                        fill: Theme.textColor,\n                        opacity: 0.65,\n                        fontSize: 12,\n                        textAlign: 'start',\n                        fontFamily: Theme.fontFamily,\n                    },\n                },\n            } });\n    };\n    DataMarkerAnnotation.prototype.renderInner = function (group) {\n        if (get(this.get('line'), 'display')) {\n            this.renderLine(group);\n        }\n        if (get(this.get('text'), 'display')) {\n            this.renderText(group);\n        }\n        if (get(this.get('point'), 'display')) {\n            this.renderPoint(group);\n        }\n        if (this.get('autoAdjust')) {\n            this.autoAdjust(group);\n        }\n    };\n    DataMarkerAnnotation.prototype.applyOffset = function () {\n        this.moveElementTo(this.get('group'), {\n            x: this.get('x') + this.get('offsetX'),\n            y: this.get('y') + this.get('offsetY'),\n        });\n    };\n    DataMarkerAnnotation.prototype.renderPoint = function (group) {\n        var point = this.getShapeAttrs().point;\n        this.addShape(group, {\n            type: 'circle',\n            id: this.getElementId('point'),\n            name: 'annotation-point',\n            attrs: point,\n        });\n    };\n    DataMarkerAnnotation.prototype.renderLine = function (group) {\n        var line = this.getShapeAttrs().line;\n        this.addShape(group, {\n            type: 'path',\n            id: this.getElementId('line'),\n            name: 'annotation-line',\n            attrs: line,\n        });\n    };\n    DataMarkerAnnotation.prototype.renderText = function (group) {\n        var text = this.getShapeAttrs().text;\n        this.addShape(group, {\n            type: 'text',\n            id: this.getElementId('text'),\n            name: 'annotation-text',\n            attrs: text,\n        });\n    };\n    DataMarkerAnnotation.prototype.autoAdjust = function (group) {\n        var direction = this.get('direction');\n        var x = this.get('x');\n        var y = this.get('y');\n        var lineLength = get(this.get('line'), 'length', 0);\n        var coordinateBBox = this.get('coordinateBBox');\n        var _a = group.getBBox(), minX = _a.minX, maxX = _a.maxX, minY = _a.minY, maxY = _a.maxY;\n        var textShape = group.findById(this.getElementId('text'));\n        var lineShape = group.findById(this.getElementId('line'));\n        if (!coordinateBBox) {\n            return;\n        }\n        if (textShape) {\n            if (x + minX <= coordinateBBox.minX) {\n                // 左侧超出\n                textShape.attr('textAlign', 'start');\n            }\n            if (x + maxX >= coordinateBBox.maxX) {\n                // 右侧超出\n                textShape.attr('textAlign', 'end');\n            }\n        }\n        if ((direction === 'upward' && y + minY <= coordinateBBox.minY) ||\n            (direction !== 'upward' && y + maxY >= coordinateBBox.maxY)) {\n            // 上方或者下方超出\n            var textBaseline = void 0;\n            var factor = void 0;\n            if (direction === 'upward' && y + minY <= coordinateBBox.minY) {\n                textBaseline = 'top';\n                factor = 1;\n            }\n            else {\n                textBaseline = 'bottom';\n                factor = -1;\n            }\n            textShape.attr('textBaseline', textBaseline);\n            if (lineShape) {\n                lineShape.attr('path', [\n                    ['M', 0, 0],\n                    ['L', 0, lineLength * factor],\n                ]);\n            }\n            textShape.attr('y', (lineLength + 2) * factor);\n        }\n    };\n    DataMarkerAnnotation.prototype.getShapeAttrs = function () {\n        var lineDisplay = get(this.get('line'), 'display');\n        var pointStyle = get(this.get('point'), 'style', {});\n        var lineStyle = get(this.get('line'), 'style', {});\n        var textStyle = get(this.get('text'), 'style', {});\n        var direction = this.get('direction');\n        var lineLength = lineDisplay ? get(this.get('line'), 'length', 0) : 0;\n        var factor = direction === 'upward' ? -1 : 1;\n        return {\n            point: __assign({ x: 0, y: 0 }, pointStyle),\n            line: __assign({ path: [\n                    ['M', 0, 0],\n                    ['L', 0, lineLength * factor],\n                ] }, lineStyle),\n            text: __assign({ x: 0, y: (lineLength + 2) * factor, text: get(this.get('text'), 'content', ''), textBaseline: direction === 'upward' ? 'bottom' : 'top' }, textStyle),\n        };\n    };\n    return DataMarkerAnnotation;\n}(GroupComponent));\nexport default DataMarkerAnnotation;\n//# sourceMappingURL=data-marker.js.map","import { __assign, __extends } from \"tslib\";\nimport { get } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport Theme from '../util/theme';\nimport { pointsToBBox } from '../util/util';\nvar DataRegionAnnotation = /** @class */ (function (_super) {\n    __extends(DataRegionAnnotation, _super);\n    function DataRegionAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    DataRegionAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'dataRegion', locationType: 'points', points: [], lineLength: 0, region: {}, text: {}, defaultCfg: {\n                region: {\n                    style: {\n                        lineWidth: 0,\n                        fill: Theme.regionColor,\n                        opacity: 0.4,\n                    },\n                },\n                text: {\n                    content: '',\n                    style: {\n                        textAlign: 'center',\n                        textBaseline: 'bottom',\n                        fontSize: 12,\n                        fill: Theme.textColor,\n                        fontFamily: Theme.fontFamily,\n                    },\n                },\n            } });\n    };\n    DataRegionAnnotation.prototype.renderInner = function (group) {\n        var regionStyle = get(this.get('region'), 'style', {});\n        var textStyle = get(this.get('text'), 'style', {});\n        var lineLength = this.get('lineLength') || 0;\n        var points = this.get('points');\n        if (!points.length) {\n            return;\n        }\n        var bbox = pointsToBBox(points);\n        // render region\n        var path = [];\n        path.push(['M', points[0].x, bbox.minY - lineLength]);\n        points.forEach(function (point) {\n            path.push(['L', point.x, point.y]);\n        });\n        path.push(['L', points[points.length - 1].x, points[points.length - 1].y - lineLength]);\n        this.addShape(group, {\n            type: 'path',\n            id: this.getElementId('region'),\n            name: 'annotation-region',\n            attrs: __assign({ path: path }, regionStyle),\n        });\n        // render text\n        this.addShape(group, {\n            type: 'text',\n            id: this.getElementId('text'),\n            name: 'annotation-text',\n            attrs: __assign({ x: (bbox.minX + bbox.maxX) / 2, y: bbox.minY - lineLength, text: get(this.get('text'), 'content', '') }, textStyle),\n        });\n    };\n    return DataRegionAnnotation;\n}(GroupComponent));\nexport default DataRegionAnnotation;\n//# sourceMappingURL=data-region.js.map","import { __assign, __extends } from \"tslib\";\nimport { clone, each } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport { regionToBBox } from '../util/util';\nvar RegionFilterAnnotation = /** @class */ (function (_super) {\n    __extends(RegionFilterAnnotation, _super);\n    function RegionFilterAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    RegionFilterAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'regionFilter', locationType: 'region', start: null, end: null, color: null, shape: [] });\n    };\n    RegionFilterAnnotation.prototype.renderInner = function (group) {\n        var _this = this;\n        var start = this.get('start');\n        var end = this.get('end');\n        // 1. add region layer\n        var layer = this.addGroup(group, {\n            id: this.getElementId('region-filter'),\n            capture: false,\n        });\n        // 2. clone shape & color it\n        each(this.get('shapes'), function (shape, shapeIdx) {\n            var type = shape.get('type');\n            var attrs = clone(shape.attr());\n            _this.adjustShapeAttrs(attrs);\n            _this.addShape(layer, {\n                id: _this.getElementId(\"shape-\" + type + \"-\" + shapeIdx),\n                capture: false,\n                type: type,\n                attrs: attrs,\n            });\n        });\n        // 3. clip\n        var clipBBox = regionToBBox({ start: start, end: end });\n        layer.setClip({\n            type: 'rect',\n            attrs: {\n                x: clipBBox.minX,\n                y: clipBBox.minY,\n                width: clipBBox.width,\n                height: clipBBox.height,\n            },\n        });\n    };\n    RegionFilterAnnotation.prototype.adjustShapeAttrs = function (attr) {\n        var color = this.get('color');\n        if (attr.fill) {\n            attr.fill = attr.fillStyle = color;\n        }\n        attr.stroke = attr.strokeStyle = color;\n    };\n    return RegionFilterAnnotation;\n}(GroupComponent));\nexport default RegionFilterAnnotation;\n//# sourceMappingURL=region-filter.js.map","import { each, mix } from '@antv/util';\n// 获取多个状态量的合并值\nexport function getStatesStyle(item, elementName, stateStyles) {\n    var styleName = elementName + \"Style\"; // activeStyle\n    var styles = null;\n    each(stateStyles, function (v, state) {\n        if (item[state] && v[styleName]) {\n            if (!styles) {\n                styles = {};\n            }\n            mix(styles, v[styleName]); // 合并样式\n        }\n    });\n    return styles;\n}\n//# sourceMappingURL=state.js.map","import { __assign, __extends } from \"tslib\";\nimport { vec2 } from '@antv/matrix-util';\nimport { each, filter, isNil, isNumberEqual, mix } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport { getMatrixByAngle } from '../util/matrix';\nimport { getStatesStyle } from '../util/state';\nimport Theme from '../util/theme';\nvar AxisBase = /** @class */ (function (_super) {\n    __extends(AxisBase, _super);\n    function AxisBase() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AxisBase.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'axis', ticks: [], line: {}, tickLine: {}, subTickLine: null, title: null, \n            /**\n             * 文本标签的配置项\n             */\n            label: {}, \n            /**\n             * 垂直于坐标轴方向的因子，决定文本、title、tickLine 在坐标轴的哪一侧\n             */\n            verticalFactor: 1, \n            // 垂直方向限制的长度，对文本自适应有很大影响\n            verticalLimitLength: null, overlapOrder: ['autoRotate', 'autoEllipsis', 'autoHide'], tickStates: {}, defaultCfg: {\n                line: {\n                    // @type {Attrs} 坐标轴线的图形属性,如果设置成null，则不显示轴线\n                    style: {\n                        lineWidth: 1,\n                        stroke: Theme.lineColor,\n                    },\n                },\n                tickLine: {\n                    // @type {Attrs} 标注坐标线的图形属性\n                    style: {\n                        lineWidth: 1,\n                        stroke: Theme.lineColor,\n                    },\n                    alignTick: true,\n                    length: 5,\n                    displayWithLabel: true,\n                },\n                subTickLine: {\n                    // @type {Attrs} 标注坐标线的图形属性\n                    style: {\n                        lineWidth: 1,\n                        stroke: Theme.lineColor,\n                    },\n                    count: 4,\n                    length: 2,\n                },\n                label: {\n                    autoRotate: true,\n                    autoHide: false,\n                    autoEllipsis: false,\n                    style: {\n                        fontSize: 12,\n                        fill: Theme.textColor,\n                        textBaseline: 'middle',\n                        fontFamily: Theme.fontFamily,\n                        fontWeight: 'normal',\n                    },\n                    offset: 10,\n                },\n                title: {\n                    autoRotate: true,\n                    spacing: 5,\n                    position: 'center',\n                    style: {\n                        fontSize: 12,\n                        fill: Theme.textColor,\n                        textBaseline: 'middle',\n                        fontFamily: Theme.fontFamily,\n                        textAlign: 'center',\n                    },\n                    offset: 48,\n                },\n                tickStates: {\n                    active: {\n                        labelStyle: {\n                            fontWeight: 500,\n                        },\n                        tickLineStyle: {\n                            lineWidth: 2,\n                        },\n                    },\n                    inactive: {\n                        labelStyle: {\n                            fill: Theme.uncheckedColor,\n                        },\n                    },\n                },\n            } });\n    };\n    /**\n     * 绘制组件\n     */\n    AxisBase.prototype.renderInner = function (group) {\n        if (this.get('line')) {\n            this.drawLine(group);\n        }\n        // drawTicks 包括 drawLabels 和 drawTickLines\n        this.drawTicks(group);\n        if (this.get('title')) {\n            this.drawTitle(group);\n        }\n    };\n    // 实现 IList 接口\n    AxisBase.prototype.isList = function () {\n        return true;\n    };\n    /**\n     * 获取图例项\n     * @return {ListItem[]} 列表项集合\n     */\n    AxisBase.prototype.getItems = function () {\n        return this.get('ticks');\n    };\n    /**\n     * 设置列表项\n     * @param {ListItem[]} items 列表项集合\n     */\n    AxisBase.prototype.setItems = function (items) {\n        this.update({\n            ticks: items,\n        });\n    };\n    /**\n     * 更新列表项\n     * @param {ListItem} item 列表项\n     * @param {object}   cfg  列表项\n     */\n    AxisBase.prototype.updateItem = function (item, cfg) {\n        mix(item, cfg);\n        this.clear(); // 由于单个图例项变化，会引起全局变化，所以全部更新\n        this.render();\n    };\n    /**\n     * 清空列表\n     */\n    AxisBase.prototype.clearItems = function () {\n        var itemGroup = this.getElementByLocalId('label-group');\n        itemGroup && itemGroup.clear();\n    };\n    /**\n     * 设置列表项的状态\n     * @param {ListItem} item  列表项\n     * @param {string}   state 状态名\n     * @param {boolean}  value 状态值, true, false\n     */\n    AxisBase.prototype.setItemState = function (item, state, value) {\n        item[state] = value;\n        this.updateTickStates(item); // 应用状态样式\n    };\n    /**\n     * 是否存在指定的状态\n     * @param {ListItem} item  列表项\n     * @param {boolean} state 状态名\n     */\n    AxisBase.prototype.hasState = function (item, state) {\n        return !!item[state];\n    };\n    AxisBase.prototype.getItemStates = function (item) {\n        var tickStates = this.get('tickStates');\n        var rst = [];\n        each(tickStates, function (v, k) {\n            if (item[k]) {\n                // item.selected\n                rst.push(k);\n            }\n        });\n        return rst;\n    };\n    /**\n     * 清楚所有列表项的状态\n     * @param {string} state 状态值\n     */\n    AxisBase.prototype.clearItemsState = function (state) {\n        var _this = this;\n        var items = this.getItemsByState(state);\n        each(items, function (item) {\n            _this.setItemState(item, state, false);\n        });\n    };\n    /**\n     * 根据状态获取图例项\n     * @param  {string}     state [description]\n     * @return {ListItem[]}       [description]\n     */\n    AxisBase.prototype.getItemsByState = function (state) {\n        var _this = this;\n        var items = this.getItems();\n        return filter(items, function (item) {\n            return _this.hasState(item, state);\n        });\n    };\n    AxisBase.prototype.getSidePoint = function (point, offset) {\n        var self = this;\n        var vector = self.getSideVector(offset, point);\n        return {\n            x: point.x + vector[0],\n            y: point.y + vector[1],\n        };\n    };\n    AxisBase.prototype.getTextAnchor = function (vector) {\n        var align;\n        if (isNumberEqual(vector[0], 0)) {\n            align = 'center';\n        }\n        else if (vector[0] > 0) {\n            align = 'start';\n        }\n        else if (vector[0] < 0) {\n            align = 'end';\n        }\n        return align;\n    };\n    AxisBase.prototype.processOverlap = function (labelGroup) { };\n    // 绘制坐标轴线\n    AxisBase.prototype.drawLine = function (group) {\n        var path = this.getLinePath();\n        var line = this.get('line'); // line 的判空在调用 drawLine 之前，不在这里判定\n        this.addShape(group, {\n            type: 'path',\n            id: this.getElementId('line'),\n            name: 'axis-line',\n            attrs: mix({\n                path: path,\n            }, line.style),\n        });\n    };\n    AxisBase.prototype.getTickLineItems = function (ticks) {\n        var _this = this;\n        var tickLineItems = [];\n        var tickLine = this.get('tickLine');\n        var alignTick = tickLine.alignTick;\n        var tickLineLength = tickLine.length;\n        var tickSegment = 1;\n        var tickCount = ticks.length;\n        if (tickCount >= 2) {\n            tickSegment = ticks[1].value - ticks[0].value;\n        }\n        each(ticks, function (tick) {\n            var point = tick.point;\n            if (!alignTick) {\n                // tickLine 不同 tick 对齐时需要调整 point\n                point = _this.getTickPoint(tick.value - tickSegment / 2);\n            }\n            var endPoint = _this.getSidePoint(point, tickLineLength);\n            tickLineItems.push({\n                startPoint: point,\n                tickValue: tick.value,\n                endPoint: endPoint,\n                tickId: tick.id,\n                id: \"tickline-\" + tick.id,\n            });\n        });\n        // 如果 tickLine 不居中对齐，则需要在最后面补充一个 tickLine\n        // if (!alignTick && tickCount > 0) {\n        //   const tick = ticks[tickCount - 1];\n        //   const point = this.getTickPoint(tick.value + tickSegment / 2);\n        // }\n        return tickLineItems;\n    };\n    AxisBase.prototype.getSubTickLineItems = function (tickLineItems) {\n        var subTickLineItems = [];\n        var subTickLine = this.get('subTickLine');\n        var subCount = subTickLine.count;\n        var tickLineCount = tickLineItems.length;\n        // 刻度线的数量大于 2 时，才绘制子刻度\n        if (tickLineCount >= 2) {\n            for (var i = 0; i < tickLineCount - 1; i++) {\n                var pre = tickLineItems[i];\n                var next = tickLineItems[i + 1];\n                for (var j = 0; j < subCount; j++) {\n                    var percent = (j + 1) / (subCount + 1);\n                    var tickValue = (1 - percent) * pre.tickValue + percent * next.tickValue;\n                    var point = this.getTickPoint(tickValue);\n                    var endPoint = this.getSidePoint(point, subTickLine.length);\n                    subTickLineItems.push({\n                        startPoint: point,\n                        endPoint: endPoint,\n                        tickValue: tickValue,\n                        id: \"sub-\" + pre.id + \"-\" + j,\n                    });\n                }\n            }\n        }\n        return subTickLineItems;\n    };\n    AxisBase.prototype.getTickLineAttrs = function (tickItem) {\n        var tickLineStyle = this.get('tickLine').style;\n        var startPoint = tickItem.startPoint, endPoint = tickItem.endPoint;\n        var attrs = mix({\n            x1: startPoint.x,\n            y1: startPoint.y,\n            x2: endPoint.x,\n            y2: endPoint.y,\n        }, tickLineStyle);\n        return attrs;\n    };\n    // 绘制坐标轴刻度线\n    AxisBase.prototype.drawTick = function (tickItem, tickLineGroup) {\n        this.addShape(tickLineGroup, {\n            type: 'line',\n            id: this.getElementId(tickItem.id),\n            name: 'axis-tickline',\n            attrs: this.getTickLineAttrs(tickItem),\n        });\n    };\n    // 绘制坐标轴刻度线，包括子刻度线\n    AxisBase.prototype.drawTickLines = function (group) {\n        var _this = this;\n        var ticks = this.get('ticks');\n        var subTickLine = this.get('subTickLine');\n        var tickLineItems = this.getTickLineItems(ticks);\n        var tickLineGroup = this.addGroup(group, {\n            name: 'axis-tickline-group',\n            id: this.getElementId('tickline-group'),\n        });\n        var tickCfg = this.get('tickLine');\n        each(tickLineItems, function (item) {\n            if (tickCfg.displayWithLabel) {\n                // 如果跟随 label 显示，则检测是否存在对应的 label\n                var labelId = _this.getElementId(\"label-\" + item.tickId);\n                if (group.findById(labelId)) {\n                    _this.drawTick(item, tickLineGroup);\n                }\n            }\n            else {\n                _this.drawTick(item, tickLineGroup);\n            }\n        });\n        if (subTickLine) {\n            var subTickLineItems = this.getSubTickLineItems(tickLineItems);\n            each(subTickLineItems, function (item) {\n                _this.drawTick(item, tickLineGroup);\n            });\n        }\n    };\n    // 预处理 ticks 确定位置和补充 id\n    AxisBase.prototype.processTicks = function () {\n        var _this = this;\n        var ticks = this.get('ticks');\n        each(ticks, function (tick) {\n            tick.point = _this.getTickPoint(tick.value);\n            // 补充 tick 的 id，为动画和更新做准备\n            if (isNil(tick.id)) {\n                // 默认使用 tick.name 作为id\n                tick.id = tick.name;\n            }\n        });\n    };\n    // 绘制 ticks 包括文本和 tickLine\n    AxisBase.prototype.drawTicks = function (group) {\n        var _this = this;\n        this.processTicks();\n        if (this.get('label')) {\n            this.drawLabels(group);\n        }\n        if (this.get('tickLine')) {\n            this.drawTickLines(group);\n        }\n        var ticks = this.get('ticks');\n        each(ticks, function (tick) {\n            _this.applyTickStates(tick, group);\n        });\n    };\n    // 获取 label 的配置项\n    AxisBase.prototype.getLabelAttrs = function (tick, index) {\n        var labelCfg = this.get('label');\n        var offset = labelCfg.offset, style = labelCfg.style, rotate = labelCfg.rotate, formatter = labelCfg.formatter;\n        var point = this.getSidePoint(tick.point, offset);\n        var vector = this.getSideVector(offset, point);\n        var text = formatter ? formatter(tick.name, tick, index) : tick.name;\n        var attrs = mix({\n            x: point.x,\n            y: point.y,\n            text: text,\n            textAlign: this.getTextAnchor(vector),\n        }, style);\n        if (rotate) {\n            attrs.matrix = getMatrixByAngle(point, rotate);\n        }\n        return attrs;\n    };\n    // 绘制文本\n    AxisBase.prototype.drawLabels = function (group) {\n        var _this = this;\n        var ticks = this.get('ticks');\n        var labelGroup = this.addGroup(group, {\n            name: 'axis-label-group',\n            id: this.getElementId('label-group'),\n        });\n        each(ticks, function (tick, index) {\n            _this.addShape(labelGroup, {\n                type: 'text',\n                name: 'axis-label',\n                id: _this.getElementId(\"label-\" + tick.id),\n                attrs: _this.getLabelAttrs(tick, index),\n                delegateObject: {\n                    tick: tick,\n                    item: tick,\n                    index: index,\n                },\n            });\n        });\n        this.processOverlap(labelGroup);\n    };\n    // 标题的属性\n    AxisBase.prototype.getTitleAttrs = function () {\n        var titleCfg = this.get('title');\n        var style = titleCfg.style, position = titleCfg.position, offset = titleCfg.offset, autoRotate = titleCfg.autoRotate;\n        var percent = 0.5;\n        if (position === 'start') {\n            percent = 0;\n        }\n        else if (position === 'end') {\n            percent = 1;\n        }\n        var point = this.getTickPoint(percent); // 标题对应的坐标轴上的点\n        var titlePoint = this.getSidePoint(point, offset); // 标题的点\n        var attrs = mix({\n            x: titlePoint.x,\n            y: titlePoint.y,\n            text: titleCfg.text,\n        }, style);\n        var rotate = titleCfg.rotate; // rotate 是角度值\n        var angle = rotate;\n        if (isNil(rotate) && autoRotate) {\n            // 用户没有设定旋转角度，同时设置自动旋转\n            var vector = this.getAxisVector(point);\n            var v1 = [1, 0]; // 水平方向的向量\n            angle = vec2.angleTo(vector, v1, true);\n        }\n        if (angle) {\n            var matrix = getMatrixByAngle(titlePoint, angle);\n            attrs.matrix = matrix;\n        }\n        return attrs;\n    };\n    // 绘制标题\n    AxisBase.prototype.drawTitle = function (group) {\n        this.addShape(group, {\n            type: 'text',\n            id: this.getElementId('title'),\n            name: 'axis-title',\n            attrs: this.getTitleAttrs(),\n        });\n    };\n    AxisBase.prototype.applyTickStates = function (tick, group) {\n        var states = this.getItemStates(tick);\n        if (states.length) {\n            var tickStates = this.get('tickStates');\n            // 分别更新 label 和 tickLine\n            var labelId = this.getElementId(\"label-\" + tick.id);\n            var labelShape = group.findById(labelId);\n            if (labelShape) {\n                var labelStateStyle = getStatesStyle(tick, 'label', tickStates);\n                labelStateStyle && labelShape.attr(labelStateStyle);\n            }\n            var tickLineId = this.getElementId(\"tickline-\" + tick.id);\n            var tickLineShape = group.findById(tickLineId);\n            if (tickLineShape) {\n                var tickLineStateStyle = getStatesStyle(tick, 'tickLine', tickStates);\n                tickLineStateStyle && tickLineShape.attr(tickLineStateStyle);\n            }\n        }\n    };\n    AxisBase.prototype.updateTickStates = function (tick) {\n        var states = this.getItemStates(tick);\n        var tickStates = this.get('tickStates');\n        var labelCfg = this.get('label');\n        var labelShape = this.getElementByLocalId(\"label-\" + tick.id);\n        var tickLineCfg = this.get('tickLine');\n        var tickLineShape = this.getElementByLocalId(\"tickline-\" + tick.id);\n        if (states.length) {\n            if (labelShape) {\n                var labelStateStyle = getStatesStyle(tick, 'label', tickStates);\n                labelStateStyle && labelShape.attr(labelStateStyle);\n            }\n            if (tickLineShape) {\n                var tickLineStateStyle = getStatesStyle(tick, 'tickLine', tickStates);\n                tickLineStateStyle && tickLineShape.attr(tickLineStateStyle);\n            }\n        }\n        else {\n            if (labelShape) {\n                labelShape.attr(labelCfg.style);\n            }\n            if (tickLineShape) {\n                tickLineShape.attr(tickLineCfg.style);\n            }\n        }\n    };\n    return AxisBase;\n}(GroupComponent));\nexport default AxisBase;\n//# sourceMappingURL=base.js.map","import { each } from '@antv/util';\nvar ELLIPSIS_CODE = '\\u2026';\nvar ELLIPSIS_CODE_LENGTH = 2; // 省略号的长度\nfunction strLen(str) {\n    var len = 0;\n    for (var i = 0; i < str.length; i++) {\n        len += charAtLength(str, i);\n    }\n    return len;\n}\nfunction charAtLength(str, i) {\n    if (str.charCodeAt(i) > 0 && str.charCodeAt(i) < 128) {\n        return 1;\n    }\n    else {\n        return 2;\n    }\n}\nfunction getLabelLength(isVertical, label) {\n    var bbox = label.getCanvasBBox();\n    return isVertical ? bbox.width : bbox.height;\n}\nfunction ellipsisLabel(isVertical, label, limitLength, position) {\n    var text = label.attr('text');\n    var labelLength = getLabelLength(isVertical, label);\n    var codeLength = strLen(text);\n    var ellipsised = false;\n    if (limitLength < labelLength) {\n        var reseveLength = Math.floor((limitLength / labelLength) * codeLength) - ELLIPSIS_CODE_LENGTH; // 计算出来的应该保存的长度\n        var newText = void 0;\n        if (reseveLength >= 0) {\n            newText = ellipsisString(text, reseveLength, position);\n        }\n        else {\n            newText = ELLIPSIS_CODE;\n        }\n        if (newText) {\n            label.attr('text', newText);\n            ellipsised = true;\n        }\n    }\n    if (ellipsised) {\n        label.set('tip', text);\n    }\n    else {\n        label.set('tip', null);\n    }\n    return ellipsised;\n}\nfunction ellipsisString(str, reseveLength, position) {\n    var count = str.length;\n    var rst = '';\n    if (position === 'tail') {\n        for (var i = 0, index = 0; i < reseveLength;) {\n            var charLength = charAtLength(str, index);\n            if (i + charLength <= reseveLength) {\n                rst += str[index];\n                i += charAtLength(str, index);\n                index++;\n            }\n            else {\n                break;\n            }\n        }\n        rst += ELLIPSIS_CODE;\n    }\n    else if (position === 'head') {\n        for (var i = 0, index = count - 1; i < reseveLength;) {\n            var charLength = charAtLength(str, index);\n            if (i + charLength <= reseveLength) {\n                rst += str[index];\n                i += charAtLength(str, index);\n                index--;\n            }\n            else {\n                break;\n            }\n        }\n        rst = ELLIPSIS_CODE + rst;\n    }\n    else {\n        var startStr = '';\n        var endStr = '';\n        for (var i = 0, startIndex = 0, endIndex = count - 1; i < reseveLength;) {\n            var startCodeLen = charAtLength(str, startIndex);\n            var hasAdd = false; // 设置标志位，防止头尾都没有附加字符\n            if (startCodeLen + i <= reseveLength) {\n                startStr += str[startIndex];\n                startIndex++;\n                i += startCodeLen;\n                hasAdd = true;\n            }\n            var endCodeLen = charAtLength(str, endIndex);\n            if (endCodeLen + i <= reseveLength) {\n                endStr = str[endIndex] + endStr;\n                i += endCodeLen;\n                endIndex--;\n                hasAdd = true;\n            }\n            if (!hasAdd) {\n                // 如果都没有增加字符，说明都不适合则中断\n                break;\n            }\n        }\n        rst = startStr + ELLIPSIS_CODE + endStr;\n    }\n    return rst;\n}\nfunction ellipseLabels(isVertical, labelGroup, limitLength, position) {\n    var children = labelGroup.getChildren();\n    var ellipsised = false;\n    each(children, function (label) {\n        var rst = ellipsisLabel(isVertical, label, limitLength, position);\n        ellipsised = ellipsised || rst;\n    });\n    return ellipsised;\n}\nexport function getDefault() {\n    return ellipsisTail;\n}\nexport function ellipsisHead(isVertical, labelGroup, limitLength) {\n    return ellipseLabels(isVertical, labelGroup, limitLength, 'head');\n}\nexport function ellipsisTail(isVertical, labelGroup, limitLength) {\n    return ellipseLabels(isVertical, labelGroup, limitLength, 'tail');\n}\nexport function ellipsisMiddle(isVertical, labelGroup, limitLength) {\n    return ellipseLabels(isVertical, labelGroup, limitLength, 'middle');\n}\n//# sourceMappingURL=auto-ellipsis.js.map","import { each } from '@antv/util';\nexport function getMaxLabelWidth(labels) {\n    var max = 0;\n    each(labels, function (label) {\n        var bbox = label.getBBox();\n        var width = bbox.width;\n        if (max < width) {\n            max = width;\n        }\n    });\n    return max;\n}\n//# sourceMappingURL=label.js.map","import { getMaxLabelWidth } from '../../util/label';\n// 文本是否旋转\nfunction isRotate(label) {\n    var matrix = label.attr('matrix');\n    return matrix && matrix[0] !== 1; // 仅在这个场景下判定\n}\n// autohide 不再考虑超出限制\n// function isOutLimit(isVertical: boolean, label: IElement, limitLength: number) {\n//   if (!limitLength) {\n//     // 如果没限制 limitLength 则直接返回 false\n//     return false;\n//   }\n//   const canvasBBox = label.getCanvasBBox();\n//   let isOut = false;\n//   if (isVertical) {\n//     isOut = canvasBBox.width > limitLength;\n//   } else {\n//     isOut = canvasBBox.height > limitLength;\n//   }\n//   return isOut;\n// }\n// 是否重叠\nfunction isOverlap(isVertical, rotated, preBox, curBox, reversed) {\n    if (reversed === void 0) { reversed = false; }\n    var overlap = false;\n    if (isVertical) {\n        // 垂直时检测边高\n        overlap = Math.abs(preBox.y - curBox.y) < preBox.height;\n    }\n    else {\n        // 水平时检测\n        if (rotated) {\n            // 如果旋转了，则检测两者 x 之间的间距是否小于前一个的高度\n            var height = reversed ? curBox.height : preBox.height;\n            overlap = Math.abs(preBox.x - curBox.x) < height;\n        }\n        else {\n            // 检测两者是否 x 方向重合\n            var width = reversed ? curBox.width : preBox.width;\n            overlap = Math.abs(preBox.x - curBox.x) < width;\n        }\n    }\n    return overlap;\n}\n// 保留第一个或者最后一个\nfunction reserveOne(isVertical, labelsGroup, reversed) {\n    var labels = labelsGroup.getChildren().slice(); // 复制数组\n    if (!labels.length) {\n        return false;\n    }\n    var hasHide = false;\n    if (reversed) {\n        // 翻转\n        labels.reverse();\n    }\n    var count = labels.length;\n    var first = labels[0];\n    var rotated = isRotate(first);\n    var preBox = first.getBBox();\n    for (var i = 1; i < count; i++) {\n        var label = labels[i];\n        var curBBox = label.getBBox();\n        // 不再考虑超出限制，而仅仅根据是否重叠进行隐藏 isOutLimit(isVertical, label, limitLength) ||\n        var isHide = isOverlap(isVertical, rotated, preBox, curBBox, reversed);\n        if (isHide) {\n            label.hide();\n            hasHide = true;\n        }\n        else {\n            preBox = curBBox;\n        }\n    }\n    return hasHide;\n}\nexport function getDefault() {\n    return equidistance;\n}\n/**\n * 保证首个 label 可见，即使超过 limitLength 也不隐藏\n * @param {boolean} isVertical  是否垂直\n * @param {IGroup}  labelsGroup label 的分组\n */\nexport function reserveFirst(isVertical, labelsGroup) {\n    return reserveOne(isVertical, labelsGroup, false);\n}\n/**\n * 保证最后一个 label 可见，即使超过 limitLength 也不隐藏\n * @param {boolean} isVertical  是否垂直\n * @param {IGroup}  labelsGroup label 的分组\n */\nexport function reserveLast(isVertical, labelsGroup) {\n    return reserveOne(isVertical, labelsGroup, true);\n}\n/**\n * 保证第一个最后一个 label 可见，即使超过 limitLength 也不隐藏\n * @param {boolean} isVertical  是否垂直\n * @param {IGroup}  labelsGroup label 的分组\n */\nexport function reserveBoth(isVertical, labelsGroup) {\n    var labels = labelsGroup.getChildren().slice(); // 复制数组\n    if (labels.length <= 2) {\n        // 如果数量小于或等于 2 则直接返回\n        return false;\n    }\n    var hasHide = false;\n    var count = labels.length;\n    var first = labels[0];\n    var last = labels[count - 1];\n    var rotated = isRotate(first);\n    var preBox = first.getBBox();\n    var preLabel = first;\n    // 按照先保存第一个的逻辑循环一遍，最后一个不参与循环\n    for (var i = 1; i < count - 1; i++) {\n        var label = labels[i];\n        var curBBox = label.getBBox();\n        // 废弃 isOutLimit(isVertical, label, limitLength) ||\n        var isHide = isOverlap(isVertical, rotated, preBox, curBBox);\n        if (isHide) {\n            label.hide();\n            hasHide = true;\n        }\n        else {\n            preBox = curBBox;\n            preLabel = label;\n        }\n    }\n    var lastBBox = last.getBBox();\n    var overlap = isOverlap(isVertical, rotated, preBox, lastBBox); // 不检测超出 limit\n    if (overlap) {\n        // 发生冲突，则隐藏前一个保留后一个\n        preLabel.hide();\n        hasHide = true;\n    }\n    return hasHide;\n}\n/**\n * 保证 label 均匀显示，主要解决文本层叠的问题，对于 limitLength 不处理\n * @param {boolean} isVertical  是否垂直\n * @param {IGroup}  labelsGroup label 的分组\n */\nexport function equidistance(isVertical, labelsGroup) {\n    var labels = labelsGroup.getChildren().slice(); // 复制数组\n    if (labels.length < 2) {\n        // 如果数量小于 2 则直接返回，等于 2 时可能也会重合\n        return false;\n    }\n    var hasHide = false;\n    var first = labels[0];\n    var firstBBox = first.getBBox();\n    var second = labels[1];\n    var rotated = isRotate(first);\n    var count = labels.length;\n    var interval = 0; // 不重叠的坐标文本间距个数\n    if (isVertical) {\n        // 垂直的坐标轴计算垂直方向的间距\n        var distance = Math.abs(second.attr('y') - first.attr('y'));\n        interval = firstBBox.height / distance;\n    }\n    else {\n        // 水平坐标轴\n        if (rotated) {\n            var distance = Math.abs(second.attr('x') - first.attr('x'));\n            interval = firstBBox.width / distance;\n        }\n        else {\n            var maxWidth = getMaxLabelWidth(labels);\n            var distance = Math.abs(second.attr('x') - first.attr('x'));\n            interval = maxWidth / distance;\n        }\n    }\n    // interval > 1 时需要对 label 进行隐藏\n    if (interval > 1) {\n        interval = Math.ceil(interval);\n        for (var i = 0; i < count; i++) {\n            if (i % interval !== 0) {\n                // 仅保留被整除的 label\n                labels[i].hide();\n                hasHide = true;\n            }\n        }\n    }\n    return hasHide;\n}\n//# sourceMappingURL=auto-hide.js.map","import { each } from '@antv/util';\nimport { getMaxLabelWidth } from '../../util/label';\nimport { getMatrixByAngle } from '../../util/matrix';\nimport Theme from '../../util/theme';\n// 统一设置文本的角度\nfunction setLabelsAngle(labels, angle) {\n    each(labels, function (label) {\n        var x = label.attr('x');\n        var y = label.attr('y');\n        var matrix = getMatrixByAngle({ x: x, y: y }, angle);\n        label.attr('matrix', matrix);\n    });\n}\n// 旋转文本\nfunction labelRotate(isVertical, labelsGroup, limitLength, getAngle) {\n    var labels = labelsGroup.getChildren();\n    if (!labels.length) {\n        return false;\n    }\n    if (!isVertical && labels.length < 2) {\n        // 水平时至少有两个时才旋转\n        return false;\n    }\n    var maxWidth = getMaxLabelWidth(labels);\n    var isOverlap = false;\n    if (isVertical) {\n        // limitLength 为 0 或者 null 时不生效\n        isOverlap = !!limitLength && maxWidth > limitLength;\n    }\n    else {\n        // 同 limitLength 无关\n        var tickWidth = Math.abs(labels[1].attr('x') - labels[0].attr('x'));\n        isOverlap = maxWidth > tickWidth;\n    }\n    if (isOverlap) {\n        var angle = getAngle(limitLength, maxWidth);\n        setLabelsAngle(labels, angle);\n    }\n    return isOverlap;\n}\nexport function getDefault() {\n    return fixedAngle;\n}\n/**\n * 固定角度旋转文本\n * @param  {boolean} isVertical  是否垂直方向\n * @param  {IGroup}  labelsGroup 文本的 group\n * @param  {number}  limitLength 限定长度\n * @return {boolean}             是否发生了旋转\n */\nexport function fixedAngle(isVertical, labelsGroup, limitLength) {\n    return labelRotate(isVertical, labelsGroup, limitLength, function () {\n        return isVertical ? Theme.verticalAxisRotate : Theme.horizontalAxisRotate;\n    });\n}\n/**\n * 非固定角度旋转文本\n * @param  {boolean} isVertical  是否垂直方向\n * @param  {IGroup}  labelsGroup 文本的 group\n * @param  {number}  limitLength 限定长度\n * @return {boolean}             是否发生了旋转\n */\nexport function unfixedAngle(isVertical, labelsGroup, limitLength) {\n    return labelRotate(isVertical, labelsGroup, limitLength, function (length, maxWidth) {\n        if (!length) {\n            // 如果没有设置 limitLength，则使用固定的角度旋转\n            return isVertical ? Theme.verticalAxisRotate : Theme.horizontalAxisRotate;\n        }\n        if (isVertical) {\n            // 垂直时不需要判定 limitLength > maxWidth ，因为此时不会 overlap\n            return -Math.acos(length / maxWidth);\n        }\n        else {\n            var angle = 0;\n            if (length > maxWidth) {\n                // 需要判定，asin 的参数 -1， 1\n                angle = Math.PI / 4;\n            }\n            else {\n                angle = Math.asin(length / maxWidth);\n                if (angle > Math.PI / 4) {\n                    // 大于 Math.PI / 4 时没意义\n                    angle = Math.PI / 4;\n                }\n            }\n            return angle;\n        }\n    });\n}\n//# sourceMappingURL=auto-rotate.js.map","import { __assign, __extends } from \"tslib\";\nimport { vec2 } from '@antv/matrix-util';\nimport { each, isFunction, isNumberEqual } from '@antv/util';\nimport AxisBase from './base';\nimport * as OverlapUtil from './overlap';\nvar Line = /** @class */ (function (_super) {\n    __extends(Line, _super);\n    function Line() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Line.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { type: 'line', locationType: 'region', \n            /**\n             * 起始点, x, y\n             * @type {object}\n             */\n            start: null, \n            /**\n             * 结束点, x, y\n             * @type {object}\n             */\n            end: null });\n    };\n    // 获取坐标轴线的 path\n    Line.prototype.getLinePath = function () {\n        var start = this.get('start');\n        var end = this.get('end');\n        var path = [];\n        path.push(['M', start.x, start.y]);\n        path.push(['L', end.x, end.y]);\n        return path;\n    };\n    // 重新计算 layout bbox，考虑到 line 不显示\n    Line.prototype.getInnerLayoutBBox = function () {\n        var start = this.get('start');\n        var end = this.get('end');\n        var bbox = _super.prototype.getInnerLayoutBBox.call(this);\n        var minX = Math.min(start.x, end.x, bbox.x);\n        var minY = Math.min(start.y, end.y, bbox.y);\n        var maxX = Math.max(start.x, end.x, bbox.maxX);\n        var maxY = Math.max(start.y, end.y, bbox.maxY);\n        return {\n            x: minX,\n            y: minY,\n            minX: minX,\n            minY: minY,\n            maxX: maxX,\n            maxY: maxY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    };\n    Line.prototype.isVertical = function () {\n        var start = this.get('start');\n        var end = this.get('end');\n        return isNumberEqual(start.x, end.x);\n    };\n    Line.prototype.isHorizontal = function () {\n        var start = this.get('start');\n        var end = this.get('end');\n        return isNumberEqual(start.y, end.y);\n    };\n    Line.prototype.getTickPoint = function (tickValue) {\n        var self = this;\n        var start = self.get('start');\n        var end = self.get('end');\n        var regionX = end.x - start.x;\n        var regionY = end.y - start.y;\n        return {\n            x: start.x + regionX * tickValue,\n            y: start.y + regionY * tickValue,\n        };\n    };\n    // 直线坐标轴下任一点的向量方向都相同\n    Line.prototype.getSideVector = function (offset) {\n        var axisVector = this.getAxisVector();\n        var normal = vec2.normalize([], axisVector);\n        var factor = this.get('verticalFactor');\n        var verticalVector = [normal[1], normal[0] * -1]; // 垂直方向，逆时针方向\n        return vec2.scale([], verticalVector, offset * factor);\n    };\n    // 获取坐标轴的向量\n    Line.prototype.getAxisVector = function () {\n        var start = this.get('start');\n        var end = this.get('end');\n        return [end.x - start.x, end.y - start.y];\n    };\n    Line.prototype.processOverlap = function (labelGroup) {\n        var _this = this;\n        var isVertical = this.isVertical();\n        var isHorizontal = this.isHorizontal();\n        // 非垂直，或者非水平时不处理遮挡问题\n        if (!isVertical && !isHorizontal) {\n            return;\n        }\n        var labelCfg = this.get('label');\n        var titleCfg = this.get('title');\n        var verticalLimitLength = this.get('verticalLimitLength');\n        var labelOffset = labelCfg.offset;\n        var limitLength = verticalLimitLength;\n        var titleHeight = 0;\n        var titleSpacing = 0;\n        if (titleCfg) {\n            titleHeight = titleCfg.style.fontSize;\n            titleSpacing = titleCfg.spacing;\n        }\n        if (limitLength) {\n            limitLength = limitLength - labelOffset - titleSpacing - titleHeight;\n        }\n        var overlapOrder = this.get('overlapOrder');\n        each(overlapOrder, function (name) {\n            if (labelCfg[name]) {\n                _this.autoProcessOverlap(name, labelCfg[name], labelGroup, limitLength);\n            }\n        });\n        if (titleCfg) {\n            // 调整 title 的 offset\n            var bbox = labelGroup.getBBox();\n            var length_1 = isVertical ? bbox.width : bbox.height;\n            titleCfg.offset = labelOffset + length_1 + titleSpacing + titleHeight / 2;\n        }\n    };\n    Line.prototype.autoProcessOverlap = function (name, value, labelGroup, limitLength) {\n        var _this = this;\n        var isVertical = this.isVertical();\n        var hasAdjusted = false;\n        var util = OverlapUtil[name];\n        if (value === true) {\n            // 默认使用固定角度的旋转方案\n            hasAdjusted = util.getDefault()(isVertical, labelGroup, limitLength);\n        }\n        else if (isFunction(value)) {\n            // 用户可以传入回调函数\n            hasAdjusted = value(isVertical, labelGroup, limitLength);\n        }\n        else if (util[value]) {\n            // 按照名称执行旋转函数\n            hasAdjusted = util[value](isVertical, labelGroup, limitLength);\n        }\n        if (name === 'autoRotate') {\n            // 文本旋转后，文本的对齐方式可能就不合适了\n            if (hasAdjusted) {\n                var labels = labelGroup.getChildren();\n                var verticalFactor_1 = this.get('verticalFactor');\n                each(labels, function (label) {\n                    var textAlign = label.attr('textAlign');\n                    if (textAlign === 'center') {\n                        // 居中的文本需要调整旋转度\n                        var newAlign = verticalFactor_1 > 0 ? 'end' : 'start';\n                        label.attr('textAlign', newAlign);\n                    }\n                });\n            }\n        }\n        else if (name === 'autoHide') {\n            var children = labelGroup.getChildren().slice(0); // 复制数组，删除时不会出错\n            each(children, function (label) {\n                if (!label.get('visible')) {\n                    if (_this.get('isRegister')) {\n                        // 已经注册过了，则删除\n                        _this.unregisterElement(label);\n                    }\n                    label.remove(); // 防止 label 数量太多，所以统一删除\n                }\n            });\n        }\n    };\n    return Line;\n}(AxisBase));\nexport default Line;\n//# sourceMappingURL=line.js.map","import { __assign, __extends } from \"tslib\";\nimport { vec2 } from '@antv/matrix-util';\nimport AxisBase from './base';\nvar Circle = /** @class */ (function (_super) {\n    __extends(Circle, _super);\n    function Circle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Circle.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { type: 'circle', locationType: 'circle', center: null, radius: null, startAngle: -Math.PI / 2, endAngle: (Math.PI * 3) / 2 });\n    };\n    Circle.prototype.getLinePath = function () {\n        var center = this.get('center');\n        var x = center.x;\n        var y = center.y;\n        var rx = this.get('radius');\n        var ry = rx;\n        var startAngle = this.get('startAngle');\n        var endAngle = this.get('endAngle');\n        var path = [];\n        if (Math.abs(endAngle - startAngle) === Math.PI * 2) {\n            path = [['M', x, y - ry], ['A', rx, ry, 0, 1, 1, x, y + ry], ['A', rx, ry, 0, 1, 1, x, y - ry], ['Z']];\n        }\n        else {\n            var startPoint = this.getCirclePoint(startAngle);\n            var endPoint = this.getCirclePoint(endAngle);\n            var large = Math.abs(endAngle - startAngle) > Math.PI ? 1 : 0;\n            var sweep = startAngle > endAngle ? 0 : 1;\n            path = [\n                ['M', x, y],\n                ['L', startPoint.x, startPoint.y],\n                ['A', rx, ry, 0, large, sweep, endPoint.x, endPoint.y],\n                ['L', x, y],\n            ];\n        }\n        return path;\n    };\n    Circle.prototype.getTickPoint = function (tickValue) {\n        var startAngle = this.get('startAngle');\n        var endAngle = this.get('endAngle');\n        var angle = startAngle + (endAngle - startAngle) * tickValue;\n        return this.getCirclePoint(angle);\n    };\n    // 获取垂直于坐标轴的向量\n    Circle.prototype.getSideVector = function (offset, point) {\n        var center = this.get('center');\n        var vector = [point.x - center.x, point.y - center.y];\n        var factor = this.get('verticalFactor');\n        var vecLen = vec2.length(vector);\n        vec2.scale(vector, vector, (factor * offset) / vecLen);\n        return vector;\n    };\n    // 获取沿坐标轴方向的向量\n    Circle.prototype.getAxisVector = function (point) {\n        var center = this.get('center');\n        var vector = [point.x - center.x, point.y - center.y];\n        return [vector[1], -1 * vector[0]]; // 获取顺时针方向的向量\n    };\n    // 根据圆心和半径获取点\n    Circle.prototype.getCirclePoint = function (angle, radius) {\n        var center = this.get('center');\n        radius = radius || this.get('radius');\n        return {\n            x: center.x + Math.cos(angle) * radius,\n            y: center.y + Math.sin(angle) * radius,\n        };\n    };\n    return Circle;\n}(AxisBase));\nexport default Circle;\n//# sourceMappingURL=circle.js.map","import { __assign, __extends } from \"tslib\";\nimport { isNil } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport { getMatrixByAngle } from '../util/matrix';\nimport Theme from '../util/theme';\nimport { formatPadding } from '../util/util';\nvar CrosshairBase = /** @class */ (function (_super) {\n    __extends(CrosshairBase, _super);\n    function CrosshairBase() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CrosshairBase.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'crosshair', type: 'base', line: {}, text: null, textBackground: {}, capture: false, defaultCfg: {\n                line: {\n                    style: {\n                        lineWidth: 1,\n                        stroke: Theme.lineColor,\n                    },\n                },\n                text: {\n                    position: 'start',\n                    offset: 10,\n                    autoRotate: false,\n                    content: null,\n                    style: {\n                        fill: Theme.textColor,\n                        textAlign: 'center',\n                        textBaseline: 'middle',\n                        fontFamily: Theme.fontFamily,\n                    },\n                },\n                textBackground: {\n                    padding: 5,\n                    style: {\n                        stroke: Theme.lineColor,\n                    },\n                },\n            } });\n    };\n    CrosshairBase.prototype.renderInner = function (group) {\n        if (this.get('line')) {\n            this.renderLine(group);\n        }\n        if (this.get('text')) {\n            this.renderText(group);\n            this.renderBackground(group);\n        }\n    };\n    CrosshairBase.prototype.renderText = function (group) {\n        var text = this.get('text');\n        var style = text.style, autoRotate = text.autoRotate, content = text.content;\n        if (!isNil(content)) {\n            var textPoint = this.getTextPoint();\n            var matrix = null;\n            if (autoRotate) {\n                var angle = this.getRotateAngle();\n                matrix = getMatrixByAngle(textPoint, angle);\n            }\n            this.addShape(group, {\n                type: 'text',\n                name: 'crosshair-text',\n                id: this.getElementId('text'),\n                attrs: __assign(__assign(__assign({}, textPoint), { text: content, matrix: matrix }), style),\n            });\n        }\n    };\n    CrosshairBase.prototype.renderLine = function (group) {\n        var path = this.getLinePath();\n        var line = this.get('line');\n        var style = line.style;\n        this.addShape(group, {\n            type: 'path',\n            name: 'crosshair-line',\n            id: this.getElementId('line'),\n            attrs: __assign({ path: path }, style),\n        });\n    };\n    // 绘制文本的背景\n    CrosshairBase.prototype.renderBackground = function (group) {\n        var textId = this.getElementId('text');\n        var textShape = group.findById(textId); // 查找文本\n        var textBackground = this.get('textBackground');\n        if (textBackground && textShape) {\n            var textBBox = textShape.getBBox();\n            var padding = formatPadding(textBackground.padding); // 用户传入的 padding 格式不定\n            var style = textBackground.style;\n            var backgroundShape = this.addShape(group, {\n                type: 'rect',\n                name: 'crosshair-text-background',\n                id: this.getElementId('text-background'),\n                attrs: __assign({ x: textBBox.x - padding[3], y: textBBox.y - padding[0], width: textBBox.width + padding[1] + padding[3], height: textBBox.height + padding[0] + padding[2], matrix: textShape.attr('matrix') }, style),\n            });\n            backgroundShape.toBack();\n        }\n    };\n    return CrosshairBase;\n}(GroupComponent));\nexport default CrosshairBase;\n//# sourceMappingURL=base.js.map","import { __assign, __extends } from \"tslib\";\nimport { getTextPoint } from '../util/util';\nimport CrosshairBase from './base';\nvar LineCrosshair = /** @class */ (function (_super) {\n    __extends(LineCrosshair, _super);\n    function LineCrosshair() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LineCrosshair.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { type: 'line', locationType: 'region', start: null, end: null });\n    };\n    // 直线的文本需要同直线垂直\n    LineCrosshair.prototype.getRotateAngle = function () {\n        var _a = this.getLocation(), start = _a.start, end = _a.end;\n        var position = this.get('text').position;\n        var angle = Math.atan2(end.y - start.y, end.x - start.x);\n        var tangentAngle = position === 'start' ? angle - Math.PI / 2 : angle + Math.PI / 2;\n        return tangentAngle;\n    };\n    LineCrosshair.prototype.getTextPoint = function () {\n        var _a = this.getLocation(), start = _a.start, end = _a.end;\n        var _b = this.get('text'), position = _b.position, offset = _b.offset;\n        return getTextPoint(start, end, position, offset);\n    };\n    LineCrosshair.prototype.getLinePath = function () {\n        var _a = this.getLocation(), start = _a.start, end = _a.end;\n        return [\n            ['M', start.x, start.y],\n            ['L', end.x, end.y],\n        ];\n    };\n    return LineCrosshair;\n}(CrosshairBase));\nexport default LineCrosshair;\n//# sourceMappingURL=line.js.map","import { __assign, __extends } from \"tslib\";\nimport { getCirclePoint } from '../util/util';\nimport CrosshairBase from './base';\nvar LineCrosshair = /** @class */ (function (_super) {\n    __extends(LineCrosshair, _super);\n    function LineCrosshair() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LineCrosshair.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { type: 'circle', locationType: 'circle', center: null, radius: 100, startAngle: -Math.PI / 2, endAngle: (Math.PI * 3) / 2 });\n    };\n    LineCrosshair.prototype.getRotateAngle = function () {\n        var _a = this.getLocation(), startAngle = _a.startAngle, endAngle = _a.endAngle;\n        var position = this.get('text').position;\n        var tangentAngle = position === 'start' ? startAngle + Math.PI / 2 : endAngle - Math.PI / 2;\n        return tangentAngle;\n    };\n    LineCrosshair.prototype.getTextPoint = function () {\n        var text = this.get('text');\n        var position = text.position, offset = text.offset;\n        var _a = this.getLocation(), center = _a.center, radius = _a.radius, startAngle = _a.startAngle, endAngle = _a.endAngle;\n        var angle = position === 'start' ? startAngle : endAngle;\n        var tangentAngle = this.getRotateAngle() - Math.PI;\n        var point = getCirclePoint(center, radius, angle);\n        // 这个地方其实应该求切线向量然后在乘以 offset，但是太啰嗦了，直接给出结果\n        // const tangent = [Math.cos(tangentAngle), Math.sin(tangentAngle)];\n        // const offsetVector = vec2.scale([], tangent, offset);\n        var offsetX = Math.cos(tangentAngle) * offset;\n        var offsetY = Math.sin(tangentAngle) * offset;\n        return {\n            x: point.x + offsetX,\n            y: point.y + offsetY,\n        };\n    };\n    LineCrosshair.prototype.getLinePath = function () {\n        var _a = this.getLocation(), center = _a.center, radius = _a.radius, startAngle = _a.startAngle, endAngle = _a.endAngle;\n        var path = null;\n        if (endAngle - startAngle === Math.PI * 2) {\n            // 整圆\n            var x = center.x, y = center.y;\n            path = [\n                ['M', x, y - radius],\n                ['A', radius, radius, 0, 1, 1, x, y + radius],\n                ['A', radius, radius, 0, 1, 1, x, y - radius],\n                ['Z'],\n            ];\n        }\n        else {\n            var startPoint = getCirclePoint(center, radius, startAngle);\n            var endPoint = getCirclePoint(center, radius, endAngle);\n            var large = Math.abs(endAngle - startAngle) > Math.PI ? 1 : 0;\n            var sweep = startAngle > endAngle ? 0 : 1;\n            path = [\n                ['M', startPoint.x, startPoint.y],\n                ['A', radius, radius, 0, large, sweep, endPoint.x, endPoint.y],\n            ];\n        }\n        return path;\n    };\n    return LineCrosshair;\n}(CrosshairBase));\nexport default LineCrosshair;\n//# sourceMappingURL=circle.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar dom_util_1 = require(\"@antv/dom-util\");\nvar util_1 = require(\"@antv/util\");\nvar util_2 = require(\"../util/util\");\nvar component_1 = require(\"./component\");\nvar HtmlComponent = /** @class */ (function (_super) {\n    tslib_1.__extends(HtmlComponent, _super);\n    function HtmlComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HtmlComponent.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return tslib_1.__assign(tslib_1.__assign({}, cfg), { container: null, containerTpl: '<div></div>', updateAutoRender: true, containerClassName: '', parent: null });\n        return cfg;\n    };\n    HtmlComponent.prototype.getContainer = function () {\n        return this.get('container');\n    };\n    /**\n     * 显示组件\n     */\n    HtmlComponent.prototype.show = function () {\n        var container = this.get('container');\n        container.style.display = '';\n        this.set('visible', true);\n    };\n    /**\n     * 隐藏组件\n     */\n    HtmlComponent.prototype.hide = function () {\n        var container = this.get('container');\n        container.style.display = 'none';\n        this.set('visible', false);\n    };\n    /**\n     * 是否允许捕捉事件\n     * @param capture 事件捕捉\n     */\n    HtmlComponent.prototype.setCapture = function (capture) {\n        var container = this.getContainer();\n        var value = capture ? 'auto' : 'none';\n        container.style.pointerEvents = value;\n        this.set('capture', capture);\n    };\n    HtmlComponent.prototype.getBBox = function () {\n        var container = this.getContainer();\n        var x = parseFloat(container.style.left) || 0;\n        var y = parseFloat(container.style.top) || 0;\n        return util_2.createBBox(x, y, container.clientWidth, container.clientHeight);\n    };\n    HtmlComponent.prototype.clear = function () {\n        var container = this.get('container');\n        util_2.clearDom(container);\n    };\n    HtmlComponent.prototype.destroy = function () {\n        this.removeEvent();\n        this.removeDom();\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * 复写 init，主要是初始化 DOM 和事件\n     */\n    HtmlComponent.prototype.init = function () {\n        _super.prototype.init.call(this);\n        this.initContainer();\n        this.initDom();\n        this.resetStyles(); // 初始化样式\n        this.applyStyles(); // 应用样式\n        this.initEvent();\n        this.initCapture();\n        this.initVisible();\n    };\n    HtmlComponent.prototype.initCapture = function () {\n        this.setCapture(this.get('capture'));\n    };\n    HtmlComponent.prototype.initVisible = function () {\n        if (!this.get('visible')) {\n            // 设置初始显示状态\n            this.hide();\n        }\n        else {\n            this.show();\n        }\n    };\n    HtmlComponent.prototype.initDom = function () {\n    };\n    HtmlComponent.prototype.initContainer = function () {\n        var container = this.get('container');\n        if (util_1.isNil(container)) {\n            // 未指定 container 则创建\n            container = this.createDom();\n            var parent_1 = this.get('parent');\n            if (util_1.isString(parent_1)) {\n                parent_1 = document.getElementById(parent_1);\n                this.set('parent', parent_1);\n            }\n            parent_1.appendChild(container);\n            this.set('container', container);\n        }\n        else if (util_1.isString(container)) {\n            // 用户传入的 id, 作为 container\n            container = document.getElementById(container);\n            this.set('container', container);\n        } // else container 是 DOM\n        if (!this.get('parent')) {\n            this.set('parent', container.parentNode);\n        }\n    };\n    // 样式需要进行合并，不能单纯的替换，否则使用非常不方便\n    HtmlComponent.prototype.resetStyles = function () {\n        var style = this.get('domStyles');\n        var defaultStyles = this.get('defaultStyles');\n        if (!style) {\n            style = defaultStyles;\n        }\n        else {\n            style = util_1.deepMix({}, defaultStyles, style);\n        }\n        this.set('domStyles', style);\n    };\n    // 应用所有的样式\n    HtmlComponent.prototype.applyStyles = function () {\n        var domStyles = this.get('domStyles');\n        if (!domStyles) {\n            return;\n        }\n        var container = this.getContainer();\n        this.applyChildrenStyles(container, domStyles);\n        var containerClassName = this.get('containerClassName');\n        if (containerClassName && util_2.hasClass(container, containerClassName)) {\n            var containerCss = domStyles[containerClassName];\n            dom_util_1.modifyCSS(container, containerCss);\n        }\n    };\n    HtmlComponent.prototype.applyChildrenStyles = function (element, styles) {\n        util_1.each(styles, function (style, name) {\n            var elements = element.getElementsByClassName(name);\n            util_1.each(elements, function (el) {\n                dom_util_1.modifyCSS(el, style);\n            });\n        });\n    };\n    // 应用到单个 DOM\n    HtmlComponent.prototype.applyStyle = function (cssName, dom) {\n        var domStyles = this.get('domStyles');\n        dom_util_1.modifyCSS(dom, domStyles[cssName]);\n    };\n    /**\n     * @protected\n     */\n    HtmlComponent.prototype.createDom = function () {\n        var containerTpl = this.get('containerTpl');\n        return dom_util_1.createDom(containerTpl);\n    };\n    /**\n     * @protected\n     * 初始化事件\n     */\n    HtmlComponent.prototype.initEvent = function () { };\n    /**\n     * @protected\n     * 清理 DOM\n     */\n    HtmlComponent.prototype.removeDom = function () {\n        var container = this.get('container');\n        container && container.parentNode.removeChild(container);\n    };\n    /**\n     * @protected\n     * 清理事件\n     */\n    HtmlComponent.prototype.removeEvent = function () { };\n    HtmlComponent.prototype.updateInner = function (cfg) {\n        // 更新样式\n        if (util_1.hasKey(cfg, 'domStyles')) {\n            this.resetStyles();\n            this.applyStyles();\n        }\n        // 只要属性发生变化，都调整一些位置\n        this.resetPosition();\n    };\n    HtmlComponent.prototype.resetPosition = function () { };\n    ;\n    return HtmlComponent;\n}(component_1.default));\nexports.default = HtmlComponent;\n//# sourceMappingURL=html-component.js.map","var _a;\nimport Theme from '../util/theme';\n// tooltip 相关 dom 的 css 类名\nimport * as CssConst from './css-const';\nexport default (_a = {},\n    // css style for tooltip\n    _a[\"\" + CssConst.CONTAINER_CLASS] = {\n        position: 'relative'\n    },\n    _a[\"\" + CssConst.CROSSHAIR_LINE] = {\n        position: 'absolute',\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\n    },\n    _a[\"\" + CssConst.CROSSHAIR_TEXT] = {\n        position: 'absolute',\n        color: Theme.textColor,\n        fontFamily: Theme.fontFamily,\n    },\n    _a);\n//# sourceMappingURL=html-theme.js.map","export var CONTAINER_CLASS = 'g2-crosshair';\nexport var CROSSHAIR_LINE = CONTAINER_CLASS + \"-line\";\nexport var CROSSHAIR_TEXT = CONTAINER_CLASS + \"-text\";\n//# sourceMappingURL=css-const.js.map","import { __assign, __extends } from \"tslib\";\nimport { createDom, modifyCSS } from '@antv/dom-util';\nimport { substitute, hasKey } from '@antv/util';\nimport { toPx, getTextPoint } from '../util/util';\nimport HtmlComponent from '../abstract/html-component';\nimport * as CssConst from './css-const';\nimport HtmlTheme from './html-theme';\nvar HtmlCrosshair = /** @class */ (function (_super) {\n    __extends(HtmlCrosshair, _super);\n    function HtmlCrosshair() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HtmlCrosshair.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'crosshair', type: 'html', locationType: 'region', start: { x: 0, y: 0 }, end: { x: 0, y: 0 }, capture: false, text: null, containerTpl: \"<div class=\\\"\" + CssConst.CONTAINER_CLASS + \"\\\"></div>\", crosshairTpl: \"<div class=\\\"\" + CssConst.CROSSHAIR_LINE + \"\\\"></div>\", textTpl: \"<span class=\\\"\" + CssConst.CROSSHAIR_TEXT + \"\\\">{content}</span>\", domStyles: null, containerClassName: CssConst.CONTAINER_CLASS, defaultStyles: HtmlTheme, defaultCfg: {\n                text: {\n                    position: 'start',\n                    content: null,\n                    align: 'center',\n                    offset: 10\n                }\n            } });\n    };\n    HtmlCrosshair.prototype.render = function () {\n        this.resetText();\n        this.resetPosition();\n    };\n    // 绘制 crosshair\n    HtmlCrosshair.prototype.initCrossHair = function () {\n        var container = this.getContainer();\n        var crosshairTpl = this.get('crosshairTpl');\n        var crosshairEl = createDom(crosshairTpl);\n        container.appendChild(crosshairEl);\n        this.applyStyle(CssConst.CROSSHAIR_LINE, crosshairEl);\n        this.set('crosshairEl', crosshairEl);\n    };\n    // 获取文本的位置\n    HtmlCrosshair.prototype.getTextPoint = function () {\n        var _a = this.getLocation(), start = _a.start, end = _a.end;\n        var _b = this.get('text'), position = _b.position, offset = _b.offset;\n        return getTextPoint(start, end, position, offset);\n    };\n    // 设置 text\n    HtmlCrosshair.prototype.resetText = function () {\n        var text = this.get('text');\n        var textEl = this.get('textEl');\n        if (text) {\n            var content = text.content;\n            if (!textEl) {\n                var container = this.getContainer();\n                var textTpl = substitute(this.get('textTpl'), text);\n                textEl = createDom(textTpl);\n                container.appendChild(textEl);\n                this.applyStyle(CssConst.CROSSHAIR_TEXT, textEl);\n                this.set('textEl', textEl);\n            }\n            textEl.innerHTML = content;\n        }\n        else if (textEl) {\n            textEl.remove();\n        }\n    };\n    // 是否垂直\n    HtmlCrosshair.prototype.isVertical = function (start, end) {\n        return start.x === end.x;\n    };\n    // 重新调整位置\n    HtmlCrosshair.prototype.resetPosition = function () {\n        var crosshairEl = this.get('crosshairEl');\n        if (!crosshairEl) {\n            this.initCrossHair();\n            crosshairEl = this.get('crosshairEl');\n        }\n        var start = this.get('start');\n        var end = this.get('end');\n        var minX = Math.min(start.x, end.x);\n        var minY = Math.min(start.y, end.y);\n        if (this.isVertical(start, end)) {\n            modifyCSS(crosshairEl, {\n                width: '1px',\n                height: toPx(Math.abs(end.y - start.y))\n            });\n        }\n        else {\n            modifyCSS(crosshairEl, {\n                height: '1px',\n                width: toPx(Math.abs(end.x - start.x))\n            });\n        }\n        modifyCSS(crosshairEl, {\n            top: toPx(minY),\n            left: toPx(minX)\n        });\n        this.alignText();\n    };\n    HtmlCrosshair.prototype.alignText = function () {\n        // 重新设置 text 位置\n        var textEl = this.get('textEl');\n        if (textEl) {\n            var align = this.get('text').align;\n            var clientWidth = textEl.clientWidth;\n            var point = this.getTextPoint();\n            switch (align) {\n                case 'center':\n                    point.x = point.x - clientWidth / 2;\n                    break;\n                case 'right':\n                    point.x = point.x - clientWidth;\n                case 'left':\n                    break;\n            }\n            modifyCSS(textEl, {\n                top: toPx(point.y),\n                left: toPx(point.x)\n            });\n        }\n    };\n    HtmlCrosshair.prototype.updateInner = function (cfg) {\n        if (hasKey(cfg, 'text')) {\n            this.resetText();\n        }\n        _super.prototype.updateInner.call(this, cfg);\n    };\n    return HtmlCrosshair;\n}(HtmlComponent));\nexport default HtmlCrosshair;\n//# sourceMappingURL=html.js.map","import { __assign, __extends } from \"tslib\";\nimport { each, isString, mix } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport Theme from '../util/theme';\nvar GridBase = /** @class */ (function (_super) {\n    __extends(GridBase, _super);\n    function GridBase() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GridBase.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'grid', line: {}, alternateColor: null, capture: false, items: [], closed: false, defaultCfg: {\n                line: {\n                    type: 'line',\n                    style: {\n                        lineWidth: 1,\n                        stroke: Theme.lineColor,\n                    },\n                },\n            } });\n    };\n    /**\n     * 获取栅格线的类型\n     * @return {string} 栅格线类型\n     */\n    GridBase.prototype.getLineType = function () {\n        var line = this.get('line') || this.get('defaultCfg').line;\n        return line.type;\n    };\n    GridBase.prototype.renderInner = function (group) {\n        this.drawGrid(group);\n    };\n    GridBase.prototype.getAlternatePath = function (prePoints, points) {\n        var regionPath = this.getGridPath(prePoints);\n        var reversePoints = points.slice(0).reverse();\n        var nextPath = this.getGridPath(reversePoints, true);\n        var closed = this.get('closed');\n        if (closed) {\n            regionPath = regionPath.concat(nextPath);\n        }\n        else {\n            nextPath[0][0] = 'L'; // 更新第一个节点\n            regionPath = regionPath.concat(nextPath);\n            regionPath.push(['Z']);\n        }\n        return regionPath;\n    };\n    // 获取路径的配置项\n    GridBase.prototype.getPathStyle = function () {\n        return this.get('line').style;\n    };\n    // 绘制栅格\n    GridBase.prototype.drawGrid = function (group) {\n        var _this = this;\n        var line = this.get('line');\n        var items = this.get('items');\n        var alternateColor = this.get('alternateColor');\n        var preItem = null;\n        each(items, function (item, index) {\n            var id = item.id || index;\n            // 绘制栅格线\n            if (line) {\n                var style = _this.getPathStyle();\n                var lineId = _this.getElementId(\"line-\" + id);\n                var gridPath = _this.getGridPath(item.points);\n                _this.addShape(group, {\n                    type: 'path',\n                    name: 'grid-line',\n                    id: lineId,\n                    attrs: mix({\n                        path: gridPath,\n                    }, style),\n                });\n            }\n            // 如果存在 alternateColor 则绘制矩形\n            // 从第二个栅格线开始绘制\n            if (alternateColor && index > 0) {\n                var regionId = _this.getElementId(\"region-\" + id);\n                var isEven = index % 2 === 0;\n                if (isString(alternateColor)) {\n                    // 如果颜色是单值，则是仅绘制偶数时的区域\n                    if (isEven) {\n                        _this.drawAlternateRegion(regionId, group, preItem.points, item.points, alternateColor);\n                    }\n                }\n                else {\n                    var color = isEven ? alternateColor[1] : alternateColor[0];\n                    _this.drawAlternateRegion(regionId, group, preItem.points, item.points, color);\n                }\n            }\n            preItem = item;\n        });\n    };\n    // 绘制栅格线间的间隔\n    GridBase.prototype.drawAlternateRegion = function (id, group, prePoints, points, color) {\n        var regionPath = this.getAlternatePath(prePoints, points);\n        this.addShape(group, {\n            type: 'path',\n            id: id,\n            name: 'grid-region',\n            attrs: {\n                path: regionPath,\n                fill: color,\n            },\n        });\n    };\n    return GridBase;\n}(GroupComponent));\nexport default GridBase;\n//# sourceMappingURL=base.js.map","import { __assign, __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport GridBase from './base';\nfunction distance(x1, y1, x2, y2) {\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    return Math.sqrt(dx * dx + dy * dy);\n}\nvar Circle = /** @class */ (function (_super) {\n    __extends(Circle, _super);\n    function Circle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Circle.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { type: 'circle', \n            /**\n             * 中心点\n             * @type {object}\n             */\n            center: null, \n            /**\n             * 栅格线是否封闭\n             * @type {true}\n             */\n            closed: true });\n    };\n    Circle.prototype.getGridPath = function (points, reversed) {\n        var lineType = this.getLineType();\n        var closed = this.get('closed');\n        var path = [];\n        if (points.length) {\n            // 防止出错\n            if (lineType === 'circle') {\n                var center = this.get('center');\n                var firstPoint = points[0];\n                var radius_1 = distance(center.x, center.y, firstPoint.x, firstPoint.y);\n                var sweepFlag_1 = reversed ? 0 : 1; // 顺时针还是逆时针\n                if (closed) {\n                    // 封闭时，绘制整个圆\n                    path.push(['M', center.x, center.y - radius_1]);\n                    path.push(['A', radius_1, radius_1, 0, 0, sweepFlag_1, center.x, center.y + radius_1]);\n                    path.push(['A', radius_1, radius_1, 0, 0, sweepFlag_1, center.x, center.y - radius_1]);\n                    path.push(['Z']);\n                }\n                else {\n                    each(points, function (point, index) {\n                        if (index === 0) {\n                            path.push(['M', point.x, point.y]);\n                        }\n                        else {\n                            path.push(['A', radius_1, radius_1, 0, 0, sweepFlag_1, point.x, point.y]);\n                        }\n                    });\n                }\n            }\n            else {\n                each(points, function (point, index) {\n                    if (index === 0) {\n                        path.push(['M', point.x, point.y]);\n                    }\n                    else {\n                        path.push(['L', point.x, point.y]);\n                    }\n                });\n                if (closed) {\n                    path.push(['Z']);\n                }\n            }\n        }\n        return path;\n    };\n    return Circle;\n}(GridBase));\nexport default Circle;\n//# sourceMappingURL=circle.js.map","import { __assign, __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport GridBase from './base';\nvar Line = /** @class */ (function (_super) {\n    __extends(Line, _super);\n    function Line() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Line.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { type: 'line' });\n    };\n    Line.prototype.getGridPath = function (points) {\n        var path = [];\n        each(points, function (point, index) {\n            if (index === 0) {\n                path.push(['M', point.x, point.y]);\n            }\n            else {\n                path.push(['L', point.x, point.y]);\n            }\n        });\n        return path;\n    };\n    return Line;\n}(GridBase));\nexport default Line;\n//# sourceMappingURL=line.js.map","import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport { createBBox, formatPadding } from '../util/util';\nvar LegendBase = /** @class */ (function (_super) {\n    __extends(LegendBase, _super);\n    function LegendBase() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LegendBase.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'legend', \n            /**\n             * 布局方式： horizontal，vertical\n             * @type {String}\n             */\n            layout: 'horizontal', locationType: 'point', x: 0, y: 0, offsetX: 0, offsetY: 0, title: null, background: null });\n    };\n    LegendBase.prototype.getLayoutBBox = function () {\n        var bbox = _super.prototype.getLayoutBBox.call(this);\n        var x = this.get('x');\n        var y = this.get('y');\n        var offsetX = this.get('offsetX');\n        var offsetY = this.get('offsetY');\n        var maxWidth = this.get('maxWidth');\n        var maxHeight = this.get('maxHeight');\n        var minX = x + offsetX;\n        var minY = y + offsetY;\n        var width = bbox.maxX - minX;\n        var height = bbox.maxY - minY;\n        if (maxWidth) {\n            width = Math.min(width, maxWidth);\n        }\n        if (maxHeight) {\n            height = Math.min(height, maxHeight);\n        }\n        return createBBox(minX, minY, width, height);\n    };\n    LegendBase.prototype.setLocation = function (cfg) {\n        this.set('x', cfg.x);\n        this.set('y', cfg.y);\n        this.resetLocation();\n    };\n    LegendBase.prototype.resetLocation = function () {\n        var x = this.get('x');\n        var y = this.get('y');\n        var offsetX = this.get('offsetX');\n        var offsetY = this.get('offsetY');\n        this.moveElementTo(this.get('group'), {\n            x: x + offsetX,\n            y: y + offsetY,\n        });\n    };\n    LegendBase.prototype.applyOffset = function () {\n        this.resetLocation();\n    };\n    // 获取当前绘制的点\n    LegendBase.prototype.getDrawPoint = function () {\n        return this.get('currentPoint');\n    };\n    LegendBase.prototype.setDrawPoint = function (point) {\n        return this.set('currentPoint', point);\n    };\n    // 复写父类定义的绘制方法\n    LegendBase.prototype.renderInner = function (group) {\n        this.resetDraw();\n        if (this.get('title')) {\n            this.drawTitle(group);\n        }\n        this.drawLegendContent(group);\n        if (this.get('background')) {\n            this.drawBackground(group);\n        }\n        // this.resetLocation(); // 在顶层已经在处理偏移时一起处理了\n    };\n    // 绘制背景\n    LegendBase.prototype.drawBackground = function (group) {\n        var background = this.get('background');\n        var bbox = group.getBBox();\n        var padding = formatPadding(background.padding);\n        var attrs = __assign({ \n            // 背景从 (0,0) 开始绘制\n            x: 0, y: 0, width: bbox.width + padding[1] + padding[3], height: bbox.height + padding[0] + padding[2] }, background.style);\n        var backgroundShape = this.addShape(group, {\n            type: 'rect',\n            id: this.getElementId('background'),\n            name: 'legend-background',\n            attrs: attrs,\n        });\n        backgroundShape.toBack();\n    };\n    // 绘制标题，标题在图例项的上面\n    LegendBase.prototype.drawTitle = function (group) {\n        var currentPoint = this.get('currentPoint');\n        var titleCfg = this.get('title');\n        var spacing = titleCfg.spacing, style = titleCfg.style, text = titleCfg.text;\n        var shape = this.addShape(group, {\n            type: 'text',\n            id: this.getElementId('title'),\n            name: 'legend-title',\n            attrs: __assign({ text: text, x: currentPoint.x, y: currentPoint.y }, style),\n        });\n        var bbox = shape.getBBox();\n        // 标题单独在一行\n        this.set('currentPoint', { x: currentPoint.x, y: bbox.maxY + spacing });\n    };\n    // 重置绘制时开始的位置，如果绘制边框，考虑边框的 padding\n    LegendBase.prototype.resetDraw = function () {\n        var background = this.get('background');\n        var currentPoint = { x: 0, y: 0 };\n        if (background) {\n            var padding = formatPadding(background.padding);\n            currentPoint.x = padding[3]; // 左边 padding\n            currentPoint.y = padding[0]; // 上面 padding\n        }\n        this.set('currentPoint', currentPoint); // 设置绘制的初始位置\n    };\n    return LegendBase;\n}(GroupComponent));\nexport default LegendBase;\n//# sourceMappingURL=base.js.map","import { __assign, __extends } from \"tslib\";\nimport { each, filter, get, mix } from '@antv/util';\nimport { getMatrixByAngle, getMatrixByTranslate } from '../util/matrix';\nimport { getStatesStyle } from '../util/state';\nimport Theme from '../util/theme';\nimport LegendBase from './base';\nvar Category = /** @class */ (function (_super) {\n    __extends(Category, _super);\n    function Category() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.currentPageIndex = 1;\n        _this.totalPagesCnt = 1;\n        _this.pageWidth = 0;\n        _this.pageHeight = 0;\n        _this.startX = 0;\n        _this.startY = 0;\n        _this.onNavigationBack = function () {\n            var itemGroup = _this.getElementByLocalId('item-group');\n            if (_this.currentPageIndex > 1) {\n                _this.currentPageIndex -= 1;\n                _this.updateNavigation();\n                var matrix = _this.getCurrentNavigationMatrix();\n                if (_this.get('animate')) {\n                    itemGroup.animate({\n                        matrix: matrix,\n                    }, 100);\n                }\n                else {\n                    itemGroup.attr({ matrix: matrix });\n                }\n            }\n        };\n        _this.onNavigationAfter = function () {\n            var itemGroup = _this.getElementByLocalId('item-group');\n            if (_this.currentPageIndex < _this.totalPagesCnt) {\n                _this.currentPageIndex += 1;\n                _this.updateNavigation();\n                var matrix = _this.getCurrentNavigationMatrix();\n                if (_this.get('animate')) {\n                    itemGroup.animate({\n                        matrix: matrix,\n                    }, 100);\n                }\n                else {\n                    itemGroup.attr({ matrix: matrix });\n                }\n            }\n        };\n        return _this;\n    }\n    Category.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'legend', type: 'category', itemSpacing: 24, itemWidth: null, itemHeight: null, itemName: {}, itemValue: null, maxWidth: null, maxHeight: null, marker: {}, items: [], itemStates: {}, itemBackground: {}, defaultCfg: {\n                title: {\n                    spacing: 5,\n                    style: {\n                        fill: Theme.textColor,\n                        fontSize: 12,\n                        textAlign: 'start',\n                        textBaseline: 'top',\n                    },\n                },\n                background: {\n                    padding: 5,\n                    style: {\n                        stroke: Theme.lineColor,\n                    },\n                },\n                itemBackground: {\n                    style: {\n                        opacity: 0,\n                        fill: '#fff',\n                    },\n                },\n                itemName: {\n                    spacing: 16,\n                    style: {\n                        fill: Theme.textColor,\n                        fontSize: 12,\n                        textAlign: 'start',\n                        textBaseline: 'middle',\n                    },\n                },\n                marker: {\n                    spacing: 8,\n                    style: {\n                        r: 6,\n                        symbol: 'circle',\n                    },\n                },\n                itemValue: {\n                    alignRight: false,\n                    formatter: null,\n                    style: {\n                        fill: Theme.textColor,\n                        fontSize: 12,\n                        textAlign: 'start',\n                        textBaseline: 'middle',\n                    },\n                },\n                itemStates: {\n                    active: {\n                        nameStyle: {\n                            opacity: 0.8,\n                        },\n                    },\n                    unchecked: {\n                        nameStyle: {\n                            fill: Theme.uncheckedColor,\n                        },\n                        markerStyle: {\n                            fill: Theme.uncheckedColor,\n                            stroke: Theme.uncheckedColor,\n                        },\n                    },\n                    inactive: {\n                        nameStyle: {\n                            fill: Theme.uncheckedColor,\n                        },\n                        markerStyle: {\n                            opacity: 0.2,\n                        },\n                    },\n                },\n            } });\n    };\n    // 实现 IList 接口\n    Category.prototype.isList = function () {\n        return true;\n    };\n    /**\n     * 获取图例项\n     * @return {ListItem[]} 列表项集合\n     */\n    Category.prototype.getItems = function () {\n        return this.get('items');\n    };\n    /**\n     * 设置列表项\n     * @param {ListItem[]} items 列表项集合\n     */\n    Category.prototype.setItems = function (items) {\n        this.update({\n            items: items,\n        });\n    };\n    /**\n     * 更新列表项\n     * @param {ListItem} item 列表项\n     * @param {object}   cfg  列表项\n     */\n    Category.prototype.updateItem = function (item, cfg) {\n        mix(item, cfg);\n        this.clear(); // 由于单个图例项变化，会引起全局变化，所以全部更新\n        this.render();\n    };\n    /**\n     * 清空列表\n     */\n    Category.prototype.clearItems = function () {\n        var itemGroup = this.getElementByLocalId('item-group');\n        itemGroup && itemGroup.clear();\n    };\n    /**\n     * 设置列表项的状态\n     * @param {ListItem} item  列表项\n     * @param {string}   state 状态名\n     * @param {boolean}  value 状态值, true, false\n     */\n    Category.prototype.setItemState = function (item, state, value) {\n        item[state] = value;\n        var itemElement = this.getElementByLocalId(\"item-\" + item.id);\n        if (itemElement) {\n            var items = this.getItems();\n            var index = items.indexOf(item);\n            var offsetGroup = this.createOffScreenGroup(); // 离屏的 group\n            var newElement = this.drawItem(item, index, this.getItemHeight(), offsetGroup);\n            this.updateElements(newElement, itemElement); // 更新整个分组\n            this.clearUpdateStatus(itemElement); // 清理更新状态，防止出现 bug\n        }\n    };\n    /**\n     * 是否存在指定的状态\n     * @param {ListItem} item  列表项\n     * @param {boolean} state 状态名\n     */\n    Category.prototype.hasState = function (item, state) {\n        return !!item[state];\n    };\n    Category.prototype.getItemStates = function (item) {\n        var itemStates = this.get('itemStates');\n        var rst = [];\n        each(itemStates, function (v, k) {\n            if (item[k]) {\n                // item.selected\n                rst.push(k);\n            }\n        });\n        return rst;\n    };\n    /**\n     * 清楚所有列表项的状态\n     * @param {string} state 状态值\n     */\n    Category.prototype.clearItemsState = function (state) {\n        var _this = this;\n        var items = this.getItemsByState(state);\n        each(items, function (item) {\n            _this.setItemState(item, state, false);\n        });\n    };\n    /**\n     * 根据状态获取图例项\n     * @param  {string}     state [description]\n     * @return {ListItem[]}       [description]\n     */\n    Category.prototype.getItemsByState = function (state) {\n        var _this = this;\n        var items = this.getItems();\n        return filter(items, function (item) {\n            return _this.hasState(item, state);\n        });\n    };\n    // 绘制 legend 的选项\n    Category.prototype.drawLegendContent = function (group) {\n        this.processItems();\n        this.drawItems(group);\n    };\n    // 防止未设置 id\n    Category.prototype.processItems = function () {\n        var items = this.get('items');\n        each(items, function (item) {\n            if (!item.id) {\n                // 如果没有设置 id，默认使用 name\n                item.id = item.name;\n            }\n        });\n    };\n    // 绘制所有的图例选项\n    Category.prototype.drawItems = function (group) {\n        var _this = this;\n        var itemContainerGroup = this.addGroup(group, {\n            id: this.getElementId('item-container-group'),\n            name: 'legend-item-container-group',\n        });\n        var itemGroup = this.addGroup(itemContainerGroup, {\n            id: this.getElementId('item-group'),\n            name: 'legend-item-group',\n        });\n        var itemHeight = this.getItemHeight();\n        var itemWidth = this.get('itemWidth');\n        var itemSpacing = this.get('itemSpacing');\n        var currentPoint = this.get('currentPoint');\n        var startX = currentPoint.x;\n        var startY = currentPoint.y;\n        var layout = this.get('layout');\n        var items = this.get('items');\n        var wrapped = false;\n        var pageWidth = 0;\n        var maxWidth = this.get('maxWidth'); // 最大宽度，会导致 layout : 'horizontal' 时自动换行\n        var maxHeight = this.get('maxHeight'); // 最大高度，会导致出现分页\n        // 暂时不考虑分页\n        each(items, function (item, index) {\n            var subGroup = _this.drawItem(item, index, itemHeight, itemGroup);\n            var bbox = subGroup.getBBox();\n            var width = itemWidth || bbox.width;\n            if (width > pageWidth) {\n                pageWidth = width;\n            }\n            if (layout === 'horizontal') {\n                // 如果水平布局\n                if (maxWidth && maxWidth < currentPoint.x + width - startX) {\n                    // 检测是否换行\n                    wrapped = true;\n                    currentPoint.x = startX;\n                    currentPoint.y += itemHeight;\n                }\n                _this.moveElementTo(subGroup, currentPoint);\n                currentPoint.x += width + itemSpacing;\n            }\n            else {\n                // 如果垂直布局\n                if (maxHeight && maxHeight < currentPoint.y + itemHeight - startY) {\n                    // 换行\n                    wrapped = true;\n                    currentPoint.x += pageWidth + itemSpacing;\n                    currentPoint.y = startY;\n                    pageWidth = 0;\n                }\n                _this.moveElementTo(subGroup, currentPoint);\n                currentPoint.y += itemHeight; // itemSpacing 仅影响水平间距\n            }\n        });\n        if (wrapped && this.get('flipPage')) {\n            this.pageHeight = 0;\n            this.pageWidth = 0;\n            this.totalPagesCnt = 1;\n            this.startX = startX;\n            this.startY = startY;\n            this.adjustNavigation(group, itemGroup);\n        }\n    };\n    // 获取图例项的高度，如果未定义，则按照 name 的高度计算\n    Category.prototype.getItemHeight = function () {\n        var itemHeight = this.get('itemHeight');\n        if (!itemHeight) {\n            var nameCfg = this.get('itemName');\n            if (nameCfg) {\n                itemHeight = nameCfg.style.fontSize + 8;\n            }\n        }\n        return itemHeight;\n    };\n    // 绘制 marker\n    Category.prototype.drawMarker = function (container, markerCfg, item, itemHeight) {\n        var markerAttrs = __assign(__assign(__assign({ x: 0, y: itemHeight / 2 }, markerCfg.style), { symbol: get(item.marker, 'symbol', 'circle') }), get(item.marker, 'style', {}));\n        var shape = this.addShape(container, {\n            type: 'marker',\n            id: this.getElementId(\"item-\" + item.id + \"-marker\"),\n            name: 'legend-item-marker',\n            attrs: markerAttrs,\n        });\n        var bbox = shape.getBBox();\n        shape.attr('x', bbox.width / 2); // marker 需要左对齐，所以不能占用左侧的空间\n        var _a = shape.attr(), stroke = _a.stroke, fill = _a.fill;\n        if (stroke) {\n            shape.set('isStroke', true);\n        }\n        if (fill) {\n            shape.set('isFill', true);\n        }\n        return shape;\n    };\n    // 绘制文本\n    Category.prototype.drawItemText = function (container, textName, cfg, item, itemHeight, xPosition, index) {\n        var formatter = cfg.formatter;\n        var attrs = __assign({ x: xPosition, y: itemHeight / 2, text: formatter ? formatter(item[textName], item, index) : item[textName] }, cfg.style);\n        return this.addShape(container, {\n            type: 'text',\n            id: this.getElementId(\"item-\" + item.id + \"-\" + textName),\n            name: \"legend-item-\" + textName,\n            attrs: attrs,\n        });\n    };\n    // 绘制图例项\n    Category.prototype.drawItem = function (item, index, itemHeight, itemGroup) {\n        var groupId = \"item-\" + item.id;\n        var subGroup = this.addGroup(itemGroup, {\n            name: 'legend-item',\n            id: this.getElementId(groupId),\n            delegateObject: {\n                item: item,\n                index: index,\n            },\n        });\n        var marker = this.get('marker');\n        var itemName = this.get('itemName');\n        var itemValue = this.get('itemValue');\n        var itemBackground = this.get('itemBackground');\n        var curX = 0; // 记录当前 x 的位置\n        if (marker) {\n            var markerShape = this.drawMarker(subGroup, marker, item, itemHeight);\n            curX = markerShape.getBBox().maxX + marker.spacing;\n        }\n        if (itemName) {\n            var nameShape = this.drawItemText(subGroup, 'name', itemName, item, itemHeight, curX, index);\n            curX = nameShape.getBBox().maxX + itemName.spacing;\n        }\n        if (itemValue) {\n            var valueShape = this.drawItemText(subGroup, 'value', itemValue, item, itemHeight, curX, index);\n            var itemWidth = this.get('itemWidth');\n            if (itemWidth && itemValue.alignRight) {\n                // 当文本右对齐，同时制定了列宽度时，调整文本位置和对齐方式\n                valueShape.attr({\n                    textAlign: 'right',\n                    x: itemWidth,\n                });\n            } // 如果考虑 value 和 name 的覆盖，这个地方需要做文本自动省略的功能\n        }\n        // 添加透明的背景，便于拾取和包围盒计算\n        if (itemBackground) {\n            var bbox = subGroup.getBBox();\n            var backShape = this.addShape(subGroup, {\n                type: 'rect',\n                name: 'legend-item-background',\n                id: this.getElementId(groupId + \"-background\"),\n                attrs: __assign({ x: 0, y: 0, width: bbox.width, height: itemHeight }, itemBackground.style),\n            });\n            backShape.toBack();\n        }\n        this.applyItemStates(item, subGroup);\n        return subGroup;\n    };\n    // 加上分页器并重新排序 items\n    Category.prototype.adjustNavigation = function (container, itemGroup) {\n        var _this = this;\n        var startX = this.startX;\n        var startY = this.startY;\n        var layout = this.get('layout');\n        var subGroups = itemGroup.findAll(function (item) { return item.get('name') === 'legend-item'; });\n        var maxWidth = this.get('maxWidth');\n        var maxHeight = this.get('maxHeight');\n        var itemWidth = this.get('itemWidth');\n        var itemSpacing = this.get('itemSpacing');\n        var itemHeight = this.getItemHeight();\n        var navigation = this.drawNavigation(container, layout, '00/00', 12);\n        var navigationBBox = navigation.getBBox();\n        var currentPoint = { x: startX, y: startY };\n        var pages = 1;\n        var widthLimit = 0;\n        var pageWidth = 0;\n        var maxItemWidth = 0;\n        if (layout === 'horizontal') {\n            this.pageHeight = itemHeight;\n            each(subGroups, function (item) {\n                var bbox = item.getBBox();\n                var width = itemWidth || bbox.width;\n                if ((widthLimit && widthLimit < currentPoint.x + width + itemSpacing) ||\n                    maxWidth < currentPoint.x + width + itemSpacing + navigationBBox.width) {\n                    if (pages === 1) {\n                        widthLimit = currentPoint.x + itemSpacing;\n                        _this.pageWidth = widthLimit;\n                        _this.moveElementTo(navigation, {\n                            x: maxWidth - itemSpacing - navigationBBox.width - navigationBBox.minX,\n                            y: currentPoint.y + itemHeight / 2 - navigationBBox.height / 2 - navigationBBox.minY,\n                        });\n                    }\n                    pages += 1;\n                    currentPoint.x = startX;\n                    currentPoint.y += itemHeight;\n                }\n                _this.moveElementTo(item, currentPoint);\n                currentPoint.x += width + itemSpacing;\n            });\n        }\n        else {\n            each(subGroups, function (item) {\n                var bbox = item.getBBox();\n                if (bbox.width > pageWidth) {\n                    pageWidth = bbox.width;\n                }\n            });\n            maxItemWidth = pageWidth;\n            pageWidth += itemSpacing;\n            if (maxWidth) {\n                // maxWidth 限制加上\n                pageWidth = Math.min(maxWidth, pageWidth);\n                maxItemWidth = Math.min(maxWidth, maxItemWidth);\n            }\n            this.pageWidth = pageWidth;\n            this.pageHeight = maxHeight - Math.max(navigationBBox.height, itemHeight);\n            var cntPerPage_1 = Math.floor(this.pageHeight / itemHeight);\n            each(subGroups, function (item, index) {\n                if (index !== 0 && index % cntPerPage_1 === 0) {\n                    pages += 1;\n                    currentPoint.x += pageWidth;\n                    currentPoint.y = startY;\n                }\n                _this.moveElementTo(item, currentPoint);\n                // item.setClip({\n                //   type: 'rect',\n                //   attrs: {\n                //     x: currentPoint.x,\n                //     y: currentPoint.y,\n                //     width: pageWidth,\n                //     height: itemHeight,\n                //   },\n                // });\n                currentPoint.y += itemHeight;\n            });\n            this.totalPagesCnt = pages;\n            this.moveElementTo(navigation, {\n                x: startX + maxItemWidth / 2 - navigationBBox.width / 2 - navigationBBox.minX,\n                y: maxHeight - navigationBBox.height - navigationBBox.minY,\n            });\n        }\n        if (this.pageHeight && this.pageWidth) {\n            // 为了使固定的 clip 生效，clip 设置在 itemContainerGroup 上，itemGroup 需要在翻页时会设置 matrix\n            itemGroup.getParent().setClip({\n                type: 'rect',\n                attrs: {\n                    x: this.startX,\n                    y: this.startY,\n                    width: this.pageWidth,\n                    height: this.pageHeight,\n                },\n            });\n        }\n        this.totalPagesCnt = pages;\n        if (this.currentPageIndex > this.totalPagesCnt) {\n            this.currentPageIndex = 1;\n        }\n        this.updateNavigation(navigation);\n        // update initial matrix\n        itemGroup.attr('matrix', this.getCurrentNavigationMatrix());\n    };\n    Category.prototype.drawNavigation = function (group, layout, text, size) {\n        var currentPoint = { x: 0, y: 0 };\n        var subGroup = this.addGroup(group, {\n            id: this.getElementId('navigation-group'),\n            name: 'legend-navigation',\n        });\n        var leftArrow = this.drawArrow(subGroup, currentPoint, 'navigation-arrow-left', layout === 'horizontal' ? 'up' : 'left', size);\n        leftArrow.on('click', this.onNavigationBack);\n        var leftArrowBBox = leftArrow.getBBox();\n        currentPoint.x += leftArrowBBox.width + 2;\n        var textShape = this.addShape(subGroup, {\n            type: 'text',\n            id: this.getElementId('navigation-text'),\n            name: 'navigation-text',\n            attrs: {\n                x: currentPoint.x,\n                y: currentPoint.y + size / 2,\n                text: text,\n                fontSize: 12,\n                fill: '#ccc',\n                textBaseline: 'middle',\n            },\n        });\n        var textBBox = textShape.getBBox();\n        currentPoint.x += textBBox.width + 2;\n        var rightArrow = this.drawArrow(subGroup, currentPoint, 'navigation-arrow-right', layout === 'horizontal' ? 'down' : 'right', size);\n        rightArrow.on('click', this.onNavigationAfter);\n        return subGroup;\n    };\n    Category.prototype.updateNavigation = function (navigation) {\n        var text = this.currentPageIndex + \"/\" + this.totalPagesCnt;\n        var textShape = navigation ? navigation.getChildren()[1] : this.getElementByLocalId('navigation-text');\n        var leftArrow = navigation\n            ? navigation.findById(this.getElementId('navigation-arrow-left'))\n            : this.getElementByLocalId('navigation-arrow-left');\n        var rightArrow = navigation\n            ? navigation.findById(this.getElementId('navigation-arrow-right'))\n            : this.getElementByLocalId('navigation-arrow-right');\n        var origBBox = textShape.getBBox();\n        textShape.attr('text', text);\n        var newBBox = textShape.getBBox();\n        textShape.attr('x', textShape.attr('x') - (newBBox.width - origBBox.width) / 2);\n        leftArrow.attr('opacity', this.currentPageIndex === 1 ? 0.45 : 1);\n        leftArrow.attr('cursor', this.currentPageIndex === 1 ? 'not-allowed' : 'pointer');\n        rightArrow.attr('opacity', this.currentPageIndex === this.totalPagesCnt ? 0.45 : 1);\n        rightArrow.attr('cursor', this.currentPageIndex === this.totalPagesCnt ? 'not-allowed' : 'pointer');\n    };\n    Category.prototype.drawArrow = function (group, currentPoint, name, direction, size) {\n        var x = currentPoint.x, y = currentPoint.y;\n        var rotateMap = {\n            right: (90 * Math.PI) / 180,\n            left: ((360 - 90) * Math.PI) / 180,\n            up: 0,\n            down: (180 * Math.PI) / 180,\n        };\n        var shape = this.addShape(group, {\n            type: 'path',\n            id: this.getElementId(name),\n            name: name,\n            attrs: {\n                path: [['M', x + size / 2, y], ['L', x, y + size], ['L', x + size, y + size], ['Z']],\n                fill: '#000',\n                cursor: 'pointer',\n            },\n        });\n        shape.attr('matrix', getMatrixByAngle({ x: x + size / 2, y: y + size / 2 }, rotateMap[direction]));\n        return shape;\n    };\n    Category.prototype.getCurrentNavigationMatrix = function () {\n        var _a = this, currentPageIndex = _a.currentPageIndex, pageWidth = _a.pageWidth, pageHeight = _a.pageHeight;\n        var layout = this.get('layout');\n        var translate = layout === 'horizontal'\n            ? {\n                x: 0,\n                y: pageHeight * (1 - currentPageIndex),\n            }\n            : {\n                x: pageWidth * (1 - currentPageIndex),\n                y: 0,\n            };\n        return getMatrixByTranslate(translate);\n    };\n    // 附加状态对应的样式\n    Category.prototype.applyItemStates = function (item, subGroup) {\n        var states = this.getItemStates(item);\n        var hasStates = states.length > 0;\n        if (hasStates) {\n            var children = subGroup.getChildren();\n            var itemStates_1 = this.get('itemStates');\n            each(children, function (element) {\n                var name = element.get('name');\n                var elName = name.split('-')[2]; // marker, name, value\n                var statesStyle = getStatesStyle(item, elName, itemStates_1);\n                if (statesStyle) {\n                    element.attr(statesStyle);\n                    if (elName === 'marker' && !(element.get('isStroke') && element.get('isFill'))) {\n                        // 如果 marker 是单填充或者单描边的话，就不要额外添加 stroke 或这 fill 属性，否则会影响 unchecked 后的显示\n                        if (element.get('isStroke')) {\n                            element.attr('fill', null);\n                        }\n                        if (element.get('isFill')) {\n                            element.attr('stroke', null);\n                        }\n                    }\n                }\n            });\n        }\n    };\n    return Category;\n}(LegendBase));\nexport default Category;\n//# sourceMappingURL=category.js.map","import { __assign, __extends } from \"tslib\";\nimport { clone, mix, upperFirst } from '@antv/util';\nimport Theme from '../util/theme';\nimport { getValueByPercent } from '../util/util';\nimport LegendBase from './base';\nvar HANDLER_HEIGHT_RATIO = 1.4;\nvar HANDLER_TRIANGLE_RATIO = 0.4;\nvar ContinueLegend = /** @class */ (function (_super) {\n    __extends(ContinueLegend, _super);\n    function ContinueLegend() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ContinueLegend.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { type: 'continue', min: 0, max: 100, value: null, colors: [], track: {}, rail: {}, label: {}, handler: {}, slidable: true, tip: null, step: null, maxWidth: null, maxHeight: null, defaultCfg: {\n                label: {\n                    align: 'rail',\n                    spacing: 5,\n                    formatter: null,\n                    style: {\n                        fontSize: 12,\n                        fill: Theme.textColor,\n                        textBaseline: 'middle',\n                        fontFamily: Theme.fontFamily,\n                    },\n                },\n                handler: {\n                    size: 10,\n                    style: {\n                        fill: '#fff',\n                        stroke: '#333',\n                    },\n                },\n                track: {},\n                rail: {\n                    type: 'color',\n                    size: 20,\n                    defaultLength: 100,\n                    style: {\n                        fill: '#DCDEE2',\n                    },\n                },\n                title: {\n                    spacing: 5,\n                    style: {\n                        fill: Theme.textColor,\n                        fontSize: 12,\n                        textAlign: 'start',\n                        textBaseline: 'top',\n                    },\n                },\n            } });\n    };\n    ContinueLegend.prototype.isSlider = function () {\n        return true;\n    };\n    // 实现 IList 接口\n    ContinueLegend.prototype.getValue = function () {\n        return this.getCurrentValue();\n    };\n    ContinueLegend.prototype.getRange = function () {\n        return {\n            min: this.get('min'),\n            max: this.get('max'),\n        };\n    };\n    // 改变 range\n    ContinueLegend.prototype.setRange = function (min, max) {\n        this.update({\n            min: min,\n            max: max,\n        });\n    };\n    ContinueLegend.prototype.setValue = function (value) {\n        var originValue = this.getValue();\n        this.set('value', value);\n        var group = this.get('group');\n        this.resetTrackClip();\n        if (this.get('slidable')) {\n            this.resetHandlers(group);\n        }\n        this.delegateEmit('valuechanged', {\n            originValue: originValue,\n            value: value,\n        });\n    };\n    ContinueLegend.prototype.initEvent = function () {\n        var group = this.get('group');\n        this.bindSliderEvent(group);\n        this.bindRailEvent(group);\n        this.bindTrackEvent(group);\n    };\n    ContinueLegend.prototype.drawLegendContent = function (group) {\n        this.drawRail(group);\n        this.drawLabels(group);\n        this.fixedElements(group); // 调整各个图形位置，适应宽高的限制\n        this.resetTrack(group);\n        this.resetTrackClip(group);\n        if (this.get('slidable')) {\n            this.resetHandlers(group);\n        }\n    };\n    ContinueLegend.prototype.bindSliderEvent = function (group) {\n        this.bindHandlersEvent(group);\n    };\n    ContinueLegend.prototype.bindHandlersEvent = function (group) {\n        var _this = this;\n        group.on('legend-handler-min:drag', function (ev) {\n            var minValue = _this.getValueByCanvasPoint(ev.x, ev.y);\n            var currentValue = _this.getCurrentValue();\n            var maxValue = currentValue[1];\n            if (maxValue < minValue) {\n                // 如果小于最小值，则调整最小值\n                maxValue = minValue;\n            }\n            _this.setValue([minValue, maxValue]);\n        });\n        group.on('legend-handler-max:drag', function (ev) {\n            var maxValue = _this.getValueByCanvasPoint(ev.x, ev.y);\n            var currentValue = _this.getCurrentValue();\n            var minValue = currentValue[0];\n            if (minValue > maxValue) {\n                // 如果小于最小值，则调整最小值\n                minValue = maxValue;\n            }\n            _this.setValue([minValue, maxValue]);\n        });\n    };\n    ContinueLegend.prototype.bindRailEvent = function (group) { };\n    ContinueLegend.prototype.bindTrackEvent = function (group) {\n        var _this = this;\n        var prePoint = null;\n        group.on('legend-track:dragstart', function (ev) {\n            prePoint = {\n                x: ev.x,\n                y: ev.y,\n            };\n        });\n        group.on('legend-track:drag', function (ev) {\n            if (!prePoint) {\n                return;\n            }\n            var preValue = _this.getValueByCanvasPoint(prePoint.x, prePoint.y);\n            var curValue = _this.getValueByCanvasPoint(ev.x, ev.y);\n            var currentValue = _this.getCurrentValue();\n            var curDiff = currentValue[1] - currentValue[0];\n            var range = _this.getRange();\n            var dValue = curValue - preValue;\n            if (dValue < 0) {\n                // 减小, 同时未出边界\n                if (currentValue[0] + dValue > range.min) {\n                    _this.setValue([currentValue[0] + dValue, currentValue[1] + dValue]);\n                }\n                else {\n                    _this.setValue([range.min, range.min + curDiff]);\n                }\n                //  && ||\n            }\n            else if (dValue > 0) {\n                if (dValue > 0 && currentValue[1] + dValue < range.max) {\n                    _this.setValue([currentValue[0] + dValue, currentValue[1] + dValue]);\n                }\n                else {\n                    _this.setValue([range.max - curDiff, range.max]);\n                }\n            }\n            prePoint = {\n                x: ev.x,\n                y: ev.y,\n            };\n        });\n        group.on('legend-track:dragend', function (ev) {\n            prePoint = null;\n        });\n    };\n    ContinueLegend.prototype.drawLabels = function (group) {\n        this.drawLabel('min', group);\n        this.drawLabel('max', group);\n    };\n    ContinueLegend.prototype.drawLabel = function (name, group) {\n        var labelCfg = this.get('label');\n        var style = labelCfg.style;\n        var labelAlign = labelCfg.align;\n        var value = this.get(name);\n        var alignAttrs = this.getLabelAlignAttrs(name, labelAlign);\n        var localId = \"label-\" + name;\n        this.addShape(group, {\n            type: 'text',\n            id: this.getElementId(localId),\n            name: \"legend-label-\" + name,\n            attrs: __assign(__assign({ x: 0, y: 0, text: value }, style), alignAttrs),\n        });\n    };\n    // 获取文本的对齐方式，为了自适应真实操碎了心\n    ContinueLegend.prototype.getLabelAlignAttrs = function (name, align) {\n        var isVertical = this.isVertical();\n        var textAlign = 'center';\n        var textBaseline = 'middle';\n        if (isVertical) {\n            // 垂直布局的所有的文本都左对齐\n            textAlign = 'start';\n            if (align !== 'rail') {\n                if (name === 'min') {\n                    textBaseline = 'top';\n                }\n                else {\n                    textBaseline = 'bottom';\n                }\n            }\n            else {\n                textBaseline = 'top';\n            }\n        }\n        else {\n            if (align !== 'rail') {\n                textBaseline = 'top';\n                if (name === 'min') {\n                    textAlign = 'start';\n                }\n                else {\n                    textAlign = 'end';\n                }\n            }\n            else {\n                textAlign = 'start';\n                textBaseline = 'middle';\n            }\n        }\n        return {\n            textAlign: textAlign,\n            textBaseline: textBaseline,\n        };\n    };\n    ContinueLegend.prototype.getRailPath = function (x, y, w, h) {\n        var railCfg = this.get('rail');\n        var size = railCfg.size, defaultLength = railCfg.defaultLength, type = railCfg.type;\n        var isVertical = this.isVertical();\n        var length = defaultLength;\n        var width = w;\n        var height = h;\n        if (!width) {\n            width = isVertical ? size : length;\n        }\n        if (!height) {\n            height = isVertical ? length : size;\n        }\n        var path = [];\n        if (type === 'color') {\n            path.push(['M', x, y]);\n            path.push(['L', x + width, y]);\n            path.push(['L', x + width, y + height]);\n            path.push(['L', x, y + height]);\n            path.push(['Z']);\n        }\n        else {\n            path.push(['M', x + width, y]);\n            path.push(['L', x + width, y + height]);\n            path.push(['L', x, y + height]);\n            path.push(['Z']);\n        }\n        return path;\n    };\n    ContinueLegend.prototype.drawRail = function (group) {\n        var railCfg = this.get('rail');\n        var style = railCfg.style;\n        this.addShape(group, {\n            type: 'path',\n            id: this.getElementId('rail'),\n            name: 'legend-rail',\n            attrs: __assign({ path: this.getRailPath(0, 0) }, style),\n        });\n    };\n    // 将传入的颜色转换成渐变色\n    ContinueLegend.prototype.getTrackColor = function (colors) {\n        var count = colors.length;\n        if (!count) {\n            return null;\n        }\n        if (count === 1) {\n            return colors[0];\n        }\n        var color; // 最终形态 l(0) 0:colors[0] 0.5:colors[1] 1:colors[2];\n        if (this.isVertical()) {\n            // 根据方向设置渐变方向\n            color = 'l(90)';\n        }\n        else {\n            color = 'l(0)';\n        }\n        for (var i = 0; i < count; i++) {\n            var percent = i / (count - 1);\n            color += \" \" + percent + \":\" + colors[i];\n        }\n        return color;\n    };\n    ContinueLegend.prototype.getTrackPath = function (group) {\n        var railShape = this.getRailShape(group);\n        var path = railShape.attr('path');\n        return clone(path);\n    };\n    ContinueLegend.prototype.getClipTrackAttrs = function (group) {\n        var value = this.getCurrentValue();\n        var min = value[0], max = value[1];\n        var railBBox = this.getRailBBox(group);\n        var startPoint = this.getPointByValue(min, group);\n        var endPoint = this.getPointByValue(max, group);\n        var isVertical = this.isVertical();\n        var x;\n        var y;\n        var width;\n        var height;\n        if (isVertical) {\n            x = railBBox.minX;\n            y = startPoint.y;\n            width = railBBox.width;\n            height = endPoint.y - startPoint.y;\n        }\n        else {\n            x = startPoint.x;\n            y = railBBox.minY;\n            width = endPoint.x - startPoint.x;\n            height = railBBox.height;\n        }\n        return {\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n        };\n    };\n    // 获取 track 的属性，由 path 和 颜色构成\n    ContinueLegend.prototype.getTrackAttrs = function (group) {\n        var trackCfg = this.get('track');\n        var colors = this.get('colors');\n        var path = this.getTrackPath(group);\n        return mix({\n            path: path,\n            fill: this.getTrackColor(colors),\n        }, trackCfg.style);\n    };\n    ContinueLegend.prototype.resetTrackClip = function (group) {\n        var container = group || this.get('group');\n        var trackId = this.getElementId('track');\n        var trackShape = container.findById(trackId);\n        var clipShape = trackShape.getClip();\n        var attrs = this.getClipTrackAttrs(group);\n        if (!clipShape) {\n            trackShape.setClip({\n                type: 'rect',\n                attrs: attrs,\n            });\n        }\n        else {\n            clipShape.attr(attrs);\n        }\n    };\n    ContinueLegend.prototype.resetTrack = function (group) {\n        var trackId = this.getElementId('track');\n        var trackShape = group.findById(trackId);\n        var trackAttrs = this.getTrackAttrs(group);\n        if (trackShape) {\n            trackShape.attr(trackAttrs);\n        }\n        else {\n            this.addShape(group, {\n                type: 'path',\n                id: trackId,\n                draggable: this.get('slidable'),\n                name: 'legend-track',\n                attrs: trackAttrs,\n            });\n        }\n    };\n    ContinueLegend.prototype.getPointByValue = function (value, group) {\n        var _a = this.getRange(), min = _a.min, max = _a.max;\n        var percent = (value - min) / (max - min);\n        var bbox = this.getRailBBox(group);\n        var isVertcal = this.isVertical();\n        var point = { x: 0, y: 0 };\n        if (isVertcal) {\n            point.x = bbox.minX + bbox.width / 2;\n            point.y = getValueByPercent(bbox.minY, bbox.maxY, percent);\n        }\n        else {\n            point.x = getValueByPercent(bbox.minX, bbox.maxX, percent);\n            point.y = bbox.minY + bbox.height / 2;\n        }\n        return point;\n    };\n    ContinueLegend.prototype.getRailShape = function (group) {\n        var container = group || this.get('group');\n        return container.findById(this.getElementId('rail'));\n    };\n    // 获取滑轨的宽高信息\n    ContinueLegend.prototype.getRailBBox = function (group) {\n        var railShape = this.getRailShape(group);\n        var bbox = railShape.getBBox();\n        return bbox;\n    };\n    ContinueLegend.prototype.getRailCanvasBBox = function () {\n        var container = this.get('group');\n        var railShape = container.findById(this.getElementId('rail'));\n        var bbox = railShape.getCanvasBBox();\n        return bbox;\n    };\n    // 是否垂直\n    ContinueLegend.prototype.isVertical = function () {\n        return this.get('layout') === 'vertical';\n    };\n    // 用于交互时\n    ContinueLegend.prototype.getValueByCanvasPoint = function (x, y) {\n        var _a = this.getRange(), min = _a.min, max = _a.max;\n        var bbox = this.getRailCanvasBBox(); // 因为 x, y 是画布坐标\n        var isVertcal = this.isVertical();\n        var step = this.get('step');\n        var percent;\n        if (isVertcal) {\n            // 垂直时计算 y\n            percent = (y - bbox.minY) / bbox.height;\n        }\n        else {\n            // 水平时计算 x\n            percent = (x - bbox.minX) / bbox.width;\n        }\n        var value = getValueByPercent(min, max, percent);\n        if (step) {\n            var count = Math.round((value - min) / step);\n            value = min + count * step; // 移动到最近的\n        }\n        if (value > max) {\n            value = max;\n        }\n        if (value < min) {\n            value = min;\n        }\n        return value;\n    };\n    // 当前选中的范围\n    ContinueLegend.prototype.getCurrentValue = function () {\n        var value = this.get('value');\n        if (!value) {\n            // 如果没有定义，取最大范围\n            value = [this.get('min'), this.get('max')];\n        }\n        return value;\n    };\n    // 重置滑块 handler\n    ContinueLegend.prototype.resetHandlers = function (group) {\n        var currentValue = this.getCurrentValue();\n        var min = currentValue[0], max = currentValue[1];\n        this.resetHandler(group, 'min', min);\n        this.resetHandler(group, 'max', max);\n    };\n    // 获取滑块的 path\n    ContinueLegend.prototype.getHandlerPath = function (handlerCfg, point) {\n        var isVertical = this.isVertical();\n        var path = [];\n        var width = handlerCfg.size;\n        var x = point.x, y = point.y;\n        var height = width * HANDLER_HEIGHT_RATIO;\n        var halfWidth = width / 2;\n        var oneSixthWidth = width / 6;\n        if (isVertical) {\n            /**\n             * 竖直情况下的滑块 handler，左侧顶点是 x,y\n             *  /----|\n             *    -- |\n             *    -- |\n             *  \\----|\n             */\n            var triangleX = x + height * HANDLER_TRIANGLE_RATIO;\n            path.push(['M', x, y]);\n            path.push(['L', triangleX, y + halfWidth]);\n            path.push(['L', x + height, y + halfWidth]);\n            path.push(['L', x + height, y - halfWidth]);\n            path.push(['L', triangleX, y - halfWidth]);\n            path.push(['Z']);\n            // 绘制两条横线\n            path.push(['M', triangleX, y + oneSixthWidth]);\n            path.push(['L', x + height - 2, y + oneSixthWidth]);\n            path.push(['M', triangleX, y - oneSixthWidth]);\n            path.push(['L', x + height - 2, y - oneSixthWidth]);\n        }\n        else {\n            /**\n             * 水平情况下的滑块，上面顶点处是 x,y\n             *  /   \\\n             * | | | |\n             * | | | |\n             *  -----\n             */\n            var triangleY = y + height * HANDLER_TRIANGLE_RATIO;\n            path.push(['M', x, y]);\n            path.push(['L', x - halfWidth, triangleY]);\n            path.push(['L', x - halfWidth, y + height]);\n            path.push(['L', x + halfWidth, y + height]);\n            path.push(['L', x + halfWidth, triangleY]);\n            path.push(['Z']);\n            // 绘制两条竖线\n            path.push(['M', x - oneSixthWidth, triangleY]);\n            path.push(['L', x - oneSixthWidth, y + height - 2]);\n            path.push(['M', x + oneSixthWidth, triangleY]);\n            path.push(['L', x + oneSixthWidth, y + height - 2]);\n        }\n        return path;\n    };\n    // 调整 handler 的位置，如果未存在则绘制\n    ContinueLegend.prototype.resetHandler = function (group, name, value) {\n        var point = this.getPointByValue(value, group);\n        var handlerCfg = this.get('handler');\n        var path = this.getHandlerPath(handlerCfg, point);\n        var id = this.getElementId(\"handler-\" + name);\n        var handlerShape = group.findById(id);\n        var isVertical = this.isVertical();\n        if (handlerShape) {\n            handlerShape.attr('path', path);\n        }\n        else {\n            this.addShape(group, {\n                type: 'path',\n                name: \"legend-handler-\" + name,\n                draggable: true,\n                id: id,\n                attrs: __assign(__assign({ path: path }, handlerCfg.style), { cursor: isVertical ? 'ns-resize' : 'ew-resize' }),\n            });\n        }\n    };\n    // 当设置了 maxWidth, maxHeight 时调整 rail 的宽度，\n    // 文本的位置\n    ContinueLegend.prototype.fixedElements = function (group) {\n        var railShape = group.findById(this.getElementId('rail'));\n        var minLabel = group.findById(this.getElementId('label-min'));\n        var maxLabel = group.findById(this.getElementId('label-max'));\n        var startPoint = this.getDrawPoint();\n        if (this.isVertical()) {\n            // 横向布局\n            this.fixedVertail(minLabel, maxLabel, railShape, startPoint);\n        }\n        else {\n            // 水平布局\n            this.fixedHorizontal(minLabel, maxLabel, railShape, startPoint);\n        }\n    };\n    ContinueLegend.prototype.fitRailLength = function (minLabelBBox, maxLabelBBox, railBBox, railShape) {\n        var isVertical = this.isVertical();\n        var lengthField = isVertical ? 'height' : 'width';\n        var labelCfg = this.get('label');\n        var labelAlign = labelCfg.align;\n        var spacing = labelCfg.spacing;\n        var maxLength = this.get(\"max\" + upperFirst(lengthField)); // get('maxWidth')\n        if (maxLength) {\n            var elementsLength = labelAlign === 'rail'\n                ? railBBox[lengthField] + minLabelBBox[lengthField] + maxLabelBBox[lengthField] + spacing * 2\n                : railBBox[lengthField];\n            var diff = elementsLength - maxLength;\n            if (diff > 0) {\n                // 大于限制的长度\n                this.changeRailLength(railShape, lengthField, railBBox[lengthField] - diff);\n            }\n        }\n    };\n    ContinueLegend.prototype.changeRailLength = function (railShape, lengthField, length) {\n        var bbox = railShape.getBBox();\n        var path;\n        if (lengthField === 'height') {\n            path = this.getRailPath(bbox.x, bbox.y, bbox.width, length);\n        }\n        else {\n            path = this.getRailPath(bbox.x, bbox.y, length, bbox.height);\n        }\n        railShape.attr('path', path);\n    };\n    ContinueLegend.prototype.changeRailPosition = function (railShape, x, y) {\n        var bbox = railShape.getBBox();\n        var path = this.getRailPath(x, y, bbox.width, bbox.height);\n        railShape.attr('path', path);\n    };\n    ContinueLegend.prototype.fixedHorizontal = function (minLabel, maxLabel, railShape, startPoint) {\n        var labelCfg = this.get('label');\n        var labelAlign = labelCfg.align;\n        var spacing = labelCfg.spacing;\n        var railBBox = railShape.getBBox();\n        var minLabelBBox = minLabel.getBBox();\n        var maxLabelBBox = maxLabel.getBBox();\n        var railHeight = railBBox.height; // 取 rail 的高度，作为高度\n        this.fitRailLength(minLabelBBox, maxLabelBBox, railBBox, railShape);\n        railBBox = railShape.getBBox();\n        if (labelAlign === 'rail') {\n            // 沿着 rail 方向\n            minLabel.attr({\n                x: startPoint.x,\n                y: startPoint.y + railHeight / 2,\n            });\n            this.changeRailPosition(railShape, startPoint.x + minLabelBBox.width + spacing, startPoint.y);\n            maxLabel.attr({\n                x: startPoint.x + minLabelBBox.width + railBBox.width + spacing * 2,\n                y: startPoint.y + railHeight / 2,\n            });\n        }\n        else if (labelAlign === 'top') {\n            minLabel.attr({\n                x: startPoint.x,\n                y: startPoint.y,\n            });\n            maxLabel.attr({\n                x: startPoint.x + railBBox.width,\n                y: startPoint.y,\n            });\n            this.changeRailPosition(railShape, startPoint.x, startPoint.y + minLabelBBox.height + spacing);\n        }\n        else {\n            this.changeRailPosition(railShape, startPoint.x, startPoint.y);\n            minLabel.attr({\n                x: startPoint.x,\n                y: startPoint.y + railBBox.height + spacing,\n            });\n            maxLabel.attr({\n                x: startPoint.x + railBBox.width,\n                y: startPoint.y + railBBox.height + spacing,\n            });\n        }\n    };\n    ContinueLegend.prototype.fixedVertail = function (minLabel, maxLabel, railShape, startPoint) {\n        var labelCfg = this.get('label');\n        var labelAlign = labelCfg.align;\n        var spacing = labelCfg.spacing;\n        var railBBox = railShape.getBBox();\n        var minLabelBBox = minLabel.getBBox();\n        var maxLabelBBox = maxLabel.getBBox();\n        this.fitRailLength(minLabelBBox, maxLabelBBox, railBBox, railShape);\n        railBBox = railShape.getBBox();\n        if (labelAlign === 'rail') {\n            // 沿着 rail 方向\n            minLabel.attr({\n                x: startPoint.x,\n                y: startPoint.y,\n            });\n            this.changeRailPosition(railShape, startPoint.x, startPoint.y + minLabelBBox.height + spacing);\n            maxLabel.attr({\n                x: startPoint.x,\n                y: startPoint.y + minLabelBBox.height + railBBox.height + spacing * 2,\n            });\n        }\n        else if (labelAlign === 'right') {\n            minLabel.attr({\n                x: startPoint.x + railBBox.width + spacing,\n                y: startPoint.y,\n            });\n            this.changeRailPosition(railShape, startPoint.x, startPoint.y);\n            maxLabel.attr({\n                x: startPoint.x + railBBox.width + spacing,\n                y: startPoint.y + railBBox.height,\n            });\n        }\n        else {\n            // left\n            var maxLabelWidth = Math.max(minLabelBBox.width, maxLabelBBox.width);\n            minLabel.attr({\n                x: startPoint.x,\n                y: startPoint.y,\n            });\n            this.changeRailPosition(railShape, startPoint.x + maxLabelWidth + spacing, startPoint.y);\n            maxLabel.attr({\n                x: startPoint.x,\n                y: startPoint.y + railBBox.height,\n            });\n        }\n    };\n    return ContinueLegend;\n}(LegendBase));\nexport default ContinueLegend;\n//# sourceMappingURL=continuous.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CONTAINER_CLASS = 'g2-tooltip';\nexports.TITLE_CLASS = 'g2-tooltip-title';\nexports.LIST_CLASS = 'g2-tooltip-list';\nexports.LIST_ITEM_CLASS = 'g2-tooltip-list-item';\nexports.MARKER_CLASS = 'g2-tooltip-marker';\nexports.VALUE_CLASS = 'g2-tooltip-value';\nexports.NAME_CLASS = 'g2-tooltip-name';\nexports.CROSSHAIR_X = 'g2-tooltip-crosshair-x';\nexports.CROSSHAIR_Y = 'g2-tooltip-crosshair-y';\n//# sourceMappingURL=css-const.js.map","\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar theme_1 = require(\"../util/theme\");\n// tooltip 相关 dom 的 css 类名\nvar CssConst = require(\"./css-const\");\nexports.default = (_a = {},\n    // css style for tooltip\n    _a[\"\" + CssConst.CONTAINER_CLASS] = {\n        position: 'absolute',\n        visibility: 'visible',\n        // @2018-07-25 by blue.lb 这里去掉浮动，火狐上存在样式错位\n        // whiteSpace: 'nowrap',\n        zIndex: 8,\n        transition: 'visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), ' +\n            'left 0.4s cubic-bezier(0.23, 1, 0.32, 1), ' +\n            'top 0.4s cubic-bezier(0.23, 1, 0.32, 1)',\n        backgroundColor: 'rgba(255, 255, 255, 0.9)',\n        boxShadow: '0px 0px 10px #aeaeae',\n        borderRadius: '3px',\n        color: 'rgb(87, 87, 87)',\n        fontSize: '12px',\n        fontFamily: theme_1.default.fontFamily,\n        lineHeight: '20px',\n        padding: '10px 10px 6px 10px',\n    },\n    _a[\"\" + CssConst.TITLE_CLASS] = {\n        marginBottom: '4px',\n    },\n    _a[\"\" + CssConst.LIST_CLASS] = {\n        margin: 0,\n        listStyleType: 'none',\n        padding: 0,\n    },\n    _a[\"\" + CssConst.LIST_ITEM_CLASS] = {\n        listStyleType: 'none',\n        marginBottom: '4px',\n    },\n    _a[\"\" + CssConst.MARKER_CLASS] = {\n        width: '8px',\n        height: '8px',\n        borderRadius: '50%',\n        display: 'inline-block',\n        marginRight: '8px',\n    },\n    _a[\"\" + CssConst.VALUE_CLASS] = {\n        display: 'inline-block',\n        float: 'right',\n        marginLeft: '30px',\n    },\n    _a[\"\" + CssConst.CROSSHAIR_X] = {\n        position: 'absolute',\n        width: '1px',\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\n    },\n    _a[\"\" + CssConst.CROSSHAIR_Y] = {\n        position: 'absolute',\n        height: '1px',\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\n    },\n    _a);\n//# sourceMappingURL=html-theme.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar color_util_1 = require(\"@antv/color-util\");\nvar dom_util_1 = require(\"@antv/dom-util\");\nvar util_1 = require(\"@antv/util\");\nvar html_component_1 = require(\"../abstract/html-component\");\nvar util_2 = require(\"../util/util\");\nvar CssConst = require(\"./css-const\");\nvar html_theme_1 = require(\"./html-theme\");\nvar align_1 = require(\"../util/align\");\nfunction hasOneKey(obj, keys) {\n    var result = false;\n    util_1.each(keys, function (key) {\n        if (util_1.hasKey(obj, key)) {\n            result = true;\n            return false;\n        }\n    });\n    return result;\n}\nvar Tooltip = /** @class */ (function (_super) {\n    tslib_1.__extends(Tooltip, _super);\n    function Tooltip() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Tooltip.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return tslib_1.__assign(tslib_1.__assign({}, cfg), { name: 'tooltip', type: 'html', x: 0, y: 0, items: [], containerTpl: \"<div class=\\\"\" + CssConst.CONTAINER_CLASS + \"\\\"><div class=\\\"\" + CssConst.TITLE_CLASS + \"\\\"></div><ul class=\\\"\" + CssConst.LIST_CLASS + \"\\\"></ul></div>\", itemTpl: \"<li class=\\\"\" + CssConst.LIST_ITEM_CLASS + \"\\\" data-index={index}>\\n          <span class=\\\"\" + CssConst.MARKER_CLASS + \"\\\" style=\\\"background:{color}\\\"></span>\\n          <span class=\\\"\" + CssConst.NAME_CLASS + \"\\\">{name}</span>:\\n          <span class=\\\"\" + CssConst.VALUE_CLASS + \"\\\">{value}</span>\\n        </li>\", xCrosshairTpl: \"<div class=\\\"\" + CssConst.CROSSHAIR_X + \"\\\"></div>\", yCrosshairTpl: \"<div class=\\\"\" + CssConst.CROSSHAIR_Y + \"\\\"></div>\", title: null, showTitle: true, \n            /**\n             * tooltip 限制的区域\n             * @type {Region}\n             */\n            region: null, \n            // crosshair 的限制区域\n            crosshairsRegion: null, containerClassName: CssConst.CONTAINER_CLASS, \n            // x, y, xy\n            crosshairs: null, offset: 10, position: 'right', domStyles: null, defaultStyles: html_theme_1.default });\n    };\n    // tooltip 渲染时，渲染 title，items 和 corosshairs\n    Tooltip.prototype.render = function () {\n        this.resetTitle();\n        this.renderItems();\n        // 绘制完成后，再定位\n        this.resetPosition();\n    };\n    // 复写清空函数，因为有模板的存在，所以默认的写法不合适\n    Tooltip.prototype.clear = function () {\n        // 由于 crosshair 没有在 container 内，所以需要单独清理\n        this.clearCrosshairs();\n        this.setTitle(''); // 清空标题\n        this.clearItemDoms();\n    };\n    // 更新属性的同时，可能会引起 DOM 的变化，这里对可能引起 DOM 变化的场景做了处理\n    Tooltip.prototype.updateInner = function (cfg) {\n        // 更新标题\n        if (hasOneKey(cfg, ['title', 'showTitle'])) {\n            this.resetTitle();\n        }\n        // 更新内容\n        if (util_1.hasKey(cfg, 'items')) {\n            this.renderItems();\n        }\n        _super.prototype.updateInner.call(this, cfg);\n    };\n    Tooltip.prototype.show = function () {\n        var container = this.getContainer();\n        if (!container || this.destroyed) {\n            // 防止容器不存在或者被销毁时报错\n            return;\n        }\n        this.set('visible', true);\n        dom_util_1.modifyCSS(container, {\n            visibility: 'visible',\n        });\n        this.setCrossHairsVisible(true);\n    };\n    Tooltip.prototype.hide = function () {\n        var container = this.getContainer();\n        // relative: https://github.com/antvis/g2/issues/1221\n        if (!container || this.destroyed) {\n            return;\n        }\n        this.set('visible', false);\n        dom_util_1.modifyCSS(container, {\n            visibility: 'hidden',\n        });\n        this.setCrossHairsVisible(false);\n    };\n    // 实现 IPointLocation 的接口\n    Tooltip.prototype.getLocation = function () {\n        return { x: this.get('x'), y: this.get('y') };\n    };\n    // 实现 IPointLocation 的接口\n    Tooltip.prototype.setLocation = function (point) {\n        this.set('x', point.x);\n        this.set('y', point.y);\n        this.resetPosition();\n    };\n    Tooltip.prototype.setCrossHairsVisible = function (visible) {\n        var display = visible ? '' : 'none';\n        var xCrosshairDom = this.get('xCrosshairDom');\n        var yCrosshairDom = this.get('yCrosshairDom');\n        xCrosshairDom &&\n            dom_util_1.modifyCSS(xCrosshairDom, {\n                display: display,\n            });\n        yCrosshairDom &&\n            dom_util_1.modifyCSS(yCrosshairDom, {\n                display: display,\n            });\n    };\n    Tooltip.prototype.initDom = function () {\n        this.cacheDoms();\n    };\n    // 清理 DOM\n    Tooltip.prototype.removeDom = function () {\n        _super.prototype.removeDom.call(this);\n        this.clearCrosshairs();\n    };\n    // 缓存模板设置的各种 DOM\n    Tooltip.prototype.cacheDoms = function () {\n        var container = this.getContainer();\n        var titleDom = container.getElementsByClassName(CssConst.TITLE_CLASS)[0];\n        var listDom = container.getElementsByClassName(CssConst.LIST_CLASS)[0];\n        this.set('titleDom', titleDom);\n        this.set('listDom', listDom);\n    };\n    // 调整位置\n    Tooltip.prototype.resetPosition = function () {\n        var x = this.get('x');\n        var y = this.get('y');\n        var offset = this.get('offset');\n        var _a = this.getOffset(), offsetX = _a.offsetX, offsetY = _a.offsetY;\n        var position = this.get('position');\n        var region = this.get('region');\n        var container = this.getContainer();\n        var bbox = this.getBBox();\n        var width = bbox.width, height = bbox.height;\n        var limitBox;\n        if (region) {\n            // 不限制位置\n            limitBox = util_2.regionToBBox(region);\n        }\n        var point = align_1.getAlignPoint(x, y, offset, width, height, position, limitBox);\n        dom_util_1.modifyCSS(container, {\n            left: util_2.toPx(point.x + offsetX),\n            top: util_2.toPx(point.y + offsetY),\n        });\n        this.resetCrosshairs();\n    };\n    // 重置 title\n    Tooltip.prototype.resetTitle = function () {\n        var title = this.get('title');\n        var showTitle = this.get('showTitle');\n        if (showTitle && title) {\n            this.setTitle(title);\n        }\n        else {\n            this.setTitle('');\n        }\n    };\n    // 设置 title 文本\n    Tooltip.prototype.setTitle = function (text) {\n        var titleDom = this.get('titleDom');\n        if (titleDom) {\n            titleDom.innerText = text;\n        }\n    };\n    // 终止 crosshair\n    Tooltip.prototype.resetCrosshairs = function () {\n        var crosshairsRegion = this.get('crosshairsRegion');\n        var crosshairs = this.get('crosshairs');\n        if (!crosshairsRegion || !crosshairs) {\n            // 不显示 crosshair，都移除，没有设定 region 也都移除掉\n            this.clearCrosshairs();\n        }\n        else {\n            var crosshairBox = util_2.regionToBBox(crosshairsRegion);\n            var xCrosshairDom = this.get('xCrosshairDom');\n            var yCrosshairDom = this.get('yCrosshairDom');\n            if (crosshairs === 'x') {\n                this.resetCrosshair('x', crosshairBox);\n                // 仅显示 x 的 crosshair，y 移除\n                if (yCrosshairDom) {\n                    yCrosshairDom.remove();\n                    this.set('yCrosshairDom', null);\n                }\n            }\n            else if (crosshairs === 'y') {\n                this.resetCrosshair('y', crosshairBox);\n                // 仅显示 y 的 crosshair，x 移除\n                if (xCrosshairDom) {\n                    xCrosshairDom.remove();\n                    this.set('xCrosshairDom', null);\n                }\n            }\n            else {\n                this.resetCrosshair('x', crosshairBox);\n                this.resetCrosshair('y', crosshairBox);\n            }\n            this.setCrossHairsVisible(this.get('visible'));\n        }\n    };\n    // 设定 crosshair 的位置，需要区分 x,y\n    Tooltip.prototype.resetCrosshair = function (name, bbox) {\n        var croshairDom = this.checkCrosshair(name);\n        var value = this.get(name);\n        if (name === 'x') {\n            dom_util_1.modifyCSS(croshairDom, {\n                left: util_2.toPx(value),\n                top: util_2.toPx(bbox.y),\n                height: util_2.toPx(bbox.height),\n            });\n        }\n        else {\n            dom_util_1.modifyCSS(croshairDom, {\n                top: util_2.toPx(value),\n                left: util_2.toPx(bbox.x),\n                width: util_2.toPx(bbox.width),\n            });\n        }\n    };\n    // 如果 crosshair 对应的 dom 不存在，则创建\n    Tooltip.prototype.checkCrosshair = function (name) {\n        var domName = name + \"CrosshairDom\";\n        var tplName = name + \"CrosshairTpl\";\n        var constName = \"CROSSHAIR_\" + name.toUpperCase();\n        var styleName = CssConst[constName];\n        var croshairDom = this.get(domName);\n        var parent = this.get('parent');\n        if (!croshairDom) {\n            croshairDom = dom_util_1.createDom(this.get(tplName)); // 创建\n            this.applyStyle(styleName, croshairDom); // 设置初始样式\n            parent.appendChild(croshairDom); // 添加到跟 tooltip 同级的目录下\n            this.set(domName, croshairDom);\n        }\n        return croshairDom;\n    };\n    Tooltip.prototype.renderItems = function () {\n        this.clearItemDoms();\n        var items = this.get('items');\n        var itemTpl = this.get('itemTpl');\n        var listDom = this.get('listDom');\n        if (listDom) {\n            util_1.each(items, function (item) {\n                var color = color_util_1.default.toCSSGradient(item.color);\n                var substituteObj = tslib_1.__assign(tslib_1.__assign({}, item), { color: color });\n                var domStr = util_1.substitute(itemTpl, substituteObj);\n                var itemDom = dom_util_1.createDom(domStr);\n                listDom.appendChild(itemDom);\n            });\n            this.applyChildrenStyles(listDom, this.get('domStyles'));\n        }\n    };\n    Tooltip.prototype.clearItemDoms = function () {\n        if (this.get('listDom')) {\n            util_2.clearDom(this.get('listDom'));\n        }\n    };\n    Tooltip.prototype.clearCrosshairs = function () {\n        var xCrosshairDom = this.get('xCrosshairDom');\n        var yCrosshairDom = this.get('yCrosshairDom');\n        xCrosshairDom && xCrosshairDom.remove();\n        yCrosshairDom && yCrosshairDom.remove();\n        this.set('xCrosshairDom', null);\n        this.set('yCrosshairDom', null);\n    };\n    return Tooltip;\n}(html_component_1.default));\nexports.default = Tooltip;\n//# sourceMappingURL=html.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// 检测各边是否超出\nfunction getOutSides(x, y, width, height, limitBox) {\n    var hits = {\n        left: x < limitBox.x,\n        right: x + width > limitBox.x + limitBox.width,\n        top: y < limitBox.y,\n        bottom: y + height > limitBox.y + limitBox.height,\n    };\n    return hits;\n}\nexports.getOutSides = getOutSides;\nfunction getPointByPosition(x, y, offset, width, height, position) {\n    var px = x;\n    var py = y;\n    switch (position) {\n        case 'left': // left center\n            px = x - width - offset;\n            py = y - height / 2;\n            break;\n        case 'right':\n            px = x + offset;\n            py = y - height / 2;\n            break;\n        case 'top':\n            px = x - width / 2;\n            py = y - height - offset;\n            break;\n        case 'bottom':\n            // bottom\n            px = x - width / 2;\n            py = y + offset;\n            break;\n        default:\n            // auto, 在 top-right\n            px = x + offset;\n            py = y - height - offset;\n            break;\n    }\n    return {\n        x: px,\n        y: py,\n    };\n}\nexports.getPointByPosition = getPointByPosition;\nfunction getAlignPoint(x, y, offset, width, height, position, limitBox) {\n    var point = getPointByPosition(x, y, offset, width, height, position);\n    if (limitBox) {\n        var outSides = getOutSides(point.x, point.y, width, height, limitBox);\n        if (position === 'auto') {\n            // 如果是 auto，默认 tooltip 在右上角，仅需要判定右侧和上测冲突即可\n            if (outSides.right) {\n                point.x = x - width - offset;\n            }\n            if (outSides.top) {\n                point.y = y + offset;\n            }\n        }\n        else if (position === 'top' || position === 'bottom') {\n            if (outSides.left) {\n                // 左侧躲避\n                point.x = limitBox.x;\n            }\n            if (outSides.right) {\n                // 右侧躲避\n                point.x = limitBox.x + limitBox.width - width;\n            }\n            if (position === 'top' && outSides.top) {\n                // 如果上面对齐检测上面，不检测下面\n                point.y = y + offset;\n            }\n            if (position === 'bottom' && outSides.bottom) {\n                point.y = y - height - offset;\n            }\n        }\n        else {\n            // 检测左右位置\n            if (outSides.top) {\n                point.y = limitBox.y;\n            }\n            if (outSides.bottom) {\n                point.y = limitBox.y + limitBox.height - height;\n            }\n            if (position === 'left' && outSides.left) {\n                point.x = x + offset;\n            }\n            if (position === 'right' && outSides.right) {\n                point.x = x - width - offset;\n            }\n        }\n    }\n    return point;\n}\nexports.getAlignPoint = getAlignPoint;\n//# sourceMappingURL=align.js.map","export var BACKGROUND_STYLE = {\n    // fill: 'red',\n    opacity: 0,\n};\nexport var LINE_STYLE = {\n    stroke: '#C5C5C5',\n    strokeOpacity: 0.85,\n};\nexport var AREA_STYLE = {\n    fill: '#CACED4',\n    opacity: 0.85,\n};\n//# sourceMappingURL=constant.js.map","import { __spreadArrays } from \"tslib\";\nimport { catmullRom2Bezier } from '@antv/path-util';\nimport { Category, Linear } from '@antv/scale';\nimport { each, head, isEqual, map } from '@antv/util';\n/**\n * 点数组转 path\n * @param points\n */\nfunction pointsToPath(points) {\n    return map(points, function (p, idx) {\n        var command = idx === 0 ? 'M' : 'L';\n        var x = p[0], y = p[1];\n        return [command, x, y];\n    });\n}\n/**\n * 将点连接成路径 path\n * @param points\n */\nexport function getLinePath(points) {\n    return pointsToPath(points);\n}\n/**\n * 将点连成平滑的曲线\n * @param points\n */\nexport function getSmoothLinePath(points) {\n    if (points.length <= 2) {\n        // 两点以内直接绘制成路径\n        return getLinePath(points);\n    }\n    var data = [];\n    each(points, function (p) {\n        // 当前点和上一个点一样的时候，忽略掉\n        if (!isEqual(p, data.slice(data.length - 2))) {\n            data.push(p[0], p[1]);\n        }\n    });\n    // const constraint = [ // 范围\n    //   [ 0, 0 ],\n    //   [ 1, 1 ],\n    // ];\n    var path = catmullRom2Bezier(data, false);\n    var _a = head(points), x = _a[0], y = _a[1];\n    path.unshift(['M', x, y]);\n    return path;\n}\n/**\n * 将数据转成 path，利用 scale 的归一化能力\n * @param data\n * @param width\n * @param height\n * @param smooth\n */\nexport function dataToPath(data, width, height, smooth) {\n    if (smooth === void 0) { smooth = true; }\n    // 利用 scale 来获取 y 上的映射\n    var y = new Linear({\n        values: data,\n    });\n    var x = new Category({\n        values: map(data, function (v, idx) { return idx; }),\n    });\n    var points = map(data, function (v, idx) {\n        return [x.scale(idx) * width, height - y.scale(v) * height];\n    });\n    return smooth ? getSmoothLinePath(points) : getLinePath(points);\n}\n/**\n * 线 path 转 area path\n * @param path\n * @param width\n * @param height\n */\nexport function linePathToAreaPath(path, width, height) {\n    var areaPath = __spreadArrays(path);\n    areaPath.push(['L', width, 0]);\n    areaPath.push(['L', 0, height]);\n    areaPath.push(['Z']);\n    return areaPath;\n}\n//# sourceMappingURL=path.js.map","import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport { AREA_STYLE, BACKGROUND_STYLE, LINE_STYLE } from './constant';\nimport { dataToPath, linePathToAreaPath } from './path';\nvar Trend = /** @class */ (function (_super) {\n    __extends(Trend, _super);\n    function Trend() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Trend.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'trend', x: 0, y: 0, width: 200, height: 16, smooth: true, isArea: false, data: [], backgroundStyle: BACKGROUND_STYLE, lineStyle: LINE_STYLE, areaStyle: AREA_STYLE });\n    };\n    Trend.prototype.renderInner = function (group) {\n        var _a = this.cfg, width = _a.width, height = _a.height, data = _a.data, smooth = _a.smooth, isArea = _a.isArea, backgroundStyle = _a.backgroundStyle, lineStyle = _a.lineStyle, areaStyle = _a.areaStyle;\n        // 背景\n        this.addShape(group, {\n            id: this.getElementId('background'),\n            type: 'rect',\n            attrs: __assign({ x: 0, y: 0, width: width,\n                height: height }, backgroundStyle),\n        });\n        var path = dataToPath(data, width, height, smooth);\n        // 线\n        this.addShape(group, {\n            id: this.getElementId('line'),\n            type: 'path',\n            attrs: __assign({ path: path }, lineStyle),\n        });\n        // area\n        // 在 path 的基础上，增加两个坐标点\n        if (isArea) {\n            var areaPath = linePathToAreaPath(path, width, height);\n            this.addShape(group, {\n                id: this.getElementId('area'),\n                type: 'path',\n                attrs: __assign({ path: areaPath }, areaStyle),\n            });\n        }\n    };\n    Trend.prototype.applyOffset = function () {\n        var _a = this.cfg, x = _a.x, y = _a.y;\n        // 统一移动到对应的位置\n        this.moveElementTo(this.get('group'), {\n            x: x,\n            y: y,\n        });\n    };\n    return Trend;\n}(GroupComponent));\nexport { Trend };\nexport default Trend;\n//# sourceMappingURL=trend.js.map","/**\n * 一些默认的样式配置\n */\nexport var BACKGROUND_STYLE = {\n    fill: '#416180 ',\n    opacity: 0.05,\n};\nexport var FOREGROUND_STYLE = {\n    fill: '#5B8FF9',\n    opacity: 0.15,\n    cursor: 'move',\n};\nexport var DEFAULT_HANDLER_WIDTH = 10;\nexport var HANDLER_STYLE = {\n    width: DEFAULT_HANDLER_WIDTH,\n    height: 24,\n};\nexport var TEXT_STYLE = {\n    textBaseline: 'middle',\n    fill: '#000',\n    opacity: 0.45,\n};\nexport var SLIDER_CHANGE = 'sliderchange';\n//# sourceMappingURL=constant.js.map","import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nvar DEFAULT_STYLE = {\n    fill: '#F7F7F7',\n    stroke: '#BFBFBF',\n    radius: 2,\n    opacity: 1,\n    cursor: 'ew-resize',\n    // 高亮的颜色\n    highLightFill: '#FFF',\n};\nvar Handler = /** @class */ (function (_super) {\n    __extends(Handler, _super);\n    function Handler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Handler.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'handler', x: 0, y: 0, width: 10, height: 24, style: DEFAULT_STYLE });\n    };\n    Handler.prototype.renderInner = function (group) {\n        var _a = this.cfg, width = _a.width, height = _a.height, style = _a.style;\n        var fill = style.fill, stroke = style.stroke, radius = style.radius, opacity = style.opacity, cursor = style.cursor;\n        // 按钮框框\n        this.addShape(group, {\n            type: 'rect',\n            id: this.getElementId('background'),\n            attrs: {\n                x: 0,\n                y: 0,\n                width: width,\n                height: height,\n                fill: fill,\n                stroke: stroke,\n                radius: radius,\n                opacity: opacity,\n                cursor: cursor,\n            },\n        });\n        // 两根竖线\n        var x1 = (1 / 3) * width;\n        var x2 = (2 / 3) * width;\n        var y1 = (1 / 4) * height;\n        var y2 = (3 / 4) * height;\n        this.addShape(group, {\n            id: this.getElementId('line-left'),\n            type: 'line',\n            attrs: {\n                x1: x1,\n                y1: y1,\n                x2: x1,\n                y2: y2,\n                stroke: stroke,\n                cursor: cursor,\n            },\n        });\n        this.addShape(group, {\n            id: this.getElementId('line-right'),\n            type: 'line',\n            attrs: {\n                x1: x2,\n                y1: y1,\n                x2: x2,\n                y2: y2,\n                stroke: stroke,\n                cursor: cursor,\n            },\n        });\n    };\n    Handler.prototype.applyOffset = function () {\n        this.moveElementTo(this.get('group'), {\n            x: this.get('x'),\n            y: this.get('y'),\n        });\n    };\n    Handler.prototype.initEvent = function () {\n        this.bindEvents();\n    };\n    Handler.prototype.bindEvents = function () {\n        var _this = this;\n        this.get('group').on('mouseenter', function () {\n            var highLightFill = _this.get('style').highLightFill;\n            _this.getElementByLocalId('background').attr('fill', highLightFill);\n            _this.draw();\n        });\n        this.get('group').on('mouseleave', function () {\n            var fill = _this.get('style').fill;\n            _this.getElementByLocalId('background').attr('fill', fill);\n            _this.draw();\n        });\n    };\n    Handler.prototype.draw = function () {\n        var canvas = this.get('container').get('canvas');\n        if (canvas) {\n            canvas.draw();\n        }\n    };\n    return Handler;\n}(GroupComponent));\nexport { Handler };\nexport default Handler;\n//# sourceMappingURL=handler.js.map","import { __assign, __extends } from \"tslib\";\nimport { clamp, each, get, isArray, isNil, size } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport { Trend } from '../trend/trend';\nimport { BACKGROUND_STYLE, DEFAULT_HANDLER_WIDTH, FOREGROUND_STYLE, HANDLER_STYLE, SLIDER_CHANGE, TEXT_STYLE, } from './constant';\nimport { Handler } from './handler';\nvar Slider = /** @class */ (function (_super) {\n    __extends(Slider, _super);\n    function Slider() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.onMouseDown = function (target) { return function (e) {\n            _this.currentTarget = target;\n            // 取出原生事件\n            var event = e.originalEvent;\n            // 2. 存储当前点击位置\n            event.stopPropagation();\n            event.preventDefault();\n            // 兼容移动端获取数据\n            _this.prevX = get(event, 'touches.0.pageX', event.pageX);\n            _this.prevY = get(event, 'touches.0.pageY', event.pageY);\n            // 3. 开始滑动的时候，绑定 move 和 up 事件\n            var containerDOM = _this.getContainerDOM();\n            containerDOM.addEventListener('mousemove', _this.onMouseMove);\n            containerDOM.addEventListener('mouseup', _this.onMouseUp);\n            containerDOM.addEventListener('mouseleave', _this.onMouseUp);\n            // 移动端事件\n            containerDOM.addEventListener('touchmove', _this.onMouseMove);\n            containerDOM.addEventListener('touchend', _this.onMouseUp);\n            containerDOM.addEventListener('touchcancel', _this.onMouseUp);\n        }; };\n        _this.onMouseMove = function (event) {\n            var width = _this.cfg.width;\n            var originValue = [_this.get('start'), _this.get('end')];\n            // 滑动过程中，计算偏移，更新滑块，然后 emit 数据出去\n            event.stopPropagation();\n            event.preventDefault();\n            var x = get(event, 'touches.0.pageX', event.pageX);\n            var y = get(event, 'touches.0.pageY', event.pageY);\n            // 横向的 slider 只处理 x\n            var offsetX = x - _this.prevX;\n            var offsetXRange = _this.adjustOffsetRange(offsetX / width);\n            // 更新 start end range 范围\n            _this.updateStartEnd(offsetXRange);\n            // 更新 ui\n            _this.updateUI(_this.getElementByLocalId('foreground'), _this.getElementByLocalId('minText'), _this.getElementByLocalId('maxText'));\n            _this.prevX = x;\n            _this.prevY = y;\n            _this.draw();\n            // 因为存储的 start、end 可能不一定是按大小存储的，所以排序一下，对外是 end >= start\n            _this.emit(SLIDER_CHANGE, [_this.get('start'), _this.get('end')].sort());\n            _this.delegateEmit('valuechanged', {\n                originValue: originValue,\n                value: [_this.get('start'), _this.get('end')],\n            });\n        };\n        _this.onMouseUp = function () {\n            // 结束之后，取消绑定的事件\n            if (_this.currentTarget) {\n                _this.currentTarget = undefined;\n            }\n            var containerDOM = _this.getContainerDOM();\n            if (containerDOM) {\n                containerDOM.removeEventListener('mousemove', _this.onMouseMove);\n                containerDOM.removeEventListener('mouseup', _this.onMouseUp);\n                // 防止滑动到 canvas 外部之后，状态丢失\n                containerDOM.removeEventListener('mouseleave', _this.onMouseUp);\n                // 移动端事件\n                containerDOM.removeEventListener('touchmove', _this.onMouseMove);\n                containerDOM.removeEventListener('touchend', _this.onMouseUp);\n                containerDOM.removeEventListener('touchcancel', _this.onMouseUp);\n            }\n        };\n        return _this;\n    }\n    Slider.prototype.setRange = function (min, max) {\n        this.set('minLimit', min);\n        this.set('maxLimit', max);\n    };\n    Slider.prototype.getRange = function () {\n        return {\n            min: this.get('minLimit') || 0,\n            max: this.get('maxLimit') || 1,\n        };\n    };\n    Slider.prototype.setValue = function (value) {\n        if (isArray(value) && value.length === 2) {\n            var originValue = [this.get('start'), this.get('end')];\n            this.update({\n                start: value[0],\n                end: value[1],\n            });\n            if (!this.get('updateAutoRender')) {\n                this.render();\n            }\n            this.delegateEmit('valuechanged', {\n                originValue: originValue,\n                value: value,\n            });\n        }\n    };\n    Slider.prototype.getValue = function () {\n        return [this.get('start'), this.get('end')];\n    };\n    Slider.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'slider', x: 0, y: 0, width: 100, height: 16, backgroundStyle: {}, foregroundStyle: {}, handlerStyle: {}, textStyle: {}, defaultCfg: {\n                backgroundStyle: BACKGROUND_STYLE,\n                foregroundStyle: FOREGROUND_STYLE,\n                handlerStyle: HANDLER_STYLE,\n                textStyle: TEXT_STYLE,\n            } });\n    };\n    Slider.prototype.update = function (cfg) {\n        var start = cfg.start, end = cfg.end;\n        var validCfg = __assign({}, cfg);\n        if (!isNil(start)) {\n            validCfg.start = clamp(start, 0, 1);\n        }\n        if (!isNil(end)) {\n            validCfg.end = clamp(end, 0, 1);\n        }\n        _super.prototype.update.call(this, validCfg);\n        this.minHandler = this.getChildComponentById(this.getElementId('minHandler'));\n        this.maxHandler = this.getChildComponentById(this.getElementId('maxHandler'));\n    };\n    Slider.prototype.init = function () {\n        this.set('start', clamp(this.get('start'), 0, 1));\n        this.set('end', clamp(this.get('end'), 0, 1));\n        _super.prototype.init.call(this);\n    };\n    Slider.prototype.renderInner = function (group) {\n        var _a = this.cfg, start = _a.start, end = _a.end, width = _a.width, height = _a.height, _b = _a.trendCfg, trendCfg = _b === void 0 ? {} : _b, minText = _a.minText, maxText = _a.maxText, _c = _a.backgroundStyle, backgroundStyle = _c === void 0 ? {} : _c, _d = _a.foregroundStyle, foregroundStyle = _d === void 0 ? {} : _d, _e = _a.textStyle, textStyle = _e === void 0 ? {} : _e, _f = _a.handlerStyle, handlerStyle = _f === void 0 ? {} : _f;\n        var min = start * width;\n        var max = end * width;\n        // 趋势图数据\n        if (size(get(trendCfg, 'data'))) {\n            this.addComponent(group, __assign({ component: Trend, id: this.getElementId('trend'), x: 0, y: 0, width: width,\n                height: height }, trendCfg));\n        }\n        // 1. 背景\n        this.addShape(group, {\n            id: this.getElementId('background'),\n            type: 'rect',\n            attrs: __assign({ x: 0, y: 0, width: width,\n                height: height }, backgroundStyle),\n        });\n        // 2. 左右文字\n        var minTextShape = this.addShape(group, {\n            id: this.getElementId('minText'),\n            type: 'text',\n            attrs: __assign({ \n                // x: 0,\n                y: height / 2, textAlign: 'right', text: minText, silent: false }, textStyle),\n        });\n        var maxTextShape = this.addShape(group, {\n            id: this.getElementId('maxText'),\n            type: 'text',\n            attrs: __assign({ \n                // x: 0,\n                y: height / 2, textAlign: 'left', text: maxText, silent: false }, textStyle),\n        });\n        // 3. 前景 选中背景框\n        var foregroundShape = this.addShape(group, {\n            id: this.getElementId('foreground'),\n            name: 'foreground',\n            type: 'rect',\n            attrs: __assign({ \n                // x: 0,\n                y: 0, \n                // width: 0,\n                height: height }, foregroundStyle),\n        });\n        // 滑块相关的大小信息\n        // const handlerWidth = get(handlerStyle, 'width', 10);\n        var handlerHeight = get(handlerStyle, 'height', 24);\n        // 4. 左右滑块\n        this.minHandler = this.addComponent(group, __assign({ component: Handler, id: this.getElementId('minHandler'), name: 'handler-min', x: 0, y: (height - handlerHeight) / 2, width: width, height: handlerHeight, cursor: 'ew-resize' }, handlerStyle));\n        this.maxHandler = this.addComponent(group, __assign({ component: Handler, id: this.getElementId('maxHandler'), name: 'handler-max', x: 0, y: (height - handlerHeight) / 2, width: width, height: handlerHeight, cursor: 'ew-resize' }, handlerStyle));\n        this.updateUI(foregroundShape, minTextShape, maxTextShape);\n    };\n    Slider.prototype.applyOffset = function () {\n        this.moveElementTo(this.get('group'), {\n            x: this.get('x'),\n            y: this.get('y'),\n        });\n    };\n    Slider.prototype.initEvent = function () {\n        this.bindEvents();\n    };\n    Slider.prototype.updateUI = function (foregroundShape, minTextShape, maxTextShape) {\n        var _a = this.cfg, start = _a.start, end = _a.end, width = _a.width, minText = _a.minText, maxText = _a.maxText, handlerStyle = _a.handlerStyle;\n        var min = start * width;\n        var max = end * width;\n        // 1. foreground\n        foregroundShape.attr('x', min);\n        foregroundShape.attr('width', max - min);\n        // 滑块相关的大小信息\n        var handlerWidth = get(handlerStyle, 'width', DEFAULT_HANDLER_WIDTH);\n        // 设置文本\n        minTextShape.attr('text', minText);\n        maxTextShape.attr('text', maxText);\n        var _b = this._dodgeText([min, max], minTextShape, maxTextShape), minAttrs = _b[0], maxAttrs = _b[1];\n        // 2. 左侧滑块和文字位置\n        if (this.minHandler) {\n            this.minHandler.update({\n                x: min - handlerWidth / 2,\n            });\n            if (!this.get('updateAutoRender')) {\n                this.minHandler.render();\n            }\n        }\n        each(minAttrs, function (v, k) { return minTextShape.attr(k, v); });\n        // 3. 右侧滑块和文字位置\n        if (this.maxHandler) {\n            this.maxHandler.update({\n                x: max - handlerWidth / 2,\n            });\n            if (!this.get('updateAutoRender')) {\n                this.maxHandler.render();\n            }\n        }\n        each(maxAttrs, function (v, k) { return maxTextShape.attr(k, v); });\n    };\n    Slider.prototype.bindEvents = function () {\n        var group = this.get('group');\n        group.on('handler-min:mousedown', this.onMouseDown('minHandler'));\n        group.on('handler-min:touchstart', this.onMouseDown('minHandler'));\n        // 2. 右滑块的滑动\n        group.on('handler-max:mousedown', this.onMouseDown('maxHandler'));\n        group.on('handler-max:touchstart', this.onMouseDown('maxHandler'));\n        // 3. 前景选中区域\n        var foreground = group.findById(this.getElementId('foreground'));\n        foreground.on('mousedown', this.onMouseDown('foreground'));\n        foreground.on('touchstart', this.onMouseDown('foreground'));\n    };\n    /**\n     * 调整 offsetRange，因为一些范围的限制\n     * @param offsetRange\n     */\n    Slider.prototype.adjustOffsetRange = function (offsetRange) {\n        var _a = this.cfg, start = _a.start, end = _a.end;\n        // 针对不同的滑动组件，处理的方式不同\n        switch (this.currentTarget) {\n            case 'minHandler': {\n                var min = 0 - start;\n                var max = 1 - start;\n                return Math.min(max, Math.max(min, offsetRange));\n            }\n            case 'maxHandler': {\n                var min = 0 - end;\n                var max = 1 - end;\n                return Math.min(max, Math.max(min, offsetRange));\n            }\n            case 'foreground': {\n                var min = 0 - start;\n                var max = 1 - end;\n                return Math.min(max, Math.max(min, offsetRange));\n            }\n            default:\n                return 0;\n        }\n    };\n    Slider.prototype.updateStartEnd = function (offsetRange) {\n        var _a = this.cfg, start = _a.start, end = _a.end;\n        // 操作不同的组件，反馈不一样\n        switch (this.currentTarget) {\n            case 'minHandler':\n                start += offsetRange;\n                break;\n            case 'maxHandler':\n                end += offsetRange;\n                break;\n            case 'foreground':\n                start += offsetRange;\n                end += offsetRange;\n                break;\n        }\n        this.set('start', start);\n        this.set('end', end);\n    };\n    /**\n     * 调整 text 的位置，自动躲避\n     * 根据位置，调整返回新的位置\n     * @param range\n     */\n    Slider.prototype._dodgeText = function (range, minTextShape, maxTextShape) {\n        var _a, _b;\n        var _c = this.cfg, handlerStyle = _c.handlerStyle, width = _c.width;\n        var PADDING = 2;\n        var handlerWidth = get(handlerStyle, 'width', DEFAULT_HANDLER_WIDTH);\n        var min = range[0], max = range[1];\n        var sorted = false;\n        // 如果交换了位置，则对应的 min max 也交互\n        if (min > max) {\n            _a = [max, min], min = _a[0], max = _a[1];\n            _b = [maxTextShape, minTextShape], minTextShape = _b[0], maxTextShape = _b[1];\n            sorted = true;\n        }\n        // 避让规则，优先显示在两侧，只有显示不下的时候，才显示在中间\n        var minBBox = minTextShape.getBBox();\n        var maxBBox = maxTextShape.getBBox();\n        var minAttrs = minBBox.width > min - PADDING\n            ? { x: min + handlerWidth / 2 + PADDING, textAlign: 'left' }\n            : { x: min - handlerWidth / 2 - PADDING, textAlign: 'right' };\n        var maxAttrs = maxBBox.width > width - max - PADDING\n            ? { x: max - handlerWidth / 2 - PADDING, textAlign: 'right' }\n            : { x: max + handlerWidth / 2 + PADDING, textAlign: 'left' };\n        return !sorted ? [minAttrs, maxAttrs] : [maxAttrs, minAttrs];\n    };\n    Slider.prototype.draw = function () {\n        var container = this.get('container');\n        var canvas = container && container.get('canvas');\n        if (canvas) {\n            canvas.draw();\n        }\n    };\n    Slider.prototype.getContainerDOM = function () {\n        var container = this.get('container');\n        var canvas = container && container.get('canvas');\n        return canvas && canvas.get('container');\n    };\n    return Slider;\n}(GroupComponent));\nexport { Slider };\nexport default Slider;\n//# sourceMappingURL=slider.js.map","import { __assign, __extends } from \"tslib\";\nimport { addEventListener } from '@antv/dom-util';\nimport { clamp, get, noop } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nvar DEFAULT_STYLE = {\n    trackColor: 'rgba(0,0,0,0)',\n    thumbColor: 'rgba(0,0,0,0.15)',\n    size: 8,\n    lineCap: 'round',\n};\nexport var DEFAULT_THEME = {\n    // 默认样式\n    default: DEFAULT_STYLE,\n    // 鼠标 hover 的样式\n    hover: {\n        thumbColor: 'rgba(0,0,0,0.2)',\n    },\n};\nvar Scrollbar = /** @class */ (function (_super) {\n    __extends(Scrollbar, _super);\n    function Scrollbar() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.clearEvents = noop;\n        _this.onStartEvent = function (isMobile) { return function (e) {\n            _this.isMobile = isMobile;\n            e.originalEvent.preventDefault();\n            var clientX = isMobile ? get(e.originalEvent, 'touches.0.clientX') : e.clientX;\n            var clientY = isMobile ? get(e.originalEvent, 'touches.0.clientY') : e.clientY;\n            // 将开始的点记录下来\n            _this.startPos = _this.cfg.isHorizontal ? clientX : clientY;\n            _this.bindLaterEvent();\n        }; };\n        _this.bindLaterEvent = function () {\n            var containerDOM = _this.getContainerDOM();\n            var events = [];\n            if (_this.isMobile) {\n                events = [\n                    addEventListener(containerDOM, 'touchmove', _this.onMouseMove),\n                    addEventListener(containerDOM, 'touchend', _this.onMouseUp),\n                    addEventListener(containerDOM, 'touchcancel', _this.onMouseUp),\n                ];\n            }\n            else {\n                events = [\n                    addEventListener(containerDOM, 'mousemove', _this.onMouseMove),\n                    addEventListener(containerDOM, 'mouseup', _this.onMouseUp),\n                    // 为了保证划出 canvas containerDom 时还没触发 mouseup\n                    addEventListener(containerDOM, 'mouseleave', _this.onMouseUp),\n                ];\n            }\n            _this.clearEvents = function () {\n                events.forEach(function (e) {\n                    e.remove();\n                });\n            };\n        };\n        // 拖拽滑块的事件回调\n        // 这里是 dom 原生事件，绑定在 dom 元素上的\n        _this.onMouseMove = function (e) {\n            var _a = _this.cfg, isHorizontal = _a.isHorizontal, thumbOffset = _a.thumbOffset;\n            e.preventDefault();\n            var clientX = _this.isMobile ? get(e, 'touches.0.clientX') : e.clientX;\n            var clientY = _this.isMobile ? get(e, 'touches.0.clientY') : e.clientY;\n            // 鼠标松开的位置\n            var endPos = isHorizontal ? clientX : clientY;\n            // 滑块需要移动的距离, 由于这里是对滑块监听，所以移动的距离就是 diffDis, 如果监听对象是 container dom，则需要算比例\n            var diff = endPos - _this.startPos;\n            // 更新 _startPos\n            _this.startPos = endPos;\n            _this.updateThumbOffset(thumbOffset + diff);\n        };\n        _this.onMouseUp = function (e) {\n            e.preventDefault();\n            _this.clearEvents();\n        };\n        // 点击滑道的事件回调,移动滑块位置\n        _this.onTrackClick = function (e) {\n            var _a = _this.cfg, isHorizontal = _a.isHorizontal, x = _a.x, y = _a.y, thumbLen = _a.thumbLen;\n            var containerDOM = _this.getContainerDOM();\n            var rect = containerDOM.getBoundingClientRect();\n            var clientX = e.clientX, clientY = e.clientY;\n            var offset = isHorizontal ? clientX - rect.left - x - thumbLen / 2 : clientY - rect.top - y - thumbLen / 2;\n            var newOffset = _this.validateRange(offset);\n            _this.updateThumbOffset(newOffset);\n        };\n        _this.onThumbMouseOver = function () {\n            var thumbColor = _this.cfg.theme.hover.thumbColor;\n            _this.getElementByLocalId('thumb').attr('stroke', thumbColor);\n            _this.draw();\n        };\n        _this.onThumbMouseOut = function () {\n            var thumbColor = _this.cfg.theme.default.thumbColor;\n            _this.getElementByLocalId('thumb').attr('stroke', thumbColor);\n            _this.draw();\n        };\n        return _this;\n    }\n    Scrollbar.prototype.setRange = function (min, max) {\n        this.set('minLimit', min);\n        this.set('maxLimit', max);\n    };\n    Scrollbar.prototype.getRange = function () {\n        var min = this.get('minLimit');\n        var max = this.get('maxLimit');\n        return { min: min, max: max };\n    };\n    Scrollbar.prototype.setValue = function (value) {\n        var originalValue = this.getValue();\n        this.update({\n            thumbOffset: this.get('trackLen') - this.get('thumbLen') * clamp(value, 0, 1),\n        });\n        this.delegateEmit('valuechange', {\n            originalValue: originalValue,\n            value: this.getValue(),\n        });\n    };\n    Scrollbar.prototype.getValue = function () {\n        return clamp(this.get('thumbOffset') / (this.get('trackLen') - this.get('thumbLen')), 0, 1);\n    };\n    Scrollbar.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'scrollbar', isHorizontal: true, minThumbLen: 20, thumbOffset: 0, theme: DEFAULT_THEME });\n    };\n    Scrollbar.prototype.renderInner = function (group) {\n        this.renderTrackShape(group);\n        this.renderThumbShape(group);\n    };\n    Scrollbar.prototype.applyOffset = function () {\n        this.moveElementTo(this.get('group'), {\n            x: this.get('x'),\n            y: this.get('y'),\n        });\n    };\n    Scrollbar.prototype.initEvent = function () {\n        this.bindEvents();\n    };\n    // 创建滑道的 shape\n    Scrollbar.prototype.renderTrackShape = function (group) {\n        var _a = this.cfg, trackLen = _a.trackLen, _b = _a.theme, theme = _b === void 0 ? { default: {} } : _b;\n        var _c = theme.default, lineCap = _c.lineCap, trackColor = _c.trackColor, size = _c.size;\n        var attrs = this.get('isHorizontal')\n            ? {\n                x1: 0 + size / 2,\n                y1: size / 2,\n                x2: trackLen - size / 2,\n                y2: size / 2,\n                lineWidth: size,\n                stroke: trackColor,\n                lineCap: lineCap,\n            }\n            : {\n                x1: size / 2,\n                y1: 0 + size / 2,\n                x2: size / 2,\n                y2: trackLen - size / 2,\n                lineWidth: size,\n                stroke: trackColor,\n                lineCap: lineCap,\n            };\n        return this.addShape(group, {\n            id: this.getElementId('track'),\n            name: 'track',\n            type: 'line',\n            attrs: attrs,\n        });\n    };\n    // 创建滑块的 shape\n    Scrollbar.prototype.renderThumbShape = function (group) {\n        var _a = this.cfg, thumbOffset = _a.thumbOffset, thumbLen = _a.thumbLen, _b = _a.theme, theme = _b === void 0 ? { default: {} } : _b;\n        var _c = theme.default, size = _c.size, lineCap = _c.lineCap, thumbColor = _c.thumbColor;\n        var attrs = this.get('isHorizontal')\n            ? {\n                x1: thumbOffset + size / 2,\n                y1: size / 2,\n                x2: thumbOffset + thumbLen - size / 2,\n                y2: size / 2,\n                lineWidth: size,\n                stroke: thumbColor,\n                lineCap: lineCap,\n                cursor: 'default',\n            }\n            : {\n                x1: size / 2,\n                y1: thumbOffset + size / 2,\n                x2: size / 2,\n                y2: thumbOffset + thumbLen - size / 2,\n                lineWidth: size,\n                stroke: thumbColor,\n                lineCap: lineCap,\n                cursor: 'default',\n            };\n        return this.addShape(group, {\n            id: this.getElementId('thumb'),\n            name: 'thumb',\n            type: 'line',\n            attrs: attrs,\n        });\n    };\n    Scrollbar.prototype.bindEvents = function () {\n        var group = this.get('group');\n        group.on('mousedown', this.onStartEvent(false));\n        group.on('mouseup', this.onMouseUp);\n        group.on('touchstart', this.onStartEvent(true));\n        group.on('touchend', this.onMouseUp);\n        var trackShape = group.findById(this.getElementId('track'));\n        trackShape.on('click', this.onTrackClick);\n        var thumbShape = group.findById(this.getElementId('thumb'));\n        thumbShape.on('mouseover', this.onThumbMouseOver);\n        thumbShape.on('mouseout', this.onThumbMouseOut);\n    };\n    Scrollbar.prototype.getContainerDOM = function () {\n        var container = this.get('container');\n        var canvas = container && container.get('canvas');\n        return canvas && canvas.get('container');\n    };\n    Scrollbar.prototype.validateRange = function (offset) {\n        var _a = this.cfg, thumbLen = _a.thumbLen, trackLen = _a.trackLen;\n        var newOffset = offset;\n        if (offset + thumbLen > trackLen) {\n            newOffset = trackLen - thumbLen;\n        }\n        else if (offset + thumbLen < thumbLen) {\n            newOffset = 0;\n        }\n        return newOffset;\n    };\n    Scrollbar.prototype.draw = function () {\n        var container = this.get('container');\n        var canvas = container && container.get('canvas');\n        if (canvas) {\n            canvas.draw();\n        }\n    };\n    Scrollbar.prototype.updateThumbOffset = function (offset) {\n        var _a = this.cfg, thumbOffset = _a.thumbOffset, isHorizontal = _a.isHorizontal, thumbLen = _a.thumbLen, size = _a.size;\n        var newOffset = this.validateRange(offset);\n        if (newOffset === thumbOffset) {\n            // 如果更新后的 offset 与原值相同，则不改变\n            return;\n        }\n        var thumbShape = this.getElementByLocalId('thumb');\n        if (isHorizontal) {\n            thumbShape.attr({\n                x1: newOffset + size / 2,\n                x2: newOffset + thumbLen - size / 2,\n            });\n        }\n        else {\n            thumbShape.attr({\n                y1: newOffset + size / 2,\n                y2: newOffset + thumbLen - size / 2,\n            });\n        }\n        this.emitOffsetChange(newOffset);\n    };\n    Scrollbar.prototype.emitOffsetChange = function (offset) {\n        var _a = this.cfg, originalValue = _a.thumbOffset, trackLen = _a.trackLen, thumbLen = _a.thumbLen;\n        this.cfg.thumbOffset = offset;\n        // 发送事件\n        this.emit('scrollchange', {\n            thumbOffset: offset,\n            ratio: clamp(offset / (trackLen - thumbLen), 0, 1),\n        });\n        this.delegateEmit('valuechange', {\n            originalValue: originalValue,\n            value: offset,\n        });\n    };\n    return Scrollbar;\n}(GroupComponent));\nexport { Scrollbar };\n//# sourceMappingURL=scrollbar.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sub = exports.mul = undefined;\nexports.create = create;\nexports.fromMat4 = fromMat4;\nexports.clone = clone;\nexports.copy = copy;\nexports.fromValues = fromValues;\nexports.set = set;\nexports.identity = identity;\nexports.transpose = transpose;\nexports.invert = invert;\nexports.adjoint = adjoint;\nexports.determinant = determinant;\nexports.multiply = multiply;\nexports.translate = translate;\nexports.rotate = rotate;\nexports.scale = scale;\nexports.fromTranslation = fromTranslation;\nexports.fromRotation = fromRotation;\nexports.fromScaling = fromScaling;\nexports.fromMat2d = fromMat2d;\nexports.fromQuat = fromQuat;\nexports.normalFromMat4 = normalFromMat4;\nexports.projection = projection;\nexports.str = str;\nexports.frob = frob;\nexports.add = add;\nexports.subtract = subtract;\nexports.multiplyScalar = multiplyScalar;\nexports.multiplyScalarAndAdd = multiplyScalarAndAdd;\nexports.exactEquals = exactEquals;\nexports.equals = equals;\n\nvar _common = require('./common.js');\n\nvar glMatrix = _interopRequireWildcard(_common);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\nfunction create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {mat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\nfunction fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {mat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\nfunction clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nfunction copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\nfunction fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\nfunction set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\nfunction identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nfunction transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nfunction invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20;\n\n  // Calculate the determinant\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nfunction adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n\n/**\n * Calculates the determinant of a mat3\n *\n * @param {mat3} a the source matrix\n * @returns {Number} determinant of a\n */\nfunction determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nfunction multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to translate\n * @param {vec2} v vector to translate by\n * @returns {mat3} out\n */\nfunction translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nfunction rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n};\n\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to rotate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\nfunction scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {vec2} v Translation vector\n * @returns {mat3} out\n */\nfunction fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nfunction fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {vec2} v Scaling vector\n * @returns {mat3} out\n */\nfunction fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat2d} a the matrix to copy\n * @returns {mat3} out\n **/\nfunction fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n\n/**\n* Calculates a 3x3 matrix from the given quaternion\n*\n* @param {mat3} out mat3 receiving operation result\n* @param {quat} q Quaternion to create matrix from\n*\n* @returns {mat3} out\n*/\nfunction fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n\n  return out;\n}\n\n/**\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n*\n* @param {mat3} out mat3 receiving operation result\n* @param {mat4} a Mat4 to derive the normal matrix from\n*\n* @returns {mat3} out\n*/\nfunction normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32;\n\n  // Calculate the determinant\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n\n  return out;\n}\n\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\nfunction projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Returns a string representation of a mat3\n *\n * @param {mat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nfunction str(a) {\n  return 'mat3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ')';\n}\n\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {mat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nfunction frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2));\n}\n\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nfunction add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nfunction subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\nfunction multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\nfunction multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {mat3} a The first matrix.\n * @param {mat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nfunction exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {mat3} a The first matrix.\n * @param {mat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nfunction equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\nvar mul = exports.mul = multiply;\n\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\nvar sub = exports.sub = subtract;","// components parser\nimport AxisParser from './axis/parser';\nimport GuideLine from './guide-line';\nimport LabelParser from './label/parser';\n\n// components state methods\nimport axisState from './axis/state';\nimport labelState from './label/state';\nimport tooltipState from './tooltip/state';\n\ntype FirstArgs<T> = T extends new (first: infer U) => any ? U : never;\n\nconst COMPONENT_MAPPER = {\n  axis: AxisParser,\n  label: LabelParser,\n  guideLine: GuideLine,\n};\n\nconst STATE_MAPPER = {\n  tooltip: tooltipState,\n  label: labelState,\n  axis: axisState,\n};\n\nexport function getComponent<K extends keyof typeof COMPONENT_MAPPER>(\n  name: K,\n  cfg: FirstArgs<typeof COMPONENT_MAPPER[K]>\n) {\n  const Components = COMPONENT_MAPPER[name];\n  return new Components(cfg).config;\n}\n\nexport function getComponentStateMethod(name, type) {\n  return STATE_MAPPER[name][type];\n}\n","import * as matrixUtil from '@antv/matrix-util';\nimport { each, clone } from '@antv/util';\n\nfunction magnitude(v) {\n  let sum = 0;\n  each(v, (value) => {\n    sum += value * value;\n  });\n  return Math.sqrt(sum);\n}\n\nfunction dotProduct2D(va, vb) {\n  return va.x * vb.y + va.y * vb.x;\n}\n\nfunction angleTo(va, vb) {\n  const magA = magnitude(va);\n  const magB = magnitude(vb);\n  const dot = dotProduct2D(va, vb);\n  const angle = Math.acos(dot / magA / magB);\n  return angle;\n}\n\nfunction crossProduct2D(va, vb) {\n  const magA = magnitude(va);\n  const magB = magnitude(vb);\n  const dot = dotProduct2D(va, vb);\n  const angle = Math.acos(dot / magA / magB);\n  return magA * magB * Math.sin(angle);\n}\n\nfunction crossProduct3D(va, vb) {\n  const ax = va.x,\n    ay = va.y,\n    az = va.z;\n  const bx = vb.x,\n    by = vb.y,\n    bz = vb.z;\n\n  const x = ay * bz - az * by;\n  const y = az * bx - ax * bz;\n  const z = ax * by - ay * bx;\n\n  return { x, y, z };\n}\n\nfunction sub2D(va, vb) {\n  return { x: va.x - vb.x, y: va.y - vb.y };\n}\n\nfunction applyMatrix(point, matrix, tag = 1) {\n  const vector = [point.x, point.y, tag];\n  matrixUtil.vec3.transformMat3(vector, vector, matrix);\n  return {\n    x: vector[0],\n    y: vector[1],\n  };\n}\n\nfunction isBetween(value, min, max) {\n  return value >= min && value <= max;\n}\n\nconst tolerance = 0.001;\n\nfunction getLineIntersect(p0, p1, p2, p3) {\n  const E = {\n    x: p2.x - p0.x,\n    y: p2.y - p0.y,\n  };\n  const D0 = {\n    x: p1.x - p0.x,\n    y: p1.y - p0.y,\n  };\n  const D1 = {\n    x: p3.x - p2.x,\n    y: p3.y - p2.y,\n  };\n  const kross = D0.x * D1.y - D0.y * D1.x;\n  const sqrKross = kross * kross;\n  const sqrLen0 = D0.x * D0.x + D0.y * D0.y;\n  const sqrLen1 = D1.x * D1.x + D1.y * D1.y;\n  let point = null;\n  if (sqrKross > tolerance * sqrLen0 * sqrLen1) {\n    const s = (E.x * D1.y - E.y * D1.x) / kross;\n    const t = (E.x * D0.y - E.y * D0.x) / kross;\n    if (isBetween(s, 0, 1) && isBetween(t, 0, 1)) {\n      point = {\n        x: p0.x + s * D0.x,\n        y: p0.y + s * D0.y,\n      };\n    }\n  }\n  return point;\n}\n\nfunction isPointInPolygon(p, polygon) {\n  /** 射线法 */\n  let inside = false;\n  for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n    const xi = polygon[i].x;\n    const yi = polygon[i].y;\n    const xj = polygon[j].x;\n    const yj = polygon[j].y;\n\n    const intersect = yi > p.y !== yj > p.y && p.x <= ((xj - xi) * (p.y - yi)) / (yj - yi) + xi;\n    if (intersect) {\n      inside = !inside;\n    }\n  }\n  return inside;\n}\n\nfunction sqr(v) {\n  return v * v;\n}\n\nfunction dist2(a, b) {\n  return Math.sqrt(sqr(a.x - b.x) + sqr(a.y - b.y));\n}\n\nfunction distBetweenPoints(a, b) {\n  return Math.sqrt(sqr(a.x - b.x) + sqr(a.y - b.y));\n}\n\nfunction distBetweenPointLine(p, p1, p2) {\n  const l2 = dist2(p1, p2);\n  if (l2 === 0) {\n    return dist2(p, p1);\n  }\n  let t = ((p.x - p1.x) * (p2.x - p1.x) + (p.y - p1.y) * (p2.y - p1.y)) / l2;\n  t = Math.max(0, Math.min(1, t));\n  const distSquare = dist2(p, { x: p1.x + t * (p2.x - p1.x), y: p1.y + t * (p2.y - p1.y) });\n  return Math.sqrt(distSquare);\n}\n\n// todo：待优化 https://blog.csdn.net/WilliamSun0122/article/details/77994526\nfunction minDistBetweenPointPolygon(p, polygon) {\n  let min = Infinity;\n  /** vertice to vertice */\n  each(polygon, (v) => {\n    const dist = Math.sqrt(dist2(v, p));\n    if (min > dist) {\n      min = dist;\n    }\n  });\n  /** vertice to edge */\n  for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n    const xi = polygon[i].x;\n    const yi = polygon[i].y;\n    const xj = polygon[j].x;\n    const yj = polygon[j].y;\n    const dist = distBetweenPointLine(p, { x: xi, y: yi }, { x: xj, y: yj });\n    if (min > dist) {\n      min = dist;\n    }\n  }\n\n  return min;\n}\n\nfunction isPolygonIntersection(polyA, polyB) {\n  for (const p of polyA) {\n    const inside = isPointInPolygon(p, polyB);\n    if (inside) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction minDistBetweenConvexPolygon(polyA, polyB) {\n  if (isPolygonIntersection(polyA, polyB)) {\n    return 0;\n  }\n  let minA = Infinity;\n  let minB = Infinity;\n  each(polyA, (v) => {\n    const localMin = minDistBetweenPointPolygon(v, polyB);\n    if (minA > localMin) {\n      minA = localMin;\n    }\n  });\n  each(polyB, (v) => {\n    const localMin = minDistBetweenPointPolygon(v, polyA);\n    if (minB > localMin) {\n      minB = localMin;\n    }\n  });\n\n  return Math.min(minA, minB);\n}\n\nfunction bboxOnRotate(shape) {\n  const bbox = shape.getBBox();\n  const x = bbox.minX;\n  const y = bbox.minY;\n  /*\n   * step1: 获得旋转后的shape包围盒\n   * 将包围盒对齐到原点，apply旋转矩阵\n   * 移回原来的位置\n   */\n  const bboxWidth = bbox.maxX - bbox.minX;\n  const bboxHeight = bbox.maxY - bbox.minY;\n  // const matrix = shape.getTotalMatrix();\n  const matrix = shape.attr('matrix');\n  let ulMatrix;\n  if (matrix) {\n    ulMatrix = [matrix[0], matrix[1], 0, matrix[3], matrix[4], 0, 0, 0, 1];\n  } else {\n    ulMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n  }\n  const top_left = applyMatrix({ x: 0, y: 0 }, ulMatrix);\n  top_left.x += x;\n  top_left.y += y;\n  const top_right = applyMatrix({ x: bboxWidth, y: 0 }, ulMatrix);\n  top_right.x += x;\n  top_right.y += y;\n  const bottom_left = applyMatrix({ x: 0, y: bboxHeight }, ulMatrix);\n  bottom_left.x += x;\n  bottom_left.y += y;\n  const bottom_right = applyMatrix({ x: bboxWidth, y: bboxHeight }, ulMatrix);\n  bottom_right.x += x;\n  bottom_right.y += y;\n  /** step2：根据旋转后的画布位置重新计算包围盒，以免图形进行旋转后上下颠倒 */\n  const points = [top_left, top_right, bottom_left, bottom_right];\n  points.sort((a, b) => {\n    return a.y - b.y;\n  });\n  const minY = points[0].y;\n  const maxY = points[points.length - 1].y;\n  const tops = [points[0], points[1]];\n  const bottoms = [points[2], points[3]];\n  const topLeft = tops[0].x < tops[1].x ? tops[0] : tops[1];\n  const topRight = tops[0].x < tops[1].x ? tops[1] : tops[0];\n  const bottomLeft = bottoms[0].x < bottoms[1].x ? bottoms[0] : bottoms[1];\n  const bottomRight = bottoms[0].x < bottoms[1].x ? bottoms[1] : bottoms[0];\n  points.sort((a, b) => {\n    return a.x - b.x;\n  });\n  const minX = points[0].x;\n  const maxX = points[points.length - 1].x;\n  const node = {\n    width: maxX - minX,\n    height: maxY - minY,\n    left: minX,\n    right: maxX,\n    top: minY,\n    bottom: maxY,\n    topLeft,\n    topRight,\n    bottomLeft,\n    bottomRight,\n    centerX: minX + (maxX - minX) / 2,\n    centerY: minY + (maxY - minY) / 2,\n    // shape\n  };\n  return node;\n}\n\n/**\n * 线简化算法\n */\n\nconst THRESHOLD = 2;\n\nfunction lineSimplification(points) {\n  if (points.length < 5) {\n    return points;\n  }\n  return DouglasPeucker(points, THRESHOLD);\n}\n\n// https://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm\nfunction DouglasPeucker(points, threshold) {\n  let result;\n  let max = -Infinity;\n  let index = 0;\n  const endIndex = points.length - 1;\n  for (let i = 1; i < endIndex; i++) {\n    const point = points[i];\n    const line = { start: points[0], end: points[endIndex] };\n    const dist = distBetweenPointLine(point, line.start, line.end);\n    if (dist > max) {\n      max = dist;\n      index = i;\n    }\n  }\n\n  if (max > threshold) {\n    const list1 = DouglasPeucker(points.slice(0, index + 1), threshold);\n    const list2 = DouglasPeucker(points.slice(index, points.length), threshold);\n    result = list1.concat(list2);\n  } else {\n    result = [points[0], points[points.length - 1]];\n  }\n  return result;\n}\n\n/** 统计的以后迁出去，暂时先放这里 */\nfunction getMedian(array) {\n  const list = clone(array);\n  list.sort((a, b) => {\n    return a - b;\n  });\n\n  const half = Math.floor(list.length / 2);\n\n  if (list.length % 2) {\n    return list[half];\n  }\n\n  return (list[half - 1] + list[half]) / 2.0;\n}\n\nfunction getMean(array) {\n  let sum: number = 0;\n  each(array, (num: number) => {\n    sum += num;\n  });\n  return sum / array.length;\n}\n\nfunction sturges(values) {\n  return Math.ceil(Math.log(values.length) / Math.LN2) + 1;\n}\n\nexport {\n  applyMatrix,\n  isBetween,\n  getLineIntersect,\n  isPointInPolygon,\n  distBetweenPoints,\n  distBetweenPointLine,\n  isPolygonIntersection,\n  minDistBetweenConvexPolygon,\n  bboxOnRotate,\n  dotProduct2D,\n  crossProduct2D,\n  crossProduct3D,\n  sub2D,\n  angleTo,\n  lineSimplification,\n  getMedian,\n  getMean,\n  sturges,\n  dist2,\n};\n\n/**\n * 获取 x/y/width/height指定的BBox边界上的所有点，由step抽样\n * @param x\n * @param y\n * @param width\n * @param height\n * @param step\n */\nexport function getStrokePoints(x: number, y: number, width: number, height: number, step = 2) {\n  const points: Array<[number, number]> = [];\n  // top\n  for (let curX = x; curX <= x + width; curX += step) {\n    points.push([curX, y]);\n  }\n  // right\n  for (let curY = y; curY <= y + height; curY += step) {\n    points.push([x + width, curY]);\n  }\n  // bottom\n  for (let curX = x + width; curX >= x; curX -= step) {\n    points.push([curX, y + height]);\n  }\n  // left\n  for (let curY = y + height; curY >= y; curY -= step) {\n    points.push([x, curY]);\n  }\n  return points;\n}\n","import { isNil, isNumber, filter } from '@antv/util';\nimport { timeIntervals } from '../interface/config';\nimport { ScaleConfig } from '@antv/scale';\n\nfunction adjustTimeTickInterval(interval: string) {\n  const intervals = timeIntervals;\n  const intervalArr = interval.split(' ');\n  const basicInterval = intervals[intervalArr[1]];\n  const intervalCount = parseInt(intervalArr[0], 10);\n  return [basicInterval.format, intervalCount * basicInterval.value];\n}\n\nexport function extractScale(desScale, axisConfig) {\n  if (!axisConfig) {\n    return desScale;\n  }\n\n  if (Object.prototype.hasOwnProperty.call(axisConfig, 'tickCount')) {\n    desScale.tickCount = axisConfig.tickCount;\n  }\n  if (Object.prototype.hasOwnProperty.call(axisConfig, 'type')) {\n    // fixme: dateTime plot层处理\n    if (axisConfig.type !== 'dateTime') {\n      desScale.type = axisConfig.type;\n    }\n  }\n  if (Object.prototype.hasOwnProperty.call(axisConfig, 'tickInterval')) {\n    if (axisConfig.type === 'time') {\n      desScale.tickInterval = adjustTimeTickInterval(axisConfig.tickInterval);\n    } else {\n      desScale.tickInterval = axisConfig.tickInterval;\n    }\n  }\n\n  if (axisConfig.type === 'time' && axisConfig.mask) {\n    desScale.mask = axisConfig.mask;\n  }\n\n  if (Object.prototype.hasOwnProperty.call(axisConfig, 'min')) {\n    desScale.min = axisConfig.min;\n  }\n  if (Object.prototype.hasOwnProperty.call(axisConfig, 'max')) {\n    desScale.max = axisConfig.max;\n  }\n  if (Object.prototype.hasOwnProperty.call(axisConfig, 'minLimit')) {\n    desScale.minLimit = axisConfig.minLimit;\n  }\n  if (Object.prototype.hasOwnProperty.call(axisConfig, 'maxLimit')) {\n    desScale.maxLimit = axisConfig.maxLimit;\n  }\n\n  if (Object.prototype.hasOwnProperty.call(axisConfig, 'nice')) {\n    desScale.nice = axisConfig.nice;\n  }\n  if (Object.prototype.hasOwnProperty.call(axisConfig, 'formatter')) {\n    desScale.formatter = axisConfig.formatter;\n  }\n  if (Object.prototype.hasOwnProperty.call(axisConfig, 'exponent')) {\n    desScale.exponent = axisConfig.exponent;\n  }\n  if (Object.prototype.hasOwnProperty.call(axisConfig, 'base')) {\n    desScale.base = axisConfig.base;\n  }\n  if (axisConfig.tickMethod) {\n    desScale.tickMethod = axisConfig.tickMethod;\n  }\n}\n\nexport function trySetScaleMinToZero(desScale: ScaleConfig, data: (number | number[] | string | undefined | null)[]) {\n  const validData: number[] = filter(data, (v) => isNumber(v)) as number[];\n  const min = Math.min(...validData);\n  const max = Math.max(...validData);\n\n  if (min > 0) {\n    if (isNil(desScale.min)) {\n      desScale.min = 0;\n    }\n  } else if (max < 0) {\n    if (isNil(desScale.max)) {\n      desScale.max = 0;\n    }\n  }\n}\n","import { head, filter, map, some } from '@antv/util';\nimport { View, Geometry, Element, IShape, IGroup, IElement, MappingDatum, ORIGIN } from '../dependents';\nimport BBox from '../util/bbox';\n\nexport function getAllGeometryByType(view: View, type: string): Geometry[] {\n  return filter(view.geometries, (geometry: Geometry) => geometry.type === type);\n}\n\nexport function getGeometryByType(view: View, type: string): Geometry | undefined {\n  return head(getAllGeometryByType(view, type));\n}\n\nexport function getGeometryShapes(geometry: Geometry): (IShape | IGroup)[] {\n  return map(geometry.elements, (element: Element) => element.shape);\n}\n\n/** 检测是否有和已存在的Shape数据`相等`的情况 */\nexport function checkOriginEqual(\n  cur: IElement,\n  dones: IElement[],\n  compare: (a: MappingDatum, b: MappingDatum) => boolean\n) {\n  return some(dones, (done) => {\n    return compare(done.get(ORIGIN), cur.get(ORIGIN));\n  });\n}\n\n/** 将label调整到panel内 */\nexport function moveInPanel(shape: IElement, panel: BBox) {\n  const box = shape.getBBox();\n  let deltaX = 0;\n  let deltaY = 0;\n\n  if (box.minX < panel.minX) {\n    deltaX = box.minX - panel.minX;\n  } else if (box.maxX > panel.maxX) {\n    deltaX = box.maxX - panel.maxX;\n  }\n  if (deltaX) {\n    shape.attr('x', shape.attr('x') - deltaX);\n  }\n\n  if (box.minY < panel.minY) {\n    deltaY = box.minY - panel.minY;\n  } else if (box.maxY > panel.maxY) {\n    deltaY = box.maxY - panel.maxY;\n  }\n  if (deltaY) {\n    shape.attr('y', shape.attr('y') - deltaY);\n  }\n}\n\n/**\n * 计算两个矩形之间的堆叠区域面积\n */\nexport function getOverlapArea(a: BBox, b: BBox, margin = 0) {\n  const xOverlap = Math.max(\n    0,\n    Math.min(a.x + a.width + margin, b.x + b.width + margin) - Math.max(a.x - margin, b.x - margin)\n  );\n  const yOverlap = Math.max(\n    0,\n    Math.min(a.y + a.height + margin, b.y + b.height + margin) - Math.max(a.y - margin, b.y - margin)\n  );\n\n  return xOverlap * yOverlap;\n}\n\n/** 检测是否和已布局的堆叠 */\nexport function checkShapeOverlap(cur: IElement, dones: IElement[]) {\n  const box = cur.getBBox();\n  return some(dones, (done) => {\n    const target = done.getBBox();\n    return getOverlapArea(box, target, 2) > 0;\n  });\n}\n","import { each } from '@antv/util';\n\nexport function rgb2arr(str: string) {\n  const colorStr: string = str.indexOf('#') === 0 ? str.substr(1) : str;\n  const arr = [];\n  arr.push(parseInt(colorStr.substr(1, 2), 16));\n  arr.push(parseInt(colorStr.substr(3, 2), 16));\n  arr.push(parseInt(colorStr.substr(5, 2), 16));\n  return arr;\n}\n\nexport function toHex(value) {\n  let v;\n  v = Math.round(value);\n  v = v.toString(16);\n  if (v.length === 1) {\n    v = `0${value}`;\n  }\n  return v;\n}\n\nexport function arr2rgb(arr) {\n  return `#${toHex(arr[0]) + toHex(arr[1]) + toHex(arr[2])}`;\n}\n\nexport function mappingColor(band, gray) {\n  let reflect;\n  each(band, (b) => {\n    const map = b;\n    if (gray >= map.from && gray < map.to) {\n      reflect = map.color;\n    }\n  });\n  return reflect;\n}\n\n// 根据YIQ亮度判断指定颜色取反色是不是白色\n// http://24ways.org/2010/calculating-color-contrast\nexport const isContrastColorWhite = (rgb: string): boolean => {\n  const [r, g, b] = rgb2arr(rgb);\n  const isDark = (r * 299 + g * 587 + b * 114) / 1000 < 128;\n\n  return isDark;\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.forEach = exports.sqrLen = exports.sqrDist = exports.dist = exports.div = exports.mul = exports.sub = exports.len = undefined;\nexports.create = create;\nexports.clone = clone;\nexports.fromValues = fromValues;\nexports.copy = copy;\nexports.set = set;\nexports.add = add;\nexports.subtract = subtract;\nexports.multiply = multiply;\nexports.divide = divide;\nexports.ceil = ceil;\nexports.floor = floor;\nexports.min = min;\nexports.max = max;\nexports.round = round;\nexports.scale = scale;\nexports.scaleAndAdd = scaleAndAdd;\nexports.distance = distance;\nexports.squaredDistance = squaredDistance;\nexports.length = length;\nexports.squaredLength = squaredLength;\nexports.negate = negate;\nexports.inverse = inverse;\nexports.normalize = normalize;\nexports.dot = dot;\nexports.cross = cross;\nexports.lerp = lerp;\nexports.random = random;\nexports.transformMat2 = transformMat2;\nexports.transformMat2d = transformMat2d;\nexports.transformMat3 = transformMat3;\nexports.transformMat4 = transformMat4;\nexports.rotate = rotate;\nexports.angle = angle;\nexports.str = str;\nexports.exactEquals = exactEquals;\nexports.equals = equals;\n\nvar _common = require('./common.js');\n\nvar glMatrix = _interopRequireWildcard(_common);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\nfunction create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n  return out;\n}\n\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {vec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\nfunction clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\nfunction fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the source vector\n * @returns {vec2} out\n */\nfunction copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\nfunction set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nfunction add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nfunction subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nfunction multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nfunction divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to ceil\n * @returns {vec2} out\n */\nfunction ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to floor\n * @returns {vec2} out\n */\nfunction floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nfunction min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nfunction max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to round\n * @returns {vec2} out\n */\nfunction round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\nfunction scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\nfunction scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} distance between a and b\n */\nfunction distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.sqrt(x * x + y * y);\n}\n\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\nfunction squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n\n/**\n * Calculates the length of a vec2\n *\n * @param {vec2} a vector to calculate length of\n * @returns {Number} length of a\n */\nfunction length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.sqrt(x * x + y * y);\n}\n\n/**\n * Calculates the squared length of a vec2\n *\n * @param {vec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nfunction squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to negate\n * @returns {vec2} out\n */\nfunction negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to invert\n * @returns {vec2} out\n */\nfunction inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to normalize\n * @returns {vec2} out\n */\nfunction normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n  }\n  return out;\n}\n\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} dot product of a and b\n */\nfunction dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec3} out\n */\nfunction cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\nfunction lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\nfunction random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat2} m matrix to transform with\n * @returns {vec2} out\n */\nfunction transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat2d} m matrix to transform with\n * @returns {vec2} out\n */\nfunction transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat3} m matrix to transform with\n * @returns {vec2} out\n */\nfunction transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec2} out\n */\nfunction transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {vec2} a The vec2 point to rotate\n * @param {vec2} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec2} out\n */\nfunction rotate(out, a, b, c) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(c),\n      cosC = Math.cos(c);\n\n  //perform rotation and translate to correct position\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n\n  return out;\n}\n\n/**\n * Get the angle between two 2D vectors\n * @param {vec2} a The first operand\n * @param {vec2} b The second operand\n * @returns {Number} The angle in radians\n */\nfunction angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1];\n\n  var len1 = x1 * x1 + y1 * y1;\n  if (len1 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len1 = 1 / Math.sqrt(len1);\n  }\n\n  var len2 = x2 * x2 + y2 * y2;\n  if (len2 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len2 = 1 / Math.sqrt(len2);\n  }\n\n  var cosine = (x1 * x2 + y1 * y2) * len1 * len2;\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n\n/**\n * Returns a string representation of a vector\n *\n * @param {vec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nfunction str(a) {\n  return 'vec2(' + a[0] + ', ' + a[1] + ')';\n}\n\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {vec2} a The first vector.\n * @param {vec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nfunction exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {vec2} a The first vector.\n * @param {vec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nfunction equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n\n/**\n * Alias for {@link vec2.length}\n * @function\n */\nvar len = exports.len = length;\n\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\nvar sub = exports.sub = subtract;\n\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\nvar mul = exports.mul = multiply;\n\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\nvar div = exports.div = divide;\n\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\nvar dist = exports.dist = distance;\n\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\nvar sqrDist = exports.sqrDist = squaredDistance;\n\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\nvar sqrLen = exports.sqrLen = squaredLength;\n\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nvar forEach = exports.forEach = function () {\n  var vec = create();\n\n  return function (a, stride, offset, count, fn, arg) {\n    var i = void 0,\n        l = void 0;\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction minNum(array) {\n    return Math.min.apply(null, array);\n}\nfunction maxNum(array) {\n    return Math.max.apply(null, array);\n}\n/**\n * 两点之间的距离\n * @param {number} x1 起始点 x\n * @param {number} y1 起始点 y\n * @param {number} x2 结束点 x\n * @param {number} y2 结束点 y\n * @return {number} 距离\n */\nfunction distance(x1, y1, x2, y2) {\n    var dx = x1 - x2;\n    var dy = y1 - y2;\n    return Math.sqrt(dx * dx + dy * dy);\n}\nexports.distance = distance;\nfunction isNumberEqual(v1, v2) {\n    return Math.abs(v1 - v2) < 0.001;\n}\nexports.isNumberEqual = isNumberEqual;\nfunction getBBoxByArray(xArr, yArr) {\n    var minX = minNum(xArr);\n    var minY = minNum(yArr);\n    var maxX = maxNum(xArr);\n    var maxY = maxNum(yArr);\n    return {\n        x: minX,\n        y: minY,\n        width: maxX - minX,\n        height: maxY - minY,\n    };\n}\nexports.getBBoxByArray = getBBoxByArray;\nfunction getBBoxRange(x1, y1, x2, y2) {\n    return {\n        minX: minNum([x1, x2]),\n        maxX: maxNum([x1, x2]),\n        minY: minNum([y1, y2]),\n        maxY: maxNum([y1, y2]),\n    };\n}\nexports.getBBoxRange = getBBoxRange;\nfunction piMod(angle) {\n    return (angle + Math.PI * 2) % (Math.PI * 2);\n}\nexports.piMod = piMod;\n//# sourceMappingURL=util.js.map","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar __DEV__ = process.env.NODE_ENV !== 'production';\n\nvar warning = function() {};\n\nif (__DEV__) {\n  var printWarning = function printWarning(format, args) {\n    var len = arguments.length;\n    args = new Array(len > 1 ? len - 1 : 0);\n    for (var key = 1; key < len; key++) {\n      args[key - 1] = arguments[key];\n    }\n    var argIndex = 0;\n    var message = 'Warning: ' +\n      format.replace(/%s/g, function() {\n        return args[argIndex++];\n      });\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  }\n\n  warning = function(condition, format, args) {\n    var len = arguments.length;\n    args = new Array(len > 2 ? len - 2 : 0);\n    for (var key = 2; key < len; key++) {\n      args[key - 2] = arguments[key];\n    }\n    if (format === undefined) {\n      throw new Error(\n          '`warning(condition, format, ...args)` requires a warning ' +\n          'message argument'\n      );\n    }\n    if (!condition) {\n      printWarning.apply(null, [format].concat(args));\n    }\n  };\n}\n\nmodule.exports = warning;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_Y = 0; // 默认的 y 的值\n// 偏移之后，间距\nexports.MARGIN_RATIO = 1 / 2;\nexports.DODGE_RATIO = 1 / 2;\n// 散点分开之后，距离边界的距离\nexports.GAP = 0.05;\n//# sourceMappingURL=constant.js.map","var ENGINES = {};\n/**\n * 通过名字获取渲染 engine\n * @param name 渲染引擎名字\n * @returns G engine\n */\nexport function getEngine(name) {\n    var G = ENGINES[name];\n    if (!G) {\n        throw new Error(\"G engine '\" + name + \"' is not exist, please register it at first.\");\n    }\n    return G;\n}\n/**\n * 注册渲染引擎\n * @param name\n * @param engine\n */\nexport function registerEngine(name, engine) {\n    ENGINES[name] = engine;\n}\n//# sourceMappingURL=index.js.map","import { toArray } from '@antv/util';\nimport { SHAPE_TO_TAGS } from '../constant';\n/**\n * 创建并返回图形的 svg 元素\n * @param type svg类型\n */\nexport function createSVGElement(type) {\n    return document.createElementNS('http://www.w3.org/2000/svg', type);\n}\n/**\n * 创建并返回图形的 dom 元素\n * @param  {IShape} shape 图形\n * @return {SVGElement}\n */\nexport function createDom(shape) {\n    var type = SHAPE_TO_TAGS[shape.type];\n    var parent = shape.getParent();\n    if (!type) {\n        throw new Error(\"the type \" + shape.type + \" is not supported by svg\");\n    }\n    var element = createSVGElement(type);\n    if (shape.get('id')) {\n        element.id = shape.get('id');\n    }\n    shape.set('el', element);\n    shape.set('attrs', {});\n    // 对于 defs 下的 dom 节点，parent 为空，通过 context 统一挂载到 defs 节点下\n    if (parent) {\n        var parentNode = parent.get('el');\n        if (parentNode) {\n            parentNode.appendChild(element);\n        }\n        else {\n            // parentNode maybe null for group\n            parentNode = parent.createDom();\n            parent.set('el', parentNode);\n            parentNode.appendChild(element);\n        }\n    }\n    return element;\n}\n/**\n * 对 dom 元素进行排序\n * @param {IElement} element  元素\n * @param {sorter}   function 排序函数\n */\nexport function sortDom(element, sorter) {\n    var el = element.get('el');\n    var childList = toArray(el.children).sort(sorter);\n    // create empty fragment\n    var fragment = document.createDocumentFragment();\n    childList.forEach(function (child) {\n        fragment.appendChild(child);\n    });\n    el.appendChild(fragment);\n}\n/**\n * 将 dom 元素移动到父元素下的指定位置\n * @param {SVGElement} element     dom 元素\n * @param {number}     targetIndex 目标位置(从 0 开始)\n */\nexport function moveTo(element, targetIndex) {\n    var parentNode = element.parentNode;\n    var siblings = Array.from(parentNode.childNodes).filter(\n    // 要求为元素节点，且不能为 defs 节点\n    function (node) { return node.nodeType === 1 && node.nodeName.toLowerCase() !== 'defs'; });\n    // 获取目标节点\n    var target = siblings[targetIndex];\n    var currentIndex = siblings.indexOf(element);\n    // 如果目标节点存在\n    if (target) {\n        // 当前索引 > 目标索引，直接插入到目标节点之前即可\n        if (currentIndex > targetIndex) {\n            parentNode.insertBefore(element, target);\n        }\n        else if (currentIndex < targetIndex) {\n            // 当前索引 < 目标索引\n            // 获取目标节点的下一个节点\n            var targetNext = siblings[targetIndex + 1];\n            // 如果目标节点的下一个节点存在，插入到该节点之前\n            if (targetNext) {\n                parentNode.insertBefore(element, targetNext);\n            }\n            else {\n                // 如果该节点不存在，则追加到末尾\n                parentNode.appendChild(element);\n            }\n        }\n    }\n    else {\n        parentNode.appendChild(element);\n    }\n}\n//# sourceMappingURL=dom.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@antv/util\");\n// todo 这个到底目的是什么？\nvar toScaleString = function (scale, value) {\n    if (util_1.isString(value)) {\n        return value;\n    }\n    return scale.invert(scale.scale(value));\n};\n/**\n * 所有视觉通道属性的基类\n * @class Base\n */\nvar Attribute = /** @class */ (function () {\n    function Attribute(cfg) {\n        this.names = [];\n        this.scales = [];\n        this.linear = false;\n        this.values = [];\n        this.callback = function () { return []; };\n        // 解析配置\n        this._parseCfg(cfg);\n    }\n    /**\n     * 映射的值组成的数组\n     * @param params 对应 scale 顺序的值传入\n     */\n    Attribute.prototype.mapping = function () {\n        var _this = this;\n        var params = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n        }\n        var values = params.map(function (param, idx) {\n            return _this._toOriginParam(param, _this.scales[idx]);\n        });\n        return this.callback.apply(this, values);\n    };\n    /**\n     * 如果进行线性映射，返回对应的映射值\n     * @param percent\n     */\n    Attribute.prototype.getLinearValue = function (percent) {\n        // 分段数量\n        var steps = this.values.length - 1;\n        var step = Math.floor(steps * percent);\n        var leftPercent = steps * percent - step;\n        // todo 不懂这个逻辑\n        var start = this.values[step];\n        var end = step === steps ? start : this.values[step + 1];\n        // 线性方程\n        return start + (end - start) * leftPercent;\n    };\n    /**\n     * 根据度量获取属性名\n     */\n    Attribute.prototype.getNames = function () {\n        var scales = this.scales;\n        var names = this.names;\n        var length = Math.min(scales.length, names.length);\n        var rst = [];\n        for (var i = 0; i < length; i += 1) {\n            rst.push(names[i]);\n        }\n        return rst;\n    };\n    /**\n     * 获取所有的维度名\n     */\n    Attribute.prototype.getFields = function () {\n        return this.scales.map(function (scale) { return scale.field; });\n    };\n    /**\n     * 根据名称获取度量\n     * @param name\n     */\n    Attribute.prototype.getScale = function (name) {\n        return this.scales[this.names.indexOf(name)];\n    };\n    /**\n     * 默认的回调函数（用户没有自定义 callback，或者用户自定义 callback 返回空的时候，使用 values 映射）\n     * @param params\n     */\n    Attribute.prototype.defaultCallback = function () {\n        var _this = this;\n        var params = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n        }\n        // 没有 params 的情况，是指没有指定 fields，直接返回配置的 values 常量\n        if (params.length === 0) {\n            return this.values;\n        }\n        return params.map(function (param, idx) {\n            var scale = _this.scales[idx];\n            return scale.type === 'identity' ? scale.values[0] : _this._getAttributeValue(scale, param);\n        });\n    };\n    // 解析配置\n    Attribute.prototype._parseCfg = function (cfg) {\n        var _this = this;\n        var _a = cfg.type, type = _a === void 0 ? 'base' : _a, _b = cfg.names, names = _b === void 0 ? [] : _b, _c = cfg.scales, scales = _c === void 0 ? [] : _c, _d = cfg.values, values = _d === void 0 ? [] : _d, callback = cfg.callback;\n        this.type = type;\n        this.scales = scales;\n        this.values = values;\n        this.names = names;\n        // 构造 callback 方法\n        this.callback = function () {\n            var params = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                params[_i] = arguments[_i];\n            }\n            /**\n             * 当用户设置的 callback 返回 null 时, 应该返回默认 callback 中的值\n             */\n            if (callback) {\n                // 使用用户返回的值处理\n                var ret = callback.apply(void 0, params);\n                if (!util_1.isNil(ret)) {\n                    return [ret];\n                }\n            }\n            // 没有 callback 或者用户 callback 返回值为空，则使用默认的逻辑处理\n            return _this.defaultCallback.apply(_this, params);\n        };\n    };\n    // 获取属性值，将值映射到视觉通道\n    Attribute.prototype._getAttributeValue = function (scale, value) {\n        // 如果是非线性的字段，直接从 values 中取值即可\n        if (scale.isCategory && !this.linear) {\n            // 离散 scale 变换成索引\n            var idx = scale.translate(value);\n            return this.values[idx % this.values.length];\n        }\n        // 线性则使用线性值\n        var percent = scale.scale(value);\n        return this.getLinearValue(percent);\n    };\n    /**\n     * 通过 scale 拿到数据对应的原始的参数\n     * @param param\n     * @param scale\n     * @private\n     */\n    Attribute.prototype._toOriginParam = function (param, scale) {\n        // 是线性，直接返回\n        // 非线性，使用 scale 变换\n        return !scale.isLinear\n            ? util_1.isArray(param)\n                ? param.map(function (p) { return toScaleString(scale, p); })\n                : toScaleString(scale, param)\n            : param;\n    };\n    return Attribute;\n}());\nexports.default = Attribute;\n//# sourceMappingURL=base.js.map","import { __extends } from \"tslib\";\nimport colorUtil from '@antv/color-util';\nimport { isString } from '@antv/util';\nimport Attribute from './base';\nvar Color = /** @class */ (function (_super) {\n    __extends(Color, _super);\n    function Color(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.type = 'color';\n        _this.names = ['color'];\n        if (isString(_this.values)) {\n            _this.linear = true;\n        }\n        _this.gradient = colorUtil.gradient(_this.values);\n        return _this;\n    }\n    /**\n     * @override\n     */\n    Color.prototype.getLinearValue = function (percent) {\n        return this.gradient(percent);\n    };\n    return Color;\n}(Attribute));\nexport default Color;\n//# sourceMappingURL=color.js.map","import { __extends } from \"tslib\";\nimport Attribute from './base';\nvar Opacity = /** @class */ (function (_super) {\n    __extends(Opacity, _super);\n    function Opacity(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.type = 'opacity';\n        _this.names = ['opacity'];\n        return _this;\n    }\n    return Opacity;\n}(Attribute));\nexport default Opacity;\n//# sourceMappingURL=opacity.js.map","import { __extends } from \"tslib\";\nimport { isArray, isNil } from '@antv/util';\nimport Attribute from './base';\nvar Position = /** @class */ (function (_super) {\n    __extends(Position, _super);\n    function Position(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.names = ['x', 'y'];\n        _this.type = 'position';\n        return _this;\n    }\n    Position.prototype.mapping = function (x, y) {\n        var _a = this.scales, scaleX = _a[0], scaleY = _a[1];\n        if (isNil(x) || isNil(y)) {\n            return [];\n        }\n        return [\n            isArray(x) ? x.map(function (xi) { return scaleX.scale(xi); }) : scaleX.scale(x),\n            isArray(y) ? y.map(function (yi) { return scaleY.scale(yi); }) : scaleY.scale(y),\n        ];\n    };\n    return Position;\n}(Attribute));\nexport default Position;\n//# sourceMappingURL=position.js.map","import { __extends } from \"tslib\";\nimport Attribute from './base';\nvar Shape = /** @class */ (function (_super) {\n    __extends(Shape, _super);\n    function Shape(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.type = 'shape';\n        _this.names = ['shape'];\n        return _this;\n    }\n    /**\n     * @override\n     */\n    Shape.prototype.getLinearValue = function (percent) {\n        var idx = Math.round((this.values.length - 1) * percent);\n        return this.values[idx];\n    };\n    return Shape;\n}(Attribute));\nexport default Shape;\n//# sourceMappingURL=shape.js.map","import { __extends } from \"tslib\";\nimport Attribute from './base';\nvar Size = /** @class */ (function (_super) {\n    __extends(Size, _super);\n    function Size(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.type = 'size';\n        _this.names = ['size'];\n        return _this;\n    }\n    return Size;\n}(Attribute));\nexport default Size;\n//# sourceMappingURL=size.js.map","/* 依赖的模块，在这里统一引入，方便打包优化 */\nexport { Event, AbstractGroup, AbstractShape } from '@antv/g-base';\n// adjust\nexport { registerAdjust, getAdjust, Adjust } from '@antv/adjust/lib/factory';\n// attr\nexport { getAttribute, Attribute } from '@antv/attr/lib/factory';\nexport { Color } from '@antv/attr';\n// coordinate\nexport { getCoordinate, registerCoordinate, Coordinate } from '@antv/coord';\n// scale\nexport { getScale, registerScale, Scale } from '@antv/scale';\n// component\nimport { Annotation, Axis, Component, Crosshair, Grid, GroupComponent, HtmlComponent, Legend, Slider, Tooltip, } from '@antv/component';\nexport { HtmlComponent, GroupComponent, Component, Crosshair };\nexport { Annotation };\n// axis\nvar LineAxis = Axis.Line, CircleAxis = Axis.Circle;\nexport { LineAxis, CircleAxis };\n// grid\nvar LineGrid = Grid.Line, CircleGrid = Grid.Circle;\nexport { LineGrid, CircleGrid };\n// legend\nvar CategoryLegend = Legend.Category, ContinuousLegend = Legend.Continuous;\nexport { CategoryLegend, ContinuousLegend };\n// Tooltip\nvar HtmlTooltip = Tooltip.Html;\nexport { HtmlTooltip };\n// Slider\nexport { Slider };\n//# sourceMappingURL=dependents.js.map","import { __assign } from \"tslib\";\nimport { firstValue, get, isEmpty, isNil, isNumber, isString, valuesOfKey } from '@antv/util';\nimport { getScale } from '../dependents';\nvar dateRegex = /^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\\1(?:29|30)|(?:0?[13578]|1[02])\\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\\2(?:29))(\\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;\n/**\n * 获取字段对应数据的类型\n * @param field 数据字段名\n * @param data 数据源\n * @returns default type 返回对应的数据类型\n */\nfunction getDefaultType(value) {\n    var type = 'linear';\n    if (dateRegex.test(value)) {\n        type = 'time';\n    }\n    else if (isString(value)) {\n        type = 'cat';\n    }\n    return type;\n}\n/**\n * @ignore\n * 为指定的 `field` 字段数据创建 scale\n * @param field 字段名\n * @param [data] 数据集，可为空\n * @param [scaleDef] 列定义，可为空\n * @returns scale 返回创建的 Scale 实例\n */\nexport function createScaleByField(field, data, scaleDef) {\n    var validData = data || [];\n    if (isNumber(field) || (isNil(firstValue(validData, field)) && isEmpty(scaleDef))) {\n        var Identity = getScale('identity');\n        return new Identity({\n            field: field.toString(),\n            values: [field],\n        });\n    }\n    var values = valuesOfKey(validData, field);\n    // 如果已经定义过这个度量\n    var type = get(scaleDef, 'type', getDefaultType(values[0]));\n    var ScaleCtor = getScale(type);\n    return new ScaleCtor(__assign({ field: field,\n        values: values }, scaleDef));\n}\n/**\n * @ignore\n * 同步 scale\n * @todo 是否可以通过 scale.update() 方法进行更新\n * @param scale 需要同步的 scale 实例\n * @param newScale 同步源 Scale\n */\nexport function syncScale(scale, newScale) {\n    if (scale.type !== 'identity' && newScale.type !== 'identity') {\n        var obj = {};\n        for (var k in newScale) {\n            if (Object.prototype.hasOwnProperty.call(newScale, k)) {\n                obj[k] = newScale[k];\n            }\n        }\n        scale.change(obj);\n    }\n}\n/**\n * @ignore\n * get the scale name, if alias exist, return alias, or else field\n * @param scale\n * @returns the name of field\n */\nexport function getName(scale) {\n    return scale.alias || scale.field;\n}\n//# sourceMappingURL=scale.js.map","import { get, isBoolean } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getName } from './scale';\n/**\n * @ignore\n * get axis relative region ( 0 ~ 1) by direction when coordinate is rect\n * @param direction\n * @returns axis coordinate region\n */\nexport function getLineAxisRelativeRegion(direction) {\n    var start;\n    var end;\n    switch (direction) {\n        case DIRECTION.TOP:\n            start = { x: 0, y: 1 };\n            end = { x: 1, y: 1 };\n            break;\n        case DIRECTION.RIGHT:\n            start = { x: 1, y: 0 };\n            end = { x: 1, y: 1 };\n            break;\n        case DIRECTION.BOTTOM:\n            start = { x: 0, y: 0 };\n            end = { x: 1, y: 0 };\n            break;\n        case DIRECTION.LEFT:\n            start = { x: 0, y: 0 };\n            end = { x: 0, y: 1 };\n            break;\n        default:\n            start = end = { x: 0, y: 0 };\n    }\n    return { start: start, end: end };\n}\n/**\n * @ignore\n * get axis relative region ( 0 ~ 1) by direction when coordinate is polar\n * @param coordinate\n * @returns axis coordinate region\n */\nexport function getCircleAxisRelativeRegion(coordinate) {\n    var start;\n    var end;\n    if (coordinate.isTransposed) {\n        start = {\n            x: 0,\n            y: 0,\n        };\n        end = {\n            x: 1,\n            y: 0,\n        };\n    }\n    else {\n        start = {\n            x: 0,\n            y: 0,\n        };\n        end = {\n            x: 0,\n            y: 1,\n        };\n    }\n    return { start: start, end: end };\n}\n/**\n * @ignore\n * get the axis region from coordinate\n * @param coordinate\n * @param direction\n * @returns the axis region (start point, end point)\n */\nexport function getAxisRegion(coordinate, direction) {\n    var region = { start: { x: 0, y: 0 }, end: { x: 0, y: 0 } };\n    if (coordinate.isRect) {\n        region = getLineAxisRelativeRegion(direction);\n    }\n    else if (coordinate.isPolar) {\n        region = getCircleAxisRelativeRegion(coordinate);\n    }\n    var start = region.start, end = region.end;\n    return {\n        start: coordinate.convert(start),\n        end: coordinate.convert(end),\n    };\n}\n/**\n * @ignore\n * get axis factor\n * @param coordinate\n * @param direction\n * @returns factor\n */\nexport function getAxisFactor(coordinate, direction) {\n    // rect coordinate, by direction\n    if (coordinate.isRect) {\n        return coordinate.isTransposed\n            ? [DIRECTION.RIGHT, DIRECTION.BOTTOM].includes(direction)\n                ? 1\n                : -1\n            : [DIRECTION.BOTTOM, DIRECTION.RIGHT].includes(direction)\n                ? -1\n                : 1;\n    }\n    // polar y axis, by angle\n    if (coordinate.isPolar) {\n        var startAngle = coordinate.x.start;\n        return startAngle < 0 ? -1 : 1;\n    }\n    return 1;\n}\n/**\n * @ignore\n * whether the axis isVertical\n * @param region\n * @returns isVertical\n */\nexport function isVertical(region) {\n    var start = region.start, end = region.end;\n    return start.x === end.x;\n}\n/**\n * @ignore\n * get factor by region (real position)\n * @param region\n * @param center\n * @returns factor\n */\nexport function getAxisFactorByRegion(region, center) {\n    var start = region.start, end = region.end;\n    var isAxisVertical = isVertical(region);\n    // 垂直\n    if (isAxisVertical) {\n        // 左方,从下到上、右方,从上到下\n        if ((start.y - end.y) * (center.x - start.x) > 0) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    }\n    else {\n        // 下方,从左到右、上方,从右到做\n        if ((end.x - start.x) * (start.y - center.y) > 0) {\n            return -1;\n        }\n        else {\n            return 1;\n        }\n    }\n}\n/**\n * @ignore\n * get the axis cfg from theme\n * @param theme view theme object\n * @param direction axis direction\n * @returns axis theme cfg\n */\nexport function getAxisThemeCfg(theme, direction) {\n    return get(theme, ['components', 'axis', direction], {});\n}\n/**\n * @ignore\n * get circle axis center and radius\n * @param coordinate\n */\nexport function getCircleAxisCenterRadius(coordinate) {\n    // @ts-ignore\n    var startAngle = coordinate.startAngle, endAngle = coordinate.endAngle, center = coordinate.circleCenter, radius = coordinate.polarRadius;\n    return {\n        center: center,\n        radius: radius,\n        startAngle: startAngle,\n        endAngle: endAngle,\n    };\n}\n/**\n * @ignore\n * 从配置中获取单个字段的 axis 配置\n * @param axes\n * @param field\n * @returns the axis option of field\n */\nexport function getAxisOption(axes, field) {\n    if (isBoolean(axes)) {\n        return axes === false ? false : {};\n    }\n    return get(axes, [field]);\n}\n/**\n * @ignore\n * 如果配置了 position，则使用配置\n * @param axisOption\n * @param def\n */\nexport function getAxisDirection(axisOption, def) {\n    return get(axisOption, 'position', def);\n}\n/**\n * 获取 axis 的 title 文本\n * @param scale\n * @param axisOption\n */\nexport function getAxisTitleText(scale, axisOption) {\n    return get(axisOption, ['title', 'text'], getName(scale));\n}\n//# sourceMappingURL=axis.js.map","import { deepMix, each, every, get, isNil } from '@antv/util';\nimport { LAYER } from '../constant';\nimport { getAxisOption } from '../util/axis';\n/**\n * facet 基类\n *  - 定义生命周期，方便自定义 facet\n *  - 提供基础的生命流程方法\n *\n * 生命周期：\n *\n * 初始化 init\n * 1. 初始化容器\n * 2. 数据分面，生成分面布局信息\n *\n * 渲染阶段 render\n * 1. view 创建\n * 2. title\n * 3. axis\n *\n * 清除阶段 clear\n * 1. 清除 view\n *\n * 销毁阶段 destroy\n * 1. clear\n * 2. 清除事件\n * 3. 清除 group\n */\nvar Facet = /** @class */ (function () {\n    function Facet(view, cfg) {\n        /** 是否销毁 */\n        this.destroyed = false;\n        /** 分面之后的所有分面数据结构 */\n        this.facets = [];\n        this.view = view;\n        this.cfg = deepMix({}, this.getDefaultCfg(), cfg);\n    }\n    /**\n     * 初始化过程\n     */\n    Facet.prototype.init = function () {\n        // 初始化容器\n        if (!this.container) {\n            this.container = this.createContainer();\n        }\n        // 生成分面布局信息\n        var data = this.view.getData();\n        this.facets = this.generateFacets(data);\n    };\n    /**\n     * 渲染分面，由上层 view 调用。包括：\n     *  - 分面 view\n     *  - 轴\n     *  - title\n     *\n     *  子类可以复写，添加一些其他组件，比如滚动条等\n     */\n    Facet.prototype.render = function () {\n        this.renderViews();\n    };\n    /**\n     * 更新 facet\n     */\n    Facet.prototype.update = function () {\n        // 其实不用做任何事情，因为 facet 最终生成的 View 和 Geometry 都在父 view 的更新中处理了\n    };\n    /**\n     * 清空，clear 之后如果还需要使用，需要重新调用 init 初始化过程\n     * 一般在数据有变更的时候调用，重新进行数据的分面逻辑\n     */\n    Facet.prototype.clear = function () {\n        this.clearFacetViews();\n    };\n    /**\n     * 销毁\n     */\n    Facet.prototype.destroy = function () {\n        this.clear();\n        if (this.container) {\n            this.container.remove(true);\n            this.container = undefined;\n        }\n        this.destroyed = true;\n        this.view = undefined;\n        this.facets = [];\n    };\n    /**\n     * 根据 facet 生成 view，可以给上层自定义使用\n     * @param facet\n     */\n    Facet.prototype.facetToView = function (facet) {\n        var region = facet.region, data = facet.data, _a = facet.padding, padding = _a === void 0 ? this.cfg.padding : _a;\n        var view = this.view.createView({\n            region: region,\n            padding: padding,\n        });\n        // 设置分面的数据\n        view.data(data || []);\n        facet.view = view;\n        // 前置钩子\n        this.beforeEachView(view, facet);\n        var eachView = this.cfg.eachView;\n        if (eachView) {\n            eachView(view, facet);\n        }\n        // 后置钩子\n        this.afterEachView(view, facet);\n        return view;\n    };\n    // 创建容器\n    Facet.prototype.createContainer = function () {\n        var foregroundGroup = this.view.getLayer(LAYER.FORE);\n        return foregroundGroup.addGroup();\n    };\n    /**\n     * 初始化 view\n     */\n    Facet.prototype.renderViews = function () {\n        this.createFacetViews();\n    };\n    /**\n     * 创建 分面 view\n     */\n    Facet.prototype.createFacetViews = function () {\n        var _this = this;\n        // 使用分面数据 创建分面 view\n        return this.facets.map(function (facet) {\n            return _this.facetToView(facet);\n        });\n    };\n    /**\n     * 从 view 中清除 facetView\n     */\n    Facet.prototype.clearFacetViews = function () {\n        var _this = this;\n        // 从 view 中移除分面 view\n        each(this.facets, function (facet) {\n            if (facet.view) {\n                _this.view.removeView(facet.view);\n                facet.view = undefined;\n            }\n        });\n    };\n    // 其他一些提供给子类使用的方法\n    /**\n     * 获取这个字段对应的所有值，数组\n     * @protected\n     * @param data 数据\n     * @param field 字段名\n     * @return 字段对应的值\n     */\n    Facet.prototype.getFieldValues = function (data, field) {\n        var rst = [];\n        var cache = {};\n        // 去重、去除 Nil 值\n        each(data, function (d) {\n            var value = d[field];\n            if (!isNil(value) && !cache[value]) {\n                rst.push(value);\n                cache[value] = true;\n            }\n        });\n        return rst;\n    };\n    /**\n     * 获得每个分面的 region，平分区域\n     * @param rows row 总数\n     * @param cols col 总数\n     * @param xIndex x 方向 index\n     * @param yIndex y 方向 index\n     */\n    Facet.prototype.getRegion = function (rows, cols, xIndex, yIndex) {\n        // x, y 方向均分 100% 宽高\n        var xRatio = 1 / (cols === 0 ? 1 : cols);\n        var yRatio = 1 / (rows === 0 ? 1 : rows);\n        var start = {\n            x: xRatio * xIndex,\n            y: yRatio * yIndex,\n        };\n        var end = {\n            x: xRatio * (xIndex + 1),\n            y: yRatio * (yIndex + 1),\n        };\n        return {\n            start: start,\n            end: end,\n        };\n    };\n    Facet.prototype.getDefaultCfg = function () {\n        return {\n            eachView: undefined,\n            showTitle: true,\n            padding: 10,\n            fields: [],\n        };\n    };\n    /**\n     * 默认的 title 样式，因为有的分面是 title，有的分面配置是 columnTitle、rowTitle\n     */\n    Facet.prototype.getDefaultTitleCfg = function () {\n        // @ts-ignore\n        var fontFamily = this.view.getTheme().fontFamily;\n        return {\n            style: {\n                fontSize: 14,\n                fill: '#666',\n                fontFamily: fontFamily,\n            }\n        };\n    };\n    /**\n     * 处理 axis 的默认配置\n     * @param view\n     * @param facet\n     */\n    Facet.prototype.processAxis = function (view, facet) {\n        var options = view.getOptions();\n        var coordinateOption = options.coordinate;\n        var geometries = view.geometries;\n        var coordinateType = get(coordinateOption, 'type', 'rect');\n        if (coordinateType === 'rect' && geometries.length) {\n            if (isNil(options.axes)) {\n                // @ts-ignore\n                options.axes = {};\n            }\n            var axes = options.axes;\n            var _a = geometries[0].getXYFields(), x = _a[0], y = _a[1];\n            var xOption = getAxisOption(axes, x);\n            var yOption = getAxisOption(axes, y);\n            if (xOption !== false) {\n                options.axes[x] = this.getXAxisOption(x, axes, xOption, facet);\n            }\n            if (yOption !== false) {\n                options.axes[y] = this.getYAxisOption(y, axes, yOption, facet);\n            }\n        }\n    };\n    /**\n     * 获取分面数据\n     * @param conditions\n     */\n    Facet.prototype.getFacetDataFilter = function (conditions) {\n        return function (datum) {\n            // 过滤出全部满足条件的数据\n            return every(conditions, function (condition) {\n                var field = condition.field, value = condition.value;\n                if (!isNil(value) && field) {\n                    return datum[field] === value;\n                }\n                return true;\n            });\n        };\n    };\n    return Facet;\n}());\nexport { Facet };\n//# sourceMappingURL=facet.js.map","import { lowerCase } from '@antv/util';\nexport { Facet } from './facet';\n/**\n * 所有的 Facet 类\n */\nvar Facets = {};\n/**\n * 根据 type 获取 facet 类\n * @param type 分面类型\n */\nexport var getFacet = function (type) {\n    return Facets[lowerCase(type)];\n};\n/**\n * 注册一个 Facet 类\n * @param type 分面类型\n * @param ctor 分面类\n */\nexport var registerFacet = function (type, ctor) {\n    Facets[lowerCase(type)] = ctor;\n};\n//# sourceMappingURL=index.js.map","import { assign } from '@antv/util';\n/**\n * Action 的基类\n */\nvar Action = /** @class */ (function () {\n    function Action(context, cfg) {\n        this.context = context;\n        this.cfg = cfg;\n        context.addAction(this);\n    }\n    /**\n     * 设置配置项传入的值\n     * @param cfg\n     */\n    Action.prototype.applyCfg = function (cfg) {\n        assign(this, cfg);\n    };\n    /**\n     * Inits action，提供给子类用于继承\n     */\n    Action.prototype.init = function () {\n        this.applyCfg(this.cfg);\n    };\n    /**\n     * Destroys action\n     */\n    Action.prototype.destroy = function () {\n        // 移除 action\n        this.context.removeAction(this);\n        // 清空\n        this.context = null;\n    };\n    return Action;\n}());\nexport default Action;\n//# sourceMappingURL=base.js.map","import { __extends } from \"tslib\";\nimport Action from './base';\n/** 回调函数构建的 Action */\nvar CallbackAction = /** @class */ (function (_super) {\n    __extends(CallbackAction, _super);\n    function CallbackAction() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 执行\n     */\n    CallbackAction.prototype.execute = function () {\n        if (this.callback) {\n            this.callback(this.context);\n        }\n    };\n    /**\n     * 销毁\n     */\n    CallbackAction.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.callback = null;\n    };\n    return CallbackAction;\n}(Action));\nexport default CallbackAction;\n//# sourceMappingURL=callback.js.map","import CallbackAction from './callback';\nimport { get } from '@antv/util';\n// Action 类的缓存\nvar ActionCache = {};\n/**\n * 根据名称获取 Action 实例\n * @param actionName - action 的名称\n * @param context 上下文\n * @returns Action 实例\n */\nexport function createAction(actionName, context) {\n    var actionOption = ActionCache[actionName];\n    var action = null;\n    if (actionOption) {\n        var ActionClass = actionOption.ActionClass, cfg = actionOption.cfg;\n        action = new ActionClass(context, cfg);\n        action.name = actionName;\n        action.init();\n    }\n    return action;\n}\n/**\n * 根据 action 的 name 获取定义的类\n * @param actionName action 的 name\n */\nexport function getActionClass(actionName) {\n    var actionOption = ActionCache[actionName];\n    return get(actionOption, 'ActionClass');\n}\n/**\n * 注册 Action\n * @param actionName - action 的名称\n * @param ActionClass - 继承自 action 的类\n */\nexport function registerAction(actionName, ActionClass, cfg) {\n    ActionCache[actionName] = {\n        ActionClass: ActionClass,\n        cfg: cfg,\n    };\n}\n/**\n * 取消注册 Action\n * @param actionName action 名称\n */\nexport function unregisterAction(actionName) {\n    delete ActionCache[actionName];\n}\n/**\n * 根据回调函数获取 Action 实例\n * @param callback - action 的回调函数\n * @param context 上下文\n * @returns Action 实例\n */\nexport function createCallbackAction(callback, context) {\n    var action = new CallbackAction(context);\n    action.callback = callback;\n    action.name = 'callback';\n    return action;\n}\n//# sourceMappingURL=register.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@antv/util\");\n// 获取图形的包围盒\nfunction getPointsBox(points) {\n    if (util_1.isEmpty(points)) {\n        return null;\n    }\n    var minX = points[0].x;\n    var maxX = points[0].x;\n    var minY = points[0].y;\n    var maxY = points[0].y;\n    util_1.each(points, function (point) {\n        minX = minX > point.x ? point.x : minX;\n        maxX = maxX < point.x ? point.x : maxX;\n        minY = minY > point.y ? point.y : minY;\n        maxY = maxY < point.y ? point.y : maxY;\n    });\n    return {\n        minX: minX,\n        maxX: maxX,\n        minY: minY,\n        maxY: maxY,\n        centerX: (minX + maxX) / 2,\n        centerY: (minY + maxY) / 2,\n    };\n}\n/**\n * @ignore\n * 根据弧度计算极坐标系下的坐标点\n * @param centerX\n * @param centerY\n * @param radius\n * @param angleInRadian\n * @returns\n */\nfunction polarToCartesian(centerX, centerY, radius, angleInRadian) {\n    return {\n        x: centerX + radius * Math.cos(angleInRadian),\n        y: centerY + radius * Math.sin(angleInRadian),\n    };\n}\nexports.polarToCartesian = polarToCartesian;\n/**\n * @ignore\n * 根据起始角度计算绘制扇形的 path\n * @param centerX\n * @param centerY\n * @param radius\n * @param startAngleInRadian\n * @param endAngleInRadian\n * @returns\n */\nfunction getSectorPath(centerX, centerY, radius, startAngleInRadian, endAngleInRadian, innerRadius) {\n    if (innerRadius === void 0) { innerRadius = 0; }\n    var start = polarToCartesian(centerX, centerY, radius, startAngleInRadian);\n    var end = polarToCartesian(centerX, centerY, radius, endAngleInRadian);\n    var innerStart = polarToCartesian(centerX, centerY, innerRadius, startAngleInRadian);\n    var innerEnd = polarToCartesian(centerX, centerY, innerRadius, endAngleInRadian);\n    if (endAngleInRadian - startAngleInRadian === Math.PI * 2) {\n        // 整个圆是分割成两个圆\n        var middlePoint = polarToCartesian(centerX, centerY, radius, startAngleInRadian + Math.PI);\n        var innerMiddlePoint = polarToCartesian(centerX, centerY, innerRadius, startAngleInRadian + Math.PI);\n        var circlePathCommands = [\n            ['M', start.x, start.y],\n            ['A', radius, radius, 0, 1, 1, middlePoint.x, middlePoint.y],\n            ['A', radius, radius, 0, 1, 1, end.x, end.y],\n            ['M', innerStart.x, innerStart.y],\n        ];\n        if (innerRadius) {\n            circlePathCommands.push(['A', innerRadius, innerRadius, 0, 1, 0, innerMiddlePoint.x, innerMiddlePoint.y]);\n            circlePathCommands.push(['A', innerRadius, innerRadius, 0, 1, 0, innerEnd.x, innerEnd.y]);\n        }\n        circlePathCommands.push(['M', start.x, start.y]);\n        circlePathCommands.push(['Z']);\n        return circlePathCommands;\n    }\n    var arcSweep = endAngleInRadian - startAngleInRadian <= Math.PI ? 0 : 1;\n    var sectorPathCommands = [\n        ['M', start.x, start.y],\n        ['A', radius, radius, 0, arcSweep, 1, end.x, end.y],\n        ['L', innerEnd.x, innerEnd.y],\n    ];\n    if (innerRadius) {\n        sectorPathCommands.push(['A', innerRadius, innerRadius, 0, arcSweep, 0, innerStart.x, innerStart.y]);\n    }\n    sectorPathCommands.push(['L', start.x, start.y]);\n    sectorPathCommands.push(['Z']);\n    return sectorPathCommands;\n}\nexports.getSectorPath = getSectorPath;\n/**\n * @ignore\n * Gets arc path\n * @param centerX\n * @param centerY\n * @param radius\n * @param startAngleInRadian\n * @param endAngleInRadian\n * @returns\n */\nfunction getArcPath(centerX, centerY, radius, startAngleInRadian, endAngleInRadian) {\n    var start = polarToCartesian(centerX, centerY, radius, startAngleInRadian);\n    var end = polarToCartesian(centerX, centerY, radius, endAngleInRadian);\n    if (util_1.isNumberEqual(endAngleInRadian - startAngleInRadian, Math.PI * 2)) {\n        var middlePoint = polarToCartesian(centerX, centerY, radius, startAngleInRadian + Math.PI);\n        return [\n            ['M', start.x, start.y],\n            ['A', radius, radius, 0, 1, 1, middlePoint.x, middlePoint.y],\n            ['A', radius, radius, 0, 1, 1, start.x, start.y],\n            ['A', radius, radius, 0, 1, 0, middlePoint.x, middlePoint.y],\n            ['A', radius, radius, 0, 1, 0, start.x, start.y],\n            ['Z'],\n        ];\n    }\n    var arcSweep = endAngleInRadian - startAngleInRadian <= Math.PI ? 0 : 1;\n    return [\n        ['M', start.x, start.y],\n        ['A', radius, radius, 0, arcSweep, 1, end.x, end.y],\n    ];\n}\nexports.getArcPath = getArcPath;\n/**\n * @ignore\n * 从数据模型中的 points 换算角度\n * @param shapeModel\n * @param coordinate\n * @returns\n */\nfunction getAngle(shapeModel, coordinate) {\n    var points = shapeModel.points;\n    var box = getPointsBox(points);\n    var endAngle;\n    var startAngle;\n    var coordStartAngle = coordinate.startAngle, coordEndAngle = coordinate.endAngle;\n    var diffAngle = coordEndAngle - coordStartAngle;\n    if (coordinate.isTransposed) {\n        endAngle = box.maxY * diffAngle;\n        startAngle = box.minY * diffAngle;\n    }\n    else {\n        endAngle = box.maxX * diffAngle;\n        startAngle = box.minX * diffAngle;\n    }\n    endAngle += coordStartAngle;\n    startAngle += coordStartAngle;\n    return {\n        startAngle: startAngle,\n        endAngle: endAngle,\n    };\n}\nexports.getAngle = getAngle;\n/**\n * @ignore\n * 计算多边形重心: https://en.wikipedia.org/wiki/Centroid#Of_a_polygon\n */\nfunction getPolygonCentroid(xs, ys) {\n    if (util_1.isNumber(xs) && util_1.isNumber(ys)) {\n        // 普通色块图，xs 和 ys 是数值\n        return [xs, ys];\n    }\n    var i = -1;\n    var x = 0;\n    var y = 0;\n    var former;\n    var current = xs.length - 1;\n    var diff;\n    var k = 0;\n    while (++i < xs.length) {\n        former = current;\n        current = i;\n        k += diff = xs[former] * ys[current] - xs[current] * ys[former];\n        x += (xs[former] + xs[current]) * diff;\n        y += (ys[former] + ys[current]) * diff;\n    }\n    k *= 3;\n    return [x / k, y / k];\n}\nexports.getPolygonCentroid = getPolygonCentroid;\n/**\n * @ignore\n * 获取需要替换的属性，如果原先图形元素存在，而新图形不存在，则设置 undefined\n */\nfunction getReplaceAttrs(sourceShape, targetShape) {\n    var originAttrs = sourceShape.attr();\n    var newAttrs = targetShape.attr();\n    util_1.each(originAttrs, function (v, k) {\n        if (newAttrs[k] === undefined) {\n            newAttrs[k] = undefined;\n        }\n    });\n    return newAttrs;\n}\nexports.getReplaceAttrs = getReplaceAttrs;\n//# sourceMappingURL=graphics.js.map","import { isArray, isString } from '@antv/util';\n/**\n * @ignore\n * Determines whether between is\n * @param value\n * @param start\n * @param end\n * @returns true if between\n */\nexport function isBetween(value, start, end) {\n    var min = Math.min(start, end);\n    var max = Math.max(start, end);\n    return value >= min && value <= max;\n}\n/**\n * @ignore\n * pads the current string/array with a given value (repeated, if needed) so that the resulting reaches a given length.\n * The padding is applied from the end of the current value.\n *\n * @param source\n * @param targetLength\n * @param padValue\n * @returns\n */\nexport function padEnd(source, targetLength, padValue) {\n    if (isString(source)) {\n        return source.padEnd(targetLength, padValue);\n    }\n    else if (isArray(source)) {\n        var sourceLength = source.length;\n        if (sourceLength < targetLength) {\n            var diff = targetLength - sourceLength;\n            for (var i = 0; i < diff; i++) {\n                source.push(padValue);\n            }\n        }\n    }\n    return source;\n}\n/**\n * @ignore\n * omit keys of an object.\n * @param obj\n * @param keys\n */\nexport function omit(obj, keys) {\n    keys.forEach(function (key) {\n        delete obj[key];\n    });\n    return obj;\n}\n/**\n * @ignore\n * @param sourceArray\n * @param targetArray\n * @param map\n */\nexport function uniq(sourceArray, targetArray, map) {\n    if (targetArray === void 0) { targetArray = []; }\n    if (map === void 0) { map = {}; }\n    for (var _i = 0, sourceArray_1 = sourceArray; _i < sourceArray_1.length; _i++) {\n        var source = sourceArray_1[_i];\n        if (!map[source]) {\n            targetArray.push(source);\n            map[source] = true;\n        }\n    }\n    return targetArray;\n}\n//# sourceMappingURL=helper.js.map","import { getSectorPath } from './graphics';\nimport { isBetween } from './helper';\n/**\n * @ignore\n * Gets x dimension length\n * @param coordinate\n * @returns x dimension length\n */\nexport function getXDimensionLength(coordinate) {\n    if (coordinate.isPolar && !coordinate.isTransposed) {\n        // 极坐标系下 width 为弧长\n        return (coordinate.endAngle - coordinate.startAngle) * coordinate.getRadius();\n    }\n    // 直角坐标系\n    var start = coordinate.convert({ x: 0, y: 0 });\n    var end = coordinate.convert({ x: 1, y: 0 });\n    // 坐标系有可能发生 transpose 等变换，所有通过两点之间的距离进行计算\n    return Math.sqrt(Math.pow(end.x - start.x, 2) + Math.pow(end.y - start.y, 2));\n}\n/**\n * @ignore\n * Determines whether full circle is\n * @param coordinate\n * @returns true if full circle\n */\nexport function isFullCircle(coordinate) {\n    if (coordinate.isPolar) {\n        var startAngle = coordinate.startAngle, endAngle = coordinate.endAngle;\n        return endAngle - startAngle === Math.PI * 2;\n    }\n    return false;\n}\n/**\n * @ignore\n * 获取当前点到坐标系圆心的距离\n * @param coordinate 坐标系\n * @param point 当前点\n * @returns distance to center\n */\nexport function getDistanceToCenter(coordinate, point) {\n    var center = coordinate.getCenter();\n    return Math.sqrt(Math.pow((point.x - center.x), 2) + Math.pow((point.y - center.y), 2));\n}\n/**\n * @ignore\n * 坐标点是否在坐标系中\n * @param coordinate\n * @param point\n */\nexport function isPointInCoordinate(coordinate, point) {\n    var result = false;\n    if (coordinate) {\n        if (coordinate.type === 'theta') {\n            var start = coordinate.start, end = coordinate.end;\n            result = isBetween(point.x, start.x, end.x) && isBetween(point.y, start.y, end.y);\n        }\n        else {\n            var invertPoint = coordinate.invert(point);\n            result = isBetween(invertPoint.x, 0, 1) && isBetween(invertPoint.y, 0, 1);\n        }\n    }\n    return result;\n}\n/**\n * @ignore\n * 获取点到圆心的连线与水平方向的夹角\n */\nexport function getAngleByPoint(coordinate, point) {\n    var center = coordinate.getCenter();\n    return Math.atan2(point.y - center.y, point.x - center.x);\n}\n/**\n * @ignore\n * 获取同坐标系范围相同的剪切区域\n * @param coordinate\n * @returns\n */\nexport function getCoordinateClipCfg(coordinate, margin) {\n    if (margin === void 0) { margin = 0; }\n    var start = coordinate.start, end = coordinate.end;\n    var width = coordinate.getWidth();\n    var height = coordinate.getHeight();\n    if (coordinate.isPolar) {\n        var startAngle_1 = coordinate.startAngle, endAngle_1 = coordinate.endAngle;\n        var center_1 = coordinate.getCenter();\n        var radius_1 = coordinate.getRadius();\n        return {\n            type: 'path',\n            startState: {\n                path: getSectorPath(center_1.x, center_1.y, radius_1 + margin, startAngle_1, startAngle_1),\n            },\n            endState: function (ratio) {\n                var diff = (endAngle_1 - startAngle_1) * ratio + startAngle_1;\n                var path = getSectorPath(center_1.x, center_1.y, radius_1 + margin, startAngle_1, diff);\n                return {\n                    path: path,\n                };\n            },\n            attrs: {\n                path: getSectorPath(center_1.x, center_1.y, radius_1 + margin, startAngle_1, endAngle_1),\n            },\n        };\n    }\n    var endState;\n    if (coordinate.isTransposed) {\n        endState = {\n            height: height + margin * 2,\n        };\n    }\n    else {\n        endState = {\n            width: width + margin * 2,\n        };\n    }\n    return {\n        type: 'rect',\n        startState: {\n            x: start.x - margin,\n            y: end.y - margin,\n            width: coordinate.isTransposed ? width + margin * 2 : 0,\n            height: coordinate.isTransposed ? 0 : height + margin * 2,\n        },\n        endState: endState,\n        attrs: {\n            x: start.x - margin,\n            y: end.y - margin,\n            width: width + margin * 2,\n            height: height + margin * 2,\n        },\n    };\n}\n//# sourceMappingURL=coordinate.js.map","import { vec2 } from '@antv/matrix-util';\nimport { each } from '@antv/util';\nimport { getDistanceToCenter } from '../../../util/coordinate';\nfunction _points2path(points, isInCircle) {\n    var path = [];\n    if (points.length) {\n        path.push(['M', points[0].x, points[0].y]);\n        for (var i = 1, length_1 = points.length; i < length_1; i += 1) {\n            var item = points[i];\n            path.push(['L', item.x, item.y]);\n        }\n        if (isInCircle) {\n            path.push(['Z']);\n        }\n    }\n    return path;\n}\nfunction _convertArr(arr, coord) {\n    var tmp = [arr[0]];\n    for (var i = 1, len = arr.length; i < len; i = i + 2) {\n        var point = coord.convert({\n            x: arr[i],\n            y: arr[i + 1],\n        });\n        tmp.push(point.x, point.y);\n    }\n    return tmp;\n}\nfunction _convertPolarPath(pre, cur, coord) {\n    var isTransposed = coord.isTransposed, startAngle = coord.startAngle, endAngle = coord.endAngle;\n    var prePoint = {\n        x: pre[1],\n        y: pre[2],\n    };\n    var curPoint = {\n        x: cur[1],\n        y: cur[2],\n    };\n    var rst = [];\n    var xDim = isTransposed ? 'y' : 'x';\n    var angleRange = Math.abs(curPoint[xDim] - prePoint[xDim]) * (endAngle - startAngle);\n    var direction = curPoint[xDim] >= prePoint[xDim] ? 1 : 0; // 圆弧的方向\n    var flag = angleRange > Math.PI ? 1 : 0; // 大弧还是小弧标志位\n    var convertPoint = coord.convert(curPoint);\n    var r = getDistanceToCenter(coord, convertPoint);\n    if (r >= 0.5) {\n        // 小于1像素的圆在图像上无法识别\n        if (angleRange === Math.PI * 2) {\n            var middlePoint = {\n                x: (curPoint.x + prePoint.x) / 2,\n                y: (curPoint.y + prePoint.y) / 2,\n            };\n            var middleConvertPoint = coord.convert(middlePoint);\n            rst.push(['A', r, r, 0, flag, direction, middleConvertPoint.x, middleConvertPoint.y]);\n            rst.push(['A', r, r, 0, flag, direction, convertPoint.x, convertPoint.y]);\n        }\n        else {\n            rst.push(['A', r, r, 0, flag, direction, convertPoint.x, convertPoint.y]);\n        }\n    }\n    return rst;\n}\n// 当存在整体的圆时，去除圆前面和后面的线，防止出现直线穿过整个圆的情形\nfunction _filterFullCirleLine(path) {\n    each(path, function (subPath, index) {\n        var cur = subPath;\n        if (cur[0].toLowerCase() === 'a') {\n            var pre = path[index - 1];\n            var next = path[index + 1];\n            if (next && next[0].toLowerCase() === 'a') {\n                if (pre && pre[0].toLowerCase() === 'l') {\n                    pre[0] = 'M';\n                }\n            }\n            else if (pre && pre[0].toLowerCase() === 'a') {\n                if (next && next[0].toLowerCase() === 'l') {\n                    next[0] = 'M';\n                }\n            }\n        }\n    });\n}\n/**\n * @ignore\n * 计算光滑的贝塞尔曲线\n */\nexport var smoothBezier = function (points, smooth, isLoop, constraint) {\n    var cps = [];\n    var prevPoint;\n    var nextPoint;\n    var hasConstraint = !!constraint;\n    var min;\n    var max;\n    if (hasConstraint) {\n        min = [Infinity, Infinity];\n        max = [-Infinity, -Infinity];\n        for (var i = 0, l = points.length; i < l; i++) {\n            var point = points[i];\n            min = vec2.min([], min, point);\n            max = vec2.max([], max, point);\n        }\n        min = vec2.min([], min, constraint[0]);\n        max = vec2.max([], max, constraint[1]);\n    }\n    for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n        if (isLoop) {\n            prevPoint = points[i ? i - 1 : len - 1];\n            nextPoint = points[(i + 1) % len];\n        }\n        else {\n            if (i === 0 || i === len - 1) {\n                cps.push(point);\n                continue;\n            }\n            else {\n                prevPoint = points[i - 1];\n                nextPoint = points[i + 1];\n            }\n        }\n        var v = [];\n        v = vec2.sub(v, nextPoint, prevPoint);\n        v = vec2.scale(v, v, smooth);\n        var d0 = vec2.distance(point, prevPoint);\n        var d1 = vec2.distance(point, nextPoint);\n        var sum = d0 + d1;\n        if (sum !== 0) {\n            d0 /= sum;\n            d1 /= sum;\n        }\n        var v1 = vec2.scale([], v, -d0);\n        var v2 = vec2.scale([], v, d1);\n        var cp0 = vec2.add([], point, v1);\n        var cp1 = vec2.add([], point, v2);\n        if (hasConstraint) {\n            cp0 = vec2.max([], cp0, min);\n            cp0 = vec2.min([], cp0, max);\n            cp1 = vec2.max([], cp1, min);\n            cp1 = vec2.min([], cp1, max);\n        }\n        cps.push(cp0);\n        cps.push(cp1);\n    }\n    if (isLoop) {\n        cps.push(cps.shift());\n    }\n    return cps;\n};\n/**\n * @ignore\n * 贝塞尔曲线\n */\nexport function catmullRom2bezier(crp, z, constraint) {\n    var isLoop = !!z;\n    var pointList = [];\n    for (var i = 0, l = crp.length; i < l; i += 2) {\n        pointList.push([crp[i], crp[i + 1]]);\n    }\n    var controlPointList = smoothBezier(pointList, 0.4, isLoop, constraint);\n    var len = pointList.length;\n    var d1 = [];\n    var cp1;\n    var cp2;\n    var p;\n    for (var i = 0; i < len - 1; i++) {\n        cp1 = controlPointList[i * 2];\n        cp2 = controlPointList[i * 2 + 1];\n        p = pointList[i + 1];\n        d1.push(['C', cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]]);\n    }\n    if (isLoop) {\n        cp1 = controlPointList[len];\n        cp2 = controlPointList[len + 1];\n        p = pointList[0];\n        d1.push(['C', cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]]);\n    }\n    return d1;\n}\n/**\n * @ignore\n * 将点连接成路径 path\n */\nexport function getLinePath(points, isInCircle) {\n    return _points2path(points, isInCircle);\n}\n/**\n * @ignore\n * 根据关键点获取限定了范围的平滑线\n */\nexport function getSplinePath(points, isInCircle, constaint) {\n    var data = [];\n    var first = points[0];\n    var prePoint = null;\n    if (points.length <= 2) {\n        // 两点以内直接绘制成路径\n        return getLinePath(points, isInCircle);\n    }\n    for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n        if (!prePoint || !(prePoint.x === point.x && prePoint.y === point.y)) {\n            data.push(point.x);\n            data.push(point.y);\n            prePoint = point;\n        }\n    }\n    var constraint = constaint || [\n        // 范围\n        [0, 0],\n        [1, 1],\n    ];\n    var splinePath = catmullRom2bezier(data, isInCircle, constraint);\n    splinePath.unshift(['M', first.x, first.y]);\n    return splinePath;\n}\n/**\n * @ignore\n * 将归一化后的路径数据转换成坐标\n */\nexport function convertNormalPath(coord, path) {\n    var tmp = [];\n    each(path, function (subPath) {\n        var action = subPath[0];\n        switch (action.toLowerCase()) {\n            case 'm':\n            case 'l':\n            case 'c':\n                tmp.push(_convertArr(subPath, coord));\n                break;\n            case 'z':\n            default:\n                tmp.push(subPath);\n                break;\n        }\n    });\n    return tmp;\n}\n/**\n * @ignore\n * 将路径转换为极坐标下的真实路径\n */\nexport function convertPolarPath(coord, path) {\n    var tmp = [];\n    var pre;\n    var cur;\n    var transposed;\n    var equals;\n    each(path, function (subPath, index) {\n        var action = subPath[0];\n        switch (action.toLowerCase()) {\n            case 'm':\n            case 'c':\n            case 'q':\n                tmp.push(_convertArr(subPath, coord));\n                break;\n            case 'l':\n                pre = path[index - 1];\n                cur = subPath;\n                transposed = coord.isTransposed;\n                // 是否半径相同，转换成圆弧\n                equals = transposed ? pre[pre.length - 2] === cur[1] : pre[pre.length - 1] === cur[2];\n                if (equals) {\n                    tmp = tmp.concat(_convertPolarPath(pre, cur, coord));\n                }\n                else {\n                    // y 不相等，所以直接转换\n                    tmp.push(_convertArr(subPath, coord));\n                }\n                break;\n            case 'z':\n            default:\n                tmp.push(subPath);\n                break;\n        }\n    });\n    _filterFullCirleLine(tmp); // 过滤多余的直线\n    return tmp;\n}\n//# sourceMappingURL=path.js.map","import { __spreadArrays } from \"tslib\";\nimport { isArray, isNumber } from '@antv/util';\n/**\n * @ignore\n * 是否是自动 padding\n * @param padding\n */\nexport function isAutoPadding(padding) {\n    return !isNumber(padding) && !isArray(padding);\n}\n/**\n * @ignore\n * padding 的解析逻辑\n * @param padding\n * @return [ top, right, bottom, left ]\n */\nexport function parsePadding(padding) {\n    if (padding === void 0) { padding = 0; }\n    var paddingArray = isArray(padding) ? padding : [padding];\n    switch (paddingArray.length) {\n        case 0:\n            paddingArray = [0, 0, 0, 0];\n            break;\n        case 1:\n            paddingArray = new Array(4).fill(paddingArray[0]);\n            break;\n        case 2:\n            paddingArray = __spreadArrays(paddingArray, paddingArray);\n            break;\n        case 3:\n            paddingArray = __spreadArrays(paddingArray, [paddingArray[1]]);\n            break;\n        default:\n            // 其他情况，只去四个\n            paddingArray = paddingArray.slice(0, 4);\n            break;\n    }\n    return paddingArray;\n}\n//# sourceMappingURL=padding.js.map","import { each } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { parsePadding } from './padding';\n/**\n * 用于包围盒计算。\n */\nvar BBox = /** @class */ (function () {\n    function BBox(x, y, width, height) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        if (width === void 0) { width = 0; }\n        if (height === void 0) { height = 0; }\n        this.x = x;\n        this.y = y;\n        this.height = height;\n        this.width = width;\n    }\n    BBox.fromRange = function (minX, minY, maxX, maxY) {\n        return new BBox(minX, minY, maxX - minX, maxY - minY);\n    };\n    Object.defineProperty(BBox.prototype, \"minX\", {\n        get: function () {\n            return this.x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"maxX\", {\n        get: function () {\n            return this.x + this.width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"minY\", {\n        get: function () {\n            return this.y;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"maxY\", {\n        get: function () {\n            return this.y + this.height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"tl\", {\n        get: function () {\n            return { x: this.x, y: this.y };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"tr\", {\n        get: function () {\n            return { x: this.maxX, y: this.y };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"bl\", {\n        get: function () {\n            return { x: this.x, y: this.maxY };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"br\", {\n        get: function () {\n            return { x: this.maxX, y: this.maxY };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"top\", {\n        get: function () {\n            return {\n                x: this.x + this.width / 2,\n                y: this.minY,\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"right\", {\n        get: function () {\n            return {\n                x: this.maxX,\n                y: this.y + this.height / 2,\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"bottom\", {\n        get: function () {\n            return {\n                x: this.x + this.width / 2,\n                y: this.maxY,\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"left\", {\n        get: function () {\n            return {\n                x: this.minX,\n                y: this.y + this.height / 2,\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // end 计算属性\n    /**\n     * 包围盒是否相等\n     * @param {BBox} bbox 包围盒\n     * @returns      包围盒是否相等\n     */\n    BBox.prototype.isEqual = function (bbox) {\n        return this.x === bbox.x && this.y === bbox.y && this.width === bbox.width && this.height === bbox.height;\n    };\n    /**\n     * 克隆包围盒\n     * @returns 包围盒\n     */\n    BBox.prototype.clone = function () {\n        return new BBox(this.x, this.y, this.width, this.height);\n    };\n    /**\n     * 取并集\n     * @param subBBox\n     */\n    BBox.prototype.add = function () {\n        var subBBox = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            subBBox[_i] = arguments[_i];\n        }\n        var bbox = this.clone();\n        each(subBBox, function (b) {\n            bbox.x = Math.min(b.x, bbox.x);\n            bbox.y = Math.min(b.y, bbox.y);\n            bbox.width = Math.max(b.maxX, bbox.maxX) - bbox.x;\n            bbox.height = Math.max(b.maxY, bbox.maxY) - bbox.y;\n        });\n        return bbox;\n    };\n    /**\n     * 取交集\n     * @param subBBox\n     */\n    BBox.prototype.merge = function () {\n        var subBBox = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            subBBox[_i] = arguments[_i];\n        }\n        var bbox = this.clone();\n        each(subBBox, function (b) {\n            bbox.x = Math.max(b.x, bbox.x);\n            bbox.y = Math.max(b.y, bbox.y);\n            bbox.width = Math.min(b.maxX, bbox.maxX) - bbox.x;\n            bbox.height = Math.min(b.maxY, bbox.maxY) - bbox.y;\n        });\n        return bbox;\n    };\n    /**\n     * bbox 剪裁\n     * @param subBBox\n     * @param direction\n     */\n    BBox.prototype.cut = function (subBBox, direction) {\n        var width = subBBox.width;\n        var height = subBBox.height;\n        switch (direction) {\n            case DIRECTION.TOP:\n            case DIRECTION.TOP_LEFT:\n            case DIRECTION.TOP_RIGHT:\n                return BBox.fromRange(this.minX, this.minY + height, this.maxX, this.maxY);\n            case DIRECTION.RIGHT:\n            case DIRECTION.RIGHT_TOP:\n            case DIRECTION.RIGHT_BOTTOM:\n                return BBox.fromRange(this.minX, this.minY, this.maxX - width, this.maxY);\n            case DIRECTION.BOTTOM:\n            case DIRECTION.BOTTOM_LEFT:\n            case DIRECTION.BOTTOM_RIGHT:\n                return BBox.fromRange(this.minX, this.minY, this.maxX, this.maxY - height);\n            case DIRECTION.LEFT:\n            case DIRECTION.LEFT_TOP:\n            case DIRECTION.LEFT_BOTTOM:\n                return BBox.fromRange(this.minX + width, this.minY, this.maxX, this.maxY);\n            default:\n                // 其他情况不裁剪，原样返回\n                return this;\n        }\n    };\n    /**\n     * 收缩形成新的\n     * @param gap\n     */\n    BBox.prototype.shrink = function (gap) {\n        var _a = parsePadding(gap), top = _a[0], right = _a[1], bottom = _a[2], left = _a[3];\n        return new BBox(this.x + left, this.y + top, this.width - left - right, this.height - top - bottom);\n    };\n    /**\n     * get the gap of two bbox, if not exceed, then 0\n     * @param bbox\n     * @returns [top, right, bottom, left]\n     */\n    BBox.prototype.exceed = function (bbox) {\n        return [\n            Math.max(-this.minY + bbox.minY, 0),\n            Math.max(this.maxX - bbox.maxX, 0),\n            Math.max(this.maxY - bbox.maxY, 0),\n            Math.max(-this.minX + bbox.minX, 0),\n        ];\n    };\n    /**\n     * 获取包围盒大小\n     * @returns 包围盒大小\n     */\n    BBox.prototype.size = function () {\n        return this.width * this.height;\n    };\n    return BBox;\n}());\nexport { BBox };\n/**\n * 从一个 bbox 的 region 获取 bbox\n * @param bbox\n * @param region\n */\nexport var getRegionBBox = function (bbox, region) {\n    var start = region.start, end = region.end;\n    return new BBox(bbox.x + bbox.width * start.x, bbox.y + bbox.height * start.y, bbox.width * Math.abs(end.x - start.x), bbox.height * Math.abs(end.y - start.y));\n};\n/**\n * 将 bbox 转换成 points\n * @param bbox\n */\nexport function toPoints(bbox) {\n    return [\n        [bbox.minX, bbox.minY],\n        [bbox.maxX, bbox.minY],\n        [bbox.maxX, bbox.maxY],\n        [bbox.minX, bbox.maxY]\n    ];\n}\n//# sourceMappingURL=bbox.js.map","import { each, isArray } from '@antv/util';\nimport { catmullRom2bezier, getLinePath } from '../../geometry/shape/util/path';\nimport { toPoints } from '../../util/bbox';\nimport isPolygonsIntersect from '@antv/path-util/lib/is-polygons-intersect';\nfunction getMaskBBox(context, tolerance) {\n    var event = context.event;\n    var maskShape = event.target;\n    var maskBBox = maskShape.getCanvasBBox();\n    // 如果 bbox 过小则不返回\n    if (!(maskBBox.width >= tolerance || maskBBox.height >= tolerance)) {\n        return null;\n    }\n    return maskBBox;\n}\nfunction getMaskPath(context, tolerance) {\n    var event = context.event;\n    var maskShape = event.target;\n    var maskBBox = maskShape.getCanvasBBox();\n    // 如果 bbox 过小则不返回\n    if (!(maskBBox.width >= tolerance || maskBBox.height >= tolerance)) {\n        return null;\n    }\n    return maskShape.attr('path');\n}\n/**\n * 获取当前事件相关的图表元素\n * @param context 交互的上下文\n * @ignore\n */\nexport function getCurrentElement(context) {\n    var event = context.event;\n    var element;\n    var target = event.target;\n    if (target) {\n        element = target.get('element');\n    }\n    return element;\n}\n/**\n * 获取委托对象\n * @param context 上下文\n * @ignore\n */\nexport function getDelegationObject(context) {\n    var event = context.event;\n    var target = event.target;\n    var delegateObject;\n    if (target) {\n        delegateObject = target.get('delegateObject');\n    }\n    return delegateObject;\n}\nexport function isElementChange(context) {\n    var event = context.event.gEvent;\n    // 在同一个 element 内部移动，label 和 shape 之间\n    if (event && event.fromShape && event.toShape && event.fromShape.get('element') === event.toShape.get('element')) {\n        return false;\n    }\n    return true;\n}\n/**\n * 是否是列表组件\n * @param delegateObject 委托对象\n * @ignore\n */\nexport function isList(delegateObject) {\n    return delegateObject && delegateObject.component && delegateObject.component.isList();\n}\n/**\n * 是否是滑块组件\n * @param delegateObject 委托对象\n * @ignore\n */\nexport function isSlider(delegateObject) {\n    return delegateObject && delegateObject.component && delegateObject.component.isSlider();\n}\n/**\n * 是否由 mask 触发\n * @param context 上下文\n * @ignore\n */\nexport function isMask(context) {\n    var event = context.event;\n    var target = event.target;\n    return target && target.get('name') === 'mask';\n}\n/**\n * 获取被遮挡的 elements\n * @param context 上下文\n * @ignore\n */\nexport function getMaskedElements(context, tolerance) {\n    var target = context.event.target;\n    if (target.get('type') === 'path') {\n        var maskPath = getMaskPath(context, tolerance);\n        if (!maskPath) {\n            return;\n        }\n        return getElementsByPath(context.view, maskPath);\n    }\n    var maskBBox = getMaskBBox(context, tolerance);\n    // 如果 bbox 过小则不返回\n    if (!maskBBox) {\n        return null;\n    }\n    return getIntersectElements(context.view, maskBBox);\n}\n/**\n * @ignore\n */\nexport function getSiblingMaskElements(context, sibling, tolerance) {\n    var maskBBox = getMaskBBox(context, tolerance);\n    // 如果 bbox 过小则不返回\n    if (!maskBBox) {\n        return null;\n    }\n    var view = context.view;\n    var start = getSiblingPoint(view, sibling, { x: maskBBox.x, y: maskBBox.y });\n    var end = getSiblingPoint(view, sibling, { x: maskBBox.maxX, y: maskBBox.maxY });\n    var box = {\n        minX: start.x,\n        minY: start.y,\n        maxX: end.x,\n        maxY: end.y\n    };\n    return getIntersectElements(sibling, box);\n}\n/**\n * 获取所有的图表元素\n * @param view View/Chart\n * @ignore\n */\nexport function getElements(view) {\n    var geometries = view.geometries;\n    var rst = [];\n    each(geometries, function (geom) {\n        var elements = geom.elements;\n        rst = rst.concat(elements);\n    });\n    if (view.views && view.views.length) {\n        each(view.views, function (subView) {\n            rst = rst.concat(getElements(subView));\n        });\n    }\n    return rst;\n}\n/**\n * 获取所有的图表元素\n * @param view View/Chart\n * @param field 字段名\n * @param value 字段值\n * @ignore\n */\nexport function getElementsByField(view, field, value) {\n    var elements = getElements(view);\n    return elements.filter(function (el) {\n        return getElementValue(el, field) === value;\n    });\n}\n/**\n * 根据状态名获取图表元素\n * @param view View/Chart\n * @param stateName 状态名\n * @ignore\n */\nexport function getElementsByState(view, stateName) {\n    var geometries = view.geometries;\n    var rst = [];\n    each(geometries, function (geom) {\n        var elements = geom.getElementsBy(function (el) { return el.hasState(stateName); });\n        rst = rst.concat(elements);\n    });\n    return rst;\n}\n/**\n * 获取图表元素对应字段的值\n * @param element 图表元素\n * @param field 字段名\n * @ignore\n */\nexport function getElementValue(element, field) {\n    var model = element.getModel();\n    var record = model.data;\n    var value;\n    if (isArray(record)) {\n        value = record[0][field];\n    }\n    else {\n        value = record[field];\n    }\n    return value;\n}\n/**\n * 两个包围盒是否相交\n * @param box1 包围盒1\n * @param box2 包围盒2\n * @ignore\n */\nexport function intersectRect(box1, box2) {\n    return !(box2.minX > box1.maxX || box2.maxX < box1.minX || box2.minY > box1.maxY || box2.maxY < box1.minY);\n}\n/**\n * 获取包围盒内的图表元素\n * @param view View/Chart\n * @param box 包围盒\n * @ignore\n */\nexport function getIntersectElements(view, box) {\n    var elements = getElements(view);\n    var rst = [];\n    each(elements, function (el) {\n        var shape = el.shape;\n        var shapeBBox = shape.getCanvasBBox();\n        if (intersectRect(box, shapeBBox)) {\n            rst.push(el);\n        }\n    });\n    return rst;\n}\nfunction pathToPoints(path) {\n    var points = [];\n    each(path, function (seg) {\n        var command = seg[0];\n        if (command !== 'A') {\n            for (var i = 1; i < seg.length; i = i + 2) {\n                points.push([seg[i], seg[i + 1]]);\n            }\n        }\n        else {\n            var length_1 = seg.length;\n            points.push([seg[length_1 - 2], seg[length_1 - 1]]);\n        }\n    });\n    return points;\n}\n/**\n * 获取包围盒内的图表元素\n * @param view View/Chart\n * @param path 路径\n * @ignore\n */\nexport function getElementsByPath(view, path) {\n    var elements = getElements(view);\n    var points = pathToPoints(path);\n    var rst = elements.filter(function (el) {\n        var shape = el.shape;\n        var shapePoints;\n        if (shape.get('type') === 'path') {\n            shapePoints = pathToPoints(shape.attr('path'));\n        }\n        else {\n            var shapeBBox = shape.getCanvasBBox();\n            shapePoints = toPoints(shapeBBox);\n        }\n        return isPolygonsIntersect(points, shapePoints);\n    });\n    return rst;\n}\n/**\n * 获取当前 View 的所有组件\n * @param view View/Chart\n * @ignore\n */\nexport function getComponents(view) {\n    return view.getComponents().map(function (co) { return co.component; });\n}\n/** @ignore */\nexport function distance(p1, p2) {\n    var dx = p2.x - p1.x;\n    var dy = p2.y - p1.y;\n    return Math.sqrt(dx * dx + dy * dy);\n}\n/** @ignore */\nexport function getSpline(points, z) {\n    if (points.length <= 2) {\n        return getLinePath(points, false);\n    }\n    var first = points[0];\n    var arr = [];\n    each(points, function (point) {\n        arr.push(point.x);\n        arr.push(point.y);\n    });\n    var path = catmullRom2bezier(arr, z, null);\n    path.unshift(['M', first.x, first.y]);\n    return path;\n}\n/**\n * 检测点是否在包围盒内\n * @param box 包围盒\n * @param point 点\n * @ignore\n */\nexport function isInBox(box, point) {\n    return box.x <= point.x && box.maxX >= point.x && box.y <= point.y && box.maxY > point.y;\n}\n/**\n * 获取同 view 同一级的 views\n * @param view 当前 view\n * @returns 同一级的 views\n * @ignore\n */\nexport function getSilbings(view) {\n    var parent = view.parent;\n    var siblings = null;\n    if (parent) {\n        siblings = parent.views.filter(function (sub) { return sub !== view; });\n    }\n    return siblings;\n}\nfunction point2Normalize(view, point) {\n    var coord = view.getCoordinate();\n    return coord.invert(point);\n}\n/**\n * 将 view 上的一点转换成另一个 view 的点\n * @param view 当前的 view\n * @param sibling 同一层级的 view\n * @param point 指定点\n * @ignore\n */\nexport function getSiblingPoint(view, sibling, point) {\n    var normalPoint = point2Normalize(view, point);\n    return sibling.getCoordinate().convert(normalPoint);\n}\n/**\n * 是否在记录中，临时因为所有的 view 中的数据不是引用，而使用的方法\n * 不同 view 上对数据的引用不相等，导致无法直接用 includes\n * 假设 x, y 值相等时是同一条数据，这个假设不完全正确，而改成 isEqual 则成本太高\n * 后面改成同一个引用时可以修改回来\n * @param records\n * @param record\n * @param xFiled\n * @param yField\n * @returns\n * @ignore\n */\nexport function isInRecords(records, record, xFiled, yField) {\n    var isIn = false;\n    each(records, function (r) {\n        if (r[xFiled] === record[xFiled] && r[yField] === record[yField]) {\n            isIn = true;\n            return false;\n        }\n    });\n    return isIn;\n}\n// 级联获取 field 对应的 scale，如果 view 上没有，遍历子 view\nexport function getScaleByField(view, field) {\n    var scale = view.getScaleByField(field);\n    if (!scale && view.views) {\n        each(view.views, function (subView) {\n            scale = getScaleByField(subView, field);\n            if (scale) {\n                return false; // 终止循环\n            }\n        });\n    }\n    return scale;\n}\n//# sourceMappingURL=util.js.map","import { each, get } from '@antv/util';\nimport { getComponents, isInBox } from './action/util';\n/**\n * 交互的上下文\n */\nvar Context = /** @class */ (function () {\n    function Context(view) {\n        /** 当前所有的 Action */\n        this.actions = [];\n        /** 当前事件对象 */\n        this.event = null;\n        this.cacheMap = {};\n        this.view = view;\n    }\n    /**\n     * 缓存信息\n     * @param params 缓存的字段\n     *  - 如果一个字段则获取缓存\n     *  - 两个字段则设置缓存\n     */\n    Context.prototype.cache = function () {\n        var params = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n        }\n        if (params.length === 1) {\n            return this.cacheMap[params[0]];\n        }\n        else if (params.length === 2) {\n            this.cacheMap[params[0]] = params[1];\n        }\n    };\n    /**\n     * 获取 Action\n     * @param name Action 的名称\n     */\n    Context.prototype.getAction = function (name) {\n        return this.actions.find(function (action) { return action.name === name; });\n    };\n    /**\n     * 获取 Action\n     * @param action Action 对象\n     */\n    Context.prototype.addAction = function (action) {\n        this.actions.push(action);\n    };\n    /**\n     * 移除 Action\n     * @param action Action 对象\n     */\n    Context.prototype.removeAction = function (action) {\n        var actions = this.actions;\n        var index = this.actions.indexOf(action);\n        if (index >= 0) {\n            actions.splice(index, 1);\n        }\n    };\n    /**\n     * 获取当前的点\n     */\n    Context.prototype.getCurrentPoint = function () {\n        var event = this.event;\n        if (event) {\n            if (event.target instanceof HTMLElement) {\n                var canvas = this.view.getCanvas();\n                var point = canvas.getPointByClient(event.clientX, event.clientY);\n                return point;\n            }\n            else {\n                return {\n                    x: event.x,\n                    y: event.y,\n                };\n            }\n        }\n        return null;\n    };\n    /**\n     * 获取当前 shape\n     * @returns current shape\n     */\n    Context.prototype.getCurrentShape = function () {\n        return get(this.event, ['gEvent', 'shape']);\n    };\n    /**\n     * 当前的触发是否在 View 内\n     */\n    Context.prototype.isInPlot = function () {\n        var point = this.getCurrentPoint();\n        if (point) {\n            return this.view.isPointInPlot(point);\n        }\n        return false;\n    };\n    /**\n     * 是否在指定的图形内\n     * @param name shape 的 name\n     */\n    Context.prototype.isInShape = function (name) {\n        var shape = this.getCurrentShape(); // 不再考虑在 shape 的 parent 内的情况\n        if (shape) {\n            return shape.get('name') === name;\n        }\n        return false;\n    };\n    /**\n     * 当前的触发是组件内部\n     * @param name 组件名，可以为空\n     */\n    Context.prototype.isInComponent = function (name) {\n        var components = getComponents(this.view);\n        var point = this.getCurrentPoint();\n        if (point) {\n            return !!components.find(function (component) {\n                var bbox = component.getBBox();\n                if (name) {\n                    return component.get('name') === name && isInBox(bbox, point);\n                }\n                else {\n                    return isInBox(bbox, point);\n                }\n            });\n        }\n        return false;\n    };\n    /**\n     * 销毁\n     */\n    Context.prototype.destroy = function () {\n        this.view = null;\n        this.event = null;\n        // 先销毁 action 再清空，一边遍历，一边删除，所以数组需要更新引用\n        each(this.actions.slice(), function (action) {\n            action.destroy();\n        });\n        this.actions = null;\n        this.cacheMap = null;\n    };\n    return Context;\n}());\nexport default Context;\n//# sourceMappingURL=context.js.map","/**\n * 交互的基类。\n */\nvar Interaction = /** @class */ (function () {\n    function Interaction(view, cfg) {\n        this.view = view;\n        this.cfg = cfg;\n    }\n    /**\n     * 初始化。\n     */\n    Interaction.prototype.init = function () {\n        this.initEvents();\n    };\n    /**\n     * 绑定事件\n     */\n    Interaction.prototype.initEvents = function () { };\n    /**\n     * 销毁事件\n     */\n    Interaction.prototype.clearEvents = function () { };\n    /**\n     * 销毁。\n     */\n    Interaction.prototype.destroy = function () {\n        this.clearEvents();\n    };\n    return Interaction;\n}());\nexport default Interaction;\n//# sourceMappingURL=interaction.js.map","import { __extends } from \"tslib\";\nimport { each, isArray, isFunction, isString, debounce, throttle } from '@antv/util';\nimport { createAction, createCallbackAction } from './action/register';\nimport InteractionContext from './context';\nimport Interaction from './interaction';\n// 将字符串转换成 action\nfunction parseAction(actionStr, context) {\n    var arr = actionStr.split(':');\n    var actionName = arr[0];\n    // 如果已经初始化过 action ，则直接引用之前的 action\n    var action = context.getAction(actionName) || createAction(actionName, context);\n    if (!action) {\n        throw new Error(\"There is no action named \" + actionName);\n    }\n    var methodName = arr[1];\n    return {\n        action: action,\n        methodName: methodName,\n    };\n}\n// 执行 Action\nfunction executeAction(actionObject) {\n    var action = actionObject.action, methodName = actionObject.methodName;\n    if (action[methodName]) {\n        action[methodName]();\n    }\n    else {\n        throw new Error(\"Action(\" + action.name + \") doesn't have a method called \" + methodName);\n    }\n}\nvar STEP_NAMES = {\n    START: 'start',\n    SHOW_ENABLE: 'showEnable',\n    END: 'end',\n    ROLLBACK: 'rollback',\n    PROCESSING: 'processing',\n};\n/**\n * 支持语法的交互类\n */\nvar GrammarInteraction = /** @class */ (function (_super) {\n    __extends(GrammarInteraction, _super);\n    function GrammarInteraction(view, steps) {\n        var _this = _super.call(this, view, steps) || this;\n        _this.callbackCaches = {};\n        // 某个触发和反馈在本环节是否执行或\n        _this.emitCaches = {};\n        _this.steps = steps;\n        return _this;\n    }\n    /**\n     * 初始化\n     */\n    GrammarInteraction.prototype.init = function () {\n        this.initContext();\n        _super.prototype.init.call(this);\n    };\n    /**\n     * 清理资源\n     */\n    GrammarInteraction.prototype.destroy = function () {\n        _super.prototype.destroy.call(this); // 先清理事件\n        this.steps = null;\n        if (this.context) {\n            this.context.destroy();\n            this.context = null;\n        }\n        this.callbackCaches = null;\n        this.view = null;\n    };\n    /**\n     * 绑定事件\n     */\n    GrammarInteraction.prototype.initEvents = function () {\n        var _this = this;\n        each(this.steps, function (stepArr, stepName) {\n            each(stepArr, function (step) {\n                var callback = _this.getActionCallback(stepName, step);\n                if (callback) {\n                    // 如果存在 callback，才绑定，有时候会出现无 callback 的情况\n                    _this.bindEvent(step.trigger, callback);\n                }\n            });\n        });\n    };\n    /**\n     * 清理绑定的事件\n     */\n    GrammarInteraction.prototype.clearEvents = function () {\n        var _this = this;\n        each(this.steps, function (stepArr, stepName) {\n            each(stepArr, function (step) {\n                var callback = _this.getActionCallback(stepName, step);\n                if (callback) {\n                    _this.offEvent(step.trigger, callback);\n                }\n            });\n        });\n    };\n    // 初始化上下文，并初始化 action\n    GrammarInteraction.prototype.initContext = function () {\n        var view = this.view;\n        var context = new InteractionContext(view);\n        this.context = context;\n        var steps = this.steps;\n        // 生成具体的 Action\n        each(steps, function (subSteps) {\n            each(subSteps, function (step) {\n                if (isFunction(step.action)) {\n                    // 如果传入回调函数，则直接生成 CallbackAction\n                    step.actionObject = {\n                        action: createCallbackAction(step.action, context),\n                        methodName: 'execute',\n                    };\n                }\n                else if (isString(step.action)) {\n                    // 如果是字符串\n                    step.actionObject = parseAction(step.action, context);\n                }\n                else if (isArray(step.action)) {\n                    // 如果是数组\n                    var actionArr = step.action;\n                    step.actionObject = [];\n                    each(actionArr, function (actionStr) {\n                        step.actionObject.push(parseAction(actionStr, context));\n                    });\n                }\n                // 如果 action 既不是字符串，也不是函数，则不会生成 actionObject\n            });\n        });\n    };\n    // 是否允许指定阶段名称执行\n    GrammarInteraction.prototype.isAllowStep = function (stepName) {\n        var currentStepName = this.currentStepName;\n        var steps = this.steps;\n        // 相同的阶段允许同时执行\n        if (currentStepName === stepName) {\n            return true;\n        }\n        if (stepName === STEP_NAMES.SHOW_ENABLE) {\n            // 示能在整个过程中都可用\n            return true;\n        }\n        if (stepName === STEP_NAMES.PROCESSING) {\n            // 只有当前是 start 时，才允许 processing\n            return currentStepName === STEP_NAMES.START;\n        }\n        if (stepName === STEP_NAMES.START) {\n            // 如果当前是 processing，则无法 start，必须等待 end 后才能执行\n            return currentStepName !== STEP_NAMES.PROCESSING;\n        }\n        if (stepName === STEP_NAMES.END) {\n            return currentStepName === STEP_NAMES.PROCESSING || currentStepName === STEP_NAMES.START;\n        }\n        if (stepName === STEP_NAMES.ROLLBACK) {\n            if (steps[STEP_NAMES.END]) {\n                // 如果定义了 end, 只有 end 时才允许回滚\n                return currentStepName === STEP_NAMES.END;\n            }\n            else if (currentStepName === STEP_NAMES.START) {\n                // 如果未定义 end, 则判断是否是开始\n                return true;\n            }\n        }\n        return false;\n    };\n    // 具体的指定阶段是否允许执行\n    GrammarInteraction.prototype.isAllowExcute = function (stepName, step) {\n        if (this.isAllowStep(stepName)) {\n            var key = this.getKey(stepName, step);\n            // 如果是在本环节内仅允许触发一次，同时已经触发过，则不允许再触发\n            if (step.once && this.emitCaches[key]) {\n                return false;\n            }\n            // 如果是允许的阶段，则验证 isEnable 方法\n            if (step.isEnable) {\n                return step.isEnable(this.context);\n            }\n            return true; // 如果没有 isEnable 则允许执行\n        }\n        return false;\n    };\n    GrammarInteraction.prototype.enterStep = function (stepName) {\n        this.currentStepName = stepName;\n        this.emitCaches = {}; // 清除所有本环节触发的缓存\n    };\n    // 执行完某个触发和反馈（子环节）\n    GrammarInteraction.prototype.afterExecute = function (stepName, step) {\n        // show enable 不计入正常的流程，其他情况则设置当前的 step\n        if (stepName !== STEP_NAMES.SHOW_ENABLE && this.currentStepName !== stepName) {\n            this.enterStep(stepName);\n        }\n        var key = this.getKey(stepName, step);\n        // 一旦执行，则缓存标记为，一直保持到跳出改环节\n        this.emitCaches[key] = true;\n    };\n    // 获取某个环节的唯一的键值\n    GrammarInteraction.prototype.getKey = function (stepName, step) {\n        return stepName + step.trigger + step.action;\n    };\n    // 获取 step 的回调函数，如果已经生成，则直接返回，如果未生成，则创建\n    GrammarInteraction.prototype.getActionCallback = function (stepName, step) {\n        var _this = this;\n        var context = this.context;\n        var callbackCaches = this.callbackCaches;\n        var actionObject = step.actionObject;\n        if (step.action && actionObject) {\n            var key = this.getKey(stepName, step);\n            if (!callbackCaches[key]) {\n                // 动态生成执行的方法，执行对应 action 的名称\n                var actionCallback = function (event) {\n                    context.event = event; // 保证检测时的 event\n                    if (_this.isAllowExcute(stepName, step)) {\n                        // 如果是数组时，则依次执行\n                        if (isArray(actionObject)) {\n                            each(actionObject, function (obj) {\n                                context.event = event; // 可能触发新的事件，保证执行前的 context.event 是正确的\n                                executeAction(obj);\n                            });\n                        }\n                        else {\n                            context.event = event; // 保证执行前的 context.event 是正确的\n                            executeAction(actionObject);\n                        }\n                        _this.afterExecute(stepName, step);\n                        if (step.callback) {\n                            context.event = event; // 保证执行前的 context.event 是正确的\n                            step.callback(context);\n                        }\n                    }\n                    else {\n                        // 如果未通过验证，则事件不要绑定在上面\n                        context.event = null;\n                    }\n                };\n                // 如果设置了 debounce\n                if (step.debounce) {\n                    callbackCaches[key] = debounce(actionCallback, step.debounce.wait, step.debounce.immediate);\n                }\n                else if (step.throttle) { // 设置 throttle\n                    callbackCaches[key] = throttle(actionCallback, step.throttle.wait, {\n                        leading: step.throttle.leading,\n                        trailing: step.throttle.trailing\n                    });\n                }\n                else { // 直接设置\n                    callbackCaches[key] = actionCallback;\n                }\n            }\n            return callbackCaches[key];\n        }\n        return null;\n    };\n    GrammarInteraction.prototype.bindEvent = function (eventName, callback) {\n        var nameArr = eventName.split(':');\n        if (nameArr[0] === 'window') {\n            window.addEventListener(nameArr[1], callback);\n        }\n        else if (nameArr[0] === 'document') {\n            document.addEventListener(nameArr[1], callback);\n        }\n        else {\n            this.view.on(eventName, callback);\n        }\n    };\n    GrammarInteraction.prototype.offEvent = function (eventName, callback) {\n        var nameArr = eventName.split(':');\n        if (nameArr[0] === 'window') {\n            window.removeEventListener(nameArr[1], callback);\n        }\n        else if (nameArr[0] === 'document') {\n            document.removeEventListener(nameArr[1], callback);\n        }\n        else {\n            this.view.off(eventName, callback);\n        }\n    };\n    return GrammarInteraction;\n}(Interaction));\nexport default GrammarInteraction;\n//# sourceMappingURL=grammar-interaction.js.map","import { clone, isPlainObject, lowerCase, mix } from '@antv/util';\nimport GrammarInteraction from './grammar-interaction';\nvar Interactions = {};\n/**\n * 根据交互行为名字获取对应的交互类\n * @param name 交互名字\n * @returns 交互类\n */\nexport function getInteraction(name) {\n    return Interactions[lowerCase(name)];\n}\n/**\n * 注册交互行为\n * @param name 交互行为名字\n * @param interaction 交互类\n */\nexport function registerInteraction(name, interaction) {\n    Interactions[lowerCase(name)] = interaction;\n}\n/**\n * 创建交互实例\n * @param name 交互名\n * @param view 交互应用的 View 实例\n * @param cfg 交互行为配置\n */\nexport function createInteraction(name, view, cfg) {\n    var interaciton = getInteraction(name);\n    if (!interaciton) {\n        return null;\n    }\n    if (isPlainObject(interaciton)) {\n        // 如果不 clone 则会多个 interaction 实例共享 step 的定义\n        var steps = mix(clone(interaciton), cfg);\n        return new GrammarInteraction(view, steps);\n    }\n    else {\n        var cls = interaciton;\n        return new cls(view, cfg);\n    }\n}\nexport { default as Interaction } from './interaction';\nexport { Action, registerAction, getActionClass } from './action';\n//# sourceMappingURL=index.js.map","var BLACK_COLORS = {\n    100: '#000',\n    95: '#0D0D0D',\n    85: '#262626',\n    65: '#595959',\n    45: '#8C8C8C',\n    25: '#BFBFBF',\n    15: '#D9D9D9',\n    6: '#F0F0F0',\n};\nvar WHITE_COLORS = {\n    100: '#FFFFFF',\n    95: '#F2F2F2',\n    85: '#D9D9D9',\n    65: '#A6A6A6',\n    45: '#737373',\n    25: '#404040',\n    15: '#262626',\n    6: '#0F0F0F',\n};\nvar QUALITATIVE_10 = [\n    '#5B8FF9',\n    '#5AD8A6',\n    '#5D7092',\n    '#F6BD16',\n    '#E86452',\n    '#6DC8EC',\n    '#945FB9',\n    '#FF9845',\n    '#1E9493',\n    '#FF99C3',\n];\nvar QUALITATIVE_20 = [\n    '#5B8FF9',\n    '#CDDDFD',\n    '#5AD8A6',\n    '#CDF3E4',\n    '#5D7092',\n    '#CED4DE',\n    '#F6BD16',\n    '#FCEBB9',\n    '#E86452',\n    '#F8D0CB',\n    '#6DC8EC',\n    '#D3EEF9',\n    '#945FB9',\n    '#DECFEA',\n    '#FF9845',\n    '#FFE0C7',\n    '#1E9493',\n    '#BBDEDE',\n    '#FF99C3',\n    '#FFE0ED',\n];\nexport var antvLight = {\n    /** 主题色 */\n    brandColor: QUALITATIVE_10[0],\n    /** 分类色板 1，在数据量小于等于 10 时使用 */\n    paletteQualitative10: QUALITATIVE_10,\n    /** 分类色板 2，在数据量大于 10 时使用 */\n    paletteQualitative20: QUALITATIVE_20,\n    /** 语义色 */\n    paletteSemanticRed: '#F4664A',\n    /** 语义色 */\n    paletteSemanticGreen: '#30BF78',\n    /** 语义色 */\n    paletteSemanticYellow: '#FAAD14',\n    /** 字体 */\n    fontFamily: \"\\\"-apple-system\\\", \\\"Segoe UI\\\", Roboto, \\\"Helvetica Neue\\\", Arial,\\n  \\\"Noto Sans\\\", sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\",\\n  \\\"Noto Color Emoji\\\"\",\n    // -------------------- 坐标轴 --------------------\n    /** 坐标轴线颜色 */\n    axisLineBorderColor: BLACK_COLORS[25],\n    /** 坐标轴线粗细 */\n    axisLineBorder: 0.5,\n    /** 坐标轴线 lineDash 设置 */\n    axisLineDash: null,\n    /** 坐标轴标题颜色 */\n    axisTitleTextFillColor: BLACK_COLORS[65],\n    /** 坐标轴标题文本字体大小 */\n    axisTitleTextFontSize: 12,\n    /** 坐标轴标题文本行高 */\n    axisTitleTextLineHeight: 12,\n    /** 坐标轴标题文本字体粗细 */\n    axisTitleTextFontWeight: 'normal',\n    /** 坐标轴刻度线颜色 */\n    axisTickLineBorderColor: BLACK_COLORS[25],\n    /** 坐标轴刻度线长度 */\n    axisTickLineLength: 4,\n    /** 坐标轴刻度线粗细 */\n    axisTickLineBorder: 0.5,\n    /** 坐标轴次刻度线颜色 */\n    axisSubTickLineBorderColor: BLACK_COLORS[15],\n    /** 坐标轴次刻度线长度 */\n    axisSubTickLineLength: 2,\n    /** 坐标轴次刻度线粗细 */\n    axisSubTickLineBorder: 0.5,\n    /** 坐标轴刻度文本颜色 */\n    axisLabelFillColor: BLACK_COLORS[45],\n    /** 坐标轴刻度文本字体大小 */\n    axisLabelFontSize: 12,\n    /** 坐标轴刻度文本行高 */\n    axisLabelLineHeight: 12,\n    /** 坐标轴刻度文本字体粗细 */\n    axisLabelFontWeight: 'normal',\n    /** 坐标轴网格线颜色 */\n    axisGridBorderColor: BLACK_COLORS[15],\n    /** 坐标轴网格线粗细 */\n    axisGridBorder: 0.5,\n    /** 坐标轴网格线虚线设置 */\n    axisGridLineDash: null,\n    // -------------------- 图例 --------------------\n    /** 图例标题颜色 */\n    legendTitleTextFillColor: BLACK_COLORS[45],\n    /** 图例标题文本字体大小 */\n    legendTitleTextFontSize: 12,\n    /** 图例标题文本行高 */\n    legendTitleTextLineHeight: 21,\n    /** 图例标题文本字体粗细 */\n    legendTitleTextFontWeight: 'normal',\n    /** 图例 marker 颜色 */\n    legendMarkerColor: QUALITATIVE_10[0],\n    /** 图例 marker 默认半径大小 */\n    legendMarkerSize: 4,\n    /** 图例 'circle' marker 半径 */\n    legendCircleMarkerSize: 4,\n    /** 图例 'square' marker 半径 */\n    legendSquareMarkerSize: 4,\n    /** 图例 'line' marker 半径 */\n    legendLineMarkerSize: 5,\n    /** 图例项文本颜色 */\n    legendItemNameFillColor: BLACK_COLORS[65],\n    /** 图例项文本字体大小 */\n    legendItemNameFontSize: 12,\n    /** 图例项文本行高 */\n    legendItemNameLineHeight: 12,\n    /** 图例项粗细 */\n    legendItemNameFontWeight: 'normal',\n    /** 连续图例滑块填充色 */\n    sliderRailFillColor: BLACK_COLORS[15],\n    /** 连续图例滑块边框粗细 */\n    sliderRailBorder: 0,\n    /** 连续图例滑块边框颜色 */\n    sliderRailBorderColor: null,\n    /** 连续图例滑块宽度 */\n    sliderRailWidth: 100,\n    /** 连续图例滑块高度 */\n    sliderRailHeight: 12,\n    /** 连续图例文本颜色 */\n    sliderLabelTextFillColor: BLACK_COLORS[45],\n    /** 连续图例文本字体大小 */\n    sliderLabelTextFontSize: 12,\n    /** 连续图例文本行高 */\n    sliderLabelTextLineHeight: 12,\n    /** 连续图例文本字体粗细 */\n    sliderLabelTextFontWeight: 'normal',\n    /** 连续图例滑块颜色 */\n    sliderHandlerFillColor: BLACK_COLORS[6],\n    /** 连续图例滑块宽度 */\n    sliderHandlerWidth: 10,\n    /** 连续图例滑块高度 */\n    sliderHandlerHeight: 14,\n    /** 连续图例滑块边框粗细 */\n    sliderHandlerBorder: 1,\n    /** 连续图例滑块边框颜色 */\n    sliderHandlerBorderColor: BLACK_COLORS[25],\n    // -------------------- Annotation，图形标注 --------------------\n    /** arc 图形标注描边颜色 */\n    annotationArcBorderColor: BLACK_COLORS[15],\n    /** arc 图形标注粗细 */\n    annotationArcBorder: 0.5,\n    /** line 图形标注颜色 */\n    annotationLineBorderColor: BLACK_COLORS[25],\n    /** line 图形标注粗细 */\n    annotationLineBorder: 0.5,\n    /** lube 图形标注的虚线间隔 */\n    annotationLineDash: null,\n    /** text 图形标注文本颜色 */\n    annotationTextFillColor: BLACK_COLORS[65],\n    /** text 图形标注文本字体大小 */\n    annotationTextFontSize: 12,\n    /** text 图形标注文本行高 */\n    annotationTextLineHeight: 12,\n    /** text 图形标注文本字体粗细 */\n    annotationTextFontWeight: 'normal',\n    /** text 图形标注文本边框颜色 */\n    annotationTextBorderColor: WHITE_COLORS[95],\n    /** text 图形标注文本边框粗细 */\n    annotationTextBorder: 1.5,\n    /** region 图形标注填充颜色 */\n    annotationRegionFillColor: BLACK_COLORS[100],\n    /** region 图形标注填充颜色透明色 */\n    annotationRegionFillOpacity: 0.06,\n    /** region 图形标注描边粗细 */\n    annotationRegionBorder: 0,\n    /** region 图形标注描边颜色 */\n    annotationRegionBorderColor: null,\n    /** dataMarker 图形标注线的长度 */\n    annotationDataMarkerLineLength: 16,\n    // -------------------- Tooltip --------------------\n    /** tooltip crosshairs 辅助线颜色 */\n    tooltipCrosshairsBorderColor: BLACK_COLORS[25],\n    /** tooltip crosshairs 辅助线粗细 */\n    tooltipCrosshairsBorder: 0.5,\n    /** tooltip crosshairs 辅助线虚线间隔 */\n    tooltipCrosshairsLineDash: null,\n    /** tooltip 内容框背景色 */\n    tooltipContainerFillColor: 'rgb(255, 255, 255)',\n    tooltipContainerFillOpacity: 0.95,\n    /** tooltip 内容框阴影 */\n    tooltipContainerShadow: '0px 0px 10px #aeaeae',\n    /** tooltip 内容框圆角 */\n    tooltipContainerBorderRadius: 3,\n    /** tooltip 文本颜色 */\n    tooltipTextFillColor: BLACK_COLORS[65],\n    /** tooltip 文本字体大小 */\n    tooltipTextFontSize: 12,\n    /** tooltip 文本行高 */\n    tooltipTextLineHeight: 12,\n    /** tooltip 文本字体粗细 */\n    tooltipTextFontWeight: 'bold',\n    // -------------------- Geometry labels --------------------\n    /** Geometry label 文本颜色 */\n    labelFillColor: BLACK_COLORS[65],\n    /** Geometry label 文本字体大小 */\n    labelFontSize: 12,\n    /** Geometry label 文本行高 */\n    labelLineHeight: 12,\n    /** Geometry label 文本字体粗细 */\n    labelFontWeight: 'normal',\n    /** Geometry label 文本描边颜色 */\n    labelBorderColor: null,\n    /** Geometry label 文本描边粗细 */\n    labelBorder: 0,\n    /** Geometry innerLabel 文本颜色 */\n    innerLabelFillColor: WHITE_COLORS[100],\n    /** Geometry innerLabel 文本字体大小 */\n    innerLabelFontSize: 12,\n    /** Geometry innerLabel 文本行高 */\n    innerLabelLineHeight: 12,\n    /** Geometry innerLabel 文本字体粗细 */\n    innerLabelFontWeight: 'normal',\n    /** Geometry innerLabel 文本描边颜色 */\n    innerLabelBorderColor: null,\n    /** Geometry innerLabel 文本描边粗细 */\n    innerLabelBorder: 0,\n    /** Geometry label　文本连接线粗细 */\n    labelLineBorder: 0.5,\n    /** Geometry label 文本连接线颜色 */\n    labelLineBorderColor: BLACK_COLORS[25],\n    // -------------------- Geometry 图形样式--------------------\n    /** 点图填充颜色 */\n    pointFillColor: QUALITATIVE_10[0],\n    /** 点图填充颜色透明度 */\n    pointFillOpacity: 0.95,\n    /** 点图大小 */\n    pointSize: 4,\n    /** 点图描边粗细 */\n    pointBorder: 1,\n    /** 点图描边颜色 */\n    pointBorderColor: WHITE_COLORS[100],\n    /** 点图描边透明度 */\n    pointBorderOpacity: 1,\n    /** 点图 active 状态下描边颜色 */\n    pointActiveBorderColor: BLACK_COLORS[100],\n    /** 点图 selected 状态下描边粗细 */\n    pointSelectedBorder: 2,\n    /** 点图 selected 状态下描边颜色 */\n    pointSelectedBorderColor: BLACK_COLORS[100],\n    /** 点图 inactive 状态下填充颜色透明度 */\n    pointInactiveFillOpacity: 0.3,\n    /** 点图 inactive 状态下描边透明度 */\n    pointInactiveBorderOpacity: 0.3,\n    /** 空心点图大小 */\n    hollowPointSize: 4,\n    /** 空心点图描边粗细 */\n    hollowPointBorder: 1,\n    /** 空心点图描边颜色 */\n    hollowPointBorderColor: QUALITATIVE_10[0],\n    /** 空心点图描边透明度 */\n    hollowPointBorderOpacity: 0.95,\n    hollowPointFillColor: WHITE_COLORS[100],\n    /** 空心点图 active 状态下描边粗细 */\n    hollowPointActiveBorder: 1,\n    /** 空心点图 active 状态下描边颜色 */\n    hollowPointActiveBorderColor: BLACK_COLORS[100],\n    /** 空心点图 active 状态下描边透明度 */\n    hollowPointActiveBorderOpacity: 1,\n    /** 空心点图 selected 状态下描边粗细 */\n    hollowPointSelectedBorder: 2,\n    /** 空心点图 selected 状态下描边颜色 */\n    hollowPointSelectedBorderColor: BLACK_COLORS[100],\n    /** 空心点图 selected 状态下描边透明度 */\n    hollowPointSelectedBorderOpacity: 1,\n    /** 空心点图 inactive 状态下描边透明度 */\n    hollowPointInactiveBorderOpacity: 0.3,\n    /** 线图粗细 */\n    lineBorder: 2,\n    /** 线图颜色 */\n    lineBorderColor: QUALITATIVE_10[0],\n    /** 线图透明度 */\n    lineBorderOpacity: 1,\n    /** 线图 Active 状态下粗细 */\n    lineActiveBorder: 3,\n    /** 线图 selected 状态下粗细 */\n    lineSelectedBorder: 3,\n    /** 线图 inactive 状态下透明度 */\n    lineInactiveBorderOpacity: 0.3,\n    /** area 填充颜色 */\n    areaFillColor: QUALITATIVE_10[0],\n    /** area 填充透明度 */\n    areaFillOpacity: 0.25,\n    /** area 在 active 状态下的填充透明度 */\n    areaActiveFillColor: QUALITATIVE_10[0],\n    areaActiveFillOpacity: 0.5,\n    /** area 在 selected 状态下的填充透明度 */\n    areaSelectedFillColor: QUALITATIVE_10[0],\n    areaSelectedFillOpacity: 0.5,\n    /** area inactive 状态下填充透明度 */\n    areaInactiveFillOpacity: 0.3,\n    /** hollowArea 颜色 */\n    hollowAreaBorderColor: QUALITATIVE_10[0],\n    /** hollowArea 边框粗细 */\n    hollowAreaBorder: 2,\n    /** hollowArea 边框透明度 */\n    hollowAreaBorderOpacity: 1,\n    /** hollowArea active 状态下的边框粗细 */\n    hollowAreaActiveBorder: 3,\n    hollowAreaActiveBorderColor: BLACK_COLORS[100],\n    /** hollowArea selected 状态下的边框粗细 */\n    hollowAreaSelectedBorder: 3,\n    hollowAreaSelectedBorderColor: BLACK_COLORS[100],\n    /** hollowArea inactive 状态下的边框透明度 */\n    hollowAreaInactiveBorderOpacity: 0.3,\n    /** interval 填充颜色 */\n    intervalFillColor: QUALITATIVE_10[0],\n    /** interval 填充透明度 */\n    intervalFillOpacity: 0.95,\n    /** interval active 状态下边框粗细 */\n    intervalActiveBorder: 1,\n    /** interval active 状态下边框颜色 */\n    intervalActiveBorderColor: BLACK_COLORS[100],\n    intervalActiveBorderOpacity: 1,\n    /** interval selected 状态下边框粗细 */\n    intervalSelectedBorder: 2,\n    /** interval selected 状态下边框颜色 */\n    intervalSelectedBorderColor: BLACK_COLORS[100],\n    /** interval selected 状态下边框透明度 */\n    intervalSelectedBorderOpacity: 1,\n    /** interval inactive 状态下边框透明度 */\n    intervalInactiveBorderOpacity: 0.3,\n    /** interval inactive 状态下填充透明度 */\n    intervalInactiveFillOpacity: 0.3,\n    /** interval 边框粗细 */\n    hollowIntervalBorder: 2,\n    /** hollowInterval 边框颜色 */\n    hollowIntervalBorderColor: QUALITATIVE_10[0],\n    /** hollowInterval 边框透明度 */\n    hollowIntervalBorderOpacity: 1,\n    hollowIntervalFillColor: WHITE_COLORS[100],\n    /** hollowInterval active 状态下边框粗细 */\n    hollowIntervalActiveBorder: 2,\n    /** hollowInterval active 状态下边框颜色 */\n    hollowIntervalActiveBorderColor: BLACK_COLORS[100],\n    /** hollowInterval selected 状态下边框粗细 */\n    hollowIntervalSelectedBorder: 3,\n    /** hollowInterval selected 状态下边框颜色 */\n    hollowIntervalSelectedBorderColor: BLACK_COLORS[100],\n    /** hollowInterval selected 状态下边框透明度 */\n    hollowIntervalSelectedBorderOpacity: 1,\n    /** hollowInterval inactive 状态下边框透明度 */\n    hollowIntervalInactiveBorderOpacity: 0.3,\n};\n//# sourceMappingURL=light.js.map","import { get, lowerCase } from '@antv/util';\nimport { createThemeByStylesheet } from '../util/theme';\nimport { antvLight as DefaultStyleSheet } from './style-sheet/light';\nvar defaultTheme = createThemeByStylesheet(DefaultStyleSheet);\n// 所有已经存在的主题\nvar Themes = {\n    default: defaultTheme,\n};\n/**\n * 获取主题配置信息。\n * @param theme 主题名\n */\nexport function getTheme(theme) {\n    return get(Themes, lowerCase(theme), Themes.default);\n}\n/**\n * 注册新的主题配置信息。\n * @param theme 主题名。\n * @param value 具体的主题配置。\n */\nexport function registerTheme(theme, value) {\n    Themes[lowerCase(theme)] = value;\n}\n//# sourceMappingURL=index.js.map","import { __assign } from \"tslib\";\nimport { contains, filter, find, hasKey, isArray, isNil, isNumberEqual, isObject, memoize, values, } from '@antv/util';\nimport { FIELD_ORIGIN, GROUP_ATTRS } from '../constant';\nimport { getName } from './scale';\nfunction snapEqual(v1, v2, scale) {\n    var value1 = scale.translate(v1);\n    var value2 = scale.translate(v2);\n    return isNumberEqual(value1, value2);\n}\nfunction getXValueByPoint(point, geometry) {\n    var coordinate = geometry.coordinate;\n    var xScale = geometry.getXScale();\n    var range = xScale.range;\n    var rangeMax = range[range.length - 1];\n    var rangeMin = range[0];\n    var invertPoint = coordinate.invert(point);\n    var xValue = invertPoint.x;\n    if (coordinate.isPolar && xValue > (1 + rangeMax) / 2) {\n        xValue = rangeMin; // 极坐标下，scale 的 range 被做过特殊处理\n    }\n    return xScale.translate(xScale.invert(xValue));\n}\nfunction filterYValue(data, point, geometry) {\n    var coordinate = geometry.coordinate;\n    var yScale = geometry.getYScale();\n    var yField = yScale.field;\n    var invertPoint = coordinate.invert(point);\n    var yValue = yScale.invert(invertPoint.y);\n    var result = find(data, function (obj) {\n        var originData = obj[FIELD_ORIGIN];\n        return originData[yField][0] <= yValue && originData[yField][1] >= yValue;\n    });\n    return result || data[data.length - 1];\n}\nvar getXDistance = memoize(function (scale) {\n    if (scale.isCategory) {\n        return 1;\n    }\n    var scaleValues = scale.values; // values 是无序的\n    var length = scaleValues.length;\n    var min = scale.translate(scaleValues[0]);\n    var max = min;\n    for (var index = 0; index < length; index++) {\n        var value = scaleValues[index];\n        // 时间类型需要 translate\n        var numericValue = scale.translate(value);\n        if (numericValue < min) {\n            min = numericValue;\n        }\n        if (numericValue > max) {\n            max = numericValue;\n        }\n    }\n    return (max - min) / (length - 1);\n});\nfunction getTooltipTitle(originData, geometry, title) {\n    var titleField = title;\n    if (!title) {\n        var positionAttr = geometry.getAttribute('position');\n        var fields = positionAttr.getFields();\n        titleField = fields[0];\n    }\n    var scales = geometry.scales;\n    if (scales[titleField]) {\n        // 如果创建了该字段对应的 scale，则通过 scale.getText() 方式取值，因为用户可能对数据进行了格式化\n        return scales[titleField].getText(originData[titleField]);\n    }\n    // 如果没有对应的 scale，则从原始数据中取值，如果原始数据中仍不存在，则直接放回 title 值\n    return hasKey(originData, titleField) ? originData[titleField] : titleField;\n}\nfunction getAttributesForLegend(geometry) {\n    var attributes = values(geometry.attributes);\n    return filter(attributes, function (attribute) { return contains(GROUP_ATTRS, attribute.type); });\n}\nfunction getTooltipValueScale(geometry) {\n    var attributes = getAttributesForLegend(geometry);\n    var scale;\n    for (var _i = 0, attributes_1 = attributes; _i < attributes_1.length; _i++) {\n        var attribute = attributes_1[_i];\n        var tmpScale = attribute.getScale(attribute.type);\n        if (tmpScale && tmpScale.isLinear) {\n            // 如果指定字段是非 position 的，同时是连续的\n            scale = tmpScale;\n            break;\n        }\n    }\n    var xScale = geometry.getXScale();\n    var yScale = geometry.getYScale();\n    return scale || yScale || xScale;\n}\nfunction getTooltipValue(originData, valueScale) {\n    var field = valueScale.field;\n    var value = originData[field];\n    if (isArray(value)) {\n        var texts = value.map(function (eachValue) {\n            return valueScale.getText(eachValue);\n        });\n        return texts.join('-');\n    }\n    return valueScale.getText(value);\n}\n// 根据原始数据获取 tooltip item 中 name 值\nfunction getTooltipName(originData, geometry) {\n    var nameScale;\n    var groupScales = geometry.getGroupScales();\n    if (groupScales.length) {\n        // 如果存在分组类型，取第一个分组类型\n        nameScale = groupScales[0];\n    }\n    if (nameScale) {\n        var field = nameScale.field;\n        return nameScale.getText(originData[field]);\n    }\n    var valueScale = getTooltipValueScale(geometry);\n    return getName(valueScale);\n}\n/**\n * @ignore\n * Finds data from geometry by point\n * @param point canvas point\n * @param data an item of geometry.dataArray\n * @param geometry\n * @returns\n */\nexport function findDataByPoint(point, data, geometry) {\n    if (data.length === 0) {\n        return null;\n    }\n    var geometryType = geometry.type;\n    var xScale = geometry.getXScale();\n    var yScale = geometry.getYScale();\n    var xField = xScale.field;\n    var yField = yScale.field;\n    var rst = null;\n    // 热力图采用最小逼近策略查找 point 击中的数据\n    if (geometryType === 'heatmap' || geometryType === 'point') {\n        // 将 point 画布坐标转换为原始数据值\n        var coordinate = geometry.coordinate;\n        var invertPoint = coordinate.invert(point); // 转换成归一化的数据\n        var x = xScale.invert(invertPoint.x); // 转换为原始值\n        var y = yScale.invert(invertPoint.y); // 转换为原始值\n        var min = Infinity;\n        for (var index = 0; index < data.length; index++) {\n            var obj = data[index];\n            var originData = obj[FIELD_ORIGIN];\n            var range = Math.pow((originData[xField] - x), 2) + Math.pow((originData[yField] - y), 2);\n            if (range < min) {\n                min = range;\n                rst = obj;\n            }\n        }\n        return rst;\n    }\n    // 其他 Geometry 类型按照 x 字段数据进行查找\n    var first = data[0];\n    var last = data[data.length - 1];\n    var xValue = getXValueByPoint(point, geometry);\n    var firstXValue = first[FIELD_ORIGIN][xField];\n    var firstYValue = first[FIELD_ORIGIN][yField];\n    var lastXValue = last[FIELD_ORIGIN][xField];\n    var isYArray = yScale.isLinear && isArray(firstYValue); // 考虑 x 维度相同，y 是数组区间的情况\n    // 如果 x 的值是数组\n    if (isArray(firstXValue)) {\n        for (var index = 0; index < data.length; index++) {\n            var record = data[index];\n            var originData = record[FIELD_ORIGIN];\n            // xValue 在 originData[xField] 的数值区间内\n            if (xScale.translate(originData[xField][0]) <= xValue && xScale.translate(originData[xField][1]) >= xValue) {\n                if (isYArray) {\n                    // 层叠直方图场景，x 和 y 都是数组区间\n                    if (!isArray(rst)) {\n                        rst = [];\n                    }\n                    rst.push(record);\n                }\n                else {\n                    rst = record;\n                    break;\n                }\n            }\n        }\n        if (isArray(rst)) {\n            rst = filterYValue(rst, point, geometry);\n        }\n    }\n    else {\n        var next = void 0;\n        if (!xScale.isLinear && xScale.type !== 'timeCat') {\n            // x 轴对应的数据为非线性以及非时间类型的数据采用遍历查找\n            for (var index = 0; index < data.length; index++) {\n                var record = data[index];\n                var originData = record[FIELD_ORIGIN];\n                if (snapEqual(originData[xField], xValue, xScale)) {\n                    if (isYArray) {\n                        if (!isArray(rst)) {\n                            rst = [];\n                        }\n                        rst.push(record);\n                    }\n                    else {\n                        rst = record;\n                        break;\n                    }\n                }\n                else if (xScale.translate(originData[xField]) <= xValue) {\n                    last = record;\n                    next = data[index + 1];\n                }\n            }\n            if (isArray(rst)) {\n                rst = filterYValue(rst, point, geometry);\n            }\n        }\n        else {\n            // x 轴对应的数据为线性以及时间类型，进行二分查找，性能更好\n            if ((xValue > xScale.translate(lastXValue) || xValue < xScale.translate(firstXValue))\n                && (xValue > xScale.max || xValue < xScale.min)) {\n                // 不在数据范围内\n                return null;\n            }\n            var firstIdx = 0;\n            var lastIdx = data.length - 1;\n            var middleIdx = void 0;\n            while (firstIdx <= lastIdx) {\n                middleIdx = Math.floor((firstIdx + lastIdx) / 2);\n                var item = data[middleIdx][FIELD_ORIGIN][xField];\n                if (snapEqual(item, xValue, xScale)) {\n                    return data[middleIdx];\n                }\n                if (xScale.translate(item) <= xScale.translate(xValue)) {\n                    firstIdx = middleIdx + 1;\n                    last = data[middleIdx];\n                    next = data[middleIdx + 1];\n                }\n                else {\n                    if (lastIdx === 0) {\n                        last = data[0];\n                    }\n                    lastIdx = middleIdx - 1;\n                }\n            }\n        }\n        if (last && next) {\n            // 计算最逼近的\n            if (Math.abs(xScale.translate(last[FIELD_ORIGIN][xField]) - xValue) >\n                Math.abs(xScale.translate(next[FIELD_ORIGIN][xField]) - xValue)) {\n                last = next;\n            }\n        }\n    }\n    var distance = getXDistance(geometry.getXScale()); // 每个分类间的平均间距\n    if (!rst && Math.abs(xScale.translate(last[FIELD_ORIGIN][xField]) - xValue) <= distance / 2) {\n        rst = last;\n    }\n    return rst;\n}\n/**\n * @ignore\n * Gets tooltip items\n * @param data\n * @param geometry\n * @param [title]\n * @returns\n */\nexport function getTooltipItems(data, geometry, title) {\n    if (title === void 0) { title = ''; }\n    var originData = data[FIELD_ORIGIN];\n    var tooltipTitle = getTooltipTitle(originData, geometry, title);\n    var tooltipOption = geometry.tooltipOption;\n    var defaultColor = geometry.theme.defaultColor;\n    var items = [];\n    var name;\n    var value;\n    function addItem(itemName, itemValue) {\n        if (!isNil(itemValue) && itemValue !== '') {\n            // 值为 null的时候，忽视\n            var item = {\n                title: tooltipTitle,\n                data: originData,\n                mappingData: data,\n                name: itemName || tooltipTitle,\n                value: itemValue,\n                color: data.color || defaultColor,\n                marker: true,\n            };\n            items.push(item);\n        }\n    }\n    if (isObject(tooltipOption)) {\n        var fields = tooltipOption.fields, callback = tooltipOption.callback;\n        if (callback) {\n            // 用户定义了回调函数\n            var callbackParams = fields.map(function (field) {\n                return data[FIELD_ORIGIN][field];\n            });\n            var cfg = callback.apply(void 0, callbackParams);\n            var itemCfg = __assign({ data: data[FIELD_ORIGIN], mappingData: data, title: tooltipTitle, color: data.color || defaultColor, marker: true }, cfg);\n            items.push(itemCfg);\n        }\n        else {\n            var scales = geometry.scales;\n            for (var _i = 0, fields_1 = fields; _i < fields_1.length; _i++) {\n                var field = fields_1[_i];\n                if (!isNil(originData[field])) {\n                    // 字段数据为null, undefined 时不显示\n                    var scale = scales[field];\n                    name = getName(scale);\n                    value = scale.getText(originData[field]);\n                    addItem(name, value);\n                }\n            }\n        }\n    }\n    else {\n        var valueScale = getTooltipValueScale(geometry);\n        if (!isNil(originData[valueScale.field])) {\n            // 字段数据为null ,undefined时不显示\n            value = getTooltipValue(originData, valueScale);\n            name = getTooltipName(originData, geometry);\n            addItem(name, value);\n        }\n    }\n    return items;\n}\n//# sourceMappingURL=tooltip.js.map","var LOAD_COMPONENT_CONTROLLERS = {};\n/**\n * 全局注册组件。\n * @param name 组件名称\n * @param plugin 注册的组件类\n * @returns void\n */\nexport function registerComponentController(name, plugin) {\n    LOAD_COMPONENT_CONTROLLERS[name] = plugin;\n}\n/**\n * 删除全局组件。\n * @param name 组件名\n * @returns void\n */\nexport function unregisterComponentController(name) {\n    delete LOAD_COMPONENT_CONTROLLERS[name];\n}\n/**\n * 获取以注册的组件名。\n * @returns string[] 返回已注册的组件名称\n */\nexport function getComponentControllerNames() {\n    return Object.keys(LOAD_COMPONENT_CONTROLLERS);\n}\n/**\n * 根据组件名获取组件类。\n * @param name 组件名\n * @returns 返回组件类\n */\nexport function getComponentController(name) {\n    return LOAD_COMPONENT_CONTROLLERS[name];\n}\n//# sourceMappingURL=index.js.map","import { __assign } from \"tslib\";\nimport { each, isNil, some } from '@antv/util';\nimport { getCoordinate } from '../../dependents';\n/**\n * coordinate controller，职责：\n * 1. 创建实例\n * 2. 暂存配置\n */\nvar CoordinateController = /** @class */ (function () {\n    function CoordinateController(option) {\n        // 设置默认值，并存储配置\n        this.option = this.wrapperOption(option);\n    }\n    /**\n     * 更新配置\n     * @param option\n     */\n    CoordinateController.prototype.update = function (option) {\n        this.option = this.wrapperOption(option);\n        return this;\n    };\n    /**\n     * 是否存在某一个 action\n     * @param actionName\n     */\n    CoordinateController.prototype.hasAction = function (actionName) {\n        var actions = this.option.actions;\n        return some(actions, function (action) { return action[0] === actionName; });\n    };\n    /**\n     * 创建坐标系对象\n     * @param start 起始位置\n     * @param end   结束位置\n     * @return 坐标系实例\n     */\n    CoordinateController.prototype.create = function (start, end) {\n        var _a = this.option, type = _a.type, cfg = _a.cfg;\n        var isTheta = type === 'theta';\n        // 1. 起始位置\n        var props = __assign({ start: start,\n            end: end }, cfg);\n        // 2. 创建实例\n        var C = getCoordinate(isTheta ? 'polar' : type);\n        this.coordinate = new C(props);\n        // @ts-ignore FIXME coordinate 包问题导致 type 不正确\n        this.coordinate.type = type;\n        // 3. 添加默认 action\n        if (isTheta) {\n            // 不存在 transpose，为其自动设置一个 action\n            if (!this.hasAction('transpose')) {\n                this.transpose();\n            }\n        }\n        // 4. 执行 action\n        this.execActions();\n        return this.coordinate;\n    };\n    /**\n     * 更新坐标系对象\n     * @param start 起始位置\n     * @param end   结束位置\n     * @return 坐标系实例\n     */\n    CoordinateController.prototype.adjust = function (start, end) {\n        this.coordinate.update({\n            start: start,\n            end: end,\n        });\n        // 更新坐标系大小的时候，需要：\n        // 1. 重置 matrix\n        // 2. 重新执行作用于 matrix 的 action\n        this.coordinate.resetMatrix();\n        this.execActions(['scale', 'rotate', 'translate']);\n        return this.coordinate;\n    };\n    /**\n     * 旋转弧度\n     * @param angle\n     */\n    CoordinateController.prototype.rotate = function (angle) {\n        this.option.actions.push(['rotate', angle]);\n        return this;\n    };\n    /**\n     * 镜像\n     * @param dim\n     */\n    CoordinateController.prototype.reflect = function (dim) {\n        this.option.actions.push(['reflect', dim]);\n        return this;\n    };\n    /**\n     * scale\n     * @param sx\n     * @param sy\n     */\n    CoordinateController.prototype.scale = function (sx, sy) {\n        this.option.actions.push(['scale', sx, sy]);\n        return this;\n    };\n    /**\n     * 对角变换\n     */\n    CoordinateController.prototype.transpose = function () {\n        this.option.actions.push(['transpose']);\n        return this;\n    };\n    /**\n     * 获取配置\n     */\n    CoordinateController.prototype.getOption = function () {\n        return this.option;\n    };\n    /**\n     * 获得 coordinate 实例\n     */\n    CoordinateController.prototype.getCoordinate = function () {\n        return this.coordinate;\n    };\n    /**\n     * 包装配置的默认值\n     * @param option\n     */\n    CoordinateController.prototype.wrapperOption = function (option) {\n        return __assign({ type: 'rect', actions: [], cfg: {} }, option);\n    };\n    /**\n     * coordinate 实例执行 actions\n     * @params includeActions 如果没有指定，则执行全部，否则，执行指定的 action\n     */\n    CoordinateController.prototype.execActions = function (includeActions) {\n        var _this = this;\n        var actions = this.option.actions;\n        each(actions, function (action) {\n            var _a;\n            var actionName = action[0], args = action.slice(1);\n            var shouldExec = isNil(includeActions) ? true : includeActions.includes(actionName);\n            if (shouldExec) {\n                (_a = _this.coordinate)[actionName].apply(_a, args);\n            }\n        });\n    };\n    return CoordinateController;\n}());\nexport default CoordinateController;\n//# sourceMappingURL=coordinate.js.map","/**\n * @todo Whether it can(or necessary to) keep consistent with the structure of G.Event or directly use the structure of G.Event\n * G2 事件的事件包装类，基于 G.Event\n */\nvar Event = /** @class */ (function () {\n    function Event(view, gEvent, data) {\n        this.view = view;\n        this.gEvent = gEvent;\n        this.data = data;\n        this.type = gEvent.type;\n    }\n    Object.defineProperty(Event.prototype, \"target\", {\n        // below props are proxy props of G.event convenient\n        /** the real trigger shape of the event */\n        get: function () {\n            // @todo G 中事件定义为 object 不正确，这里先 ignore\n            // @ts-ignore\n            return this.gEvent.target;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Event.prototype, \"event\", {\n        /** 获取对应的 dom 原生时间 */\n        get: function () {\n            return this.gEvent.originalEvent;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Event.prototype, \"x\", {\n        /** x 画布坐标 */\n        get: function () {\n            return this.gEvent.x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Event.prototype, \"y\", {\n        /** y 画布坐标 */\n        get: function () {\n            return this.gEvent.y;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Event.prototype, \"clientX\", {\n        /** x 窗口坐标 */\n        get: function () {\n            return this.gEvent.clientX;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Event.prototype, \"clientY\", {\n        /** y 窗口坐标 */\n        get: function () {\n            return this.gEvent.clientY;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // end for proxy events\n    /**\n     * event string\n     * @returns string\n     */\n    Event.prototype.toString = function () {\n        return \"[Event (type=\" + this.type + \")]\";\n    };\n    /**\n     * clone a new event with same attributes\n     * @returns [[Event]]\n     */\n    Event.prototype.clone = function () {\n        return new Event(this.view, this.gEvent, this.data);\n    };\n    return Event;\n}());\nexport default Event;\n//# sourceMappingURL=event.js.map","import { DIRECTION } from '../../constant';\n/** @ignore */\nvar PaddingCal = /** @class */ (function () {\n    /**\n     * 初始的 padding 数据\n     * @param top\n     * @param right\n     * @param bottom\n     * @param left\n     */\n    function PaddingCal(top, right, bottom, left) {\n        if (top === void 0) { top = 0; }\n        if (right === void 0) { right = 0; }\n        if (bottom === void 0) { bottom = 0; }\n        if (left === void 0) { left = 0; }\n        this.top = top;\n        this.right = right;\n        this.bottom = bottom;\n        this.left = left;\n    }\n    /**\n     * 四周增加 padding\n     * @param padding\n     */\n    PaddingCal.prototype.shrink = function (padding) {\n        var top = padding[0], right = padding[1], bottom = padding[2], left = padding[3];\n        this.top += top;\n        this.right += right;\n        this.bottom += bottom;\n        this.left += left;\n        return this;\n    };\n    /**\n     * 在某一个方向增加 padding\n     * @param bbox\n     * @param direction\n     */\n    PaddingCal.prototype.inc = function (bbox, direction) {\n        var width = bbox.width, height = bbox.height;\n        switch (direction) {\n            case DIRECTION.TOP:\n            case DIRECTION.TOP_LEFT:\n            case DIRECTION.TOP_RIGHT:\n                this.top += height;\n                break;\n            case DIRECTION.RIGHT:\n            case DIRECTION.RIGHT_TOP:\n            case DIRECTION.RIGHT_BOTTOM:\n                this.right += width;\n                break;\n            case DIRECTION.BOTTOM:\n            case DIRECTION.BOTTOM_LEFT:\n            case DIRECTION.BOTTOM_RIGHT:\n                this.bottom += height;\n                break;\n            case DIRECTION.LEFT:\n            case DIRECTION.LEFT_TOP:\n            case DIRECTION.LEFT_BOTTOM:\n                this.left += width;\n                break;\n            default:\n                break;\n        }\n        return this;\n    };\n    /**\n     * 获得最终的 padding\n     */\n    PaddingCal.prototype.getPadding = function () {\n        return [this.top, this.right, this.bottom, this.left];\n    };\n    return PaddingCal;\n}());\nexport { PaddingCal };\n//# sourceMappingURL=padding-cal.js.map","import { each } from '@antv/util';\nimport { COMPONENT_TYPE } from '../../constant';\nimport { BBox } from '../../util/bbox';\nimport { isAutoPadding, parsePadding } from '../../util/padding';\nimport { PaddingCal } from './padding-cal';\n/**\n * @ignore\n * 根据 view 中的组件，计算实际的 padding 数值\n * @param view\n */\nexport function calculatePadding(view) {\n    var padding = view.padding;\n    // 如果不是 auto padding，那么直接解析之后返回\n    if (!isAutoPadding(padding)) {\n        return parsePadding(padding);\n    }\n    // 是 auto padding，根据组件的情况，来计算 padding\n    var viewBBox = view.viewBBox;\n    var paddingCal = new PaddingCal();\n    each(view.getComponents(), function (co) {\n        var component = co.component, type = co.type;\n        // grid, tooltip 不参入 padding 布局\n        if (type === COMPONENT_TYPE.GRID || type === COMPONENT_TYPE.TOOLTIP) {\n            return;\n        }\n        var bboxObject = component.getLayoutBBox();\n        var componentBBox = new BBox(bboxObject.x, bboxObject.y, bboxObject.width, bboxObject.height);\n        if (type === COMPONENT_TYPE.AXIS) {\n            var exceed = componentBBox.exceed(viewBBox);\n            paddingCal.shrink(exceed);\n        }\n        else {\n            // 按照方向计算 padding\n            var direction = co.direction;\n            // const direction =\n            //   type === COMPONENT_TYPE.AXIS ? getTranslateDirection(co.direction, view.getCoordinate()) : co.direction;\n            paddingCal.inc(componentBBox, direction);\n        }\n    });\n    // 返回最终的 padding\n    return paddingCal.getPadding();\n}\n//# sourceMappingURL=auto.js.map","import { calculatePadding } from './auto';\n/**\n * @ignore\n * G2 默认提供的 layout 函数\n * 内置布局函数处理的逻辑：\n *\n * 1. 如果 padding = 'auto'，那么自动根据组件的 direction 来计算 padding 数组\n * 2. 根据 padding 和 direction 去分配对应方向的 padding 数值\n * 3. 移动组件位置\n *\n * 对于组件响应式布局，可以尝试使用约束布局的方式去求解位置信息。\n * @param view\n */\nexport default function defaultLayout(view) {\n    var axis = view.getController('axis');\n    var legend = view.getController('legend');\n    var annotation = view.getController('annotation');\n    var slider = view.getController('slider');\n    // 1. 自动加 auto padding -> absolute padding\n    var padding = calculatePadding(view);\n    // 2. 计算出新的 coordinateBBox\n    var newCoordinateBBox = view.viewBBox.shrink(padding);\n    // 3. 如果 coordinateBBox 前后未发生变化则不需要进行组件的重布局\n    if (view.coordinateBBox.isEqual(newCoordinateBBox)) {\n        if (annotation) {\n            // 因为 Annotation 不参与布局，但是渲染的位置依赖于坐标系，所以可以将绘制阶段延迟到 layout() 进行\n            annotation.layout();\n        }\n        return;\n    }\n    view.coordinateBBox = newCoordinateBBox;\n    view.adjustCoordinate();\n    // 3. 根据最新的 coordinate 重新布局组件\n    [axis, slider, legend, annotation].forEach(function (controller) {\n        if (controller) {\n            controller.layout();\n        }\n    });\n}\n//# sourceMappingURL=index.js.map","/**\n * view 中缓存 scale 的类\n */\nimport { deepMix, each, get, isNumber, last } from '@antv/util';\nimport { createScaleByField, syncScale } from '../../util/scale';\n/** @ignore */\nvar ScalePool = /** @class */ (function () {\n    function ScalePool() {\n        /** 所有的 scales */\n        this.scales = new Map();\n        /** 需要同步的 scale 分组， key: scaleKeyArray */\n        this.syncScales = new Map();\n    }\n    /**\n     * 创建 scale\n     * @param field\n     * @param data\n     * @param scaleDef\n     * @param key\n     */\n    ScalePool.prototype.createScale = function (field, data, scaleDef, key) {\n        var finalScaleDef = scaleDef;\n        var cacheScaleMeta = this.getScaleMeta(key);\n        if (data.length === 0 && cacheScaleMeta) {\n            // 在更新过程中数据变为空，同时 key 对应的 scale 已存在则保持 scale 同类型\n            var cacheScale = cacheScaleMeta.scale;\n            var cacheScaleDef = {\n                type: cacheScale.type,\n            };\n            if (cacheScale.isCategory) {\n                // 如果是分类类型，保持 values\n                cacheScaleDef.values = cacheScale.values;\n            }\n            finalScaleDef = deepMix(cacheScaleDef, cacheScaleMeta.scaleDef, scaleDef);\n        }\n        var scale = createScaleByField(field, data, finalScaleDef);\n        // 缓存起来\n        this.cacheScale(scale, scaleDef, key);\n        return scale;\n    };\n    /**\n     * 同步 scale\n     */\n    ScalePool.prototype.sync = function () {\n        var _this = this;\n        // 对于 syncScales 中每一个 syncKey 下面的 scale 数组进行同步处理\n        this.syncScales.forEach(function (scaleKeys, syncKey) {\n            // min, max, values\n            var min = Number.MAX_SAFE_INTEGER;\n            var max = Number.MIN_SAFE_INTEGER;\n            var values = [];\n            // 1. 遍历求得最大最小值，values 等\n            each(scaleKeys, function (key) {\n                var scale = _this.getScale(key);\n                max = isNumber(scale.max) ? Math.max(max, scale.max) : max;\n                min = isNumber(scale.min) ? Math.min(min, scale.min) : min;\n                // 去重\n                each(scale.values, function (v) {\n                    if (!values.includes(v)) {\n                        values.push(v);\n                    }\n                });\n            });\n            // 2. 同步\n            each(scaleKeys, function (key) {\n                var scale = _this.getScale(key);\n                if (scale.isContinuous) {\n                    scale.change({\n                        min: min,\n                        max: max,\n                        values: values,\n                    });\n                }\n                else if (scale.isCategory) {\n                    scale.change({\n                        values: values,\n                    });\n                }\n            });\n        });\n    };\n    /**\n     * 缓存一个 scale\n     * @param scale\n     * @param scaleDef\n     * @param key\n     */\n    ScalePool.prototype.cacheScale = function (scale, scaleDef, key) {\n        // 1. 缓存到 scales\n        var sm = this.getScaleMeta(key);\n        // 存在则更新，同时检测类型是否一致\n        if (sm && sm.scale.type === scale.type) {\n            syncScale(sm.scale, scale);\n            sm.scaleDef = scaleDef;\n            // 更新 scaleDef\n        }\n        else {\n            sm = {\n                key: key,\n                scale: scale,\n                scaleDef: scaleDef,\n            };\n            this.scales.set(key, sm);\n        }\n        // 2. 缓存到 syncScales，构造 Record<sync, string[]> 数据结构\n        var syncKey = this.getSyncKey(sm);\n        sm.syncKey = syncKey; // 设置 sync 同步的 key\n        // 因为存在更新 scale 机制，所以在缓存之前，先从原 syncScales 中去除 sync 的缓存引用\n        this.removeFromSyncScales(key);\n        // 存在 sync 标记才进行 sync\n        if (syncKey) {\n            // 不存在这个 syncKey，则创建一个空数组\n            var scaleKeys = this.syncScales.get(syncKey);\n            if (!scaleKeys) {\n                scaleKeys = [];\n                this.syncScales.set(syncKey, scaleKeys);\n            }\n            scaleKeys.push(key);\n        }\n    };\n    /**\n     * 通过 key 获取 scale\n     * @param key\n     */\n    ScalePool.prototype.getScale = function (key) {\n        var scaleMeta = this.getScaleMeta(key);\n        if (!scaleMeta) {\n            var field = last(key.split('-'));\n            var scaleKeys = this.syncScales.get(field);\n            if (scaleKeys && scaleKeys.length) {\n                scaleMeta = this.getScaleMeta(scaleKeys[0]);\n            }\n        }\n        return scaleMeta && scaleMeta.scale;\n    };\n    /**\n     * 在 view 销毁的时候，删除 scale 实例，防止内存泄露\n     * @param key\n     */\n    ScalePool.prototype.deleteScale = function (key) {\n        var scaleMeta = this.getScaleMeta(key);\n        if (scaleMeta) {\n            var syncKey = scaleMeta.syncKey;\n            var scaleKeys = this.syncScales.get(syncKey);\n            // 移除同步的关系\n            if (scaleKeys && scaleKeys.length) {\n                var idx = scaleKeys.indexOf(key);\n                if (idx !== -1) {\n                    scaleKeys.splice(idx, 1);\n                }\n            }\n        }\n        // 删除 scale 实例\n        this.scales.delete(key);\n    };\n    /**\n     * 清空\n     */\n    ScalePool.prototype.clear = function () {\n        this.scales.clear();\n        this.syncScales.clear();\n    };\n    /**\n     * 删除 sync scale 引用\n     * @param key\n     */\n    ScalePool.prototype.removeFromSyncScales = function (key) {\n        var _this = this;\n        this.syncScales.forEach(function (scaleKeys, syncKey) {\n            var idx = scaleKeys.indexOf(key);\n            if (idx !== -1) {\n                scaleKeys.splice(idx, 1);\n                // 删除空数组值\n                if (scaleKeys.length === 0) {\n                    _this.syncScales.delete(syncKey);\n                }\n                return false; // 跳出循环\n            }\n        });\n    };\n    /**\n     * get sync key\n     * @param sm\n     */\n    ScalePool.prototype.getSyncKey = function (sm) {\n        var scale = sm.scale, scaleDef = sm.scaleDef;\n        var field = scale.field;\n        var sync = get(scaleDef, ['sync']);\n        // 如果 sync = true，则直接使用字段名作为 syncKey\n        return sync === true ? field : sync === false ? undefined : sync;\n    };\n    /**\n     * 通过 key 获取 scale\n     * @param key\n     */\n    ScalePool.prototype.getScaleMeta = function (key) {\n        return this.scales.get(key);\n    };\n    return ScalePool;\n}());\nexport { ScalePool };\n//# sourceMappingURL=scale-pool.js.map","import { __assign, __extends, __spreadArrays } from \"tslib\";\nimport { clone, deepMix, each, filter, find, flatten, get, isBoolean, isFunction, isNil, isObject, isString, isUndefined, mix, remove, set, size, uniqueId, } from '@antv/util';\nimport { GROUP_Z_INDEX, LAYER, PLOT_EVENTS, VIEW_LIFE_CIRCLE } from '../constant';\nimport Base from '../base';\nimport { getFacet } from '../facet';\nimport { createInteraction } from '../interaction';\nimport { getTheme } from '../theme';\nimport { BBox } from '../util/bbox';\nimport { getCoordinateClipCfg, isFullCircle, isPointInCoordinate } from '../util/coordinate';\nimport { uniq } from '../util/helper';\nimport { findDataByPoint } from '../util/tooltip';\nimport { getComponentController, getComponentControllerNames } from './controller';\nimport CoordinateController from './controller/coordinate';\nimport Event from './event';\nimport defaultLayout from './layout';\nimport { ScalePool } from './util/scale-pool';\n/**\n * G2 视图 View 类\n */\nvar View = /** @class */ (function (_super) {\n    __extends(View, _super);\n    function View(props) {\n        var _this = _super.call(this, { visible: props.visible }) || this;\n        /** view id，全局唯一。 */\n        _this.id = uniqueId('view');\n        /** 所有的子 view。 */\n        _this.views = [];\n        /** 所有的 geometry 实例。 */\n        _this.geometries = [];\n        /** 所有的组件 controllers。 */\n        _this.controllers = [];\n        /** 所有的 Interaction 实例。 */\n        _this.interactions = {};\n        /** 是否对超出坐标系范围的 Geometry 进行剪切 */\n        _this.limitInPlot = false;\n        // 配置信息存储\n        _this.options = {\n            data: [],\n            animate: true,\n        }; // 初始化为空\n        /** 配置开启的组件插件，默认为全局配置的组件。 */\n        _this.usedControllers = getComponentControllerNames();\n        /** 所有的 scales */\n        _this.scalePool = new ScalePool();\n        /** 布局函数 */\n        _this.layoutFunc = defaultLayout;\n        /** 当前鼠标是否在 plot 内（CoordinateBBox） */\n        _this.isPreMouseInPlot = false;\n        /** 默认标识位，用于判定数据是否更新 */\n        _this.isDataChanged = false;\n        /** 从当前这个 view 创建的 scale key */\n        _this.createdScaleKeys = new Map();\n        _this.onCanvasEvent = function (evt) {\n            var name = evt.name;\n            if (!name.includes(':')) { // 非委托事件\n                var e = _this.createViewEvent(evt);\n                // 处理 plot 事件\n                _this.doPlotEvent(e);\n                _this.emit(name, e);\n            }\n        };\n        /**\n         * 触发事件之后\n         * @param evt\n         */\n        _this.onDelegateEvents = function (evt) {\n            // 阻止继续冒泡，防止重复事件触发\n            // evt.preventDefault();\n            var name = evt.name;\n            if (!name.includes(':')) {\n                return;\n            }\n            // 事件在 view 嵌套中冒泡（暂不提供阻止冒泡的机制）\n            var e = _this.createViewEvent(evt);\n            // 包含有基本事件、组合事件\n            _this.emit(name, e);\n            // const currentTarget = evt.currentTarget as IShape;\n            // const inheritNames = currentTarget.get('inheritNames');\n            // if (evt.delegateObject || inheritNames) {\n            //   const events = this.getEvents();\n            //   each(inheritNames, (subName) => {\n            //     const eventName = `${subName}:${type}`;\n            //     if (events[eventName]) {\n            //       this.emit(eventName, e);\n            //     }\n            //   });\n            // }\n        };\n        var parent = props.parent, canvas = props.canvas, backgroundGroup = props.backgroundGroup, middleGroup = props.middleGroup, foregroundGroup = props.foregroundGroup, _a = props.region, region = _a === void 0 ? { start: { x: 0, y: 0 }, end: { x: 1, y: 1 } } : _a, padding = props.padding, theme = props.theme, options = props.options, limitInPlot = props.limitInPlot;\n        _this.parent = parent;\n        _this.canvas = canvas;\n        _this.backgroundGroup = backgroundGroup;\n        _this.middleGroup = middleGroup;\n        _this.foregroundGroup = foregroundGroup;\n        _this.region = region;\n        _this.padding = padding;\n        // 接受父 view 传入的参数\n        _this.options = __assign(__assign({}, _this.options), options);\n        _this.limitInPlot = limitInPlot;\n        // 初始化 theme\n        _this.themeObject = isObject(theme) ? deepMix({}, getTheme('default'), theme) : getTheme(theme);\n        _this.init();\n        return _this;\n    }\n    /**\n     * 设置 layout 布局函数\n     * @param layout 布局函数\n     * @returns void\n     */\n    View.prototype.setLayout = function (layout) {\n        this.layoutFunc = layout;\n    };\n    /**\n     * 生命周期：初始化\n     * @returns voids\n     */\n    View.prototype.init = function () {\n        // 计算画布的 viewBBox\n        this.calculateViewBBox();\n        // 事件委托机制\n        this.initEvents();\n        // 初始化组件 controller\n        this.initComponentController();\n        // 创建 coordinate controller\n        this.coordinateController = new CoordinateController(this.options.coordinate);\n        this.initOptions();\n        // 递归初始化子 view\n        var views = this.views;\n        for (var i = 0; i < views.length; i++) {\n            views[i].init();\n        }\n    };\n    /**\n     * 生命周期：渲染流程，渲染过程需要处理数据更新的情况。\n     * render 函数仅仅会处理 view 和子 view。\n     * @param isUpdate 是否触发更新流程。\n     */\n    View.prototype.render = function (isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n        this.emit(VIEW_LIFE_CIRCLE.BEFORE_RENDER);\n        // 递归渲染\n        this.paint(isUpdate);\n        this.emit(VIEW_LIFE_CIRCLE.AFTER_RENDER);\n        if (this.visible === false) {\n            // 用户在初始化的时候声明 visible: false\n            this.changeVisible(false);\n        }\n    };\n    /**\n     * 生命周期：清空图表上所有的绘制内容，但是不销毁图表，chart 仍可使用。\n     * @returns void\n     */\n    View.prototype.clear = function () {\n        var _this = this;\n        this.emit(VIEW_LIFE_CIRCLE.BEFORE_CLEAR);\n        // 1. 清空缓存和计算数据\n        this.filteredData = [];\n        this.coordinateInstance = undefined;\n        this.isDataChanged = false; // 复位\n        // 2. 清空 geometries\n        var geometries = this.geometries;\n        for (var i = 0; i < geometries.length; i++) {\n            geometries[i].clear();\n        }\n        this.geometries = [];\n        // 3. 清空 controllers\n        var controllers = this.controllers;\n        for (var i = 0; i < controllers.length; i++) {\n            controllers[i].clear();\n        }\n        // 4. 删除 scale 缓存\n        this.createdScaleKeys.forEach(function (v, k) {\n            _this.getRootView().scalePool.deleteScale(k);\n        });\n        this.createdScaleKeys.clear();\n        // 递归处理子 view\n        var views = this.views;\n        for (var i = 0; i < views.length; i++) {\n            views[i].clear();\n        }\n        this.emit(VIEW_LIFE_CIRCLE.AFTER_CLEAR);\n    };\n    /**\n     * 生命周期：销毁，完全无法使用。\n     * @returns void\n     */\n    View.prototype.destroy = function () {\n        // 销毁前事件，销毁之后已经没有意义了，所以不抛出事件\n        this.emit(VIEW_LIFE_CIRCLE.BEFORE_DESTROY);\n        var interactions = this.interactions;\n        // 销毁 interactions\n        each(interactions, function (interaction) {\n            if (interaction) {\n                // 有可能已经销毁，设置了 undefined\n                interaction.destroy();\n            }\n        });\n        this.clear();\n        // 销毁 controller 中的组件\n        var controllers = this.controllers;\n        for (var i = 0, len = controllers.length; i < len; i++) {\n            var controller = controllers[i];\n            controller.destroy();\n        }\n        this.backgroundGroup.remove(true);\n        this.middleGroup.remove(true);\n        this.foregroundGroup.remove(true);\n        _super.prototype.destroy.call(this);\n    };\n    /* end 生命周期函数 */\n    /**\n     * 显示或者隐藏整个 view。\n     * @param visible 是否可见\n     * @returns View\n     */\n    View.prototype.changeVisible = function (visible) {\n        _super.prototype.changeVisible.call(this, visible);\n        var geometries = this.geometries;\n        for (var i = 0, len = geometries.length; i < len; i++) {\n            var geometry = geometries[i];\n            geometry.changeVisible(visible);\n        }\n        var controllers = this.controllers;\n        for (var i = 0, len = controllers.length; i < len; i++) {\n            var controller = controllers[i];\n            controller.changeVisible(visible);\n        }\n        this.foregroundGroup.set('visible', visible);\n        this.middleGroup.set('visible', visible);\n        this.backgroundGroup.set('visible', visible);\n        // group.set('visible', visible) 不会触发自动刷新\n        this.getCanvas().draw();\n        return this;\n    };\n    /**\n     * 装载数据源。\n     *\n     * ```ts\n     * view.data([{ city: '杭州', sale: 100 }, { city: '上海', sale: 110 } ]);\n     * ```\n     *\n     * @param data 数据源，json 数组。\n     * @returns View\n     */\n    View.prototype.data = function (data) {\n        set(this.options, 'data', data);\n        this.isDataChanged = true;\n        return this;\n    };\n    /**\n     * @deprecated\n     * This method will be removed at G2 V4.1. Replaced by {@link #data(data)}\n     */\n    View.prototype.source = function (data) {\n        console.warn('This method will be removed at G2 V4.1. Please use chart.data() instead.');\n        return this.data(data);\n    };\n    /**\n     * 设置数据筛选规则。\n     *\n     * ```ts\n     * view.filter('city', (value: any, datum: Datum) => value !== '杭州');\n     *\n     * // 删除 'city' 字段对应的筛选规则。\n     * view.filter('city', null);\n     * ```\n     *\n     * @param field 数据字段\n     * @param condition 筛选规则\n     * @returns View\n     */\n    View.prototype.filter = function (field, condition) {\n        if (isFunction(condition)) {\n            set(this.options, ['filters', field], condition);\n            return this;\n        }\n        // condition 为空，则表示删除过滤条件\n        if (!condition && get(this.options, ['filters', field])) {\n            delete this.options.filters[field];\n        }\n        return this;\n    };\n    View.prototype.axis = function (field, axisOption) {\n        if (isBoolean(field)) {\n            set(this.options, ['axes'], field);\n        }\n        else {\n            set(this.options, ['axes', field], axisOption);\n        }\n        return this;\n    };\n    View.prototype.legend = function (field, legendOption) {\n        if (isBoolean(field)) {\n            set(this.options, ['legends'], field);\n        }\n        else if (isString(field)) {\n            set(this.options, ['legends', field], legendOption);\n        }\n        else {\n            // 设置全局的 legend 配置\n            set(this.options, ['legends'], field);\n        }\n        return this;\n    };\n    View.prototype.scale = function (field, scaleOption) {\n        var _this = this;\n        if (isString(field)) {\n            set(this.options, ['scales', field], scaleOption);\n        }\n        else if (isObject(field)) {\n            each(field, function (v, k) {\n                set(_this.options, ['scales', k], v);\n            });\n        }\n        return this;\n    };\n    /**\n     * tooltip 提示信息配置。\n     *\n     * ```ts\n     * view.tooltip(false); // 关闭 tooltip\n     *\n     * view.tooltip({\n     *   shared: true\n     * });\n     * ```\n     *\n     * @param cfg Tooltip 配置\n     * @returns View\n     */\n    View.prototype.tooltip = function (cfg) {\n        set(this.options, 'tooltip', cfg);\n        return this;\n    };\n    /**\n     * 辅助标记配置。\n     *\n     * ```ts\n     * view.annotation().line({\n     *   start: ['min', 85],\n     *   end: ['max', 85],\n     *   style: {\n     *     stroke: '#595959',\n     *     lineWidth: 1,\n     *     lineDash: [3, 3],\n     *   },\n     * });\n     * ```\n     *\n     * @returns [[Annotation]]\n     */\n    View.prototype.annotation = function () {\n        return this.getController('annotation');\n    };\n    /**\n     * @deprecated\n     * This method will be removed at G2 V4.1. Replaced by {@link #guide()}\n     */\n    View.prototype.guide = function () {\n        console.warn('This method will be removed at G2 V4.1. Please use chart.annotation() instead.');\n        return this.annotation();\n    };\n    View.prototype.coordinate = function (type, coordinateCfg) {\n        // 提供语法糖，使用更简单\n        if (isString(type)) {\n            set(this.options, 'coordinate', { type: type, cfg: coordinateCfg });\n        }\n        else {\n            set(this.options, 'coordinate', type);\n        }\n        // 更新 coordinate 配置\n        this.coordinateController.update(this.options.coordinate);\n        return this.coordinateController;\n    };\n    /**\n     * @deprecated\n     * This method will be removed at G2 V4.1. Replaced by {@link #coordinate()}\n     */\n    View.prototype.coord = function (type, coordinateCfg) {\n        console.warn('This method will be removed at G2 V4.1. Please use chart.coordinate() instead.');\n        // @ts-ignore\n        return this.coordinate(type, coordinateCfg);\n    };\n    /**\n     * view 分面绘制。\n     *\n     * ```ts\n     * view.facet('rect', {\n     *   rowField: 'province',\n     *   columnField: 'category',\n     *   eachView: (innerView: View, facet?: FacetData) => {\n     *     innerView.line().position('city*sale');\n     *   },\n     * });\n     * ```\n     *\n     * @param type 分面类型\n     * @param cfg 分面配置， [[FacetCfgMap]]\n     * @returns View\n     */\n    View.prototype.facet = function (type, cfg) {\n        // 先销毁掉之前的分面\n        if (this.facetInstance) {\n            this.facetInstance.destroy();\n        }\n        // 创建新的分面\n        var Ctor = getFacet(type);\n        if (!Ctor) {\n            throw new Error(\"facet '\" + type + \"' is not exist!\");\n        }\n        this.facetInstance = new Ctor(this, __assign(__assign({}, cfg), { type: type }));\n        return this;\n    };\n    /*\n     * 开启或者关闭动画。\n     *\n     * ```ts\n     * view.animate(false);\n     * ```\n     *\n     * @param status 动画状态，true 表示开始，false 表示关闭\n     * @returns View\n     */\n    View.prototype.animate = function (status) {\n        set(this.options, 'animate', status);\n        return this;\n    };\n    /**\n     * 更新配置项，用于配置项式声明。\n     * @param options 配置项\n     */\n    View.prototype.updateOptions = function (options) {\n        this.clear(); // 清空\n        mix(this.options, options);\n        this.initOptions();\n        return this;\n    };\n    /**\n     * 往 `view.options` 属性中存储配置项。\n     * @param name 属性名称\n     * @param opt 属性值\n     * @returns view\n     */\n    View.prototype.option = function (name, opt) {\n        // 对于内置的 option，避免覆盖。\n        // name 在原型上，说明可能是内置 API，存在 option 被覆盖的风险，不处理\n        if (View.prototype[name]) {\n            throw new Error(\"Can't use built in variable name \\\"\" + name + \"\\\", please change another one.\");\n        }\n        // 存入到 option 中\n        set(this.options, name, opt);\n        return this;\n    };\n    /**\n     * 设置主题。\n     *\n     * ```ts\n     * view.theme('dark'); // 'dark' 需要事先通过 `registerTheme()` 接口注册完成\n     *\n     * view.theme({ defaultColor: 'red' });\n     * ```\n     *\n     * @param theme 主题名或者主题配置\n     * @returns View\n     */\n    View.prototype.theme = function (theme) {\n        this.themeObject = isObject(theme) ? deepMix({}, this.themeObject, theme) : getTheme(theme);\n        return this;\n    };\n    /* end 一系列传入配置的 API */\n    /**\n     * Call the interaction based on the interaction name\n     *\n     * ```ts\n     * view.interaction('my-interaction', { extra: 'hello world' });\n     * ```\n     *\n     * @param name interaction name\n     * @param cfg interaction config\n     * @returns\n     */\n    View.prototype.interaction = function (name, cfg) {\n        var existInteraction = this.interactions[name];\n        // 存在则先销毁已有的\n        if (existInteraction) {\n            existInteraction.destroy();\n        }\n        // 新建交互实例\n        var interaction = createInteraction(name, this, cfg);\n        if (interaction) {\n            interaction.init();\n            this.interactions[name] = interaction;\n        }\n        return this;\n    };\n    /**\n     * 移除当前 View 的 interaction\n     * ```ts\n     * view.removeInteraction('my-interaction');\n     * ```\n     * @param name interaction name\n     */\n    View.prototype.removeInteraction = function (name) {\n        var existInteraction = this.interactions[name];\n        // 存在则先销毁已有的\n        if (existInteraction) {\n            existInteraction.destroy();\n            this.interactions[name] = undefined;\n        }\n    };\n    /**\n     * 修改数据，数据更新逻辑，数据更新仅仅影响当前这一层的 view\n     *\n     * ```ts\n     * view.changeData([{ city: '北京', sale: '200' }]);\n     * ```\n     *\n     * @param data\n     * @returns void\n     */\n    View.prototype.changeData = function (data) {\n        this.isDataChanged = true;\n        this.emit(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA);\n        // 1. 保存数据\n        this.data(data);\n        // 2. 渲染\n        this.paint(true);\n        // 3. 遍历子 view 进行 change data\n        var views = this.views;\n        for (var i = 0, len = views.length; i < len; i++) {\n            var view = views[i];\n            // FIXME 子 view 有自己的数据的情况，该如何处理？\n            view.changeData(data);\n        }\n        this.emit(VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA);\n    };\n    /* View 管理相关的 API */\n    /**\n     * 创建子 view\n     *\n     * ```ts\n     * const innerView = view.createView({\n     *   start: { x: 0, y: 0 },\n     *   end: { x: 0.5, y: 0.5 },\n     *   padding: 8,\n     * });\n     * ```\n     *\n     * @param cfg\n     * @returns View\n     */\n    View.prototype.createView = function (cfg) {\n        // 子 view 共享 options 配置数据\n        var sharedOptions = {\n            data: this.options.data,\n            scales: clone(this.options.scales),\n            axes: clone(this.options.axes),\n            coordinate: clone(this.coordinateController.getOption()),\n            tooltip: clone(this.options.tooltip),\n            legends: clone(this.options.legends),\n            animate: this.options.animate,\n            visible: this.visible,\n        };\n        var v = new View(__assign(__assign({ parent: this, canvas: this.canvas, \n            // 子 view 共用三层 group\n            backgroundGroup: this.backgroundGroup.addGroup({ zIndex: GROUP_Z_INDEX.BG }), middleGroup: this.middleGroup.addGroup({ zIndex: GROUP_Z_INDEX.MID }), foregroundGroup: this.foregroundGroup.addGroup({ zIndex: GROUP_Z_INDEX.FORE }), theme: this.themeObject, padding: this.padding }, cfg), { options: __assign(__assign({}, sharedOptions), get(cfg, 'options', {})) }));\n        this.views.push(v);\n        return v;\n    };\n    /**\n     * @deprecated\n     * This method will be removed at G2 V4.1. Replaced by {@link #createView()}\n     */\n    View.prototype.view = function (cfg) {\n        console.warn('This method will be removed at G2 V4.1. Please use chart.createView() instead.');\n        return this.createView(cfg);\n    };\n    /**\n     * 删除一个子 view\n     * @param view\n     * @return removedView\n     */\n    View.prototype.removeView = function (view) {\n        var removedView = remove(this.views, function (v) { return v === view; })[0];\n        if (removedView) {\n            removedView.destroy();\n        }\n        return removedView;\n    };\n    /* end View 管理相关的 API */\n    // 一些 get 方法\n    /**\n     * 获取当前坐标系实例。\n     * @returns [[Coordinate]]\n     */\n    View.prototype.getCoordinate = function () {\n        return this.coordinateInstance;\n    };\n    /**\n     * 获取当前 view 的主题配置。\n     * @returns themeObject\n     */\n    View.prototype.getTheme = function () {\n        return this.themeObject;\n    };\n    /**\n     * 获得 x 轴字段的 scale 实例。\n     * @returns view 中 Geometry 对于的 x scale\n     */\n    View.prototype.getXScale = function () {\n        // 拿第一个 Geometry 的 X scale\n        // 隐藏逻辑：一个 view 中的 Geometry 必须 x 字段一致\n        var g = this.geometries[0];\n        return g ? g.getXScale() : null;\n    };\n    /**\n     * 获取 y 轴字段的 scales 实例。\n     * @returns view 中 Geometry 对于的 y scale 数组\n     */\n    View.prototype.getYScales = function () {\n        // 拿到所有的 Geometry 的 Y scale，然后去重\n        var tmpMap = {};\n        return this.geometries.map(function (g) {\n            var yScale = g.getYScale();\n            var field = yScale.field;\n            if (!tmpMap[field]) {\n                tmpMap[field] = true;\n                return yScale;\n            }\n        });\n    };\n    /**\n     * 获取 x 轴或者 y 轴对应的所有 scale 实例。\n     * @param dimType x | y\n     * @returns x 轴或者 y 轴对应的所有 scale 实例。\n     */\n    View.prototype.getScalesByDim = function (dimType) {\n        var geometries = this.geometries;\n        var scales = {};\n        for (var i = 0, len = geometries.length; i < len; i++) {\n            var geometry = geometries[i];\n            var scale = dimType === 'x' ? geometry.getXScale() : geometry.getYScale();\n            if (scale && !scales[scale.field]) {\n                scales[scale.field] = scale;\n            }\n        }\n        return scales;\n    };\n    /**\n     * 根据字段名去获取 scale 实例。\n     * @param field 数据字段名称\n     * @param key id\n     */\n    View.prototype.getScaleByField = function (field, key) {\n        var defaultKey = key ? key : this.getScaleKey(field);\n        // 调用根节点 view 的方法获取\n        return this.getRootView().scalePool.getScale(defaultKey);\n    };\n    /**\n     * 返回所有配置信息。\n     * @returns 所有的 view API 配置。\n     */\n    View.prototype.getOptions = function () {\n        return this.options;\n    };\n    /**\n     * 获取 view 的数据（过滤后的数据）。\n     * @returns 处理过滤器之后的数据。\n     */\n    View.prototype.getData = function () {\n        return this.filteredData;\n    };\n    /**\n     * 获得绘制的层级 group。\n     * @param layer 层级名称。\n     * @returns 对应层级的 Group。\n     */\n    View.prototype.getLayer = function (layer) {\n        return layer === LAYER.BG\n            ? this.backgroundGroup\n            : layer === LAYER.MID\n                ? this.middleGroup\n                : layer === LAYER.FORE\n                    ? this.foregroundGroup\n                    : this.foregroundGroup;\n    };\n    /**\n     * 对外暴露方法，判断一个点是否在绘图区域（即坐标系范围）内部。\n     * @param point 坐标点\n     */\n    View.prototype.isPointInPlot = function (point) {\n        return isPointInCoordinate(this.getCoordinate(), point);\n    };\n    /**\n     * 获得所有的 legend 对应的 attribute 实例。\n     * @returns 维度字段的 Attribute 数组\n     */\n    View.prototype.getLegendAttributes = function () {\n        return flatten(this.geometries.map(function (g) { return g.getGroupAttributes(); }));\n    };\n    /**\n     * 获取所有的分组字段的 scale 实例。\n     * @returns 获得分组字段的 scale 实例数组。\n     */\n    View.prototype.getGroupScales = function () {\n        // 拿到所有的 Geometry 的 分组字段 scale，然后打平去重\n        var scales = this.geometries.map(function (g) { return g.getGroupScales(); });\n        return uniq(flatten(scales));\n    };\n    /**\n     * 获取 G.Canvas 实例。\n     * @returns G.Canvas 画布实例。\n     */\n    View.prototype.getCanvas = function () {\n        return this.getRootView().canvas;\n    };\n    /**\n     * 获得根节点 view。\n     */\n    View.prototype.getRootView = function () {\n        var v = this;\n        while (true) {\n            if (v.parent) {\n                v = v.parent;\n                continue;\n            }\n            break;\n        }\n        return v;\n    };\n    /**\n     * 获取该数据在可视化后，对应的画布坐标点。\n     * @param data 原始数据记录\n     * @returns 对应的画布坐标点\n     */\n    View.prototype.getXY = function (data) {\n        var coordinate = this.getCoordinate();\n        var xScales = this.getScalesByDim('x');\n        var yScales = this.getScalesByDim('y');\n        var x;\n        var y;\n        each(data, function (value, key) {\n            if (xScales[key]) {\n                x = xScales[key].scale(value);\n            }\n            if (yScales[key]) {\n                y = yScales[key].scale(value);\n            }\n        });\n        if (!isNil(x) && !isNil(y)) {\n            return coordinate.convert({ x: x, y: y });\n        }\n    };\n    /**\n     * 获取 name 对应的 controller 实例\n     * @param name\n     */\n    View.prototype.getController = function (name) {\n        return find(this.controllers, function (c) { return c.name === name; });\n    };\n    /**\n     * 显示 point 坐标点对应的 tooltip。\n     * @param point 画布坐标点\n     * @returns View\n     */\n    View.prototype.showTooltip = function (point) {\n        var tooltip = this.getController('tooltip');\n        if (tooltip) {\n            tooltip.showTooltip(point);\n        }\n        return this;\n    };\n    /**\n     * 隐藏 tooltip。\n     * @returns View\n     */\n    View.prototype.hideTooltip = function () {\n        var tooltip = this.getController('tooltip');\n        if (tooltip) {\n            tooltip.hideTooltip();\n        }\n        return this;\n    };\n    /**\n     * 将 tooltip 锁定到当前位置不能移动。\n     * @returns View\n     */\n    View.prototype.lockTooltip = function () {\n        var tooltip = this.getController('tooltip');\n        if (tooltip) {\n            tooltip.lockTooltip();\n        }\n        return this;\n    };\n    /**\n     * 将 tooltip 锁定解除。\n     * @returns View\n     */\n    View.prototype.unlockTooltip = function () {\n        var tooltip = this.getController('tooltip');\n        if (tooltip) {\n            tooltip.unlockTooltip();\n        }\n        return this;\n    };\n    /**\n     * 是否锁定 tooltip。\n     * @returns 是否锁定\n     */\n    View.prototype.isTooltipLocked = function () {\n        var tooltip = this.getController('tooltip');\n        return tooltip && tooltip.isTooltipLocked();\n    };\n    /**\n     * 获取当前 point 对应的 tooltip 数据项。\n     * @param point 坐标点\n     * @returns tooltip 数据项\n     */\n    View.prototype.getTooltipItems = function (point) {\n        var tooltip = this.getController('tooltip');\n        return tooltip ? tooltip.getTooltipItems(point) : [];\n    };\n    /**\n     * 获取逼近的点的数据集合\n     * @param point 当前坐标点\n     * @returns  数据\n     */\n    View.prototype.getSnapRecords = function (point) {\n        var geometries = this.geometries;\n        var rst = [];\n        for (var i = 0, len = geometries.length; i < len; i++) {\n            var geom = geometries[i];\n            var dataArray = geom.dataArray;\n            geom.sort(dataArray); // 先进行排序，便于 tooltip 查找\n            var record = void 0;\n            for (var j = 0, dataLen = dataArray.length; j < dataLen; j++) {\n                var data = dataArray[j];\n                record = findDataByPoint(point, data, geom);\n                if (record) {\n                    rst.push(record);\n                }\n            }\n        }\n        // 同样递归处理子 views\n        var views = this.views;\n        for (var i = 0, len = views.length; i < len; i++) {\n            var view = views[i];\n            var snapRecords = view.getSnapRecords(point);\n            rst = rst.concat(snapRecords);\n        }\n        return rst;\n    };\n    /**\n     * 获取所有的 pure component 组件，用于布局。\n     */\n    View.prototype.getComponents = function () {\n        var components = [];\n        var controllers = this.controllers;\n        for (var i = 0, len = controllers.length; i < len; i++) {\n            var controller = controllers[i];\n            components = components.concat(controller.getComponents());\n        }\n        return components;\n    };\n    /**\n     * 将 data 数据进行过滤。\n     * @param data\n     * @returns 过滤之后的数据\n     */\n    View.prototype.filterData = function (data) {\n        var filters = this.options.filters;\n        // 不存在 filters，则不需要进行数据过滤\n        if (size(filters) === 0) {\n            return data;\n        }\n        // 存在过滤器，则逐个执行过滤，过滤器之间是 与 的关系\n        return filter(data, function (datum, idx) {\n            // 所有的 filter 字段\n            var fields = Object.keys(filters);\n            // 所有的条件都通过，才算通过\n            return fields.every(function (field) {\n                var condition = filters[field];\n                // condition 返回 true，则保留\n                return condition(datum[field], datum, idx);\n            });\n        });\n    };\n    /**\n     * 对某一个字段进行过滤\n     * @param field\n     * @param data\n     */\n    View.prototype.filterFieldData = function (field, data) {\n        var filters = this.options.filters;\n        var condition = get(filters, field);\n        if (isUndefined(condition)) {\n            return data;\n        }\n        return data.filter(function (datum, idx) { return condition(datum[field], datum, idx); });\n    };\n    /**\n     * 调整 coordinate 的坐标范围。\n     */\n    View.prototype.adjustCoordinate = function () {\n        var start = this.coordinateBBox.bl;\n        var end = this.coordinateBBox.tr;\n        this.coordinateInstance = this.coordinateController.adjust(start, end);\n    };\n    View.prototype.paint = function (isUpdate) {\n        this.renderDataRecursive(isUpdate);\n        // 处理 sync scale 的逻辑\n        this.syncScale();\n        this.emit(VIEW_LIFE_CIRCLE.BEFORE_PAINT);\n        this.renderLayoutRecursive(isUpdate);\n        this.renderPaintRecursive(isUpdate);\n        this.emit(VIEW_LIFE_CIRCLE.AFTER_PAINT);\n        this.isDataChanged = false; // 渲染完毕复位\n    };\n    /**\n     * 替换处理 view 的布局，最终是计算各个 view 的 coordinateBBox 和 coordinateInstance\n     * @param isUpdate\n     */\n    View.prototype.renderLayoutRecursive = function (isUpdate) {\n        // 1. 子 view 大小相对 coordinateBBox，changeSize 的时候需要重新计算\n        this.calculateViewBBox();\n        // 2. 更新 coordinate\n        this.adjustCoordinate();\n        // 3. 初始化组件 component\n        this.initComponents(isUpdate);\n        // 4. 进行布局，计算 coordinateBBox，进行组件布局，update 位置\n        this.doLayout();\n        // 同样递归处理子 views\n        var views = this.views;\n        for (var i = 0, len = views.length; i < len; i++) {\n            var view = views[i];\n            view.renderLayoutRecursive(isUpdate);\n        }\n    };\n    /**\n     * 最终递归绘制组件和图形\n     * @param isUpdate\n     */\n    View.prototype.renderPaintRecursive = function (isUpdate) {\n        if (this.limitInPlot) {\n            var middleGroup = this.middleGroup;\n            var _a = getCoordinateClipCfg(this.coordinateInstance), type = _a.type, attrs = _a.attrs;\n            middleGroup.setClip({\n                type: type,\n                attrs: attrs,\n            });\n        }\n        // 1. 渲染几何标记\n        this.paintGeometries(isUpdate);\n        // 2. 绘制组件\n        this.renderComponents(isUpdate);\n        // 同样递归处理子 views\n        var views = this.views;\n        for (var i = 0, len = views.length; i < len; i++) {\n            var view = views[i];\n            view.renderPaintRecursive(isUpdate);\n        }\n    };\n    // end Get 方法\n    /**\n     * 创建 scale，递归到顶层 view 去创建和缓存 scale\n     * @param field\n     * @param data\n     * @param scaleDef\n     * @param key\n     */\n    View.prototype.createScale = function (field, data, scaleDef, key) {\n        // 1. 合并 field 对应的 scaleDef，合并原则是底层覆盖顶层（就近原则）\n        var currentScaleDef = get(this.options.scales, [field]);\n        var mergedScaleDef = __assign(__assign({}, currentScaleDef), scaleDef);\n        // 2. 是否存在父 view，在则递归，否则创建\n        if (this.parent) {\n            return this.parent.createScale(field, data, mergedScaleDef, key);\n        }\n        // 3. 在根节点 view 通过 scalePool 创建\n        return this.scalePool.createScale(field, data, mergedScaleDef, key);\n    };\n    /**\n     * 递归渲染中的数据处理\n     * @param isUpdate\n     */\n    View.prototype.renderDataRecursive = function (isUpdate) {\n        // 1. 处理数据\n        this.doFilterData();\n        // 2. 创建实例\n        this.createCoordinate();\n        // 3. 初始化 Geometry\n        this.initGeometries(isUpdate);\n        // 4. 处理分面逻辑，最终都是生成子 view 和 geometry\n        this.renderFacet(isUpdate);\n        // 同样递归处理子 views\n        var views = this.views;\n        for (var i = 0, len = views.length; i < len; i++) {\n            var view = views[i];\n            view.renderDataRecursive(isUpdate);\n        }\n    };\n    /**\n     * 计算 region，计算实际的像素范围坐标\n     * @private\n     */\n    View.prototype.calculateViewBBox = function () {\n        var x;\n        var y;\n        var width;\n        var height;\n        if (this.parent) {\n            var bbox = this.parent.coordinateBBox;\n            // 存在 parent， 那么就是通过父容器大小计算\n            x = bbox.x;\n            y = bbox.y;\n            width = bbox.width;\n            height = bbox.height;\n        }\n        else {\n            // 顶层容器，从 canvas 中取值 宽高\n            x = 0;\n            y = 0;\n            width = this.canvas.get('width');\n            height = this.canvas.get('height');\n        }\n        var _a = this.region, start = _a.start, end = _a.end;\n        // 根据 region 计算当前 view 的 bbox 大小。\n        this.viewBBox = new BBox(x + width * start.x, y + height * start.y, width * (end.x - start.x), height * (end.y - start.y));\n        // 初始的 coordinate bbox 大小\n        this.coordinateBBox = this.viewBBox;\n    };\n    /**\n     * 初始化事件机制：G 4.0 底层内置支持 name:event 的机制，那么只要所有组件都有自己的 name 即可。\n     *\n     * G2 的事件只是获取事件委托，然后在 view 嵌套结构中，形成事件冒泡机制。\n     * 当前 view 只委托自己 view 中的 Component 和 Geometry 事件，并向上冒泡\n     * @private\n     */\n    View.prototype.initEvents = function () {\n        // 三层 group 中的 shape 事件都会通过 G 冒泡上来的\n        this.foregroundGroup.on('*', this.onDelegateEvents);\n        this.middleGroup.on('*', this.onDelegateEvents);\n        this.backgroundGroup.on('*', this.onDelegateEvents);\n        this.canvas.on('*', this.onCanvasEvent);\n    };\n    /**\n     * 初始化插件\n     */\n    View.prototype.initComponentController = function () {\n        var usedControllers = this.usedControllers;\n        for (var i = 0, len = usedControllers.length; i < len; i++) {\n            var controllerName = usedControllers[i];\n            var Ctor = getComponentController(controllerName);\n            if (Ctor) {\n                this.controllers.push(new Ctor(this));\n            }\n        }\n    };\n    View.prototype.createViewEvent = function (evt) {\n        var shape = evt.shape, name = evt.name;\n        var data = shape ? shape.get('origin') : null;\n        // 事件在 view 嵌套中冒泡（暂不提供阻止冒泡的机制）\n        var e = new Event(this, evt, data);\n        e.type = name;\n        return e;\n    };\n    /**\n     * 处理 PLOT_EVENTS\n     * plot event 需要处理所有的基础事件，并判断是否在画布中，然后再决定是否要 emit。\n     * 对于 mouseenter、mouseleave 比较特殊，需要做一下数学比较。\n     * @param e\n     */\n    View.prototype.doPlotEvent = function (e) {\n        var type = e.type, x = e.x, y = e.y;\n        var point = { x: x, y: y };\n        var ALL_EVENTS = [\n            'mousedown',\n            'mouseup',\n            'mousemove',\n            'mouseleave',\n            'mousewheel',\n            'touchstart',\n            'touchmove',\n            'touchend',\n            'touchcancel',\n            'click',\n            'dblclick',\n            'contextmenu',\n        ];\n        if (ALL_EVENTS.includes(type)) {\n            var currentInPlot = this.isPointInPlot(point);\n            if (currentInPlot) {\n                var TYPE = \"plot:\" + type; // 组合 plot 事件\n                e.type = TYPE;\n                this.emit(TYPE, e);\n                if (type === 'mouseleave' || type === 'touchend') { // 在plot 内部却离开画布\n                    this.isPreMouseInPlot = false;\n                }\n            }\n            // 对于 mouseenter, mouseleave 的计算处理\n            if (type === 'mousemove' || type === 'touchmove') {\n                if (this.isPreMouseInPlot && !currentInPlot) {\n                    if (type === 'mousemove') {\n                        e.type = PLOT_EVENTS.MOUSE_LEAVE;\n                        this.emit(PLOT_EVENTS.MOUSE_LEAVE, e);\n                    }\n                    e.type = PLOT_EVENTS.LEAVE;\n                    this.emit(PLOT_EVENTS.LEAVE, e);\n                }\n                else if (!this.isPreMouseInPlot && currentInPlot) {\n                    if (type === 'mousemove') {\n                        e.type = PLOT_EVENTS.MOUSE_ENTER;\n                        this.emit(PLOT_EVENTS.MOUSE_ENTER, e);\n                    }\n                    e.type = PLOT_EVENTS.ENTER;\n                    this.emit(PLOT_EVENTS.ENTER, e);\n                }\n                // 赋新的状态值\n                this.isPreMouseInPlot = currentInPlot;\n            }\n            else if (type === 'mouseleave' || type === 'touchend') { // 可能不在 currentInPlot 中\n                if (this.isPreMouseInPlot) {\n                    if (type === 'mouseleave') {\n                        e.type = PLOT_EVENTS.MOUSE_LEAVE;\n                        this.emit(PLOT_EVENTS.MOUSE_LEAVE, e);\n                    }\n                    e.type = PLOT_EVENTS.LEAVE;\n                    this.emit(PLOT_EVENTS.LEAVE, e);\n                    this.isPreMouseInPlot = false;\n                }\n            }\n        }\n    };\n    // view 生命周期 —— 渲染流程\n    /**\n     * 处理筛选器，筛选数据\n     * @private\n     */\n    View.prototype.doFilterData = function () {\n        var data = this.options.data;\n        this.filteredData = this.filterData(data);\n    };\n    /**\n     * 初始化 Geometries\n     * @private\n     */\n    View.prototype.initGeometries = function (isUpdate) {\n        // 初始化图形的之前，先创建 / 更新 scales\n        this.createOrUpdateScales();\n        // 实例化 Geometry，然后 view 将所有的 scale 管理起来\n        var coordinate = this.getCoordinate();\n        var scaleDefs = get(this.options, 'scales', {});\n        var geometries = this.geometries;\n        for (var i = 0, len = geometries.length; i < len; i++) {\n            var geometry = geometries[i];\n            // 保持 scales 引用不要变化\n            geometry.scales = this.getGeometryScales();\n            var cfg = {\n                coordinate: coordinate,\n                scaleDefs: scaleDefs,\n                data: this.filteredData,\n                theme: this.themeObject,\n                isDataChanged: this.isDataChanged,\n            };\n            if (isUpdate) {\n                // 数据发生更新\n                geometry.update(cfg);\n            }\n            else {\n                geometry.init(cfg);\n            }\n        }\n        // Geometry 初始化之后，生成了 scale，然后进行调整 scale 配置\n        this.adjustScales();\n    };\n    /**\n     * 根据 Geometry 的所有字段创建 scales\n     * 如果存在，则更新，不存在则创建\n     */\n    View.prototype.createOrUpdateScales = function () {\n        var fields = this.getScaleFields();\n        var groupedFields = this.getGroupedFields();\n        var _a = this.getOptions(), data = _a.data, _b = _a.scales, scales = _b === void 0 ? {} : _b;\n        var filteredData = this.filteredData;\n        for (var i = 0, len = fields.length; i < len; i++) {\n            var field = fields[i];\n            var scaleDef = scales[field];\n            // 调用方法，递归去创建\n            var key = this.getScaleKey(field);\n            this.createScale(field, \n            // 分组字段的 scale 使用未过滤的数据创建\n            groupedFields.includes(field) ? data : filteredData, scaleDef, key);\n            // 缓存从当前 view 创建的 scale key\n            this.createdScaleKeys.set(key, true);\n        }\n    };\n    /**\n     * 处理 scale 同步逻辑\n     */\n    View.prototype.syncScale = function () {\n        // 最终调用 root view 的\n        this.getRootView().scalePool.sync();\n    };\n    /**\n     * 获得 Geometry 中的 scale 对象\n     */\n    View.prototype.getGeometryScales = function () {\n        var fields = this.getScaleFields();\n        var scales = {};\n        for (var i = 0; i < fields.length; i++) {\n            var field = fields[i];\n            scales[field] = this.getScaleByField(field);\n        }\n        return scales;\n    };\n    View.prototype.getScaleFields = function () {\n        var fields = [];\n        var tmpMap = {};\n        var geometries = this.geometries;\n        for (var i = 0; i < geometries.length; i++) {\n            var geometry = geometries[i];\n            var geometryScales = geometry.getScaleFields();\n            uniq(geometryScales, fields, tmpMap);\n        }\n        return fields;\n    };\n    View.prototype.getGroupedFields = function () {\n        var fields = [];\n        var tmpMap = {};\n        var geometries = this.geometries;\n        for (var i = 0; i < geometries.length; i++) {\n            var geometry = geometries[i];\n            var groupFields = geometry.getGroupFields();\n            uniq(groupFields, fields, tmpMap);\n        }\n        return fields;\n    };\n    /**\n     * 调整 scale 配置\n     * @private\n     */\n    View.prototype.adjustScales = function () {\n        // 调整目前包括：\n        // 分类 scale，调整 range 范围\n        this.adjustCategoryScaleRange();\n    };\n    /**\n     * 调整分类 scale 的 range，防止超出坐标系外面\n     * @private\n     */\n    View.prototype.adjustCategoryScaleRange = function () {\n        var _this = this;\n        var xyScales = __spreadArrays([this.getXScale()], this.getYScales()).filter(function (e) { return !!e; });\n        var coordinate = this.getCoordinate();\n        var scaleOptions = this.options.scales;\n        each(xyScales, function (scale) {\n            var field = scale.field, values = scale.values, isCategory = scale.isCategory, isIdentity = scale.isIdentity;\n            // 分类或者 identity 的 scale 才进行处理\n            if (isCategory || isIdentity) {\n                // 存在 value 值，且用户没有配置 range 配置\n                if (values && !get(scaleOptions, [field, 'range'])) {\n                    var count = values.length;\n                    var range = void 0;\n                    if (count === 1) {\n                        range = [0.5, 1]; // 只有一个分类时,防止计算出现 [0.5,0.5] 的状态\n                    }\n                    else {\n                        var widthRatio = 1;\n                        var offset = 0;\n                        if (isFullCircle(coordinate)) {\n                            if (!coordinate.isTransposed) {\n                                range = [0, 1 - 1 / count];\n                            }\n                            else {\n                                widthRatio = get(_this.theme, 'widthRatio.multiplePie', 1 / 1.3);\n                                offset = (1 / count) * widthRatio;\n                                range = [offset / 2, 1 - offset / 2];\n                            }\n                        }\n                        else {\n                            offset = 1 / count / 2; // 两边留下分类空间的一半\n                            range = [offset, 1 - offset]; // 坐标轴最前面和最后面留下空白防止绘制柱状图时\n                        }\n                    }\n                    // 更新 range\n                    scale.range = range;\n                }\n            }\n        });\n    };\n    /**\n     * 根据 options 配置、Geometry 字段配置，自动生成 components\n     * @param isUpdate 是否是更新\n     * @private\n     */\n    View.prototype.initComponents = function (isUpdate) {\n        // 先全部清空，然后 render\n        var controllers = this.controllers;\n        for (var i = 0; i < controllers.length; i++) {\n            var controller = controllers[i];\n            // 更新则走更新逻辑；否则清空载重绘\n            if (isUpdate) {\n                controller.update();\n            }\n            else {\n                controller.clear();\n                controller.render();\n            }\n        }\n        ;\n    };\n    View.prototype.doLayout = function () {\n        this.layoutFunc(this);\n    };\n    /**\n     * 创建坐标系\n     * @private\n     */\n    View.prototype.createCoordinate = function () {\n        var start = this.coordinateBBox.bl;\n        var end = this.coordinateBBox.tr;\n        this.coordinateInstance = this.coordinateController.create(start, end);\n    };\n    /**\n     * 根据 options 配置自动渲染 geometry\n     * @private\n     */\n    View.prototype.paintGeometries = function (isUpdate) {\n        var doAnimation = this.options.animate;\n        // geometry 的 paint 阶段\n        var coordinate = this.getCoordinate();\n        var canvasRegion = {\n            x: this.viewBBox.x,\n            y: this.viewBBox.y,\n            minX: this.viewBBox.minX,\n            minY: this.viewBBox.minY,\n            maxX: this.viewBBox.maxX,\n            maxY: this.viewBBox.maxY,\n            width: this.viewBBox.width,\n            height: this.viewBBox.height,\n        };\n        var geometries = this.geometries;\n        for (var i = 0; i < geometries.length; i++) {\n            var geometry = geometries[i];\n            geometry.coordinate = coordinate;\n            geometry.canvasRegion = canvasRegion;\n            if (!doAnimation) {\n                // 如果 view 不执行动画，那么 view 下所有的 geometry 都不执行动画\n                geometry.animate(false);\n            }\n            geometry.paint(isUpdate);\n        }\n    };\n    /**\n     * 最后的绘制组件\n     * @param isUpdate\n     */\n    View.prototype.renderComponents = function (isUpdate) {\n        // 先全部清空，然后 render\n        for (var i = 0; i < this.getComponents().length; i++) {\n            var co = this.getComponents()[i];\n            co.component.render();\n        }\n    };\n    /**\n     * 渲染分面，会在其中进行数据分面，然后进行子 view 创建\n     * @param isUpdate\n     */\n    View.prototype.renderFacet = function (isUpdate) {\n        if (this.facetInstance) {\n            if (isUpdate) {\n                this.facetInstance.update();\n            }\n            else {\n                this.facetInstance.clear();\n                // 计算分面数据\n                this.facetInstance.init();\n                // 渲染组件和 views\n                this.facetInstance.render();\n            }\n        }\n    };\n    View.prototype.initOptions = function () {\n        var _a = this.options, _b = _a.geometries, geometries = _b === void 0 ? [] : _b, _c = _a.interactions, interactions = _c === void 0 ? [] : _c, _d = _a.views, views = _d === void 0 ? [] : _d, _e = _a.annotations, annotations = _e === void 0 ? [] : _e;\n        // 创建 geometry 实例\n        for (var i = 0; i < geometries.length; i++) {\n            var geometryOption = geometries[i];\n            this.createGeometry(geometryOption);\n        }\n        // 创建 interactions 实例\n        for (var j = 0; j < interactions.length; j++) {\n            var interactionOption = interactions[j];\n            var type = interactionOption.type, cfg = interactionOption.cfg;\n            this.interaction(type, cfg);\n        }\n        // 创建 view 实例\n        for (var k = 0; k < views.length; k++) {\n            var viewOption = views[k];\n            this.createView(viewOption);\n        }\n        // 设置 annotation\n        var annotationComponent = this.getController('annotation');\n        for (var l = 0; l < annotations.length; l++) {\n            var annotationOption = annotations[l];\n            annotationComponent.annotation(annotationOption);\n        }\n    };\n    View.prototype.createGeometry = function (geometryOption) {\n        var type = geometryOption.type, _a = geometryOption.cfg, cfg = _a === void 0 ? {} : _a;\n        if (this[type]) {\n            var geometry_1 = this[type](cfg);\n            each(geometryOption, function (v, k) {\n                if (isFunction(geometry_1[k])) {\n                    geometry_1[k](v);\n                }\n            });\n        }\n    };\n    /**\n     * scale key 的创建方式\n     * @param field\n     */\n    View.prototype.getScaleKey = function (field) {\n        return this.id + \"-\" + field;\n    };\n    return View;\n}(Base));\nexport { View };\n/**\n * 注册 geometry 组件\n * @param name\n * @param Ctor\n * @returns Geometry\n */\nexport function registerGeometry(name, Ctor) {\n    // 语法糖，在 view API 上增加原型方法\n    View.prototype[name.toLowerCase()] = function (cfg) {\n        if (cfg === void 0) { cfg = {}; }\n        var props = __assign({ \n            /** 图形容器 */\n            container: this.middleGroup.addGroup(), labelsContainer: this.foregroundGroup.addGroup() }, cfg);\n        var geometry = new Ctor(props);\n        this.geometries.push(geometry);\n        return geometry;\n    };\n}\nexport default View;\n//# sourceMappingURL=view.js.map","import { __assign, __extends } from \"tslib\";\nimport { debounce, each, isString } from '@antv/util';\nimport { GROUP_Z_INDEX } from '../constant';\nimport { getEngine } from '../engine';\nimport { createDom, getChartSize, removeDom, modifyCSS } from '../util/dom';\nimport View from './view';\n/**\n * Chart 类，是使用 G2 进行绘图的入口。\n */\nvar Chart = /** @class */ (function (_super) {\n    __extends(Chart, _super);\n    // @ts-ignore\n    function Chart(props) {\n        var _this = this;\n        var container = props.container, width = props.width, height = props.height, _a = props.autoFit, autoFit = _a === void 0 ? false : _a, padding = props.padding, _b = props.renderer, renderer = _b === void 0 ? 'canvas' : _b, pixelRatio = props.pixelRatio, _c = props.localRefresh, localRefresh = _c === void 0 ? true : _c, _d = props.visible, visible = _d === void 0 ? true : _d, _e = props.defaultInteractions, defaultInteractions = _e === void 0 ? ['tooltip', 'legend-filter', 'legend-active', 'continuous-filter'] : _e, options = props.options, limitInPlot = props.limitInPlot, theme = props.theme;\n        var ele = isString(container) ? document.getElementById(container) : container;\n        // 生成内部正式绘制的 div 元素\n        var wrapperElement = createDom('<div style=\"position:relative;\"></div>');\n        ele.appendChild(wrapperElement);\n        // if autoFit, use the container size, to avoid the graph render twice.\n        var size = getChartSize(ele, autoFit, width, height);\n        var G = getEngine(renderer);\n        var canvas = new G.Canvas(__assign({ container: wrapperElement, pixelRatio: pixelRatio,\n            localRefresh: localRefresh }, size));\n        // 调用 view 的创建\n        _this = _super.call(this, {\n            parent: null,\n            canvas: canvas,\n            // create 3 group layers for views.\n            backgroundGroup: canvas.addGroup({ zIndex: GROUP_Z_INDEX.BG }),\n            middleGroup: canvas.addGroup({ zIndex: GROUP_Z_INDEX.MID }),\n            foregroundGroup: canvas.addGroup({ zIndex: GROUP_Z_INDEX.FORE }),\n            padding: padding,\n            visible: visible,\n            options: options,\n            limitInPlot: limitInPlot,\n            theme: theme,\n        }) || this;\n        /**\n         * when container size changed, change chart size props, and re-render.\n         */\n        _this.onResize = debounce(function () {\n            _this.forceFit();\n        }, 300);\n        _this.ele = ele;\n        _this.canvas = canvas;\n        _this.width = size.width;\n        _this.height = size.height;\n        _this.autoFit = autoFit;\n        _this.localRefresh = localRefresh;\n        _this.renderer = renderer;\n        _this.wrapperElement = wrapperElement;\n        // 自适应大小\n        _this.updateCanvasStyle();\n        _this.bindAutoFit();\n        _this.initDefaultInteractions(defaultInteractions);\n        return _this;\n    }\n    Chart.prototype.initDefaultInteractions = function (interactions) {\n        var _this = this;\n        each(interactions, function (interaction) {\n            _this.interaction(interaction);\n        });\n    };\n    /**\n     * 改变图表大小，同时重新渲染。\n     * @param width 图表宽度\n     * @param height 图表高度\n     * @returns\n     */\n    Chart.prototype.changeSize = function (width, height) {\n        this.width = width;\n        this.height = height;\n        this.canvas.changeSize(width, height);\n        // 重新渲染\n        this.render(true);\n        return this;\n    };\n    /**\n     * 销毁图表，同时解绑事件，销毁创建的 G.Canvas 实例。\n     * @returns void\n     */\n    Chart.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.unbindAutoFit();\n        this.canvas.destroy();\n        removeDom(this.wrapperElement);\n        this.wrapperElement = null;\n    };\n    /**\n     * 显示或隐藏图表\n     * @param visible 是否可见，true 表示显示，false 表示隐藏\n     * @returns\n     */\n    Chart.prototype.changeVisible = function (visible) {\n        this.wrapperElement.style.display = visible ? '' : 'none';\n        return this;\n    };\n    /**\n     * 自动根据容器大小 resize 画布\n     */\n    Chart.prototype.forceFit = function () {\n        // 注意第二参数用 true，意思是即时 autoFit = false，forceFit() 调用之后一样是适配容器\n        var _a = getChartSize(this.ele, true, this.width, this.height), width = _a.width, height = _a.height;\n        this.changeSize(width, height);\n    };\n    Chart.prototype.updateCanvasStyle = function () {\n        modifyCSS(this.canvas.get('el'), {\n            display: 'inline-block',\n            verticalAlign: 'middle',\n        });\n    };\n    Chart.prototype.bindAutoFit = function () {\n        if (this.autoFit) {\n            window.addEventListener('resize', this.onResize);\n        }\n    };\n    Chart.prototype.unbindAutoFit = function () {\n        if (this.autoFit) {\n            window.removeEventListener('resize', this.onResize);\n        }\n    };\n    return Chart;\n}(View));\nexport default Chart;\n//# sourceMappingURL=chart.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@antv/util\");\n/**\n * Component Controller 规范需要定义的基类\n * 1. 规范的 option 输入\n * 2. 统一的信息获取 API\n * 3. 明确定义的组件事件（名称、数据）\n */\nvar Controller = /** @class */ (function () {\n    function Controller(view) {\n        /** 是否可见 */\n        this.visible = true;\n        /** 所有的 component */\n        this.components = [];\n        this.view = view;\n    }\n    /**\n     * clear\n     */\n    Controller.prototype.clear = function () {\n        // destroy all components\n        util_1.each(this.components, function (co) {\n            co.component.destroy();\n        });\n        // clear all component instance\n        this.components = [];\n    };\n    /**\n     * destroy the component\n     */\n    Controller.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * get all components\n     * @returns components array\n     */\n    Controller.prototype.getComponents = function () {\n        return this.components;\n    };\n    /**\n     * change visibility of component\n     * @param visible\n     */\n    Controller.prototype.changeVisible = function (visible) {\n        if (this.visible === visible) {\n            return;\n        }\n        this.components.forEach(function (co) {\n            if (visible) {\n                co.component.show();\n            }\n            else {\n                co.component.hide();\n            }\n        });\n        this.visible = visible;\n    };\n    return Controller;\n}());\nexports.Controller = Controller;\n//# sourceMappingURL=base.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _ = require(\"@antv/util\");\nvar constant_1 = require(\"../constant\");\nvar Adjust = /** @class */ (function () {\n    function Adjust(cfg) {\n        var xField = cfg.xField, yField = cfg.yField, _a = cfg.adjustNames, adjustNames = _a === void 0 ? ['x', 'y'] : _a;\n        this.adjustNames = adjustNames;\n        this.xField = xField;\n        this.yField = yField;\n    }\n    /**\n     * 查看维度是否是 adjust 字段\n     * @param dim\n     */\n    Adjust.prototype.isAdjust = function (dim) {\n        return this.adjustNames.indexOf(dim) >= 0;\n    };\n    Adjust.prototype.getAdjustRange = function (dim, dimValue, values) {\n        var yField = this.yField;\n        var index = values.indexOf(dimValue);\n        var length = values.length;\n        var pre;\n        var next;\n        // 没有 y 字段，但是需要根据 y 调整\n        if (!yField && this.isAdjust('y')) {\n            pre = 0;\n            next = 1;\n        }\n        else if (length > 1) {\n            // 如果以其开头，则取之，否则取他前面一个\n            pre = values[index === 0 ? 0 : index - 1];\n            // 如果以其结尾，则取之，否则取他后面一个\n            next = values[index === length - 1 ? length - 1 : index + 1];\n            if (index !== 0) {\n                pre += (dimValue - pre) / 2;\n            }\n            else {\n                pre -= (next - dimValue) / 2;\n            }\n            if (index !== length - 1) {\n                next -= (next - dimValue) / 2;\n            }\n            else {\n                next += (dimValue - values[length - 2]) / 2;\n            }\n        }\n        else {\n            pre = dimValue === 0 ? 0 : dimValue - 0.5;\n            next = dimValue === 0 ? 1 : dimValue + 0.5;\n        }\n        return {\n            pre: pre,\n            next: next,\n        };\n    };\n    Adjust.prototype.adjustData = function (groupedDataArray, mergedData) {\n        var _this = this;\n        // 所有调整维度的值数组\n        var dimValuesMap = this.getDimValues(mergedData);\n        // 按照每一个分组来进行调整\n        _.each(groupedDataArray, function (dataArray, index) {\n            // 遍历所有数据集合\n            // 每个分组中，分别按照不同的 dim 进行调整\n            _.each(dimValuesMap, function (values, dim) {\n                // 根据不同的度量分别调整位置\n                _this.adjustDim(dim, values, dataArray, index);\n            });\n        });\n    };\n    /**\n     * 对数据进行分组adjustData\n     * @param data 数据\n     * @param dim 分组的字段\n     * @return 分组结果\n     */\n    Adjust.prototype.groupData = function (data, dim) {\n        // 补齐数据空数据为默认值\n        _.each(data, function (record) {\n            if (record[dim] === undefined) {\n                record[dim] = constant_1.DEFAULT_Y;\n            }\n        });\n        // 按照 dim 维度分组\n        return _.groupBy(data, dim);\n    };\n    /** @override */\n    Adjust.prototype.adjustDim = function (dim, values, data, index) { };\n    /**\n     * 获取可调整度量对应的值\n     * @param mergedData 数据\n     * @return 值的映射\n     */\n    Adjust.prototype.getDimValues = function (mergedData) {\n        var _a = this, xField = _a.xField, yField = _a.yField;\n        var dimValuesMap = {};\n        // 所有的维度\n        var dims = [];\n        if (xField && this.isAdjust('x')) {\n            dims.push(xField);\n        }\n        if (yField && this.isAdjust('y')) {\n            dims.push(yField);\n        }\n        dims.forEach(function (dim) {\n            // 在每个维度上，所有的值\n            dimValuesMap[dim] = _.valuesOfKey(mergedData, dim).sort(function (v1, v2) { return v1 - v2; });\n        });\n        // 只有一维的情况下，同时调整 y，赋予默认值\n        if (!yField && this.isAdjust('y')) {\n            var dim = 'y';\n            dimValuesMap[dim] = [constant_1.DEFAULT_Y, 1]; // 默认分布在 y 轴的 0 与 1 之间\n        }\n        return dimValuesMap;\n    };\n    return Adjust;\n}());\nexports.default = Adjust;\n//# sourceMappingURL=adjust.js.map","import { __extends } from \"tslib\";\nimport * as _ from '@antv/util';\nimport { DODGE_RATIO, MARGIN_RATIO } from '../constant';\nimport Adjust from './adjust';\nvar Dodge = /** @class */ (function (_super) {\n    __extends(Dodge, _super);\n    function Dodge(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.cacheMap = {};\n        _this.adjustDataArray = [];\n        _this.mergeData = [];\n        var _a = cfg.marginRatio, marginRatio = _a === void 0 ? MARGIN_RATIO : _a, _b = cfg.dodgeRatio, dodgeRatio = _b === void 0 ? DODGE_RATIO : _b, dodgeBy = cfg.dodgeBy;\n        _this.marginRatio = marginRatio;\n        _this.dodgeRatio = dodgeRatio;\n        _this.dodgeBy = dodgeBy;\n        return _this;\n    }\n    Dodge.prototype.process = function (groupDataArray) {\n        var groupedDataArray = _.clone(groupDataArray);\n        // 将数据数组展开一层\n        var mergeData = _.flatten(groupedDataArray);\n        var dodgeBy = this.dodgeBy;\n        // 如果指定了分组 dim 的字段\n        var adjustDataArray = dodgeBy ? _.group(mergeData, dodgeBy) : groupedDataArray;\n        this.cacheMap = {};\n        this.adjustDataArray = adjustDataArray;\n        this.mergeData = mergeData;\n        this.adjustData(adjustDataArray, mergeData);\n        this.adjustDataArray = [];\n        this.mergeData = [];\n        return groupedDataArray;\n    };\n    Dodge.prototype.adjustDim = function (dim, values, data, frameIndex) {\n        var _this = this;\n        var map = this.getDistribution(dim);\n        var groupData = this.groupData(data, dim); // 根据值分组\n        _.each(groupData, function (group, key) {\n            var range;\n            // xField 中只有一个值，不需要做 dodge\n            if (values.length === 1) {\n                range = {\n                    pre: values[0] - 1,\n                    next: values[0] + 1,\n                };\n            }\n            else {\n                // 如果有多个，则需要获取调整的范围\n                range = _this.getAdjustRange(dim, parseFloat(key), values);\n            }\n            _.each(group, function (d) {\n                var value = d[dim];\n                var valueArr = map[value];\n                var valIndex = valueArr.indexOf(frameIndex);\n                d[dim] = _this.getDodgeOffset(range, valIndex, valueArr.length);\n            });\n        });\n        return [];\n    };\n    Dodge.prototype.getDodgeOffset = function (range, idx, len) {\n        var _a = this, dodgeRatio = _a.dodgeRatio, marginRatio = _a.marginRatio;\n        var pre = range.pre, next = range.next;\n        var tickLength = next - pre;\n        var width = (tickLength * dodgeRatio) / len;\n        var margin = marginRatio * width;\n        var offset = (1 / 2) * (tickLength - len * width - (len - 1) * margin) +\n            ((idx + 1) * width + idx * margin) -\n            (1 / 2) * width -\n            (1 / 2) * tickLength;\n        return (pre + next) / 2 + offset;\n    };\n    Dodge.prototype.getDistribution = function (dim) {\n        var groupedDataArray = this.adjustDataArray;\n        var cacheMap = this.cacheMap;\n        var map = cacheMap[dim];\n        if (!map) {\n            map = {};\n            _.each(groupedDataArray, function (data, index) {\n                var values = _.valuesOfKey(data, dim);\n                if (!values.length) {\n                    values.push(0);\n                }\n                _.each(values, function (val) {\n                    if (!map[val]) {\n                        map[val] = [];\n                    }\n                    map[val].push(index);\n                });\n            });\n            cacheMap[dim] = map;\n        }\n        return map;\n    };\n    return Dodge;\n}(Adjust));\nexport default Dodge;\n//# sourceMappingURL=dodge.js.map","import { __extends } from \"tslib\";\nimport * as _ from '@antv/util';\nimport { GAP } from '../constant';\nimport Adjust from './adjust';\nfunction randomNumber(min, max) {\n    return (max - min) * Math.random() + min;\n}\nvar Jitter = /** @class */ (function (_super) {\n    __extends(Jitter, _super);\n    function Jitter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Jitter.prototype.process = function (groupDataArray) {\n        var groupedDataArray = _.clone(groupDataArray);\n        // 之前分组之后的数据，然后有合并回去（和分组前可以理解成是一样的）\n        var mergeData = _.flatten(groupedDataArray);\n        // 返回值\n        this.adjustData(groupedDataArray, mergeData);\n        return groupedDataArray;\n    };\n    /**\n     * 当前数据分组（index）中，按照维度 dim 进行 jitter 调整\n     * @param dim\n     * @param values\n     * @param dataArray\n     */\n    Jitter.prototype.adjustDim = function (dim, values, dataArray) {\n        var _this = this;\n        // 在每一个分组中，将数据再按照 dim 分组，用于散列\n        var groupDataArray = this.groupData(dataArray, dim);\n        return _.each(groupDataArray, function (data, dimValue) {\n            return _this.adjustGroup(data, dim, parseFloat(dimValue), values);\n        });\n    };\n    // 随机出来的字段值\n    Jitter.prototype.getAdjustOffset = function (range) {\n        var pre = range.pre, next = range.next;\n        // 随机的范围\n        var margin = (next - pre) * GAP;\n        return randomNumber(pre + margin, next - margin);\n    };\n    // adjust group data\n    Jitter.prototype.adjustGroup = function (group, dim, dimValue, values) {\n        var _this = this;\n        // 调整范围\n        var range = this.getAdjustRange(dim, dimValue, values);\n        _.each(group, function (data) {\n            data[dim] = _this.getAdjustOffset(range); // 获取调整的位置\n        });\n        return group;\n    };\n    return Jitter;\n}(Adjust));\nexport default Jitter;\n//# sourceMappingURL=jitter.js.map","import { __assign, __extends } from \"tslib\";\nimport * as _ from '@antv/util';\nimport Adjust from './adjust';\nvar Cache = _.Cache;\nvar Stack = /** @class */ (function (_super) {\n    __extends(Stack, _super);\n    function Stack(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        var _a = cfg.adjustNames, adjustNames = _a === void 0 ? ['y'] : _a, _b = cfg.height, height = _b === void 0 ? NaN : _b, _c = cfg.size, size = _c === void 0 ? 10 : _c, _d = cfg.reverseOrder, reverseOrder = _d === void 0 ? false : _d;\n        _this.adjustNames = adjustNames;\n        _this.height = height;\n        _this.size = size;\n        _this.reverseOrder = reverseOrder;\n        return _this;\n    }\n    /**\n     * 方法入参是经过数据分组、数据数字化之后的二维数组\n     * @param groupDataArray 分组之后的数据\n     */\n    Stack.prototype.process = function (groupDataArray) {\n        var _a = this, yField = _a.yField, reverseOrder = _a.reverseOrder;\n        // 如果有指定 y 字段，那么按照 y 字段来 stack\n        // 否则，按照高度均分\n        var d = yField ? this.processStack(groupDataArray) : this.processOneDimStack(groupDataArray);\n        return reverseOrder ? this.reverse(d) : d;\n    };\n    Stack.prototype.reverse = function (groupedDataArray) {\n        return groupedDataArray.slice(0).reverse();\n    };\n    Stack.prototype.processStack = function (groupDataArray) {\n        var _a = this, xField = _a.xField, yField = _a.yField, reverseOrder = _a.reverseOrder;\n        // 层叠顺序翻转\n        var groupedDataArray = reverseOrder ? this.reverse(groupDataArray) : groupDataArray;\n        // 用来缓存，正数和负数的堆叠问题\n        var positive = new Cache();\n        var negative = new Cache();\n        return groupedDataArray.map(function (dataArray) {\n            return dataArray.map(function (data) {\n                var _a;\n                var x = _.get(data, xField, 0);\n                var y = _.get(data, yField);\n                var xKey = x.toString();\n                // todo 是否应该取 _origin？因为 y 可能取到的值不正确，比如先 symmetric，再 stack！\n                y = _.isArray(y) ? y[1] : y;\n                if (!_.isNil(y)) {\n                    var cache = y >= 0 ? positive : negative;\n                    if (!cache.has(xKey)) {\n                        cache.set(xKey, 0);\n                    }\n                    var xValue = cache.get(xKey);\n                    var newXValue = y + xValue;\n                    // 存起来\n                    cache.set(xKey, newXValue);\n                    return __assign(__assign({}, data), (_a = {}, _a[yField] = [xValue, newXValue], _a));\n                }\n                // 没有修改，则直接返回\n                return data;\n            });\n        });\n    };\n    Stack.prototype.processOneDimStack = function (groupDataArray) {\n        var _this = this;\n        var _a = this, xField = _a.xField, height = _a.height, reverseOrder = _a.reverseOrder;\n        var yField = 'y';\n        // 如果层叠的顺序翻转\n        var groupedDataArray = reverseOrder ? this.reverse(groupDataArray) : groupDataArray;\n        // 缓存累加数据\n        var cache = new Cache();\n        return groupedDataArray.map(function (dataArray) {\n            return dataArray.map(function (data) {\n                var _a;\n                var size = _this.size;\n                var xValue = data[xField];\n                // todo 没有看到这个 stack 计算原理\n                var stackHeight = (size * 2) / height;\n                if (!cache.has(xValue)) {\n                    cache.set(xValue, stackHeight / 2); // 初始值大小\n                }\n                var stackValue = cache.get(xValue);\n                // 增加一层 stackHeight\n                cache.set(xValue, stackValue + stackHeight);\n                return __assign(__assign({}, data), (_a = {}, _a[yField] = stackValue, _a));\n            });\n        });\n    };\n    return Stack;\n}(Adjust));\nexport default Stack;\n//# sourceMappingURL=stack.js.map","import { __assign, __extends } from \"tslib\";\nimport * as _ from '@antv/util';\nimport Adjust from './adjust';\nvar Symmetric = /** @class */ (function (_super) {\n    __extends(Symmetric, _super);\n    function Symmetric() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Symmetric.prototype.process = function (groupDataArray) {\n        var mergeData = _.flatten(groupDataArray);\n        var _a = this, xField = _a.xField, yField = _a.yField;\n        // 每个 x 值对应的 最大值\n        var cache = this.getXValuesMaxMap(mergeData);\n        // 所有数据的最大的值\n        var max = Math.max.apply(Math, Object.keys(cache).map(function (key) { return cache[key]; }));\n        return _.map(groupDataArray, function (dataArray) {\n            return _.map(dataArray, function (data) {\n                var _a, _b;\n                var yValue = data[yField];\n                var xValue = data[xField];\n                // 数组处理逻辑\n                if (_.isArray(yValue)) {\n                    var off_1 = (max - cache[xValue]) / 2;\n                    return __assign(__assign({}, data), (_a = {}, _a[yField] = _.map(yValue, function (y) { return off_1 + y; }), _a));\n                }\n                // 非数组处理逻辑\n                var offset = (max - yValue) / 2;\n                return __assign(__assign({}, data), (_b = {}, _b[yField] = [offset, yValue + offset], _b));\n            });\n        });\n    };\n    // 获取每个 x 对应的最大的值\n    Symmetric.prototype.getXValuesMaxMap = function (mergeData) {\n        var _this = this;\n        var _a = this, xField = _a.xField, yField = _a.yField;\n        // 根据 xField 的值进行分组\n        var groupDataArray = _.groupBy(mergeData, function (data) { return data[xField]; });\n        // 获取每个 xField 值中的最大值\n        return _.mapValues(groupDataArray, function (dataArray) { return _this.getDimMaxValue(dataArray, yField); });\n    };\n    Symmetric.prototype.getDimMaxValue = function (mergeData, dim) {\n        // 所有的 value 值\n        var dimValues = _.map(mergeData, function (data) { return _.get(data, dim, []); });\n        // 将数组打平（dim value 有可能是数组，比如 stack 之后的）\n        var flattenValues = _.flatten(dimValues);\n        // 求出数组的最大值\n        return Math.max.apply(Math, flattenValues);\n    };\n    return Symmetric;\n}(Adjust));\nexport default Symmetric;\n//# sourceMappingURL=symmetric.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ANIMATIONS_MAP = {};\n/**\n * 根据名称获取对应的动画执行函数\n * @param type 动画函数名称\n */\nfunction getAnimation(type) {\n    return ANIMATIONS_MAP[type.toLowerCase()];\n}\nexports.getAnimation = getAnimation;\n/**\n * 注册动画执行函数\n * @param type 动画执行函数名称\n * @param animation 动画执行函数\n */\nfunction registerAnimation(type, animation) {\n    ANIMATIONS_MAP[type.toLowerCase()] = animation;\n}\nexports.registerAnimation = registerAnimation;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar util_1 = require(\"@antv/util\");\nvar constant_1 = require(\"../constant\");\nvar animation_1 = require(\"./animation\");\n// 默认的动画参数配置\nexports.DEFAULT_ANIMATE_CFG = {\n    appear: {\n        duration: 450,\n        easing: 'easeQuadOut',\n    },\n    update: {\n        duration: 400,\n        easing: 'easeQuadInOut',\n    },\n    enter: {\n        duration: 400,\n        easing: 'easeQuadInOut',\n    },\n    leave: {\n        duration: 350,\n        easing: 'easeQuadIn',\n    },\n};\n// 各个 Geometry 默认的动画执行函数\nvar GEOMETRY_ANIMATE_CFG = {\n    interval: function (coordinate) {\n        return {\n            enter: {\n                animation: coordinate.isRect\n                    ? coordinate.isTransposed\n                        ? 'scale-in-x'\n                        : 'scale-in-y'\n                    : 'fade-in',\n            },\n            update: {\n                animation: coordinate.isPolar && coordinate.isTransposed ? 'sector-path-update' : null,\n            },\n            leave: {\n                animation: 'fade-out',\n            },\n        };\n    },\n    line: {\n        enter: {\n            animation: 'fade-in',\n        },\n        leave: {\n            animation: 'fade-out',\n        },\n    },\n    path: {\n        enter: {\n            animation: 'fade-in',\n        },\n        leave: {\n            animation: 'fade-out',\n        },\n    },\n    point: {\n        appear: {\n            animation: 'zoom-in',\n        },\n        enter: {\n            animation: 'zoom-in',\n        },\n        leave: {\n            animation: 'zoom-out',\n        },\n    },\n    area: {\n        enter: {\n            animation: 'fade-in',\n        },\n        leave: {\n            animation: 'fade-out',\n        },\n    },\n    polygon: {\n        enter: {\n            animation: 'fade-in',\n        },\n        leave: {\n            animation: 'fade-out',\n        },\n    },\n    schema: {\n        enter: {\n            animation: 'fade-in',\n        },\n        leave: {\n            animation: 'fade-out',\n        },\n    },\n    edge: {\n        enter: {\n            animation: 'fade-in',\n        },\n        leave: {\n            animation: 'fade-out',\n        },\n    },\n    label: {\n        appear: {\n            animation: 'fade-in',\n            delay: 450,\n        },\n        enter: {\n            animation: 'fade-in',\n        },\n        update: {\n            animation: 'position-update',\n        },\n        leave: {\n            animation: 'fade-out',\n        },\n    },\n};\n// 各个 Geometry 默认的群组出场动画\nvar GEOMETRY_GROUP_APPEAR_ANIMATION = {\n    line: function () {\n        return {\n            animation: 'wave-in',\n        };\n    },\n    area: function () {\n        return {\n            animation: 'wave-in',\n        };\n    },\n    path: function () {\n        return {\n            animation: 'fade-in',\n        };\n    },\n    interval: function (coordinate) {\n        var animation;\n        if (coordinate.isRect) {\n            animation = coordinate.isTransposed ? 'grow-in-x' : 'grow-in-y';\n        }\n        else {\n            animation = 'grow-in-xy';\n            if (coordinate.isPolar && coordinate.isTransposed) {\n                // pie chart\n                animation = 'wave-in';\n            }\n        }\n        return {\n            animation: animation,\n        };\n    },\n    schema: function (coordinate) {\n        var animation;\n        if (coordinate.isRect) {\n            animation = coordinate.isTransposed ? 'grow-in-x' : 'grow-in-y';\n        }\n        else {\n            animation = 'grow-in-xy';\n        }\n        return {\n            animation: animation,\n        };\n    },\n    polygon: function () {\n        return {\n            animation: 'fade-in',\n            duration: 500,\n        };\n    },\n    edge: function () {\n        return {\n            animation: 'fade-in',\n        };\n    },\n};\n// 解析用户的动画配置\nfunction parseAnimateConfig(animateCfg, data) {\n    return {\n        delay: util_1.isFunction(animateCfg.delay) ? animateCfg.delay(data) : animateCfg.delay,\n        easing: util_1.isFunction(animateCfg.easing) ? animateCfg.easing(data) : animateCfg.easing,\n        duration: util_1.isFunction(animateCfg.duration) ? animateCfg.duration(data) : animateCfg.duration,\n        callback: animateCfg.callback,\n    };\n}\n/**\n * @ignore\n * 获取 elementName 对应的动画配置，当声明了 `animateType`，则返回 `animateType` 对应的动画配置\n * @param elementName 元素名称\n * @param coordinate 做表弟类型\n * @param animateType 可选，动画类型\n */\nfunction getDefaultAnimateCfg(elementName, coordinate, animateType) {\n    var animateCfg = GEOMETRY_ANIMATE_CFG[elementName];\n    if (animateCfg) {\n        if (util_1.isFunction(animateCfg)) {\n            animateCfg = animateCfg(coordinate);\n        }\n        animateCfg = util_1.deepMix({}, exports.DEFAULT_ANIMATE_CFG, animateCfg);\n        if (animateType) {\n            return animateCfg[animateType];\n        }\n    }\n    return animateCfg;\n}\nexports.getDefaultAnimateCfg = getDefaultAnimateCfg;\n/**\n * @ignore\n * 工具函数\n * 根据用户传入的配置为 shape 执行动画\n * @param shape 执行动画的图形元素\n * @param animateCfg 动画配置\n * @param cfg 额外的信息\n */\nfunction doAnimate(shape, animateCfg, cfg) {\n    var data = util_1.get(shape.get('origin'), 'data', constant_1.FIELD_ORIGIN);\n    var animation = animateCfg.animation; // 获取动画执行函数\n    var parsedAnimateCfg = parseAnimateConfig(animateCfg, data);\n    if (animation) {\n        // 用户声明了动画执行函数\n        var animateFunction = animation_1.getAnimation(animation);\n        if (animateFunction) {\n            animateFunction(shape, parsedAnimateCfg, cfg);\n        }\n    }\n    else {\n        // 没有声明，则根据 toAttrs 做差值动画\n        shape.animate(cfg.toAttrs, parsedAnimateCfg);\n    }\n}\nexports.doAnimate = doAnimate;\n/**\n * @ignore\n * 执行 Geometry 群组入场动画\n * @param container 执行群组动画的图形元素\n * @param animateCfg 动画配置\n * @param geometryType geometry 类型\n * @param coordinate 坐标系对象\n * @param minYPoint y 轴最小值对应的画布坐标点\n */\nfunction doGroupAppearAnimate(container, animateCfg, geometryType, coordinate, minYPoint) {\n    if (GEOMETRY_GROUP_APPEAR_ANIMATION[geometryType]) {\n        var defaultCfg = GEOMETRY_GROUP_APPEAR_ANIMATION[geometryType](coordinate);\n        var animation = animation_1.getAnimation(util_1.get(defaultCfg, 'animation', ''));\n        if (animation) {\n            var cfg = tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({}, exports.DEFAULT_ANIMATE_CFG.appear), defaultCfg), animateCfg);\n            container.stopAnimate(); // 先结束当前 container 动画\n            animation(container, cfg, {\n                coordinate: coordinate,\n                minYPoint: minYPoint,\n                toAttrs: null,\n            });\n        }\n    }\n}\nexports.doGroupAppearAnimate = doGroupAppearAnimate;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar util_1 = require(\"@antv/util\");\nvar animate_1 = require(\"../../animate\");\nvar base_1 = tslib_1.__importDefault(require(\"../../base\"));\nvar graphics_1 = require(\"../../util/graphics\");\nvar event_1 = require(\"@antv/component/lib/util/event\");\n/**\n * Element 图形元素。\n * 定义：在 G2 中，我们会将数据通过图形语法映射成不同的图形，比如点图，数据集中的每条数据会对应一个点，柱状图每条数据对应一个柱子，线图则是一组数据对应一条折线，Element 即一条/一组数据对应的图形元素，它代表一条数据或者一个数据集，在图形层面，它可以是单个 Shape 也可以是多个 Shape，我们称之为图形元素。\n */\nvar Element = /** @class */ (function (_super) {\n    tslib_1.__extends(Element, _super);\n    function Element(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        // 存储当前开启的状态\n        _this.states = [];\n        var shapeFactory = cfg.shapeFactory, container = cfg.container, offscreenGroup = cfg.offscreenGroup, _a = cfg.visible, visible = _a === void 0 ? true : _a;\n        _this.shapeFactory = shapeFactory;\n        _this.container = container;\n        _this.offscreenGroup = offscreenGroup;\n        _this.visible = visible;\n        return _this;\n    }\n    /**\n     * 绘制图形。\n     * @param model 绘制数据。\n     * @param isUpdate 可选，是否是更新发生后的绘制。\n     */\n    Element.prototype.draw = function (model, isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n        this.model = model;\n        this.data = model.data; // 存储原始数据\n        this.shapeType = this.getShapeType(model);\n        // 绘制图形\n        this.drawShape(model, isUpdate);\n        if (this.visible === false) {\n            // 用户在初始化的时候声明 visible: false\n            this.changeVisible(false);\n        }\n    };\n    /**\n     * 更新图形。\n     * @param model 更新的绘制数据。\n     */\n    Element.prototype.update = function (model) {\n        var _a = this, shapeFactory = _a.shapeFactory, shape = _a.shape;\n        if (!shape) {\n            return;\n        }\n        // 更新数据\n        this.model = model;\n        this.data = model.data;\n        this.shapeType = this.getShapeType(model);\n        // step 1: 更新 shape 携带的信息\n        this.setShapeInfo(shape, model);\n        // step 2: 使用虚拟 Group 重新绘制 shape，然后更新当前 shape\n        var offscreenGroup = this.getOffscreenGroup();\n        var newShape = shapeFactory.drawShape(this.shapeType, model, offscreenGroup);\n        // @ts-ignore\n        newShape.cfg.data = this.data;\n        // @ts-ignore\n        newShape.cfg.origin = model;\n        // step 3: 同步 shape 样式\n        this.syncShapeStyle(shape, newShape, '', this.getAnimateCfg('update'));\n    };\n    /**\n     * 销毁 element 实例。\n     */\n    Element.prototype.destroy = function () {\n        var _a = this, shapeFactory = _a.shapeFactory, shape = _a.shape;\n        if (shape) {\n            var animateCfg = this.getAnimateCfg('leave');\n            if (animateCfg) {\n                // 指定了动画配置则执行销毁动画\n                animate_1.doAnimate(shape, animateCfg, {\n                    coordinate: shapeFactory.coordinate,\n                    toAttrs: tslib_1.__assign({}, shape.attr()),\n                });\n            }\n            else {\n                // 否则直接销毁\n                shape.remove(true);\n            }\n        }\n        // reset\n        this.states = [];\n        this.shapeFactory = undefined;\n        this.container = undefined;\n        this.shape = undefined;\n        this.animate = undefined;\n        this.geometry = undefined;\n        this.labelShape = undefined;\n        this.model = undefined;\n        this.data = undefined;\n        this.offscreenGroup = undefined;\n        this.statesStyle = undefined;\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * 显示或者隐藏 element。\n     * @param visible 是否可见。\n     */\n    Element.prototype.changeVisible = function (visible) {\n        _super.prototype.changeVisible.call(this, visible);\n        if (visible) {\n            if (this.shape) {\n                this.shape.show();\n            }\n            if (this.labelShape) {\n                this.labelShape.forEach(function (label) {\n                    label.show();\n                });\n            }\n        }\n        else {\n            if (this.shape) {\n                this.shape.hide();\n            }\n            if (this.labelShape) {\n                this.labelShape.forEach(function (label) {\n                    label.hide();\n                });\n            }\n        }\n    };\n    /**\n     * 设置 Element 的状态。\n     *\n     * 目前 Element 开放三种状态：\n     * 1. active\n     * 2. selected\n     * 3. inactive\n     *\n     * 这三种状态相互独立，可以进行叠加。\n     *\n     * 这三种状态的样式可在 [[Theme]] 主题中或者通过 `geometry.state()` 接口进行配置。\n     *\n     * ```ts\n     * // 激活 active 状态\n     * setState('active', true);\n     * ```\n     *\n     * @param stateName 状态名\n     * @param stateStatus 是否开启状态\n     */\n    Element.prototype.setState = function (stateName, stateStatus) {\n        var _this = this;\n        var _a = this, states = _a.states, shapeFactory = _a.shapeFactory, model = _a.model, shape = _a.shape, shapeType = _a.shapeType;\n        var index = states.indexOf(stateName);\n        if (stateStatus) {\n            // 开启状态\n            if (index > -1) {\n                // 该状态已经开启，则返回\n                return;\n            }\n            states.push(stateName);\n            if (stateName === 'active' || stateName === 'selected') {\n                shape.toFront();\n            }\n        }\n        else {\n            if (index === -1) {\n                // 关闭状态，但是状态未设置过\n                return;\n            }\n            states.splice(index, 1);\n            if (stateName === 'active' || stateName === 'selected') {\n                shape.toBack();\n            }\n        }\n        // 使用虚拟 group 重新绘制 shape，然后对这个 shape 应用状态样式后，更新当前 shape。\n        var offscreenShape = shapeFactory.drawShape(shapeType, model, this.getOffscreenGroup());\n        if (states.length) {\n            // 应用当前状态\n            states.forEach(function (state) {\n                _this.syncShapeStyle(shape, offscreenShape, state, null);\n            });\n        }\n        else {\n            // 如果没有状态，则需要恢复至原始状态\n            this.syncShapeStyle(shape, offscreenShape, 'reset', null);\n        }\n        offscreenShape.remove(true); // 销毁，减少内存占用\n        var eventObject = {\n            state: stateName,\n            stateStatus: stateStatus,\n            element: this,\n            target: this.container,\n        };\n        this.container.emit('statechange', eventObject);\n        //@ts-ignore\n        event_1.propagationDelegate(this.shape, 'statechange', eventObject);\n    };\n    /**\n     * 清空状量态，恢复至初始状态。\n     */\n    Element.prototype.clearStates = function () {\n        var _this = this;\n        var states = this.states;\n        util_1.each(states, function (state) {\n            _this.setState(state, false);\n        });\n        this.states = [];\n    };\n    /**\n     * 查询当前 Element 上是否已设置 `stateName` 对应的状态。\n     * @param stateName 状态名称。\n     * @returns true 表示存在，false 表示不存在。\n     */\n    Element.prototype.hasState = function (stateName) {\n        return this.states.includes(stateName);\n    };\n    /**\n     * 获取当前 Element 上所有的状态。\n     * @returns 当前 Element 上所有的状态数组。\n     */\n    Element.prototype.getStates = function () {\n        return this.states;\n    };\n    /**\n     * 获取 Element 对应的原始数据。\n     * @returns 原始数据。\n     */\n    Element.prototype.getData = function () {\n        return this.data;\n    };\n    /**\n     * 获取 Element 对应的图形绘制数据。\n     * @returns 图形绘制数据。\n     */\n    Element.prototype.getModel = function () {\n        return this.model;\n    };\n    /**\n     * 返回 Element 元素整体的 bbox，包含文本及文本连线（有的话）。\n     * @returns 整体包围盒。\n     */\n    Element.prototype.getBBox = function () {\n        var _a = this, shape = _a.shape, labelShape = _a.labelShape;\n        var bbox = {\n            x: 0,\n            y: 0,\n            minX: 0,\n            minY: 0,\n            maxX: 0,\n            maxY: 0,\n            width: 0,\n            height: 0,\n        };\n        if (shape) {\n            bbox = shape.getCanvasBBox();\n        }\n        if (labelShape) {\n            labelShape.forEach(function (label) {\n                var labelBBox = label.getCanvasBBox();\n                bbox.x = Math.min(labelBBox.x, bbox.x);\n                bbox.y = Math.min(labelBBox.y, bbox.y);\n                bbox.minX = Math.min(labelBBox.minX, bbox.minX);\n                bbox.minY = Math.min(labelBBox.minY, bbox.minY);\n                bbox.maxX = Math.max(labelBBox.maxX, bbox.maxX);\n                bbox.maxY = Math.max(labelBBox.maxY, bbox.maxY);\n            });\n        }\n        bbox.width = bbox.maxX - bbox.minX;\n        bbox.height = bbox.maxY - bbox.minY;\n        return bbox;\n    };\n    Element.prototype.getStatesStyle = function () {\n        if (!this.statesStyle) {\n            var _a = this, shapeType = _a.shapeType, geometry = _a.geometry, shapeFactory = _a.shapeFactory;\n            var stateOption = geometry.stateOption;\n            var defaultShapeType = shapeFactory.defaultShapeType;\n            var stateTheme = shapeFactory.theme[shapeType] || shapeFactory.theme[defaultShapeType];\n            this.statesStyle = util_1.deepMix({}, stateTheme, stateOption);\n        }\n        return this.statesStyle;\n    };\n    // 从主题中获取对应状态量的样式\n    Element.prototype.getStateStyle = function (stateName, shapeKey) {\n        var statesStyle = this.getStatesStyle();\n        var stateCfg = util_1.get(statesStyle, [stateName, 'style'], {});\n        var shapeStyle = stateCfg[shapeKey] || stateCfg;\n        if (util_1.isFunction(shapeStyle)) {\n            return shapeStyle(this);\n        }\n        return shapeStyle;\n    };\n    // 获取动画配置\n    Element.prototype.getAnimateCfg = function (animateType) {\n        var animate = this.animate;\n        if (animate) {\n            return animate[animateType];\n        }\n        return null;\n    };\n    // 绘制图形\n    Element.prototype.drawShape = function (model, isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n        var _a = this, shapeFactory = _a.shapeFactory, container = _a.container, shapeType = _a.shapeType;\n        // 自定义 shape 有可能返回空 shape\n        this.shape = shapeFactory.drawShape(shapeType, model, container);\n        if (this.shape) {\n            this.setShapeInfo(this.shape, model); // 存储绘图数据\n            // @ts-ignore\n            var name_1 = this.shape.cfg.name;\n            // 附加 element 的 name, name 现在支持数组了，很好用了\n            if (!name_1) {\n                // 这个地方如果用户添加了 name, 则附加 name ，否则就添加自己的 name \n                // @ts-ignore\n                this.shape.cfg.name = ['element', this.shapeFactory.geometryType];\n            }\n            else if (util_1.isString(name_1)) {\n                // @ts-ignore\n                this.shape.cfg.name = ['element', name_1];\n            }\n            // 执行入场动画\n            var animateType = isUpdate ? 'enter' : 'appear';\n            var animateCfg = this.getAnimateCfg(animateType);\n            if (animateCfg) {\n                animate_1.doAnimate(this.shape, animateCfg, {\n                    coordinate: shapeFactory.coordinate,\n                    toAttrs: tslib_1.__assign({}, this.shape.attr()),\n                });\n            }\n        }\n    };\n    // 获取虚拟 Group\n    Element.prototype.getOffscreenGroup = function () {\n        if (!this.offscreenGroup) {\n            var GroupCtor = this.container.getGroupBase(); // 获取分组的构造函数\n            this.offscreenGroup = new GroupCtor({});\n        }\n        return this.offscreenGroup;\n    };\n    // 设置 shape 上需要携带的信息\n    Element.prototype.setShapeInfo = function (shape, data) {\n        var _this = this;\n        // @ts-ignore\n        shape.cfg.origin = data;\n        // @ts-ignore\n        shape.cfg.element = this;\n        if (shape.isGroup()) {\n            var children = shape.get('children');\n            children.forEach(function (child) {\n                _this.setShapeInfo(child, data);\n            });\n        }\n    };\n    // 更新当前 shape 的样式\n    Element.prototype.syncShapeStyle = function (sourceShape, targetShape, state, animateCfg, index) {\n        if (state === void 0) { state = ''; }\n        if (index === void 0) { index = 0; }\n        if (sourceShape.isGroup()) {\n            var children = sourceShape.get('children');\n            var newChildren = targetShape.get('children');\n            for (var i = 0; i < children.length; i++) {\n                this.syncShapeStyle(children[i], newChildren[i], state, animateCfg, index + i);\n            }\n        }\n        else {\n            if (state && state !== 'reset') {\n                var name_2 = sourceShape.get('name');\n                if (util_1.isArray(name_2)) { // 会附加 element 的 name\n                    name_2 = name_2[1];\n                }\n                var style = this.getStateStyle(state, name_2 || index); // 如果用户没有设置 name，则默认根据索引值\n                targetShape.attr(style);\n            }\n            var newAttrs = graphics_1.getReplaceAttrs(sourceShape, targetShape);\n            if (this.animate) {\n                if (animateCfg) {\n                    // 需要进行动画\n                    animate_1.doAnimate(sourceShape, animateCfg, {\n                        coordinate: this.shapeFactory.coordinate,\n                        toAttrs: newAttrs,\n                        shapeModel: this.model,\n                    });\n                }\n                else if (state) {\n                    sourceShape.stopAnimate();\n                    sourceShape.animate(newAttrs, {\n                        duration: 300,\n                    });\n                }\n                else {\n                    sourceShape.attr(newAttrs);\n                }\n            }\n            else {\n                sourceShape.attr(newAttrs);\n            }\n        }\n    };\n    Element.prototype.getShapeType = function (model) {\n        var shape = util_1.get(model, 'shape');\n        return util_1.isArray(shape) ? shape[0] : shape;\n    };\n    return Element;\n}(base_1.default));\nexports.default = Element;\n//# sourceMappingURL=index.js.map","var GEOMETRY_LABELS_MAP = {};\nvar GEOMETRY_LABELS_LAYOUT_MAP = {};\n/**\n * 获取 `type` 对应的 [[GeometryLabel]] 类\n * @param type\n * @returns\n */\nexport function getGeometryLabel(type) {\n    return GEOMETRY_LABELS_MAP[type.toLowerCase()];\n}\n/**\n * 注册定义的 GeometryLabel 类\n * @param type GeometryLabel 类型名称\n * @param ctor GeometryLabel 类\n */\nexport function registerGeometryLabel(type, ctor) {\n    GEOMETRY_LABELS_MAP[type.toLowerCase()] = ctor;\n}\n/**\n * 获取 `type` 对应的 [[GeometryLabelsLayoutFn]] label 布局函数\n * @param type 布局函数名称\n * @returns\n */\nexport function getGeometryLabelLayout(type) {\n    return GEOMETRY_LABELS_LAYOUT_MAP[type.toLowerCase()];\n}\n/**\n * 注册定义的 label 布局函数\n * @param type label 布局函数名称\n * @param layoutFn label 布局函数\n */\nexport function registerGeometryLabelLayout(type, layoutFn) {\n    GEOMETRY_LABELS_LAYOUT_MAP[type.toLowerCase()] = layoutFn;\n}\n//# sourceMappingURL=index.js.map","import { __assign } from \"tslib\";\nimport { parsePathString } from '@antv/path-util';\nimport { deepMix, get, upperFirst } from '@antv/util';\nimport { convertNormalPath, convertPolarPath } from './util/path';\n/** ShapeFactory 基类 */\nvar ShapeFactoryBase = {\n    /** 坐标系对象 */\n    coordinate: null,\n    /** 默认绘制的 Shape 类型 */\n    defaultShapeType: null,\n    /** 主题样式 */\n    theme: null,\n    /**\n     * 获取 shape 绘制需要的关键点\n     * @param shapeType shape 类型\n     * @param shapePoint 每条数据映射后的坐标点以及 size 数值\n     * @returns 图形关键点信息\n     */\n    getShapePoints: function (shapeType, shapePoint) {\n        var shape = this.getShape(shapeType);\n        if (shape.getPoints) {\n            return shape.getPoints(shapePoint);\n        }\n        return this.getDefaultPoints(shapePoint);\n    },\n    /**\n     * 根据 shape 类型获取具体的 shape 实例\n     * @param shapeType string shape 的类型\n     * @returns\n     */\n    getShape: function (shapeType) {\n        var shape = this[shapeType] || this[this.defaultShapeType];\n        shape.coordinate = this.coordinate;\n        return shape;\n    },\n    /**\n     * 获取 shape 的默认关键点\n     * @override\n     */\n    getDefaultPoints: function () {\n        return [];\n    },\n    /**\n     * 获取 shape 对应的缩略图配置信息。\n     * @param shapeType shape 类型\n     * @param color 颜色\n     * @param isInPolar 是否在极坐标系下\n     * @returns 返回缩略图 marker 配置。\n     */\n    getMarker: function (shapeType, markerCfg) {\n        var shape = this.getShape(shapeType);\n        if (!shape.getMarker) {\n            var defaultShapeType = this.defaultShapeType;\n            shape = this.getShape(defaultShapeType);\n        }\n        var theme = this.theme;\n        var shapeStyle = get(theme, [shapeType, 'default'], {});\n        var markerStyle = shape.getMarker(markerCfg);\n        return deepMix({}, shapeStyle, markerStyle);\n    },\n    /**\n     * 绘制 shape\n     * @override\n     * @param shapeType 绘制的 shape 类型\n     * @param cfg 绘制 shape 需要的信息\n     * @param element Element 实例\n     * @returns\n     */\n    drawShape: function (shapeType, cfg, container) {\n        var shape = this.getShape(shapeType);\n        return shape.draw(cfg, container);\n    },\n};\n/** Shape 基类 */\nvar ShapeBase = {\n    /** 坐标系对象 */\n    coordinate: null,\n    /**\n     * 将归一化的 path 转换成坐标系下的 path\n     * @param path 归一化的路径\n     * @returns\n     */\n    parsePath: function (path) {\n        var coordinate = this.coordinate;\n        var parsedPath = parsePathString(path);\n        if (coordinate.isPolar) {\n            parsedPath = convertPolarPath(coordinate, parsedPath);\n        }\n        else {\n            parsedPath = convertNormalPath(coordinate, parsedPath);\n        }\n        return parsedPath;\n    },\n    /**\n     * 将归一化的坐标转换成画布坐标\n     * @param point 归一化的坐标点数据\n     * @returns\n     */\n    parsePoint: function (point) {\n        var coordinate = this.coordinate;\n        return coordinate.convert(point);\n    },\n    /**\n     * 0～1 points 转 画布 points\n     * @param points 节点集合\n     * @returns\n     */\n    parsePoints: function (points) {\n        var coordinate = this.coordinate;\n        return points.map(function (point) {\n            return coordinate.convert(point);\n        });\n    },\n    /**\n     * 绘制 shape\n     * @override\n     */\n    draw: function (cfg, container) { },\n};\nvar ShapeFactoryMap = {};\n/**\n * 注册 ShapeFactory。\n * @param factoryName  ShapeFactory 名称，对应 Geometry 几何标记名称。\n * @param cfg 注册 ShapeFactory 需要覆写定义的属性。\n * @returns 返回 ShapeFactory 对象。\n */\nexport function registerShapeFactory(factoryName, cfg) {\n    var className = upperFirst(factoryName);\n    var geomObj = __assign(__assign(__assign({}, ShapeFactoryBase), cfg), { geometryType: factoryName });\n    ShapeFactoryMap[className] = geomObj;\n    return geomObj;\n}\n/**\n * 注册 Shape。\n * @param factoryName 对应的 ShapeFactory 名称。\n * @param shapeType 注册的 shape 名称。\n * @param cfg 注册 Shape 需要覆写定义的属性。\n * @returns shape 返回注册的 shape 对象。\n */\nexport function registerShape(factoryName, shapeType, cfg) {\n    var className = upperFirst(factoryName);\n    var factory = ShapeFactoryMap[className];\n    var shapeObj = __assign(__assign({}, ShapeBase), cfg);\n    factory[shapeType] = shapeObj;\n    return shapeObj;\n}\n/**\n * 获取 factoryName 对应的 shapeFactory\n * @param factoryName\n * @returns shape factory\n */\nexport function getShapeFactory(factoryName) {\n    var className = upperFirst(factoryName);\n    return ShapeFactoryMap[className];\n}\n//# sourceMappingURL=base.js.map","import { isEqual, some } from '@antv/util';\n/**\n * @ignore\n * Determines whether model is change\n * @param currentModel\n * @param preModel\n * @returns\n */\nexport function isModelChange(currentModel, preModel) {\n    return some([\n        'color',\n        'shape',\n        'size',\n        'x',\n        'y',\n        'isInCircle',\n        'data',\n        'style',\n        'defaultStyle',\n        'points',\n        'mappingData',\n    ], function (key) {\n        return !isEqual(currentModel[key], preModel[key]);\n    });\n}\n//# sourceMappingURL=is-model-change.js.map","import { isArray } from '@antv/util';\n/** @ignore */\nexport function parseFields(field) {\n    if (isArray(field)) {\n        return field;\n    }\n    return field.split('*');\n}\n//# sourceMappingURL=parse-fields.js.map","import { __assign, __extends } from \"tslib\";\nimport { getAdjust as getAdjustClass } from '@antv/adjust';\nimport { getAttribute as getAttributeClass } from '@antv/attr';\nimport { clone, deepMix, each, flatten, get, isArray, isEmpty, isEqual, isFunction, isNil, isNumber, isObject, isPlainObject, isString, set, } from '@antv/util';\nimport { doGroupAppearAnimate, getDefaultAnimateCfg } from '../animate';\nimport Base from '../base';\nimport { FIELD_ORIGIN, GROUP_ATTRS } from '../constant';\nimport { uniq } from '../util/helper';\nimport Element from './element';\nimport { getGeometryLabel } from './label';\nimport { getShapeFactory } from './shape/base';\nimport { group } from './util/group-data';\nimport { isModelChange } from './util/is-model-change';\nimport { parseFields } from './util/parse-fields';\n// 根据 elementId 查找对应的 label，因为有可能一个 element 对应多个 labels，所以在给 labels 打标识时做了处理\n// 打标规则详见 ./label/base.ts#L263\nfunction filterLabelsById(id, labelsMap) {\n    var labels = [];\n    each(labelsMap, function (label, labelId) {\n        var elementId = labelId.split(' ')[0];\n        if (elementId === id) {\n            labels.push(label);\n        }\n    });\n    return labels;\n}\n/**\n * Geometry 几何标记基类，主要负责数据到图形属性的映射以及绘制逻辑。\n */\nvar Geometry = /** @class */ (function (_super) {\n    __extends(Geometry, _super);\n    /**\n     * 创建 Geometry 实例。\n     * @param cfg\n     */\n    function Geometry(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        /** Geometry 几何标记类型。 */\n        _this.type = 'base';\n        // 内部产生的属性\n        /** Attribute map  */\n        _this.attributes = {};\n        /** Element map */\n        _this.elements = [];\n        /** 使用 key-value 结构存储 Element，key 为每个 Element 实例对应的唯一 ID */\n        _this.elementsMap = {};\n        /** animate 配置项 */\n        _this.animateOption = true;\n        /** 图形属性映射配置 */\n        _this.attributeOption = {};\n        /** 存储上一次渲染时的 element 映射表，用于更新逻辑 */\n        _this.lastElementsMap = {};\n        /** 是否生成多个点来绘制图形。 */\n        _this.generatePoints = false;\n        /** 存储发生图形属性映射前的数据 */\n        _this.beforeMappingData = null;\n        _this.adjusts = {};\n        _this.idFields = [];\n        _this.hasSorted = false;\n        var container = cfg.container, labelsContainer = cfg.labelsContainer, coordinate = cfg.coordinate, data = cfg.data, _a = cfg.sortable, sortable = _a === void 0 ? false : _a, _b = cfg.visible, visible = _b === void 0 ? true : _b, theme = cfg.theme, _c = cfg.scales, scales = _c === void 0 ? {} : _c, _d = cfg.scaleDefs, scaleDefs = _d === void 0 ? {} : _d;\n        _this.container = container;\n        _this.labelsContainer = labelsContainer;\n        _this.coordinate = coordinate;\n        _this.data = data;\n        _this.sortable = sortable;\n        _this.visible = visible;\n        _this.userTheme = theme;\n        _this.scales = scales;\n        _this.scaleDefs = scaleDefs;\n        return _this;\n    }\n    /**\n     * 配置 position 通道映射规则。\n     *\n     * @example\n     * ```typescript\n     * // 数据结构: [{ x: 'A', y: 10, color: 'red' }]\n     * geometry.position('x*y');\n     * geometry.position([ 'x', 'y' ]);\n     * geometry.position({\n     *   fields: [ 'x', 'y' ],\n     * });\n     * ```\n     *\n     * @param cfg 映射规则\n     * @returns\n     */\n    Geometry.prototype.position = function (cfg) {\n        var positionCfg = cfg;\n        if (!isPlainObject(cfg)) {\n            // 字符串字段或者数组字段\n            positionCfg = {\n                fields: parseFields(cfg),\n            };\n        }\n        var fields = get(positionCfg, 'fields');\n        if (fields.length === 1) {\n            // 默认填充一维 1*xx\n            fields.unshift('1');\n            set(positionCfg, 'fields', fields);\n        }\n        set(this.attributeOption, 'position', positionCfg);\n        return this;\n    };\n    Geometry.prototype.color = function (field, cfg) {\n        this.createAttrOption('color', field, cfg);\n        return this;\n    };\n    Geometry.prototype.shape = function (field, cfg) {\n        this.createAttrOption('shape', field, cfg);\n        return this;\n    };\n    Geometry.prototype.size = function (field, cfg) {\n        this.createAttrOption('size', field, cfg);\n        return this;\n    };\n    /**\n     * 设置数据调整方式。G2 目前内置了四种类型：\n     * 1. dodge\n     * 2. stack\n     * 3. symmetric\n     * 4. jitter\n     *\n     *\n     * **Tip**\n     * + 对于 'dodge' 类型，可以额外进行如下属性的配置:\n     * ```typescript\n     * geometry.adjust('dodge', {\n     *   marginRatio: 0, // 取 0 到 1 范围的值（相对于每个柱子宽度），用于控制一个分组中柱子之间的间距\n     *   dodgeBy: 'x', // 该属性只对 'dodge' 类型生效，声明以哪个数据字段为分组依据\n     * });\n     * ```\n     *\n     * + 对于 'stack' 类型，可以额外进行如下属性的配置:\n     * ```typescript\n     * geometry.adjust('stack', {\n     *   reverseOrder: false, // 用于控制是否对数据进行反序操作\n     * });\n     * ```\n     *\n     * @example\n     * ```typescript\n     * geometry.adjust('stack');\n     *\n     * geometry.adjust({\n     *   type: 'stack',\n     *   reverseOrder: false,\n     * });\n     *\n     * // 组合使用 adjust\n     * geometry.adjust([ 'stack', 'dodge' ]);\n     *\n     * geometry.adjust([\n     *   { type: 'stack' },\n     *   { type: 'dodge', dodgeBy: 'x' },\n     * ]);\n     * ```\n     *\n     * @param adjustCfg 数据调整配置\n     * @returns\n     */\n    Geometry.prototype.adjust = function (adjustCfg) {\n        var adjusts = adjustCfg;\n        if (isString(adjustCfg) || isPlainObject(adjustCfg)) {\n            adjusts = [adjustCfg];\n        }\n        each(adjusts, function (adjust, index) {\n            if (!isObject(adjust)) {\n                adjusts[index] = { type: adjust };\n            }\n        });\n        this.adjustOption = adjusts;\n        return this;\n    };\n    Geometry.prototype.style = function (field, styleFunc) {\n        if (isString(field)) {\n            var fields = parseFields(field);\n            this.styleOption = {\n                fields: fields,\n                callback: styleFunc,\n            };\n        }\n        else {\n            var _a = field, fields = _a.fields, callback = _a.callback, cfg = _a.cfg;\n            if (fields || callback || cfg) {\n                this.styleOption = field;\n            }\n            else {\n                this.styleOption = {\n                    cfg: field,\n                };\n            }\n        }\n        return this;\n    };\n    Geometry.prototype.tooltip = function (field, cfg) {\n        if (isString(field)) {\n            var fields = parseFields(field);\n            this.tooltipOption = {\n                fields: fields,\n                callback: cfg,\n            };\n        }\n        else {\n            this.tooltipOption = field;\n        }\n        return this;\n    };\n    /**\n     * Geometry 动画配置。\n     *\n     * + `animate(false)` 关闭动画\n     * + `animate(true)` 开启动画，默认开启。\n     *\n     * 我们将动画分为四个场景：\n     * 1. appear: 图表第一次加载时的入场动画；\n     * 2. enter: 图表绘制完成，发生更新后，产生的新图形的进场动画；\n     * 3. update: 图表绘制完成，数据发生变更后，有状态变更的图形的更新动画；\n     * 4. leave: 图表绘制完成，数据发生变更后，被销毁图形的销毁动画。\n     *\n     * @example\n     * ```typescript\n     * animate({\n     *   enter: {\n     *     duration: 1000, // enter 动画执行时间\n     *   },\n     *   leave: false, // 关闭 leave 销毁动画\n     * });\n     * ```\n     *\n     * @param cfg 动画配置\n     * @returns\n     */\n    Geometry.prototype.animate = function (cfg) {\n        this.animateOption = cfg;\n        return this;\n    };\n    Geometry.prototype.label = function (field, secondParam, thirdParam) {\n        if (isString(field)) {\n            var labelOption = {};\n            var fields = parseFields(field);\n            labelOption.fields = fields;\n            if (isFunction(secondParam)) {\n                labelOption.callback = secondParam;\n            }\n            else if (isPlainObject(secondParam)) {\n                labelOption.cfg = secondParam;\n            }\n            if (thirdParam) {\n                labelOption.cfg = thirdParam;\n            }\n            this.labelOption = labelOption;\n        }\n        else {\n            this.labelOption = field;\n        }\n        return this;\n    };\n    /**\n     * 设置状态对应的样式。\n     *\n     * @example\n     * ```ts\n     * chart.interval().state({\n     *   selected: {\n     *     animate: { duration: 100, easing: 'easeLinear' },\n     *     style: {\n     *       lineWidth: 2,\n     *       stroke: '#000',\n     *     },\n     *   },\n     * });\n     * ```\n     *\n     * 如果图形 shape 是由多个 shape 组成，即为一个 G.Group 对象，那么针对 group 中的每个 shape，我们需要使用下列方式进行状态样式设置：\n     * 如果我们为 group 中的每个 shape 设置了 'name' 属性(shape.set('name', 'xx'))，则以 'name' 作为 key，否则默认以索引值（即 shape 的 添加顺序）为 key。\n     *\n     * ```ts\n     * chart.interval().shape('groupShape').state({\n     *   selected: {\n     *     style: {\n     *       0: { lineWidth: 2 },\n     *       1: { fillOpacity: 1 },\n     *     }\n     *   }\n     * });\n     * ```\n     *\n     * @param cfg 状态样式\n     */\n    Geometry.prototype.state = function (cfg) {\n        this.stateOption = cfg;\n        return this;\n    };\n    /**\n     * 初始化 Geomtry 实例：\n     * 创建 [[Attribute]] and [[Scale]] 实例，进行数据处理，包括分组、数值化以及数据调整。\n     */\n    Geometry.prototype.init = function (cfg) {\n        if (cfg === void 0) { cfg = {}; }\n        this.setCfg(cfg);\n        this.initAttributes(); // 创建图形属性\n        // 数据加工：分组 -> 数字化 -> adjust\n        this.processData(this.data);\n        // 调整 scale\n        this.adjustScale();\n    };\n    /**\n     * Geometry 更新。\n     * @param [cfg] 更新的配置\n     */\n    Geometry.prototype.update = function (cfg) {\n        if (cfg === void 0) { cfg = {}; }\n        var data = cfg.data, isDataChanged = cfg.isDataChanged;\n        var _a = this, attributeOption = _a.attributeOption, lastAttributeOption = _a.lastAttributeOption;\n        if (!isEqual(attributeOption, lastAttributeOption)) {\n            // 映射发生改变，则重新创建图形属性\n            this.init(cfg);\n        }\n        else if (data && (isDataChanged || !isEqual(data, this.data))) {\n            // 数据发生变化\n            this.setCfg(cfg);\n            this.processData(data); // 数据加工：分组 -> 数字化 -> adjust\n        }\n        else {\n            // 有可能 coordinate 变化\n            this.setCfg(cfg);\n        }\n        // 调整 scale\n        this.adjustScale();\n    };\n    /**\n     * 将原始数据映射至图形空间，同时创建图形对象。\n     */\n    Geometry.prototype.paint = function (isUpdate) {\n        var _this = this;\n        if (isUpdate === void 0) { isUpdate = false; }\n        if (this.animateOption) {\n            this.animateOption = deepMix({}, getDefaultAnimateCfg(this.type, this.coordinate), this.animateOption);\n        }\n        this.defaultSize = undefined;\n        this.elements = [];\n        this.elementsMap = {};\n        var offscreenGroup = this.getOffscreenGroup();\n        offscreenGroup.clear();\n        var beforeMappingData = this.beforeMappingData;\n        var dataArray = this.beforeMapping(beforeMappingData);\n        var mappingArray = [];\n        for (var index = 0, length_1 = dataArray.length; index < length_1; index++) {\n            var eachGroup = dataArray[index];\n            var mappingData = this.mapping(eachGroup);\n            mappingArray.push(mappingData);\n            this.createElements(mappingData, index, isUpdate);\n        }\n        if (this.canDoGroupAnimation(isUpdate)) {\n            // 如果用户没有配置 appear.animation，就默认走整体动画\n            var container = this.container;\n            var type = this.type;\n            var coordinate = this.coordinate;\n            var animateCfg = get(this.animateOption, 'appear');\n            var yScale = this.getYScale();\n            var yMinPoint = coordinate.convert({\n                x: 0,\n                y: yScale.scale(this.getYMinValue()),\n            });\n            doGroupAppearAnimate(container, animateCfg, type, coordinate, yMinPoint);\n        }\n        // 添加 label\n        if (this.labelOption) {\n            this.renderLabels(flatten(mappingArray), isUpdate);\n        }\n        this.dataArray = mappingArray;\n        // 销毁被删除的 elements\n        each(this.lastElementsMap, function (deletedElement) {\n            // 更新动画配置，用户有可能在更新之前有对动画进行配置操作\n            deletedElement.animate = _this.animateOption;\n            deletedElement.destroy();\n        });\n        this.lastElementsMap = this.elementsMap;\n        // 缓存，用于更新\n        this.lastAttributeOption = __assign({}, this.attributeOption);\n        if (this.visible === false) {\n            // 用户在初始化的时候声明 visible: false\n            this.changeVisible(false);\n        }\n    };\n    /**\n     * 清空当前 Geometry，配置项仍保留，但是内部创建的对象全部清空。\n     * @override\n     */\n    Geometry.prototype.clear = function () {\n        var _a = this, container = _a.container, geometryLabel = _a.geometryLabel, offscreenGroup = _a.offscreenGroup;\n        if (container) {\n            container.clear();\n        }\n        if (geometryLabel) {\n            geometryLabel.clear();\n        }\n        if (offscreenGroup) {\n            offscreenGroup.clear();\n        }\n        // 属性恢复至出厂状态\n        this.scaleDefs = undefined;\n        this.attributes = {};\n        this.scales = {};\n        this.elementsMap = {};\n        this.lastElementsMap = {};\n        this.elements = [];\n        this.adjusts = {};\n        this.dataArray = null;\n        this.beforeMappingData = null;\n        this.lastAttributeOption = undefined;\n        this.defaultSize = undefined;\n        this.idFields = [];\n        this.groupScales = undefined;\n        this.hasSorted = false;\n    };\n    /**\n     * 销毁 Geometry 实例。\n     */\n    Geometry.prototype.destroy = function () {\n        this.clear();\n        var container = this.container;\n        container.remove(true);\n        if (this.offscreenGroup) {\n            this.offscreenGroup.remove(true);\n            this.offscreenGroup = null;\n        }\n        if (this.geometryLabel) {\n            this.geometryLabel.destroy();\n            this.geometryLabel = null;\n        }\n        this.theme = undefined;\n        this.shapeFactory = undefined;\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * 获取决定分组的图形属性对应的 scale 实例。\n     * @returns\n     */\n    Geometry.prototype.getGroupScales = function () {\n        return this.groupScales;\n    };\n    /**\n     * 根据名字获取图形属性实例。\n     */\n    Geometry.prototype.getAttribute = function (name) {\n        return this.attributes[name];\n    };\n    /** 获取 x 轴对应的 scale 实例。 */\n    Geometry.prototype.getXScale = function () {\n        return this.getAttribute('position').scales[0];\n    };\n    /** 获取 y 轴对应的 scale 实例。 */\n    Geometry.prototype.getYScale = function () {\n        return this.getAttribute('position').scales[1];\n    };\n    /**\n     * 获取决定分组的图形属性实例。\n     */\n    Geometry.prototype.getGroupAttributes = function () {\n        var rst = [];\n        each(this.attributes, function (attr) {\n            if (GROUP_ATTRS.includes(attr.type)) {\n                rst.push(attr);\n            }\n        });\n        return rst;\n    };\n    /** 获取图形属性默认的映射值。 */\n    Geometry.prototype.getDefaultValue = function (attrName) {\n        var value;\n        var attr = this.getAttribute(attrName);\n        if (attr && isEmpty(attr.scales)) {\n            // 获取映射至常量的值\n            value = attr.values[0];\n        }\n        return value;\n    };\n    /**\n     * 获取该数据发生图形映射后对应的 Attribute 图形空间数据。\n     * @param attr Attribute 图形属性实例。\n     * @param obj 需要进行映射的原始数据。\n     * @returns\n     */\n    Geometry.prototype.getAttributeValues = function (attr, obj) {\n        var params = [];\n        var scales = attr.scales;\n        for (var index = 0, length_2 = scales.length; index < length_2; index++) {\n            var scale = scales[index];\n            var field = scale.field;\n            if (scale.isIdentity) {\n                params.push(scale.values);\n            }\n            else {\n                params.push(obj[field]);\n            }\n        }\n        return attr.mapping.apply(attr, params);\n    };\n    Geometry.prototype.getAdjust = function (adjustType) {\n        return this.adjusts[adjustType];\n    };\n    /**\n     * 获取 shape 对应的 marker 样式。\n     * @param shapeName shape 具体名字\n     * @param cfg marker 信息\n     * @returns\n     */\n    Geometry.prototype.getShapeMarker = function (shapeName, cfg) {\n        var shapeFactory = this.getShapeFactory();\n        return shapeFactory.getMarker(shapeName, cfg);\n    };\n    /**\n     * 根据一定的规则查找 Geometry 的 Elements。\n     *\n     * ```typescript\n     * getElementsBy((element) => {\n     *   const data = element.getData();\n     *\n     *   return data.a === 'a';\n     * });\n     * ```\n     *\n     * @param condition 定义查找规则的回调函数。\n     * @returns\n     */\n    Geometry.prototype.getElementsBy = function (condition) {\n        return this.elements.filter(function (element) {\n            return condition(element);\n        });\n    };\n    /**\n     * 获取数据对应的唯一 id。\n     * @param data Element 对应的绘制数据\n     * @returns\n     */\n    Geometry.prototype.getElementId = function (data) {\n        data = isArray(data) ? data[0] : data;\n        var originData = data[FIELD_ORIGIN];\n        // 如果用户声明了使用哪些字段作为 id 值\n        if (this.idFields.length) {\n            var elementId = originData[this.idFields[0]];\n            for (var index = 1; index < this.idFields.length; index++) {\n                elementId += '-' + originData[this.idFields[index]];\n            }\n            return elementId;\n        }\n        var type = this.type;\n        var xScale = this.getXScale();\n        var yScale = this.getYScale();\n        var xField = xScale.field || 'x';\n        var yField = yScale.field || 'y';\n        var yVal = originData[yField];\n        var xVal;\n        if (xScale.type === 'identity') {\n            xVal = xScale.values[0];\n        }\n        else {\n            xVal = originData[xField];\n        }\n        var id;\n        if (type === 'interval' || type === 'schema') {\n            id = xVal;\n        }\n        else if (type === 'line' || type === 'area' || type === 'path') {\n            id = type;\n        }\n        else {\n            id = xVal + \"-\" + yVal;\n        }\n        var groupScales = this.groupScales;\n        for (var index = 0, length_3 = groupScales.length; index < length_3; index++) {\n            var groupScale = groupScales[index];\n            var field = groupScale.field;\n            id = id + \"-\" + originData[field];\n        }\n        // 用户在进行 dodge 类型的 adjust 调整的时候设置了 dodgeBy 属性\n        var dodgeAdjust = this.getAdjust('dodge');\n        if (dodgeAdjust) {\n            var dodgeBy = dodgeAdjust.dodgeBy;\n            if (dodgeBy) {\n                id = id + \"-\" + originData[dodgeBy];\n            }\n        }\n        if (this.getAdjust('jitter')) {\n            id = id + \"-\" + data.x + \"-\" + data.y;\n        }\n        return id;\n    };\n    /**\n     * 获取所有需要创建 scale 的字段名称。\n     */\n    Geometry.prototype.getScaleFields = function () {\n        var fields = [];\n        var tmpMap = {};\n        var _a = this, attributeOption = _a.attributeOption, labelOption = _a.labelOption, tooltipOption = _a.tooltipOption;\n        // 获取图形属性上的 fields\n        for (var attributeType in attributeOption) {\n            if (attributeOption.hasOwnProperty(attributeType)) {\n                var eachOpt = attributeOption[attributeType];\n                if (eachOpt.fields) {\n                    uniq(eachOpt.fields, fields, tmpMap);\n                }\n                else if (eachOpt.values) {\n                    // 考虑 size(10), shape('circle') 等场景\n                    uniq(eachOpt.values, fields, tmpMap);\n                }\n            }\n        }\n        // 获取 label 上的字段\n        if (labelOption && labelOption.fields) {\n            uniq(labelOption.fields, fields, tmpMap);\n        }\n        // 获取 tooltip 上的字段\n        if (isObject(tooltipOption) && tooltipOption.fields) {\n            uniq(tooltipOption.fields, fields, tmpMap);\n        }\n        return fields;\n    };\n    /**\n     * 显示或者隐藏 geometry。\n     * @param visible\n     */\n    Geometry.prototype.changeVisible = function (visible) {\n        _super.prototype.changeVisible.call(this, visible);\n        var elements = this.elements;\n        for (var index = 0, length_4 = elements.length; index < length_4; index++) {\n            var element = elements[index];\n            element.changeVisible(visible);\n        }\n        if (visible) {\n            if (this.container) {\n                this.container.show();\n            }\n            if (this.labelsContainer) {\n                this.labelsContainer.show();\n            }\n        }\n        else {\n            if (this.container) {\n                this.container.hide();\n            }\n            if (this.labelsContainer) {\n                this.labelsContainer.hide();\n            }\n        }\n    };\n    /**\n     * 获取当前配置中的所有分组 & 分类的字段。\n     * @return fields string[]\n     */\n    Geometry.prototype.getGroupFields = function () {\n        var groupFields = [];\n        var tmpMap = {}; // 用于去重过滤\n        for (var index = 0, length_5 = GROUP_ATTRS.length; index < length_5; index++) {\n            var attributeName = GROUP_ATTRS[index];\n            var cfg = this.attributeOption[attributeName];\n            if (cfg && cfg.fields) {\n                uniq(cfg.fields, groupFields, tmpMap);\n            }\n        }\n        return groupFields;\n    };\n    /**\n     * 获得图形的 x y 字段。\n     */\n    Geometry.prototype.getXYFields = function () {\n        var _a = this.attributeOption.position.fields, x = _a[0], y = _a[1];\n        return [x, y];\n    };\n    /**\n     * 获取该 Geometry 下所有生成的 shapes。\n     * @returns shapes\n     */\n    Geometry.prototype.getShapes = function () {\n        return this.elements.map(function (element) { return element.shape; });\n    };\n    /**\n     * 获取虚拟 Group。\n     * @returns\n     */\n    Geometry.prototype.getOffscreenGroup = function () {\n        if (!this.offscreenGroup) {\n            var GroupCtor = this.container.getGroupBase(); // 获取分组的构造函数\n            this.offscreenGroup = new GroupCtor({});\n        }\n        return this.offscreenGroup;\n    };\n    // 对数据进行排序\n    Geometry.prototype.sort = function (mappingArray) {\n        if (!this.hasSorted) {\n            // 未发生过排序\n            var xScale_1 = this.getXScale();\n            var xField_1 = xScale_1.field;\n            for (var index = 0; index < mappingArray.length; index++) {\n                var itemArr = mappingArray[index];\n                itemArr.sort(function (obj1, obj2) {\n                    return xScale_1.translate(obj1[FIELD_ORIGIN][xField_1]) - xScale_1.translate(obj2[FIELD_ORIGIN][xField_1]);\n                });\n            }\n            ;\n        }\n        this.hasSorted = true;\n    };\n    /**\n     * 调整度量范围。主要针对发生层叠以及一些特殊需求的 Geometry，比如 Interval 下的柱状图 Y 轴默认从 0 开始。\n     */\n    Geometry.prototype.adjustScale = function () {\n        var yScale = this.getYScale();\n        // 如果数据发生过 stack adjust，需要调整下 yScale 的数据范围\n        if (yScale && this.getAdjust('stack')) {\n            this.updateStackRange(yScale, this.beforeMappingData);\n        }\n    };\n    /**\n     * 获取当前 Geometry 对应的 Shape 工厂实例。\n     */\n    Geometry.prototype.getShapeFactory = function () {\n        var shapeType = this.shapeType;\n        if (!getShapeFactory(shapeType)) {\n            return;\n        }\n        if (!this.shapeFactory) {\n            this.shapeFactory = clone(getShapeFactory(shapeType)); // 防止多个 view 共享一个 shapeFactory 实例，导致 coordinate 被篡改\n        }\n        // 因为这里缓存了 shapeFactory，但是外部可能会变更 coordinate，导致无法重新设置到 shapeFactory 中\n        this.shapeFactory.coordinate = this.coordinate;\n        // theme 原因同上\n        this.shapeFactory.theme = this.theme.geometries[shapeType] || {};\n        return this.shapeFactory;\n    };\n    /**\n     * 获取每个 Shape 对应的关键点数据。\n     * @param obj 经过分组 -> 数字化 -> adjust 调整后的数据记录\n     * @returns\n     */\n    Geometry.prototype.createShapePointsCfg = function (obj) {\n        var xScale = this.getXScale();\n        var yScale = this.getYScale();\n        var x = this.normalizeValues(obj[xScale.field], xScale);\n        var y; // 存在没有 y 的情况\n        if (yScale) {\n            y = this.normalizeValues(obj[yScale.field], yScale);\n        }\n        else {\n            y = obj.y ? obj.y : 0.1;\n        }\n        return {\n            x: x,\n            y: y,\n            y0: yScale ? yScale.scale(this.getYMinValue()) : undefined,\n        };\n    };\n    /**\n     * 创建 Element 实例。\n     * @param mappingDatum Element 对应的绘制数据\n     * @param [isUpdate] 是否处于更新阶段\n     * @returns element 返回创建的 Element 实例\n     */\n    Geometry.prototype.createElement = function (mappingDatum, isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n        var container = this.container;\n        var shapeCfg = this.getDrawCfg(mappingDatum); // 获取绘制图形的配置信息\n        var shapeFactory = this.getShapeFactory();\n        var element = new Element({\n            shapeFactory: shapeFactory,\n            container: container,\n            offscreenGroup: this.getOffscreenGroup(),\n        });\n        element.animate = this.animateOption;\n        element.geometry = this;\n        element.draw(shapeCfg, isUpdate); // 绘制\n        return element;\n    };\n    /**\n     * 获取每条数据对应的图形绘制数据。\n     * @param mappingDatum 映射后的数据\n     * @returns draw cfg\n     */\n    Geometry.prototype.getDrawCfg = function (mappingDatum) {\n        var originData = mappingDatum[FIELD_ORIGIN]; // 原始数据\n        var cfg = {\n            mappingData: mappingDatum,\n            data: originData,\n            x: mappingDatum.x,\n            y: mappingDatum.y,\n            color: mappingDatum.color,\n            size: mappingDatum.size,\n            isInCircle: this.coordinate.isPolar,\n        };\n        var shapeName = mappingDatum.shape;\n        if (!shapeName && this.getShapeFactory()) {\n            shapeName = this.getShapeFactory().defaultShapeType;\n        }\n        cfg.shape = shapeName;\n        // 获取默认样式\n        var theme = this.theme.geometries[this.shapeType];\n        cfg.defaultStyle = get(theme, [shapeName, 'default'], {}).style;\n        var styleOption = this.styleOption;\n        if (styleOption) {\n            cfg.style = this.getStyleCfg(styleOption, originData);\n        }\n        if (this.generatePoints) {\n            cfg.points = mappingDatum.points;\n            cfg.nextPoints = mappingDatum.nextPoints;\n        }\n        return cfg;\n    };\n    /**\n     * 创建所有的 Elements。\n     * @param mappingData\n     * @param [isUpdate]\n     * @returns elements\n     */\n    Geometry.prototype.createElements = function (mappingData, index, isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n        var _a = this, lastElementsMap = _a.lastElementsMap, elementsMap = _a.elementsMap, elements = _a.elements;\n        for (var subIndex = 0, length_6 = mappingData.length; subIndex < length_6; subIndex++) {\n            var mappingDatum = mappingData[subIndex];\n            var id = this.getElementId(mappingDatum);\n            if (elementsMap[id]) {\n                // 存在重复数据，则根据再根据 index 进行区分\n                id = id + \"-\" + index + \"-\" + subIndex;\n            }\n            var result = lastElementsMap[id];\n            if (!result) {\n                // 创建新的 element\n                result = this.createElement(mappingDatum, isUpdate);\n            }\n            else {\n                // element 已经创建\n                var currentShapeCfg = this.getDrawCfg(mappingDatum);\n                var preShapeCfg = result.getModel();\n                if (isModelChange(currentShapeCfg, preShapeCfg)) {\n                    result.animate = this.animateOption;\n                    // 通过绘制数据的变更来判断是否需要更新，因为用户有可能会修改图形属性映射\n                    result.update(currentShapeCfg); // 更新对应的 element\n                }\n                delete lastElementsMap[id];\n            }\n            elements.push(result);\n            elementsMap[id] = result;\n        }\n        return elements;\n    };\n    /**\n     * 获取渲染的 label 类型。\n     */\n    Geometry.prototype.getLabelType = function () {\n        var _a = this, labelOption = _a.labelOption, coordinate = _a.coordinate, type = _a.type;\n        var coordinateType = coordinate.type;\n        var labelType = get(labelOption, ['cfg', 'type']);\n        if (!labelType) {\n            // 用户未定义，则进行默认的逻辑\n            if (coordinateType === 'polar') {\n                // 极坐标下使用通用的极坐标文本\n                labelType = 'polar';\n            }\n            else if (coordinateType === 'theta') {\n                // theta 坐标系下使用饼图文本\n                labelType = 'pie';\n            }\n            else if (type === 'interval' || type === 'polygon') {\n                labelType = 'interval';\n            }\n            else {\n                labelType = 'base';\n            }\n        }\n        return labelType;\n    };\n    /**\n     * 获取 Y 轴上的最小值。\n     */\n    Geometry.prototype.getYMinValue = function () {\n        var yScale = this.getYScale();\n        var min = yScale.min, max = yScale.max;\n        var value;\n        if (min >= 0) {\n            value = min;\n        }\n        else if (max <= 0) {\n            // 当值全位于负区间时，需要保证 ymin 在区域内，不可为 0\n            value = max;\n        }\n        else {\n            value = 0;\n        }\n        return value;\n    };\n    // 创建图形属性相关的配置项\n    Geometry.prototype.createAttrOption = function (attrName, field, cfg) {\n        if (isNil(field) || isObject(field)) {\n            if (isObject(field) && isEqual(Object.keys(field), ['values'])) {\n                // shape({ values: [ 'funnel' ] })\n                set(this.attributeOption, attrName, {\n                    fields: field.values,\n                });\n            }\n            else {\n                set(this.attributeOption, attrName, field);\n            }\n        }\n        else {\n            var attrCfg = {};\n            if (isNumber(field)) {\n                // size(3)\n                attrCfg.values = [field];\n            }\n            else {\n                attrCfg.fields = parseFields(field);\n            }\n            if (cfg) {\n                if (isFunction(cfg)) {\n                    attrCfg.callback = cfg;\n                }\n                else {\n                    attrCfg.values = cfg;\n                }\n            }\n            set(this.attributeOption, attrName, attrCfg);\n        }\n    };\n    Geometry.prototype.initAttributes = function () {\n        var _this = this;\n        var _a = this, attributes = _a.attributes, attributeOption = _a.attributeOption, theme = _a.theme, shapeType = _a.shapeType;\n        this.groupScales = [];\n        var tmpMap = {};\n        var _loop_1 = function (attrType) {\n            if (attributeOption.hasOwnProperty(attrType)) {\n                var option = attributeOption[attrType];\n                if (!option) {\n                    return { value: void 0 };\n                }\n                var attrCfg = __assign({}, option);\n                var callback = attrCfg.callback, values = attrCfg.values, _a = attrCfg.fields, fields = _a === void 0 ? [] : _a;\n                // 获取每一个字段对应的 scale\n                var scales = fields.map(function (field) {\n                    var scale = _this.scales[field];\n                    if (scale.isCategory && !tmpMap[field] && GROUP_ATTRS.includes(attrType)) {\n                        _this.groupScales.push(scale);\n                        tmpMap[field] = true;\n                    }\n                    return scale;\n                });\n                attrCfg.scales = scales;\n                if (attrType !== 'position' && scales.length === 1 && scales[0].type === 'identity') {\n                    // 用户在图形通道上声明了常量字段 color('red'), size(5)\n                    attrCfg.values = scales[0].values;\n                }\n                else if (!callback && !values) {\n                    // 用户没有指定任何规则，则使用默认的映射规则\n                    if (attrType === 'size') {\n                        attrCfg.values = theme.sizes;\n                    }\n                    else if (attrType === 'shape') {\n                        attrCfg.values = theme.shapes[shapeType] || [];\n                    }\n                    else if (attrType === 'color') {\n                        if (scales.length) {\n                            // 根据数值个数使用对应的色板\n                            attrCfg.values = scales[0].values.length <= 10 ? theme.colors10 : theme.colors20;\n                        }\n                        else {\n                            attrCfg.values = theme.colors10;\n                        }\n                    }\n                }\n                var AttributeCtor = getAttributeClass(attrType);\n                attributes[attrType] = new AttributeCtor(attrCfg);\n            }\n        };\n        // 遍历每一个 attrOption，各自创建 Attribute 实例\n        for (var attrType in attributeOption) {\n            var state_1 = _loop_1(attrType);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n    };\n    // 处理数据：分组 -> 数字化 -> adjust 调整\n    Geometry.prototype.processData = function (data) {\n        this.hasSorted = false;\n        var scales = this.getAttribute('position').scales;\n        var categoryScales = scales.filter(function (scale) { return scale.isCategory; });\n        var groupedArray = this.groupData(data); // 数据分组\n        var beforeAdjust = [];\n        for (var i = 0, len = groupedArray.length; i < len; i++) {\n            var subData = groupedArray[i];\n            var arr = [];\n            for (var j = 0, subLen = subData.length; j < subLen; j++) {\n                var originData = subData[j];\n                var item = {};\n                // tslint:disable-next-line: forin\n                for (var k in originData) {\n                    item[k] = originData[k];\n                }\n                item[FIELD_ORIGIN] = originData;\n                // 将分类数据翻译成数据, 仅对位置相关的度量进行数字化处理\n                for (var _i = 0, categoryScales_1 = categoryScales; _i < categoryScales_1.length; _i++) {\n                    var scale = categoryScales_1[_i];\n                    var field = scale.field;\n                    item[field] = scale.translate(item[field]);\n                }\n                arr.push(item);\n            }\n            beforeAdjust.push(arr);\n        }\n        var dataArray = this.adjustData(beforeAdjust); // 进行 adjust 数据调整\n        this.beforeMappingData = dataArray;\n        return dataArray;\n    };\n    // 调整数据\n    Geometry.prototype.adjustData = function (dataArray) {\n        var adjustOption = this.adjustOption;\n        var result = dataArray;\n        if (adjustOption) {\n            var xScale = this.getXScale();\n            var yScale = this.getYScale();\n            var xField = xScale.field;\n            var yField = yScale ? yScale.field : null;\n            for (var i = 0, len = adjustOption.length; i < len; i++) {\n                var adjust = adjustOption[i];\n                var adjustCfg = __assign({ xField: xField,\n                    yField: yField }, adjust);\n                var type = adjust.type;\n                if (type === 'dodge') {\n                    var adjustNames = [];\n                    if (xScale.isCategory || xScale.type === 'identity') {\n                        adjustNames.push('x');\n                    }\n                    else if (!yScale) {\n                        adjustNames.push('y');\n                    }\n                    else {\n                        throw new Error('dodge is not support linear attribute, please use category attribute!');\n                    }\n                    adjustCfg.adjustNames = adjustNames;\n                    // 每个分组内每条柱子的宽度占比，用户不可指定，用户需要通过 columnWidthRatio 指定\n                    adjustCfg.dodgeRatio = this.theme.columnWidthRatio;\n                }\n                else if (type === 'stack') {\n                    var coordinate = this.coordinate;\n                    if (!yScale) {\n                        // 一维的情况下获取高度和默认size\n                        adjustCfg.height = coordinate.getHeight();\n                        var size = this.getDefaultValue('size') || 3;\n                        adjustCfg.size = size;\n                    }\n                    // 不进行 transpose 时，用户又没有设置这个参数时，默认从上向下\n                    if (!coordinate.isTransposed && isNil(adjustCfg.reverseOrder)) {\n                        adjustCfg.reverseOrder = true;\n                    }\n                }\n                var adjustCtor = getAdjustClass(type);\n                var adjustInstance = new adjustCtor(adjustCfg);\n                result = adjustInstance.process(result);\n                this.adjusts[type] = adjustInstance;\n            }\n        }\n        return result;\n    };\n    // 对数据进行分组\n    Geometry.prototype.groupData = function (data) {\n        var groupScales = this.getGroupScales();\n        var scaleDefs = this.scaleDefs;\n        var appendConditions = {};\n        var groupFields = [];\n        for (var index = 0; index < groupScales.length; index++) {\n            var scale = groupScales[index];\n            var field = scale.field;\n            groupFields.push(field);\n            if (get(scaleDefs, [field, 'values'])) {\n                // 用户通过 view.scale() 接口指定了 values 属性\n                appendConditions[field] = scaleDefs[field].values;\n            }\n        }\n        return group(data, groupFields, appendConditions);\n    };\n    // 更新发生层叠后的数据对应的度量范围\n    Geometry.prototype.updateStackRange = function (scale, dataArray) {\n        var mergeArray = flatten(dataArray);\n        var field = scale.field;\n        var min = scale.min;\n        var max = scale.max;\n        for (var index = 0; index < mergeArray.length; index++) {\n            var obj = mergeArray[index];\n            var tmpMin = Math.min.apply(null, obj[field]);\n            var tmpMax = Math.max.apply(null, obj[field]);\n            if (tmpMin < min) {\n                min = tmpMin;\n            }\n            if (tmpMax > max) {\n                max = tmpMax;\n            }\n        }\n        var scaleDefs = this.scaleDefs;\n        var cfg = {};\n        if ((min < scale.min) && !get(scaleDefs, [field, 'min'])) {\n            // 用户如果在列定义中定义了 min，则以用户定义的为准\n            cfg.min = min;\n        }\n        if ((max > scale.max) && !get(scaleDefs, [field, 'max'])) {\n            // 用户如果在列定义中定义了 max\n            cfg.max = max;\n        }\n        scale.change(cfg);\n    };\n    // 将数据映射至图形空间前的操作：排序以及关键点的生成\n    Geometry.prototype.beforeMapping = function (beforeMappingData) {\n        // 当初加 clone 是因为 points 的引用关系，导致更新失败，可是现在貌似复现不出来了，所以暂时不进行 clone\n        // const source = clone(beforeMappingData);\n        var source = beforeMappingData;\n        if (this.sortable) {\n            this.sort(source);\n        }\n        if (this.generatePoints) {\n            // 需要生成关键点\n            for (var index = 0, length_7 = source.length; index < length_7; index++) {\n                var currentData = source[index];\n                this.generateShapePoints(currentData);\n                var nextData = source[index + 1];\n                if (nextData) {\n                    this.generateShapePoints(nextData);\n                    currentData[0].nextPoints = nextData[0].points;\n                }\n            }\n        }\n        return source;\n    };\n    // 生成 shape 的关键点\n    Geometry.prototype.generateShapePoints = function (data) {\n        var shapeFactory = this.getShapeFactory();\n        var shapeAttr = this.getAttribute('shape');\n        for (var index = 0; index < data.length; index++) {\n            var obj = data[index];\n            var cfg = this.createShapePointsCfg(obj);\n            var shape = shapeAttr ? this.getAttributeValues(shapeAttr, obj) : null;\n            var points = shapeFactory.getShapePoints(shape, cfg);\n            obj.points = points;\n        }\n    };\n    // 将数据归一化\n    Geometry.prototype.normalizeValues = function (values, scale) {\n        var rst = [];\n        if (isArray(values)) {\n            for (var index = 0; index < values.length; index++) {\n                var value = values[index];\n                rst.push(scale.scale(value));\n            }\n        }\n        else {\n            rst = scale.scale(values);\n        }\n        return rst;\n    };\n    // 将数据映射至图形空间\n    Geometry.prototype.mapping = function (data) {\n        var attributes = this.attributes;\n        var mappingData = [];\n        for (var index = 0; index < data.length; index++) {\n            var record = data[index];\n            var newRecord = {\n                _origin: record[FIELD_ORIGIN],\n                points: record.points,\n                nextPoints: record.nextPoints,\n            };\n            for (var k in attributes) {\n                if (attributes.hasOwnProperty(k)) {\n                    var attr = attributes[k];\n                    var names = attr.names;\n                    var values = this.getAttributeValues(attr, record);\n                    if (names.length > 1) {\n                        // position 之类的生成多个字段的属性\n                        for (var j = 0; j < values.length; j += 1) {\n                            var val = values[j];\n                            var name_1 = names[j];\n                            newRecord[name_1] = isArray(val) && val.length === 1 ? val[0] : val; // 只有一个值时返回第一个属性值\n                        }\n                    }\n                    else {\n                        // values.length === 1 的判断是以下情况，获取用户设置的图形属性值\n                        // shape('a', ['dot', 'dash']), color('a', ['red', 'yellow'])\n                        newRecord[names[0]] = values.length === 1 ? values[0] : values;\n                    }\n                }\n            }\n            this.convertPoint(newRecord); // 将 x、y 转换成画布坐标\n            mappingData.push(newRecord);\n        }\n        return mappingData;\n    };\n    // 将归一化的坐标值转换成画布坐标\n    Geometry.prototype.convertPoint = function (mappingRecord) {\n        var x = mappingRecord.x, y = mappingRecord.y;\n        var rstX;\n        var rstY;\n        var obj;\n        var coordinate = this.coordinate;\n        if (isArray(x) && isArray(y)) {\n            rstX = [];\n            rstY = [];\n            for (var i = 0, j = 0, xLen = x.length, yLen = y.length; i < xLen && j < yLen; i += 1, j += 1) {\n                obj = coordinate.convert({\n                    x: x[i],\n                    y: y[j],\n                });\n                rstX.push(obj.x);\n                rstY.push(obj.y);\n            }\n        }\n        else if (isArray(y)) {\n            rstY = [];\n            for (var index = 0; index < y.length; index++) {\n                var yVal = y[index];\n                obj = coordinate.convert({\n                    x: x,\n                    y: yVal,\n                });\n                if (rstX && rstX !== obj.x) {\n                    if (!isArray(rstX)) {\n                        rstX = [rstX];\n                    }\n                    rstX.push(obj.x);\n                }\n                else {\n                    rstX = obj.x;\n                }\n                rstY.push(obj.y);\n            }\n        }\n        else if (isArray(x)) {\n            rstX = [];\n            for (var index = 0; index < x.length; index++) {\n                var xVal = x[index];\n                obj = coordinate.convert({\n                    x: xVal,\n                    y: y,\n                });\n                if (rstY && rstY !== obj.y) {\n                    if (!isArray(rstY)) {\n                        rstY = [rstY];\n                    }\n                    rstY.push(obj.y);\n                }\n                else {\n                    rstY = obj.y;\n                }\n                rstX.push(obj.x);\n            }\n        }\n        else {\n            var point = coordinate.convert({\n                x: x,\n                y: y,\n            });\n            rstX = point.x;\n            rstY = point.y;\n        }\n        mappingRecord.x = rstX;\n        mappingRecord.y = rstY;\n    };\n    // 获取 style 配置\n    Geometry.prototype.getStyleCfg = function (styleOption, originData) {\n        var _a = styleOption.fields, fields = _a === void 0 ? [] : _a, callback = styleOption.callback, cfg = styleOption.cfg;\n        if (cfg) {\n            // 用户直接配置样式属性\n            return cfg;\n        }\n        var params = fields.map(function (field) {\n            return originData[field];\n        });\n        return callback.apply(void 0, params);\n    };\n    Geometry.prototype.setCfg = function (cfg) {\n        var _this = this;\n        var coordinate = cfg.coordinate, data = cfg.data, theme = cfg.theme, scaleDefs = cfg.scaleDefs;\n        if (coordinate) {\n            this.coordinate = coordinate;\n        }\n        if (data) {\n            this.data = data;\n        }\n        if (scaleDefs) {\n            this.scaleDefs = scaleDefs;\n            this.idFields = [];\n            each(scaleDefs, function (scaleDef, field) {\n                if (scaleDef && scaleDef.key) {\n                    _this.idFields.push(field);\n                }\n            });\n        }\n        if (theme) {\n            this.theme = this.userTheme ? deepMix({}, theme, this.userTheme) : theme; // 支持 geometry 层级的主题设置\n        }\n    };\n    Geometry.prototype.renderLabels = function (mappingArray, isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n        var geometryLabel = this.geometryLabel;\n        if (!geometryLabel) {\n            // 初次创建\n            var labelType = this.getLabelType();\n            var GeometryLabelsCtor = getGeometryLabel(labelType);\n            geometryLabel = new GeometryLabelsCtor(this);\n            this.geometryLabel = geometryLabel;\n        }\n        geometryLabel.render(mappingArray, isUpdate);\n        // 将 label 同 element 进行关联\n        var labelsMap = geometryLabel.labelsRenderer.shapesMap;\n        each(this.elementsMap, function (element, id) {\n            var labels = filterLabelsById(id, labelsMap); // element 实例同 label 进行绑定\n            if (labels.length) {\n                element.labelShape = labels;\n                for (var i = 0; i < labels.length; i++) {\n                    var label = labels[i];\n                    var labelChildren = label.getChildren();\n                    for (var j = 0; j < labelChildren.length; j++) {\n                        var child = labelChildren[j];\n                        child.cfg.name = ['element', 'label'];\n                        child.cfg.element = element;\n                    }\n                }\n            }\n        });\n    };\n    /**\n     * 是否需要进行群组入场动画\n     * 规则：\n     * 1. 如果发生更新，则不进行\n     * 2. 如果用户关闭 geometry 动画，则不进行\n     * 3. 如果用户关闭了 appear 动画，则不进行\n     * 4. 如果用户配置了 appear.animation，则不进行\n     */\n    Geometry.prototype.canDoGroupAnimation = function (isUpdate) {\n        return (!isUpdate &&\n            this.animateOption &&\n            (get(this.animateOption, 'appear') === undefined ||\n                (get(this.animateOption, 'appear') && get(this.animateOption, ['appear', 'animation']) === undefined)));\n    };\n    return Geometry;\n}(Base));\nexport default Geometry;\n//# sourceMappingURL=base.js.map","import { groupToMap } from '@antv/util';\n/** @ignore */\nexport function group(data, fields, appendConditions) {\n    if (appendConditions === void 0) { appendConditions = {}; }\n    if (!fields) {\n        return [data];\n    }\n    var groups = groupToMap(data, fields);\n    var array = [];\n    if (fields.length === 1 && appendConditions[fields[0]]) {\n        var values = appendConditions[fields[0]];\n        for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n            var value = values_1[_i];\n            var arr = groups[\"_\" + value];\n            if (arr) { // 可能存在用户设置 values ，但是数据中没有对应的字段，则这时候 arr 就为 null\n                array.push(arr);\n            }\n        }\n    }\n    else {\n        for (var k in groups) {\n            if (groups.hasOwnProperty(k)) {\n                var eachGroup = groups[k];\n                array.push(eachGroup);\n            }\n        }\n    }\n    return array;\n}\n//# sourceMappingURL=group-data.js.map","import { transform } from '@antv/matrix-util';\nexport { transform } from '@antv/matrix-util';\n/**\n * 对元素进行平移操作。\n * @param element 进行变换的元素\n * @param x x 方向位移\n * @param y y 方向位移\n */\nexport function translate(element, x, y) {\n    var matrix = transform(element.getMatrix(), [['t', x, y]]);\n    element.setMatrix(matrix);\n}\n/**\n * 对元素进行旋转操作。\n * @param element 进行变换的元素\n * @param rotateRadian 旋转弧度\n */\nexport function rotate(element, rotateRadian) {\n    var _a = element.attr(), x = _a.x, y = _a.y;\n    var matrix = transform(element.getMatrix(), [\n        ['t', -x, -y],\n        ['r', rotateRadian],\n        ['t', x, y],\n    ]);\n    element.setMatrix(matrix);\n}\n/**\n * 获取元矩阵。\n * @returns identity matrix\n */\nexport function getIdentityMatrix() {\n    return [1, 0, 0, 0, 1, 0, 0, 0, 1];\n}\n/**\n * 围绕图形中心点进行缩放\n * @param element 进行缩放的图形元素\n * @param ratio 缩放比例\n */\nexport function zoom(element, ratio) {\n    var bbox = element.getBBox();\n    var x = (bbox.minX + bbox.maxX) / 2;\n    var y = (bbox.minY + bbox.maxY) / 2;\n    element.applyToMatrix([x, y, 1]);\n    var matrix = transform(element.getMatrix(), [\n        ['t', -x, -y],\n        ['s', ratio, ratio],\n        ['t', x, y],\n    ]);\n    element.setMatrix(matrix);\n}\n//# sourceMappingURL=transform.js.map","import { __assign } from \"tslib\";\nimport { deepMix, each, get, isArray } from '@antv/util';\nimport { doAnimate } from '../animate';\nimport { getGeometryLabelLayout } from '../geometry/label';\nimport { getReplaceAttrs } from '../util/graphics';\nimport { rotate, translate } from '../util/transform';\n/**\n * Geometry labels 渲染组件\n */\nvar Labels = /** @class */ (function () {\n    function Labels(cfg) {\n        /** 存储当前 shape 的映射表，键值为 shape id */\n        this.shapesMap = {};\n        this.lastShapesMap = {};\n        var layout = cfg.layout, container = cfg.container;\n        this.layout = layout;\n        this.container = container;\n    }\n    /**\n     * 渲染文本\n     */\n    Labels.prototype.render = function (items, shapes, isUpdate) {\n        var _this = this;\n        if (isUpdate === void 0) { isUpdate = false; }\n        this.shapesMap = {};\n        var container = this.container;\n        var offscreenGroup = this.createOffscreenGroup(); // 创建虚拟分组\n        // step 1: 在虚拟 group 中创建 shapes\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n            var item = items_1[_i];\n            if (item) {\n                this.renderLabel(item, offscreenGroup);\n            }\n        }\n        // step 2: 根据布局，调整 labels\n        this.doLayout(items, shapes);\n        // step 3: 绘制 labelLine\n        this.renderLabelLine(items);\n        // step 4: 根据用户设置的偏移量调整 label\n        this.adjustLabel(items);\n        // 进行添加、更新、销毁操作\n        var lastShapesMap = this.lastShapesMap;\n        var shapesMap = this.shapesMap;\n        each(shapesMap, function (shape, id) {\n            if (shape.destroyed) {\n                // label 在布局调整环节被删除了（doLayout）\n                delete shapesMap[id];\n            }\n            else {\n                if (lastShapesMap[id]) {\n                    // 图形发生更新\n                    var data_1 = shape.get('data');\n                    var origin_1 = shape.get('origin');\n                    var coordinate_1 = shape.get('coordinate');\n                    var currentShape = lastShapesMap[id]; // 已经在渲染树上的 shape\n                    var currentAnimateCfg_1 = shape.get('animateCfg');\n                    currentShape.set('data', data_1);\n                    currentShape.set('origin', origin_1);\n                    currentShape.set('animateCfg', currentAnimateCfg_1);\n                    currentShape.set('coordinate', coordinate_1);\n                    var updateAnimateCfg_1 = get(currentAnimateCfg_1, 'update');\n                    var currentChildren_1 = currentShape.getChildren();\n                    shape.getChildren().map(function (child, index) {\n                        var currentChild = currentChildren_1[index];\n                        currentChild.set('data', data_1);\n                        currentChild.set('origin', origin_1);\n                        currentChild.set('animateCfg', currentAnimateCfg_1);\n                        currentChild.set('coordinate', coordinate_1);\n                        var newAttrs = getReplaceAttrs(currentChild, child);\n                        if (updateAnimateCfg_1) {\n                            doAnimate(currentChild, updateAnimateCfg_1, {\n                                toAttrs: newAttrs,\n                                coordinate: coordinate_1,\n                            });\n                        }\n                        else {\n                            currentChild.attr(newAttrs);\n                        }\n                    });\n                    _this.shapesMap[id] = currentShape; // 保存引用\n                }\n                else {\n                    // 新生成的 shape\n                    container.add(shape);\n                    var animateCfg = get(shape.get('animateCfg'), isUpdate ? 'enter' : 'appear');\n                    if (animateCfg) {\n                        doAnimate(shape, animateCfg, {\n                            toAttrs: __assign({}, shape.attr()),\n                            coordinate: shape.get('coordinate'),\n                        });\n                    }\n                }\n                delete lastShapesMap[id];\n            }\n        });\n        // 移除\n        each(lastShapesMap, function (deleteShape) {\n            var animateCfg = get(deleteShape.get('animateCfg'), 'leave');\n            if (animateCfg) {\n                doAnimate(deleteShape, animateCfg, {\n                    toAttrs: null,\n                    coordinate: deleteShape.get('coordinate'),\n                });\n            }\n            else {\n                deleteShape.remove(true); // 移除\n            }\n        });\n        this.lastShapesMap = shapesMap;\n        offscreenGroup.destroy();\n    };\n    /** 清楚当前 labels */\n    Labels.prototype.clear = function () {\n        this.container.clear();\n        this.shapesMap = {};\n        this.lastShapesMap = {};\n    };\n    /** 销毁 */\n    Labels.prototype.destroy = function () {\n        this.container.destroy();\n        this.shapesMap = null;\n        this.lastShapesMap = null;\n    };\n    Labels.prototype.renderLabel = function (cfg, container) {\n        var id = cfg.id, data = cfg.data, mappingData = cfg.mappingData, coordinate = cfg.coordinate, animate = cfg.animate, content = cfg.content;\n        var shapeAppendCfg = {\n            id: id,\n            data: data,\n            origin: mappingData,\n            coordinate: coordinate,\n        };\n        var labelGroup = container.addGroup(__assign({ name: 'label', \n            // 如果 this.animate === false 或者 cfg.animate === false/null 则不进行动画，否则进行动画配置的合并\n            animateCfg: this.animate === false || animate === null || animate === false ? false : deepMix({}, this.animate, animate) }, shapeAppendCfg));\n        var labelShape;\n        if ((content.isGroup && content.isGroup()) || (content.isShape && content.isShape())) {\n            // 如果 content 是 Group 或者 Shape，根据 textAlign 调整位置后，直接将其加入 labelGroup\n            var _a = content.getCanvasBBox(), width = _a.width, height = _a.height;\n            var textAlign = get(cfg, 'textAlign', 'left');\n            var x = cfg.x;\n            var y = cfg.y - (height / 2);\n            if (textAlign === 'center') {\n                x = x - (width / 2);\n            }\n            else if (textAlign === 'right' || textAlign === 'end') {\n                x = x - width;\n            }\n            translate(content, x, y); // 将 label 平移至 x, y 指定的位置\n            labelShape = content;\n            labelGroup.add(content);\n        }\n        else {\n            labelShape = labelGroup.addShape('text', __assign({ attrs: __assign({ x: cfg.x, y: cfg.y, textAlign: cfg.textAlign, textBaseline: get(cfg, 'textBaseline', 'middle'), text: cfg.content }, cfg.style) }, shapeAppendCfg));\n        }\n        if (cfg.rotate) {\n            rotate(labelShape, cfg.rotate);\n        }\n        this.shapesMap[id] = labelGroup;\n    };\n    // 根据type对label布局\n    Labels.prototype.doLayout = function (items, shapes) {\n        var _this = this;\n        if (this.layout) {\n            var layouts = isArray(this.layout) ? this.layout : [this.layout];\n            each(layouts, function (layout) {\n                var layoutFn = getGeometryLabelLayout(get(layout, 'type', ''));\n                if (layoutFn) {\n                    var labelShapes_1 = [];\n                    var geometryShapes_1 = [];\n                    each(_this.shapesMap, function (labelShape, id) {\n                        labelShapes_1.push(labelShape);\n                        geometryShapes_1.push(shapes[id]);\n                    });\n                    layoutFn(items, labelShapes_1, geometryShapes_1, _this.region, layout.cfg);\n                }\n            });\n        }\n    };\n    Labels.prototype.renderLabelLine = function (labelItems) {\n        var _this = this;\n        each(labelItems, function (labelItem) {\n            if (!labelItem) {\n                return;\n            }\n            if (!labelItem.labelLine) {\n                // labelLine: null | false，关闭 label 对应的 labelLine\n                return;\n            }\n            var labelLineCfg = get(labelItem, 'labelLine', {});\n            var id = labelItem.id;\n            var path = labelLineCfg.path;\n            if (!path) {\n                var start = labelItem.start;\n                path = [\n                    ['M', start.x, start.y],\n                    ['L', labelItem.x, labelItem.y],\n                ];\n            }\n            var labelGroup = _this.shapesMap[id];\n            if (!labelGroup.destroyed) {\n                labelGroup.addShape('path', {\n                    capture: false,\n                    attrs: __assign({ path: path, stroke: labelItem.color ? labelItem.color : get(labelItem, ['style', 'fill'], '#000'), fill: null }, labelLineCfg.style),\n                    id: id,\n                    origin: labelItem.mappingData,\n                    data: labelItem.data,\n                    coordinate: labelItem.coordinate,\n                });\n            }\n        });\n    };\n    Labels.prototype.createOffscreenGroup = function () {\n        var container = this.container;\n        var GroupClass = container.getGroupBase(); // 获取分组的构造函数\n        var newGroup = new GroupClass({});\n        return newGroup;\n    };\n    Labels.prototype.adjustLabel = function (items) {\n        var _this = this;\n        each(items, function (item) {\n            if (item) {\n                var id = item.id;\n                var labelGroup = _this.shapesMap[id];\n                if (!labelGroup.destroyed) {\n                    var labelShape = labelGroup.find(function (ele) { return ele.get('type') === 'text'; });\n                    if (labelShape) {\n                        if (item.offsetX) {\n                            labelShape.attr('x', labelShape.attr('x') + item.offsetX);\n                        }\n                        if (item.offsetY) {\n                            labelShape.attr('y', labelShape.attr('y') + item.offsetY);\n                        }\n                    }\n                }\n            }\n        });\n    };\n    return Labels;\n}());\nexport default Labels;\n//# sourceMappingURL=labels.js.map","import { __assign } from \"tslib\";\nimport { deepMix, each, get, isArray, isFunction, isNil, isUndefined } from '@antv/util';\nimport { FIELD_ORIGIN } from '../../constant';\nimport { getDefaultAnimateCfg } from '../../animate';\nimport { getPolygonCentroid } from '../../util/graphics';\nimport Labels from '../../component/labels';\nfunction avg(arr) {\n    var sum = 0;\n    each(arr, function (value) {\n        sum += value;\n    });\n    return sum / arr.length;\n}\n/**\n * Geometry Label 基类，用于生成 Geometry 下所有 label 的配置项信息\n */\nvar GeometryLabel = /** @class */ (function () {\n    function GeometryLabel(geometry) {\n        this.geometry = geometry;\n    }\n    GeometryLabel.prototype.getLabelItems = function (mapppingArray) {\n        var _this = this;\n        var items = [];\n        var labelCfgs = this.getLabelCfgs(mapppingArray);\n        // 获取 label 相关的 x，y 的值，获取具体的 x, y，防止存在数组\n        each(mapppingArray, function (mappingData, index) {\n            var labelCfg = labelCfgs[index];\n            if (!labelCfg || isNil(mappingData.x) || isNil(mappingData.y)) {\n                items.push(null);\n                return;\n            }\n            var labelContent = !isArray(labelCfg.content) ? [labelCfg.content] : labelCfg.content;\n            labelCfg.content = labelContent;\n            var total = labelContent.length;\n            each(labelContent, function (content, subIndex) {\n                if (isNil(content) || content === '') {\n                    items.push(null);\n                    return;\n                }\n                var item = __assign(__assign({}, labelCfg), _this.getLabelPoint(labelCfg, mappingData, subIndex));\n                if (!item.textAlign) {\n                    item.textAlign = _this.getLabelAlign(item, subIndex, total);\n                }\n                if (item.offset <= 0) {\n                    item.labelLine = null;\n                }\n                items.push(item);\n            });\n        });\n        return items;\n    };\n    GeometryLabel.prototype.render = function (mapppingArray, isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n        var labelItems = this.getLabelItems(mapppingArray);\n        var labelsRenderer = this.getLabelsRenderer();\n        var shapes = this.getGeometryShapes();\n        // 渲染文本\n        labelsRenderer.render(labelItems, shapes, isUpdate);\n    };\n    GeometryLabel.prototype.clear = function () {\n        var labelsRenderer = this.labelsRenderer;\n        if (labelsRenderer) {\n            labelsRenderer.clear();\n        }\n    };\n    GeometryLabel.prototype.destroy = function () {\n        var labelsRenderer = this.labelsRenderer;\n        if (labelsRenderer) {\n            labelsRenderer.destroy();\n        }\n        this.labelsRenderer = null;\n    };\n    // geometry 更新之后，对应的 Coordinate 也会更新，为了获取到最新鲜的 Coordinate，故使用方法获取\n    GeometryLabel.prototype.getCoordinate = function () {\n        return this.geometry.coordinate;\n    };\n    /**\n     * 获取 label 的默认配置\n     */\n    GeometryLabel.prototype.getDefaultLabelCfg = function () {\n        return get(this.geometry.theme, 'labels', {});\n    };\n    /**\n     * 设置 label 位置\n     * @param labelPointCfg\n     * @param mappingData\n     * @param index\n     * @param position\n     */\n    GeometryLabel.prototype.setLabelPosition = function (labelPointCfg, mappingData, index, position) { };\n    /**\n     * 获取文本默认偏移量\n     * @param offset\n     * @returns\n     */\n    GeometryLabel.prototype.getDefaultOffset = function (offset) {\n        var coordinate = this.getCoordinate();\n        var vector = this.getOffsetVector(offset);\n        return coordinate.isTransposed ? vector[0] : vector[1];\n    };\n    /**\n     * 获取每个 label 的偏移量\n     * @param labelCfg\n     * @param index\n     * @param total\n     * @returns\n     */\n    GeometryLabel.prototype.getLabelOffset = function (labelCfg, index, total) {\n        var offset = this.getDefaultOffset(labelCfg.offset);\n        var coordinate = this.getCoordinate();\n        var transposed = coordinate.isTransposed;\n        var dim = transposed ? 'x' : 'y';\n        var factor = transposed ? 1 : -1; // y 方向上越大，像素的坐标越小，所以transposed时将系数变成\n        var offsetPoint = {\n            x: 0,\n            y: 0,\n        };\n        if (index > 0 || total === 1) {\n            // 判断是否小于0\n            offsetPoint[dim] = offset * factor;\n        }\n        else {\n            offsetPoint[dim] = offset * factor * -1;\n        }\n        return offsetPoint;\n    };\n    /**\n     * 获取每个 label 的位置\n     * @param labelCfg\n     * @param mappingData\n     * @param index\n     * @returns label point\n     */\n    GeometryLabel.prototype.getLabelPoint = function (labelCfg, mappingData, index) {\n        var coordinate = this.getCoordinate();\n        var total = labelCfg.content.length;\n        function getDimValue(value, idx) {\n            var v = value;\n            if (isArray(v)) {\n                if (labelCfg.content.length === 1) {\n                    // 如果仅一个 label，多个 y, 取最后一个 y\n                    if (v.length <= 2) {\n                        v = v[value.length - 1];\n                    }\n                    else {\n                        v = avg(v);\n                    }\n                }\n                else {\n                    v = v[idx];\n                }\n            }\n            return v;\n        }\n        var label = {\n            content: labelCfg.content[index],\n            x: 0,\n            y: 0,\n            start: { x: 0, y: 0 },\n            color: '#fff',\n        };\n        // 多边形场景，多用于地图\n        if (mappingData && this.geometry.type === 'polygon') {\n            var centroid = getPolygonCentroid(mappingData.x, mappingData.y);\n            label.x = centroid[0];\n            label.y = centroid[1];\n        }\n        else {\n            label.x = getDimValue(mappingData.x, index);\n            label.y = getDimValue(mappingData.y, index);\n        }\n        // 处理漏斗图文本位置\n        var shape = isArray(mappingData.shape) ? mappingData.shape[0] : mappingData.shape;\n        if (shape === 'funnel' || shape === 'pyramid') {\n            var nextPoints = get(mappingData, 'nextPoints');\n            var points = get(mappingData, 'points');\n            if (nextPoints) {\n                // 非漏斗图底部\n                var point1 = coordinate.convert(points[1]);\n                var point2 = coordinate.convert(nextPoints[1]);\n                label.x = (point1.x + point2.x) / 2;\n                label.y = (point1.y + point2.y) / 2;\n            }\n            else if (shape === 'pyramid') {\n                var point1 = coordinate.convert(points[1]);\n                var point2 = coordinate.convert(points[2]);\n                label.x = (point1.x + point2.x) / 2;\n                label.y = (point1.y + point2.y) / 2;\n            }\n        }\n        if (labelCfg.position) {\n            // 如果 label 支持 position 属性\n            this.setLabelPosition(label, mappingData, index, labelCfg.position);\n        }\n        var offsetPoint = this.getLabelOffset(labelCfg, index, total);\n        label.start = { x: label.x, y: label.y };\n        label.x += offsetPoint.x;\n        label.y += offsetPoint.y;\n        label.color = mappingData.color;\n        return label;\n    };\n    /**\n     * 获取文本的对齐方式\n     * @param item\n     * @param index\n     * @param total\n     * @returns\n     */\n    GeometryLabel.prototype.getLabelAlign = function (item, index, total) {\n        var align = 'center';\n        var coordinate = this.getCoordinate();\n        if (coordinate.isTransposed) {\n            var offset = this.getDefaultOffset(item.offset);\n            if (offset < 0) {\n                align = 'right';\n            }\n            else if (offset === 0) {\n                align = 'center';\n            }\n            else {\n                align = 'left';\n            }\n            if (total > 1 && index === 0) {\n                if (align === 'right') {\n                    align = 'left';\n                }\n                else if (align === 'left') {\n                    align = 'right';\n                }\n            }\n        }\n        return align;\n    };\n    /**\n     * 获取每一个 label 的唯一 id\n     * @param mappingData label 对应的图形的绘制数据\n     */\n    GeometryLabel.prototype.getLabelId = function (mappingData) {\n        var geometry = this.geometry;\n        var type = geometry.type;\n        var xScale = geometry.getXScale();\n        var yScale = geometry.getYScale();\n        var origin = mappingData[FIELD_ORIGIN]; // 原始数据\n        var labelId = geometry.getElementId(mappingData);\n        if (type === 'line' || type === 'area') {\n            // 折线图以及区域图，一条线会对应一组数据，即多个 labels，为了区分这些 labels，需要在 line id 的前提下加上 x 字段值\n            labelId += \" \" + origin[xScale.field];\n        }\n        else if (type === 'path') {\n            // path 路径图，无序，有可能存在相同 x 不同 y 的情况，需要通过 x y 来确定唯一 id\n            labelId += \" \" + origin[xScale.field] + \"-\" + origin[yScale.field];\n        }\n        return labelId;\n    };\n    // 获取 labels 组件\n    GeometryLabel.prototype.getLabelsRenderer = function () {\n        var _a = this.geometry, labelsContainer = _a.labelsContainer, labelOption = _a.labelOption, canvasRegion = _a.canvasRegion, animateOption = _a.animateOption;\n        var coordinate = this.geometry.coordinate;\n        var labelsRenderer = this.labelsRenderer;\n        if (!labelsRenderer) {\n            labelsRenderer = new Labels({\n                container: labelsContainer,\n                layout: get(labelOption, ['cfg', 'layout'], {\n                    type: this.defaultLayout,\n                }),\n            });\n            this.labelsRenderer = labelsRenderer;\n        }\n        labelsRenderer.region = canvasRegion;\n        // 设置动画配置，如果 geometry 的动画关闭了，那么 label 的动画也会关闭\n        labelsRenderer.animate = animateOption ? getDefaultAnimateCfg('label', coordinate) : false;\n        return labelsRenderer;\n    };\n    GeometryLabel.prototype.getLabelCfgs = function (mapppingArray) {\n        var _this = this;\n        var geometry = this.geometry;\n        var defaultLabelCfg = this.getDefaultLabelCfg();\n        var type = geometry.type, theme = geometry.theme, labelOption = geometry.labelOption, scales = geometry.scales, coordinate = geometry.coordinate;\n        var _a = labelOption, fields = _a.fields, callback = _a.callback, cfg = _a.cfg;\n        var labelScales = fields.map(function (field) {\n            return scales[field];\n        });\n        var labelCfgs = [];\n        each(mapppingArray, function (mappingData, index) {\n            var origin = mappingData[FIELD_ORIGIN]; // 原始数据\n            var originText = _this.getLabelText(origin, labelScales);\n            var callbackCfg;\n            if (callback) {\n                // 当同时配置了 callback 和 cfg 时，以 callback 为准\n                var originValues = fields.map(function (field) { return origin[field]; });\n                callbackCfg = callback.apply(void 0, originValues);\n                if (isNil(callbackCfg)) {\n                    labelCfgs.push(null);\n                    return;\n                }\n            }\n            var labelCfg = __assign(__assign({ id: _this.getLabelId(mappingData), data: origin, // 存储原始数据\n                mappingData: mappingData,\n                coordinate: coordinate }, cfg), callbackCfg);\n            var content = labelCfg.content;\n            if (isFunction(content)) {\n                labelCfg.content = content(origin, mappingData, index);\n            }\n            else if (isUndefined(content)) {\n                // 用户未配置 content，则默认为映射的第一个字段的值\n                labelCfg.content = originText[0];\n            }\n            if (isFunction(labelCfg.position)) {\n                labelCfg.position = labelCfg.position(origin, mappingData, index);\n            }\n            if (type === 'polygon' || (labelCfg.offset < 0 && !['line', 'point', 'path'].includes(type))) {\n                // polygon 或者 offset 小于 0 时，文本展示在图形内部，将其颜色设置为 白色\n                labelCfg = deepMix({}, defaultLabelCfg, theme.innerLabels, labelCfg);\n            }\n            else {\n                labelCfg = deepMix({}, defaultLabelCfg, theme.labels, labelCfg);\n            }\n            labelCfgs.push(labelCfg);\n        });\n        return labelCfgs;\n    };\n    GeometryLabel.prototype.getLabelText = function (origin, scales) {\n        var labelTexts = [];\n        each(scales, function (scale) {\n            var value = origin[scale.field];\n            if (isArray(value)) {\n                value = value.map(function (subVal) {\n                    return scale.getText(subVal);\n                });\n            }\n            else {\n                value = scale.getText(value);\n            }\n            if (isNil(value) || value === '') {\n                labelTexts.push(null);\n            }\n            else {\n                labelTexts.push(value);\n            }\n        });\n        return labelTexts;\n    };\n    GeometryLabel.prototype.getOffsetVector = function (offset) {\n        if (offset === void 0) { offset = 0; }\n        var coordinate = this.getCoordinate();\n        // 如果 x,y 翻转，则偏移 x，否则偏移 y\n        return coordinate.isTransposed ? coordinate.applyMatrix(offset, 0) : coordinate.applyMatrix(0, offset);\n    };\n    GeometryLabel.prototype.getGeometryShapes = function () {\n        var geometry = this.geometry;\n        var shapes = {};\n        each(geometry.elementsMap, function (element, id) {\n            shapes[id] = element.shape;\n        });\n        // 因为有可能 shape 还在进行动画，导致 shape.getBBox() 获取到的值不是最终态，所以需要从 offscreenGroup 获取\n        each(geometry.getOffscreenGroup().getChildren(), function (child) {\n            var id = geometry.getElementId(child.get('origin').mappingData);\n            shapes[id] = child;\n        });\n        return shapes;\n    };\n    return GeometryLabel;\n}());\nexport default GeometryLabel;\n//# sourceMappingURL=base.js.map","/* G2 的一个壳子，不包含 Geometry，由开发者自己定义和引入 */\nexport var VERSION = '4.0.7';\n// 核心基类导出\nexport { Chart, View, Event } from './chart'; // Chart, View 类\nexport { Controller as ComponentController } from './chart/controller/base'; // G2 组件基类\nexport { default as Geometry } from './geometry/base'; // Geometry 基类\nexport { default as GeometryLabel } from './geometry/label/base'; // Geometry Label 基类\nexport { Interaction } from './interaction'; // Interaction 基类\nexport { Facet } from './facet'; // Facet 基类\nexport { default as InteractionAction } from './interaction/action/base'; // Interaction Action 基类\n// 注册 ComponentController\nexport { registerComponentController } from './chart';\n// 注册 Geometry\nexport { registerGeometry } from './chart';\n// 注册 Geometry Shape\nexport { registerShape, registerShapeFactory, getShapeFactory } from './geometry/shape/base';\n// 注册 Geometry label 以及 Geometry Label 布局函数\nexport { registerGeometryLabel, registerGeometryLabelLayout, getGeometryLabel, getGeometryLabelLayout, } from './geometry/label';\n// 注册 interaction\nexport { getInteraction, registerInteraction, registerAction, getActionClass } from './interaction';\n// 注册 facet\nexport { getFacet, registerFacet } from './facet';\n// 注册主题\nexport { getTheme, registerTheme } from './theme';\n// G engine 管理相关\nexport { registerEngine, getEngine } from './engine';\n// 注册动画函数\nexport { registerAnimation, getAnimation } from './animate/animation';\nexport { LAYER, DIRECTION } from './constant';\n//# sourceMappingURL=core.js.map","var WHITE_COLORS = {\n    100: '#000',\n    95: '#0D0D0D',\n    85: '#262626',\n    65: '#595959',\n    45: '#8C8C8C',\n    25: '#BFBFBF',\n    15: '#D9D9D9',\n    6: '#F0F0F0',\n};\nvar BLACK_COLORS = {\n    100: '#FFFFFF',\n    95: '#F2F2F2',\n    85: '#D9D9D9',\n    65: '#A6A6A6',\n    45: '#737373',\n    25: '#404040',\n    15: '#262626',\n    6: '#0F0F0F',\n};\nvar QUALITATIVE_10 = [\n    '#5B8FF9',\n    '#5AD8A6',\n    '#5D7092',\n    '#F6BD16',\n    '#E86452',\n    '#6DC8EC',\n    '#945FB9',\n    '#FF9845',\n    '#1E9493',\n    '#FF99C3',\n];\nvar QUALITATIVE_20 = [\n    '#5B8FF9',\n    '#CDDDFD',\n    '#5AD8A6',\n    '#CDF3E4',\n    '#5D7092',\n    '#CED4DE',\n    '#F6BD16',\n    '#FCEBB9',\n    '#E86452',\n    '#F8D0CB',\n    '#6DC8EC',\n    '#D3EEF9',\n    '#945FB9',\n    '#DECFEA',\n    '#FF9845',\n    '#FFE0C7',\n    '#1E9493',\n    '#BBDEDE',\n    '#FF99C3',\n    '#FFE0ED',\n];\nexport var antvDark = {\n    /** 主题色 */\n    brandColor: QUALITATIVE_10[0],\n    /** 分类色板 1，在数据量小于等于 10 时使用 */\n    paletteQualitative10: QUALITATIVE_10,\n    /** 分类色板 2，在数据量大于 10 时使用 */\n    paletteQualitative20: QUALITATIVE_20,\n    /** 语义色 */\n    paletteSemanticRed: '#F4664A',\n    /** 语义色 */\n    paletteSemanticGreen: '#30BF78',\n    /** 语义色 */\n    paletteSemanticYellow: '#FAAD14',\n    /** 字体 */\n    fontFamily: \"\\\"-apple-system\\\", \\\"Segoe UI\\\", Roboto, \\\"Helvetica Neue\\\", Arial,\\n  \\\"Noto Sans\\\", sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\",\\n  \\\"Noto Color Emoji\\\"\",\n    // -------------------- 坐标轴 --------------------\n    /** 坐标轴线颜色 */\n    axisLineBorderColor: BLACK_COLORS[25],\n    /** 坐标轴线粗细 */\n    axisLineBorder: 0.5,\n    /** 坐标轴线 lineDash 设置 */\n    axisLineDash: null,\n    /** 坐标轴标题颜色 */\n    axisTitleTextFillColor: BLACK_COLORS[65],\n    /** 坐标轴标题文本字体大小 */\n    axisTitleTextFontSize: 12,\n    /** 坐标轴标题文本行高 */\n    axisTitleTextLineHeight: 12,\n    /** 坐标轴标题文本字体粗细 */\n    axisTitleTextFontWeight: 'normal',\n    /** 坐标轴刻度线颜色 */\n    axisTickLineBorderColor: BLACK_COLORS[25],\n    /** 坐标轴刻度线长度 */\n    axisTickLineLength: 4,\n    /** 坐标轴刻度线粗细 */\n    axisTickLineBorder: 0.5,\n    /** 坐标轴次刻度线颜色 */\n    axisSubTickLineBorderColor: BLACK_COLORS[15],\n    /** 坐标轴次刻度线长度 */\n    axisSubTickLineLength: 2,\n    /** 坐标轴次刻度线粗细 */\n    axisSubTickLineBorder: 0.5,\n    /** 坐标轴刻度文本颜色 */\n    axisLabelFillColor: BLACK_COLORS[45],\n    /** 坐标轴刻度文本字体大小 */\n    axisLabelFontSize: 12,\n    /** 坐标轴刻度文本行高 */\n    axisLabelLineHeight: 12,\n    /** 坐标轴刻度文本字体粗细 */\n    axisLabelFontWeight: 'normal',\n    /** 坐标轴网格线颜色 */\n    axisGridBorderColor: BLACK_COLORS[15],\n    /** 坐标轴网格线粗细 */\n    axisGridBorder: 0.5,\n    /** 坐标轴网格线虚线设置 */\n    axisGridLineDash: null,\n    // -------------------- 图例 --------------------\n    /** 图例标题颜色 */\n    legendTitleTextFillColor: BLACK_COLORS[45],\n    /** 图例标题文本字体大小 */\n    legendTitleTextFontSize: 12,\n    /** 图例标题文本行高 */\n    legendTitleTextLineHeight: 21,\n    /** 图例标题文本字体粗细 */\n    legendTitleTextFontWeight: 'normal',\n    /** 图例 marker 颜色 */\n    legendMarkerColor: QUALITATIVE_10[0],\n    /** 图例 marker 默认半径大小 */\n    legendMarkerSize: 4,\n    /** 图例 'circle' marker 半径 */\n    legendCircleMarkerSize: 4,\n    /** 图例 'square' marker 半径 */\n    legendSquareMarkerSize: 4,\n    /** 图例 'line' marker 半径 */\n    legendLineMarkerSize: 5,\n    /** 图例项文本颜色 */\n    legendItemNameFillColor: BLACK_COLORS[65],\n    /** 图例项文本字体大小 */\n    legendItemNameFontSize: 12,\n    /** 图例项文本行高 */\n    legendItemNameLineHeight: 12,\n    /** 图例项粗细 */\n    legendItemNameFontWeight: 'normal',\n    /** 连续图例滑块填充色 */\n    sliderRailFillColor: BLACK_COLORS[15],\n    /** 连续图例滑块边框粗细 */\n    sliderRailBorder: 0,\n    /** 连续图例滑块边框颜色 */\n    sliderRailBorderColor: null,\n    /** 连续图例滑块宽度 */\n    sliderRailWidth: 100,\n    /** 连续图例滑块高度 */\n    sliderRailHeight: 12,\n    /** 连续图例文本颜色 */\n    sliderLabelTextFillColor: BLACK_COLORS[45],\n    /** 连续图例文本字体大小 */\n    sliderLabelTextFontSize: 12,\n    /** 连续图例文本行高 */\n    sliderLabelTextLineHeight: 12,\n    /** 连续图例文本字体粗细 */\n    sliderLabelTextFontWeight: 'normal',\n    /** 连续图例滑块颜色 */\n    sliderHandlerFillColor: WHITE_COLORS[6],\n    /** 连续图例滑块宽度 */\n    sliderHandlerWidth: 10,\n    /** 连续图例滑块高度 */\n    sliderHandlerHeight: 14,\n    /** 连续图例滑块边框粗细 */\n    sliderHandlerBorder: 1,\n    /** 连续图例滑块边框颜色 */\n    sliderHandlerBorderColor: WHITE_COLORS[25],\n    // -------------------- Annotation，图形标注 --------------------\n    /** arc 图形标注描边颜色 */\n    annotationArcBorderColor: BLACK_COLORS[15],\n    /** arc 图形标注粗细 */\n    annotationArcBorder: 0.5,\n    /** line 图形标注颜色 */\n    annotationLineBorderColor: BLACK_COLORS[25],\n    /** line 图形标注粗细 */\n    annotationLineBorder: 0.5,\n    /** lube 图形标注的虚线间隔 */\n    annotationLineDash: null,\n    /** text 图形标注文本颜色 */\n    annotationTextFillColor: BLACK_COLORS[65],\n    /** text 图形标注文本字体大小 */\n    annotationTextFontSize: 12,\n    /** text 图形标注文本行高 */\n    annotationTextLineHeight: 12,\n    /** text 图形标注文本字体粗细 */\n    annotationTextFontWeight: 'normal',\n    /** text 图形标注文本边框颜色 */\n    annotationTextBorderColor: WHITE_COLORS[95],\n    /** text 图形标注文本边框粗细 */\n    annotationTextBorder: 1.5,\n    /** region 图形标注填充颜色 */\n    annotationRegionFillColor: BLACK_COLORS[100],\n    /** region 图形标注填充颜色透明色 */\n    annotationRegionFillOpacity: 0.06,\n    /** region 图形标注描边粗细 */\n    annotationRegionBorder: 0,\n    /** region 图形标注描边颜色 */\n    annotationRegionBorderColor: null,\n    /** dataMarker 图形标注线的长度 */\n    annotationDataMarkerLineLength: 16,\n    // -------------------- Tooltip --------------------\n    /** tooltip crosshairs 辅助线颜色 */\n    tooltipCrosshairsBorderColor: BLACK_COLORS[25],\n    /** tooltip crosshairs 辅助线粗细 */\n    tooltipCrosshairsBorder: 0.5,\n    /** tooltip crosshairs 辅助线虚线间隔 */\n    tooltipCrosshairsLineDash: null,\n    /** tooltip 内容框背景色 */\n    tooltipContainerFillColor: '#1f1f1f',\n    tooltipContainerFillOpacity: 0.95,\n    /** tooltip 内容框阴影 */\n    tooltipContainerShadow: '0px 2px 4px rgba(0,0,0,.5)',\n    /** tooltip 内容框圆角 */\n    tooltipContainerBorderRadius: 3,\n    /** tooltip 文本颜色 */\n    tooltipTextFillColor: BLACK_COLORS[65],\n    /** tooltip 文本字体大小 */\n    tooltipTextFontSize: 12,\n    /** tooltip 文本行高 */\n    tooltipTextLineHeight: 12,\n    /** tooltip 文本字体粗细 */\n    tooltipTextFontWeight: 'bold',\n    // -------------------- Geometry labels --------------------\n    /** Geometry label 文本颜色 */\n    labelFillColor: BLACK_COLORS[65],\n    /** Geometry label 文本字体大小 */\n    labelFontSize: 12,\n    /** Geometry label 文本行高 */\n    labelLineHeight: 12,\n    /** Geometry label 文本字体粗细 */\n    labelFontWeight: 'normal',\n    /** Geometry label 文本描边颜色 */\n    labelBorderColor: null,\n    /** Geometry label 文本描边粗细 */\n    labelBorder: 0,\n    /** Geometry innerLabel 文本颜色 */\n    innerLabelFillColor: WHITE_COLORS[100],\n    /** Geometry innerLabel 文本字体大小 */\n    innerLabelFontSize: 12,\n    /** Geometry innerLabel 文本行高 */\n    innerLabelLineHeight: 12,\n    /** Geometry innerLabel 文本字体粗细 */\n    innerLabelFontWeight: 'normal',\n    /** Geometry innerLabel 文本描边颜色 */\n    innerLabelBorderColor: null,\n    /** Geometry innerLabel 文本描边粗细 */\n    innerLabelBorder: 0,\n    /** Geometry label　文本连接线粗细 */\n    labelLineBorder: 0.5,\n    /** Geometry label 文本连接线颜色 */\n    labelLineBorderColor: BLACK_COLORS[25],\n    // -------------------- Geometry 图形样式--------------------\n    /** 点图填充颜色 */\n    pointFillColor: QUALITATIVE_10[0],\n    /** 点图填充颜色透明度 */\n    pointFillOpacity: 0.95,\n    /** 点图大小 */\n    pointSize: 4,\n    /** 点图描边粗细 */\n    pointBorder: 1,\n    /** 点图描边颜色 */\n    pointBorderColor: WHITE_COLORS[100],\n    /** 点图描边透明度 */\n    pointBorderOpacity: 1,\n    /** 点图 active 状态下描边颜色 */\n    pointActiveBorderColor: BLACK_COLORS[100],\n    /** 点图 selected 状态下描边粗细 */\n    pointSelectedBorder: 2,\n    /** 点图 selected 状态下描边颜色 */\n    pointSelectedBorderColor: BLACK_COLORS[100],\n    /** 点图 inactive 状态下填充颜色透明度 */\n    pointInactiveFillOpacity: 0.3,\n    /** 点图 inactive 状态下描边透明度 */\n    pointInactiveBorderOpacity: 0.3,\n    /** 空心点图大小 */\n    hollowPointSize: 4,\n    /** 空心点图描边粗细 */\n    hollowPointBorder: 1,\n    /** 空心点图描边颜色 */\n    hollowPointBorderColor: QUALITATIVE_10[0],\n    /** 空心点图描边透明度 */\n    hollowPointBorderOpacity: 0.95,\n    hollowPointFillColor: WHITE_COLORS[100],\n    /** 空心点图 active 状态下描边粗细 */\n    hollowPointActiveBorder: 1,\n    /** 空心点图 active 状态下描边颜色 */\n    hollowPointActiveBorderColor: BLACK_COLORS[100],\n    /** 空心点图 active 状态下描边透明度 */\n    hollowPointActiveBorderOpacity: 1,\n    /** 空心点图 selected 状态下描边粗细 */\n    hollowPointSelectedBorder: 2,\n    /** 空心点图 selected 状态下描边颜色 */\n    hollowPointSelectedBorderColor: BLACK_COLORS[100],\n    /** 空心点图 selected 状态下描边透明度 */\n    hollowPointSelectedBorderOpacity: 1,\n    /** 空心点图 inactive 状态下描边透明度 */\n    hollowPointInactiveBorderOpacity: 0.3,\n    /** 线图粗细 */\n    lineBorder: 2,\n    /** 线图颜色 */\n    lineBorderColor: QUALITATIVE_10[0],\n    /** 线图透明度 */\n    lineBorderOpacity: 1,\n    /** 线图 Active 状态下粗细 */\n    lineActiveBorder: 3,\n    /** 线图 selected 状态下粗细 */\n    lineSelectedBorder: 3,\n    /** 线图 inactive 状态下透明度 */\n    lineInactiveBorderOpacity: 0.3,\n    /** area 填充颜色 */\n    areaFillColor: QUALITATIVE_10[0],\n    /** area 填充透明度 */\n    areaFillOpacity: 0.25,\n    /** area 在 active 状态下的填充透明度 */\n    areaActiveFillColor: QUALITATIVE_10[0],\n    areaActiveFillOpacity: 0.5,\n    /** area 在 selected 状态下的填充透明度 */\n    areaSelectedFillColor: QUALITATIVE_10[0],\n    areaSelectedFillOpacity: 0.5,\n    /** area inactive 状态下填充透明度 */\n    areaInactiveFillOpacity: 0.3,\n    /** hollowArea 颜色 */\n    hollowAreaBorderColor: QUALITATIVE_10[0],\n    /** hollowArea 边框粗细 */\n    hollowAreaBorder: 2,\n    /** hollowArea 边框透明度 */\n    hollowAreaBorderOpacity: 1,\n    /** hollowArea active 状态下的边框粗细 */\n    hollowAreaActiveBorder: 3,\n    hollowAreaActiveBorderColor: BLACK_COLORS[100],\n    /** hollowArea selected 状态下的边框粗细 */\n    hollowAreaSelectedBorder: 3,\n    hollowAreaSelectedBorderColor: BLACK_COLORS[100],\n    /** hollowArea inactive 状态下的边框透明度 */\n    hollowAreaInactiveBorderOpacity: 0.3,\n    /** interval 填充颜色 */\n    intervalFillColor: QUALITATIVE_10[0],\n    /** interval 填充透明度 */\n    intervalFillOpacity: 0.95,\n    /** interval active 状态下边框粗细 */\n    intervalActiveBorder: 1,\n    /** interval active 状态下边框颜色 */\n    intervalActiveBorderColor: BLACK_COLORS[100],\n    intervalActiveBorderOpacity: 1,\n    /** interval selected 状态下边框粗细 */\n    intervalSelectedBorder: 2,\n    /** interval selected 状态下边框颜色 */\n    intervalSelectedBorderColor: BLACK_COLORS[100],\n    /** interval selected 状态下边框透明度 */\n    intervalSelectedBorderOpacity: 1,\n    /** interval inactive 状态下边框透明度 */\n    intervalInactiveBorderOpacity: 0.3,\n    /** interval inactive 状态下填充透明度 */\n    intervalInactiveFillOpacity: 0.3,\n    /** interval 边框粗细 */\n    hollowIntervalBorder: 2,\n    /** hollowInterval 边框颜色 */\n    hollowIntervalBorderColor: QUALITATIVE_10[0],\n    /** hollowInterval 边框透明度 */\n    hollowIntervalBorderOpacity: 1,\n    hollowIntervalFillColor: WHITE_COLORS[100],\n    /** hollowInterval active 状态下边框粗细 */\n    hollowIntervalActiveBorder: 2,\n    /** hollowInterval active 状态下边框颜色 */\n    hollowIntervalActiveBorderColor: BLACK_COLORS[100],\n    /** hollowInterval selected 状态下边框粗细 */\n    hollowIntervalSelectedBorder: 3,\n    /** hollowInterval selected 状态下边框颜色 */\n    hollowIntervalSelectedBorderColor: BLACK_COLORS[100],\n    /** hollowInterval selected 状态下边框透明度 */\n    hollowIntervalSelectedBorderOpacity: 1,\n    /** hollowInterval inactive 状态下边框透明度 */\n    hollowIntervalInactiveBorderOpacity: 0.3,\n};\n//# sourceMappingURL=dark.js.map","import { isArray } from '@antv/util';\nfunction isValueEmpty(value) {\n    if (value) {\n        return false;\n    }\n    return value === null || value === undefined || isNaN(value);\n}\nfunction isYNil(point) {\n    if (isArray(point)) {\n        // 特殊处理 area 的关键点数据，其关键点结构为 [{x: 0, y: 1}, {x: 0, y: 2}]\n        return isValueEmpty(point[1].y);\n    }\n    var value = point.y;\n    return isArray(value) ? isValueEmpty(value[0]) : isValueEmpty(value);\n}\n/**\n * @ignore\n * 分割数据，用于处理在一组点数据中，y 对应的数值存在 null/undefined/NaN 的情况\n * 应用于折线图、区域图以及路径图\n *\n * ```typescript\n * // return [[{x: 1, y: 2}, {x: 3, y: 3}]]\n * getPathPoints([{x: 1, y: 2}, {x: 2, y: null}, {x: 3, y: 3}], true);\n * // return [[{x: 1, y: 2}], [{x: 3, y: 3}]]\n * getPathPoints([{x: 1, y: 2}, {x: 2, y: null}, {x: 3, y: 3}], false);\n * // return [[[{ x: 1, y: 10 }, { x: 2, y: 2 }], [{ x: 9, y: 34 }, { x: 1, y: 1 }]]]\n * getPathPoints([\n *   [{ x: 1, y: 10 }, { x: 2, y: 2 }],\n *   [{ x: 4, y: 2 }, { x: 8, y: NaN }],\n *   [{ x: 9, y: 34 }, { x: 1, y: 1 }],\n * ], true);\n * ```\n *\n * @param points 要进行处理点集合\n * @param connectNulls 是否连接空值数据\n * @returns 返回处理后的点集合\n */\nexport function getPathPoints(points, connectNulls) {\n    if (!points.length) {\n        return [];\n    }\n    if (connectNulls) {\n        // 即 y 值为空的场景\n        var filtered = [];\n        for (var i = 0, len = points.length; i < len; i++) {\n            var point = points[i];\n            if (!isYNil(point)) {\n                filtered.push(point);\n            }\n        }\n        return [filtered];\n    }\n    var result = [];\n    var tmp = [];\n    for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n        if (isYNil(point)) {\n            if (tmp.length) {\n                result.push(tmp);\n                tmp = [];\n            }\n        }\n        else {\n            tmp.push(point);\n        }\n    }\n    if (tmp.length) {\n        result.push(tmp);\n    }\n    return result;\n}\n//# sourceMappingURL=get-path-points.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar util_1 = require(\"@antv/util\");\n/**\n * @ignore\n * 获取 Shape 的图形属性\n * @param cfg\n * @param isStroke 是否需要描边\n * @param isFill 是否需要填充\n * @param [sizeName] 可选，表示图形大小的属性，lineWidth 或者 r\n * @returns\n */\nfunction getStyle(cfg, isStroke, isFill, sizeName) {\n    if (sizeName === void 0) { sizeName = ''; }\n    var _a = cfg.style, style = _a === void 0 ? {} : _a, defaultStyle = cfg.defaultStyle, color = cfg.color, size = cfg.size;\n    var attrs = tslib_1.__assign(tslib_1.__assign({}, defaultStyle), style);\n    if (color) {\n        if (isStroke) {\n            if (!style.stroke) {\n                // 如果用户在 style() 中配置了 stroke，则以用户配置的为准\n                attrs.stroke = color;\n            }\n        }\n        if (isFill) {\n            if (!style.fill) {\n                // 如果用户在 style() 中配置了 fill\n                attrs.fill = color;\n            }\n        }\n    }\n    if (sizeName && util_1.isNil(style[sizeName]) && !util_1.isNil(size)) {\n        // 如果用户在 style() 中配置了 lineWidth 或者 r 属性\n        attrs[sizeName] = size;\n    }\n    return attrs;\n}\nexports.getStyle = getStyle;\n//# sourceMappingURL=get-style.js.map","import { isArray } from '@antv/util';\n/**\n * @ignore\n * 拆分点数据\n * @example\n * // result: [{x: 20, y: 20}, {x: 20, y: 30}]\n * splitPoints({x: 20,y: [20, 30]});\n * @example\n * // result: [{x: 20, y: 20}, {x: 30, y: 30}]\n * splitPoints({x: [20, 30],y: [20, 30]});\n * @param obj\n */\nexport function splitPoints(obj) {\n    // y 有可能是数组，对应原始数据中 y 为一个区间数据，如 [19, 30]，为了统一也将 x 转换为数组\n    var x = obj.x;\n    var y = isArray(obj.y) ? obj.y : [obj.y];\n    return y.map(function (eachY, index) {\n        return {\n            x: isArray(x) ? x[index] : x,\n            y: eachY,\n        };\n    });\n}\n//# sourceMappingURL=split-points.js.map","var LineSymbols = {\n    line: function (x, y, r) {\n        return [\n            ['M', x - r, y],\n            ['L', x + r, y],\n        ];\n    },\n    dot: function (x, y, r) {\n        return [\n            ['M', x - r, y],\n            ['L', x + r, y],\n        ];\n    },\n    dash: function (x, y, r) {\n        return [\n            ['M', x - r, y],\n            ['L', x + r, y],\n        ];\n    },\n    smooth: function (x, y, r) {\n        return [\n            ['M', x - r, y],\n            ['A', r / 2, r / 2, 0, 1, 1, x, y],\n            ['A', r / 2, r / 2, 0, 1, 0, x + r, y],\n        ];\n    },\n    hv: function (x, y, r) {\n        return [\n            ['M', x - r - 1, y - 2.5],\n            ['L', x, y - 2.5],\n            ['L', x, y + 2.5],\n            ['L', x + r + 1, y + 2.5],\n        ];\n    },\n    vh: function (x, y, r) {\n        return [\n            ['M', x - r - 1, y + 2.5],\n            ['L', x, y + 2.5],\n            ['L', x, y - 2.5],\n            ['L', x + r + 1, y - 2.5],\n        ];\n    },\n    hvh: function (x, y, r) {\n        return [\n            ['M', x - (r + 1), y + 2.5],\n            ['L', x - r / 2, y + 2.5],\n            ['L', x - r / 2, y - 2.5],\n            ['L', x + r / 2, y - 2.5],\n            ['L', x + r / 2, y + 2.5],\n            ['L', x + r + 1, y + 2.5],\n        ];\n    },\n    vhv: function (x, y) {\n        // 宽 13px，高 8px\n        return [\n            ['M', x - 5, y + 2.5],\n            ['L', x - 5, y],\n            ['L', x, y],\n            ['L', x, y - 3],\n            ['L', x, y + 3],\n            ['L', x + 6.5, y + 3],\n        ];\n    },\n};\n/**\n * Gets line marker\n * @ignore\n * @param markerCfg\n * @param shapeType\n * @returns 返回 Line 的 marker 配置\n */\nexport function getLineMarker(markerCfg, shapeType) {\n    var color = markerCfg.color;\n    return {\n        symbol: LineSymbols[shapeType],\n        style: {\n            lineWidth: 2,\n            r: 6,\n            stroke: color,\n        },\n    };\n}\n//# sourceMappingURL=util.js.map","import { each, isArray } from '@antv/util';\nimport { registerShape, registerShapeFactory } from '../base';\nimport { getPathPoints } from '../util/get-path-points';\nimport { getStyle } from '../util/get-style';\nimport { getLinePath, getSplinePath } from '../util/path';\nimport { splitPoints } from '../util/split-points';\nimport { getLineMarker } from './util';\nfunction getShapeAttrs(cfg, smooth, constraint) {\n    var isStack = cfg.isStack, connectNulls = cfg.connectNulls, isInCircle = cfg.isInCircle;\n    var points = getPathPoints(cfg.points, connectNulls); // 根据 connectNulls 值处理 points\n    var path = [];\n    for (var i = 0, len = points.length; i < len; i++) {\n        var eachLinePoints = points[i];\n        path = path.concat(getPath(eachLinePoints, isInCircle, isStack, smooth, constraint));\n    }\n    var shapeAttrs = getStyle(cfg, true, false, 'lineWidth');\n    shapeAttrs.path = path;\n    return shapeAttrs;\n}\n// 单条 path\nfunction getSinglePath(points, isInCircle, smooth, constraint) {\n    var path;\n    if (!smooth) {\n        path = getLinePath(points, false);\n        if (isInCircle) {\n            path.push(['Z']);\n        }\n    }\n    else {\n        // 直角坐标系下绘制曲线时限制最大值、最小值\n        if (isInCircle && points.length) {\n            points.push({ x: points[0].x, y: points[0].y });\n        }\n        path = getSplinePath(points, false, constraint);\n    }\n    return path;\n}\nfunction getRangePath(points, isInCircle, isStack, smooth, constraint) {\n    var topPoints = [];\n    var bottomPoints = [];\n    each(points, function (point) {\n        var result = splitPoints(point);\n        topPoints.push(result[1]); // 上边\n        bottomPoints.push(result[0]); // 底边\n    });\n    var topPath = getSinglePath(topPoints, isInCircle, smooth, constraint);\n    var bottomPath = getSinglePath(bottomPoints, isInCircle, smooth, constraint);\n    if (isStack) {\n        return topPath;\n    }\n    return topPath.concat(bottomPath);\n}\nfunction getPath(points, isInCircle, isStack, smooth, constraint) {\n    var first = points[0];\n    return isArray(first.y)\n        ? getRangePath(points, isInCircle, isStack, smooth, constraint)\n        : getSinglePath(points, isInCircle, smooth, constraint);\n}\nvar LineShapeFactory = registerShapeFactory('line', {\n    defaultShapeType: 'line',\n});\n// 这里因为代码公用，所以直接全部注册\n// 'line' 默认折线；'dot' 点线 ···；'dash' 断线 - - -\neach(['line', 'dot', 'dash', 'smooth'], function (shapeType) {\n    registerShape('line', shapeType, {\n        draw: function (cfg, container) {\n            var smooth = shapeType === 'smooth';\n            var constraint;\n            if (smooth) {\n                var _a = this.coordinate, start = _a.start, end = _a.end;\n                constraint = [\n                    [start.x, end.y],\n                    [end.x, start.y],\n                ];\n            }\n            var attrs = getShapeAttrs(cfg, smooth, constraint);\n            var shape = container.addShape({\n                type: 'path',\n                attrs: attrs,\n                name: 'line',\n            });\n            return shape;\n        },\n        getMarker: function (markerCfg) {\n            return getLineMarker(markerCfg, shapeType);\n        },\n    });\n});\nexport default LineShapeFactory;\n//# sourceMappingURL=index.js.map","import { __extends } from \"tslib\";\nimport { FIELD_ORIGIN } from '../constant';\nimport Geometry from './base';\nimport Element from './element';\n/** 引入对应的 ShapeFactory */\nimport './shape/line';\nimport { isModelChange } from './util/is-model-change';\n/**\n * Path 几何标记。\n * 用于绘制路径图等。\n */\nvar Path = /** @class */ (function (_super) {\n    __extends(Path, _super);\n    function Path(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.type = 'path';\n        _this.shapeType = 'line';\n        var _a = cfg.connectNulls, connectNulls = _a === void 0 ? false : _a;\n        _this.connectNulls = connectNulls;\n        return _this;\n    }\n    /**\n     * 创建所有的 Element 实例，对于 Path、Line、Area，一组数据对应一个 Element。\n     * @param mappingData\n     * @param [isUpdate]\n     * @returns elements\n     */\n    Path.prototype.createElements = function (mappingData, index, isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n        // Path 的每个 element 对应一组数据\n        var _a = this, lastElementsMap = _a.lastElementsMap, elementsMap = _a.elementsMap, elements = _a.elements, container = _a.container;\n        var elementId = this.getElementId(mappingData);\n        var shapeCfg = this.getShapeInfo(mappingData);\n        var result = lastElementsMap[elementId];\n        if (!result) {\n            var shapeFactory = this.getShapeFactory();\n            result = new Element({\n                shapeFactory: shapeFactory,\n                container: container,\n                offscreenGroup: this.getOffscreenGroup(),\n            });\n            result.geometry = this;\n            result.animate = this.animateOption;\n            result.draw(shapeCfg, isUpdate); // 绘制 shape\n        }\n        else {\n            // element 已经创建\n            var preShapeCfg = result.getModel();\n            if (isModelChange(preShapeCfg, shapeCfg)) {\n                result.animate = this.animateOption;\n                // 通过绘制数据的变更来判断是否需要更新，因为用户有可能会修改图形属性映射\n                result.update(shapeCfg); // 更新对应的 element\n            }\n            delete lastElementsMap[elementId];\n        }\n        elements.push(result);\n        elementsMap[elementId] = result;\n        return elements;\n    };\n    /**\n     * 获取组成一条线（一组数据）的所有点以及数据\n     * @param mappingData 映射后的数组\n     */\n    Path.prototype.getPointsAndData = function (mappingData) {\n        var points = [];\n        var data = [];\n        for (var i = 0, len = mappingData.length; i < len; i++) {\n            var obj = mappingData[i];\n            points.push({\n                x: obj.x,\n                y: obj.y,\n            });\n            data.push(obj[FIELD_ORIGIN]);\n        }\n        return {\n            points: points,\n            data: data,\n        };\n    };\n    Path.prototype.getShapeInfo = function (mappingData) {\n        var shapeCfg = this.getDrawCfg(mappingData[0]);\n        var _a = this.getPointsAndData(mappingData), points = _a.points, data = _a.data;\n        shapeCfg.mappingData = mappingData;\n        shapeCfg.data = data;\n        shapeCfg.isStack = !!this.getAdjust('stack');\n        shapeCfg.points = points;\n        shapeCfg.connectNulls = this.connectNulls;\n        return shapeCfg;\n    };\n    return Path;\n}(Geometry));\nexport default Path;\n//# sourceMappingURL=path.js.map","import { each } from '@antv/util';\nimport { getPathPoints } from '../util/get-path-points';\nimport { getStyle } from '../util/get-style';\nimport { getLinePath, getSplinePath } from '../util/path';\nfunction getPath(points, isInCircle, smooth, registeredShape, constraint) {\n    var topLinePoints = []; // area 区域上部分\n    var bottomLinePoints = []; // area 区域下部分\n    for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n        topLinePoints.push(point[1]);\n        bottomLinePoints.push(point[0]);\n    }\n    bottomLinePoints = bottomLinePoints.reverse();\n    var path = [];\n    each([topLinePoints, bottomLinePoints], function (pointsData, index) {\n        var subPath = [];\n        var parsedPoints = registeredShape.parsePoints(pointsData);\n        var p1 = parsedPoints[0];\n        if (isInCircle) {\n            parsedPoints.push({ x: p1.x, y: p1.y });\n        }\n        if (smooth) {\n            subPath = getSplinePath(parsedPoints, false, constraint);\n        }\n        else {\n            subPath = getLinePath(parsedPoints, false);\n        }\n        if (index > 0) {\n            subPath[0][0] = 'L';\n        }\n        path = path.concat(subPath);\n    });\n    path.push(['Z']);\n    return path;\n}\n/**\n * @ignore\n * Gets shape attrs\n * @param cfg\n * @param isStroke\n * @param smooth\n * @param registeredShape\n * @param [constraint]\n * @returns\n */\nexport function getShapeAttrs(cfg, isStroke, smooth, registeredShape, constraint) {\n    var attrs = getStyle(cfg, isStroke, !isStroke, 'lineWidth');\n    var connectNulls = cfg.connectNulls, isInCircle = cfg.isInCircle, points = cfg.points;\n    var pathPoints = getPathPoints(points, connectNulls); // 根据 connectNulls 配置获取图形关键点\n    var path = [];\n    for (var i = 0, len = pathPoints.length; i < len; i++) {\n        var eachPoints = pathPoints[i];\n        path = path.concat(getPath(eachPoints, isInCircle, smooth, registeredShape, constraint));\n    }\n    attrs.path = path;\n    return attrs;\n}\n/**\n * @ignore\n * Gets constraint\n * @param coordinate\n * @returns constraint\n */\nexport function getConstraint(coordinate) {\n    var start = coordinate.start, end = coordinate.end;\n    return [\n        [start.x, end.y],\n        [end.x, start.y],\n    ];\n}\n//# sourceMappingURL=util.js.map","import { isArray } from '@antv/util';\nimport { registerShape, registerShapeFactory } from '../base';\nimport { getShapeAttrs } from './util';\nvar AreaShapeFactory = registerShapeFactory('area', {\n    defaultShapeType: 'area',\n    getDefaultPoints: function (pointInfo) {\n        // area 基本标记的绘制需要获取上下两边的顶点\n        var x = pointInfo.x, y0 = pointInfo.y0;\n        var y = isArray(pointInfo.y) ? pointInfo.y : [y0, pointInfo.y];\n        return y.map(function (yItem) {\n            return {\n                x: x,\n                y: yItem,\n            };\n        });\n    },\n});\n// Area 几何标记默认的 shape：填充的区域图\nregisterShape('area', 'area', {\n    draw: function (cfg, container) {\n        var attrs = getShapeAttrs(cfg, false, false, this);\n        var shape = container.addShape({\n            type: 'path',\n            attrs: attrs,\n            name: 'area',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: function (x, y, r) {\n                if (r === void 0) { r = 5.5; }\n                return [['M', x - r, y - 4], ['L', x + r, y - 4], ['L', x + r, y + 4], ['L', x - r, y + 4], ['Z']];\n            },\n            style: {\n                r: 5,\n                fill: color,\n            },\n        };\n    },\n});\nexport default AreaShapeFactory;\n//# sourceMappingURL=index.js.map","import { __extends } from \"tslib\";\nimport { FIELD_ORIGIN } from '../constant';\nimport Path from './path';\nimport './shape/area';\n/**\n * Area 几何标记类。\n * 常用于绘制面积图。\n */\nvar Area = /** @class */ (function (_super) {\n    __extends(Area, _super);\n    function Area(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.type = 'area';\n        _this.shapeType = 'area';\n        /** 生成图形关键点 */\n        _this.generatePoints = true;\n        /**\n         * 面积图是否从 0 基准线开始填充。\n         * 1. 默认值为 `true`，表现如下：\n         * ![image](https://gw.alipayobjects.com/zos/rmsportal/ZQqwUCczalrKqGgagOVp.png)\n         * 2. 当值为 `false` 时，表现如下：\n         * ![image](https://gw.alipayobjects.com/zos/rmsportal/yPswkaXvUpCYOdhocGwB.png)\n         */\n        _this.startOnZero = true;\n        var _a = cfg.startOnZero, startOnZero = _a === void 0 ? true : _a, _b = cfg.sortable, sortable = _b === void 0 ? true : _b;\n        _this.startOnZero = startOnZero; // 默认为 true\n        _this.sortable = sortable; // Area 默认会对数据按照 x 轴字段进行正向排序\n        return _this;\n    }\n    /**\n     * 获取图形绘制的关键点以及数据\n     * @param mappingData 映射后的数据\n     */\n    Area.prototype.getPointsAndData = function (mappingData) {\n        var points = [];\n        var data = [];\n        for (var i = 0, len = mappingData.length; i < len; i++) {\n            var obj = mappingData[i];\n            points.push(obj.points);\n            data.push(obj[FIELD_ORIGIN]);\n        }\n        return {\n            points: points,\n            data: data,\n        };\n    };\n    /**\n     * 获取 Y 轴上的最小值\n     * @returns y 字段最小值\n     */\n    Area.prototype.getYMinValue = function () {\n        if (this.startOnZero) {\n            return _super.prototype.getYMinValue.call(this);\n        }\n        var yScale = this.getYScale();\n        return yScale.min;\n    };\n    return Area;\n}(Path));\nexport default Area;\n//# sourceMappingURL=area.js.map","import { __assign } from \"tslib\";\nimport { registerShape, registerShapeFactory } from '../base';\nimport { getStyle } from '../util/get-style';\nimport { getLinePath } from '../util/path';\nimport { splitPoints } from '../util/split-points';\nvar EdgeShapeFactory = registerShapeFactory('edge', {\n    defaultShapeType: 'line',\n    getDefaultPoints: function (pointInfo) {\n        return splitPoints(pointInfo);\n    },\n});\nregisterShape('edge', 'line', {\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, true, false, 'lineWidth');\n        var path = getLinePath(this.parsePoints(cfg.points), this.coordinate.isPolar);\n        return container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path }),\n        });\n    },\n    getMarker: function (markerCfg) {\n        return {\n            symbol: 'circle',\n            style: {\n                r: 4.5,\n                fill: markerCfg.color,\n            },\n        };\n    }\n});\nexport default EdgeShapeFactory;\n//# sourceMappingURL=index.js.map","import { __extends } from \"tslib\";\nimport Geometry from './base';\nimport './shape/edge';\n/**\n * Edge 几何标记，用于绘制关系图中的**边**图形，如：\n * 1. 流程图\n * 2. 树\n * 3. 弧长连接图\n * 4. 和弦图\n * 5. 桑基图\n */\nvar Edge = /** @class */ (function (_super) {\n    __extends(Edge, _super);\n    function Edge() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'edge';\n        _this.shapeType = 'edge';\n        _this.generatePoints = true;\n        return _this;\n    }\n    return Edge;\n}(Geometry));\nexport default Edge;\n//# sourceMappingURL=edge.js.map","import { __assign, __extends } from \"tslib\";\nimport ColorUtil from '@antv/color-util';\nimport { get, isNumber } from '@antv/util';\nimport { FIELD_ORIGIN } from '../constant';\nimport Geometry from './base';\n/**\n * 用于绘制热力图。\n */\nvar Heatmap = /** @class */ (function (_super) {\n    __extends(Heatmap, _super);\n    function Heatmap() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'heatmap';\n        _this.paletteCache = {};\n        return _this;\n    }\n    Heatmap.prototype.createElements = function (mappingData, index, isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n        var range = this.prepareRange(mappingData);\n        var radius = this.prepareSize();\n        var blur = get(this.styleOption, ['style', 'shadowBlur']);\n        if (!isNumber(blur)) {\n            blur = radius / 2;\n        }\n        this.prepareGreyScaleBlurredCircle(radius, blur);\n        this.drawWithRange(mappingData, range, radius, blur);\n        return null;\n    };\n    /**\n     * clear\n     */\n    Heatmap.prototype.clear = function () {\n        _super.prototype.clear.call(this);\n        this.clearShadowCanvasCtx();\n        this.paletteCache = {};\n    };\n    Heatmap.prototype.prepareRange = function (data) {\n        var colorAttr = this.getAttribute('color');\n        var colorField = colorAttr.getFields()[0];\n        var min = Infinity;\n        var max = -Infinity;\n        data.forEach(function (row) {\n            var value = row[FIELD_ORIGIN][colorField];\n            if (value > max) {\n                max = value;\n            }\n            if (value < min) {\n                min = value;\n            }\n        });\n        if (min === max) {\n            min = max - 1;\n        }\n        return [min, max];\n    };\n    Heatmap.prototype.prepareSize = function () {\n        var radius = this.getDefaultValue('size');\n        if (!isNumber(radius)) {\n            radius = this.getDefaultSize();\n        }\n        return radius;\n    };\n    Heatmap.prototype.prepareGreyScaleBlurredCircle = function (radius, blur) {\n        var grayScaleBlurredCanvas = this.getGrayScaleBlurredCanvas();\n        var r2 = radius + blur;\n        var ctx = grayScaleBlurredCanvas.getContext('2d');\n        grayScaleBlurredCanvas.width = grayScaleBlurredCanvas.height = r2 * 2;\n        ctx.clearRect(0, 0, grayScaleBlurredCanvas.width, grayScaleBlurredCanvas.height);\n        ctx.shadowOffsetX = ctx.shadowOffsetY = r2 * 2;\n        ctx.shadowBlur = blur;\n        ctx.shadowColor = 'black';\n        ctx.beginPath();\n        ctx.arc(-r2, -r2, radius, 0, Math.PI * 2, true);\n        ctx.closePath();\n        ctx.fill();\n    };\n    Heatmap.prototype.drawWithRange = function (data, range, radius, blur) {\n        // canvas size\n        var _a = this.coordinate, start = _a.start, end = _a.end;\n        var width = this.coordinate.getWidth();\n        var height = this.coordinate.getHeight();\n        // value, range, etc\n        var colorAttr = this.getAttribute('color');\n        var valueField = colorAttr.getFields()[0];\n        // prepare shadow canvas context\n        this.clearShadowCanvasCtx();\n        var ctx = this.getShadowCanvasCtx();\n        // filter data\n        if (range) {\n            data = data.filter(function (row) {\n                return row[FIELD_ORIGIN][valueField] <= range[1] && row[FIELD_ORIGIN][valueField] >= range[0];\n            });\n        }\n        // step1. draw points with shadow\n        var scale = this.scales[valueField];\n        for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n            var obj = data_1[_i];\n            var _b = this.getDrawCfg(obj), x = _b.x, y = _b.y;\n            var alpha = scale.scale(obj[FIELD_ORIGIN][valueField]);\n            this.drawGrayScaleBlurredCircle(x - start.x, y - end.y, radius + blur, alpha, ctx);\n        }\n        // step2. convert pixels\n        var colored = ctx.getImageData(0, 0, width, height);\n        this.clearShadowCanvasCtx();\n        this.colorize(colored);\n        ctx.putImageData(colored, 0, 0);\n        var imageShape = this.getImageShape();\n        imageShape.attr('x', start.x);\n        imageShape.attr('y', end.y);\n        imageShape.attr('width', width);\n        imageShape.attr('height', height);\n        imageShape.attr('img', ctx.canvas);\n        imageShape.set('origin', this.getShapeInfo(data)); // 存储绘图信息数据\n    };\n    Heatmap.prototype.getDefaultSize = function () {\n        var position = this.getAttribute('position');\n        var coordinate = this.coordinate;\n        return Math.min(coordinate.getWidth() / (position.scales[0].ticks.length * 4), coordinate.getHeight() / (position.scales[1].ticks.length * 4));\n    };\n    Heatmap.prototype.clearShadowCanvasCtx = function () {\n        var ctx = this.getShadowCanvasCtx();\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    };\n    Heatmap.prototype.getShadowCanvasCtx = function () {\n        var canvas = this.shadowCanvas;\n        if (!canvas) {\n            canvas = document.createElement('canvas');\n            this.shadowCanvas = canvas;\n        }\n        canvas.width = this.coordinate.getWidth();\n        canvas.height = this.coordinate.getHeight();\n        return canvas.getContext('2d');\n    };\n    Heatmap.prototype.getGrayScaleBlurredCanvas = function () {\n        if (!this.grayScaleBlurredCanvas) {\n            this.grayScaleBlurredCanvas = document.createElement('canvas');\n        }\n        return this.grayScaleBlurredCanvas;\n    };\n    Heatmap.prototype.drawGrayScaleBlurredCircle = function (x, y, r, alpha, ctx) {\n        var grayScaleBlurredCanvas = this.getGrayScaleBlurredCanvas();\n        ctx.globalAlpha = alpha;\n        ctx.drawImage(grayScaleBlurredCanvas, x - r, y - r);\n    };\n    Heatmap.prototype.colorize = function (img) {\n        var colorAttr = this.getAttribute('color');\n        var pixels = img.data;\n        var paletteCache = this.paletteCache;\n        for (var i = 3; i < pixels.length; i += 4) {\n            var alpha = pixels[i]; // get gradient color from opacity value\n            if (isNumber(alpha)) {\n                var palette = paletteCache[alpha] ? paletteCache[alpha] : ColorUtil.rgb2arr(colorAttr.gradient(alpha / 256));\n                pixels[i - 3] = palette[0];\n                pixels[i - 2] = palette[1];\n                pixels[i - 1] = palette[2];\n                pixels[i] = alpha;\n            }\n        }\n    };\n    Heatmap.prototype.getImageShape = function () {\n        var imageShape = this.imageShape;\n        if (imageShape) {\n            return imageShape;\n        }\n        var container = this.container;\n        imageShape = container.addShape({\n            type: 'image',\n            attrs: {},\n        });\n        this.imageShape = imageShape;\n        return imageShape;\n    };\n    Heatmap.prototype.getShapeInfo = function (mappingData) {\n        var shapeCfg = this.getDrawCfg(mappingData[0]);\n        return __assign(__assign({}, shapeCfg), { mappingData: mappingData, data: this.getData(mappingData) });\n    };\n    Heatmap.prototype.getData = function (mappingData) {\n        return mappingData.map(function (obj) {\n            return obj[FIELD_ORIGIN];\n        });\n    };\n    return Heatmap;\n}(Geometry));\nexport default Heatmap;\n//# sourceMappingURL=heatmap.js.map","import { isArray, isNil } from '@antv/util';\n/**\n * @ignore\n * 根据数据点生成矩形的四个关键点\n * @param pointInfo 数据点信息\n * @param [isPyramid] 是否为尖底漏斗图\n * @returns rect points 返回矩形四个顶点信息\n */\nexport function getRectPoints(pointInfo, isPyramid) {\n    if (isPyramid === void 0) { isPyramid = false; }\n    var x = pointInfo.x, y = pointInfo.y, y0 = pointInfo.y0, size = pointInfo.size;\n    // 有 4 种情况，\n    // 1. x, y 都不是数组\n    // 2. y是数组，x不是\n    // 3. x是数组，y不是\n    // 4. x, y 都是数组\n    var yMin;\n    var yMax;\n    if (isArray(y)) {\n        yMin = y[0], yMax = y[1];\n    }\n    else {\n        yMin = y0;\n        yMax = y;\n    }\n    var xMin;\n    var xMax;\n    if (isArray(x)) {\n        xMin = x[0], xMax = x[1];\n    }\n    else {\n        xMin = x - size / 2;\n        xMax = x + size / 2;\n    }\n    var points = [\n        { x: xMin, y: yMin },\n        { x: xMin, y: yMax },\n    ];\n    if (isPyramid) {\n        // 绘制尖底漏斗图\n        // 金字塔漏斗图的关键点\n        // 1\n        // |   2\n        // 0\n        points.push({\n            x: xMax,\n            y: (yMax + yMin) / 2,\n        });\n    }\n    else {\n        // 矩形的四个关键点，结构如下（左下角顺时针连接）\n        // 1 ---- 2\n        // |      |\n        // 0 ---- 3\n        points.push({ x: xMax, y: yMax }, { x: xMax, y: yMin });\n    }\n    return points;\n}\n/**\n * @ignore\n * 根据矩形关键点绘制 path\n * @param points 关键点数组\n * @returns 返回矩形的 path\n */\nexport function getRectPath(points) {\n    var path = [];\n    var firstPoint = points[0];\n    path.push(['M', firstPoint.x, firstPoint.y]);\n    for (var i = 1, len = points.length; i < len; i++) {\n        path.push(['L', points[i].x, points[i].y]);\n    }\n    path.push(['L', firstPoint.x, firstPoint.y]); // 需要闭合\n    path.push(['z']);\n    return path;\n}\n/**\n * @ignore\n * 根据 funnel 关键点绘制漏斗图的 path\n * @param points 图形关键点信息\n * @param nextPoints 下一个数据的图形关键点信息\n * @param isPyramid 是否为尖底漏斗图\n * @returns 返回漏斗图的图形 path\n */\nexport function getFunnelPath(points, nextPoints, isPyramid) {\n    var path = [];\n    if (!isNil(nextPoints)) {\n        path.push(['M', points[0].x, points[0].y], ['L', points[1].x, points[1].y], ['L', nextPoints[1].x, nextPoints[1].y], ['L', nextPoints[0].x, nextPoints[0].y], ['Z']);\n    }\n    else if (isPyramid) {\n        // 金字塔最底部\n        path.push(['M', points[0].x, points[0].y], ['L', points[1].x, points[1].y], ['L', points[2].x, points[2].y], ['L', points[2].x, points[2].y], ['Z']);\n    }\n    else {\n        // 漏斗图最底部\n        path.push(['M', points[0].x, points[0].y], ['L', points[1].x, points[1].y], ['L', points[2].x, points[2].y], ['L', points[3].x, points[3].y], ['Z']);\n    }\n    return path;\n}\n//# sourceMappingURL=util.js.map","import { __assign } from \"tslib\";\nimport { registerShape, registerShapeFactory } from '../base';\nimport { getStyle } from '../util/get-style';\nimport { getRectPath, getRectPoints } from './util';\n/** Interval 的 shape 工厂 */\nvar IntervalShapeFactory = registerShapeFactory('interval', {\n    defaultShapeType: 'rect',\n    getDefaultPoints: function (pointInfo) {\n        return getRectPoints(pointInfo);\n    },\n});\n/** Inerval 默认 shape，填充的矩形 */\nregisterShape('interval', 'rect', {\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, false, true);\n        var path = this.parsePath(getRectPath(cfg.points));\n        var shape = container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path }),\n            name: 'interval',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color, isInPolar = markerCfg.isInPolar;\n        if (isInPolar) {\n            return {\n                symbol: 'circle',\n                style: {\n                    r: 4.5,\n                    fill: color,\n                },\n            };\n        }\n        return {\n            symbol: 'square',\n            style: {\n                r: 4,\n                fill: color,\n            },\n        };\n    },\n});\nexport default IntervalShapeFactory;\n//# sourceMappingURL=index.js.map","import { flatten, isString, valuesOfKey } from '@antv/util';\nimport { getXDimensionLength } from '../../util/coordinate';\n// 已经排序后的数据查找距离最小的\nfunction findMinDistance(arr, scale) {\n    var count = arr.length;\n    var sourceArr = arr;\n    if (isString(sourceArr[0])) {\n        // 日期类型的 values 经常上文本类型，所以需要转换一下\n        sourceArr = arr.map(function (v) {\n            return scale.translate(v);\n        });\n    }\n    var distance = sourceArr[1] - sourceArr[0];\n    for (var i = 2; i < count; i++) {\n        var tmp = sourceArr[i] - sourceArr[i - 1];\n        if (distance > tmp) {\n            distance = tmp;\n        }\n    }\n    return distance;\n}\nfunction getDodgeCount(dataArray, dodgeBy) {\n    if (dodgeBy) {\n        var mergeData = flatten(dataArray);\n        var values = valuesOfKey(mergeData, dodgeBy);\n        return values.length;\n    }\n    return dataArray.length;\n}\n/** @ignore */\nexport function getDefaultSize(geometry) {\n    var theme = geometry.theme;\n    var coordinate = geometry.coordinate;\n    var xScale = geometry.getXScale();\n    var xValues = xScale.values;\n    var dataArray = geometry.beforeMappingData;\n    var count = xValues.length;\n    if (xScale.isLinear && xValues.length > 1) {\n        // Linear 类型用户有可能设置了 min, max 范围所以需要根据数据最小区间计算 count\n        xValues.sort();\n        var interval = findMinDistance(xValues, xScale);\n        count = (xScale.max - xScale.min) / interval;\n        if (xValues.length > count) {\n            count = xValues.length;\n        }\n    }\n    var range = xScale.range;\n    var normalizedSize = 1 / count;\n    var wr = 1;\n    if (coordinate.isPolar) {\n        if (coordinate.isTransposed && count > 1) {\n            // 极坐标下多层环图\n            wr = theme.multiplePieWidthRatio;\n        }\n        else {\n            wr = theme.roseWidthRatio;\n        }\n    }\n    else {\n        if (xScale.isLinear) {\n            normalizedSize *= range[1] - range[0];\n        }\n        wr = theme.columnWidthRatio;\n    }\n    normalizedSize *= wr;\n    if (geometry.getAdjust('dodge')) {\n        var dodgeAdjust = geometry.getAdjust('dodge');\n        var dodgeBy = dodgeAdjust.dodgeBy;\n        var dodgeCount = getDodgeCount(dataArray, dodgeBy);\n        normalizedSize = normalizedSize / dodgeCount;\n    }\n    // 最大和最小限制\n    var maxColumnWidth = theme.maxColumnWidth, minColumnWidth = theme.minColumnWidth;\n    var xDimensionLength = getXDimensionLength(geometry.coordinate);\n    if (maxColumnWidth) {\n        var normalizedMaxColumnWidth = maxColumnWidth / xDimensionLength;\n        if (normalizedSize > normalizedMaxColumnWidth) {\n            normalizedSize = normalizedMaxColumnWidth;\n        }\n    }\n    if (minColumnWidth) {\n        var normalizedMinColumnWidth = minColumnWidth / xDimensionLength;\n        if (normalizedSize < normalizedMinColumnWidth) {\n            normalizedSize = normalizedMinColumnWidth;\n        }\n    }\n    return normalizedSize;\n}\n//# sourceMappingURL=shape-size.js.map","import { __extends } from \"tslib\";\nimport { get } from '@antv/util';\nimport { getXDimensionLength } from '../util/coordinate';\nimport Geometry from './base';\n/** 引入对应的 ShapeFactory */\nimport './shape/interval';\nimport { getDefaultSize } from './util/shape-size';\n/**\n * Interval 几何标记。\n * 用于绘制柱状图、饼图、条形图、玫瑰图等。\n */\nvar Interval = /** @class */ (function (_super) {\n    __extends(Interval, _super);\n    function Interval() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'interval';\n        _this.shapeType = 'interval';\n        _this.generatePoints = true;\n        return _this;\n    }\n    /**\n     * 获取每条数据的 Shape 绘制信息\n     * @param obj 经过分组 -> 数字化 -> adjust 调整后的数据记录\n     * @returns\n     */\n    Interval.prototype.createShapePointsCfg = function (obj) {\n        var cfg = _super.prototype.createShapePointsCfg.call(this, obj);\n        // 计算每个 shape 的 size\n        var size;\n        var sizeAttr = this.getAttribute('size');\n        if (sizeAttr) {\n            size = this.getAttributeValues(sizeAttr, obj)[0];\n            // 归一化\n            var coordinate = this.coordinate;\n            var coordinateWidth = getXDimensionLength(coordinate);\n            size = size / coordinateWidth;\n        }\n        else {\n            if (!this.defaultSize) {\n                this.defaultSize = getDefaultSize(this);\n            }\n            size = this.defaultSize;\n        }\n        cfg.size = size;\n        return cfg;\n    };\n    /**\n     * 调整 y 轴的 scale 范围。\n     * 对于 Y 轴为数值轴柱状图，默认从 0 开始 生长。\n     */\n    Interval.prototype.adjustScale = function () {\n        _super.prototype.adjustScale.call(this);\n        var yScale = this.getYScale();\n        // 特殊逻辑：饼图需要填充满整个空间\n        if (this.coordinate.type === 'theta') {\n            yScale.change({\n                nice: false,\n                min: 0,\n                // 发生过 stack 调整，yScale 的 max 被调整过，this.updateStackRange()\n                max: Math.max(Math.max.apply(null, yScale.values), yScale.max),\n            });\n        }\n        else {\n            // 柱状图数值轴默认从 0 开始\n            var scaleDefs = this.scaleDefs;\n            var field = yScale.field, min = yScale.min, max = yScale.max, type = yScale.type;\n            if (type !== 'time') {\n                // time 类型不做调整\n                // 柱状图的 Y 轴要从 0 开始生长，但是如果用户设置了则以用户的为准\n                if (min > 0 && !get(scaleDefs, [field, 'min'])) {\n                    yScale.change({\n                        min: 0,\n                    });\n                }\n                // 柱当柱状图全为负值时也需要从 0 开始生长，但是如果用户设置了则以用户的为准\n                if (max <= 0 && !get(scaleDefs, [field, 'max'])) {\n                    yScale.change({\n                        max: 0,\n                    });\n                }\n            }\n        }\n    };\n    return Interval;\n}(Geometry));\nexport default Interval;\n//# sourceMappingURL=interval.js.map","import { __extends } from \"tslib\";\nimport Path from './path';\n/** 引入 Path 对应的 ShapeFactory */\nimport './shape/line';\n/**\n * Line 几何标记。\n * 常用于折线图的绘制。\n */\nvar Line = /** @class */ (function (_super) {\n    __extends(Line, _super);\n    function Line(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.type = 'line';\n        var _a = cfg.sortable, sortable = _a === void 0 ? true : _a; // Line 默认会对数据按照 x 轴字段进行排序\n        _this.sortable = sortable;\n        return _this;\n    }\n    return Line;\n}(Path));\nexport default Line;\n//# sourceMappingURL=line.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @ignore */\nexports.MarkerSymbols = {\n    hexagon: function (x, y, r) {\n        var diffX = (r / 2) * Math.sqrt(3);\n        return [\n            ['M', x, y - r],\n            ['L', x + diffX, y - r / 2],\n            ['L', x + diffX, y + r / 2],\n            ['L', x, y + r],\n            ['L', x - diffX, y + r / 2],\n            ['L', x - diffX, y - r / 2],\n            ['Z'],\n        ];\n    },\n    bowtie: function (x, y, r) {\n        var diffY = r - 1.5;\n        return [['M', x - r, y - diffY], ['L', x + r, y + diffY], ['L', x + r, y - diffY], ['L', x - r, y + diffY], ['Z']];\n    },\n    cross: function (x, y, r) {\n        return [\n            ['M', x - r, y - r],\n            ['L', x + r, y + r],\n            ['M', x + r, y - r],\n            ['L', x - r, y + r],\n        ];\n    },\n    tick: function (x, y, r) {\n        return [\n            ['M', x - r / 2, y - r],\n            ['L', x + r / 2, y - r],\n            ['M', x, y - r],\n            ['L', x, y + r],\n            ['M', x - r / 2, y + r],\n            ['L', x + r / 2, y + r],\n        ];\n    },\n    plus: function (x, y, r) {\n        return [\n            ['M', x - r, y],\n            ['L', x + r, y],\n            ['M', x, y - r],\n            ['L', x, y + r],\n        ];\n    },\n    hyphen: function (x, y, r) {\n        return [\n            ['M', x - r, y],\n            ['L', x + r, y],\n        ];\n    },\n    line: function (x, y, r) {\n        return [\n            ['M', x, y - r],\n            ['L', x, y + r],\n        ];\n    },\n};\n//# sourceMappingURL=marker.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar marker_1 = require(\"../../../util/marker\");\nvar get_style_1 = require(\"../util/get-style\");\nexports.SHAPES = ['circle', 'square', 'bowtie', 'diamond', 'hexagon', 'triangle', 'triangle-down'];\nexports.HOLLOW_SHAPES = ['cross', 'tick', 'plus', 'hyphen', 'line'];\n/**\n * @ignore\n * Draws points\n * @param shape\n * @param cfg\n * @param container\n * @param shapeName\n * @param isStroke\n * @returns points\n */\nfunction drawPoints(shape, cfg, container, shapeName, isStroke) {\n    var style = get_style_1.getStyle(cfg, isStroke, !isStroke, 'r');\n    var points = shape.parsePoints(cfg.points);\n    var pointPosition = points[0];\n    if (cfg.isStack) {\n        pointPosition = points[1];\n    }\n    else if (points.length > 1) {\n        var group = container.addGroup();\n        for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {\n            var point = points_1[_i];\n            group.addShape({\n                type: 'marker',\n                attrs: tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({}, style), { symbol: marker_1.MarkerSymbols[shapeName] || shapeName }), point),\n            });\n        }\n        return group;\n    }\n    return container.addShape({\n        type: 'marker',\n        attrs: tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({}, style), { symbol: marker_1.MarkerSymbols[shapeName] || shapeName }), pointPosition),\n    });\n}\nexports.drawPoints = drawPoints;\n//# sourceMappingURL=util.js.map","import { each } from '@antv/util';\nimport { MarkerSymbols } from '../../../util/marker';\nimport { registerShape, registerShapeFactory } from '../base';\nimport { splitPoints } from '../util/split-points';\nimport { drawPoints, SHAPES } from './util';\nvar PointShapeFactory = registerShapeFactory('point', {\n    defaultShapeType: 'hollow-circle',\n    getDefaultPoints: function (pointInfo) {\n        return splitPoints(pointInfo);\n    },\n});\neach(SHAPES, function (shapeName) {\n    // 添加该 shape 对应的 hollow-shape\n    registerShape('point', \"hollow-\" + shapeName, {\n        draw: function (cfg, container) {\n            return drawPoints(this, cfg, container, shapeName, true);\n        },\n        getMarker: function (markerCfg) {\n            var color = markerCfg.color;\n            return {\n                symbol: MarkerSymbols[shapeName] || shapeName,\n                style: {\n                    r: 4.5,\n                    stroke: color,\n                    fill: null,\n                },\n            };\n        },\n    });\n});\nexport default PointShapeFactory;\n//# sourceMappingURL=index.js.map","import { __assign, __extends } from \"tslib\";\nimport Geometry from './base';\n/** 引入 Point 对应的 ShapeFactory */\nimport './shape/point';\n/**\n * Point 几何标记。\n * 常用于绘制点图。\n */\nvar Point = /** @class */ (function (_super) {\n    __extends(Point, _super);\n    function Point() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'point';\n        _this.shapeType = 'point';\n        _this.generatePoints = true;\n        return _this;\n    }\n    /**\n     * 获取一个点的绘制信息。\n     * @param mappingDatum\n     * @returns draw cfg\n     */\n    Point.prototype.getDrawCfg = function (mappingDatum) {\n        var shapeCfg = _super.prototype.getDrawCfg.call(this, mappingDatum);\n        return __assign(__assign({}, shapeCfg), { isStack: !!this.getAdjust('stack') });\n    };\n    return Point;\n}(Geometry));\nexport default Point;\n//# sourceMappingURL=point.js.map","import { __assign } from \"tslib\";\nimport { each, isEmpty, isEqual, last } from '@antv/util';\nimport { registerShape, registerShapeFactory } from '../base';\nimport { getStyle } from '../util/get-style';\nfunction getPath(points) {\n    var flag = points[0];\n    var i = 1;\n    var path = [['M', flag.x, flag.y]];\n    while (i < points.length) {\n        var c = points[i];\n        if (c.x !== points[i - 1].x || c.y !== points[i - 1].y) {\n            path.push(['L', c.x, c.y]);\n            if (c.x === flag.x && c.y === flag.y && i < points.length - 1) {\n                flag = points[i + 1];\n                path.push(['Z']);\n                path.push(['M', flag.x, flag.y]);\n                i++;\n            }\n        }\n        i++;\n    }\n    if (!isEqual(last(path), flag)) {\n        path.push(['L', flag.x, flag.y]);\n    }\n    path.push(['Z']);\n    return path;\n}\nvar PolygonShapeFactory = registerShapeFactory('polygon', {\n    defaultShapeType: 'polygon',\n    getDefaultPoints: function (pointInfo) {\n        var points = [];\n        each(pointInfo.x, function (subX, index) {\n            var subY = pointInfo.y[index];\n            points.push({\n                x: subX,\n                y: subY,\n            });\n        });\n        return points;\n    },\n});\nregisterShape('polygon', 'polygon', {\n    draw: function (cfg, container) {\n        if (!isEmpty(cfg.points)) {\n            var shapeAttrs = getStyle(cfg, true, true);\n            var path = this.parsePath(getPath(cfg.points));\n            return container.addShape('path', {\n                attrs: __assign(__assign({}, shapeAttrs), { path: path }),\n                name: 'polygon',\n            });\n        }\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: 'square',\n            style: {\n                r: 4,\n                fill: color,\n            },\n        };\n    },\n});\nexport default PolygonShapeFactory;\n//# sourceMappingURL=index.js.map","import { __extends } from \"tslib\";\nimport { isArray } from '@antv/util';\nimport Geometry from './base';\n/** 引入 Path 对应的 ShapeFactory */\nimport './shape/polygon';\n/**\n * Polygon 几何标记。\n * 常用于绘制色块图、日历图等。\n */\nvar Polygon = /** @class */ (function (_super) {\n    __extends(Polygon, _super);\n    function Polygon() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'polygon';\n        _this.shapeType = 'polygon';\n        _this.generatePoints = true;\n        return _this;\n    }\n    /**\n     * 获取 Shape 的关键点数据。\n     * @param obj\n     * @returns\n     */\n    Polygon.prototype.createShapePointsCfg = function (obj) {\n        var cfg = _super.prototype.createShapePointsCfg.call(this, obj);\n        var x = cfg.x;\n        var y = cfg.y;\n        var temp;\n        // x y 都是数组时，不做处理\n        if (!(isArray(x) && isArray(y))) {\n            var xScale = this.getXScale();\n            var yScale = this.getYScale();\n            var xCount = xScale.values.length;\n            var yCount = yScale.values.length;\n            var xOffset = (0.5 * 1) / xCount;\n            var yOffset = (0.5 * 1) / yCount;\n            if (xScale.isCategory && yScale.isCategory) {\n                // 如果x,y都是分类\n                x = [x - xOffset, x - xOffset, x + xOffset, x + xOffset];\n                y = [y - yOffset, y + yOffset, y + yOffset, y - yOffset];\n            }\n            else if (isArray(x)) {\n                // x 是数组\n                temp = x;\n                x = [temp[0], temp[0], temp[1], temp[1]];\n                y = [y - yOffset / 2, y + yOffset / 2, y + yOffset / 2, y - yOffset / 2];\n            }\n            else if (isArray(y)) {\n                // y 是数组\n                temp = y;\n                y = [temp[0], temp[1], temp[1], temp[0]];\n                x = [x - xOffset / 2, x - xOffset / 2, x + xOffset / 2, x + xOffset / 2];\n            }\n            cfg.x = x;\n            cfg.y = y;\n        }\n        return cfg;\n    };\n    return Polygon;\n}(Geometry));\nexport default Polygon;\n//# sourceMappingURL=polygon.js.map","import { registerShapeFactory } from '../base';\nvar SchemaShapeFactory = registerShapeFactory('schema', {\n    defaultShapeType: '',\n});\nexport default SchemaShapeFactory;\n//# sourceMappingURL=index.js.map","import { __extends } from \"tslib\";\nimport { getXDimensionLength } from '../util/coordinate';\nimport Geometry from './base';\n/** 引入对应的 ShapeFactory */\nimport './shape/schema';\nimport { getDefaultSize } from './util/shape-size';\n/**\n * Schema 几何标记，用于一些自定义图形的绘制，比如箱型图、股票图等。\n */\nvar Schema = /** @class */ (function (_super) {\n    __extends(Schema, _super);\n    function Schema() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'schema';\n        _this.shapeType = 'schema';\n        _this.generatePoints = true;\n        return _this;\n    }\n    /**\n     * 获取 Shape 的关键点数据。\n     * @param record\n     * @returns\n     */\n    Schema.prototype.createShapePointsCfg = function (record) {\n        var cfg = _super.prototype.createShapePointsCfg.call(this, record);\n        // 计算每个 shape 的 size\n        var size;\n        var sizeAttr = this.getAttribute('size');\n        if (sizeAttr) {\n            size = this.getAttributeValues(sizeAttr, record)[0];\n            // 归一化\n            var coordinate = this.coordinate;\n            var coordinateWidth = getXDimensionLength(coordinate);\n            size = size / coordinateWidth;\n        }\n        else {\n            if (!this.defaultSize) {\n                this.defaultSize = getDefaultSize(this);\n            }\n            size = this.defaultSize;\n        }\n        cfg.size = size;\n        return cfg;\n    };\n    return Schema;\n}(Geometry));\nexport default Schema;\n//# sourceMappingURL=schema.js.map","import { each } from '@antv/util';\n/**\n * @ignore\n * Gets cpath\n * @param from\n * @param to\n * @returns\n */\nexport function getCPath(from, to) {\n    var points = [];\n    points.push({\n        x: from.x,\n        y: from.y * 1 / 2 + to.y * 1 / 2,\n    });\n    points.push({\n        x: to.x,\n        y: from.y * 1 / 2 + to.y * 1 / 2,\n    });\n    points.push(to);\n    var sub = ['C'];\n    each(points, function (point) {\n        sub.push(point.x, point.y);\n    });\n    return sub;\n}\n/**\n * @ignore\n * Gets qpath\n * @param to\n * @param center\n * @returns\n */\nexport function getQPath(to, center) {\n    var points = [];\n    points.push({\n        x: center.x,\n        y: center.y\n    });\n    points.push(to);\n    var sub = ['Q'];\n    each(points, function (point) {\n        sub.push(point.x, point.y);\n    });\n    return sub;\n}\n//# sourceMappingURL=util.js.map","import { registerShape } from '../base';\nimport { getShapeAttrs } from './util';\n/**\n * 描边但不填充的区域图\n */\nregisterShape('area', 'line', {\n    draw: function (cfg, container) {\n        var attrs = getShapeAttrs(cfg, true, false, this);\n        var shape = container.addShape({\n            type: 'path',\n            attrs: attrs,\n            name: 'area',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: function (x, y, r) {\n                if (r === void 0) { r = 5.5; }\n                return [['M', x - r, y - 4], ['L', x + r, y - 4], ['L', x + r, y + 4], ['L', x - r, y + 4], ['Z']];\n            },\n            style: {\n                r: 5,\n                stroke: color,\n                fill: null,\n            },\n        };\n    },\n});\n//# sourceMappingURL=line.js.map","import { registerShape } from '../base';\nimport { getConstraint, getShapeAttrs } from './util';\n/**\n * 填充的平滑曲面图\n */\nregisterShape('area', 'smooth', {\n    draw: function (cfg, container) {\n        var coordinate = this.coordinate;\n        var attrs = getShapeAttrs(cfg, false, true, this, getConstraint(coordinate));\n        var shape = container.addShape({\n            type: 'path',\n            attrs: attrs,\n            name: 'area',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: function (x, y, r) {\n                if (r === void 0) { r = 5.5; }\n                return [['M', x - r, y - 4], ['L', x + r, y - 4], ['L', x + r, y + 4], ['L', x - r, y + 4], ['Z']];\n            },\n            style: {\n                r: 5,\n                fill: color,\n            },\n        };\n    },\n});\n//# sourceMappingURL=smooth.js.map","import { registerShape } from '../base';\nimport { getConstraint, getShapeAttrs } from './util';\n/** 描边的平滑曲面图 */\nregisterShape('area', 'smooth-line', {\n    draw: function (cfg, container) {\n        var coordinate = this.coordinate;\n        var attrs = getShapeAttrs(cfg, true, true, this, getConstraint(coordinate));\n        var shape = container.addShape({\n            type: 'path',\n            attrs: attrs,\n            name: 'area',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: function (x, y, r) {\n                if (r === void 0) { r = 5.5; }\n                return [['M', x - r, y - 4], ['L', x + r, y - 4], ['L', x + r, y + 4], ['L', x - r, y + 4], ['Z']];\n            },\n            style: {\n                r: 5,\n                stroke: color,\n                fill: null,\n            },\n        };\n    },\n});\n//# sourceMappingURL=smooth-line.js.map","import { __assign } from \"tslib\";\nimport { getArcPath } from '../../../util/graphics';\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nimport { getCPath, getQPath } from './util';\nfunction getArcShapePath(from, to, center) {\n    var sub = getQPath(to, center);\n    var path = [\n        ['M', from.x, from.y]\n    ];\n    path.push(sub);\n    return path;\n}\nfunction getArcShapeWeightPath(points, center) {\n    var arc1 = getQPath(points[1], center);\n    var arc2 = getQPath(points[3], center);\n    var path = [\n        ['M', points[0].x, points[0].y]\n    ];\n    path.push(arc2);\n    path.push(['L', points[3].x, points[3].y]);\n    path.push(['L', points[2].x, points[2].y]);\n    path.push(arc1);\n    path.push(['L', points[1].x, points[1].y]);\n    path.push(['L', points[0].x, points[0].y]);\n    path.push(['Z']);\n    return path;\n}\n// 弧线包括笛卡尔坐标系下的半圆弧线、极坐标系下以圆心为控制点的二阶曲线、笛卡尔坐标系下带权重的三阶曲线、极坐标系下带权重的以圆心为控制点的二阶曲线\nregisterShape('edge', 'arc', {\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, true, false, 'lineWidth');\n        var points = cfg.points;\n        var type = points.length > 2 ? 'weight' : 'normal';\n        var path;\n        if (cfg.isInCircle) {\n            var center = { x: 0, y: 1 };\n            if (type === 'normal') {\n                path = getArcShapePath(points[0], points[1], center);\n            }\n            else {\n                style.fill = style.stroke;\n                path = getArcShapeWeightPath(points, center);\n            }\n            path = this.parsePath(path);\n            return container.addShape('path', {\n                attrs: __assign(__assign({}, style), { path: path }),\n            });\n        }\n        else {\n            if (type === 'normal') {\n                points = this.parsePoints(points);\n                path = getArcPath((points[1].x + points[0].x) / 2, points[0].y, Math.abs((points[1].x - points[0].x)) / 2, Math.PI, Math.PI * 2);\n                return container.addShape('path', {\n                    attrs: __assign(__assign({}, style), { path: path }),\n                });\n            }\n            else {\n                var c1 = getCPath(points[1], points[3]);\n                var c2 = getCPath(points[2], points[0]);\n                path = [\n                    ['M', points[0].x, points[0].y],\n                    ['L', points[1].x, points[1].y],\n                    c1,\n                    ['L', points[3].x, points[3].y],\n                    ['L', points[2].x, points[2].y],\n                    c2,\n                    ['Z'],\n                ];\n                path = this.parsePath(path);\n                style.fill = style.stroke;\n                return container.addShape('path', {\n                    attrs: __assign(__assign({}, style), { path: path }),\n                });\n            }\n        }\n    },\n    getMarker: function (markerCfg) {\n        return {\n            symbol: 'circle',\n            style: {\n                r: 4.5,\n                fill: markerCfg.color,\n            },\n        };\n    }\n});\n//# sourceMappingURL=arc.js.map","import { __assign } from \"tslib\";\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nimport { getCPath } from './util';\nfunction getSmoothPath(from, to) {\n    var sub = getCPath(from, to);\n    var path = [\n        ['M', from.x, from.y]\n    ];\n    path.push(sub);\n    return path;\n}\nregisterShape('edge', 'smooth', {\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, true, false, 'lineWidth');\n        var points = cfg.points;\n        var path = this.parsePath(getSmoothPath(points[0], points[1]));\n        return container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path }),\n        });\n    },\n    getMarker: function (markerCfg) {\n        return {\n            symbol: 'circle',\n            style: {\n                r: 4.5,\n                fill: markerCfg.color,\n            },\n        };\n    }\n});\n//# sourceMappingURL=smooth.js.map","import { __assign } from \"tslib\";\nimport { each } from '@antv/util';\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nvar CORNER_PERCENT = 1 / 3;\nfunction getVHVPath(from, to) {\n    var points = [];\n    points.push({\n        x: from.x,\n        y: from.y * (1 - CORNER_PERCENT) + to.y * CORNER_PERCENT,\n    });\n    points.push({\n        x: to.x,\n        y: from.y * (1 - CORNER_PERCENT) + to.y * CORNER_PERCENT,\n    });\n    points.push(to);\n    var path = [\n        ['M', from.x, from.y]\n    ];\n    each(points, function (point) {\n        path.push(['L', point.x, point.y]);\n    });\n    return path;\n}\nregisterShape('edge', 'vhv', {\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, true, false, 'lineWidth');\n        var points = cfg.points;\n        var path = this.parsePath(getVHVPath(points[0], points[1]));\n        return container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path }),\n        });\n    },\n    getMarker: function (markerCfg) {\n        return {\n            symbol: 'circle',\n            style: {\n                r: 4.5,\n                fill: markerCfg.color,\n            },\n        };\n    }\n});\n//# sourceMappingURL=vhv.js.map","import { __assign } from \"tslib\";\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nimport { getFunnelPath, getRectPoints } from './util';\n/** 漏斗图 */\nregisterShape('interval', 'funnel', {\n    getPoints: function (shapePoint) {\n        shapePoint.size = shapePoint.size * 2; // 漏斗图的 size 是柱状图的两倍\n        return getRectPoints(shapePoint);\n    },\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, false, true);\n        var path = this.parsePath(getFunnelPath(cfg.points, cfg.nextPoints, false));\n        var shape = container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path }),\n            name: 'interval',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: 'square',\n            style: {\n                r: 4,\n                fill: color,\n            },\n        };\n    },\n});\n//# sourceMappingURL=funnel.js.map","import { __assign } from \"tslib\";\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nimport { getRectPath } from './util';\n/** 描边柱状图 */\nregisterShape('interval', 'hollow-rect', {\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, true, false);\n        var path = this.parsePath(getRectPath(cfg.points));\n        var shape = container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path }),\n            name: 'interval',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color, isInPolar = markerCfg.isInPolar;\n        if (isInPolar) {\n            return {\n                symbol: 'circle',\n                style: {\n                    r: 4.5,\n                    stroke: color,\n                    fill: null,\n                },\n            };\n        }\n        return {\n            symbol: 'square',\n            style: {\n                r: 4,\n                stroke: color,\n                fill: null,\n            },\n        };\n    },\n});\n//# sourceMappingURL=hollow-rect.js.map","import { __assign } from \"tslib\";\nimport { isArray } from '@antv/util';\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nimport { getRectPath } from './util';\n// 根据数据点生成 Line 的两个关键点\nfunction getLinePoints(pointInfo) {\n    var x = pointInfo.x, y = pointInfo.y, y0 = pointInfo.y0;\n    if (isArray(y)) {\n        return y.map(function (yItem, idx) {\n            return {\n                x: isArray(x) ? x[idx] : x,\n                y: yItem,\n            };\n        });\n    }\n    // 起始点从 y0 开始\n    return [\n        { x: x, y: y0 },\n        { x: x, y: y },\n    ];\n}\nregisterShape('interval', 'line', {\n    getPoints: function (shapePoint) {\n        return getLinePoints(shapePoint);\n    },\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, true, false, 'lineWidth');\n        var path = this.parsePath(getRectPath(cfg.points));\n        var shape = container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path }),\n            name: 'interval',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: function (x, y, r) {\n                return [\n                    ['M', x, y - r],\n                    ['L', x, y + r],\n                ];\n            },\n            style: {\n                r: 5,\n                stroke: color,\n            },\n        };\n    },\n});\n//# sourceMappingURL=line.js.map","import { __assign } from \"tslib\";\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nimport { getFunnelPath, getRectPoints } from './util';\n/** 金字塔图，尖底漏斗图 */\nregisterShape('interval', 'pyramid', {\n    getPoints: function (shapePoint) {\n        shapePoint.size = shapePoint.size * 2; // 漏斗图的 size 是柱状图的两倍\n        return getRectPoints(shapePoint, true);\n    },\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, false, true);\n        var path = this.parsePath(getFunnelPath(cfg.points, cfg.nextPoints, true));\n        var shape = container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path }),\n            name: 'interval',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: 'square',\n            style: {\n                r: 4,\n                fill: color,\n            },\n        };\n    },\n});\n//# sourceMappingURL=pyramid.js.map","import { __assign } from \"tslib\";\nimport { isArray } from '@antv/util';\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\n// 根据数据点生成 tick shape 的 6 个关键点\nfunction getTickPoints(pointInfo) {\n    var x = pointInfo.x, y = pointInfo.y, y0 = pointInfo.y0, size = pointInfo.size;\n    var yMin;\n    var yMax;\n    if (isArray(y)) {\n        yMin = y[0], yMax = y[1];\n    }\n    else {\n        yMin = y0;\n        yMax = y;\n    }\n    var xMax = x + size / 2;\n    var xMin = x - size / 2;\n    // tick 关键点顺序\n    // 4 - 1 - 5\n    //     |\n    // 2 - 0 - 3\n    return [\n        { x: x, y: yMin },\n        { x: x, y: yMax },\n        { x: xMin, y: yMin },\n        { x: xMax, y: yMin },\n        { x: xMin, y: yMax },\n        { x: xMax, y: yMax },\n    ];\n}\n// 根据 tick 关键点绘制 path\nfunction getTickPath(points) {\n    return [\n        ['M', points[0].x, points[0].y],\n        ['L', points[1].x, points[1].y],\n        ['M', points[2].x, points[2].y],\n        ['L', points[3].x, points[3].y],\n        ['M', points[4].x, points[4].y],\n        ['L', points[5].x, points[5].y],\n    ];\n}\n/** I 形状柱状图，常用于 error bar chart */\nregisterShape('interval', 'tick', {\n    getPoints: function (shapePoint) {\n        return getTickPoints(shapePoint);\n    },\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, true, false);\n        var path = this.parsePath(getTickPath(cfg.points));\n        var shape = container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path }),\n            name: 'interval',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: function (x, y, r) {\n                return [\n                    ['M', x - r / 2, y - r],\n                    ['L', x + r / 2, y - r],\n                    ['M', x, y - r],\n                    ['L', x, y + r],\n                    ['M', x - r / 2, y + r],\n                    ['L', x + r / 2, y + r],\n                ];\n            },\n            style: {\n                r: 5,\n                stroke: color,\n            },\n        };\n    },\n});\n//# sourceMappingURL=tick.js.map","import { __assign } from \"tslib\";\nimport { each } from '@antv/util';\nimport { registerShape } from '../base';\nimport { getPathPoints } from '../util/get-path-points';\nimport { getStyle } from '../util/get-style';\nimport { getLineMarker } from './util';\nvar interpolateCallback = function (point, nextPoint, shapeType) {\n    var x = point.x;\n    var y = point.y;\n    var nextX = nextPoint.x;\n    var nextY = nextPoint.y;\n    var result;\n    switch (shapeType) {\n        case 'hv':\n            result = [{ x: nextX, y: y }];\n            break;\n        case 'vh':\n            result = [{ x: x, y: nextY }];\n            break;\n        case 'hvh':\n            var middleX = (nextX + x) / 2;\n            result = [\n                { x: middleX, y: y },\n                { x: middleX, y: nextY },\n            ];\n            break;\n        case 'vhv':\n            var middleY = (y + nextY) / 2;\n            result = [\n                { x: x, y: middleY },\n                { x: nextX, y: middleY },\n            ];\n            break;\n        default:\n            break;\n    }\n    return result;\n};\nfunction getInterpolatePoints(points, shapeType) {\n    var result = [];\n    each(points, function (point, index) {\n        var nextPoint = points[index + 1];\n        result.push(point);\n        if (nextPoint) {\n            var interpolatePoint = interpolateCallback(point, nextPoint, shapeType);\n            result = result.concat(interpolatePoint);\n        }\n    });\n    return result;\n}\n// 插值的图形path，不考虑null\nfunction getInterpolatePath(points) {\n    return points.map(function (point, index) {\n        return index === 0 ? ['M', point.x, point.y] : ['L', point.x, point.y];\n    });\n}\n// 插值的图形\nfunction getInterpolateShapeAttrs(cfg, shapeType) {\n    var points = getPathPoints(cfg.points, cfg.connectNulls); // 根据 connectNulls 值处理 points\n    var path = [];\n    each(points, function (eachLinePoints) {\n        var interpolatePoints = getInterpolatePoints(eachLinePoints, shapeType);\n        path = path.concat(getInterpolatePath(interpolatePoints));\n    });\n    return __assign(__assign({}, getStyle(cfg, true, false, 'lineWidth')), { path: path });\n}\n// step line\neach(['hv', 'vh', 'hvh', 'vhv'], function (shapeType) {\n    registerShape('line', shapeType, {\n        draw: function (cfg, container) {\n            var attrs = getInterpolateShapeAttrs(cfg, shapeType);\n            var shape = container.addShape({\n                type: 'path',\n                attrs: attrs,\n                name: 'line',\n            });\n            return shape;\n        },\n        getMarker: function (markerCfg) {\n            return getLineMarker(markerCfg, shapeType);\n        },\n    });\n});\n//# sourceMappingURL=step.js.map","import { __assign } from \"tslib\";\nimport { isArray, isNil } from '@antv/util';\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nfunction parseValue(value) {\n    var array = !isArray(value) ? [value] : value;\n    var min = array[0]; // 最小值\n    var max = array[array.length - 1]; // 最大值\n    var min1 = array.length > 1 ? array[1] : min;\n    var max1 = array.length > 3 ? array[3] : max;\n    var median = array.length > 2 ? array[2] : min1;\n    return {\n        min: min,\n        max: max,\n        min1: min1,\n        max1: max1,\n        median: median,\n    };\n}\nfunction getBoxPoints(x, y, size) {\n    var halfSize = size / 2;\n    var pointsArray;\n    if (isArray(y)) {\n        // 2维\n        var _a = parseValue(y), min = _a.min, max = _a.max, median = _a.median, min1 = _a.min1, max1 = _a.max1;\n        var minX = x - halfSize;\n        var maxX = x + halfSize;\n        pointsArray = [\n            [minX, max],\n            [maxX, max],\n            [x, max],\n            [x, max1],\n            [minX, min1],\n            [minX, max1],\n            [maxX, max1],\n            [maxX, min1],\n            [x, min1],\n            [x, min],\n            [minX, min],\n            [maxX, min],\n            [minX, median],\n            [maxX, median],\n        ];\n    }\n    else {\n        // 只有一个维度\n        y = isNil(y) ? 0.5 : y;\n        var _b = parseValue(x), min = _b.min, max = _b.max, median = _b.median, min1 = _b.min1, max1 = _b.max1;\n        var minY = y - halfSize;\n        var maxY = y + halfSize;\n        pointsArray = [\n            [min, minY],\n            [min, maxY],\n            [min, y],\n            [min1, y],\n            [min1, minY],\n            [min1, maxY],\n            [max1, maxY],\n            [max1, minY],\n            [max1, y],\n            [max, y],\n            [max, minY],\n            [max, maxY],\n            [median, minY],\n            [median, maxY],\n        ];\n    }\n    return pointsArray.map(function (arr) {\n        return {\n            x: arr[0],\n            y: arr[1],\n        };\n    });\n}\nfunction getBoxPath(points) {\n    return [\n        ['M', points[0].x, points[0].y],\n        ['L', points[1].x, points[1].y],\n        ['M', points[2].x, points[2].y],\n        ['L', points[3].x, points[3].y],\n        ['M', points[4].x, points[4].y],\n        ['L', points[5].x, points[5].y],\n        ['L', points[6].x, points[6].y],\n        ['L', points[7].x, points[7].y],\n        ['L', points[4].x, points[4].y],\n        ['Z'],\n        ['M', points[8].x, points[8].y],\n        ['L', points[9].x, points[9].y],\n        ['M', points[10].x, points[10].y],\n        ['L', points[11].x, points[11].y],\n        ['M', points[12].x, points[12].y],\n        ['L', points[13].x, points[13].y],\n    ];\n}\n// box shape\nregisterShape('schema', 'box', {\n    getPoints: function (shapePoint) {\n        var x = shapePoint.x, y = shapePoint.y, size = shapePoint.size;\n        return getBoxPoints(x, y, size);\n    },\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, true, false);\n        var path = this.parsePath(getBoxPath(cfg.points));\n        var shape = container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path, name: 'schema' }),\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: function (x, y, r) {\n                var yValues = [y - 6, y - 3, y, y + 3, y + 6];\n                var points = getBoxPoints(x, yValues, r);\n                return [\n                    ['M', points[0].x + 1, points[0].y],\n                    ['L', points[1].x - 1, points[1].y],\n                    ['M', points[2].x, points[2].y],\n                    ['L', points[3].x, points[3].y],\n                    ['M', points[4].x, points[4].y],\n                    ['L', points[5].x, points[5].y],\n                    ['L', points[6].x, points[6].y],\n                    ['L', points[7].x, points[7].y],\n                    ['L', points[4].x, points[4].y],\n                    ['Z'],\n                    ['M', points[8].x, points[8].y],\n                    ['L', points[9].x, points[9].y],\n                    ['M', points[10].x + 1, points[10].y],\n                    ['L', points[11].x - 1, points[11].y],\n                    ['M', points[12].x, points[12].y],\n                    ['L', points[13].x, points[13].y],\n                ];\n            },\n            style: {\n                r: 6,\n                lineWidth: 1,\n                stroke: color,\n            },\n        };\n    },\n});\n//# sourceMappingURL=box.js.map","import { __assign } from \"tslib\";\nimport { isArray } from '@antv/util';\nimport { padEnd } from '../../../util/helper';\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nfunction getCandleYValues(value) {\n    var array = !isArray(value) ? [value] : value;\n    // 从大到小排序\n    var sorted = array.sort(function (a, b) { return b - a; });\n    return padEnd(sorted, 4, sorted[sorted.length - 1]);\n}\n// get candle shape's key points\nfunction getCandlePoints(x, y, size) {\n    var yValues = getCandleYValues(y);\n    return [\n        { x: x, y: yValues[0] },\n        { x: x, y: yValues[1] },\n        { x: x - size / 2, y: yValues[2] },\n        { x: x - size / 2, y: yValues[1] },\n        { x: x + size / 2, y: yValues[1] },\n        { x: x + size / 2, y: yValues[2] },\n        { x: x, y: yValues[2] },\n        { x: x, y: yValues[3] },\n    ];\n}\nfunction getCandlePath(points) {\n    return [\n        ['M', points[0].x, points[0].y],\n        ['L', points[1].x, points[1].y],\n        ['M', points[2].x, points[2].y],\n        ['L', points[3].x, points[3].y],\n        ['L', points[4].x, points[4].y],\n        ['L', points[5].x, points[5].y],\n        ['Z'],\n        ['M', points[6].x, points[6].y],\n        ['L', points[7].x, points[7].y],\n    ];\n}\n// k line shape\nregisterShape('schema', 'candle', {\n    getPoints: function (shapePoint) {\n        var x = shapePoint.x, y = shapePoint.y, size = shapePoint.size;\n        return getCandlePoints(x, y, size);\n    },\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, true, true);\n        var path = this.parsePath(getCandlePath(cfg.points));\n        var shape = container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path, name: 'schema' }),\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: function (x, y, r) {\n                var yValues = [y + 7.5, y + 3, y - 3, y - 7.5];\n                var points = getCandlePoints(x, yValues, r);\n                return [\n                    ['M', points[0].x, points[0].y],\n                    ['L', points[1].x, points[1].y],\n                    ['M', points[2].x, points[2].y],\n                    ['L', points[3].x, points[3].y],\n                    ['L', points[4].x, points[4].y],\n                    ['L', points[5].x, points[5].y],\n                    ['Z'],\n                    ['M', points[6].x, points[6].y],\n                    ['L', points[7].x, points[7].y],\n                ];\n            },\n            style: {\n                lineWidth: 1,\n                stroke: color,\n                fill: color,\n                r: 6,\n            },\n        };\n    },\n});\n//# sourceMappingURL=candle.js.map","import { each } from '@antv/util';\nimport { MarkerSymbols } from '../../../util/marker';\nimport { registerShape } from '../base';\nimport { drawPoints, HOLLOW_SHAPES } from './util';\n// 添加 hollowShape\neach(HOLLOW_SHAPES, function (shapeName) {\n    registerShape('point', shapeName, {\n        draw: function (cfg, container) {\n            return drawPoints(this, cfg, container, shapeName, true);\n        },\n        getMarker: function (markerCfg) {\n            var color = markerCfg.color;\n            return {\n                symbol: MarkerSymbols[shapeName],\n                style: {\n                    r: 4.5,\n                    stroke: color,\n                    fill: null,\n                },\n            };\n        },\n    });\n});\n//# sourceMappingURL=hollow.js.map","import { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nregisterShape('point', 'image', {\n    draw: function (cfg, container) {\n        var size = getStyle(cfg, false, false, 'r').r;\n        var points = this.parsePoints(cfg.points);\n        var pointPosition = points[0];\n        if (cfg.isStack) {\n            pointPosition = points[1];\n        }\n        else if (points.length > 1) {\n            var group = container.addGroup();\n            for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {\n                var point = points_1[_i];\n                group.addShape('image', {\n                    attrs: {\n                        x: point.x - size / 2,\n                        y: point.y - size,\n                        width: size,\n                        height: size,\n                        img: cfg.shape[1],\n                    },\n                });\n            }\n            return group;\n        }\n        return container.addShape('image', {\n            attrs: {\n                x: pointPosition.x - size / 2,\n                y: pointPosition.y - size,\n                width: size,\n                height: size,\n                img: cfg.shape[1],\n            },\n        });\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: 'circle',\n            style: {\n                r: 4.5,\n                fill: color,\n            },\n        };\n    },\n});\n//# sourceMappingURL=image.js.map","import { each } from '@antv/util';\nimport { MarkerSymbols } from '../../../util/marker';\nimport { registerShape } from '../base';\nimport { drawPoints, SHAPES } from './util';\n// 所有的 SHAPES 都注册一下\neach(SHAPES, function (shapeName) {\n    registerShape('point', shapeName, {\n        draw: function (cfg, container) {\n            return drawPoints(this, cfg, container, shapeName, false);\n        },\n        getMarker: function (markerCfg) {\n            var color = markerCfg.color;\n            return {\n                symbol: MarkerSymbols[shapeName] || shapeName,\n                style: {\n                    r: 4.5,\n                    fill: color,\n                },\n            };\n        },\n    });\n});\n//# sourceMappingURL=solid.js.map","import { __extends } from \"tslib\";\nimport { get } from '@antv/util';\nimport GeometryLabel from './base';\n/**\n * 柱状图 label\n */\nvar IntervalLabel = /** @class */ (function (_super) {\n    __extends(IntervalLabel, _super);\n    function IntervalLabel() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    IntervalLabel.prototype.setLabelPosition = function (labelPointCfg, mappingData, index, position) {\n        var coordinate = this.getCoordinate();\n        var transposed = coordinate.isTransposed;\n        var shapePoints = mappingData.points;\n        var point0 = coordinate.convert(shapePoints[0]);\n        var point1 = coordinate.convert(shapePoints[2]);\n        var flag = transposed ? -1 : 1;\n        var width = ((point0.x - point1.x) / 2) * flag;\n        var height = ((point0.y - point1.y) / 2) * flag;\n        switch (position) {\n            case 'right':\n                if (!transposed) {\n                    labelPointCfg.x -= width;\n                    labelPointCfg.y += height;\n                }\n                labelPointCfg.textAlign = get(labelPointCfg, 'textAlign', 'left');\n                break;\n            case 'left':\n                if (transposed) {\n                    labelPointCfg.x -= width * 2;\n                }\n                else {\n                    labelPointCfg.x += width;\n                    labelPointCfg.y += height;\n                }\n                labelPointCfg.textAlign = get(labelPointCfg, 'textAlign', 'right');\n                break;\n            case 'bottom':\n                if (transposed) {\n                    labelPointCfg.x -= width;\n                    labelPointCfg.y -= height;\n                }\n                else {\n                    labelPointCfg.y += height * 2;\n                }\n                labelPointCfg.textAlign = get(labelPointCfg, 'textAlign', 'center');\n                labelPointCfg.textBaseline = get(labelPointCfg, 'textBaseline', 'top');\n                break;\n            case 'middle':\n                if (transposed) {\n                    labelPointCfg.x -= width;\n                }\n                else {\n                    labelPointCfg.y += height;\n                }\n                labelPointCfg.textAlign = get(labelPointCfg, 'textAlign', 'center');\n                break;\n            case 'top':\n                if (transposed) {\n                    labelPointCfg.x -= width;\n                    labelPointCfg.y += height;\n                }\n                labelPointCfg.textAlign = get(labelPointCfg, 'textAlign', 'center');\n                labelPointCfg.textBaseline = get(labelPointCfg, 'textBaseline', 'bottom');\n                break;\n            default:\n                break;\n        }\n    };\n    return IntervalLabel;\n}(GeometryLabel));\nexport default IntervalLabel;\n//# sourceMappingURL=interval.js.map","import { __assign, __extends } from \"tslib\";\nimport { each, isArray } from '@antv/util';\nimport { getDistanceToCenter } from '../../util/coordinate';\nimport { getAngleByPoint } from '../../util/coordinate';\nimport GeometryLabel from './base';\nvar HALF_PI = Math.PI / 2;\n/**\n * 极坐标下的图形 label\n */\nvar PolarLabel = /** @class */ (function (_super) {\n    __extends(PolarLabel, _super);\n    function PolarLabel() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @override\n     * 获取文本的对齐方式\n     * @param point\n     */\n    PolarLabel.prototype.getLabelAlign = function (point) {\n        var coordinate = this.getCoordinate();\n        var align;\n        if (point.labelEmit) {\n            align = (point.angle <= Math.PI / 2 && point.angle >= -Math.PI / 2) ? 'left' : 'right';\n        }\n        else if (!coordinate.isTransposed) {\n            align = 'center';\n        }\n        else {\n            var center = coordinate.getCenter();\n            var offset = this.getDefaultOffset(point.offset);\n            if (Math.abs(point.x - center.x) < 1) {\n                align = 'center';\n            }\n            else if (point.angle > Math.PI || point.angle <= 0) {\n                align = offset > 0 ? 'left' : 'right';\n            }\n            else {\n                align = offset > 0 ? 'right' : 'left';\n            }\n        }\n        return align;\n    };\n    /**\n     * @override\n     * 获取 label 的位置\n     * @param labelCfg\n     * @param mappingData\n     * @param index\n     */\n    PolarLabel.prototype.getLabelPoint = function (labelCfg, mappingData, index) {\n        var factor = 1;\n        var arcPoint;\n        var content = labelCfg.content[index];\n        if (this.isToMiddle(mappingData)) {\n            arcPoint = this.getMiddlePoint(mappingData.points);\n        }\n        else {\n            if (labelCfg.content.length === 1 && index === 0) {\n                index = 1;\n            }\n            else if (index === 0) {\n                factor = -1;\n            }\n            arcPoint = this.getArcPoint(mappingData, index);\n        }\n        var offset = this.getDefaultOffset(labelCfg.offset) * factor;\n        var middleAngle = this.getPointAngle(arcPoint);\n        var isLabelEmit = labelCfg.labelEmit;\n        var labelPositionCfg = this.getCirclePoint(middleAngle, offset, arcPoint, isLabelEmit);\n        if (labelPositionCfg.r === 0) {\n            // 如果文本位置位于圆心，则不展示\n            labelPositionCfg.content = '';\n        }\n        else {\n            labelPositionCfg.content = content;\n            labelPositionCfg.angle = middleAngle;\n            labelPositionCfg.color = mappingData.color;\n        }\n        labelPositionCfg.rotate = labelCfg.autoRotate\n            ? this.getLabelRotate(middleAngle, offset, isLabelEmit)\n            : labelCfg.rotate;\n        labelPositionCfg.start = {\n            x: arcPoint.x,\n            y: arcPoint.y,\n        };\n        return labelPositionCfg;\n    };\n    /**\n     * 获取圆弧的位置\n     */\n    PolarLabel.prototype.getArcPoint = function (mappingData, index) {\n        if (index === void 0) { index = 0; }\n        if (!isArray(mappingData.x) && !isArray(mappingData.y)) {\n            return {\n                x: mappingData.x,\n                y: mappingData.y,\n            };\n        }\n        return {\n            x: isArray(mappingData.x) ? mappingData.x[index] : mappingData.x,\n            y: isArray(mappingData.y) ? mappingData.y[index] : mappingData.y,\n        };\n    };\n    /**\n     * 计算坐标线点在极坐标系下角度\n     * @param point\n     */\n    PolarLabel.prototype.getPointAngle = function (point) {\n        return getAngleByPoint(this.getCoordinate(), point);\n    };\n    /**\n     * 获取坐标点与圆心形成的圆的位置信息\n     * @param angle\n     * @param offset\n     * @param point\n     * @param isLabelEmit\n     */\n    PolarLabel.prototype.getCirclePoint = function (angle, offset, point, isLabelEmit) {\n        var coordinate = this.getCoordinate();\n        var center = coordinate.getCenter();\n        var r = getDistanceToCenter(coordinate, point);\n        if (r === 0) {\n            return __assign(__assign({}, center), { r: r });\n        }\n        var labelAngle = angle;\n        if (coordinate.isTransposed && r > offset && !isLabelEmit) {\n            var appendAngle = Math.asin(offset / (2 * r));\n            labelAngle = angle + appendAngle * 2;\n        }\n        else {\n            r = r + offset;\n        }\n        return {\n            x: center.x + r * Math.cos(labelAngle),\n            y: center.y + r * Math.sin(labelAngle),\n            r: r,\n        };\n    };\n    /**\n     * 获取 label 的旋转角度\n     * @param angle\n     * @param offset\n     * @param isLabelEmit\n     */\n    PolarLabel.prototype.getLabelRotate = function (angle, offset, isLabelEmit) {\n        var rotate = angle + HALF_PI;\n        if (isLabelEmit) {\n            rotate -= HALF_PI;\n        }\n        if (rotate) {\n            if (rotate > HALF_PI) {\n                rotate = rotate - Math.PI;\n            }\n            else if (rotate < -HALF_PI) {\n                rotate = rotate + Math.PI;\n            }\n        }\n        return rotate;\n    };\n    // 获取中心的位置\n    PolarLabel.prototype.getMiddlePoint = function (points) {\n        var coordinate = this.getCoordinate();\n        var count = points.length;\n        var middlePoint = {\n            x: 0,\n            y: 0,\n        };\n        each(points, function (point) {\n            middlePoint.x += point.x;\n            middlePoint.y += point.y;\n        });\n        middlePoint.x /= count;\n        middlePoint.y /= count;\n        middlePoint = coordinate.convert(middlePoint);\n        return middlePoint;\n    };\n    // 是否居中\n    PolarLabel.prototype.isToMiddle = function (mappingData) {\n        return mappingData.x.length > 2;\n    };\n    return PolarLabel;\n}(GeometryLabel));\nexport default PolarLabel;\n//# sourceMappingURL=polar.js.map","import { __assign, __extends } from \"tslib\";\nimport { get, isArray } from '@antv/util';\nimport { getAngleByPoint } from '../../util/coordinate';\nimport { polarToCartesian } from '../../util/graphics';\nimport PolarLabel from './polar';\n/**\n * 饼图 label\n */\nvar PieLabel = /** @class */ (function (_super) {\n    __extends(PieLabel, _super);\n    function PieLabel(geometry) {\n        var _this = _super.call(this, geometry) || this;\n        _this.defaultLayout = 'distribute';\n        return _this;\n    }\n    PieLabel.prototype.getDefaultLabelCfg = function () {\n        return get(this.geometry.theme, 'pieLabels', {});\n    };\n    PieLabel.prototype.getDefaultOffset = function (offset) {\n        return offset || 0;\n    };\n    PieLabel.prototype.getLabelRotate = function (angle, offset, isLabelLimit) {\n        var rotate;\n        if (offset < 0) {\n            rotate = angle;\n            if (rotate > Math.PI / 2) {\n                rotate = rotate - Math.PI;\n            }\n            if (rotate < -Math.PI / 2) {\n                rotate = rotate + Math.PI;\n            }\n        }\n        return rotate;\n    };\n    PieLabel.prototype.getLabelAlign = function (point) {\n        var coordinate = this.getCoordinate();\n        var center = coordinate.getCenter();\n        var align;\n        if (point.angle <= Math.PI / 2 && point.x >= center.x) {\n            align = 'left';\n        }\n        else {\n            align = 'right';\n        }\n        var offset = this.getDefaultOffset(point.offset);\n        if (offset <= 0) {\n            if (align === 'right') {\n                align = 'left';\n            }\n            else {\n                align = 'right';\n            }\n        }\n        return align;\n    };\n    PieLabel.prototype.getArcPoint = function (point) {\n        return point;\n    };\n    PieLabel.prototype.getPointAngle = function (point) {\n        var coordinate = this.getCoordinate();\n        var startPoint = {\n            x: isArray(point.x) ? point.x[0] : point.x,\n            y: point.y[0],\n        };\n        var endPoint = {\n            x: isArray(point.x) ? point.x[1] : point.x,\n            y: point.y[1],\n        };\n        var angle;\n        var startAngle = getAngleByPoint(coordinate, startPoint);\n        if (point.points && point.points[0].y === point.points[1].y) {\n            angle = startAngle;\n        }\n        else {\n            var endAngle = getAngleByPoint(coordinate, endPoint);\n            if (startAngle >= endAngle) {\n                // 100% pie slice\n                endAngle = endAngle + Math.PI * 2;\n            }\n            angle = startAngle + (endAngle - startAngle) / 2;\n        }\n        return angle;\n    };\n    PieLabel.prototype.getCirclePoint = function (angle, offset, p) {\n        var coordinate = this.getCoordinate();\n        var center = coordinate.getCenter();\n        var r = coordinate.getRadius() + offset;\n        return __assign(__assign({}, polarToCartesian(center.x, center.y, r, angle)), { angle: angle,\n            r: r });\n    };\n    return PieLabel;\n}(PolarLabel));\nexport default PieLabel;\n//# sourceMappingURL=pie.js.map","import { each } from '@antv/util';\nvar MAX_TIMES = 100;\n/**\n * @ignore\n * Greedy 贪婪算法\n */\nvar Greedy = /** @class */ (function () {\n    function Greedy(cfg) {\n        if (cfg === void 0) { cfg = {}; }\n        this.bitmap = {};\n        var _a = cfg.xGap, xGap = _a === void 0 ? 1 : _a, _b = cfg.yGap, yGap = _b === void 0 ? 8 : _b;\n        this.xGap = xGap;\n        this.yGap = yGap;\n    }\n    Greedy.prototype.hasGap = function (bbox) {\n        var hasGap = true;\n        var bitmap = this.bitmap;\n        var minX = Math.round(bbox.minX);\n        var maxX = Math.round(bbox.maxX);\n        var minY = Math.round(bbox.minY);\n        var maxY = Math.round(bbox.maxY);\n        for (var i = minX; i <= maxX; i += 1) {\n            if (!bitmap[i]) {\n                bitmap[i] = {};\n                continue;\n            }\n            if (i === minX || i === maxX) {\n                for (var j = minY; j <= maxY; j++) {\n                    if (bitmap[i][j]) {\n                        hasGap = false;\n                        break;\n                    }\n                }\n            }\n            else {\n                if (bitmap[i][minY] || bitmap[i][maxY]) {\n                    hasGap = false;\n                    break;\n                }\n            }\n        }\n        return hasGap;\n    };\n    Greedy.prototype.fillGap = function (bbox) {\n        var bitmap = this.bitmap;\n        var minX = Math.round(bbox.minX);\n        var maxX = Math.round(bbox.maxX);\n        var minY = Math.round(bbox.minY);\n        var maxY = Math.round(bbox.maxY);\n        // filling grid\n        for (var i = minX; i <= maxX; i += 1) {\n            if (!bitmap[i]) {\n                bitmap[i] = {};\n            }\n        }\n        for (var i = minX; i <= maxX; i += this.xGap) {\n            for (var j = minY; j <= maxY; j += this.yGap) {\n                bitmap[i][j] = true;\n            }\n            bitmap[i][maxY] = true;\n        }\n        // filling y edges\n        if (this.yGap !== 1) {\n            for (var i = minY; i <= maxY; i += 1) {\n                bitmap[minX][i] = true;\n                bitmap[maxX][i] = true;\n            }\n        }\n        // filling x edges\n        if (this.xGap !== 1) {\n            for (var i = minX; i <= maxX; i += 1) {\n                bitmap[i][minY] = true;\n                bitmap[i][maxY] = true;\n            }\n        }\n    };\n    Greedy.prototype.destroy = function () {\n        this.bitmap = {};\n    };\n    return Greedy;\n}());\nfunction spiralFill(label, greedy, maxTimes) {\n    if (maxTimes === void 0) { maxTimes = MAX_TIMES; }\n    var dt = -1;\n    var _a = label.attr(), x = _a.x, y = _a.y;\n    var bbox = label.getCanvasBBox();\n    var maxDelta = Math.sqrt(bbox.width * bbox.width + bbox.height * bbox.height);\n    var dxdy;\n    var t = -dt;\n    var dx = 0;\n    var dy = 0;\n    var f = function (param) {\n        var nt = param * 0.1;\n        return [nt * Math.cos(nt), nt * Math.sin(nt)];\n    };\n    if (greedy.hasGap(bbox)) {\n        greedy.fillGap(bbox);\n        return true;\n    }\n    var canFill = false;\n    var times = 0;\n    var accessedCache = {};\n    while (Math.min(Math.abs(dx), Math.abs(dy)) < maxDelta && times < maxTimes) {\n        dxdy = f((t += dt));\n        dx = ~~dxdy[0];\n        dy = ~~dxdy[1];\n        if ((!dx && !dy) || accessedCache[dx + \"-\" + dy]) {\n            continue;\n        }\n        label.attr({ x: x + dx, y: y + dy });\n        if (dx + dy < 0) {\n            label.attr('textAlign', 'right');\n        }\n        times++;\n        if (greedy.hasGap(label.getCanvasBBox())) {\n            greedy.fillGap(label.getCanvasBBox());\n            canFill = true;\n            accessedCache[dx + \"-\" + dy] = true;\n            break;\n        }\n    }\n    return canFill;\n}\n/*\n *  根据如下规则尝试放置label\n *                5\n *        ------------------\n *        |    1   |   0   |\n *    8   —————————4————————   7\n *        |    2   |   3   |\n *        ——————————————————\n *                 6\n */\nfunction adjustLabelPosition(label, x, y, index) {\n    var _a = label.getCanvasBBox(), width = _a.width, height = _a.height;\n    var attrs = {\n        x: x,\n        y: y,\n        textAlign: 'center',\n    };\n    switch (index) {\n        case 0:\n            attrs.y -= height + 1;\n            attrs.x += 1;\n            attrs.textAlign = 'left';\n            break;\n        case 1:\n            attrs.y -= height + 1;\n            attrs.x -= 1;\n            attrs.textAlign = 'right';\n            break;\n        case 2:\n            attrs.y += height + 1;\n            attrs.x -= 1;\n            attrs.textAlign = 'right';\n            break;\n        case 3:\n            attrs.y += height + 1;\n            attrs.x += 1;\n            attrs.textAlign = 'left';\n            break;\n        case 5:\n            attrs.y -= height * 2 + 2;\n            break;\n        case 6:\n            attrs.y += height * 2 + 2;\n            break;\n        case 7:\n            attrs.x += width + 1;\n            attrs.textAlign = 'left';\n            break;\n        case 8:\n            attrs.x -= width + 1;\n            attrs.textAlign = 'right';\n            break;\n        default:\n            break;\n    }\n    label.attr(attrs);\n    return label.getCanvasBBox();\n}\n/**\n * @ignore\n * label 防遮挡布局：在不改变 label 位置的情况下对相互重叠的 label 进行调整。\n * 不同于 'overlap' 类型的布局，该布局不会对 label 的位置进行偏移调整。\n * @param labels 参与布局调整的 label 数组集合\n */\nexport function fixedOverlap(items, labels, shapes, region) {\n    var greedy = new Greedy();\n    each(labels, function (label) {\n        var labelShape = label.find(function (shape) { return shape.get('type') === 'text'; });\n        if (!spiralFill(labelShape, greedy)) {\n            label.remove(true);\n        }\n    });\n    greedy.destroy();\n}\n/**\n * @ignore\n * label 防遮挡布局：为了防止 label 之间相互覆盖同时保证尽可能多 的 label 展示，通过尝试将 label 向**四周偏移**来剔除放不下的 label\n * @param labels 参与布局调整的 label 数组集合\n */\nexport function overlap(items, labels, shapes, region) {\n    var greedy = new Greedy();\n    each(labels, function (label) {\n        var labelShape = label.find(function (shape) { return shape.get('type') === 'text'; });\n        var _a = labelShape.attr(), x = _a.x, y = _a.y;\n        var canFill = false;\n        for (var i = 0; i <= 8; i++) {\n            var bbox = adjustLabelPosition(labelShape, x, y, i);\n            if (greedy.hasGap(bbox)) {\n                greedy.fillGap(bbox);\n                canFill = true;\n                break;\n            }\n        }\n        if (!canFill) {\n            label.remove(true);\n        }\n    });\n    greedy.destroy();\n}\n//# sourceMappingURL=overlap.js.map","import { transform } from '@antv/matrix-util';\n/**\n * @ignore\n * 对图形元素进行矩阵变换，同时返回变换前的图形矩阵\n * @param shape 进行矩阵变换的图形\n * @param vector 矩阵变换的中心点\n * @param direct 矩阵变换的类型\n */\nexport function transformShape(shape, vector, direct) {\n    var scaledMatrix;\n    var x = vector[0], y = vector[1];\n    shape.applyToMatrix([x, y, 1]);\n    if (direct === 'x') {\n        shape.setMatrix(transform(shape.getMatrix(), [\n            ['t', -x, -y],\n            ['s', 0.01, 1],\n            ['t', x, y],\n        ]));\n        scaledMatrix = transform(shape.getMatrix(), [\n            ['t', -x, -y],\n            ['s', 100, 1],\n            ['t', x, y],\n        ]);\n    }\n    else if (direct === 'y') {\n        shape.setMatrix(transform(shape.getMatrix(), [\n            ['t', -x, -y],\n            ['s', 1, 0.01],\n            ['t', x, y],\n        ]));\n        scaledMatrix = transform(shape.getMatrix(), [\n            ['t', -x, -y],\n            ['s', 1, 100],\n            ['t', x, y],\n        ]);\n    }\n    else if (direct === 'xy') {\n        shape.setMatrix(transform(shape.getMatrix(), [\n            ['t', -x, -y],\n            ['s', 0.01, 0.01],\n            ['t', x, y],\n        ]));\n        scaledMatrix = transform(shape.getMatrix(), [\n            ['t', -x, -y],\n            ['s', 100, 100],\n            ['t', x, y],\n        ]);\n    }\n    return scaledMatrix;\n}\n/**\n * 对图形元素进行剪切动画\n * @param element 进行动画的图形元素\n * @param animateCfg 动画配置\n * @param coordinate 当前坐标系\n * @param yMinPoint y 轴的最小值对应的图形坐标点\n * @param type 剪切动画的类型\n */\nexport function doScaleAnimate(element, animateCfg, coordinate, yMinPoint, type) {\n    var start = coordinate.start, end = coordinate.end;\n    var width = coordinate.getWidth();\n    var height = coordinate.getHeight();\n    var x;\n    var y;\n    if (type === 'y') {\n        x = start.x + width / 2;\n        y = yMinPoint.y < start.y ? yMinPoint.y : start.y;\n    }\n    else if (type === 'x') {\n        x = yMinPoint.x > start.x ? yMinPoint.x : start.x;\n        y = start.y + height / 2;\n    }\n    else if (type === 'xy') {\n        if (coordinate.isPolar) {\n            x = coordinate.getCenter().x;\n            y = coordinate.getCenter().y;\n        }\n        else {\n            x = (start.x + end.x) / 2;\n            y = (start.y + end.y) / 2;\n        }\n    }\n    var endMatrix = transformShape(element, [x, y], type);\n    element.animate({\n        matrix: endMatrix,\n    }, animateCfg);\n}\n//# sourceMappingURL=util.js.map","import { __assign } from \"tslib\";\nimport getArcParams from '@antv/g-canvas/lib/util/arc-params';\nimport { isNumberEqual, isEqual } from '@antv/util';\nimport { getArcPath, getSectorPath } from '../../util/graphics';\nfunction getAngle(startPoint, arcPath) {\n    var _a;\n    var _b = getArcParams(startPoint, arcPath), startAngle = _b.startAngle, endAngle = _b.endAngle;\n    if (!isNumberEqual(startAngle, -Math.PI * 0.5) && startAngle < -Math.PI * 0.5) {\n        startAngle += Math.PI * 2;\n    }\n    if (!isNumberEqual(endAngle, -Math.PI * 0.5) && endAngle < -Math.PI * 0.5) {\n        endAngle += Math.PI * 2;\n    }\n    if (arcPath[5] === 0) {\n        // 逆时针，需要将 startAngle 和 endAngle 转置，因为 G2 极坐标系为顺时针方向\n        _a = [endAngle, startAngle], startAngle = _a[0], endAngle = _a[1];\n    }\n    if (isNumberEqual(startAngle, Math.PI * 1.5)) {\n        startAngle = Math.PI * -0.5;\n    }\n    if (isNumberEqual(endAngle, Math.PI * -0.5)) {\n        endAngle = Math.PI * 1.5;\n    }\n    return {\n        startAngle: startAngle,\n        endAngle: endAngle,\n    };\n}\nfunction getArcStartPoint(path) {\n    var startPoint;\n    if (path[0] === 'M' || path[0] === 'L') {\n        startPoint = [path[1], path[2]];\n    }\n    else if (path[0] === 'a' || path[0] === 'A') {\n        startPoint = [path[path.length - 2], path[path.length - 1]];\n    }\n    return startPoint;\n}\n/**\n * path 存在以下情况\n * 1. 饼图不为整圆的 path，命令为 M, L, A, L, Z\n * 2. 饼图为整圆的 path，命令为 M, M, A, A, M, Z\n * 3. 环图不为整圆的 path，命令为 M, A, L, A, L, Z\n * 4. 环图为整圆的 path，命令为 M, A, A, M, A, A, M, Z\n * 5. radial-line, 不为整圆时的 path, 命令为 M, A, A, Z\n * 6. radial-line, 为整圆时的 path，命令为 M, A, A, A, A, Z\n * @param path theta 坐标系下圆弧的 path 命令\n */\nfunction getArcInfo(path) {\n    var _a;\n    var startAngle;\n    var endAngle;\n    var arcPaths = path.filter(function (command) {\n        return command[0] === 'A' || command[0] === 'a';\n    });\n    var firstArcPathCommand = arcPaths[0];\n    var lastArcPathCommand = arcPaths.length > 1 ? arcPaths[1] : arcPaths[0];\n    var firstIndex = path.indexOf(firstArcPathCommand);\n    var lastIndex = path.indexOf(lastArcPathCommand);\n    var firstStartPoint = getArcStartPoint(path[firstIndex - 1]);\n    var lastStartPoint = getArcStartPoint(path[lastIndex - 1]);\n    var _b = getAngle(firstStartPoint, firstArcPathCommand), firstStartAngle = _b.startAngle, firstEndAngle = _b.endAngle;\n    var _c = getAngle(lastStartPoint, lastArcPathCommand), lastStartAngle = _c.startAngle, lastEndAngle = _c.endAngle;\n    if (isNumberEqual(firstStartAngle, lastStartAngle) && isNumberEqual(firstEndAngle, lastEndAngle)) {\n        startAngle = firstStartAngle;\n        endAngle = firstEndAngle;\n    }\n    else {\n        startAngle = Math.min(firstStartAngle, lastStartAngle);\n        endAngle = Math.max(firstEndAngle, lastEndAngle);\n    }\n    var radius = firstArcPathCommand[1];\n    var innerRadius = arcPaths[arcPaths.length - 1][1];\n    if (radius < innerRadius) {\n        _a = [innerRadius, radius], radius = _a[0], innerRadius = _a[1];\n    }\n    else if (radius === innerRadius) {\n        innerRadius = 0;\n    }\n    return {\n        startAngle: startAngle,\n        endAngle: endAngle,\n        radius: radius,\n        innerRadius: innerRadius,\n    };\n}\n/**\n * @ignore\n * 饼图更新动画\n * @param shape 文本图形\n * @param animateCfg\n * @param cfg\n */\nexport function sectorPathUpdate(shape, animateCfg, cfg) {\n    var toAttrs = cfg.toAttrs, coordinate = cfg.coordinate;\n    // @ts-ignore\n    var path = toAttrs.path;\n    var pathCommands = path.map(function (command) { return command[0]; });\n    var _a = getArcInfo(path), curStartAngle = _a.startAngle, curEndAngle = _a.endAngle, radius = _a.radius, innerRadius = _a.innerRadius;\n    var _b = getArcInfo(shape.attr('path')), preStartAngle = _b.startAngle, preEndAngle = _b.endAngle;\n    var center = coordinate.getCenter();\n    var diffStartAngle = curStartAngle - preStartAngle;\n    var diffEndAngle = curEndAngle - preEndAngle;\n    shape.animate(function (ratio) {\n        var onFrameStartAngle = preStartAngle + ratio * diffStartAngle;\n        var onFrameEndAngle = preEndAngle + ratio * diffEndAngle;\n        return __assign(__assign({}, toAttrs), { path: \n            // hack, 兼容 /examples/bar/basic/demo/radial-line.ts 动画\n            isEqual(pathCommands, ['M', 'A', 'A', 'Z'])\n                ? getArcPath(center.x, center.y, radius, onFrameStartAngle, onFrameEndAngle)\n                : getSectorPath(center.x, center.y, radius, onFrameStartAngle, onFrameEndAngle, innerRadius) });\n    }, __assign(__assign({}, animateCfg), { callback: function () {\n            // 将 path 保持原始态，否则会影响 setState() 的动画\n            shape.attr('path', path);\n        } }));\n}\n//# sourceMappingURL=sector-path-update.js.map","import { __assign } from \"tslib\";\nimport { transform } from '@antv/matrix-util';\nimport { each } from '@antv/util';\nfunction doShapeZoom(shape, animateCfg, type) {\n    if (shape.isGroup()) {\n        each(shape.getChildren(), function (child) {\n            doShapeZoom(child, animateCfg, type);\n        });\n    }\n    else {\n        var bbox = shape.getBBox();\n        var x = (bbox.minX + bbox.maxX) / 2;\n        var y = (bbox.minY + bbox.maxY) / 2;\n        shape.applyToMatrix([x, y, 1]);\n        if (type === 'zoomIn') {\n            // 放大\n            var matrix = transform(shape.getMatrix(), [\n                ['t', -x, -y],\n                ['s', 0.01, 0.01],\n                ['t', x, y],\n            ]);\n            shape.setMatrix(matrix);\n            shape.animate({\n                matrix: transform(shape.getMatrix(), [\n                    ['t', -x, -y],\n                    ['s', 100, 100],\n                    ['t', x, y],\n                ]),\n            }, animateCfg);\n        }\n        else {\n            shape.animate({\n                matrix: transform(shape.getMatrix(), [\n                    ['t', -x, -y],\n                    ['s', 0.01, 0.01],\n                    ['t', x, y],\n                ]),\n            }, __assign(__assign({}, animateCfg), { callback: function () {\n                    shape.remove(true);\n                } }));\n        }\n    }\n}\n/**\n * @ignore\n * 单个 shape 动画\n * shape 以自身中心点逐渐放大的进入动画\n * @param shape 参与动画的图形元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function zoomIn(shape, animateCfg, cfg) {\n    doShapeZoom(shape, animateCfg, 'zoomIn');\n}\n/**\n * @ignore\n * 单个 shape 动画\n * 消失动画，shape 以自身为中心点的逐渐缩小\n * @param shape 参与动画的图形元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function zoomOut(shape, animateCfg, cfg) {\n    doShapeZoom(shape, animateCfg, 'zoomOut');\n}\n//# sourceMappingURL=zoom.js.map","import { DIRECTION } from '../constant';\n/**\n * @ignore\n * 获取 facet title 的最佳默认配置，防止\n */\nexport function getFactTitleConfig(direction) {\n    if ([DIRECTION.TOP, DIRECTION.BOTTOM].includes(direction)) {\n        return {\n            offsetX: 0,\n            offsetY: direction === DIRECTION.TOP ? -8 : 8,\n            style: {\n                textAlign: 'center',\n                textBaseline: direction === DIRECTION.TOP ? 'bottom' : 'top',\n            }\n        };\n    }\n    if ([DIRECTION.LEFT, DIRECTION.RIGHT].includes(direction)) {\n        return {\n            offsetX: direction === DIRECTION.LEFT ? -8 : 8,\n            offsetY: 0,\n            style: {\n                textAlign: direction === DIRECTION.LEFT ? 'right' : 'left',\n                textBaseline: 'middle',\n                rotate: Math.PI / 2,\n            }\n        };\n    }\n    return {};\n}\n/**\n * @ignore\n * 根据角度，获取 ○ 上的点\n * @param center\n * @param r\n * @param angle\n */\nexport function getAnglePoint(center, r, angle) {\n    return {\n        x: center.x + r * Math.cos(angle),\n        y: center.y + r * Math.sin(angle)\n    };\n}\n//# sourceMappingURL=facet.js.map","import { __extends } from \"tslib\";\nimport { deepMix, each, filter } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getAnglePoint, getFactTitleConfig } from '../util/facet';\nimport { Facet } from './facet';\n/**\n * @ignore\n * 镜像分面\n */\nvar Circle = /** @class */ (function (_super) {\n    __extends(Circle, _super);\n    function Circle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Circle.prototype.getDefaultCfg = function () {\n        return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\n            type: 'circle',\n            showTitle: true,\n            title: _super.prototype.getDefaultTitleCfg.call(this),\n        });\n    };\n    Circle.prototype.render = function () {\n        _super.prototype.render.call(this);\n        if (this.cfg.showTitle) {\n            this.renderTitle();\n        }\n    };\n    /**\n     * 根据总数和当前索引，计算分面的 region\n     * @param count\n     * @param index\n     */\n    Circle.prototype.getRegion = function (count, index) {\n        var r = 1 / 2; // 画布半径\n        // 画布圆心\n        var center = { x: 0.5, y: 0.5 };\n        // 每隔分面间隔的弧度\n        var avgAngle = Math.PI * 2 / count;\n        // 当前分面所在的弧度\n        var angle = -1 * Math.PI / 2 + avgAngle * index;\n        // TODO 没看懂\n        var facetR = r / (1 + 1 / Math.sin(avgAngle / 2));\n        // 分面的中心点\n        var middle = getAnglePoint(center, r - facetR, angle);\n        var startAngle = Math.PI * 5 / 4; // 右上角\n        var endAngle = Math.PI * 1 / 4; // 左下角\n        return {\n            start: getAnglePoint(middle, facetR, startAngle),\n            end: getAnglePoint(middle, facetR, endAngle)\n        };\n    };\n    Circle.prototype.afterEachView = function (view, facet) {\n        this.processAxis(view, facet);\n    };\n    Circle.prototype.beforeEachView = function (view, facet) {\n    };\n    Circle.prototype.generateFacets = function (data) {\n        var _this = this;\n        var _a = this.cfg, fields = _a.fields, type = _a.type;\n        var field = fields[0];\n        if (!field) {\n            throw new Error('No `fields` specified!');\n        }\n        var values = this.getFieldValues(data, field);\n        var count = values.length;\n        var rst = [];\n        values.forEach(function (value, index) {\n            var conditions = [{ field: field, value: value, values: values }];\n            var facetData = filter(data, _this.getFacetDataFilter(conditions));\n            var facet = {\n                type: type,\n                data: facetData,\n                region: _this.getRegion(count, index),\n                columnValue: value,\n                columnField: field,\n                columnIndex: index,\n                columnValuesLength: count,\n                rowValue: null,\n                rowField: null,\n                rowIndex: 0,\n                rowValuesLength: 1,\n            };\n            rst.push(facet);\n        });\n        return rst;\n    };\n    Circle.prototype.getXAxisOption = function (x, axes, option, facet) {\n        // 不做任何处理\n        return option;\n    };\n    /**\n     * 设置 y 坐标轴的文本、title 是否显示\n     * @param y\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Circle.prototype.getYAxisOption = function (y, axes, option, facet) {\n        // 不做任何处理\n        return option;\n    };\n    /**\n     * facet title\n     */\n    Circle.prototype.renderTitle = function () {\n        var _this = this;\n        each(this.facets, function (facet) {\n            var columnValue = facet.columnValue, view = facet.view;\n            var config = deepMix({\n                position: ['50%', '0%'],\n                content: columnValue,\n            }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.title);\n            view.annotation().text(config);\n        });\n    };\n    return Circle;\n}(Facet));\nexport default Circle;\n//# sourceMappingURL=circle.js.map","import { __assign, __extends } from \"tslib\";\nimport { deepMix, each, filter } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getFactTitleConfig } from '../util/facet';\nimport { Facet } from './facet';\n/**\n * @ignore\n * 镜像分面\n */\nvar List = /** @class */ (function (_super) {\n    __extends(List, _super);\n    function List() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    List.prototype.getDefaultCfg = function () {\n        return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\n            type: 'list',\n            cols: null,\n            showTitle: true,\n            title: _super.prototype.getDefaultTitleCfg.call(this),\n        });\n    };\n    List.prototype.render = function () {\n        _super.prototype.render.call(this);\n        if (this.cfg.showTitle) {\n            this.renderTitle();\n        }\n    };\n    List.prototype.afterEachView = function (view, facet) {\n        this.processAxis(view, facet);\n    };\n    List.prototype.beforeEachView = function (view, facet) {\n    };\n    List.prototype.generateFacets = function (data) {\n        var _this = this;\n        var fields = this.cfg.fields;\n        var cols = this.cfg.cols;\n        var columnField = fields[0];\n        if (!columnField) {\n            throw new Error('No `fields` specified!');\n        }\n        var colValues = this.getFieldValues(data, columnField);\n        var count = colValues.length;\n        cols = cols || count; // 每行有几列数据\n        // 总共有几行\n        var rows = this.getPageCount(count, cols);\n        var rst = [];\n        colValues.forEach(function (val, index) {\n            // 当前 index 在那个行列\n            var _a = _this.getRowCol(index, cols), row = _a.row, col = _a.col;\n            var conditions = [\n                { field: columnField, value: val, values: colValues }\n            ];\n            var facetData = filter(data, _this.getFacetDataFilter(conditions));\n            var facet = {\n                type: _this.cfg.type,\n                data: facetData,\n                region: _this.getRegion(rows, cols, col, row),\n                columnValue: val,\n                rowValue: val,\n                columnField: columnField,\n                rowField: null,\n                columnIndex: col,\n                rowIndex: row,\n                columnValuesLength: cols,\n                rowValuesLength: rows,\n                total: count,\n            };\n            rst.push(facet);\n        });\n        return rst;\n    };\n    /**\n     * 设置 x 坐标轴的文本、title 是否显示\n     * @param x\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    List.prototype.getXAxisOption = function (x, axes, option, facet) {\n        // 当是最后一行或者下面没有 view 时文本不显示\n        if (facet.rowIndex !== facet.rowValuesLength - 1 &&\n            (facet.columnValuesLength * facet.rowIndex + facet.columnIndex + 1) + facet.columnValuesLength <= facet.total) {\n            return __assign(__assign({}, option), { label: null, title: null });\n        }\n        return option;\n    };\n    /**\n     * 设置 y 坐标轴的文本、title 是否显示\n     * @param y\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    List.prototype.getYAxisOption = function (y, axes, option, facet) {\n        if (facet.columnIndex !== 0) {\n            return __assign(__assign({}, option), { title: null, label: null });\n        }\n        return option;\n    };\n    /**\n     * facet title\n     */\n    List.prototype.renderTitle = function () {\n        var _this = this;\n        each(this.facets, function (facet) {\n            var columnValue = facet.columnValue, view = facet.view;\n            var config = deepMix({\n                position: ['50%', '0%'],\n                content: columnValue,\n            }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.title);\n            view.annotation().text(config);\n        });\n    };\n    /**\n     * 计算分页数\n     * @param total\n     * @param pageSize\n     */\n    List.prototype.getPageCount = function (total, pageSize) {\n        return Math.floor((total + pageSize - 1) / pageSize);\n    };\n    /**\n     * 索引值在哪一页\n     * @param index\n     * @param pageSize\n     */\n    List.prototype.getRowCol = function (index, pageSize) {\n        var row = Math.floor(index / pageSize);\n        var col = index % pageSize;\n        return { row: row, col: col };\n    };\n    return List;\n}(Facet));\nexport default List;\n//# sourceMappingURL=list.js.map","import { __assign, __extends } from \"tslib\";\nimport { deepMix, each } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getFactTitleConfig } from '../util/facet';\nimport { Facet } from './facet';\n/**\n * @ignore\n * 镜像分面\n */\nvar Matrix = /** @class */ (function (_super) {\n    __extends(Matrix, _super);\n    function Matrix() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Matrix.prototype.getDefaultCfg = function () {\n        return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\n            type: 'matrix',\n            showTitle: false,\n            columnTitle: __assign({}, _super.prototype.getDefaultTitleCfg.call(this)),\n            rowTitle: __assign({}, _super.prototype.getDefaultTitleCfg.call(this))\n        });\n    };\n    Matrix.prototype.render = function () {\n        _super.prototype.render.call(this);\n        if (this.cfg.showTitle) {\n            this.renderTitle();\n        }\n    };\n    Matrix.prototype.afterEachView = function (view, facet) {\n        this.processAxis(view, facet);\n    };\n    Matrix.prototype.beforeEachView = function (view, facet) {\n    };\n    Matrix.prototype.generateFacets = function (data) {\n        var _a = this.cfg, fields = _a.fields, type = _a.type;\n        // 矩阵中行列相等，等于指定的字段个数\n        var rowValuesLength = fields.length;\n        var columnValuesLength = rowValuesLength;\n        var rst = [];\n        for (var i = 0; i < columnValuesLength; i++) {\n            var columnField = fields[i];\n            for (var j = 0; j < rowValuesLength; j++) {\n                var rowField = fields[j];\n                var facet = {\n                    type: type,\n                    data: data,\n                    region: this.getRegion(rowValuesLength, columnValuesLength, i, j),\n                    columnValue: columnField,\n                    rowValue: rowField,\n                    columnField: columnField,\n                    rowField: rowField,\n                    columnIndex: i,\n                    rowIndex: j,\n                    columnValuesLength: columnValuesLength,\n                    rowValuesLength: rowValuesLength,\n                };\n                rst.push(facet);\n            }\n        }\n        return rst;\n    };\n    /**\n     * 设置 x 坐标轴的文本、title 是否显示\n     * @param x\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Matrix.prototype.getXAxisOption = function (x, axes, option, facet) {\n        // 最后一行显示\n        if (facet.rowIndex !== facet.rowValuesLength - 1) {\n            return __assign(__assign({}, option), { label: null, title: null });\n        }\n        return option;\n    };\n    /**\n     * 设置 y 坐标轴的文本、title 是否显示\n     * @param y\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Matrix.prototype.getYAxisOption = function (y, axes, option, facet) {\n        // 第一列显示\n        if (facet.columnIndex !== 0) {\n            return __assign(__assign({}, option), { title: null, label: null });\n        }\n        return option;\n    };\n    /**\n     * facet title\n     */\n    Matrix.prototype.renderTitle = function () {\n        var _this = this;\n        each(this.facets, function (facet, facetIndex) {\n            var columnIndex = facet.columnIndex, rowIndex = facet.rowIndex, columnValuesLength = facet.columnValuesLength, rowValuesLength = facet.rowValuesLength, columnValue = facet.columnValue, rowValue = facet.rowValue, view = facet.view;\n            // top\n            if (rowIndex === 0) {\n                var config = deepMix({\n                    position: ['50%', '0%'],\n                    content: columnValue,\n                }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.columnTitle);\n                view.annotation().text(config);\n            }\n            // right\n            if (columnIndex === columnValuesLength - 1) {\n                var config = deepMix({\n                    position: ['100%', '50%'],\n                    content: rowValue,\n                }, getFactTitleConfig(DIRECTION.RIGHT), _this.cfg.rowTitle);\n                view.annotation().text(config);\n            }\n        });\n    };\n    return Matrix;\n}(Facet));\nexport default Matrix;\n//# sourceMappingURL=matrix.js.map","import { __assign, __extends } from \"tslib\";\nimport { deepMix, each, filter } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getFactTitleConfig } from '../util/facet';\nimport { Facet } from './facet';\n/**\n * @ignore\n * 镜像分面\n */\nvar Mirror = /** @class */ (function (_super) {\n    __extends(Mirror, _super);\n    function Mirror() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Mirror.prototype.getDefaultCfg = function () {\n        return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\n            type: 'mirror',\n            showTitle: true,\n            title: _super.prototype.getDefaultTitleCfg.call(this),\n            transpose: false,\n        });\n    };\n    Mirror.prototype.render = function () {\n        _super.prototype.render.call(this);\n        if (this.cfg.showTitle) {\n            this.renderTitle();\n        }\n    };\n    Mirror.prototype.beforeEachView = function (view, facet) {\n        // 做一下坐标系转化\n        if (this.cfg.transpose) {\n            if (facet.columnIndex % 2 === 0) {\n                view.coordinate().transpose().reflect('x');\n            }\n            else {\n                view.coordinate().transpose();\n            }\n        }\n        else {\n            if (facet.rowIndex % 2 !== 0) {\n                view.coordinate().reflect('y');\n            }\n        }\n    };\n    Mirror.prototype.afterEachView = function (view, facet) {\n        this.processAxis(view, facet);\n    };\n    Mirror.prototype.generateFacets = function (data) {\n        var _this = this;\n        var f = this.cfg.fields[0];\n        var rst = [];\n        var columnValuesLength = 1;\n        var rowValuesLength = 1;\n        var columnValues = [''];\n        var rowValues = [''];\n        var columnField;\n        var rowField;\n        if (this.cfg.transpose) {\n            columnField = f;\n            columnValues = this.getFieldValues(data, columnField).slice(0, 2); // 镜像最多两个\n            columnValuesLength = columnValues.length;\n        }\n        else {\n            rowField = f;\n            rowValues = this.getFieldValues(data, rowField).slice(0, 2); // 镜像最多两个\n            rowValuesLength = rowValues.length;\n        }\n        // 获取每个维度对应的数据配置片段\n        columnValues.forEach(function (xVal, xIndex) {\n            rowValues.forEach(function (yVal, yIndex) {\n                var conditions = [\n                    { field: columnField, value: xVal, values: columnValues },\n                    { field: rowField, value: yVal, values: rowValues },\n                ];\n                var facetData = filter(data, _this.getFacetDataFilter(conditions));\n                var facet = {\n                    type: _this.cfg.type,\n                    data: facetData,\n                    region: _this.getRegion(rowValuesLength, columnValuesLength, xIndex, yIndex),\n                    columnValue: xVal,\n                    rowValue: yVal,\n                    columnField: columnField,\n                    rowField: rowField,\n                    columnIndex: xIndex,\n                    rowIndex: yIndex,\n                    columnValuesLength: columnValuesLength,\n                    rowValuesLength: rowValuesLength,\n                };\n                rst.push(facet);\n            });\n        });\n        return rst;\n    };\n    /**\n     * 设置 x 坐标轴的文本、title 是否显示\n     * @param x\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Mirror.prototype.getXAxisOption = function (x, axes, option, facet) {\n        // 非最后一行\n        // 当是最后一行或者下面没有 view 时文本不显示\n        if (facet.columnIndex === 1 || facet.rowIndex === 1) {\n            return __assign(__assign({}, option), { label: null, title: null });\n        }\n        return option;\n    };\n    /**\n     * 设置 y 坐标轴的文本、title 是否显示\n     * @param y\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Mirror.prototype.getYAxisOption = function (y, axes, option, facet) {\n        // do nothing\n        return option;\n    };\n    Mirror.prototype.renderTitle = function () {\n        var _this = this;\n        each(this.facets, function (facet, facetIndex) {\n            var columnValue = facet.columnValue, rowValue = facet.rowValue, view = facet.view;\n            if (_this.cfg.transpose) {\n                var config = deepMix({\n                    position: ['50%', '0%'],\n                    content: columnValue,\n                }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.title);\n                view.annotation().text(config);\n            }\n            else {\n                var config = deepMix({\n                    position: ['100%', '50%'],\n                    content: rowValue,\n                }, getFactTitleConfig(DIRECTION.RIGHT), _this.cfg.title);\n                view.annotation().text(config);\n            }\n        });\n    };\n    return Mirror;\n}(Facet));\nexport default Mirror;\n//# sourceMappingURL=mirror.js.map","import { __assign, __extends } from \"tslib\";\nimport { deepMix, each, filter } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getFactTitleConfig } from '../util/facet';\nimport { Facet } from './facet';\n/**\n * @ignore\n * 矩阵分面\n */\nvar Rect = /** @class */ (function (_super) {\n    __extends(Rect, _super);\n    function Rect() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Rect.prototype.afterEachView = function (view, facet) {\n        this.processAxis(view, facet);\n    };\n    Rect.prototype.beforeEachView = function (view, facet) {\n        // do nothing\n    };\n    Rect.prototype.getDefaultCfg = function () {\n        return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\n            type: 'rect',\n            columnTitle: __assign({}, _super.prototype.getDefaultTitleCfg.call(this)),\n            rowTitle: __assign({}, _super.prototype.getDefaultTitleCfg.call(this))\n        });\n    };\n    Rect.prototype.render = function () {\n        _super.prototype.render.call(this);\n        if (this.cfg.showTitle) {\n            this.renderTitle();\n        }\n    };\n    /**\n     * 生成矩阵分面的分面数据\n     * @param data\n     */\n    Rect.prototype.generateFacets = function (data) {\n        var _this = this;\n        var _a = this.cfg.fields, columnField = _a[0], rowField = _a[1];\n        var rst = [];\n        var columnValuesLength = 1;\n        var rowValuesLength = 1;\n        var columnValues = [''];\n        var rowValues = [''];\n        if (columnField) {\n            columnValues = this.getFieldValues(data, columnField);\n            columnValuesLength = columnValues.length;\n        }\n        if (rowField) {\n            rowValues = this.getFieldValues(data, rowField);\n            rowValuesLength = rowValues.length;\n        }\n        // 获取每个维度对应的数据配置片段\n        columnValues.forEach(function (xVal, xIndex) {\n            rowValues.forEach(function (yVal, yIndex) {\n                var conditions = [\n                    { field: columnField, value: xVal, values: columnValues },\n                    { field: rowField, value: yVal, values: rowValues },\n                ];\n                var facetData = filter(data, _this.getFacetDataFilter(conditions));\n                var facet = {\n                    type: _this.cfg.type,\n                    data: facetData,\n                    region: _this.getRegion(rowValuesLength, columnValuesLength, xIndex, yIndex),\n                    columnValue: xVal,\n                    rowValue: yVal,\n                    columnField: columnField,\n                    rowField: rowField,\n                    columnIndex: xIndex,\n                    rowIndex: yIndex,\n                    columnValuesLength: columnValuesLength,\n                    rowValuesLength: rowValuesLength,\n                };\n                rst.push(facet);\n            });\n        });\n        return rst;\n    };\n    Rect.prototype.renderTitle = function () {\n        var _this = this;\n        each(this.facets, function (facet, facetIndex) {\n            var columnIndex = facet.columnIndex, rowIndex = facet.rowIndex, columnValuesLength = facet.columnValuesLength, rowValuesLength = facet.rowValuesLength, columnValue = facet.columnValue, rowValue = facet.rowValue, view = facet.view;\n            // top\n            if (rowIndex === 0) {\n                var config = deepMix({\n                    position: ['50%', '0%'],\n                    content: columnValue,\n                }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.columnTitle);\n                view.annotation().text(config);\n            }\n            // right\n            if (columnIndex === columnValuesLength - 1) {\n                var config = deepMix({\n                    position: ['100%', '50%'],\n                    content: rowValue,\n                }, getFactTitleConfig(DIRECTION.RIGHT), _this.cfg.rowTitle);\n                view.annotation().text(config);\n            }\n        });\n    };\n    /**\n     * 设置 x 坐标轴的文本、title 是否显示\n     * @param x\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Rect.prototype.getXAxisOption = function (x, axes, option, facet) {\n        // 非最后一行\n        if (facet.rowIndex !== facet.rowValuesLength - 1) {\n            return __assign(__assign({}, option), { title: null, label: null });\n        }\n        else if (facet.columnIndex !== Math.floor((facet.columnValuesLength - 1) / 2)) {\n            // 不是中间列\n            return __assign(__assign({}, option), { title: null });\n        }\n        return option;\n    };\n    /**\n     * 设置 y 坐标轴的文本、title 是否显示\n     * @param y\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Rect.prototype.getYAxisOption = function (y, axes, option, facet) {\n        if (facet.columnIndex !== 0) {\n            return __assign(__assign({}, option), { title: null, label: null });\n        }\n        else if (facet.rowIndex !== Math.floor((facet.rowValuesLength - 1) / 2)) {\n            return __assign(__assign({}, option), { title: null });\n        }\n        return option;\n    };\n    return Rect;\n}(Facet));\nexport default Rect;\n//# sourceMappingURL=rect.js.map","import { __assign, __extends } from \"tslib\";\n/**\n * Create By Bruce Too\n * On 2020-02-10\n */\nimport { assign, deepMix, each } from '@antv/util';\nimport { DIRECTION, VIEW_LIFE_CIRCLE } from '../constant';\nimport { getFactTitleConfig } from '../util/facet';\nimport { Facet } from './facet';\n/**\n * @ignore\n * Tree Facet\n */\nvar Tree = /** @class */ (function (_super) {\n    __extends(Tree, _super);\n    function Tree() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.afterChartRender = function () {\n            if (_this.facets && _this.cfg.line) {\n                _this.container.clear();\n                _this.drawLines(_this.facets);\n            }\n        };\n        return _this;\n    }\n    Tree.prototype.afterEachView = function (view, facet) {\n        this.processAxis(view, facet);\n    };\n    Tree.prototype.beforeEachView = function (view, facet) {\n    };\n    Tree.prototype.init = function () {\n        _super.prototype.init.call(this);\n        this.view.on(VIEW_LIFE_CIRCLE.AFTER_RENDER, this.afterChartRender);\n    };\n    Tree.prototype.getDefaultCfg = function () {\n        return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\n            type: 'tree',\n            line: {\n                style: {\n                    lineWidth: 1,\n                    stroke: '#ddd'\n                },\n                smooth: false,\n            },\n            showTitle: true,\n            title: _super.prototype.getDefaultTitleCfg.call(this),\n        });\n    };\n    Tree.prototype.generateFacets = function (data) {\n        var fields = this.cfg.fields;\n        if (!fields.length) {\n            throw new Error('Please specify for the fields for rootFacet!');\n        }\n        var rst = [];\n        var rootFacet = {\n            type: this.cfg.type,\n            data: data,\n            region: null,\n            rowValuesLength: this.getRows(),\n            columnValuesLength: 1,\n            rowIndex: 0,\n            columnIndex: 0,\n            rowField: '',\n            columnField: '',\n            rowValue: '',\n            columnValue: '',\n        };\n        rst.push(rootFacet);\n        rootFacet.children = this.getChildFacets(data, 1, rst);\n        this.setRegion(rst);\n        return rst;\n    };\n    Tree.prototype.setRegion = function (facets) {\n        var _this = this;\n        this.forceColIndex(facets);\n        facets.forEach(function (facet) {\n            // @ts-ignore 允许调整\n            facet.region = _this.getRegion(facet.rowValuesLength, facet.columnValuesLength, facet.columnIndex, facet.rowIndex);\n        });\n    };\n    Tree.prototype.getRegion = function (rows, cols, xIndex, yIndex) {\n        var xWidth = 1 / cols; // x轴方向的每个分面的偏移\n        var yWidth = 1 / rows; // y轴方向的每个分面的偏移\n        var start = {\n            x: xWidth * xIndex,\n            y: yWidth * yIndex\n        };\n        var end = {\n            x: start.x + xWidth,\n            y: start.y + yWidth * 2 / 3 // 预留1/3的空隙，方便添加连接线\n        };\n        return {\n            start: start,\n            end: end\n        };\n    };\n    Tree.prototype.forceColIndex = function (facets) {\n        var _this = this;\n        var leafs = [];\n        var index = 0;\n        facets.forEach(function (facet) {\n            if (_this.isLeaf(facet)) {\n                leafs.push(facet);\n                // @ts-ignore 允许调整\n                facet.columnIndex = index;\n                index++;\n            }\n        });\n        leafs.forEach(function (facet) {\n            // @ts-ignore\n            facet.columnValuesLength = leafs.length;\n        });\n        var maxLevel = this.cfg.fields.length;\n        for (var i = maxLevel - 1; i >= 0; i--) {\n            var levelFacets = this.getFacetsByLevel(facets, i);\n            // var yIndex = maxLevel - i;\n            for (var _i = 0, levelFacets_1 = levelFacets; _i < levelFacets_1.length; _i++) {\n                var facet = levelFacets_1[_i];\n                if (!this.isLeaf(facet)) {\n                    facet.originColIndex = facet.columnIndex;\n                    // @ts-ignore\n                    facet.columnIndex = this.getRegionIndex(facet.children);\n                    // @ts-ignore\n                    facet.columnValuesLength = leafs.length;\n                }\n            }\n        }\n    };\n    // get facet use level\n    Tree.prototype.getFacetsByLevel = function (facets, level) {\n        var rst = [];\n        facets.forEach(function (facet) {\n            if (facet.rowIndex === level) {\n                rst.push(facet);\n            }\n        });\n        return rst;\n    };\n    // if the facet has children , make it's column index in the middle of it's children\n    Tree.prototype.getRegionIndex = function (children) {\n        var first = children[0];\n        var last = children[children.length - 1];\n        return (last.columnIndex - first.columnIndex) / 2 + first.columnIndex;\n    };\n    // is  a leaf without children\n    Tree.prototype.isLeaf = function (facet) {\n        return !facet.children || !facet.children.length;\n    };\n    Tree.prototype.getRows = function () {\n        return this.cfg.fields.length + 1;\n    };\n    // get child\n    Tree.prototype.getChildFacets = function (data, level, arr) {\n        var _this = this;\n        // [ 'grade', 'class' ]\n        var fields = this.cfg.fields;\n        var length = fields.length;\n        if (length < level) {\n            return;\n        }\n        var rst = [];\n        // get fist level except root node\n        var field = fields[level - 1];\n        // get field value\n        var values = this.getFieldValues(data, field);\n        values.forEach(function (value, index) {\n            var conditions = [\n                { field: field, value: value, values: values }\n            ];\n            var subData = data.filter(_this.getFacetDataFilter(conditions));\n            if (subData.length) {\n                var facet = {\n                    type: _this.cfg.type,\n                    data: subData,\n                    region: null,\n                    columnValue: value,\n                    rowValue: '',\n                    columnField: field,\n                    rowField: '',\n                    columnIndex: index,\n                    rowValuesLength: _this.getRows(),\n                    columnValuesLength: 1,\n                    rowIndex: level,\n                    children: _this.getChildFacets(subData, level + 1, arr)\n                };\n                rst.push(facet);\n                arr.push(facet);\n            }\n        });\n        return rst;\n    };\n    Tree.prototype.render = function () {\n        _super.prototype.render.call(this);\n        if (this.cfg.showTitle) {\n            this.renderTitle();\n        }\n    };\n    Tree.prototype.renderTitle = function () {\n        var _this = this;\n        each(this.facets, function (facet) {\n            var columnValue = facet.columnValue, view = facet.view;\n            var config = deepMix({\n                position: ['50%', '0%'],\n                content: columnValue,\n            }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.title);\n            view.annotation().text(config);\n        });\n    };\n    Tree.prototype.drawLines = function (facets) {\n        var _this = this;\n        facets.forEach(function (facet) {\n            if (!_this.isLeaf(facet)) {\n                var children = facet.children;\n                _this.addFacetLines(facet, children);\n            }\n        });\n    };\n    // add lines with it's children\n    Tree.prototype.addFacetLines = function (facet, children) {\n        var _this = this;\n        var view = facet.view;\n        var region = view.coordinateBBox;\n        // top, right, bottom, left\n        var start = {\n            x: region.x + region.width / 2,\n            y: region.y + region.height\n        };\n        children.forEach(function (subFacet) {\n            var subRegion = subFacet.view.coordinateBBox;\n            var end = {\n                x: subRegion.bl.x + (subRegion.tr.x - subRegion.bl.x) / 2,\n                y: subRegion.tr.y\n            };\n            var middle1 = {\n                x: start.x,\n                y: start.y + (end.y - start.y) / 2\n            };\n            var middle2 = {\n                x: end.x,\n                y: middle1.y\n            };\n            _this.drawLine([start, middle1, middle2, end]);\n        });\n    };\n    Tree.prototype.getPath = function (points) {\n        var path = [];\n        var smooth = this.cfg.line.smooth;\n        if (smooth) {\n            path.push(['M', points[0].x, points[0].y]);\n            path.push(['C', points[1].x, points[1].y, points[2].x, points[2].y, points[3].x, points[3].y]);\n        }\n        else {\n            points.forEach(function (point, index) {\n                if (index === 0) {\n                    path.push(['M', point.x, point.y]);\n                }\n                else {\n                    path.push(['L', point.x, point.y]);\n                }\n            });\n        }\n        return path;\n    };\n    // draw line width points\n    Tree.prototype.drawLine = function (points) {\n        var path = this.getPath(points);\n        var line = this.cfg.line.style;\n        this.container.addShape('path', {\n            attrs: assign({\n                // @ts-ignore\n                path: path\n            }, line),\n        });\n    };\n    Tree.prototype.getXAxisOption = function (x, axes, option, facet) {\n        if (facet.rowIndex !== facet.rowValuesLength - 1) {\n            return __assign(__assign({}, option), { title: null, label: null });\n        }\n        return option;\n    };\n    Tree.prototype.getYAxisOption = function (y, axes, option, facet) {\n        if (facet.originColIndex !== 0 && facet.columnIndex !== 0) {\n            return __assign(__assign({}, option), { title: null, label: null });\n        }\n        return option;\n    };\n    return Tree;\n}(Facet));\nexport default Tree;\n//# sourceMappingURL=tree.js.map","import { __assign, __extends } from \"tslib\";\nimport { contains, deepMix, each, get, isArray, isFunction, isNil, isString, keys, upperFirst } from '@antv/util';\nimport { Annotation as AnnotationComponent } from '../../dependents';\nimport { DEFAULT_ANIMATE_CFG } from '../../animate/';\nimport { COMPONENT_TYPE, DIRECTION, LAYER, VIEW_LIFE_CIRCLE } from '../../constant';\nimport { getAngleByPoint, getDistanceToCenter } from '../../util/coordinate';\nimport { omit } from '../../util/helper';\nimport { Controller } from './base';\n/**\n * Annotation controller, 主要作用:\n * 1. 创建 Annotation: line、text、arc ...\n * 2. 生命周期: init、layout、render、clear、destroy\n */\nvar Annotation = /** @class */ (function (_super) {\n    __extends(Annotation, _super);\n    function Annotation(view) {\n        var _this = _super.call(this, view) || this;\n        /* 组件更新的 cache，组件配置 object : 组件 */\n        _this.cache = new Map();\n        _this.foregroundContainer = _this.view.getLayer(LAYER.FORE).addGroup();\n        _this.backgroundContainer = _this.view.getLayer(LAYER.BG).addGroup();\n        _this.option = [];\n        return _this;\n    }\n    Object.defineProperty(Annotation.prototype, \"name\", {\n        get: function () {\n            return 'annotation';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Annotation.prototype.init = function () { };\n    Annotation.prototype.layout = function () {\n        var _this = this;\n        var components = this.getComponents();\n        var updateComponentFn = function (co) {\n            var component = co.component, extra = co.extra;\n            var type = extra.type;\n            var theme = _this.getAnnotationTheme(type);\n            component.update(_this.getAnnotationCfg(type, extra, theme));\n        };\n        var createComponentFn = function (option) {\n            var co = _this.createAnnotation(option);\n            if (co) {\n                co.component.init();\n                // Note：regionFilter 特殊处理，regionFilter需要取到 Geometry 中的 Shape，需要在 view render 之后处理\n                // 其他组件使用外层的统一 render 逻辑\n                if (option.type === 'regionFilter') {\n                    co.component.render();\n                }\n                // 缓存起来\n                _this.cache.set(option, co);\n            }\n        };\n        if (components.length) {\n            each(components, function (co) {\n                var component = co.component;\n                if (component.get('type') === 'regionFilter') {\n                    // regionFilter 依赖绘制后的 Geometry Shapes\n                    _this.view.once(VIEW_LIFE_CIRCLE.AFTER_RENDER, function () {\n                        updateComponentFn(co);\n                    });\n                }\n                else {\n                    updateComponentFn(co);\n                }\n            });\n        }\n        else {\n            each(this.option, function (option) {\n                if (option.type === 'regionFilter') {\n                    _this.view.once(VIEW_LIFE_CIRCLE.AFTER_RENDER, function () {\n                        // regionFilter 依赖绘制后的 Geometry Shapes\n                        createComponentFn(option);\n                    });\n                }\n                else {\n                    createComponentFn(option);\n                }\n            });\n        }\n    };\n    Annotation.prototype.render = function () {\n        // 因为 Annotation 不参与布局，但是渲染的位置依赖于坐标系，所以可以将绘制阶段延迟到 layout() 进行\n    };\n    /**\n     * 更新\n     */\n    Annotation.prototype.update = function () {\n        var _this = this;\n        // 已经处理过的 legend\n        var updated = new WeakMap();\n        var updateComponentFn = function (option) {\n            var type = option.type;\n            var theme = _this.getAnnotationTheme(type);\n            var cfg = _this.getAnnotationCfg(type, option, theme);\n            var existCo = _this.cache.get(option);\n            // 存在，则更新\n            if (existCo) {\n                // 忽略掉一些配置\n                omit(cfg, ['container']);\n                existCo.component.update(cfg);\n                updated.set(option, true);\n            }\n            else {\n                // 不存在，则创建\n                var co = _this.createAnnotation(option);\n                if (co) {\n                    co.component.init();\n                    // Note：regionFilter 特殊处理，regionFilter需要取到 Geometry 中的 Shape，需要在 view render 之后处理\n                    // 其他组件使用外层的统一 render 逻辑\n                    if (option.type === 'regionFilter') {\n                        co.component.render();\n                    }\n                    // 缓存起来\n                    _this.cache.set(option, co);\n                    updated.set(option, true);\n                }\n            }\n        };\n        this.view.once(VIEW_LIFE_CIRCLE.AFTER_RENDER, function () {\n            // 先看是否有 regionFilter 要更新\n            each(_this.option, function (option) {\n                if (option.type === 'regionFilter') {\n                    updateComponentFn(option);\n                }\n            });\n            // 处理完成之后，销毁删除的\n            // 不在处理中的\n            var newCache = new Map();\n            _this.cache.forEach(function (value, key) {\n                if (updated.has(key)) {\n                    newCache.set(key, value);\n                }\n                else {\n                    // 不存在，则是所有需要被销毁的组件\n                    value.component.destroy();\n                }\n            });\n            // 更新缓存\n            _this.cache = newCache;\n        });\n        each(this.option, function (option) {\n            if (option.type !== 'regionFilter') {\n                updateComponentFn(option);\n            }\n        });\n    };\n    /**\n     * 清空\n     * @param includeOption 是否清空 option 配置项\n     */\n    Annotation.prototype.clear = function (includeOption) {\n        if (includeOption === void 0) { includeOption = false; }\n        _super.prototype.clear.call(this);\n        this.cache.clear();\n        this.foregroundContainer.clear();\n        this.backgroundContainer.clear();\n        // clear all option\n        if (includeOption) {\n            this.option = [];\n        }\n    };\n    Annotation.prototype.destroy = function () {\n        this.clear(true);\n        this.foregroundContainer.remove(true);\n        this.backgroundContainer.remove(true);\n    };\n    /**\n     * 复写基类的方法\n     */\n    Annotation.prototype.getComponents = function () {\n        var co = [];\n        this.cache.forEach(function (value) {\n            co.push(value);\n        });\n        return co;\n    };\n    Annotation.prototype.createAnnotation = function (option) {\n        var type = option.type;\n        var Ctor = AnnotationComponent[upperFirst(type)];\n        if (Ctor) {\n            var theme = this.getAnnotationTheme(type);\n            var cfg = this.getAnnotationCfg(type, option, theme);\n            var annotation = new Ctor(cfg);\n            return {\n                component: annotation,\n                layer: this.isTop(cfg) ? LAYER.FORE : LAYER.BG,\n                direction: DIRECTION.NONE,\n                type: COMPONENT_TYPE.ANNOTATION,\n                extra: option,\n            };\n        }\n    };\n    // APIs for creating annotation component\n    Annotation.prototype.annotation = function (option) {\n        this.option.push(option);\n    };\n    /**\n     * 创建 Arc\n     * @param option\n     * @returns AnnotationController\n     */\n    Annotation.prototype.arc = function (option) {\n        this.annotation(__assign({ type: 'arc' }, option));\n        return this;\n    };\n    /**\n     * 创建 image\n     * @param option\n     * @returns AnnotationController\n     */\n    Annotation.prototype.image = function (option) {\n        this.annotation(__assign({ type: 'image' }, option));\n        return this;\n    };\n    /**\n     * 创建 Line\n     * @param option\n     * @returns AnnotationController\n     */\n    Annotation.prototype.line = function (option) {\n        this.annotation(__assign({ type: 'line' }, option));\n        return this;\n    };\n    /**\n     * 创建 Region\n     * @param option\n     * @returns AnnotationController\n     */\n    Annotation.prototype.region = function (option) {\n        this.annotation(__assign({ type: 'region' }, option));\n        return this;\n    };\n    /**\n     * 创建 Text\n     * @param option\n     * @returns AnnotationController\n     */\n    Annotation.prototype.text = function (option) {\n        this.annotation(__assign({ type: 'text' }, option));\n        return this;\n    };\n    /**\n     * 创建 DataMarker\n     * @param option\n     * @returns AnnotationController\n     */\n    Annotation.prototype.dataMarker = function (option) {\n        this.annotation(__assign({ type: 'dataMarker' }, option));\n        return this;\n    };\n    /**\n     * 创建 DataRegion\n     * @param option\n     * @returns AnnotationController\n     */\n    Annotation.prototype.dataRegion = function (option) {\n        this.annotation(__assign({ type: 'dataRegion' }, option));\n    };\n    /**\n     * 创建 RegionFilter\n     * @param option\n     * @returns AnnotationController\n     */\n    Annotation.prototype.regionFilter = function (option) {\n        this.annotation(__assign({ type: 'regionFilter' }, option));\n    };\n    // end API\n    /**\n     * parse the point position to [x, y]\n     * @param p Position\n     * @returns { x, y }\n     */\n    Annotation.prototype.parsePosition = function (p) {\n        var xScale = this.view.getXScale();\n        // 转成 object\n        var yScales = this.view.getScalesByDim('y');\n        var position = isFunction(p) ? p.call(null, xScale, yScales) : p;\n        var x = 0;\n        var y = 0;\n        // 入参是 [24, 24] 这类时\n        if (isArray(position)) {\n            var xPos = position[0], yPos = position[1];\n            // 如果数据格式是 ['50%', '50%'] 的格式\n            // fix: 原始数据中可能会包含 'xxx5%xxx' 这样的数据，需要判断下 https://github.com/antvis/f2/issues/590\n            // @ts-ignore\n            if (isString(xPos) && xPos.indexOf('%') !== -1 && !isNaN(xPos.slice(0, -1))) {\n                return this.parsePercentPosition(position);\n            }\n            x = this.getNormalizedValue(xPos, xScale);\n            y = this.getNormalizedValue(yPos, Object.values(yScales)[0]);\n        }\n        else if (!isNil(position)) {\n            // 入参是 object 结构，数据点\n            for (var _i = 0, _a = keys(position); _i < _a.length; _i++) {\n                var key = _a[_i];\n                var value = position[key];\n                if (key === xScale.field) {\n                    x = this.getNormalizedValue(value, xScale);\n                }\n                if (yScales[key]) {\n                    y = this.getNormalizedValue(value, yScales[key]);\n                }\n            }\n        }\n        return this.view.getCoordinate().convert({ x: x, y: y });\n    };\n    /**\n     * parse all the points between start and end\n     * @param start\n     * @param end\n     * @return Point[]\n     */\n    Annotation.prototype.getRegionPoints = function (start, end) {\n        var _this = this;\n        var xScale = this.view.getXScale();\n        var yScales = this.view.getScalesByDim('y');\n        var yScale = Object.values(yScales)[0];\n        var xField = xScale.field;\n        var viewData = this.view.getData();\n        var startXValue = isArray(start) ? start[0] : start[xField];\n        var endXValue = isArray(end) ? end[0] : end[xField];\n        var arr = [];\n        var startIndex;\n        each(viewData, function (item, idx) {\n            if (item[xField] === startXValue) {\n                startIndex = idx;\n            }\n            if (idx >= startIndex) {\n                var point = _this.parsePosition([item[xField], item[yScale.field]]);\n                if (point) {\n                    arr.push(point);\n                }\n            }\n            if (item[xField] === endXValue) {\n                return false;\n            }\n        });\n        return arr;\n    };\n    /**\n     * parse the value position\n     * @param val\n     * @param scale\n     */\n    Annotation.prototype.getNormalizedValue = function (val, scale) {\n        var result;\n        var scaled;\n        switch (val) {\n            case 'start':\n                result = 0;\n                break;\n            case 'end':\n                result = 1;\n                break;\n            case 'median': {\n                scaled = scale.isCategory ? (scale.values.length - 1) / 2 : (scale.min + scale.max) / 2;\n                result = scale.scale(scaled);\n                break;\n            }\n            case 'min':\n            case 'max':\n                if (scale.isCategory) {\n                    scaled = val === 'min' ? 0 : scale.values.length - 1;\n                }\n                else {\n                    scaled = scale[val];\n                }\n                result = scale.scale(scaled);\n                break;\n            default:\n                result = scale.scale(val);\n        }\n        return result;\n    };\n    /**\n     * parse percent position\n     * @param position\n     */\n    Annotation.prototype.parsePercentPosition = function (position) {\n        var xPercent = parseFloat(position[0]) / 100;\n        var yPercent = parseFloat(position[1]) / 100;\n        var coordinate = this.view.getCoordinate();\n        var start = coordinate.start, end = coordinate.end;\n        var topLeft = {\n            x: Math.min(start.x, end.x),\n            y: Math.min(start.y, end.y),\n        };\n        var x = coordinate.getWidth() * xPercent + topLeft.x;\n        var y = coordinate.getHeight() * yPercent + topLeft.y;\n        return { x: x, y: y };\n    };\n    /**\n     * get coordinate bbox\n     */\n    Annotation.prototype.getCoordinateBBox = function () {\n        var coordinate = this.view.getCoordinate();\n        var start = coordinate.start, end = coordinate.end;\n        var width = coordinate.getWidth();\n        var height = coordinate.getHeight();\n        var topLeft = {\n            x: Math.min(start.x, end.x),\n            y: Math.min(start.y, end.y),\n        };\n        return {\n            x: topLeft.x,\n            y: topLeft.y,\n            minX: topLeft.x,\n            minY: topLeft.y,\n            maxX: topLeft.x + width,\n            maxY: topLeft.y + height,\n            width: width,\n            height: height,\n        };\n    };\n    /**\n     * get annotation component config by different type\n     * @param type\n     * @param option 用户的配置\n     * @param theme\n     */\n    Annotation.prototype.getAnnotationCfg = function (type, option, theme) {\n        var coordinate = this.view.getCoordinate();\n        var o = {};\n        if (isNil(option)) {\n            return null;\n        }\n        if (type === 'arc') {\n            var _a = option, start = _a.start, end = _a.end;\n            var sp = this.parsePosition(start);\n            var ep = this.parsePosition(end);\n            var startAngle = getAngleByPoint(coordinate, sp);\n            var endAngle = getAngleByPoint(coordinate, ep);\n            if (startAngle > endAngle) {\n                endAngle = Math.PI * 2 + endAngle;\n            }\n            o = {\n                center: coordinate.getCenter(),\n                radius: getDistanceToCenter(coordinate, sp),\n                startAngle: startAngle,\n                endAngle: endAngle,\n            };\n        }\n        else if (type === 'image') {\n            var _b = option, start = _b.start, end = _b.end;\n            o = {\n                start: this.parsePosition(start),\n                end: this.parsePosition(end),\n                src: option.src,\n            };\n        }\n        else if (type === 'line') {\n            var _c = option, start = _c.start, end = _c.end;\n            o = {\n                start: this.parsePosition(start),\n                end: this.parsePosition(end),\n                text: get(option, 'text', null),\n            };\n        }\n        else if (type === 'region') {\n            var _d = option, start = _d.start, end = _d.end;\n            o = {\n                start: this.parsePosition(start),\n                end: this.parsePosition(end),\n            };\n        }\n        else if (type === 'text') {\n            var _e = option, position = _e.position, rotate = _e.rotate;\n            o = __assign(__assign({}, this.parsePosition(position)), { content: option.content, rotate: rotate });\n        }\n        else if (type === 'dataMarker') {\n            var _f = option, position = _f.position, point = _f.point, line = _f.line, text = _f.text, autoAdjust = _f.autoAdjust, direction = _f.direction;\n            o = __assign(__assign({}, this.parsePosition(position)), { coordinateBBox: this.getCoordinateBBox(), point: point,\n                line: line,\n                text: text,\n                autoAdjust: autoAdjust,\n                direction: direction });\n        }\n        else if (type === 'dataRegion') {\n            var _g = option, start = _g.start, end = _g.end, region = _g.region, text = _g.text, lineLength = _g.lineLength;\n            o = {\n                points: this.getRegionPoints(start, end),\n                region: region,\n                text: text,\n                lineLength: lineLength,\n            };\n        }\n        else if (type === 'regionFilter') {\n            var _h = option, start = _h.start, end = _h.end, apply_1 = _h.apply, color = _h.color;\n            var geometries = this.view.geometries;\n            var shapes_1 = [];\n            var addShapes_1 = function (item) {\n                if (!item) {\n                    return;\n                }\n                if (item.isGroup()) {\n                    item.getChildren().forEach(function (child) { return addShapes_1(child); });\n                }\n                else {\n                    shapes_1.push(item);\n                }\n            };\n            each(geometries, function (geom) {\n                if (apply_1) {\n                    if (contains(apply_1, geom.type)) {\n                        each(geom.elements, function (elem) {\n                            addShapes_1(elem.shape);\n                        });\n                    }\n                }\n                else {\n                    each(geom.elements, function (elem) {\n                        addShapes_1(elem.shape);\n                    });\n                }\n            });\n            o = {\n                color: color,\n                shapes: shapes_1,\n                start: this.parsePosition(start),\n                end: this.parsePosition(end),\n            };\n        }\n        // 合并主题，用户配置优先级高于默认主题\n        var cfg = deepMix({}, theme, __assign(__assign({}, o), { top: option.top, style: option.style, offsetX: option.offsetX, offsetY: option.offsetY }));\n        cfg.container = this.getComponentContainer(cfg);\n        cfg.animate = this.view.getOptions().animate && cfg.animate && get(option, 'animate', cfg.animate); // 如果 view 关闭动画，则不执行\n        cfg.animateOption = deepMix({}, DEFAULT_ANIMATE_CFG, cfg.animateOption, option.animateOption);\n        return cfg;\n    };\n    /**\n     * is annotation render on top\n     * @param option\n     * @return whethe on top\n     */\n    Annotation.prototype.isTop = function (option) {\n        return get(option, 'top', true);\n    };\n    /**\n     * get the container by option.top\n     * default is on top\n     * @param option\n     * @returns the container\n     */\n    Annotation.prototype.getComponentContainer = function (option) {\n        return this.isTop(option) ? this.foregroundContainer : this.backgroundContainer;\n    };\n    Annotation.prototype.getAnnotationTheme = function (type) {\n        return get(this.view.getTheme(), ['components', 'annotation', type], {});\n    };\n    return Annotation;\n}(Controller));\nexport default Annotation;\n//# sourceMappingURL=annotation.js.map","import { get, map } from '@antv/util';\n/**\n * @ignore\n * get the grid theme by type\n * @param theme\n * @param direction\n * @returns theme object\n */\nexport function getGridThemeCfg(theme, direction) {\n    return get(theme, ['components', 'axis', direction, 'grid'], {});\n}\n/**\n * @ignore\n * get axis grid items\n * @param coordinate\n * @param scale\n * @param dim\n * @return items\n */\nexport function getLineGridItems(coordinate, scale, dim, alignTick) {\n    var items = [];\n    var ticks = scale.getTicks();\n    if (coordinate.isPolar) {\n        // 补全 ticks\n        ticks.push({\n            value: 1,\n            text: '',\n            tickValue: '',\n        });\n    }\n    ticks.reduce(function (preTick, currentTick, currentIndex) {\n        var currentValue = currentTick.value;\n        if (alignTick) {\n            items.push({\n                points: [\n                    coordinate.convert(dim === 'y' ? { x: 0, y: currentValue } : { x: currentValue, y: 0 }),\n                    coordinate.convert(dim === 'y' ? { x: 1, y: currentValue } : { x: currentValue, y: 1 }),\n                ],\n            });\n        }\n        else {\n            if (currentIndex) {\n                var preValue = preTick.value;\n                var middleValue = (preValue + currentValue) / 2;\n                items.push({\n                    points: [\n                        coordinate.convert(dim === 'y' ? { x: 0, y: middleValue } : { x: middleValue, y: 0 }),\n                        coordinate.convert(dim === 'y' ? { x: 1, y: middleValue } : { x: middleValue, y: 1 }),\n                    ],\n                });\n            }\n        }\n        return currentTick;\n    }, ticks[0]);\n    return items;\n}\n/**\n * @ignore\n * get\n * @param coordinate\n * @param xScale\n * @param yScale\n * @param dim\n * @returns items\n */\nexport function getCircleGridItems(coordinate, xScale, yScale, alignTick, dim) {\n    var count = xScale.values.length;\n    var items = [];\n    var ticks = yScale.getTicks();\n    ticks.reduce(function (preTick, currentTick) {\n        var preValue = preTick ? preTick.value : currentTick.value; // 只有一项数据时取当前值\n        var currentValue = currentTick.value;\n        var middleValue = (preValue + currentValue) / 2;\n        if (dim === 'x') {\n            // 如果是 x 轴作为半径轴，那么只需要取圆弧收尾两个即可\n            items.push({\n                points: [\n                    coordinate.convert({\n                        x: alignTick ? currentValue : middleValue,\n                        y: 0,\n                    }),\n                    coordinate.convert({\n                        x: alignTick ? currentValue : middleValue,\n                        y: 1,\n                    }),\n                ]\n            });\n        }\n        else {\n            items.push({\n                points: map(Array(count + 1), function (__, idx) {\n                    return coordinate.convert({\n                        x: idx / count,\n                        y: alignTick ? currentValue : middleValue,\n                    });\n                }),\n            });\n        }\n        return currentTick;\n    }, ticks[0]);\n    return items;\n}\n/**\n * @ignore\n * show grid or not\n * @param axisTheme\n * @param axisOption\n */\nexport function showGrid(axisTheme, axisOption) {\n    var userGrid = get(axisOption, 'grid');\n    if (userGrid === null) {\n        return false;\n    }\n    var themeGrid = get(axisTheme, 'grid');\n    return !(userGrid === undefined && themeGrid === null);\n}\n//# sourceMappingURL=grid.js.map","import { __assign, __extends } from \"tslib\";\nimport { deepMix, each, get, isUndefined } from '@antv/util';\nimport { COMPONENT_TYPE, DIRECTION, LAYER } from '../../constant';\nimport { CircleAxis, CircleGrid, LineAxis, LineGrid } from '../../dependents';\nimport { DEFAULT_ANIMATE_CFG } from '../../animate/';\nimport { getAxisDirection, getAxisFactorByRegion, getAxisRegion, getAxisThemeCfg, getAxisTitleText, getCircleAxisCenterRadius } from '../../util/axis';\nimport { getAxisOption } from '../../util/axis';\nimport { getCircleGridItems, getGridThemeCfg, getLineGridItems, showGrid } from '../../util/grid';\nimport { omit } from '../../util/helper';\nimport { Controller } from './base';\n// update 组件的时候，忽略的数据更新\nvar OMIT_CFG = ['container'];\n// 坐标轴默认动画配置\nvar AXIS_DEFAULT_ANIMATE_CFG = __assign(__assign({}, DEFAULT_ANIMATE_CFG), { appear: null });\n/**\n * @ignore\n * G2 Axis controller, will:\n *  - create component\n *    - axis\n *    - grid\n *  - life circle\n */\nvar Axis = /** @class */ (function (_super) {\n    __extends(Axis, _super);\n    function Axis(view) {\n        var _this = _super.call(this, view) || this;\n        /** 使用 object 存储组件 */\n        _this.cache = new Map();\n        // 先创建 gridContainer，将 grid 放到 axis 底层\n        _this.gridContainer = _this.view.getLayer(LAYER.BG).addGroup();\n        _this.axisContainer = _this.view.getLayer(LAYER.BG).addGroup();\n        return _this;\n    }\n    Object.defineProperty(Axis.prototype, \"name\", {\n        get: function () {\n            return 'axis';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Axis.prototype.init = function () { };\n    Axis.prototype.render = function () {\n        this.option = this.view.getOptions().axes;\n        this.createXAxes();\n        this.createYAxes();\n    };\n    /**\n     * 更新组件布局，位置大小\n     */\n    Axis.prototype.layout = function () {\n        var _this = this;\n        var coordinate = this.view.getCoordinate();\n        each(this.getComponents(), function (co) {\n            var component = co.component, direction = co.direction, type = co.type, extra = co.extra;\n            var dim = extra.dim, scale = extra.scale, alignTick = extra.alignTick;\n            var updated;\n            if (type === COMPONENT_TYPE.AXIS) {\n                if (coordinate.isPolar) {\n                    if (dim === 'x') {\n                        updated = coordinate.isTransposed ? getAxisRegion(coordinate, direction) : getCircleAxisCenterRadius(coordinate);\n                    }\n                    else if (dim === 'y') {\n                        updated = coordinate.isTransposed ? getCircleAxisCenterRadius(coordinate) : getAxisRegion(coordinate, direction);\n                    }\n                }\n                else {\n                    updated = getAxisRegion(coordinate, direction);\n                }\n            }\n            else if (type === COMPONENT_TYPE.GRID) {\n                if (coordinate.isPolar) {\n                    var items = void 0;\n                    if (coordinate.isTransposed) {\n                        items = dim === 'x' ?\n                            getCircleGridItems(coordinate, _this.view.getYScales()[0], scale, alignTick, dim) :\n                            getLineGridItems(coordinate, scale, dim, alignTick);\n                    }\n                    else {\n                        items = dim === 'x' ?\n                            getLineGridItems(coordinate, scale, dim, alignTick) :\n                            getCircleGridItems(coordinate, _this.view.getXScale(), scale, alignTick, dim);\n                    }\n                    updated = {\n                        items: items,\n                        // coordinate 更新之后，center 也变化了\n                        center: _this.view.getCoordinate().getCenter(),\n                    };\n                }\n                else {\n                    updated = { items: getLineGridItems(coordinate, scale, dim, alignTick) };\n                }\n            }\n            component.update(updated);\n        });\n    };\n    /**\n     * 更新 axis 组件\n     */\n    Axis.prototype.update = function () {\n        this.option = this.view.getOptions().axes;\n        var updatedCache = new Map();\n        this.updateXAxes(updatedCache);\n        this.updateYAxes(updatedCache);\n        // 处理完成之后，销毁删除的\n        // 不在处理中的\n        var newCache = new Map();\n        this.cache.forEach(function (co, key) {\n            if (updatedCache.has(key)) {\n                newCache.set(key, co);\n            }\n            else {\n                // 不存在，则是所有需要被销毁的组件\n                co.component.destroy();\n            }\n        });\n        // 更新缓存\n        this.cache = newCache;\n    };\n    Axis.prototype.clear = function () {\n        _super.prototype.clear.call(this);\n        this.cache.clear();\n        this.gridContainer.clear();\n        this.axisContainer.clear();\n    };\n    Axis.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.gridContainer.remove(true);\n        this.axisContainer.remove(true);\n    };\n    /**\n     * @override\n     */\n    Axis.prototype.getComponents = function () {\n        var co = [];\n        this.cache.forEach(function (value) {\n            co.push(value);\n        });\n        return co;\n    };\n    /**\n     * 更新 x axis\n     * @param updatedCache\n     */\n    Axis.prototype.updateXAxes = function (updatedCache) {\n        // x axis\n        var scale = this.view.getXScale();\n        // @ts-ignore\n        if (!scale || scale.isIdentity) {\n            return;\n        }\n        var field = scale.field;\n        var xAxisOption = getAxisOption(this.option, scale.field);\n        if (xAxisOption === false) {\n            return;\n        }\n        var coordinate = this.view.getCoordinate();\n        var axisId = this.getId('axis', field);\n        var gridId = this.getId('grid', field);\n        var direction = getAxisDirection(xAxisOption, DIRECTION.BOTTOM);\n        var layer = LAYER.BG;\n        var dim = 'x';\n        if (coordinate.isRect) {\n            // 1. do axis update\n            var axis = this.cache.get(axisId);\n            // 存在则更新\n            if (axis) {\n                var cfg = this.getLineAxisCfg(scale, xAxisOption, direction);\n                omit(cfg, OMIT_CFG);\n                axis.component.update(cfg);\n                updatedCache.set(axisId, axis);\n            }\n            else {\n                // 不存在，则创建\n                axis = this.createLineAxis(scale, xAxisOption, layer, direction, dim);\n                this.cache.set(axisId, axis);\n                updatedCache.set(axisId, axis);\n            }\n            // 2. do grid update\n            var grid = this.cache.get(gridId);\n            // 存在则更新\n            if (grid) {\n                var cfg = this.getLineGridCfg(scale, xAxisOption, direction, dim);\n                omit(cfg, OMIT_CFG);\n                grid.component.update(cfg);\n                updatedCache.set(gridId, grid);\n            }\n            else {\n                // 不存在则创建\n                grid = this.createLineGrid(scale, xAxisOption, layer, direction, dim);\n                if (grid) {\n                    this.cache.set(gridId, grid);\n                    updatedCache.set(gridId, grid);\n                }\n            }\n        }\n        else if (coordinate.isPolar) {\n            // 1. do axis update\n            var axis = this.cache.get(axisId);\n            // 存在则更新\n            if (axis) {\n                var cfg = coordinate.isTransposed ?\n                    // @ts-ignore\n                    this.getLineAxisCfg(scale, xAxisOption, 'radius') :\n                    this.getCircleAxisCfg(scale, xAxisOption, direction);\n                omit(cfg, OMIT_CFG);\n                axis.component.update(cfg);\n                updatedCache.set(axisId, axis);\n            }\n            else {\n                // 不存在，则创建\n                if (coordinate.isTransposed) {\n                    if (isUndefined(xAxisOption)) {\n                        // 默认不渲染转置极坐标下的坐标轴\n                        return;\n                    }\n                    else {\n                        // @ts-ignore\n                        axis = this.createLineAxis(scale, xAxisOption, layer, 'radius', dim);\n                    }\n                }\n                else {\n                    axis = this.createCircleAxis(scale, xAxisOption, layer, direction, dim);\n                }\n                this.cache.set(axisId, axis);\n                updatedCache.set(axisId, axis);\n            }\n            // 2. do grid update\n            var grid = this.cache.get(gridId);\n            // 存在则更新\n            if (grid) {\n                var cfg = coordinate.isTransposed ?\n                    // @ts-ignore\n                    this.getCircleGridCfg(scale, xAxisOption, 'radius', dim) :\n                    // @ts-ignore\n                    this.getLineGridCfg(scale, xAxisOption, 'circle', dim);\n                omit(cfg, OMIT_CFG);\n                grid.component.update(cfg);\n                updatedCache.set(gridId, grid);\n            }\n            else {\n                // 不存在则创建\n                if (coordinate.isTransposed) {\n                    if (isUndefined(xAxisOption)) {\n                        return;\n                    }\n                    else {\n                        // @ts-ignore\n                        grid = this.createCircleGrid(scale, xAxisOption, layer, 'radius', dim);\n                    }\n                }\n                else {\n                    // @ts-ignore\n                    grid = this.createLineGrid(scale, xAxisOption, layer, 'circle', dim);\n                }\n                if (grid) {\n                    this.cache.set(gridId, grid);\n                    updatedCache.set(gridId, grid);\n                }\n            }\n        }\n        else {\n            // helix and other, do not draw axis\n        }\n    };\n    Axis.prototype.updateYAxes = function (updatedCache) {\n        var _this = this;\n        // y axes\n        var yScales = this.view.getYScales();\n        each(yScales, function (scale, idx) {\n            // @ts-ignore\n            if (!scale || scale.isIdentity) {\n                return;\n            }\n            var field = scale.field;\n            var yAxisOption = getAxisOption(_this.option, field);\n            if (yAxisOption !== false) {\n                var layer = LAYER.BG;\n                var dim = 'y';\n                var axisId = _this.getId('axis', field);\n                var gridId = _this.getId('grid', field);\n                var coordinate = _this.view.getCoordinate();\n                if (coordinate.isRect) {\n                    var direction = getAxisDirection(yAxisOption, idx === 0 ? DIRECTION.LEFT : DIRECTION.RIGHT);\n                    // 1. do axis update\n                    var axis = _this.cache.get(axisId);\n                    // 存在则更新\n                    if (axis) {\n                        var cfg = _this.getLineAxisCfg(scale, yAxisOption, direction);\n                        omit(cfg, OMIT_CFG);\n                        axis.component.update(cfg);\n                        updatedCache.set(axisId, axis);\n                    }\n                    else {\n                        // 不存在，则创建\n                        axis = _this.createLineAxis(scale, yAxisOption, layer, direction, dim);\n                        _this.cache.set(axisId, axis);\n                        updatedCache.set(axisId, axis);\n                    }\n                    // 2. do grid update\n                    var grid = _this.cache.get(gridId);\n                    // 存在则更新\n                    if (grid) {\n                        var cfg = _this.getLineGridCfg(scale, yAxisOption, direction, dim);\n                        omit(cfg, OMIT_CFG);\n                        grid.component.update(cfg);\n                        updatedCache.set(gridId, grid);\n                    }\n                    else {\n                        // 不存在则创建\n                        grid = _this.createLineGrid(scale, yAxisOption, layer, direction, dim);\n                        if (grid) {\n                            _this.cache.set(gridId, grid);\n                            updatedCache.set(gridId, grid);\n                        }\n                    }\n                }\n                else if (coordinate.isPolar) {\n                    // 1. do axis update\n                    var axis = _this.cache.get(axisId);\n                    // 存在则更新\n                    if (axis) {\n                        var cfg = coordinate.isTransposed ?\n                            // @ts-ignore\n                            _this.getCircleAxisCfg(scale, yAxisOption, 'circle') :\n                            // @ts-ignore\n                            _this.getLineAxisCfg(scale, yAxisOption, 'radius');\n                        // @ts-ignore\n                        omit(cfg, OMIT_CFG);\n                        axis.component.update(cfg);\n                        updatedCache.set(axisId, axis);\n                    }\n                    else {\n                        // 不存在，则创建\n                        if (coordinate.isTransposed) {\n                            if (isUndefined(yAxisOption)) {\n                                return;\n                            }\n                            else {\n                                // @ts-ignore\n                                axis = _this.createCircleAxis(scale, yAxisOption, layer, 'circle', dim);\n                            }\n                        }\n                        else {\n                            // @ts-ignore\n                            axis = _this.createLineAxis(scale, yAxisOption, layer, 'radius', dim);\n                        }\n                        _this.cache.set(axisId, axis);\n                        updatedCache.set(axisId, axis);\n                    }\n                    // 2. do grid update\n                    var grid = _this.cache.get(gridId);\n                    // 存在则更新\n                    if (grid) {\n                        var cfg = coordinate.isTransposed ?\n                            // @ts-ignore\n                            _this.getLineGridCfg(scale, yAxisOption, 'circle', dim) :\n                            // @ts-ignore\n                            _this.getCircleGridCfg(scale, yAxisOption, 'radius', dim);\n                        omit(cfg, OMIT_CFG);\n                        grid.component.update(cfg);\n                        updatedCache.set(gridId, grid);\n                    }\n                    else {\n                        // 不存在则创建\n                        if (coordinate.isTransposed) {\n                            if (isUndefined(yAxisOption)) {\n                                return;\n                            }\n                            else {\n                                // @ts-ignore\n                                grid = _this.createLineGrid(scale, yAxisOption, layer, 'circle', dim);\n                            }\n                        }\n                        else {\n                            // @ts-ignore\n                            grid = _this.createCircleGrid(scale, yAxisOption, layer, 'radius', dim);\n                        }\n                        if (grid) {\n                            _this.cache.set(gridId, grid);\n                            updatedCache.set(gridId, grid);\n                        }\n                    }\n                }\n                else {\n                    // helix and other, do not draw axis\n                }\n            }\n        });\n    };\n    /**\n     * 创建 x axis 组件\n     */\n    Axis.prototype.createXAxes = function () {\n        // x axis\n        var scale = this.view.getXScale();\n        if (!scale || scale.isIdentity) {\n            return;\n        }\n        var xAxisOption = getAxisOption(this.option, scale.field);\n        if (xAxisOption !== false) {\n            var direction = getAxisDirection(xAxisOption, DIRECTION.BOTTOM);\n            var layer = LAYER.BG;\n            var dim = 'x';\n            var coordinate = this.view.getCoordinate();\n            var axisId = this.getId('axis', scale.field);\n            var gridId = this.getId('grid', scale.field);\n            if (coordinate.isRect) {\n                // axis\n                var axis = this.createLineAxis(scale, xAxisOption, layer, direction, dim);\n                this.cache.set(axisId, axis);\n                // grid\n                var grid = this.createLineGrid(scale, xAxisOption, layer, direction, dim);\n                if (grid) {\n                    this.cache.set(gridId, grid);\n                }\n            }\n            else if (coordinate.isPolar) {\n                var axis = void 0;\n                var grid = void 0;\n                if (coordinate.isTransposed) {\n                    if (isUndefined(xAxisOption)) {\n                        // 默认不渲染转置极坐标的坐标轴\n                        return;\n                    }\n                    else {\n                        // 如果用户打开了隐藏的坐标轴 chart.axis(true)/chart.axis('x', true)\n                        // 那么对于转置了的极坐标，半径轴显示的是 x 轴对应的数据\n                        // @ts-ignore\n                        axis = this.createLineAxis(scale, xAxisOption, layer, 'radius', dim);\n                        // @ts-ignore\n                        grid = this.createCircleGrid(scale, xAxisOption, layer, 'radius', dim);\n                    }\n                }\n                else {\n                    axis = this.createCircleAxis(scale, xAxisOption, layer, direction, dim);\n                    // grid，极坐标下的 x 轴网格线沿着半径方向绘制\n                    // @ts-ignore\n                    grid = this.createLineGrid(scale, xAxisOption, layer, 'circle', dim);\n                }\n                this.cache.set(axisId, axis);\n                if (grid) {\n                    this.cache.set(gridId, grid);\n                }\n            }\n            else {\n                // helix and other, do not draw axis\n            }\n        }\n    };\n    /**\n     * create y axis\n     */\n    Axis.prototype.createYAxes = function () {\n        var _this = this;\n        // y axes\n        var yScales = this.view.getYScales();\n        each(yScales, function (scale, idx) {\n            // @ts-ignore\n            if (!scale || scale.isIdentity) {\n                return;\n            }\n            var field = scale.field;\n            var yAxisOption = getAxisOption(_this.option, field);\n            if (yAxisOption !== false) {\n                var layer = LAYER.BG;\n                var dim = 'y';\n                var axisId = _this.getId('axis', field);\n                var gridId = _this.getId('grid', field);\n                var coordinate = _this.view.getCoordinate();\n                if (coordinate.isRect) {\n                    var direction = getAxisDirection(yAxisOption, idx === 0 ? DIRECTION.LEFT : DIRECTION.RIGHT);\n                    // axis\n                    var axis = _this.createLineAxis(scale, yAxisOption, layer, direction, dim);\n                    _this.cache.set(axisId, axis);\n                    // grid\n                    var grid = _this.createLineGrid(scale, yAxisOption, layer, direction, dim);\n                    if (grid) {\n                        _this.cache.set(gridId, grid);\n                    }\n                }\n                else if (coordinate.isPolar) {\n                    var axis = void 0;\n                    var grid = void 0;\n                    if (coordinate.isTransposed) {\n                        if (isUndefined(yAxisOption)) {\n                            return;\n                        }\n                        else {\n                            // @ts-ignore\n                            axis = _this.createCircleAxis(scale, yAxisOption, layer, 'circle', dim);\n                            // @ts-ignore\n                            grid = _this.createLineGrid(scale, yAxisOption, layer, 'circle', dim);\n                        }\n                    }\n                    else {\n                        // @ts-ignore\n                        axis = _this.createLineAxis(scale, yAxisOption, layer, 'radius', dim);\n                        // @ts-ignore\n                        grid = _this.createCircleGrid(scale, yAxisOption, layer, 'radius', dim);\n                    }\n                    _this.cache.set(_this.getId('axis', scale.field), axis);\n                    if (grid) {\n                        _this.cache.set(gridId, grid);\n                    }\n                }\n                else {\n                    // helix and other, do not draw axis\n                }\n            }\n        });\n    };\n    /**\n     * 创建 line axis\n     * @param scale\n     * @param option\n     * @param layer\n     * @param direction\n     * @param dim\n     */\n    Axis.prototype.createLineAxis = function (scale, option, layer, direction, dim) {\n        // axis\n        var axis = {\n            component: new LineAxis(this.getLineAxisCfg(scale, option, direction)),\n            layer: layer,\n            // @ts-ignore\n            direction: direction === 'radius' ? DIRECTION.NONE : direction,\n            type: COMPONENT_TYPE.AXIS,\n            extra: { dim: dim, scale: scale },\n        };\n        axis.component.set('field', scale.field);\n        axis.component.init();\n        return axis;\n    };\n    Axis.prototype.createLineGrid = function (scale, option, layer, direction, dim) {\n        var cfg = this.getLineGridCfg(scale, option, direction, dim);\n        if (cfg) {\n            var grid = {\n                component: new LineGrid(cfg),\n                layer: layer,\n                direction: DIRECTION.NONE,\n                type: COMPONENT_TYPE.GRID,\n                extra: {\n                    dim: dim,\n                    scale: scale,\n                    alignTick: get(cfg, 'alignTick', true),\n                },\n            };\n            grid.component.init();\n            return grid;\n        }\n    };\n    Axis.prototype.createCircleAxis = function (scale, option, layer, direction, dim) {\n        var axis = {\n            component: new CircleAxis(this.getCircleAxisCfg(scale, option, direction)),\n            layer: layer,\n            direction: direction,\n            type: COMPONENT_TYPE.AXIS,\n            extra: { dim: dim, scale: scale },\n        };\n        axis.component.set('field', scale.field);\n        axis.component.init();\n        return axis;\n    };\n    Axis.prototype.createCircleGrid = function (scale, option, layer, direction, dim) {\n        var cfg = this.getCircleGridCfg(scale, option, direction, dim);\n        if (cfg) {\n            var grid = {\n                component: new CircleGrid(cfg),\n                layer: layer,\n                direction: DIRECTION.NONE,\n                type: COMPONENT_TYPE.GRID,\n                extra: {\n                    dim: dim,\n                    scale: scale,\n                    alignTick: get(cfg, 'alignTick', true),\n                },\n            };\n            grid.component.init();\n            return grid;\n        }\n    };\n    /**\n     * generate line axis cfg\n     * @param scale\n     * @param axisOption\n     * @param direction\n     * @return line axis cfg\n     */\n    Axis.prototype.getLineAxisCfg = function (scale, axisOption, direction) {\n        var container = this.axisContainer;\n        var coordinate = this.view.getCoordinate();\n        var region = getAxisRegion(coordinate, direction);\n        var titleText = getAxisTitleText(scale, axisOption);\n        var axisThemeCfg = getAxisThemeCfg(this.view.getTheme(), direction);\n        // the cfg order should be ensure\n        var optionWithTitle = get(axisOption, ['title'])\n            ? deepMix({ title: { style: { text: titleText } } }, axisOption)\n            : axisOption;\n        var cfg = deepMix(__assign(__assign({ container: container }, region), { ticks: scale.getTicks().map(function (tick) { return ({ id: \"\" + tick.tickValue, name: tick.text, value: tick.value }); }), verticalFactor: coordinate.isPolar\n                ? getAxisFactorByRegion(region, coordinate.getCenter()) * -1\n                : getAxisFactorByRegion(region, coordinate.getCenter()) }), axisThemeCfg, optionWithTitle);\n        var _a = this.getAnimateCfg(cfg), animate = _a.animate, animateOption = _a.animateOption;\n        cfg.animateOption = animateOption;\n        cfg.animate = animate;\n        return cfg;\n    };\n    /**\n     * generate line grid cfg\n     * @param scale\n     * @param axisOption\n     * @param direction\n     * @param dim\n     * @return line grid cfg\n     */\n    Axis.prototype.getLineGridCfg = function (scale, axisOption, direction, dim) {\n        if (!showGrid(getAxisThemeCfg(this.view.getTheme(), direction), axisOption)) {\n            return undefined;\n        }\n        var gridThemeCfg = getGridThemeCfg(this.view.getTheme(), direction);\n        // the cfg order should be ensure\n        // grid 动画以 axis 为准\n        var gridCfg = deepMix({\n            container: this.gridContainer,\n        }, gridThemeCfg, get(axisOption, 'grid'), this.getAnimateCfg(axisOption));\n        gridCfg.items = getLineGridItems(this.view.getCoordinate(), scale, dim, get(gridCfg, 'alignTick', true));\n        return gridCfg;\n    };\n    /**\n     * generate circle axis cfg\n     * @param scale\n     * @param axisOption\n     * @param direction\n     * @return circle axis cfg\n     */\n    Axis.prototype.getCircleAxisCfg = function (scale, axisOption, direction) {\n        var container = this.axisContainer;\n        var coordinate = this.view.getCoordinate();\n        var ticks = scale.getTicks().map(function (tick) { return ({ id: \"\" + tick.tickValue, name: tick.text, value: tick.value }); });\n        if (!scale.isCategory && Math.abs(coordinate.endAngle - coordinate.startAngle) === Math.PI * 2) {\n            // x 轴对应的值如果是非 cat 类型，在整圆的情况下坐标轴第一个和最后一个文本会重叠，默认只展示第一个文本\n            ticks.pop();\n        }\n        var titleText = getAxisTitleText(scale, axisOption);\n        var axisThemeCfg = getAxisThemeCfg(this.view.getTheme(), 'circle');\n        // the cfg order should be ensure\n        var optionWithTitle = get(axisOption, ['title'])\n            ? deepMix({ title: { style: { text: titleText } } }, axisOption)\n            : axisOption;\n        var cfg = deepMix(__assign(__assign({ container: container }, getCircleAxisCenterRadius(this.view.getCoordinate())), { ticks: ticks, verticalFactor: 1 }), axisThemeCfg, optionWithTitle);\n        var _a = this.getAnimateCfg(cfg), animate = _a.animate, animateOption = _a.animateOption;\n        cfg.animate = animate;\n        cfg.animateOption = animateOption;\n        return cfg;\n    };\n    /**\n     * generate circle grid cfg\n     * @param scale\n     * @param axisOption\n     * @param direction\n     * @return circle grid cfg\n     */\n    Axis.prototype.getCircleGridCfg = function (scale, axisOption, direction, dim) {\n        if (!showGrid(getAxisThemeCfg(this.view.getTheme(), direction), axisOption)) {\n            return undefined;\n        }\n        // the cfg order should be ensure\n        // grid 动画以 axis 为准\n        // @ts-ignore\n        var gridThemeCfg = getGridThemeCfg(this.view.getTheme(), 'radius');\n        var gridCfg = deepMix({\n            container: this.gridContainer,\n            center: this.view.getCoordinate().getCenter(),\n        }, gridThemeCfg, get(axisOption, 'grid'), this.getAnimateCfg(axisOption));\n        var alignTick = get(gridCfg, 'alignTick', true);\n        var verticalScale = dim === 'x' ? this.view.getYScales()[0] : this.view.getXScale();\n        gridCfg.items = getCircleGridItems(this.view.getCoordinate(), verticalScale, scale, alignTick, dim);\n        // the cfg order should be ensure\n        // grid 动画以 axis 为准\n        return gridCfg;\n    };\n    Axis.prototype.getId = function (name, key) {\n        var coordinate = this.view.getCoordinate();\n        // 坐标系类型也作为组件的 key\n        return name + \"-\" + key + \"-\" + coordinate.type;\n    };\n    Axis.prototype.getAnimateCfg = function (cfg) {\n        return {\n            animate: this.view.getOptions().animate && get(cfg, 'animate'),\n            animateOption: cfg && cfg.animateOption ? deepMix({}, AXIS_DEFAULT_ANIMATE_CFG, cfg.animateOption) : AXIS_DEFAULT_ANIMATE_CFG,\n        };\n    };\n    return Axis;\n}(Controller));\nexport default Axis;\n//# sourceMappingURL=axis.js.map","import { DIRECTION } from '../constant';\n/**\n * @ignore\n * 方位常量转实际的 bbox 位置大小\n * @param parentBBox\n * @param bbox\n * @param direction\n */\nexport function directionToPosition(parentBBox, bbox, direction) {\n    if (direction === DIRECTION.TOP) {\n        return [parentBBox.minX + parentBBox.width / 2 - bbox.width / 2, parentBBox.minY];\n    }\n    if (direction === DIRECTION.BOTTOM) {\n        return [parentBBox.minX + parentBBox.width / 2 - bbox.width / 2, parentBBox.maxY - bbox.height];\n    }\n    if (direction === DIRECTION.LEFT) {\n        return [parentBBox.minX, parentBBox.minY + parentBBox.height / 2 - bbox.height / 2];\n    }\n    if (direction === DIRECTION.RIGHT) {\n        return [parentBBox.maxX - bbox.width, parentBBox.minY + parentBBox.height / 2 - bbox.height / 2];\n    }\n    if (direction === DIRECTION.TOP_LEFT || direction === DIRECTION.LEFT_TOP) {\n        return [parentBBox.tl.x, parentBBox.tl.y];\n    }\n    if (direction === DIRECTION.TOP_RIGHT || direction === DIRECTION.RIGHT_TOP) {\n        return [parentBBox.tr.x - bbox.width, parentBBox.tr.y];\n    }\n    if (direction === DIRECTION.BOTTOM_LEFT || direction === DIRECTION.LEFT_BOTTOM) {\n        return [parentBBox.bl.x, parentBBox.bl.y - bbox.height];\n    }\n    if (direction === DIRECTION.BOTTOM_RIGHT || direction === DIRECTION.RIGHT_BOTTOM) {\n        return [parentBBox.br.x - bbox.width, parentBBox.br.y - bbox.height];\n    }\n    return [0, 0];\n}\n/**\n * get direction after coordinate transpose\n * @param direction\n * @param coordinate\n * @returns direction after transpose or not\n */\nfunction getTransposedDirection(direction, coordinate) {\n    if (coordinate.isTransposed) {\n        switch (direction) {\n            case DIRECTION.BOTTOM:\n                return DIRECTION.LEFT;\n            case DIRECTION.LEFT:\n                return DIRECTION.BOTTOM;\n            case DIRECTION.RIGHT:\n                return DIRECTION.TOP;\n            case DIRECTION.TOP:\n                return DIRECTION.RIGHT;\n        }\n    }\n    return direction;\n}\nfunction reflectX(direct) {\n    if (direct === DIRECTION.LEFT) {\n        return DIRECTION.RIGHT;\n    }\n    if (direct === DIRECTION.RIGHT) {\n        return DIRECTION.LEFT;\n    }\n    return direct;\n}\nfunction reflectY(direct) {\n    if (direct === DIRECTION.TOP) {\n        return DIRECTION.BOTTOM;\n    }\n    if (direct === DIRECTION.BOTTOM) {\n        return DIRECTION.TOP;\n    }\n    return direct;\n}\n/**\n * get direction after coordinate.scale\n * @param direction\n * @param coordinate\n */\nfunction getScaleDirection(direction, coordinate) {\n    var x = coordinate.matrix[0];\n    var y = coordinate.matrix[4];\n    var d = direction;\n    if (x < 0) {\n        d = reflectX(d);\n    }\n    if (y < 0) {\n        d = reflectY(d);\n    }\n    return d;\n}\n/**\n *\n * @param direction\n * @param coordinate\n */\nfunction getReflectDirection(direction, coordinate) {\n    var d = direction;\n    if (coordinate.isReflect('x')) {\n        d = reflectX(d);\n    }\n    if (coordinate.isReflect('y')) {\n        d = reflectY(d);\n    }\n    return d;\n}\n/**\n * @ignore\n * get direction after coordinate translate\n * @param direction\n * @param coordinate\n */\nexport function getTranslateDirection(direction, coordinate) {\n    var d = direction;\n    d = getTransposedDirection(d, coordinate);\n    d = getScaleDirection(d, coordinate);\n    d = getReflectDirection(d, coordinate);\n    return d;\n}\n//# sourceMappingURL=direction.js.map","import { __spreadArrays } from \"tslib\";\n/**\n * @ignore\n * get the mapping value by attribute, if mapping value is nil, return def\n * @param attr\n * @param value\n * @param def\n * @returns get mapping value\n */\nexport function getMappingValue(attr, value, def) {\n    if (!attr) {\n        return def;\n    }\n    var r;\n    // 多参数映射，阻止程序报错\n    if (attr.callback && attr.callback.length > 1) {\n        var restArgs = Array(attr.callback.length - 1).fill('');\n        r = attr.mapping.apply(attr, __spreadArrays([value], restArgs)).join('');\n    }\n    else {\n        r = attr.mapping(value).join('');\n    }\n    return r || def;\n}\n//# sourceMappingURL=attr.js.map","import { deepMix, isString } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getMappingValue } from './attr';\nimport { MarkerSymbols } from './marker';\nfunction setMarkerSymbol(marker) {\n    var symbol = marker.symbol;\n    if (isString(symbol) && MarkerSymbols[symbol]) {\n        marker.symbol = MarkerSymbols[symbol];\n    }\n}\n/**\n * @ignore\n * get the legend layout from direction\n * @param direction\n * @returns layout 'horizontal' | 'vertical'\n */\nexport function getLegendLayout(direction) {\n    return direction.startsWith(DIRECTION.LEFT) || direction.startsWith(DIRECTION.RIGHT) ? 'vertical' : 'horizontal';\n}\n/**\n * @ignore\n * get the legend items\n * @param view\n * @param geometry\n * @param attr\n * @param themeMarker\n * @param userMarker\n * @returns legend items\n */\nexport function getLegendItems(view, geometry, attr, themeMarker, userMarker) {\n    var scale = attr.getScale(attr.type);\n    if (scale.isCategory) {\n        var field_1 = scale.field;\n        var colorAttr_1 = geometry.getAttribute('color');\n        var shapeAttr_1 = geometry.getAttribute('shape');\n        var defaultColor_1 = view.getTheme().defaultColor;\n        var isInPolar_1 = geometry.coordinate.isPolar;\n        return scale.getTicks().map(function (tick) {\n            var _a;\n            var text = tick.text, scaleValue = tick.value;\n            var name = text;\n            var value = scale.invert(scaleValue);\n            // 通过过滤图例项的数据，来看是否 unchecked\n            var unchecked = view.filterFieldData(field_1, [(_a = {}, _a[field_1] = value, _a)]).length === 0;\n            // @ts-ignore\n            var color = getMappingValue(colorAttr_1, value, defaultColor_1);\n            var shape = getMappingValue(shapeAttr_1, value, 'point');\n            var marker = geometry.getShapeMarker(shape, {\n                color: color,\n                isInPolar: isInPolar_1,\n            });\n            // the marker configure order should be ensure\n            marker = deepMix({}, themeMarker, marker, userMarker);\n            setMarkerSymbol(marker);\n            return { id: value, name: name, value: value, marker: marker, unchecked: unchecked };\n        });\n    }\n    return [];\n}\n/**\n * @ignore\n * custom legend 的 items 获取\n * @param themeMarker\n * @param userMarker\n * @param customItems\n */\nexport function getCustomLegendItems(themeMarker, userMarker, customItems) {\n    // 如果有自定义的 item，那么就直接使用，并合并主题的 marker 配置\n    return customItems.map(function (item) {\n        var marker = deepMix({}, themeMarker, userMarker, item.marker);\n        setMarkerSymbol(marker);\n        item.marker = marker;\n        return item;\n    });\n}\n//# sourceMappingURL=legend.js.map","import { __extends } from \"tslib\";\nimport { deepMix, each, find, get, head, isBoolean, last } from '@antv/util';\nimport { COMPONENT_MAX_VIEW_PERCENTAGE, COMPONENT_TYPE, DIRECTION, LAYER } from '../../constant';\nimport { CategoryLegend, ContinuousLegend } from '../../dependents';\nimport { DEFAULT_ANIMATE_CFG } from '../../animate';\nimport { BBox } from '../../util/bbox';\nimport { directionToPosition } from '../../util/direction';\nimport { omit } from '../../util/helper';\nimport { getCustomLegendItems, getLegendItems, getLegendLayout } from '../../util/legend';\nimport { getName } from '../../util/scale';\nimport { Controller } from './base';\n/**\n * 从配置中获取单个字段的 legend 配置\n * @param legends\n * @param field\n * @returns the option of one legend field\n */\nfunction getLegendOption(legends, field) {\n    if (isBoolean(legends)) {\n        return legends === false ? false : {};\n    }\n    return get(legends, [field], legends);\n}\nfunction getDirection(legendOption) {\n    return get(legendOption, 'position', DIRECTION.BOTTOM);\n}\n/**\n * @ignore\n * legend Controller\n */\nvar Legend = /** @class */ (function (_super) {\n    __extends(Legend, _super);\n    function Legend(view) {\n        var _this = _super.call(this, view) || this;\n        _this.container = _this.view.getLayer(LAYER.FORE).addGroup();\n        return _this;\n    }\n    Object.defineProperty(Legend.prototype, \"name\", {\n        get: function () {\n            return 'legend';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Legend.prototype.init = function () { };\n    /**\n     * render the legend component by legend options\n     */\n    Legend.prototype.render = function () {\n        var _this = this;\n        this.option = this.view.getOptions().legends;\n        var doEachLegend = function (geometry, attr, scale) {\n            var legend = _this.createFieldLegend(geometry, attr, scale);\n            if (legend) {\n                legend.component.init();\n                _this.components.push(legend);\n            }\n        };\n        // 全局自定义图例\n        if (get(this.option, 'custom')) {\n            var component = this.createCustomLegend(undefined, undefined, undefined, this.option);\n            if (component) {\n                component.init();\n                var layer = LAYER.FORE;\n                var direction = getDirection(this.option);\n                this.components.push({\n                    id: 'global-custom',\n                    component: component,\n                    layer: layer,\n                    direction: direction,\n                    type: COMPONENT_TYPE.LEGEND,\n                    extra: undefined,\n                });\n            }\n        }\n        else {\n            // 遍历处理每一个创建逻辑\n            this.loopLegends(doEachLegend);\n        }\n    };\n    /**\n     * layout legend\n     * 计算出 legend 的 direction 位置 x, y\n     */\n    Legend.prototype.layout = function () {\n        var _this = this;\n        this.layoutBBox = this.view.viewBBox;\n        each(this.components, function (co) {\n            var component = co.component, direction = co.direction;\n            var layout = getLegendLayout(direction);\n            var maxSize = _this.getCategoryLegendSizeCfg(layout);\n            var maxWidth = component.get('maxWidth');\n            var maxHeight = component.get('maxHeight');\n            // 先更新 maxSize，更新 layoutBBox，以便计算正确的 x y\n            component.update({\n                maxWidth: Math.min(maxSize.maxWidth, maxWidth || 0),\n                maxHeight: Math.min(maxSize.maxHeight, maxHeight || 0),\n            });\n            var bboxObject = component.getLayoutBBox(); // 这里只需要他的 width、height 信息做位置调整\n            var bbox = new BBox(bboxObject.x, bboxObject.y, bboxObject.width, bboxObject.height);\n            var _a = directionToPosition(_this.view.coordinateBBox, bbox, direction), x1 = _a[0], y1 = _a[1];\n            var _b = directionToPosition(_this.layoutBBox, bbox, direction), x2 = _b[0], y2 = _b[1];\n            var x = 0;\n            var y = 0;\n            // 因为 legend x y 要和 coordinateBBox 对齐，所以要做一个简单的判断\n            if (direction.startsWith('top') || direction.startsWith('bottom')) {\n                x = x1;\n                y = y2;\n            }\n            else {\n                x = x2;\n                y = y1;\n            }\n            // 更新位置\n            component.update({\n                x: x,\n                y: y,\n            });\n            _this.layoutBBox = _this.layoutBBox.cut(bbox, direction);\n        });\n    };\n    /**\n     * legend 的更新逻辑\n     */\n    Legend.prototype.update = function () {\n        var _this = this;\n        this.option = this.view.getOptions().legends;\n        // 已经处理过的 legend\n        var updated = {};\n        var eachLegend = function (geometry, attr, scale) {\n            var id = _this.getId(scale.field);\n            var existCo = _this.getComponentById(id);\n            // 存在则 update\n            if (existCo) {\n                var cfg = void 0;\n                var legendOption = getLegendOption(_this.option, scale.field);\n                // if the legend option is not false, means legend should be created.\n                if (legendOption !== false) {\n                    if (get(legendOption, 'custom')) {\n                        cfg = _this.getCategoryCfg(geometry, attr, scale, legendOption, true);\n                    }\n                    else {\n                        if (scale.isLinear) {\n                            // linear field, create continuous legend\n                            cfg = _this.getContinuousCfg(geometry, attr, scale, legendOption);\n                        }\n                        else if (scale.isCategory) {\n                            // category field, create category legend\n                            cfg = _this.getCategoryCfg(geometry, attr, scale, legendOption);\n                        }\n                    }\n                }\n                // 如果 cfg 为空，则不在 updated 标记，那么会在后面逻辑中删除\n                if (cfg) {\n                    // omit 掉一些属性，比如 container 等\n                    omit(cfg, ['container']);\n                    existCo.direction = getDirection(legendOption);\n                    existCo.component.update(cfg);\n                    // 标记为新的\n                    updated[id] = true;\n                }\n            }\n            else {\n                // 不存在则 create\n                var legend = _this.createFieldLegend(geometry, attr, scale);\n                if (legend) {\n                    legend.component.init();\n                    _this.components.push(legend);\n                    // 标记为新的\n                    updated[id] = true;\n                }\n            }\n        };\n        // 全局自定义图例\n        if (get(this.option, 'custom')) {\n            var id = 'global-custom';\n            var existCo = this.getComponentById(id);\n            if (existCo) {\n                var customCfg = this.getCategoryCfg(undefined, undefined, undefined, this.option, true);\n                omit(customCfg, ['container']);\n                existCo.component.update(customCfg);\n                updated[id] = true;\n            }\n            else {\n                var component = this.createCustomLegend(undefined, undefined, undefined, this.option);\n                if (component) {\n                    component.init();\n                    var layer = LAYER.FORE;\n                    var direction = getDirection(this.option);\n                    this.components.push({\n                        id: id,\n                        component: component,\n                        layer: layer,\n                        direction: direction,\n                        type: COMPONENT_TYPE.LEGEND,\n                        extra: undefined,\n                    });\n                    // 标记为更新\n                    updated[id] = true;\n                }\n            }\n        }\n        else {\n            // 遍历处理每一个创建逻辑\n            this.loopLegends(eachLegend);\n        }\n        // 处理完成之后，销毁删除的\n        // 不在处理中的\n        var components = [];\n        each(this.getComponents(), function (co) {\n            if (updated[co.id]) {\n                components.push(co);\n            }\n            else {\n                co.component.destroy();\n            }\n        });\n        // 更新当前已有的 components\n        this.components = components;\n    };\n    Legend.prototype.clear = function () {\n        _super.prototype.clear.call(this);\n        this.container.clear();\n    };\n    Legend.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.container.remove(true);\n    };\n    /**\n     * 递归获取所有的 Geometry\n     */\n    Legend.prototype.getGeometries = function (view) {\n        var _this = this;\n        var geometries = view.geometries;\n        each(view.views, function (v) {\n            geometries = geometries.concat(_this.getGeometries(v));\n        });\n        return geometries;\n    };\n    /**\n     * 遍历 Geometry，处理 legend 逻辑\n     * @param doEach 每个 loop 中的处理方法\n     */\n    Legend.prototype.loopLegends = function (doEach) {\n        var isRootView = this.view.getRootView() === this.view;\n        // 非根 view，不处理 legend\n        if (!isRootView) {\n            return;\n        }\n        // 递归 view 中所有的 Geometry，进行创建 legend\n        var geometries = this.getGeometries(this.view);\n        var looped = {}; // 防止一个字段创建两个 legend\n        each(geometries, function (geometry) {\n            var attributes = geometry.getGroupAttributes();\n            each(attributes, function (attr) {\n                var scale = attr.getScale(attr.type);\n                // 如果在视觉通道上映射常量值，如 size(2) shape('circle') 不创建 legend\n                if (!scale || scale.type === 'identity' || looped[scale.field]) {\n                    return;\n                }\n                doEach(geometry, attr, scale);\n                looped[scale.field] = true;\n            });\n        });\n    };\n    /**\n     * 创建一个 legend\n     * @param geometry\n     * @param attr\n     * @param scale\n     */\n    Legend.prototype.createFieldLegend = function (geometry, attr, scale) {\n        var component;\n        var legendOption = getLegendOption(this.option, scale.field);\n        var layer = LAYER.FORE;\n        var direction = getDirection(legendOption);\n        // if the legend option is not false, means legend should be created.\n        if (legendOption !== false) {\n            if (get(legendOption, 'custom')) {\n                component = this.createCustomLegend(geometry, attr, scale, legendOption);\n            }\n            else {\n                if (scale.isLinear) {\n                    // linear field, create continuous legend\n                    component = this.createContinuousLegend(geometry, attr, scale, legendOption);\n                }\n                else if (scale.isCategory) {\n                    // category field, create category legend\n                    component = this.createCategoryLegend(geometry, attr, scale, legendOption);\n                }\n            }\n        }\n        if (component) {\n            component.set('field', scale.field);\n            return {\n                id: this.getId(scale.field),\n                component: component,\n                layer: layer,\n                direction: direction,\n                type: COMPONENT_TYPE.LEGEND,\n                extra: { scale: scale },\n            };\n        }\n    };\n    /**\n     * 自定义图例使用 category 图例去渲染\n     * @param geometry\n     * @param attr\n     * @param scale\n     * @param legendOption\n     */\n    Legend.prototype.createCustomLegend = function (geometry, attr, scale, legendOption) {\n        // 直接使用 分类图例渲染\n        var cfg = this.getCategoryCfg(geometry, attr, scale, legendOption, true);\n        return new CategoryLegend(cfg);\n    };\n    /**\n     * 创建连续图例\n     * @param geometry\n     * @param attr\n     * @param scale\n     * @param legendOption\n     */\n    Legend.prototype.createContinuousLegend = function (geometry, attr, scale, legendOption) {\n        var cfg = this.getContinuousCfg(geometry, attr, scale, legendOption);\n        return new ContinuousLegend(cfg);\n    };\n    /**\n     * 创建分类图例\n     * @param geometry\n     * @param attr\n     * @param scale\n     * @param legendOption\n     */\n    Legend.prototype.createCategoryLegend = function (geometry, attr, scale, legendOption) {\n        var cfg = this.getCategoryCfg(geometry, attr, scale, legendOption);\n        return new CategoryLegend(cfg);\n    };\n    /**\n     * 获得连续图例的配置\n     * @param geometry\n     * @param attr\n     * @param scale\n     * @param legendOption\n     */\n    Legend.prototype.getContinuousCfg = function (geometry, attr, scale, legendOption) {\n        var ticks = scale.getTicks();\n        var containMin = find(ticks, function (tick) { return tick.value === 0; });\n        var containMax = find(ticks, function (tick) { return tick.value === 1; });\n        var items = ticks.map(function (tick) {\n            var value = tick.value, tickValue = tick.tickValue;\n            var attrValue = attr.mapping(scale.invert(value)).join('');\n            return {\n                value: tickValue,\n                attrValue: attrValue,\n                color: attrValue,\n                scaleValue: value,\n            };\n        });\n        if (!containMin) {\n            items.push({\n                value: scale.min,\n                attrValue: attr.mapping(0).join(''),\n                color: attr.mapping(0).join(''),\n                scaleValue: 0,\n            });\n        }\n        if (!containMax) {\n            items.push({\n                value: scale.max,\n                attrValue: attr.mapping(1).join(''),\n                color: attr.mapping(1).join(''),\n                scaleValue: 1,\n            });\n        }\n        // 排序\n        items.sort(function (a, b) { return a.value - b.value; });\n        // 跟 attr 相关的配置\n        // size color 区别的配置\n        var attrLegendCfg = {\n            min: head(items).value,\n            max: last(items).value,\n            colors: [],\n            rail: {\n                type: attr.type,\n            },\n            track: {},\n        };\n        if (attr.type === 'size') {\n            attrLegendCfg.track = {\n                style: {\n                    // size 的选中前景色，对于 color，则直接使用 color 标识\n                    // @ts-ignore\n                    fill: attr.type === 'size' ? this.view.getTheme().defaultColor : undefined,\n                },\n            };\n        }\n        if (attr.type === 'color') {\n            attrLegendCfg.colors = items.map(function (item) { return item.attrValue; });\n        }\n        var container = this.container;\n        // if position is not set, use top as default\n        var direction = getDirection(legendOption);\n        var layout = getLegendLayout(direction);\n        var title = get(legendOption, 'title');\n        if (title) {\n            title = deepMix({\n                text: getName(scale),\n            }, title);\n        }\n        // 基础配置，从当前数据中读到的配置\n        attrLegendCfg.container = container;\n        attrLegendCfg.layout = layout;\n        attrLegendCfg.title = title;\n        attrLegendCfg.animateOption = DEFAULT_ANIMATE_CFG;\n        // @ts-ignore\n        return this.mergeLegendCfg(attrLegendCfg, legendOption, 'continuous');\n    };\n    /**\n     * 获取分类图例的配置项\n     * @param geometry\n     * @param attr\n     * @param scale\n     * @param custom\n     * @param legendOption\n     */\n    Legend.prototype.getCategoryCfg = function (geometry, attr, scale, legendOption, custom) {\n        var container = this.container;\n        // if position is not set, use top as default\n        var direction = get(legendOption, 'position', DIRECTION.BOTTOM);\n        // the default marker style\n        var themeMarker = get(this.view.getTheme(), ['components', 'legend', direction, 'marker']);\n        var userMarker = get(legendOption, 'marker');\n        var layout = getLegendLayout(direction);\n        var items = custom ?\n            getCustomLegendItems(themeMarker, userMarker, legendOption.items) :\n            getLegendItems(this.view, geometry, attr, themeMarker, userMarker);\n        var title = get(legendOption, 'title');\n        if (title) {\n            title = deepMix({\n                text: scale ? getName(scale) : '',\n            }, title);\n        }\n        var baseCfg = this.getCategoryLegendSizeCfg(layout);\n        baseCfg.container = container;\n        baseCfg.layout = layout;\n        baseCfg.items = items;\n        baseCfg.title = title;\n        baseCfg.animateOption = DEFAULT_ANIMATE_CFG;\n        var categoryCfg = this.mergeLegendCfg(baseCfg, legendOption, direction);\n        if (categoryCfg.reversed) {\n            // 图例项需要逆序\n            categoryCfg.items.reverse();\n        }\n        return categoryCfg;\n    };\n    /**\n     * get legend config, use option > suggestion > theme\n     * @param baseCfg\n     * @param legendOption\n     * @param direction\n     */\n    Legend.prototype.mergeLegendCfg = function (baseCfg, legendOption, direction) {\n        var themeObject = get(this.view.getTheme(), ['components', 'legend', direction], {});\n        return deepMix({}, themeObject, baseCfg, legendOption);\n    };\n    /**\n     * 生成 id\n     * @param key\n     */\n    Legend.prototype.getId = function (key) {\n        return this.name + \"-\" + key;\n    };\n    /**\n     * 根据 id 来获取组件\n     * @param id\n     */\n    Legend.prototype.getComponentById = function (id) {\n        return find(this.components, function (co) { return co.id === id; });\n    };\n    Legend.prototype.getCategoryLegendSizeCfg = function (layout) {\n        var _a = this.view.viewBBox, vw = _a.width, vh = _a.height;\n        var _b = this.view.coordinateBBox, cw = _b.width, ch = _b.height;\n        return layout === 'vertical'\n            ? {\n                maxWidth: vw * COMPONENT_MAX_VIEW_PERCENTAGE,\n                maxHeight: ch,\n            }\n            : {\n                maxWidth: cw,\n                maxHeight: vh * COMPONENT_MAX_VIEW_PERCENTAGE,\n            };\n    };\n    return Legend;\n}(Controller));\nexport default Legend;\n//# sourceMappingURL=legend.js.map","import { __assign, __extends } from \"tslib\";\nimport { deepMix, get, isObject, size } from '@antv/util';\nimport { COMPONENT_TYPE, DIRECTION, LAYER } from '../../constant';\nimport { Slider as SliderComponent } from '../../dependents';\nimport { BBox } from '../../util/bbox';\nimport { directionToPosition } from '../../util/direction';\nimport { isBetween, omit } from '../../util/helper';\nimport { Controller } from './base';\n/**\n * @ignore\n * slider Controller\n */\nvar Slider = /** @class */ (function (_super) {\n    __extends(Slider, _super);\n    function Slider(view) {\n        var _this = _super.call(this, view) || this;\n        /**\n         * 滑块滑动的时候出发\n         * @param v\n         */\n        _this.onValueChanged = function (v) {\n            var min = v[0], max = v[1];\n            _this.updateMinMaxText(min, max);\n            _this.view.render(true);\n        };\n        _this.container = _this.view.getLayer(LAYER.FORE).addGroup();\n        return _this;\n    }\n    Object.defineProperty(Slider.prototype, \"name\", {\n        get: function () {\n            return 'slider';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * 初始化\n     */\n    Slider.prototype.init = function () {\n    };\n    /**\n     * 渲染\n     */\n    Slider.prototype.render = function () {\n        this.option = this.view.getOptions().slider;\n        if (this.option) {\n            if (this.slider) {\n                // exist, update\n                this.slider = this.updateSlider();\n            }\n            else {\n                // not exist, create\n                this.slider = this.createSlider();\n                // 监听事件，绑定交互\n                this.slider.component.on('sliderchange', this.onValueChanged);\n            }\n            // changeData 的时候同样需要更新\n            // 设置初始的 text\n            var min = this.slider.component.get('start') || 0;\n            var max = this.slider.component.get('end') || 1;\n            this.updateMinMaxText(min, max);\n        }\n        else {\n            if (this.slider) {\n                // exist, destroy\n                this.slider.component.destroy();\n                this.slider = undefined;\n            }\n            else {\n                // do nothing\n            }\n        }\n    };\n    /**\n     * 布局\n     */\n    Slider.prototype.layout = function () {\n        if (this.slider) {\n            var width = this.view.coordinateBBox.width;\n            // 获取组件的 layout bbox\n            var bboxObject = this.slider.component.getLayoutBBox();\n            var bbox = new BBox(bboxObject.x, bboxObject.y, Math.min(bboxObject.width, width), bboxObject.height);\n            var _a = directionToPosition(this.view.viewBBox, bbox, DIRECTION.BOTTOM), x1 = _a[0], y1 = _a[1];\n            var _b = directionToPosition(this.view.coordinateBBox, bbox, DIRECTION.BOTTOM), x2 = _b[0], y2 = _b[1];\n            // 默认放在 bottom\n            this.slider.component.update({\n                x: x2,\n                y: y1,\n                width: width,\n            });\n        }\n    };\n    /**\n     * 更新\n     */\n    Slider.prototype.update = function () {\n        // 逻辑和 render 保持一致\n        this.render();\n    };\n    /**\n     * 创建 slider 组件\n     */\n    Slider.prototype.createSlider = function () {\n        var cfg = this.getSliderCfg();\n        // 添加 slider 组件\n        var component = new SliderComponent(__assign({ container: this.container }, cfg));\n        component.init();\n        return {\n            component: component,\n            layer: LAYER.FORE,\n            direction: DIRECTION.BOTTOM,\n            type: COMPONENT_TYPE.OTHER,\n        };\n    };\n    /**\n     * 更新配置\n     */\n    Slider.prototype.updateSlider = function () {\n        var cfg = this.getSliderCfg();\n        omit(cfg, ['x', 'y', 'width', 'start', 'end', 'minText', 'maxText']);\n        this.slider.component.update(cfg);\n        return this.slider;\n    };\n    /**\n     * 生成 slider 配置\n     */\n    Slider.prototype.getSliderCfg = function () {\n        if (isObject(this.option)) {\n            // 用户配置的数据，优先级更高\n            var trendCfg = __assign({ data: this.getData() }, get(this.option, 'trendCfg', {}));\n            // 初始的位置大小信息\n            var x = 0;\n            var y = 0;\n            var width = this.view.coordinateBBox.width;\n            // 因为有样式，所以深层覆盖\n            var cfg = deepMix({}, { x: x, y: y, width: width }, this.option);\n            // trendCfg 因为有数据数组，所以使用浅替换\n            return __assign(__assign({}, cfg), { trendCfg: trendCfg });\n        }\n        return {};\n    };\n    /**\n     * 从 view 中获取数据，缩略轴使用全量的数据\n     */\n    Slider.prototype.getData = function () {\n        var data = this.view.getOptions().data;\n        var yScale = this.view.getYScales()[0];\n        return data.map(function (datum) { return datum[yScale.field] || 0; });\n    };\n    Slider.prototype.updateMinMaxText = function (min, max) {\n        var data = this.view.getOptions().data;\n        var dataSize = size(data);\n        var xScale = this.view.getXScale();\n        if (!xScale || !dataSize) {\n            return;\n        }\n        var x = xScale.field;\n        // x 轴数据\n        var xData = data.map(function (datum) { return datum[x] || ''; });\n        var minIndex = Math.floor(min * (dataSize - 1));\n        var maxIndex = Math.floor(max * (dataSize - 1));\n        var minText = get(xData, [minIndex]);\n        var maxText = get(xData, [maxIndex]);\n        // 更新文本\n        this.slider.component.update({\n            minText: minText,\n            maxText: maxText,\n            start: min,\n            end: max,\n        });\n        // 增加 x 轴的过滤器\n        this.view.filter(xScale.field, function (value, datum, idx) { return isBetween(idx, minIndex, maxIndex); });\n    };\n    /**\n     * 覆写父类方法\n     */\n    Slider.prototype.getComponents = function () {\n        return this.slider ? [this.slider] : [];\n    };\n    return Slider;\n}(Controller));\nexport default Slider;\n//# sourceMappingURL=slider.js.map","import { __assign, __extends } from \"tslib\";\nimport { deepMix, find, flatten, get, isArray, isEqual, isFunction, isUndefined, mix } from '@antv/util';\nimport { Crosshair, HtmlTooltip } from '../../dependents';\nimport { getAngleByPoint, getDistanceToCenter, isPointInCoordinate } from '../../util/coordinate';\nimport { polarToCartesian } from '../../util/graphics';\nimport { findDataByPoint, getTooltipItems } from '../../util/tooltip';\nimport { Controller } from './base';\n// Filter duplicates, use `name`, `color`, `value` and `title` property values as condition\nfunction uniq(items) {\n    var uniqItems = [];\n    var _loop_1 = function (index) {\n        var item = items[index];\n        var result = find(uniqItems, function (subItem) {\n            return (subItem.color === item.color &&\n                subItem.name === item.name &&\n                subItem.value === item.value &&\n                subItem.title === item.title);\n        });\n        if (!result) {\n            uniqItems.push(item);\n        }\n    };\n    for (var index = 0; index < items.length; index++) {\n        _loop_1(index);\n    }\n    return uniqItems;\n}\n/** @ignore */\nvar Tooltip = /** @class */ (function (_super) {\n    __extends(Tooltip, _super);\n    function Tooltip() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isLocked = false;\n        _this.isVisible = true;\n        return _this;\n    }\n    Object.defineProperty(Tooltip.prototype, \"name\", {\n        get: function () {\n            return 'tooltip';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Tooltip.prototype.init = function () { };\n    Tooltip.prototype.render = function () {\n        var option = this.view.getOptions().tooltip;\n        this.isVisible = option !== false;\n    };\n    /**\n     * Shows tooltip\n     * @param point\n     */\n    Tooltip.prototype.showTooltip = function (point) {\n        this.point = point;\n        if (!this.isVisible) { // 如果设置 tooltip(false) 则始终不显示\n            return;\n        }\n        var view = this.view;\n        var items = this.getTooltipItems(point);\n        if (!items.length) {\n            // 无内容则不展示，同时 tooltip 需要隐藏\n            this.hideTooltip();\n            return;\n        }\n        var title = this.getTitle(items);\n        var dataPoint = {\n            x: items[0].x,\n            y: items[0].y,\n        }; // 数据点位置\n        view.emit('tooltip:show', __assign({ items: items,\n            title: title }, point));\n        var cfg = this.getTooltipCfg();\n        var follow = cfg.follow, showMarkers = cfg.showMarkers, showCrosshairs = cfg.showCrosshairs, showContent = cfg.showContent, marker = cfg.marker;\n        var lastItems = this.items;\n        var lastTitle = this.title;\n        if (!isEqual(lastTitle, title) || !isEqual(lastItems, items)) {\n            // 内容发生变化了更新 tooltip\n            view.emit('tooltip:change', __assign({ items: items,\n                title: title }, point));\n            if (showContent) {\n                // 展示 tooltip 内容框才渲染 tooltip\n                if (!this.tooltip) {\n                    // 延迟生成\n                    this.renderTooltip();\n                }\n                this.tooltip.update(mix({}, cfg, {\n                    items: items,\n                    title: title,\n                }, follow ? point : {}));\n                this.tooltip.show();\n            }\n            if (showMarkers) {\n                // 展示 tooltipMarkers，tooltipMarkers 跟随数据\n                this.renderTooltipMarkers(items, marker);\n            }\n        }\n        else {\n            // 内容未发生变化，则更新位置\n            if (this.tooltip && follow) {\n                this.tooltip.update(point);\n                this.tooltip.show(); // tooltip 有可能被隐藏，需要保证显示状态\n            }\n            if (this.tooltipMarkersGroup) {\n                this.tooltipMarkersGroup.show();\n            }\n        }\n        this.items = items;\n        this.title = title;\n        if (showCrosshairs) {\n            // 展示 tooltip 辅助线\n            var isCrosshairsFollowCursor = get(cfg, ['crosshairs', 'follow'], false); // 辅助线是否要跟随鼠标\n            this.renderCrosshairs(isCrosshairsFollowCursor ? point : dataPoint, cfg);\n        }\n    };\n    Tooltip.prototype.hideTooltip = function () {\n        var follow = this.getTooltipCfg().follow;\n        if (!follow) {\n            this.point = null;\n            return;\n        }\n        // hide the tooltipMarkers\n        var tooltipMarkersGroup = this.tooltipMarkersGroup;\n        if (tooltipMarkersGroup) {\n            tooltipMarkersGroup.hide();\n        }\n        // hide crosshairs\n        var xCrosshair = this.xCrosshair;\n        var yCrosshair = this.yCrosshair;\n        if (xCrosshair) {\n            xCrosshair.hide();\n        }\n        if (yCrosshair) {\n            yCrosshair.hide();\n        }\n        var tooltip = this.tooltip;\n        if (tooltip) {\n            tooltip.hide();\n        }\n        this.view.emit('tooltip:hide', {});\n        this.point = null;\n    };\n    /**\n     * lockTooltip\n     */\n    Tooltip.prototype.lockTooltip = function () {\n        this.isLocked = true;\n        if (this.tooltip) {\n            // tooltip contianer 可捕获事件\n            this.tooltip.setCapture(true);\n        }\n    };\n    /**\n     * unlockTooltip\n     */\n    Tooltip.prototype.unlockTooltip = function () {\n        this.isLocked = false;\n        var cfg = this.getTooltipCfg();\n        if (this.tooltip) {\n            // 重置 capture 属性\n            this.tooltip.setCapture(cfg.capture);\n        }\n    };\n    /**\n     * isTooltipLocked\n     */\n    Tooltip.prototype.isTooltipLocked = function () {\n        return this.isLocked;\n    };\n    Tooltip.prototype.clear = function () {\n        var _a = this, tooltip = _a.tooltip, xCrosshair = _a.xCrosshair, yCrosshair = _a.yCrosshair, tooltipMarkersGroup = _a.tooltipMarkersGroup;\n        if (tooltip) {\n            tooltip.hide();\n            tooltip.clear();\n        }\n        if (xCrosshair) {\n            xCrosshair.clear();\n        }\n        if (yCrosshair) {\n            yCrosshair.clear();\n        }\n        if (tooltipMarkersGroup) {\n            tooltipMarkersGroup.clear();\n        }\n    };\n    Tooltip.prototype.destroy = function () {\n        if (this.tooltip) {\n            this.tooltip.destroy();\n        }\n        if (this.xCrosshair) {\n            this.xCrosshair.destroy();\n        }\n        if (this.yCrosshair) {\n            this.yCrosshair.destroy();\n        }\n        if (this.guideGroup) {\n            this.guideGroup.remove(true);\n        }\n        this.items = null;\n        this.title = null;\n        this.tooltipMarkersGroup = null;\n        this.tooltipCrosshairsGroup = null;\n        this.xCrosshair = null;\n        this.yCrosshair = null;\n        this.tooltip = null;\n        this.guideGroup = null;\n        this.isLocked = false;\n        this.point = null;\n    };\n    Tooltip.prototype.changeVisible = function (visible) {\n        if (this.visible === visible) {\n            return;\n        }\n        var _a = this, tooltip = _a.tooltip, tooltipMarkersGroup = _a.tooltipMarkersGroup, xCrosshair = _a.xCrosshair, yCrosshair = _a.yCrosshair;\n        if (visible) {\n            if (tooltip) {\n                tooltip.show();\n            }\n            if (tooltipMarkersGroup) {\n                tooltipMarkersGroup.show();\n            }\n            if (xCrosshair) {\n                xCrosshair.show();\n            }\n            if (yCrosshair) {\n                yCrosshair.show();\n            }\n        }\n        else {\n            if (tooltip) {\n                tooltip.hide();\n            }\n            if (tooltipMarkersGroup) {\n                tooltipMarkersGroup.hide();\n            }\n            if (xCrosshair) {\n                xCrosshair.hide();\n            }\n            if (yCrosshair) {\n                yCrosshair.hide();\n            }\n        }\n        this.visible = visible;\n    };\n    Tooltip.prototype.getTooltipItems = function (point) {\n        var items = this.findItemsFromView(this.view, point);\n        if (items.length) {\n            // 三层\n            items = flatten(items);\n            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n                var itemArr = items_1[_i];\n                for (var _a = 0, itemArr_1 = itemArr; _a < itemArr_1.length; _a++) {\n                    var item = itemArr_1[_a];\n                    var _b = item.mappingData, x = _b.x, y = _b.y;\n                    item.x = isArray(x) ? x[x.length - 1] : x;\n                    item.y = isArray(y) ? y[y.length - 1] : y;\n                }\n            }\n            var shared = this.getTooltipCfg().shared;\n            // shared: false 代表只显示当前拾取到的 shape 的数据，但是一个 view 会有多个 Geometry，所以有可能会拾取到多个 shape\n            if (shared === false && items.length > 1) {\n                var snapItem = items[0];\n                var min = Math.abs(point.y - snapItem[0].y);\n                for (var _c = 0, items_2 = items; _c < items_2.length; _c++) {\n                    var aItem = items_2[_c];\n                    var yDistance = Math.abs(point.y - aItem[0].y);\n                    if (yDistance <= min) {\n                        snapItem = aItem;\n                        min = yDistance;\n                    }\n                }\n                items = [snapItem];\n            }\n            return uniq(flatten(items));\n        }\n        return [];\n    };\n    Tooltip.prototype.layout = function () { };\n    Tooltip.prototype.update = function () {\n        if (this.point) {\n            this.showTooltip(this.point);\n        }\n    };\n    // 获取 tooltip 配置，因为用户可能会通过 view.tooltip() 重新配置 tooltip，所以就不做缓存，每次直接读取\n    Tooltip.prototype.getTooltipCfg = function () {\n        var view = this.view;\n        var option = view.getOptions().tooltip;\n        var theme = view.getTheme();\n        var defaultCfg = get(theme, ['components', 'tooltip'], {});\n        var enterable = isUndefined(get(option, 'enterable')) ? defaultCfg.enterable : get(option, 'enterable');\n        return deepMix({}, defaultCfg, option, {\n            capture: enterable || this.isLocked ? true : false,\n        });\n    };\n    Tooltip.prototype.getTitle = function (items) {\n        var title = items[0].title || items[0].name;\n        this.title = title;\n        return title;\n    };\n    Tooltip.prototype.renderTooltip = function () {\n        var canvas = this.view.getCanvas();\n        var region = {\n            start: { x: 0, y: 0 },\n            end: { x: canvas.get('width'), y: canvas.get('height') },\n        };\n        var cfg = this.getTooltipCfg();\n        var tooltip = new HtmlTooltip(__assign(__assign({ parent: canvas.get('el').parentNode, region: region }, cfg), { visible: false, crosshairs: null }));\n        tooltip.init();\n        this.tooltip = tooltip;\n    };\n    Tooltip.prototype.renderTooltipMarkers = function (items, marker) {\n        var tooltipMarkersGroup = this.getTooltipMarkersGroup();\n        for (var _i = 0, items_3 = items; _i < items_3.length; _i++) {\n            var item = items_3[_i];\n            var x = item.x, y = item.y;\n            var attrs = __assign(__assign({ fill: item.color, symbol: 'circle', shadowColor: item.color }, marker), { x: x,\n                y: y });\n            tooltipMarkersGroup.addShape('marker', {\n                attrs: attrs,\n            });\n        }\n    };\n    Tooltip.prototype.renderCrosshairs = function (point, cfg) {\n        var crosshairsType = get(cfg, ['crosshairs', 'type'], 'x'); // 默认展示 x 轴上的辅助线\n        if (crosshairsType === 'x') {\n            if (this.yCrosshair) {\n                this.yCrosshair.hide();\n            }\n            this.renderXCrosshairs(point, cfg);\n        }\n        else if (crosshairsType === 'y') {\n            if (this.xCrosshair) {\n                this.xCrosshair.hide();\n            }\n            this.renderYCrosshairs(point, cfg);\n        }\n        else if (crosshairsType === 'xy') {\n            this.renderXCrosshairs(point, cfg);\n            this.renderYCrosshairs(point, cfg);\n        }\n    };\n    // 渲染 x 轴上的 tooltip 辅助线\n    Tooltip.prototype.renderXCrosshairs = function (point, tooltipCfg) {\n        var coordinate = this.getViewWithGeometry(this.view).getCoordinate();\n        if (!isPointInCoordinate(coordinate, point)) {\n            return;\n        }\n        var start;\n        var end;\n        if (coordinate.isRect) {\n            if (coordinate.isTransposed) {\n                start = {\n                    x: coordinate.start.x,\n                    y: point.y,\n                };\n                end = {\n                    x: coordinate.end.x,\n                    y: point.y,\n                };\n            }\n            else {\n                start = {\n                    x: point.x,\n                    y: coordinate.end.y,\n                };\n                end = {\n                    x: point.x,\n                    y: coordinate.start.y,\n                };\n            }\n        }\n        else {\n            // 极坐标下 x 轴上的 crosshairs 表现为半径\n            var angle = getAngleByPoint(coordinate, point);\n            var center = coordinate.getCenter();\n            var radius = coordinate.getRadius();\n            end = polarToCartesian(center.x, center.y, radius, angle);\n            start = center;\n        }\n        var cfg = deepMix({\n            start: start,\n            end: end,\n            container: this.getTooltipCrosshairsGroup(),\n        }, get(tooltipCfg, 'crosshairs', {}), this.getCrosshairsText('x', point, tooltipCfg));\n        delete cfg.type; // 与 Crosshairs 组件的 type 冲突故删除\n        var xCrosshair = this.xCrosshair;\n        if (xCrosshair) {\n            xCrosshair.update(cfg);\n        }\n        else {\n            xCrosshair = new Crosshair.Line(cfg);\n            xCrosshair.init();\n        }\n        xCrosshair.render();\n        xCrosshair.show();\n        this.xCrosshair = xCrosshair;\n    };\n    // 渲染 y 轴上的辅助线\n    Tooltip.prototype.renderYCrosshairs = function (point, tooltipCfg) {\n        var coordinate = this.getViewWithGeometry(this.view).getCoordinate();\n        if (!isPointInCoordinate(coordinate, point)) {\n            return;\n        }\n        var cfg;\n        var type;\n        if (coordinate.isRect) {\n            var start = void 0;\n            var end = void 0;\n            if (coordinate.isTransposed) {\n                start = {\n                    x: point.x,\n                    y: coordinate.end.y,\n                };\n                end = {\n                    x: point.x,\n                    y: coordinate.start.y,\n                };\n            }\n            else {\n                start = {\n                    x: coordinate.start.x,\n                    y: point.y,\n                };\n                end = {\n                    x: coordinate.end.x,\n                    y: point.y,\n                };\n            }\n            cfg = {\n                start: start,\n                end: end,\n            };\n            type = 'Line';\n        }\n        else {\n            // 极坐标下 y 轴上的 crosshairs 表现为圆弧\n            cfg = {\n                center: coordinate.getCenter(),\n                // @ts-ignore\n                radius: getDistanceToCenter(coordinate, point),\n                startAngle: coordinate.startAngle,\n                endAngle: coordinate.endAngle,\n            };\n            type = 'Circle';\n        }\n        cfg = deepMix({\n            container: this.getTooltipCrosshairsGroup()\n        }, cfg, get(tooltipCfg, 'crosshairs', {}), this.getCrosshairsText('y', point, tooltipCfg));\n        delete cfg.type; // 与 Crosshairs 组件的 type 冲突故删除\n        var yCrosshair = this.yCrosshair;\n        if (yCrosshair) {\n            // 如果坐标系发生直角坐标系与极坐标的切换操作\n            if ((coordinate.isRect && yCrosshair.get('type') === 'circle')\n                || (!coordinate.isRect && yCrosshair.get('type') === 'line')) {\n                yCrosshair = new Crosshair[type](cfg);\n                yCrosshair.init();\n            }\n            else {\n                yCrosshair.update(cfg);\n            }\n        }\n        else {\n            yCrosshair = new Crosshair[type](cfg);\n            yCrosshair.init();\n        }\n        yCrosshair.render();\n        yCrosshair.show();\n        this.yCrosshair = yCrosshair;\n    };\n    Tooltip.prototype.getCrosshairsText = function (type, point, tooltipCfg) {\n        var textCfg = get(tooltipCfg, ['crosshairs', 'text']);\n        var follow = get(tooltipCfg, ['crosshairs', 'follow']);\n        var items = this.items;\n        if (textCfg) {\n            var view = this.getViewWithGeometry(this.view);\n            // 需要展示文本\n            var firstItem = items[0];\n            var xScale = view.getXScale();\n            var yScale = view.getYScales()[0];\n            var xValue = void 0;\n            var yValue = void 0;\n            if (follow) {\n                // 如果需要跟随鼠标移动，就需要将当前鼠标坐标点转换为对应的数值\n                var invertPoint = this.view.getCoordinate().invert(point);\n                xValue = xScale.invert(invertPoint.x); // 转换为原始值\n                yValue = yScale.invert(invertPoint.y); // 转换为原始值\n            }\n            else {\n                xValue = firstItem.data[xScale.field];\n                yValue = firstItem.data[yScale.field];\n            }\n            var content = type === 'x' ? xValue : yValue;\n            if (isFunction(textCfg)) {\n                textCfg = textCfg(type, content, items, point);\n            }\n            else {\n                textCfg.content = content;\n            }\n            return {\n                text: textCfg,\n            };\n        }\n    };\n    // 获取存储 tooltipMarkers 和 crosshairs 的容器\n    Tooltip.prototype.getGuideGroup = function () {\n        if (!this.guideGroup) {\n            var foregroundGroup = this.view.foregroundGroup;\n            this.guideGroup = foregroundGroup.addGroup({\n                name: 'tooltipGuide',\n                capture: false,\n            });\n        }\n        return this.guideGroup;\n    };\n    // 获取 tooltipMarkers 存储的容器\n    Tooltip.prototype.getTooltipMarkersGroup = function () {\n        var tooltipMarkersGroup = this.tooltipMarkersGroup;\n        if (tooltipMarkersGroup && !tooltipMarkersGroup.destroyed) {\n            tooltipMarkersGroup.clear();\n            tooltipMarkersGroup.show();\n        }\n        else {\n            tooltipMarkersGroup = this.getGuideGroup().addGroup({\n                name: 'tooltipMarkersGroup',\n            });\n            tooltipMarkersGroup.toFront();\n            this.tooltipMarkersGroup = tooltipMarkersGroup;\n        }\n        return tooltipMarkersGroup;\n    };\n    // 获取 tooltip crosshairs 存储的容器\n    Tooltip.prototype.getTooltipCrosshairsGroup = function () {\n        var tooltipCrosshairsGroup = this.tooltipCrosshairsGroup;\n        if (!tooltipCrosshairsGroup) {\n            tooltipCrosshairsGroup = this.getGuideGroup().addGroup({\n                name: 'tooltipCrosshairsGroup',\n                capture: false,\n            });\n            tooltipCrosshairsGroup.toBack();\n            this.tooltipCrosshairsGroup = tooltipCrosshairsGroup;\n        }\n        return tooltipCrosshairsGroup;\n    };\n    Tooltip.prototype.getTooltipItemsByHitShape = function (geometry, point, title) {\n        var result = [];\n        var container = geometry.container;\n        var shape = container.getShape(point.x, point.y);\n        if (shape && shape.get('visible') && shape.get('origin')) {\n            var mappingData = shape.get('origin').mappingData;\n            var items = getTooltipItems(mappingData, geometry, title);\n            if (items.length) {\n                result.push(items);\n            }\n        }\n        return result;\n    };\n    Tooltip.prototype.getTooltipItemsByFindData = function (geometry, point, title) {\n        var result = [];\n        var dataArray = geometry.dataArray;\n        geometry.sort(dataArray); // 先进行排序，便于 tooltip 查找\n        for (var _i = 0, dataArray_1 = dataArray; _i < dataArray_1.length; _i++) {\n            var data = dataArray_1[_i];\n            var record = findDataByPoint(point, data, geometry);\n            if (record) {\n                var elementId = geometry.getElementId(record);\n                var element = geometry.elementsMap[elementId];\n                if (geometry.type === 'heatmap' || element.visible) {\n                    // Heatmap 没有 Element\n                    // 如果图形元素隐藏了，怎不再 tooltip 上展示相关数据\n                    var items = getTooltipItems(record, geometry, title);\n                    if (items.length) {\n                        result.push(items);\n                    }\n                }\n            }\n        }\n        return result;\n    };\n    Tooltip.prototype.findItemsFromView = function (view, point) {\n        if (view.getOptions().tooltip === false) {\n            // 如果 view 关闭了 tooltip\n            return [];\n        }\n        var result = [];\n        // 先从 view 本身查找\n        var geometries = view.geometries;\n        var _a = this.getTooltipCfg(), shared = _a.shared, title = _a.title;\n        for (var _i = 0, geometries_1 = geometries; _i < geometries_1.length; _i++) {\n            var geometry = geometries_1[_i];\n            if (geometry.visible && geometry.tooltipOption !== false) {\n                // geometry 可见同时未关闭 tooltip\n                var geometryType = geometry.type;\n                var tooltipItems = void 0;\n                if (['point', 'edge', 'polygon'].includes(geometryType)) {\n                    // 始终通过图形拾取\n                    tooltipItems = this.getTooltipItemsByHitShape(geometry, point, title);\n                }\n                else if (['area', 'line', 'path', 'heatmap'].includes(geometryType)) {\n                    // 如果是 'area', 'line', 'path'，始终通过数据查找方法查找 tooltip\n                    tooltipItems = this.getTooltipItemsByFindData(geometry, point, title);\n                }\n                else {\n                    if (shared !== false) {\n                        tooltipItems = this.getTooltipItemsByFindData(geometry, point, title);\n                    }\n                    else {\n                        tooltipItems = this.getTooltipItemsByHitShape(geometry, point, title);\n                    }\n                }\n                if (tooltipItems.length) {\n                    // geometry 有可能会有多个 item，因为用户可以设置 geometry.tooltip('x*y*z')\n                    result.push(tooltipItems);\n                }\n            }\n        }\n        // 递归查找，并合并结果\n        for (var _b = 0, _c = view.views; _b < _c.length; _b++) {\n            var childView = _c[_b];\n            result = result.concat(this.findItemsFromView(childView, point));\n        }\n        return result;\n    };\n    // FIXME: hack 方法\n    // 因为 tooltip 的交互是挂载在 Chart 上，所以当chart 上没有绘制 Geometry 的时候，就查找不到数据，并且绘图区域同子 View 的区域不同\n    Tooltip.prototype.getViewWithGeometry = function (view) {\n        var _this = this;\n        if (view.geometries.length) {\n            return view;\n        }\n        return find(view.views, function (childView) { return _this.getViewWithGeometry(childView); });\n    };\n    return Tooltip;\n}(Controller));\nexport default Tooltip;\n//# sourceMappingURL=tooltip.js.map","import { __extends } from \"tslib\";\nimport { each, head, isEqual, last } from '@antv/util';\nimport { getAngle, getSectorPath } from '../../util/graphics';\nimport Action from './base';\n/**\n * 背景框的 Action\n * @ignore\n */\nvar ActiveRegion = /** @class */ (function (_super) {\n    __extends(ActiveRegion, _super);\n    function ActiveRegion() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 显示\n     */\n    ActiveRegion.prototype.show = function () {\n        var view = this.context.view;\n        var ev = this.context.event;\n        var tooltipItems = view.getTooltipItems({\n            x: ev.x,\n            y: ev.y,\n        });\n        if (isEqual(tooltipItems, this.items)) {\n            // 如果拾取数据同上次相同，则不重复绘制\n            return;\n        }\n        this.items = tooltipItems;\n        if (tooltipItems.length) {\n            var xField_1 = view.getXScale().field;\n            var xValue_1 = tooltipItems[0].data[xField_1];\n            // 根据 x 对应的值查找 elements\n            var elements_1 = [];\n            var geometries = view.geometries;\n            each(geometries, function (geometry) {\n                if (geometry.type === 'interval' || geometry.type === 'schema') {\n                    var result = geometry.getElementsBy(function (ele) {\n                        var eleData = ele.getData();\n                        return eleData[xField_1] === xValue_1;\n                    });\n                    elements_1 = elements_1.concat(result);\n                }\n            });\n            // 根据 bbox 计算背景框的面积区域\n            if (elements_1.length) {\n                var coordinate_1 = view.getCoordinate();\n                var firstBBox_1 = elements_1[0].shape.getCanvasBBox();\n                var lastBBox_1 = elements_1[0].shape.getCanvasBBox();\n                var groupBBox_1 = firstBBox_1;\n                each(elements_1, function (ele) {\n                    var bbox = ele.shape.getCanvasBBox();\n                    if (coordinate_1.isTransposed) {\n                        if (bbox.minY < firstBBox_1.minY) {\n                            firstBBox_1 = bbox;\n                        }\n                        if (bbox.maxY > lastBBox_1.maxY) {\n                            lastBBox_1 = bbox;\n                        }\n                    }\n                    else {\n                        if (bbox.minX < firstBBox_1.minX) {\n                            firstBBox_1 = bbox;\n                        }\n                        if (bbox.maxX > lastBBox_1.maxX) {\n                            lastBBox_1 = bbox;\n                        }\n                    }\n                    groupBBox_1.x = Math.min(bbox.minX, groupBBox_1.minX);\n                    groupBBox_1.y = Math.min(bbox.minY, groupBBox_1.minY);\n                    groupBBox_1.width = Math.max(bbox.maxX, groupBBox_1.maxX) - groupBBox_1.x;\n                    groupBBox_1.height = Math.max(bbox.maxY, groupBBox_1.maxY) - groupBBox_1.y;\n                });\n                var backgroundGroup = view.backgroundGroup, coordinateBBox = view.coordinateBBox;\n                var path = void 0;\n                if (coordinate_1.isRect) {\n                    var xScale = view.getXScale();\n                    var appendRatio = xScale.isLinear ? 0 : 0.25; // 如果 x 轴是数值类型，如直方图，不需要家额外的宽度\n                    var minX = void 0;\n                    var minY = void 0;\n                    var width = void 0;\n                    var height = void 0;\n                    if (coordinate_1.isTransposed) {\n                        minX = coordinateBBox.minX;\n                        minY = Math.min(lastBBox_1.minY, firstBBox_1.minY) - appendRatio * lastBBox_1.height;\n                        width = coordinateBBox.width;\n                        height = groupBBox_1.height + appendRatio * 2 * lastBBox_1.height;\n                    }\n                    else {\n                        minX = Math.min(firstBBox_1.minX, lastBBox_1.minX) - appendRatio * firstBBox_1.width;\n                        minY = Math.min(coordinateBBox.minY, firstBBox_1.minY);\n                        width = groupBBox_1.width + appendRatio * 2 * firstBBox_1.width;\n                        height = coordinateBBox.height;\n                    }\n                    path = [\n                        ['M', minX, minY],\n                        ['L', minX + width, minY],\n                        ['L', minX + width, minY + height],\n                        ['L', minX, minY + height],\n                        ['Z'],\n                    ];\n                }\n                else {\n                    var firstElement = head(elements_1);\n                    var lastElement = last(elements_1);\n                    var startAngle = getAngle(firstElement.getModel(), coordinate_1).startAngle;\n                    var endAngle = getAngle(lastElement.getModel(), coordinate_1).endAngle;\n                    var center = coordinate_1.getCenter();\n                    var radius = coordinate_1.getRadius();\n                    var innterRadius = coordinate_1.innerRadius * radius;\n                    path = getSectorPath(center.x, center.y, radius, startAngle, endAngle, innterRadius);\n                }\n                if (this.regionPath) {\n                    this.regionPath.attr('path', path);\n                    this.regionPath.show();\n                }\n                else {\n                    this.regionPath = backgroundGroup.addShape({\n                        type: 'path',\n                        name: 'active-region',\n                        capture: false,\n                        attrs: {\n                            path: path,\n                            fill: '#CCD6EC',\n                            opacity: 0.3,\n                        },\n                    });\n                }\n            }\n        }\n    };\n    /**\n     * 隐藏\n     */\n    ActiveRegion.prototype.hide = function () {\n        if (this.regionPath) {\n            this.regionPath.hide();\n        }\n        // this.regionPath = null;\n        this.items = null;\n    };\n    /**\n     * 销毁\n     */\n    ActiveRegion.prototype.destroy = function () {\n        this.hide();\n        if (this.regionPath) {\n            this.regionPath.remove(true);\n        }\n        _super.prototype.destroy.call(this);\n    };\n    return ActiveRegion;\n}(Action));\nexport default ActiveRegion;\n//# sourceMappingURL=active-region.js.map","import { __extends } from \"tslib\";\nimport { get, isEqual, isNil } from '@antv/util';\nimport Action from '../base';\n// 判断是否有样式\nfunction hasClass(dom, className) {\n    if (!dom) {\n        return false;\n    }\n    var cls = '';\n    if (!dom.className) {\n        return false;\n    }\n    if (!isNil(dom.className.baseVal)) {\n        cls = dom.className.baseVal;\n    }\n    else {\n        cls = dom.className;\n    }\n    return cls.includes(className);\n}\nfunction isParent(dom, cls) {\n    var parent = dom.parentNode;\n    var rst = false;\n    while (parent && parent !== document.body) {\n        if (hasClass(parent, cls)) {\n            rst = true;\n            break;\n        }\n        parent = parent.parentNode;\n    }\n    return rst;\n}\n/**\n * Tooltip 展示隐藏的 Action\n * @ignore\n */\nvar TooltipAction = /** @class */ (function (_super) {\n    __extends(TooltipAction, _super);\n    function TooltipAction() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.timeStamp = 0;\n        return _this;\n    }\n    /**\n     * 显示 Tooltip\n     * @returns\n     */\n    TooltipAction.prototype.show = function () {\n        var context = this.context;\n        var ev = context.event;\n        var view = context.view;\n        var isTooltipLocked = view.isTooltipLocked();\n        if (isTooltipLocked) {\n            // 锁定时不移动 tooltip\n            return;\n        }\n        var lastTimeStamp = this.timeStamp;\n        var timeStamp = +new Date();\n        if (timeStamp - lastTimeStamp > 16) {\n            var preLoc = this.location;\n            var curLoc = { x: ev.x, y: ev.y };\n            if (!preLoc || !isEqual(preLoc, curLoc)) {\n                this.showTooltip(view, curLoc);\n            }\n            this.timeStamp = timeStamp;\n            this.location = curLoc;\n        }\n    };\n    /**\n     * 隐藏 Tooltip。\n     * @returns\n     */\n    TooltipAction.prototype.hide = function () {\n        var view = this.context.view;\n        var isTooltipLocked = view.isTooltipLocked();\n        if (isTooltipLocked) {\n            // 锁定 tooltip 时不隐藏\n            return;\n        }\n        var event = this.context.event;\n        var toElement = get(event, ['gEvent', 'originalEvent', 'toElement']);\n        if (toElement && (hasClass(toElement, 'g2-tooltip') || isParent(toElement, 'g2-tooltip'))) {\n            // 当鼠标滑入 tooltip 内容框时不隐藏\n            return;\n        }\n        this.hideTooltip(view);\n        this.location = null;\n    };\n    TooltipAction.prototype.showTooltip = function (view, point) {\n        // 相同位置不重复展示\n        view.showTooltip(point);\n    };\n    TooltipAction.prototype.hideTooltip = function (view) {\n        view.hideTooltip();\n    };\n    return TooltipAction;\n}(Action));\nexport default TooltipAction;\n//# sourceMappingURL=tooltip.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport { getSiblingPoint, getSilbings } from '../util';\nimport TooltipAction from './tooltip';\n/**\n * 存在多个 view 时，控制其他 view 上的 tooltip 显示\n * @ignore\n */\nvar SiblingTooltip = /** @class */ (function (_super) {\n    __extends(SiblingTooltip, _super);\n    function SiblingTooltip() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 所有同一层级的 tooltip 显示\n     * @param view\n     * @param point\n     */\n    SiblingTooltip.prototype.showTooltip = function (view, point) {\n        var siblings = getSilbings(view);\n        each(siblings, function (sibling) {\n            var siblingPoint = getSiblingPoint(view, sibling, point);\n            sibling.showTooltip(siblingPoint);\n        });\n    };\n    /**\n     * 隐藏同一层级的 tooltip\n     * @param view\n     */\n    SiblingTooltip.prototype.hideTooltip = function (view) {\n        var siblings = getSilbings(view);\n        each(siblings, function (sibling) {\n            sibling.hideTooltip();\n        });\n    };\n    return SiblingTooltip;\n}(TooltipAction));\nexport default SiblingTooltip;\n//# sourceMappingURL=sibling-tooltp.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport Action from '../base';\nimport { getElementsByState } from '../util';\n/**\n * 状态量 Action 的基类\n * @abstract\n * @class\n * @ignore\n */\nvar StateBase = /** @class */ (function (_super) {\n    __extends(StateBase, _super);\n    function StateBase() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * 状态名称\n         */\n        _this.stateName = '';\n        return _this;\n    }\n    /**\n     * 是否具有某个状态\n     * @param element 图表 Element 元素\n     */\n    StateBase.prototype.hasState = function (element) {\n        return element.hasState(this.stateName);\n    };\n    /**\n     * 设置状态激活\n     * @param enable 状态值\n     */\n    StateBase.prototype.setElementState = function (element, enable) {\n        // 防止闪烁\n        element.setState(this.stateName, enable);\n    };\n    /**\n     * 设置状态\n     */\n    StateBase.prototype.setState = function () {\n        this.setStateEnable(true);\n    };\n    /**\n     * 清除所有 Element 的状态\n     */\n    StateBase.prototype.clear = function () {\n        var view = this.context.view;\n        this.clearViewState(view);\n    };\n    StateBase.prototype.clearViewState = function (view) {\n        var _this = this;\n        var elements = getElementsByState(view, this.stateName);\n        each(elements, function (el) {\n            _this.setElementState(el, false);\n        });\n    };\n    return StateBase;\n}(Action));\nexport default StateBase;\n//# sourceMappingURL=state-base.js.map","import { __extends } from \"tslib\";\nimport { each, isNil } from '@antv/util';\nimport { getCurrentElement, getDelegationObject, getElements, getElementValue, getScaleByField, isElementChange, isList } from '../util';\nimport StateBase from './state-base';\nfunction getItem(shape) {\n    return shape.get('delegateObject').item;\n}\n/**\n * 状态量 Action 的基类，允许多个 Element 同时拥有某个状态\n * @class\n * @ignore\n */\nvar ElementState = /** @class */ (function (_super) {\n    __extends(ElementState, _super);\n    function ElementState() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.ignoreListItemStates = ['unchecked'];\n        return _this;\n    }\n    // 是否忽略触发的列表项\n    ElementState.prototype.isItemIgnore = function (item, list) {\n        var states = this.ignoreListItemStates;\n        var filtered = states.filter(function (state) {\n            return list.hasState(item, state);\n        });\n        return !!filtered.length;\n    };\n    // 设置由组件选项导致的状态变化\n    ElementState.prototype.setStateByComponent = function (component, item, enable) {\n        var view = this.context.view;\n        var field = component.get('field');\n        var elements = getElements(view);\n        this.setElementsStateByItem(elements, field, item, enable);\n    };\n    // 处理触发源由 element 导致的状态变化\n    ElementState.prototype.setStateByElement = function (element, enable) {\n        this.setElementState(element, enable);\n    };\n    /** 组件的选项是否同 element 匹配 */\n    ElementState.prototype.isMathItem = function (element, field, item) {\n        var view = this.context.view;\n        var scale = getScaleByField(view, field);\n        var value = getElementValue(element, field);\n        return !isNil(value) && item.name === scale.getText(value);\n    };\n    ElementState.prototype.setElementsStateByItem = function (elements, field, item, enable) {\n        var _this = this;\n        each(elements, function (el) {\n            if (_this.isMathItem(el, field, item)) {\n                el.setState(_this.stateName, enable);\n            }\n        });\n    };\n    /** 设置状态是否激活 */\n    ElementState.prototype.setStateEnable = function (enable) {\n        var element = getCurrentElement(this.context);\n        if (element) { // 触发源由于 element 导致\n            if (isElementChange(this.context)) {\n                this.setStateByElement(element, enable);\n            }\n        }\n        else {\n            // 触发源由组件导致\n            var delegateObject = getDelegationObject(this.context);\n            // 如果触发源时列表，图例、坐标轴\n            if (isList(delegateObject)) {\n                var item = delegateObject.item, component = delegateObject.component;\n                if (item && component && !this.isItemIgnore(item, component)) {\n                    var event_1 = this.context.event.gEvent;\n                    // 防止闪烁\n                    if (event_1 && event_1.fromShape && event_1.toShape && getItem(event_1.fromShape) === getItem(event_1.toShape)) {\n                        return;\n                    }\n                    this.setStateByComponent(component, item, enable);\n                }\n            }\n        }\n    };\n    /**\n     * 切换状态\n     */\n    ElementState.prototype.toggle = function () {\n        var element = getCurrentElement(this.context);\n        if (element) {\n            var hasState = element.hasState(this.stateName);\n            this.setElementState(element, !hasState);\n        }\n    };\n    /**\n     * 取消当前时间影响的状态\n     */\n    ElementState.prototype.reset = function () {\n        this.setStateEnable(false);\n    };\n    return ElementState;\n}(StateBase));\nexport default ElementState;\n//# sourceMappingURL=state.js.map","import { __extends } from \"tslib\";\nimport StateAction from './state';\n/**\n * 元素 active 的 Action，允许多个元素同时 active\n * @class\n * @ignore\n */\nvar ElementActive = /** @class */ (function (_super) {\n    __extends(ElementActive, _super);\n    function ElementActive() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'active';\n        return _this;\n    }\n    /**\n     * Active Element\n     */\n    ElementActive.prototype.active = function () {\n        this.setState();\n    };\n    return ElementActive;\n}(StateAction));\nexport default ElementActive;\n//# sourceMappingURL=active.js.map","import { __extends } from \"tslib\";\nimport Action from '../base';\nimport { getCurrentElement, getElementValue, getElementsByField } from '../util';\nimport { each } from '@antv/util';\n/**\n * Link Elements by color\n * @ignore\n */\nvar LinkByColor = /** @class */ (function (_super) {\n    __extends(LinkByColor, _super);\n    function LinkByColor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.cache = {};\n        return _this;\n    }\n    // 获取颜色对应的 scale\n    LinkByColor.prototype.getColorScale = function (view, element) {\n        var colorAttr = element.geometry.getAttribute('color');\n        if (!colorAttr) {\n            return null;\n        }\n        var scale = view.getScaleByField(colorAttr.getFields()[0]);\n        return scale;\n    };\n    // 获取连接的 path\n    LinkByColor.prototype.getLinkPath = function (element, nextElement) {\n        var bbox = element.shape.getCanvasBBox();\n        var nextBBox = nextElement.shape.getCanvasBBox();\n        var path = [\n            ['M', bbox.maxX, bbox.minY],\n            ['L', nextBBox.minX, nextBBox.minY],\n            ['L', nextBBox.minX, nextBBox.maxY],\n            ['L', bbox.maxX, bbox.maxY],\n            ['Z']\n        ];\n        return path;\n    };\n    // 添加连接的图形\n    LinkByColor.prototype.addLinkShape = function (group, element, nextElement) {\n        group.addShape({\n            type: 'path',\n            attrs: {\n                opacity: 0.4,\n                fill: element.shape.attr('fill'),\n                path: this.getLinkPath(element, nextElement)\n            }\n        });\n    };\n    // 使用图形连接\n    LinkByColor.prototype.linkByElement = function (element) {\n        var _this = this;\n        var view = this.context.view;\n        var scale = this.getColorScale(view, element);\n        if (!scale) {\n            return;\n        }\n        var value = getElementValue(element, scale.field);\n        if (!this.cache[value]) {\n            var elements_1 = getElementsByField(view, scale.field, value);\n            var linkGroup = this.linkGroup;\n            var group_1 = linkGroup.addGroup();\n            this.cache[value] = group_1; // 缓存\n            var count_1 = elements_1.length;\n            each(elements_1, function (el, index) {\n                if (index < count_1 - 1) {\n                    var nextEl = elements_1[index + 1];\n                    _this.addLinkShape(group_1, el, nextEl);\n                }\n            });\n        }\n    };\n    // 移除连接\n    LinkByColor.prototype.removeLink = function (element) {\n        var scale = this.getColorScale(this.context.view, element);\n        if (!scale) {\n            return;\n        }\n        var value = getElementValue(element, scale.field);\n        if (this.cache[value]) {\n            this.cache[value].remove();\n            this.cache[value] = null;\n        }\n    };\n    /**\n     * 连接 elements\n     */\n    LinkByColor.prototype.link = function () {\n        var context = this.context;\n        if (!this.linkGroup) {\n            // 不允许被拾取\n            this.linkGroup = context.view.foregroundGroup.addGroup({\n                capture: false\n            });\n        }\n        var element = getCurrentElement(context);\n        if (element) {\n            this.linkByElement(element);\n        }\n    };\n    /**\n     * 取消连接 elements\n     */\n    LinkByColor.prototype.unlink = function () {\n        var element = getCurrentElement(this.context);\n        if (element) {\n            this.removeLink(element);\n        }\n    };\n    /**\n     * 清除所有连接\n     */\n    LinkByColor.prototype.clear = function () {\n        if (this.linkGroup) {\n            this.linkGroup.clear();\n        }\n    };\n    /**\n     * 销毁\n     */\n    LinkByColor.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.linkGroup) {\n            this.linkGroup.remove();\n        }\n    };\n    return LinkByColor;\n}(Action));\nexport default LinkByColor;\n//# sourceMappingURL=link-by-color.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport { getElements, getIntersectElements, getMaskedElements, getSiblingMaskElements, getSilbings, isInRecords, isMask } from '../util';\nimport StateBase from './state-base';\n/**\n * @ignore\n * 区域设置状态的基础 Action\n */\nvar ElementRangeState = /** @class */ (function (_super) {\n    __extends(ElementRangeState, _super);\n    function ElementRangeState() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.startPoint = null;\n        _this.endPoint = null;\n        _this.isStarted = false;\n        /**\n         * 是否作用于当前 view 的 siblings，默认是 false 仅作用于自己\n         */\n        _this.effectSiblings = false;\n        /**\n         * 是否受 element 的数据影响，还是受包围盒的影响\n         */\n        _this.effectByRecord = false;\n        return _this;\n    }\n    // 获取当前的位置\n    ElementRangeState.prototype.getCurrentPoint = function () {\n        var event = this.context.event;\n        return {\n            x: event.x,\n            y: event.y,\n        };\n    };\n    /**\n     * 开始，记录开始选中的位置\n     */\n    ElementRangeState.prototype.start = function () {\n        this.clear(); // 开始的时候清理之前的状态\n        this.startPoint = this.getCurrentPoint();\n        this.isStarted = true;\n    };\n    ElementRangeState.prototype.getIntersectElements = function () {\n        var elements = null;\n        if (isMask(this.context)) {\n            elements = getMaskedElements(this.context, 10);\n        }\n        else {\n            var startPoint = this.startPoint;\n            var endPoint = this.isStarted ? this.getCurrentPoint() : this.endPoint;\n            // 如果没有开始，则不允许范围设置状态，保护性质\n            if (!startPoint || !endPoint) {\n                return;\n            }\n            // 计算框选区域\n            var box = {\n                minX: Math.min(startPoint.x, endPoint.x),\n                minY: Math.min(startPoint.y, endPoint.y),\n                maxX: Math.max(startPoint.x, endPoint.x),\n                maxY: Math.max(startPoint.y, endPoint.y),\n            };\n            // this.clear(); // 不全部清理，会导致闪烁\n            var view = this.context.view;\n            elements = getIntersectElements(view, box);\n        }\n        return elements;\n    };\n    /**\n     * 选中\n     */\n    ElementRangeState.prototype.setStateEnable = function (enable) {\n        if (this.effectSiblings && !this.effectByRecord) {\n            this.setSiblingsState(enable);\n        }\n        else {\n            var allElements = getElements(this.context.view);\n            var elements = this.getIntersectElements();\n            if (elements && elements.length) {\n                if (this.effectByRecord) {\n                    this.setSiblingsStateByRecord(elements, enable);\n                }\n                else {\n                    this.setElementsState(elements, enable, allElements);\n                }\n            }\n            else {\n                this.clear();\n            }\n        }\n    };\n    // 根据选中的 element 的数据进行设置状态\n    ElementRangeState.prototype.setSiblingsStateByRecord = function (elements, enable) {\n        var _this = this;\n        var view = this.context.view;\n        var siblings = getSilbings(view);\n        var records = elements.map(function (el) {\n            return el.getModel().data;\n        });\n        var xFiled = view.getXScale().field;\n        var yField = view.getYScales()[0].field;\n        each(siblings, function (sibling) {\n            var allElements = getElements(sibling);\n            var effectElements = allElements.filter(function (el) {\n                var record = el.getModel().data;\n                return isInRecords(records, record, xFiled, yField);\n            });\n            _this.setElementsState(effectElements, enable, allElements);\n        });\n    };\n    // 设置兄弟 view 的状态\n    ElementRangeState.prototype.setSiblingsState = function (enable) {\n        var _this = this;\n        var view = this.context.view;\n        var siblings = getSilbings(view);\n        if (isMask(this.context)) { // 受 mask 影响\n            each(siblings, function (sibling) {\n                var allElements = getElements(sibling);\n                var effectElements = getSiblingMaskElements(_this.context, sibling, 10);\n                if (effectElements && effectElements.length) {\n                    _this.setElementsState(effectElements, enable, allElements);\n                }\n                else {\n                    _this.clearViewState(sibling);\n                }\n            });\n        }\n    };\n    ElementRangeState.prototype.setElementsState = function (elements, enable, allElements) {\n        var _this = this;\n        each(allElements, function (el) {\n            if (!elements.includes(el)) {\n                _this.setElementState(el, false);\n            }\n            else {\n                _this.setElementState(el, enable);\n            }\n        });\n    };\n    /**\n     * 结束\n     */\n    ElementRangeState.prototype.end = function () {\n        this.isStarted = false;\n        this.endPoint = this.getCurrentPoint();\n    };\n    // 复写 clear\n    ElementRangeState.prototype.clear = function () {\n        var _this = this;\n        var view = this.context.view;\n        // 判断是否影响 siblings\n        if (this.effectSiblings) {\n            var siblings = getSilbings(view);\n            each(siblings, function (sibling) {\n                _this.clearViewState(sibling);\n            });\n        }\n        else {\n            this.clearViewState(view);\n        }\n    };\n    return ElementRangeState;\n}(StateBase));\nexport default ElementRangeState;\n//# sourceMappingURL=range-state.js.map","import { __extends } from \"tslib\";\nimport ElementRangeState from './range-state';\n/**\n * @ignore\n * 图表元素区域 Active 的 Action\n */\nvar ElementRangeActive = /** @class */ (function (_super) {\n    __extends(ElementRangeActive, _super);\n    function ElementRangeActive() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'active';\n        return _this;\n    }\n    /**\n     * 图表元素 Active\n     */\n    ElementRangeActive.prototype.active = function () {\n        this.setState();\n    };\n    return ElementRangeActive;\n}(ElementRangeState));\nexport default ElementRangeActive;\n//# sourceMappingURL=range-active.js.map","import { __extends } from \"tslib\";\nimport { getCurrentElement, isElementChange } from '../util';\nimport StateBase from './state-base';\n/**\n * 单状态量的 Action 基类\n * @class\n * @ignore\n */\nvar ElementSingleState = /** @class */ (function (_super) {\n    __extends(ElementSingleState, _super);\n    function ElementSingleState() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ElementSingleState.prototype.setStateEnable = function (enable) {\n        var element = getCurrentElement(this.context);\n        if (element) {\n            // 在同一个 element 内部移动，忽视 label 和 shape 之间\n            if (!isElementChange(this.context)) {\n                return;\n            }\n            // 仅支持单个状态量的元素，只能由 element 触发\n            if (enable) {\n                this.clear();\n                this.setElementState(element, true);\n            }\n            else if (this.hasState(element)) {\n                this.setElementState(element, false);\n            }\n        }\n    };\n    /**\n     * 切换选中，只允许选中一个\n     */\n    ElementSingleState.prototype.toggle = function () {\n        var element = getCurrentElement(this.context);\n        if (element) {\n            var hasState = this.hasState(element); // 提前获取状态\n            if (!hasState) {\n                this.clear();\n            }\n            this.setElementState(element, !hasState);\n        }\n    };\n    /**\n     * 取消当前时间影响的状态\n     */\n    ElementSingleState.prototype.reset = function () {\n        this.setStateEnable(false);\n    };\n    return ElementSingleState;\n}(StateBase));\nexport default ElementSingleState;\n//# sourceMappingURL=single-state.js.map","import { __extends } from \"tslib\";\nimport ElementSingleState from './single-state';\n/**\n * @ignore\n * 仅允许单个 Element Active 的 Action\n */\nvar ElementSingleActive = /** @class */ (function (_super) {\n    __extends(ElementSingleActive, _super);\n    function ElementSingleActive() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'active';\n        return _this;\n    }\n    /**\n     * 当前事件相关的 Element Active\n     */\n    ElementSingleActive.prototype.active = function () {\n        this.setState();\n    };\n    return ElementSingleActive;\n}(ElementSingleState));\nexport default ElementSingleActive;\n//# sourceMappingURL=single-active.js.map","import { each } from '@antv/util';\nimport { getElements } from '../util';\nvar STATUS_UNACTIVE = 'inactive';\nvar STATUS_ACTIVE = 'active';\n/**\n * @ignore\n * 清理 highlight 效果\n * @param view View 或者 Chart\n */\nexport function clearHighlight(view) {\n    var elements = getElements(view);\n    each(elements, function (el) {\n        if (el.hasState(STATUS_ACTIVE)) {\n            el.setState(STATUS_ACTIVE, false);\n        }\n        if (el.hasState(STATUS_UNACTIVE)) {\n            el.setState(STATUS_UNACTIVE, false);\n        }\n    });\n}\n/**\n * @ignore\n * 设置多个元素的 highlight\n * @param elements 元素集合\n * @param callback 设置回调函数\n * @param enable 设置或者取消\n */\nexport function setHighlightBy(elements, callback, enable) {\n    each(elements, function (el) {\n        // 需要处理 active 和 unactive 的互斥\n        if (callback(el)) {\n            if (el.hasState(STATUS_UNACTIVE)) {\n                el.setState(STATUS_UNACTIVE, false);\n            }\n            el.setState(STATUS_ACTIVE, enable);\n        }\n        else {\n            if (el.hasState(STATUS_ACTIVE)) {\n                el.setState(STATUS_ACTIVE, false);\n            }\n            el.setState(STATUS_UNACTIVE, enable);\n        }\n    });\n}\n//# sourceMappingURL=highlight-util.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport { getElements, getElementsByState } from '../util';\nimport { clearHighlight } from './highlight-util';\nimport StateAction from './state';\nvar STATUS_UNACTIVE = 'inactive';\nvar STATUS_ACTIVE = 'active';\n/**\n * @ignore\n * highlight，指定图形高亮，其他图形变暗\n */\nvar ElementHighlight = /** @class */ (function (_super) {\n    __extends(ElementHighlight, _super);\n    function ElementHighlight() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = STATUS_ACTIVE;\n        return _this;\n    }\n    // 多个元素设置、取消 highlight\n    ElementHighlight.prototype.setElementsStateByItem = function (elements, field, item, enable) {\n        var _this = this;\n        var callback = function (el) { return _this.isMathItem(el, field, item); };\n        this.setHighlightBy(elements, callback, enable);\n    };\n    // 设置元素的 highlight\n    ElementHighlight.prototype.setElementHighlight = function (el, callback) {\n        if (callback(el)) {\n            if (el.hasState(STATUS_UNACTIVE)) {\n                el.setState(STATUS_UNACTIVE, false);\n            }\n            el.setState(STATUS_ACTIVE, true);\n        }\n        else if (!el.hasState(STATUS_ACTIVE)) {\n            el.setState(STATUS_UNACTIVE, true);\n        }\n    };\n    ElementHighlight.prototype.setHighlightBy = function (elements, callback, enable) {\n        var _this = this;\n        if (enable) {\n            // 如果是设置 highlight ，则将匹配的 element 设置成 active，\n            // 其他如果不是 active，则设置成 unactive\n            each(elements, function (el) {\n                _this.setElementHighlight(el, callback);\n            });\n        }\n        else {\n            // 如果取消 highlight，则要检测是否全部取消 highlight\n            var activeElements = getElementsByState(this.context.view, STATUS_ACTIVE);\n            var allCancel_1 = true;\n            // 检测所有 activeElements 都要取消 highlight\n            each(activeElements, function (el) {\n                if (!callback(el)) {\n                    allCancel_1 = false;\n                    return false;\n                }\n            });\n            if (allCancel_1) {\n                // 都要取消，则取消所有的 active，unactive 状态\n                this.clear();\n            }\n            else {\n                // 如果不是都要取消 highlight, 则设置匹配的 element 的状态为 unactive\n                // 其他 element 状态不变\n                each(elements, function (el) {\n                    if (callback(el)) {\n                        if (el.hasState(STATUS_ACTIVE)) {\n                            el.setState(STATUS_ACTIVE, false);\n                        }\n                        el.setState(STATUS_UNACTIVE, true);\n                    }\n                });\n            }\n        }\n    };\n    // 单个元素设置和取消 highlight\n    ElementHighlight.prototype.setElementState = function (element, enable) {\n        var view = this.context.view;\n        var elements = getElements(view);\n        this.setHighlightBy(elements, function (el) { return element === el; }, enable);\n    };\n    ElementHighlight.prototype.highlight = function () {\n        this.setState();\n    };\n    // 清理掉所有的 active， unactive 状态\n    ElementHighlight.prototype.clear = function () {\n        var view = this.context.view;\n        clearHighlight(view);\n    };\n    return ElementHighlight;\n}(StateAction));\nexport default ElementHighlight;\n//# sourceMappingURL=highlight.js.map","import { __extends } from \"tslib\";\nimport { getElements, getElementValue } from '../util';\nimport Highlight from './highlight';\n/**\n * Highlight color\n * @ignore\n */\nvar HighlightColor = /** @class */ (function (_super) {\n    __extends(HighlightColor, _super);\n    function HighlightColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HighlightColor.prototype.setStateByElement = function (element, enable) {\n        var view = this.context.view;\n        var colorAttr = element.geometry.getAttribute('color');\n        if (!colorAttr) {\n            return;\n        }\n        var scale = view.getScaleByField(colorAttr.getFields()[0]);\n        var value = getElementValue(element, scale.field);\n        var elements = getElements(view);\n        var highlightElements = elements.filter(function (el) {\n            return getElementValue(el, scale.field) === value;\n        });\n        this.setHighlightBy(elements, function (el) { return highlightElements.includes(el); }, enable);\n    };\n    return HighlightColor;\n}(Highlight));\nexport default HighlightColor;\n//# sourceMappingURL=highlight-by-color.js.map","import { __extends } from \"tslib\";\nimport { getElements, getElementValue } from '../util';\nimport Highlight from './highlight';\n/**\n * Highlight x\n * @ignore\n */\nvar HighlightX = /** @class */ (function (_super) {\n    __extends(HighlightX, _super);\n    function HighlightX() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HighlightX.prototype.setStateByElement = function (element, enable) {\n        var view = this.context.view;\n        var scale = view.getXScale();\n        var value = getElementValue(element, scale.field);\n        var elements = getElements(view);\n        var highlightElements = elements.filter(function (el) {\n            return getElementValue(el, scale.field) === value;\n        });\n        this.setHighlightBy(elements, function (el) { return highlightElements.includes(el); }, enable);\n    };\n    return HighlightX;\n}(Highlight));\nexport default HighlightX;\n//# sourceMappingURL=highlight-by-x.js.map","import { __extends } from \"tslib\";\nimport { clearHighlight, setHighlightBy } from './highlight-util';\nimport ElementRangeState from './range-state';\n/**\n * @ignore\n * 区域 highlight 的 Action\n */\nvar ElementRangeHighlight = /** @class */ (function (_super) {\n    __extends(ElementRangeHighlight, _super);\n    function ElementRangeHighlight() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'active';\n        return _this;\n    }\n    // 清理掉所有的 active， unactive 状态\n    ElementRangeHighlight.prototype.clearViewState = function (view) {\n        clearHighlight(view);\n    };\n    /**\n     * 设置 highlight\n     */\n    ElementRangeHighlight.prototype.highlight = function () {\n        this.setState();\n    };\n    ElementRangeHighlight.prototype.setElementsState = function (elements, enable, allElements) {\n        setHighlightBy(allElements, function (el) { return elements.indexOf(el) >= 0; }, enable);\n    };\n    return ElementRangeHighlight;\n}(ElementRangeState));\nexport default ElementRangeHighlight;\n//# sourceMappingURL=range-highlight.js.map","import { __extends } from \"tslib\";\nimport { getElements } from '../util';\nimport { clearHighlight, setHighlightBy } from './highlight-util';\nimport ElementSingleState from './single-state';\n/**\n * @ignore\n * 单个 Element Highlight 的 Action\n */\nvar ElementSingleHighlight = /** @class */ (function (_super) {\n    __extends(ElementSingleHighlight, _super);\n    function ElementSingleHighlight() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'active';\n        return _this;\n    }\n    /**\n     * Element Highlight\n     */\n    ElementSingleHighlight.prototype.highlight = function () {\n        this.setState();\n    };\n    ElementSingleHighlight.prototype.setElementState = function (element, enable) {\n        var view = this.context.view;\n        var elements = getElements(view);\n        setHighlightBy(elements, function (el) { return element === el; }, enable);\n    };\n    // 清理掉所有的 active， unactive 状态\n    ElementSingleHighlight.prototype.clear = function () {\n        var view = this.context.view;\n        clearHighlight(view);\n    };\n    return ElementSingleHighlight;\n}(ElementSingleState));\nexport default ElementSingleHighlight;\n//# sourceMappingURL=single-highlight.js.map","import { __extends } from \"tslib\";\nimport ElementRangeState from './range-state';\n/**\n * @ignore\n * 区域选中的 Action\n */\nvar ElementRangeSelected = /** @class */ (function (_super) {\n    __extends(ElementRangeSelected, _super);\n    function ElementRangeSelected() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'selected';\n        return _this;\n    }\n    /**\n     * 选中\n     */\n    ElementRangeSelected.prototype.selected = function () {\n        this.setState();\n    };\n    return ElementRangeSelected;\n}(ElementRangeState));\nexport default ElementRangeSelected;\n//# sourceMappingURL=range-selected.js.map","import { __extends } from \"tslib\";\nimport StateAction from './state';\n/**\n * @ignore\n * 允许多选的 Action\n * @class\n */\nvar ElementMultipleSelected = /** @class */ (function (_super) {\n    __extends(ElementMultipleSelected, _super);\n    function ElementMultipleSelected() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'selected';\n        return _this;\n    }\n    /**\n     * 选中节点，允许多选\n     */\n    ElementMultipleSelected.prototype.selected = function () {\n        this.setState();\n    };\n    return ElementMultipleSelected;\n}(StateAction));\nexport default ElementMultipleSelected;\n//# sourceMappingURL=selected.js.map","import { __extends } from \"tslib\";\nimport ElementSingleState from './single-state';\n/**\n * @ignore\n * 单选的 Action\n */\nvar ElementSingleSelected = /** @class */ (function (_super) {\n    __extends(ElementSingleSelected, _super);\n    function ElementSingleSelected() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'selected';\n        return _this;\n    }\n    /**\n     * 选中\n     */\n    ElementSingleSelected.prototype.selected = function () {\n        this.setState();\n    };\n    return ElementSingleSelected;\n}(ElementSingleState));\nexport default ElementSingleSelected;\n//# sourceMappingURL=single-selected.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport Action from '../base';\nimport { getComponents } from '../util';\nimport { getCurrentElement, getDelegationObject, getElementValue, isList, getScaleByField } from '../util';\n/**\n * 列表项状态 Action 的基础类\n * @class\n * @ignore\n */\nvar ListState = /** @class */ (function (_super) {\n    __extends(ListState, _super);\n    function ListState() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = '';\n        _this.ignoreItemStates = [];\n        return _this;\n    }\n    /** 获取触发的列表组件 */\n    ListState.prototype.getTriggerListInfo = function () {\n        var delegateObject = getDelegationObject(this.context);\n        var info = null;\n        if (isList(delegateObject)) {\n            info = {\n                item: delegateObject.item,\n                list: delegateObject.component,\n            };\n        }\n        return info;\n    };\n    // 获取所有允许执行 Action 的组件\n    ListState.prototype.getAllowComponents = function () {\n        var _this = this;\n        var view = this.context.view;\n        var components = getComponents(view);\n        var rst = [];\n        each(components, function (component) {\n            if (component.isList() && _this.allowSetStateByElement(component)) {\n                rst.push(component);\n            }\n        });\n        return rst;\n    };\n    /** 是否存在指定的状态 */\n    ListState.prototype.hasState = function (list, item) {\n        return list.hasState(item, this.stateName);\n    };\n    /** 清理组件的状态 */\n    ListState.prototype.clearAllComponentsState = function () {\n        var _this = this;\n        var components = this.getAllowComponents();\n        each(components, function (component) {\n            component.clearItemsState(_this.stateName);\n        });\n    };\n    // 不是所有的 component 都能进行 active，目前仅支持分类 scale 对应的组件\n    ListState.prototype.allowSetStateByElement = function (component) {\n        var field = component.get('field');\n        if (!field) {\n            return false;\n        }\n        if (this.cfg && this.cfg.componentNames) {\n            var name_1 = component.get('name');\n            // 如果配置了限制的 component name，则要进行检测\n            if (this.cfg.componentNames.indexOf(name_1) === -1) {\n                return false;\n            }\n        }\n        var view = this.context.view;\n        var scale = getScaleByField(view, field);\n        return scale && scale.isCategory;\n    };\n    // 检测是否允许触发对应的状态改变事件\n    ListState.prototype.allowSetStateByItem = function (item, list) {\n        var ignoreStates = this.ignoreItemStates;\n        if (ignoreStates.length) {\n            var filterStates = ignoreStates.filter(function (state) {\n                return list.hasState(item, state);\n            });\n            return filterStates.length === 0;\n        }\n        return true; // 没有定义忽略的状态时，允许\n    };\n    // 设置组件的 item active\n    ListState.prototype.setStateByElement = function (component, element, enable) {\n        var field = component.get('field');\n        var view = this.context.view;\n        var scale = getScaleByField(view, field);\n        var value = getElementValue(element, field);\n        var text = scale.getText(value);\n        this.setItemsState(component, text, enable);\n    };\n    // 设置状态\n    ListState.prototype.setStateEnable = function (enable) {\n        var _this = this;\n        var element = getCurrentElement(this.context);\n        if (element) {\n            // trigger by element\n            var components = this.getAllowComponents();\n            each(components, function (component) {\n                _this.setStateByElement(component, element, enable);\n            });\n        }\n        else {\n            // 被组件触发\n            var delegateObject = getDelegationObject(this.context);\n            if (isList(delegateObject)) {\n                var item = delegateObject.item, component = delegateObject.component;\n                if (this.allowSetStateByElement(component) && this.allowSetStateByItem(item, component)) {\n                    this.setItemState(component, item, enable);\n                }\n            }\n        }\n    };\n    // 多个 item 设置状态\n    ListState.prototype.setItemsState = function (list, name, enable) {\n        var _this = this;\n        var items = list.getItems();\n        each(items, function (item) {\n            if (item.name === name) {\n                _this.setItemState(list, item, enable);\n            }\n        });\n    };\n    // 单个 item 设置状态\n    ListState.prototype.setItemState = function (list, item, enable) {\n        list.setItemState(item, this.stateName, enable);\n    };\n    /**\n     * 设置状态\n     */\n    ListState.prototype.setState = function () {\n        this.setStateEnable(true);\n    };\n    /**\n     * 取消状态\n     */\n    ListState.prototype.reset = function () {\n        this.setStateEnable(false);\n    };\n    /**\n     * 切换状态\n     */\n    ListState.prototype.toggle = function () {\n        var triggerInfo = this.getTriggerListInfo();\n        if (triggerInfo && triggerInfo.item) {\n            var list = triggerInfo.list, item = triggerInfo.item;\n            var enable = this.hasState(list, item);\n            this.setItemState(list, item, !enable);\n        }\n    };\n    /**\n     * 取消状态\n     */\n    ListState.prototype.clear = function () {\n        var triggerInfo = this.getTriggerListInfo();\n        if (triggerInfo) {\n            triggerInfo.list.clearItemsState(this.stateName);\n        }\n        else {\n            this.clearAllComponentsState();\n        }\n    };\n    return ListState;\n}(Action));\nexport default ListState;\n//# sourceMappingURL=list-state.js.map","import { __extends } from \"tslib\";\nimport ListState from './list-state';\n/**\n * 列表项（图例项、坐标轴文本）激活的 Action\n * @class\n * @ignore\n */\nvar ListActive = /** @class */ (function (_super) {\n    __extends(ListActive, _super);\n    function ListActive() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'active';\n        return _this;\n    }\n    /**\n     * 激活选项\n     */\n    ListActive.prototype.active = function () {\n        this.setState();\n    };\n    return ListActive;\n}(ListState));\nexport default ListActive;\n//# sourceMappingURL=list-active.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport { clearList } from './list-highlight-util';\nimport ListState from './list-state';\nvar STATUS_UNACTIVE = 'inactive';\nvar STATUS_ACTIVE = 'active';\n/**\n * highlight Action 的效果是 active 和 inactive 两个状态的组合\n * @class\n * @ignore\n */\nvar ListHighlight = /** @class */ (function (_super) {\n    __extends(ListHighlight, _super);\n    function ListHighlight() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = STATUS_ACTIVE;\n        _this.ignoreItemStates = ['unchecked']; // 当存在 unchecked 状态时不触发\n        return _this;\n    }\n    // 如果 item.name 匹配，则设置 highlight 以及取消\n    ListHighlight.prototype.setItemsState = function (list, name, enable) {\n        this.setHighlightBy(list, function (item) { return item.name === name; }, enable);\n    };\n    // 单个 item 设置状态\n    ListHighlight.prototype.setItemState = function (list, item, enable) {\n        var items = list.getItems();\n        this.setHighlightBy(list, function (el) { return el === item; }, enable);\n    };\n    // 根据条件设置 highlight\n    ListHighlight.prototype.setHighlightBy = function (list, callback, enable) {\n        var items = list.getItems();\n        if (enable) {\n            // 设置 highlight 时，保留之前已经 Highlight 的项\n            each(items, function (item) {\n                if (callback(item)) {\n                    if (list.hasState(item, STATUS_UNACTIVE)) {\n                        list.setItemState(item, STATUS_UNACTIVE, false);\n                    }\n                    list.setItemState(item, STATUS_ACTIVE, true);\n                }\n                else if (!list.hasState(item, STATUS_ACTIVE)) {\n                    list.setItemState(item, STATUS_UNACTIVE, true);\n                }\n            });\n        }\n        else {\n            var activeItems = list.getItemsByState(STATUS_ACTIVE);\n            var allCancel_1 = true;\n            // 检测 activeItems 是否要全部取消\n            each(activeItems, function (item) {\n                if (!callback(item)) {\n                    allCancel_1 = false;\n                    return false;\n                }\n            });\n            if (allCancel_1) {\n                this.clear();\n            }\n            else {\n                // 如果不是都要取消 highlight, 则设置匹配的 element 的状态为 unactive\n                // 其他 element 状态不变\n                each(items, function (item) {\n                    if (callback(item)) {\n                        if (list.hasState(item, STATUS_ACTIVE)) {\n                            list.setItemState(item, STATUS_ACTIVE, false);\n                        }\n                        list.setItemState(item, STATUS_UNACTIVE, true);\n                    }\n                });\n            }\n        }\n    };\n    /**\n     * highlight 图例项（坐标轴文本）\n     */\n    ListHighlight.prototype.highlight = function () {\n        this.setState();\n    };\n    // 需要全部清理 active 和 unactive\n    ListHighlight.prototype.clear = function () {\n        var triggerInfo = this.getTriggerListInfo();\n        if (triggerInfo) {\n            clearList(triggerInfo.list);\n        }\n        else {\n            // 如果不是 component 的事件触发，则所有满足触发条件的组件都清除该状态\n            var components = this.getAllowComponents();\n            each(components, function (component) {\n                component.clearItemsState(STATUS_ACTIVE);\n                component.clearItemsState(STATUS_UNACTIVE);\n            });\n        }\n    };\n    return ListHighlight;\n}(ListState));\nexport default ListHighlight;\n//# sourceMappingURL=list-highlight.js.map","import { each } from '@antv/util';\nvar STATUS_UNACTIVE = 'inactive';\nvar STATUS_ACTIVE = 'active';\n/**\n * 清理图例的 Highlight 效果\n * @param list 列表组件，图例或者坐标轴\n * @ignore\n */\nexport function clearList(list) {\n    var items = list.getItems();\n    each(items, function (item) {\n        if (list.hasState(item, STATUS_ACTIVE)) {\n            list.setItemState(item, STATUS_ACTIVE, false);\n        }\n        if (list.hasState(item, STATUS_UNACTIVE)) {\n            list.setItemState(item, STATUS_UNACTIVE, false);\n        }\n    });\n}\n//# sourceMappingURL=list-highlight-util.js.map","import { __extends } from \"tslib\";\nimport ListState from './list-state';\n/**\n * 图例项和坐标轴文本选中的 Action\n * @ignore\n */\nvar ListSelected = /** @class */ (function (_super) {\n    __extends(ListSelected, _super);\n    function ListSelected() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'selected';\n        return _this;\n    }\n    ListSelected.prototype.selected = function () {\n        this.setState();\n    };\n    return ListSelected;\n}(ListState));\nexport default ListSelected;\n//# sourceMappingURL=list-selected.js.map","import { __extends } from \"tslib\";\nimport ListState from './list-state';\n/**\n * 图例项取消勾选的 Action\n * @ignore\n */\nvar ListUnchecked = /** @class */ (function (_super) {\n    __extends(ListUnchecked, _super);\n    function ListUnchecked() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'unchecked';\n        return _this;\n    }\n    /**\n     * 取消勾选\n     */\n    ListUnchecked.prototype.unchecked = function () {\n        this.setState();\n    };\n    return ListUnchecked;\n}(ListState));\nexport default ListUnchecked;\n//# sourceMappingURL=list-unchecked.js.map","import { __assign, __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport Action from '../base';\n/**\n * @ignore\n * 辅助框 Action 的基类\n */\nvar MaskBase = /** @class */ (function (_super) {\n    __extends(MaskBase, _super);\n    function MaskBase() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        // mask 图形\n        _this.maskShape = null;\n        // 组成 mask 的各个点\n        _this.points = [];\n        // 开始 mask 的标记\n        _this.starting = false;\n        // 开始移动的标记\n        _this.moving = false;\n        _this.preMovePoint = null;\n        _this.shapeType = 'path';\n        return _this;\n    }\n    // 获取当前的位置\n    MaskBase.prototype.getCurrentPoint = function () {\n        var event = this.context.event;\n        return {\n            x: event.x,\n            y: event.y,\n        };\n    };\n    // 触发 mask 的事件\n    MaskBase.prototype.emitEvent = function (type) {\n        var eventName = \"mask:\" + type;\n        var view = this.context.view;\n        var event = this.context.event;\n        view.emit(eventName, {\n            target: this.maskShape,\n            shape: this.maskShape,\n            points: this.points,\n            x: event.x,\n            y: event.y,\n        });\n    };\n    // 创建 mask\n    MaskBase.prototype.createMask = function () {\n        var view = this.context.view;\n        var maskAttrs = this.getMaskAttrs();\n        var maskShape = view.foregroundGroup.addShape({\n            type: this.shapeType,\n            name: 'mask',\n            draggable: true,\n            attrs: __assign({ fill: '#C5D4EB', opacity: 0.3 }, maskAttrs)\n        });\n        return maskShape;\n    };\n    // 生成 mask 的路径\n    MaskBase.prototype.getMaskPath = function () {\n        return [];\n    };\n    /**\n     * 显示\n     */\n    MaskBase.prototype.show = function () {\n        if (this.maskShape) {\n            this.maskShape.show();\n            this.emitEvent('show');\n        }\n    };\n    /**\n     * 开始\n     */\n    MaskBase.prototype.start = function () {\n        this.starting = true;\n        // 开始时，保证移动结束\n        this.moving = false;\n        this.points = [this.getCurrentPoint()];\n        if (!this.maskShape) {\n            this.maskShape = this.createMask();\n            // 开始时设置 capture: false，可以避免创建、resize 时触发事件\n            this.maskShape.set('capture', false);\n        }\n        this.updateMask();\n        this.emitEvent('start');\n    };\n    /**\n     * 开始移动\n     */\n    MaskBase.prototype.moveStart = function () {\n        this.moving = true;\n        this.preMovePoint = this.getCurrentPoint();\n    };\n    /**\n     * 移动 mask\n     */\n    MaskBase.prototype.move = function () {\n        if (!this.moving || !this.maskShape) {\n            return;\n        }\n        var currentPoint = this.getCurrentPoint();\n        var preMovePoint = this.preMovePoint;\n        var dx = currentPoint.x - preMovePoint.x;\n        var dy = currentPoint.y - preMovePoint.y;\n        var points = this.points;\n        each(points, function (point) {\n            point.x += dx;\n            point.y += dy;\n        });\n        this.updateMask();\n        this.emitEvent('change');\n        this.preMovePoint = currentPoint;\n    };\n    MaskBase.prototype.updateMask = function () {\n        var attrs = this.getMaskAttrs();\n        this.maskShape.attr(attrs);\n    };\n    /**\n     * 结束移动\n     */\n    MaskBase.prototype.moveEnd = function () {\n        this.moving = false;\n        this.preMovePoint = null;\n    };\n    /**\n     * 结束\n     */\n    MaskBase.prototype.end = function () {\n        this.starting = false;\n        this.emitEvent('end');\n        if (this.maskShape) {\n            this.maskShape.set('capture', true);\n        }\n    };\n    /**\n     * 隐藏\n     */\n    MaskBase.prototype.hide = function () {\n        if (this.maskShape) {\n            this.maskShape.hide();\n            this.emitEvent('hide');\n        }\n    };\n    /**\n     * 大小变化\n     */\n    MaskBase.prototype.resize = function () {\n        // 只有进行中，才会允许大小变化\n        if (this.starting && this.maskShape) {\n            this.points.push(this.getCurrentPoint());\n            this.updateMask();\n            this.emitEvent('change');\n        }\n    };\n    /**\n     * 销毁\n     */\n    MaskBase.prototype.destroy = function () {\n        this.points = [];\n        if (this.maskShape) {\n            this.maskShape.remove();\n        }\n        this.maskShape = null;\n        this.preMovePoint = null;\n        _super.prototype.destroy.call(this);\n    };\n    return MaskBase;\n}(Action));\nexport default MaskBase;\n//# sourceMappingURL=base.js.map","import { __extends } from \"tslib\";\nimport { last } from '@antv/util';\nimport { distance } from '../util';\nimport MaskBase from './base';\n/**\n * @ignore\n * 圆形辅助框 Action\n */\nvar CircleMask = /** @class */ (function (_super) {\n    __extends(CircleMask, _super);\n    function CircleMask() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.shapeType = 'circle';\n        return _this;\n    }\n    CircleMask.prototype.getMaskAttrs = function () {\n        var points = this.points;\n        var currentPoint = last(this.points);\n        var r = 0;\n        var x = 0;\n        var y = 0;\n        if (points.length) {\n            var first = points[0];\n            r = distance(first, currentPoint) / 2;\n            x = (currentPoint.x + first.x) / 2;\n            y = (currentPoint.y + first.y) / 2;\n        }\n        return {\n            x: x,\n            y: y,\n            r: r\n        };\n    };\n    return CircleMask;\n}(MaskBase));\nexport default CircleMask;\n//# sourceMappingURL=circle.js.map","import { __extends } from \"tslib\";\nimport { head, last } from '@antv/util';\nimport MaskBase from './base';\n/**\n * @ignore\n * 矩形的辅助框 Action\n */\nvar RectMask = /** @class */ (function (_super) {\n    __extends(RectMask, _super);\n    function RectMask() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.shapeType = 'rect';\n        return _this;\n    }\n    RectMask.prototype.getRegion = function () {\n        var points = this.points;\n        return {\n            start: head(points),\n            end: last(points)\n        };\n    };\n    // 添加图形\n    RectMask.prototype.getMaskAttrs = function () {\n        var _a = this.getRegion(), start = _a.start, end = _a.end;\n        var x = Math.min(start.x, end.x);\n        var y = Math.min(start.y, end.y);\n        var width = Math.abs(end.x - start.x);\n        var height = Math.abs(end.y - start.y);\n        return {\n            x: x,\n            y: y,\n            width: width,\n            height: height\n        };\n    };\n    return RectMask;\n}(MaskBase));\nexport default RectMask;\n//# sourceMappingURL=rect.js.map","import { __extends } from \"tslib\";\nimport { clamp, head, last } from '@antv/util';\nimport RectMask from './rect';\nfunction clampPoint(point) {\n    point.x = clamp(point.x, 0, 1);\n    point.y = clamp(point.y, 0, 1);\n}\n/**\n * @ignore\n */\nvar DimRect = /** @class */ (function (_super) {\n    __extends(DimRect, _super);\n    function DimRect() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.dim = 'x';\n        _this.inPlot = true;\n        return _this;\n    }\n    DimRect.prototype.getRegion = function () {\n        var start = null;\n        var end = null;\n        var points = this.points;\n        var dim = this.dim;\n        var coord = this.context.view.getCoordinate();\n        var normalStart = coord.invert(head(points));\n        var normalEnd = coord.invert(last(points));\n        if (this.inPlot) { // 约束到 0 - 1 范围内\n            clampPoint(normalStart);\n            clampPoint(normalEnd);\n        }\n        if (dim === 'x') { // x 轴方向扩展, y 轴方向占满全部\n            start = coord.convert({\n                x: normalStart.x,\n                y: 0\n            });\n            end = coord.convert({\n                x: normalEnd.x,\n                y: 1\n            });\n        }\n        else { // y 轴方向扩展, x 轴方向占满全部\n            start = coord.convert({\n                x: 0,\n                y: normalStart.y\n            });\n            end = coord.convert({\n                x: 1,\n                y: normalEnd.y\n            });\n        }\n        return {\n            start: start,\n            end: end\n        };\n    };\n    return DimRect;\n}(RectMask));\nexport default DimRect;\n//# sourceMappingURL=dim-rect.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport MaskBase from './base';\n/**\n * @ignore\n * 多个点构成的 Path 辅助框 Action\n */\nvar PathMask = /** @class */ (function (_super) {\n    __extends(PathMask, _super);\n    function PathMask() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // 生成 mask 的路径\n    PathMask.prototype.getMaskPath = function () {\n        var points = this.points;\n        var path = [];\n        if (points.length) {\n            each(points, function (point, index) {\n                if (index === 0) {\n                    path.push(['M', point.x, point.y]);\n                }\n                else {\n                    path.push(['L', point.x, point.y]);\n                }\n            });\n            path.push(['L', points[0].x, points[0].y]);\n        }\n        return path;\n    };\n    PathMask.prototype.getMaskAttrs = function () {\n        return {\n            path: this.getMaskPath()\n        };\n    };\n    /**\n     * 添加一个点\n     */\n    PathMask.prototype.addPoint = function () {\n        this.resize();\n    };\n    return PathMask;\n}(MaskBase));\nexport default PathMask;\n//# sourceMappingURL=path.js.map","import { __extends } from \"tslib\";\nimport { getSpline } from '../util';\nimport PathMask from './path';\n/**\n * Smooth path mask\n * @ignore\n */\nvar SmoothPathMask = /** @class */ (function (_super) {\n    __extends(SmoothPathMask, _super);\n    function SmoothPathMask() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // 生成 mask 的路径\n    SmoothPathMask.prototype.getMaskPath = function () {\n        var points = this.points;\n        return getSpline(points, true);\n    };\n    return SmoothPathMask;\n}(PathMask));\nexport default SmoothPathMask;\n//# sourceMappingURL=smooth-path.js.map","import { __extends } from \"tslib\";\n/**\n * @fileoverview 设置画布的箭头，参看：https://www.w3school.com.cn/jsref/prop_style_cursor.asp\n * @author dxq613\n */\nimport Action from './base';\n/**\n * 鼠标形状的 Action\n * @ignore\n */\nvar CursorAction = /** @class */ (function (_super) {\n    __extends(CursorAction, _super);\n    function CursorAction() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CursorAction.prototype.setCursor = function (cursor) {\n        var view = this.context.view;\n        view.getCanvas().setCursor(cursor);\n    };\n    /**\n     * 默认光标（通常是一个箭头）\n     */\n    CursorAction.prototype.default = function () {\n        this.setCursor('default');\n    };\n    /** 光标呈现为指示链接的指针（一只手） */\n    CursorAction.prototype.pointer = function () {\n        this.setCursor('pointer');\n    };\n    /** 此光标指示某对象可被移动。 */\n    CursorAction.prototype.move = function () {\n        this.setCursor('move');\n    };\n    /** 光标呈现为十字线。 */\n    CursorAction.prototype.crosshair = function () {\n        this.setCursor('crosshair');\n    };\n    /** 此光标指示程序正忙（通常是一只表或沙漏）。 */\n    CursorAction.prototype.wait = function () {\n        this.setCursor('wait');\n    };\n    /** 此光标指示可用的帮助（通常是一个问号或一个气球）。 */\n    CursorAction.prototype.help = function () {\n        this.setCursor('help');\n    };\n    /** 此光标指示文本。 */\n    CursorAction.prototype.text = function () {\n        this.setCursor('text');\n    };\n    /**\n     * 此光标指示矩形框的边缘可被向右（东）移动。\n     */\n    CursorAction.prototype.eResize = function () {\n        this.setCursor('e-resize');\n    };\n    /**\n     * 此光标指示矩形框的边缘可被向左（西）移动。\n     */\n    CursorAction.prototype.wResize = function () {\n        this.setCursor('w-resize');\n    };\n    /**\n     * 此光标指示矩形框的边缘可被向上（北）移动。\n     */\n    CursorAction.prototype.nResize = function () {\n        this.setCursor('n-resize');\n    };\n    /**\n     * 此光标指示矩形框的边缘可被向下（南）移动。\n     */\n    CursorAction.prototype.sResize = function () {\n        this.setCursor('s-resize');\n    };\n    /**\n     * 光标指示可移动的方向 右上方（东北）\n     */\n    CursorAction.prototype.neResize = function () {\n        this.setCursor('ne-resize');\n    };\n    /**\n     * 光标指示可移动的方向 左上方（西北）\n     */\n    CursorAction.prototype.nwResize = function () {\n        this.setCursor('nw-resize');\n    };\n    /**\n     * 光标指示可移动的方向右下方（东南）\n     */\n    CursorAction.prototype.seResize = function () {\n        this.setCursor('se-resize');\n    };\n    /**\n     * 光标指示可移动的方向左下方（西南）\n     */\n    CursorAction.prototype.swResize = function () {\n        this.setCursor('sw-resize');\n    };\n    /**\n     * 光标指示可以在上下方向移动\n     */\n    CursorAction.prototype.nsResize = function () {\n        this.setCursor('ns-resize');\n    };\n    /**\n     * 光标指示可以在左右方向移动\n     */\n    CursorAction.prototype.ewResize = function () {\n        this.setCursor('ew-resize');\n    };\n    return CursorAction;\n}(Action));\nexport default CursorAction;\n//# sourceMappingURL=cursor.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport Action from '../base';\nimport { getDelegationObject, getScaleByField, isList, isSlider } from '../util';\n/**\n * 数据过滤。\n * @ignore\n */\nvar DataFilter = /** @class */ (function (_super) {\n    __extends(DataFilter, _super);\n    function DataFilter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DataFilter.prototype.filterView = function (view, field, filter) {\n        var _this = this;\n        // 只有存在这个 scale 时才生效\n        if (view.getScaleByField(field)) {\n            view.filter(field, filter);\n        }\n        if (view.views && view.views.length) {\n            each(view.views, function (subView) {\n                _this.filterView(subView, field, filter);\n            });\n        }\n    };\n    /**\n     * 过滤数据\n     */\n    DataFilter.prototype.filter = function () {\n        var delegateObject = getDelegationObject(this.context);\n        if (delegateObject) {\n            var view = this.context.view;\n            var component = delegateObject.component;\n            var field = component.get('field');\n            // 列表类的组件能够触发\n            if (isList(delegateObject)) {\n                if (field) {\n                    var unCheckedItems = component.getItemsByState('unchecked');\n                    var scale_1 = getScaleByField(view, field);\n                    var names_1 = unCheckedItems.map(function (item) { return item.name; });\n                    if (names_1.length) {\n                        this.filterView(view, field, function (value) {\n                            var text = scale_1.getText(value);\n                            return !names_1.includes(text);\n                        });\n                    }\n                    else {\n                        this.filterView(view, field, null);\n                    }\n                    view.render(true);\n                }\n            }\n            else if (isSlider(delegateObject)) {\n                var range = component.getValue();\n                var min_1 = range[0], max_1 = range[1];\n                this.filterView(view, field, function (value) {\n                    return value >= min_1 && value <= max_1;\n                });\n                view.render(true);\n            }\n        }\n    };\n    return DataFilter;\n}(Action));\nexport default DataFilter;\n//# sourceMappingURL=filter.js.map","import { __extends } from \"tslib\";\nimport Action from '../base';\nimport { isMask } from '../util';\n// 获取对应的 scale\nfunction getFilter(scale, dim, point1, point2) {\n    var min = Math.min(point1[dim], point2[dim]);\n    var max = Math.max(point1[dim], point2[dim]);\n    var _a = scale.range, rangeMin = _a[0], rangeMax = _a[1];\n    // 约束值在 scale 的 range 之间\n    if (min < rangeMin) {\n        min = rangeMin;\n    }\n    if (max > rangeMax) {\n        max = rangeMax;\n    }\n    // 范围大于整个 view 的范围，则返回 null\n    if (min === rangeMax && max === rangeMax) {\n        return null;\n    }\n    var minValue = scale.invert(min);\n    var maxValue = scale.invert(max);\n    if (scale.isCategory) {\n        var minIndex = scale.values.indexOf(minValue);\n        var maxIndex = scale.values.indexOf(maxValue);\n        var arr_1 = scale.values.slice(minIndex, maxIndex + 1);\n        return function (value) {\n            return arr_1.includes(value);\n        };\n    }\n    else {\n        return function (value) {\n            return value >= minValue && value <= maxValue;\n        };\n    }\n}\n/**\n * 范围过滤的 Action\n * @ignore\n */\nvar RangeFilter = /** @class */ (function (_super) {\n    __extends(RangeFilter, _super);\n    function RangeFilter() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * 范围过滤生效的字段/维度，可以是 x, y\n         */\n        _this.dims = ['x', 'y'];\n        /** 起始点 */\n        _this.startPoint = null;\n        _this.isStarted = false;\n        return _this;\n    }\n    // x,y 是否生效\n    RangeFilter.prototype.hasDim = function (dim) {\n        return this.dims.includes(dim);\n    };\n    /**\n     * 开始范围过滤，记录范围过滤的起点\n     */\n    RangeFilter.prototype.start = function () {\n        var context = this.context;\n        this.isStarted = true;\n        this.startPoint = context.getCurrentPoint();\n    };\n    /**\n     * 过滤，以开始的点和当前点对数据进行过滤\n     */\n    RangeFilter.prototype.filter = function () {\n        var startPoint;\n        var currentPoint;\n        if (isMask(this.context)) {\n            var maskShape = this.context.event.target;\n            var bbox = maskShape.getCanvasBBox();\n            startPoint = { x: bbox.x, y: bbox.y };\n            currentPoint = { x: bbox.maxX, y: bbox.maxY };\n        }\n        else {\n            if (!this.isStarted) {\n                // 如果没有开始，则不执行过滤\n                return;\n            }\n            startPoint = this.startPoint;\n            currentPoint = this.context.getCurrentPoint();\n        }\n        if (Math.abs(startPoint.x - currentPoint.x) < 5 || Math.abs(startPoint.x - currentPoint.y) < 5) {\n            // 距离过小也不生效\n            return;\n        }\n        var view = this.context.view;\n        var coord = view.getCoordinate();\n        var normalCurrent = coord.invert(currentPoint);\n        var normalStart = coord.invert(startPoint);\n        // 设置 x 方向的 filter\n        if (this.hasDim('x')) {\n            var xScale = view.getXScale();\n            var filter = getFilter(xScale, 'x', normalCurrent, normalStart);\n            this.filterView(view, xScale.field, filter);\n        }\n        // 设置 y 方向的 filter\n        if (this.hasDim('y')) {\n            var yScale = view.getYScales()[0];\n            var filter = getFilter(yScale, 'y', normalCurrent, normalStart);\n            this.filterView(view, yScale.field, filter);\n        }\n        this.reRender(view);\n    };\n    /**\n     * 结束\n     */\n    RangeFilter.prototype.end = function () {\n        this.isStarted = false;\n    };\n    /**\n     * 取消同当前 Action 相关的过滤，指定的 x,y\n     */\n    RangeFilter.prototype.reset = function () {\n        var view = this.context.view;\n        this.isStarted = false;\n        if (this.hasDim('x')) {\n            var xScale = view.getXScale();\n            this.filterView(view, xScale.field, null); // 取消过滤\n        }\n        if (this.hasDim('y')) {\n            // y 轴过滤仅取第一个 yScale\n            var yScale = view.getYScales()[0];\n            this.filterView(view, yScale.field, null); // 取消过滤\n        }\n        this.reRender(view);\n    };\n    /**\n     * 对 view 进行过滤\n     */\n    RangeFilter.prototype.filterView = function (view, field, filter) {\n        view.filter(field, filter);\n    };\n    /**\n     * 重新渲染\n     * @param view\n     */\n    RangeFilter.prototype.reRender = function (view) {\n        view.render(true);\n    };\n    return RangeFilter;\n}(Action));\nexport default RangeFilter;\n//# sourceMappingURL=range-filter.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport RangeFilter from './range-filter';\nimport { getSilbings } from '../util';\n/**\n * 数据范围过滤，但不在当前的 view 上生效，而在当前的 view 同一层级的其他 views 上生效，用于实现联动过滤。\n * @ignore\n */\nvar SiblingFilter = /** @class */ (function (_super) {\n    __extends(SiblingFilter, _super);\n    function SiblingFilter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 对 view 进行过滤\n     * @param view\n     * @param field\n     * @param filter\n     */\n    SiblingFilter.prototype.filterView = function (view, field, filter) {\n        var siblings = getSilbings(view);\n        each(siblings, function (sibling) {\n            sibling.filter(field, filter);\n        });\n    };\n    /**\n     * 重新渲染\n     * @param view\n     */\n    SiblingFilter.prototype.reRender = function (view) {\n        var siblings = getSilbings(view);\n        each(siblings, function (sibling) {\n            sibling.render(true);\n        });\n    };\n    return SiblingFilter;\n}(RangeFilter));\nexport default SiblingFilter;\n//# sourceMappingURL=sibling-filter.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport Action from '../base';\nimport { getDelegationObject, getElements, getElementValue, getScaleByField, isList, isSlider, isMask, getMaskedElements } from '../util';\n/**\n * 元素过滤的 Action，控制元素的显示隐藏\n * @ignore\n */\nvar ElementFilter = /** @class */ (function (_super) {\n    __extends(ElementFilter, _super);\n    function ElementFilter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 过滤\n     */\n    ElementFilter.prototype.filter = function () {\n        var delegateObject = getDelegationObject(this.context);\n        var view = this.context.view;\n        var elements = getElements(view);\n        if (isMask(this.context)) {\n            var maskElements_1 = getMaskedElements(this.context, 10);\n            if (maskElements_1) {\n                each(elements, function (el) {\n                    if (maskElements_1.includes(el)) {\n                        el.show();\n                    }\n                    else {\n                        el.hide();\n                    }\n                });\n            }\n        }\n        else if (delegateObject) {\n            var component = delegateObject.component;\n            var field_1 = component.get('field');\n            // 列表类的组件能够触发\n            if (isList(delegateObject)) {\n                if (field_1) {\n                    var unCheckedItems = component.getItemsByState('unchecked');\n                    var scale_1 = getScaleByField(view, field_1);\n                    var names_1 = unCheckedItems.map(function (item) { return item.name; });\n                    // 直接控制显示、隐藏\n                    each(elements, function (el) {\n                        var value = getElementValue(el, field_1);\n                        var text = scale_1.getText(value);\n                        if (names_1.indexOf(text) >= 0) {\n                            el.hide();\n                        }\n                        else {\n                            el.show();\n                        }\n                    });\n                }\n            }\n            else if (isSlider(delegateObject)) {\n                var range = component.getValue();\n                var min_1 = range[0], max_1 = range[1];\n                each(elements, function (el) {\n                    var value = getElementValue(el, field_1);\n                    if (value >= min_1 && value <= max_1) {\n                        el.show();\n                    }\n                    else {\n                        el.hide();\n                    }\n                });\n            }\n        }\n    };\n    /**\n     * 清除过滤\n     */\n    ElementFilter.prototype.clear = function () {\n        var elements = getElements(this.context.view);\n        each(elements, function (el) {\n            el.show();\n        });\n    };\n    /**\n     * 恢复发生的过滤，保持同 data-filter 命名的一致\n     */\n    ElementFilter.prototype.reset = function () {\n        this.clear();\n    };\n    return ElementFilter;\n}(Action));\nexport default ElementFilter;\n//# sourceMappingURL=filter.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport Action from \"../base\";\nimport { getElements, getMaskedElements, getSiblingMaskElements, getSilbings, isInRecords, isMask } from \"../util\";\n/**\n * Sibling filter\n * @ignore\n */\nvar SiblingFilter = /** @class */ (function (_super) {\n    __extends(SiblingFilter, _super);\n    function SiblingFilter() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.byRecord = false;\n        return _this;\n    }\n    /**\n     * 过滤隐藏图形\n     */\n    SiblingFilter.prototype.filter = function () {\n        // 仅考虑 mask 导致的过滤\n        if (isMask(this.context)) {\n            if (this.byRecord) {\n                this.filterByRecord();\n            }\n            else {\n                this.filterByBBox();\n            }\n        }\n    };\n    // 根据框选的记录来做过滤\n    SiblingFilter.prototype.filterByRecord = function () {\n        var view = this.context.view;\n        var maskElements = getMaskedElements(this.context, 10);\n        if (!maskElements) {\n            return;\n        }\n        var xFiled = view.getXScale().field;\n        var yField = view.getYScales()[0].field;\n        var records = maskElements.map(function (el) {\n            return el.getModel().data;\n        });\n        var siblings = getSilbings(view);\n        each(siblings, function (sibling) {\n            var elements = getElements(sibling);\n            each(elements, function (el) {\n                var record = el.getModel().data;\n                // records.includes(record) 不生效，应该是数据的引用被改了\n                if (isInRecords(records, record, xFiled, yField)) {\n                    el.show();\n                }\n                else {\n                    el.hide();\n                }\n            });\n        });\n    };\n    // 根据被框选的包围盒做过滤\n    SiblingFilter.prototype.filterByBBox = function () {\n        var _this = this;\n        var view = this.context.view;\n        var siblings = getSilbings(view);\n        each(siblings, function (sibling) {\n            var maskElements = getSiblingMaskElements(_this.context, sibling, 10);\n            var elements = getElements(sibling);\n            if (maskElements) { // mask 过小时返回为 null，不能是空数组，否则同未框选到混淆\n                each(elements, function (el) {\n                    if (maskElements.includes(el)) {\n                        el.show();\n                    }\n                    else {\n                        el.hide();\n                    }\n                });\n            }\n        });\n    };\n    /**\n     * 清理所有隐藏的图形\n     */\n    SiblingFilter.prototype.reset = function () {\n        var siblings = getSilbings(this.context.view);\n        each(siblings, function (sibling) {\n            var elements = getElements(sibling);\n            each(elements, function (el) {\n                el.show();\n            });\n        });\n    };\n    return SiblingFilter;\n}(Action));\nexport default SiblingFilter;\n//# sourceMappingURL=sibling-filter.js.map","import { __assign, __extends } from \"tslib\";\nimport { transform } from '@antv/matrix-util';\nimport { deepMix } from '@antv/util';\nimport { parsePadding } from '../../../util/padding';\nimport Action from '../base';\nvar PADDING_RIGHT = 10;\nvar PADDING_TOP = 5;\n/**\n * Button action\n * @ignore\n */\nvar ButtonAction = /** @class */ (function (_super) {\n    __extends(ButtonAction, _super);\n    function ButtonAction() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.buttonGroup = null;\n        _this.buttonCfg = {\n            name: 'button',\n            text: 'button',\n            textStyle: {\n                x: 0,\n                y: 0,\n                fontSize: 12,\n                fill: '#333333',\n                cursor: 'pointer',\n            },\n            padding: [8, 10],\n            style: {\n                fill: '#f7f7f7',\n                stroke: '#cccccc',\n                cursor: 'pointer',\n            },\n            activeStyle: {\n                fill: '#e6e6e6',\n            },\n        };\n        return _this;\n    }\n    // mix 默认的配置和用户配置\n    ButtonAction.prototype.getButtonCfg = function () {\n        return deepMix(this.buttonCfg, this.cfg);\n    };\n    // 绘制 Button 和 文本\n    ButtonAction.prototype.drawButton = function () {\n        var config = this.getButtonCfg();\n        var group = this.context.view.foregroundGroup.addGroup({\n            name: config.name,\n        });\n        // 添加文本\n        var textShape = group.addShape({\n            type: 'text',\n            name: 'button-text',\n            attrs: __assign({ text: config.text }, config.textStyle),\n        });\n        var textBBox = textShape.getBBox();\n        var padding = parsePadding(config.padding);\n        // 添加背景按钮\n        var buttonShape = group.addShape({\n            type: 'rect',\n            name: 'button-rect',\n            attrs: __assign({ x: textBBox.x - padding[3], y: textBBox.y - padding[0], width: textBBox.width + padding[1] + padding[3], height: textBBox.height + padding[0] + padding[2] }, config.style),\n        });\n        buttonShape.toBack(); // 在后面\n        // active 效果内置\n        group.on('mouseenter', function () {\n            buttonShape.attr(config.activeStyle);\n        });\n        group.on('mouseleave', function () {\n            buttonShape.attr(config.style);\n        });\n        this.buttonGroup = group;\n    };\n    // 重置位置\n    ButtonAction.prototype.resetPosition = function () {\n        var view = this.context.view;\n        var coord = view.getCoordinate();\n        var point = coord.convert({ x: 1, y: 1 }); // 后面直接改成左上角\n        var buttonGroup = this.buttonGroup;\n        var bbox = buttonGroup.getBBox();\n        var matrix = transform(null, [['t', point.x - bbox.width - PADDING_RIGHT, point.y + bbox.height + PADDING_TOP]]);\n        buttonGroup.setMatrix(matrix);\n    };\n    /**\n     * 显示\n     */\n    ButtonAction.prototype.show = function () {\n        if (!this.buttonGroup) {\n            this.drawButton();\n        }\n        this.resetPosition();\n        this.buttonGroup.show();\n    };\n    /**\n     * 隐藏\n     */\n    ButtonAction.prototype.hide = function () {\n        if (this.buttonGroup) {\n            this.buttonGroup.hide();\n        }\n    };\n    /**\n     * 销毁\n     */\n    ButtonAction.prototype.destroy = function () {\n        var buttonGroup = this.buttonGroup;\n        if (buttonGroup) {\n            buttonGroup.remove();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    return ButtonAction;\n}(Action));\nexport default ButtonAction;\n//# sourceMappingURL=button.js.map","import { __extends } from \"tslib\";\nimport Action from '../base';\nimport { distance } from '../util';\nvar DISTANCE = 4; // 移动的最小距离\n/**\n * @ignore\n * View 支持 Drag 的 Action\n */\nvar Drag = /** @class */ (function (_super) {\n    __extends(Drag, _super);\n    function Drag() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        // Action 开始，不等同于 拖拽开始，需要判定移动的范围\n        _this.starting = false;\n        // 拖拽开始\n        _this.dragStart = false;\n        return _this;\n    }\n    /**\n     * 开始\n     */\n    Drag.prototype.start = function () {\n        this.starting = true;\n        this.startPoint = this.context.getCurrentPoint();\n    };\n    /**\n     * 拖拽\n     */\n    Drag.prototype.drag = function () {\n        if (!this.startPoint) {\n            return;\n        }\n        var current = this.context.getCurrentPoint();\n        var view = this.context.view;\n        var event = this.context.event;\n        if (!this.dragStart) {\n            if (distance(current, this.startPoint) > DISTANCE) {\n                view.emit('dragstart', {\n                    target: event.target,\n                    x: event.x,\n                    y: event.y,\n                });\n                this.dragStart = true;\n            }\n        }\n        else {\n            view.emit('drag', {\n                target: event.target,\n                x: event.x,\n                y: event.y,\n            });\n        }\n    };\n    /**\n     * 结束\n     */\n    Drag.prototype.end = function () {\n        if (this.dragStart) {\n            var view = this.context.view;\n            var event_1 = this.context.event;\n            view.emit('dragend', {\n                target: event_1.target,\n                x: event_1.x,\n                y: event_1.y,\n            });\n        }\n        this.starting = false;\n        this.dragStart = false;\n    };\n    return Drag;\n}(Action));\nexport default Drag;\n//# sourceMappingURL=drag.js.map","import { __extends } from \"tslib\";\nimport { transform } from '@antv/matrix-util';\nimport { Action } from '..';\nimport { distance } from '../util';\nvar MIN_DISTANCE = 5;\n/**\n * @ignore\n * View 移动的 Action\n */\nvar Move = /** @class */ (function (_super) {\n    __extends(Move, _super);\n    function Move() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.starting = false;\n        _this.isMoving = false;\n        // private cacheRange = null;\n        _this.startPoint = null;\n        _this.startMatrix = null;\n        return _this;\n    }\n    /**\n     * 开始移动\n     */\n    Move.prototype.start = function () {\n        this.starting = true;\n        this.startPoint = this.context.getCurrentPoint();\n        // 缓存开始时的矩阵，防止反复拖拽\n        this.startMatrix = this.context.view.middleGroup.getMatrix();\n    };\n    /**\n     * 移动\n     */\n    Move.prototype.move = function () {\n        if (!this.starting) {\n            return;\n        }\n        var startPoint = this.startPoint;\n        var currentPoint = this.context.getCurrentPoint();\n        var d = distance(startPoint, currentPoint);\n        if (d > MIN_DISTANCE && !this.isMoving) {\n            this.isMoving = true;\n        }\n        if (this.isMoving) {\n            var view = this.context.view;\n            var matrix = transform(this.startMatrix, [['t', currentPoint.x - startPoint.x, currentPoint.y - startPoint.y]]);\n            view.backgroundGroup.setMatrix(matrix);\n            view.foregroundGroup.setMatrix(matrix);\n            view.middleGroup.setMatrix(matrix);\n        }\n    };\n    /**\n     * 结束移动\n     */\n    Move.prototype.end = function () {\n        if (this.isMoving) {\n            this.isMoving = false;\n        }\n        this.startMatrix = null;\n        this.starting = false;\n        this.startPoint = null;\n    };\n    /**\n     * 回滚\n     */\n    Move.prototype.reset = function () {\n        this.starting = false;\n        this.startPoint = null;\n        this.isMoving = false;\n        var view = this.context.view;\n        view.backgroundGroup.resetMatrix();\n        view.foregroundGroup.resetMatrix();\n        view.middleGroup.resetMatrix();\n        this.isMoving = false;\n    };\n    return Move;\n}(Action));\nexport default Move;\n//# sourceMappingURL=move.js.map","import { __extends } from \"tslib\";\nimport { Action } from '..';\nvar DIM_X = 'x';\nvar DIM_Y = 'y';\n/**\n * Scale translate\n * @ignore\n */\nvar ScaleTranslate = /** @class */ (function (_super) {\n    __extends(ScaleTranslate, _super);\n    function ScaleTranslate() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.dims = [DIM_X, DIM_Y];\n        _this.cfgFields = ['dims'];\n        _this.cacheScaleDefs = {};\n        return _this;\n    }\n    // 是否支持对应字段的平移\n    ScaleTranslate.prototype.hasDim = function (dim) {\n        return this.dims.includes(dim);\n    };\n    ScaleTranslate.prototype.getScale = function (dim) {\n        var view = this.context.view;\n        if (dim === 'x') {\n            return view.getXScale();\n        }\n        else {\n            return view.getYScales()[0];\n        }\n    };\n    ScaleTranslate.prototype.resetDim = function (dim) {\n        var view = this.context.view;\n        if (this.hasDim(dim) && this.cacheScaleDefs[dim]) {\n            var scale = this.getScale(dim);\n            view.scale(scale.field, this.cacheScaleDefs[dim]);\n            this.cacheScaleDefs[dim] = null;\n        }\n    };\n    /**\n     * 回滚\n     */\n    ScaleTranslate.prototype.reset = function () {\n        this.resetDim(DIM_X);\n        this.resetDim(DIM_Y);\n        var view = this.context.view;\n        view.render(true);\n    };\n    return ScaleTranslate;\n}(Action));\nexport default ScaleTranslate;\n//# sourceMappingURL=scale-transform.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport TransformAction from './scale-transform';\n/**\n * 拖拽 Scale 的 Action\n * @ignore\n */\nvar ScaleTranslate = /** @class */ (function (_super) {\n    __extends(ScaleTranslate, _super);\n    function ScaleTranslate() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.startPoint = null;\n        _this.starting = false;\n        _this.startCache = {};\n        return _this;\n    }\n    /**\n     * 开始\n     */\n    ScaleTranslate.prototype.start = function () {\n        var _this = this;\n        this.startPoint = this.context.getCurrentPoint();\n        this.starting = true;\n        var dims = this.dims;\n        each(dims, function (dim) {\n            var scale = _this.getScale(dim);\n            var min = scale.min, max = scale.max, values = scale.values;\n            _this.startCache[dim] = { min: min, max: max, values: values };\n        });\n    };\n    // 平移分类的度量\n    // private translateCategory(dim, scale, normalPoint) {\n    // }\n    /**\n     * 结束\n     */\n    ScaleTranslate.prototype.end = function () {\n        this.startPoint = null;\n        this.starting = false;\n        this.startCache = {};\n    };\n    /**\n     * 平移\n     */\n    ScaleTranslate.prototype.translate = function () {\n        var _this = this;\n        if (!this.starting) {\n            return;\n        }\n        var startPoint = this.startPoint;\n        var coord = this.context.view.getCoordinate();\n        var currentPoint = this.context.getCurrentPoint();\n        var normalStart = coord.invert(startPoint);\n        var noramlCurrent = coord.invert(currentPoint);\n        var dx = noramlCurrent.x - normalStart.x;\n        var dy = noramlCurrent.y - normalStart.y;\n        var view = this.context.view;\n        var dims = this.dims;\n        each(dims, function (dim) {\n            _this.translateDim(dim, { x: dx * -1, y: dy * -1 });\n        });\n        view.render(true);\n    };\n    // 平移度量\n    ScaleTranslate.prototype.translateDim = function (dim, normalPoint) {\n        if (this.hasDim(dim)) {\n            var scale = this.getScale(dim);\n            if (scale.isLinear) {\n                this.translateLinear(dim, scale, normalPoint);\n            }\n            //  else { // 暂时仅处理连续字段\n            // this.translateCategory(dim, scale, normalPoint);\n            // }\n        }\n    };\n    // linear 度量平移\n    ScaleTranslate.prototype.translateLinear = function (dim, scale, normalPoint) {\n        var view = this.context.view;\n        var _a = this.startCache[dim], min = _a.min, max = _a.max;\n        var range = max - min;\n        var d = normalPoint[dim] * range;\n        // 只有第一次缓存，否则无法回滚\n        if (!this.cacheScaleDefs[dim]) {\n            this.cacheScaleDefs[dim] = {\n                // @ts-ignore\n                nice: scale.nice,\n                min: min,\n                max: max,\n            };\n        }\n        view.scale(scale.field, {\n            // @ts-ignore\n            nice: false,\n            min: min + d,\n            max: max + d,\n        });\n    };\n    // 平移分类的度量\n    // private translateCategory(dim, scale, normalPoint) {\n    // }\n    /**\n     * 回滚\n     */\n    ScaleTranslate.prototype.reset = function () {\n        _super.prototype.reset.call(this);\n        this.startPoint = null;\n        this.starting = false;\n    };\n    return ScaleTranslate;\n}(TransformAction));\nexport default ScaleTranslate;\n//# sourceMappingURL=scale-translate.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport TransformAction from './scale-transform';\n/**\n * 缩放 Scale 的 Action\n * @ignore\n */\nvar ScaleTranslate = /** @class */ (function (_super) {\n    __extends(ScaleTranslate, _super);\n    function ScaleTranslate() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.zoomRatio = 0.05;\n        return _this;\n        // 平移分类的度量\n        // private translateCategory(dim, scale, normalPoint) {\n        // }\n    }\n    /**\n     * 缩小\n     */\n    ScaleTranslate.prototype.zoomIn = function () {\n        this.zoom(this.zoomRatio);\n    };\n    ScaleTranslate.prototype.zoom = function (scale) {\n        var _this = this;\n        var dims = this.dims;\n        each(dims, function (dim) {\n            _this.zoomDim(dim, scale);\n        });\n        this.context.view.render(true);\n    };\n    /**\n     * 放大\n     */\n    ScaleTranslate.prototype.zoomOut = function () {\n        this.zoom(-1 * this.zoomRatio);\n    };\n    // 缩放度量\n    ScaleTranslate.prototype.zoomDim = function (dim, dRatio) {\n        if (this.hasDim(dim)) {\n            var scale = this.getScale(dim);\n            if (scale.isLinear) {\n                this.zoomLinear(dim, scale, dRatio);\n            }\n            //  else { // 暂时仅处理连续字段\n            // this.zoomCategory(dim, scale, normalPoint);\n            // }\n        }\n    };\n    // linear 度量平移\n    ScaleTranslate.prototype.zoomLinear = function (dim, scale, dRatio) {\n        var view = this.context.view;\n        // 只有第一次缓存，否则无法回滚\n        if (!this.cacheScaleDefs[dim]) {\n            this.cacheScaleDefs[dim] = {\n                // @ts-ignore\n                nice: scale.nice,\n                min: scale.min,\n                max: scale.max,\n            };\n        }\n        // 使用使用原始度量作为缩放标准\n        var scaleDef = this.cacheScaleDefs[dim];\n        var range = scaleDef.max - scaleDef.min;\n        var min = scale.min, max = scale.max;\n        var d = dRatio * range;\n        var toMin = min - d;\n        var toMax = max + d;\n        var curRange = toMax - toMin;\n        var scaled = curRange / range;\n        if (toMax > toMin && (scaled < 100 && scaled > 0.01)) {\n            view.scale(scale.field, {\n                // @ts-ignore\n                nice: false,\n                min: min - d,\n                max: max + d,\n            });\n        }\n    };\n    return ScaleTranslate;\n}(TransformAction));\nexport default ScaleTranslate;\n//# sourceMappingURL=scale-zoom.js.map","import { isObject, each, get } from '@antv/util';\nimport { polarToCartesian } from '../../../util/graphics';\n/** label text和line距离 4px */\nvar MARGIN = 4;\nfunction antiCollision(labelShapes, labels, lineHeight, plotRange, center, isRight) {\n    // adjust y position of labels to avoid overlapping\n    var overlapping = true;\n    var start = plotRange.start;\n    var end = plotRange.end;\n    var startY = Math.min(start.y, end.y);\n    var totalHeight = Math.abs(start.y - end.y);\n    var i;\n    var maxY = 0;\n    var minY = Number.MIN_VALUE;\n    var boxes = labels.map(function (label) {\n        if (label.y > maxY) {\n            maxY = label.y;\n        }\n        if (label.y < minY) {\n            minY = label.y;\n        }\n        return {\n            size: lineHeight,\n            targets: [label.y - startY],\n        };\n    });\n    minY -= startY;\n    if (maxY - startY > totalHeight) {\n        totalHeight = maxY - startY;\n    }\n    while (overlapping) {\n        /* eslint no-loop-func: 0 */\n        boxes.forEach(function (box) {\n            var target = (Math.min.apply(minY, box.targets) + Math.max.apply(minY, box.targets)) / 2;\n            box.pos = Math.min(Math.max(minY, target - box.size / 2), totalHeight - box.size);\n            // box.pos = Math.max(0, target - box.size / 2);\n        });\n        // detect overlapping and join boxes\n        overlapping = false;\n        i = boxes.length;\n        while (i--) {\n            if (i > 0) {\n                var previousBox = boxes[i - 1];\n                var box = boxes[i];\n                if (previousBox.pos + previousBox.size > box.pos) {\n                    // overlapping\n                    previousBox.size += box.size;\n                    previousBox.targets = previousBox.targets.concat(box.targets);\n                    // overflow, shift up\n                    if (previousBox.pos + previousBox.size > totalHeight) {\n                        previousBox.pos = totalHeight - previousBox.size;\n                    }\n                    boxes.splice(i, 1); // removing box\n                    overlapping = true;\n                }\n            }\n        }\n    }\n    i = 0;\n    // step 4: normalize y and adjust x\n    boxes.forEach(function (b) {\n        var posInCompositeBox = startY + lineHeight / 2; // middle of the label\n        b.targets.forEach(function () {\n            labels[i].y = b.pos + posInCompositeBox;\n            posInCompositeBox += lineHeight;\n            i++;\n        });\n    });\n    var labelsMap = {};\n    for (var _i = 0, labelShapes_1 = labelShapes; _i < labelShapes_1.length; _i++) {\n        var labelShape = labelShapes_1[_i];\n        labelsMap[labelShape.get('id')] = labelShape;\n    }\n    // (x - cx)^2 + (y - cy)^2 = totalR^2\n    labels.forEach(function (label) {\n        var rPow2 = label.r * label.r;\n        var dyPow2 = Math.pow(Math.abs(label.y - center.y), 2);\n        if (rPow2 < dyPow2) {\n            label.x = center.x;\n        }\n        else {\n            var dx = Math.sqrt(rPow2 - dyPow2);\n            if (!isRight) {\n                // left\n                label.x = center.x - dx;\n            }\n            else {\n                // right\n                label.x = center.x + dx;\n            }\n        }\n        // adjust labelShape\n        var labelShape = labelsMap[label.id];\n        labelShape.attr('x', label.x);\n        labelShape.attr('y', label.y);\n    });\n}\nexport function distribute(items, labels, shapes, region) {\n    var offset = items[0] ? items[0].offset : 0;\n    var coordinate = labels[0].get('coordinate');\n    var radius = coordinate.getRadius();\n    var center = coordinate.getCenter();\n    if (offset > 0) {\n        // const lineHeight = get(this.geometry.theme, ['pieLabels', 'labelHeight'], 14);\n        var lineHeight_1 = 14; // TODO\n        var totalR = radius + offset;\n        var totalHeight_1 = totalR * 2 + lineHeight_1 * 2;\n        var plotRange_1 = {\n            start: coordinate.start,\n            end: coordinate.end,\n        };\n        // step 1: separate labels\n        var halves_1 = [\n            [],\n            [],\n        ];\n        items.forEach(function (labelItem) {\n            if (!labelItem) {\n                return;\n            }\n            if (labelItem.textAlign === 'right') {\n                // left\n                halves_1[0].push(labelItem);\n            }\n            else {\n                // right or center will be put on the right side\n                halves_1[1].push(labelItem);\n            }\n        });\n        halves_1.forEach(function (half, index) {\n            // step 2: reduce labels\n            var maxLabelsCountForOneSide = totalHeight_1 / lineHeight_1;\n            if (half.length > maxLabelsCountForOneSide) {\n                half.sort(function (a, b) {\n                    // sort by percentage DESC\n                    return b['..percent'] - a['..percent'];\n                });\n                half.splice(maxLabelsCountForOneSide, half.length - maxLabelsCountForOneSide);\n            }\n            // step 3: distribute position (x and y)\n            half.sort(function (a, b) {\n                // sort by y ASC\n                return a.y - b.y;\n            });\n            antiCollision(labels, half, lineHeight_1, plotRange_1, center, index);\n        });\n    }\n    // 配置 labelLine\n    each(items, function (item) {\n        if (item && item.labelLine) {\n            var distance = item.offset;\n            var angle = item.angle;\n            // 贴近圆周\n            var startPoint = polarToCartesian(center.x, center.y, radius, angle);\n            var innerPoint = polarToCartesian(center.x, center.y, radius + distance / 2, angle);\n            var itemX = item.x + get(item, 'offsetX', 0);\n            var itemY = item.y + get(item, 'offsetY', 0);\n            var endPoint = {\n                x: itemX - Math.cos(angle) * MARGIN,\n                y: itemY - Math.sin(angle) * MARGIN,\n            };\n            if (!isObject(item.labelLine)) {\n                // labelLine: true\n                item.labelLine = {};\n            }\n            item.labelLine.path = [\"M \" + startPoint.x, startPoint.y + \" Q\" + innerPoint.x, innerPoint.y + \" \" + endPoint.x, endPoint.y].join(',');\n        }\n    });\n}\n//# sourceMappingURL=distribute.js.map","import { each } from '@antv/util';\n/**\n * @ignore\n * 根据图形元素以及 label 的 bbox 进行调整，如果 label 超出了 shape 的 bbox 则不展示\n */\nexport function limitInShape(items, labels, shapes, region) {\n    each(labels, function (label, index) {\n        var labelBBox = label.getCanvasBBox(); // 文本有可能发生旋转\n        var shapeBBox = shapes[index].getBBox();\n        if (labelBBox.minX < shapeBBox.minX ||\n            labelBBox.minY < shapeBBox.minY ||\n            labelBBox.maxX > shapeBBox.maxX ||\n            labelBBox.maxY > shapeBBox.maxY) {\n            label.remove(true); // 超出则不展示\n        }\n    });\n}\n//# sourceMappingURL=limit-in-shape.js.map","import { each } from '@antv/util';\nimport { translate } from '../../../util/transform';\n/**\n * @ignore\n * 将 label 限制在画布范围内，简单得将超出画布的 label 往画布内调整\n * @param labels\n * @param cfg\n */\nexport function limitInCanvas(items, labels, shapes, region) {\n    each(labels, function (label) {\n        var regionMinX = region.minX, regionMinY = region.minY, regionMaxX = region.maxX, regionMaxY = region.maxY;\n        var _a = label.getCanvasBBox(), minX = _a.minX, minY = _a.minY, maxX = _a.maxX, maxY = _a.maxY, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        var finalX = x;\n        var finalY = y;\n        if (minX < regionMinX || maxX < regionMinX) {\n            // 超出左侧\n            finalX = regionMinX;\n        }\n        if (minY < regionMinY || maxY < regionMinY) {\n            // 超出顶部\n            finalY = regionMinY;\n        }\n        if (minX > regionMaxX) {\n            // 整体超出右侧\n            finalX = regionMaxX - width;\n        }\n        else if (maxX > regionMaxX) {\n            // 超出右侧\n            finalX = finalX - (maxX - regionMaxX);\n        }\n        if (minY > regionMaxY) {\n            // 整体超出顶部\n            finalY = regionMaxY - height;\n        }\n        else if (maxY > regionMaxY) {\n            // 超出底部\n            finalY = finalY - (maxY - regionMaxY);\n        }\n        if (finalX !== x || finalY !== y) {\n            translate(label, finalX - x, finalY - y);\n        }\n    });\n}\n//# sourceMappingURL=limit-in-canvas.js.map","import { isNil } from '@antv/util';\n/**\n * @ignore\n * 单个 shape 动画\n * 渐现动画\n * @param shape 执行动画的图形元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function fadeIn(shape, animateCfg, cfg) {\n    var endState = {\n        fillOpacity: isNil(shape.attr('fillOpacity')) ? 1 : shape.attr('fillOpacity'),\n        strokeOpacity: isNil(shape.attr('strokeOpacity')) ? 1 : shape.attr('strokeOpacity'),\n        opacity: isNil(shape.attr('opacity')) ? 1 : shape.attr('opacity'),\n    };\n    shape.attr({\n        fillOpacity: 0,\n        strokeOpacity: 0,\n        opacity: 0,\n    });\n    shape.animate(endState, animateCfg);\n}\n/**\n * @ignore\n * 单个 shape 动画\n * 渐隐动画\n * @param shape 执行动画的图形元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function fadeOut(shape, animateCfg, cfg) {\n    var endState = {\n        fillOpacity: 0,\n        strokeOpacity: 0,\n        opacity: 0,\n    };\n    var easing = animateCfg.easing, duration = animateCfg.duration, delay = animateCfg.delay;\n    shape.animate(endState, duration, easing, function () {\n        shape.remove(true);\n    }, delay);\n}\n//# sourceMappingURL=fade.js.map","import { doScaleAnimate } from './util';\n/**\n * @ignore\n * 入场动画\n * x 方向的生长\n * @param element 执行动画的元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function growInX(element, animateCfg, cfg) {\n    var coordinate = cfg.coordinate, minYPoint = cfg.minYPoint;\n    doScaleAnimate(element, animateCfg, coordinate, minYPoint, 'x');\n}\n/**\n * @ignore\n * 入场动画\n * y 轴方向上的生长\n * @param element 执行动画的元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function growInY(element, animateCfg, cfg) {\n    var coordinate = cfg.coordinate, minYPoint = cfg.minYPoint;\n    doScaleAnimate(element, animateCfg, coordinate, minYPoint, 'y');\n}\n/**\n * @ignore\n * 入场\n * 中心点的向四周的生长动画\n * @param element 执行动画的元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function growInXY(element, animateCfg, cfg) {\n    var coordinate = cfg.coordinate, minYPoint = cfg.minYPoint;\n    doScaleAnimate(element, animateCfg, coordinate, minYPoint, 'xy');\n}\n//# sourceMappingURL=grow-in.js.map","import { transform } from '@antv/matrix-util';\n/**\n * @ignore\n * 沿着 x 方向放大的动画\n * @param shape\n * @param animateCfg\n * @param shapeModel\n */\nexport function scaleInX(shape, animateCfg, cfg) {\n    var box = shape.getBBox();\n    var mappingData = shape.get('origin').mappingData;\n    var points = mappingData.points;\n    // x 数值如果为负值，那么应该从右往左生长\n    var x = points[0].y - points[1].y > 0 ? box.maxX : box.minX;\n    var y = (box.minY + box.maxY) / 2;\n    shape.applyToMatrix([x, y, 1]);\n    var matrix = transform(shape.getMatrix(), [\n        ['t', -x, -y],\n        ['s', 0.01, 1],\n        ['t', x, y],\n    ]);\n    shape.setMatrix(matrix);\n    shape.animate({\n        matrix: transform(shape.getMatrix(), [\n            ['t', -x, -y],\n            ['s', 100, 1],\n            ['t', x, y],\n        ]),\n    }, animateCfg);\n}\n/**\n * @ignore\n * 沿着 y 方向放大的动画\n * @param shape\n * @param animateCfg\n * @param shapeModel\n */\nexport function scaleInY(shape, animateCfg, cfg) {\n    var box = shape.getBBox();\n    var mappingData = shape.get('origin').mappingData;\n    var x = (box.minX + box.maxX) / 2;\n    var points = mappingData.points;\n    // 数值如果为负值，那么应该从上往下生长，通过 shape 的关键点进行判断\n    var y = points[0].y - points[1].y <= 0 ? box.maxY : box.minY;\n    shape.applyToMatrix([x, y, 1]);\n    var matrix = transform(shape.getMatrix(), [\n        ['t', -x, -y],\n        ['s', 1, 0.01],\n        ['t', x, y],\n    ]);\n    shape.setMatrix(matrix);\n    shape.animate({\n        matrix: transform(shape.getMatrix(), [\n            ['t', -x, -y],\n            ['s', 1, 100],\n            ['t', x, y],\n        ]),\n    }, animateCfg);\n}\n//# sourceMappingURL=scale-in.js.map","import { __assign } from \"tslib\";\nimport { getCoordinateClipCfg } from '../../util/coordinate';\n/**\n * @ignore\n * 整体动画\n * 划入入场动画效果\n * @todo 放两张直角坐标系和极坐标系的图\n * @param element 参与动画的图形元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function waveIn(element, animateCfg, cfg) {\n    var _a = getCoordinateClipCfg(cfg.coordinate, 20), type = _a.type, startState = _a.startState, endState = _a.endState; // 根据坐标系类型获取整体的剪切区域配置信息\n    var clipShape = element.setClip({\n        type: type,\n        attrs: startState,\n    }); // 为 shape 设置剪切区域\n    // \b对剪切图形做动画\n    clipShape.animate(endState, __assign(__assign({}, animateCfg), { callback: function () {\n            if (element && !element.get('destroyed')) {\n                element.set('clipShape', null);\n            }\n            clipShape.remove(true); // 动画结束需要将剪切图形销毁\n        } }));\n}\n//# sourceMappingURL=wave-in.js.map","/**\n * @ignore\n * 坐标移动动画\n * @param shape 图形\n * @param animateCfg\n * @param cfg\n */\nexport function positionUpdate(shape, animateCfg, cfg) {\n    var toAttrs = cfg.toAttrs;\n    // @ts-ignore\n    var x = toAttrs.x;\n    // @ts-ignore\n    var y = toAttrs.y;\n    // @ts-ignore\n    delete toAttrs.x;\n    // @ts-ignore\n    delete toAttrs.y;\n    shape.attr(toAttrs);\n    shape.animate({\n        x: x,\n        y: y,\n    }, animateCfg);\n}\n//# sourceMappingURL=position-update.js.map","/**\n * @ignore\n * 入场动画\n * path 的入场动画\n * @param element 执行动画的元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function pathIn(element, animateCfg, cfg) {\n    // @ts-ignore\n    var length = element.getTotalLength();\n    // 设置虚线样式\n    element.attr('lineDash', [length]);\n    element.animate(function (ratio) {\n        return {\n            // 对虚线偏移量做动画\n            lineDashOffset: (1 - ratio) * length,\n        };\n    }, animateCfg);\n}\n//# sourceMappingURL=path-in.js.map","/**\n * Parse or format dates\n * @class fecha\n */\nvar fecha = {};\nvar token = /d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\\1?|[aA]|\"[^\"]*\"|'[^']*'/g;\nvar twoDigits = '\\\\d\\\\d?';\nvar threeDigits = '\\\\d{3}';\nvar fourDigits = '\\\\d{4}';\nvar word = '[^\\\\s]+';\nvar literal = /\\[([^]*?)\\]/gm;\nvar noop = function () {\n};\n\nfunction regexEscape(str) {\n  return str.replace( /[|\\\\{()[^$+*?.-]/g, '\\\\$&');\n}\n\nfunction shorten(arr, sLen) {\n  var newArr = [];\n  for (var i = 0, len = arr.length; i < len; i++) {\n    newArr.push(arr[i].substr(0, sLen));\n  }\n  return newArr;\n}\n\nfunction monthUpdate(arrName) {\n  return function (d, v, i18n) {\n    var index = i18n[arrName].indexOf(v.charAt(0).toUpperCase() + v.substr(1).toLowerCase());\n    if (~index) {\n      d.month = index;\n    }\n  };\n}\n\nfunction pad(val, len) {\n  val = String(val);\n  len = len || 2;\n  while (val.length < len) {\n    val = '0' + val;\n  }\n  return val;\n}\n\nvar dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\nvar monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\nvar monthNamesShort = shorten(monthNames, 3);\nvar dayNamesShort = shorten(dayNames, 3);\nfecha.i18n = {\n  dayNamesShort: dayNamesShort,\n  dayNames: dayNames,\n  monthNamesShort: monthNamesShort,\n  monthNames: monthNames,\n  amPm: ['am', 'pm'],\n  DoFn: function DoFn(D) {\n    return D + ['th', 'st', 'nd', 'rd'][D % 10 > 3 ? 0 : (D - D % 10 !== 10) * D % 10];\n  }\n};\n\nvar formatFlags = {\n  D: function(dateObj) {\n    return dateObj.getDate();\n  },\n  DD: function(dateObj) {\n    return pad(dateObj.getDate());\n  },\n  Do: function(dateObj, i18n) {\n    return i18n.DoFn(dateObj.getDate());\n  },\n  d: function(dateObj) {\n    return dateObj.getDay();\n  },\n  dd: function(dateObj) {\n    return pad(dateObj.getDay());\n  },\n  ddd: function(dateObj, i18n) {\n    return i18n.dayNamesShort[dateObj.getDay()];\n  },\n  dddd: function(dateObj, i18n) {\n    return i18n.dayNames[dateObj.getDay()];\n  },\n  M: function(dateObj) {\n    return dateObj.getMonth() + 1;\n  },\n  MM: function(dateObj) {\n    return pad(dateObj.getMonth() + 1);\n  },\n  MMM: function(dateObj, i18n) {\n    return i18n.monthNamesShort[dateObj.getMonth()];\n  },\n  MMMM: function(dateObj, i18n) {\n    return i18n.monthNames[dateObj.getMonth()];\n  },\n  YY: function(dateObj) {\n    return pad(String(dateObj.getFullYear()), 4).substr(2);\n  },\n  YYYY: function(dateObj) {\n    return pad(dateObj.getFullYear(), 4);\n  },\n  h: function(dateObj) {\n    return dateObj.getHours() % 12 || 12;\n  },\n  hh: function(dateObj) {\n    return pad(dateObj.getHours() % 12 || 12);\n  },\n  H: function(dateObj) {\n    return dateObj.getHours();\n  },\n  HH: function(dateObj) {\n    return pad(dateObj.getHours());\n  },\n  m: function(dateObj) {\n    return dateObj.getMinutes();\n  },\n  mm: function(dateObj) {\n    return pad(dateObj.getMinutes());\n  },\n  s: function(dateObj) {\n    return dateObj.getSeconds();\n  },\n  ss: function(dateObj) {\n    return pad(dateObj.getSeconds());\n  },\n  S: function(dateObj) {\n    return Math.round(dateObj.getMilliseconds() / 100);\n  },\n  SS: function(dateObj) {\n    return pad(Math.round(dateObj.getMilliseconds() / 10), 2);\n  },\n  SSS: function(dateObj) {\n    return pad(dateObj.getMilliseconds(), 3);\n  },\n  a: function(dateObj, i18n) {\n    return dateObj.getHours() < 12 ? i18n.amPm[0] : i18n.amPm[1];\n  },\n  A: function(dateObj, i18n) {\n    return dateObj.getHours() < 12 ? i18n.amPm[0].toUpperCase() : i18n.amPm[1].toUpperCase();\n  },\n  ZZ: function(dateObj) {\n    var o = dateObj.getTimezoneOffset();\n    return (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4);\n  }\n};\n\nvar parseFlags = {\n  D: [twoDigits, function (d, v) {\n    d.day = v;\n  }],\n  Do: [twoDigits + word, function (d, v) {\n    d.day = parseInt(v, 10);\n  }],\n  M: [twoDigits, function (d, v) {\n    d.month = v - 1;\n  }],\n  YY: [twoDigits, function (d, v) {\n    var da = new Date(), cent = +('' + da.getFullYear()).substr(0, 2);\n    d.year = '' + (v > 68 ? cent - 1 : cent) + v;\n  }],\n  h: [twoDigits, function (d, v) {\n    d.hour = v;\n  }],\n  m: [twoDigits, function (d, v) {\n    d.minute = v;\n  }],\n  s: [twoDigits, function (d, v) {\n    d.second = v;\n  }],\n  YYYY: [fourDigits, function (d, v) {\n    d.year = v;\n  }],\n  S: ['\\\\d', function (d, v) {\n    d.millisecond = v * 100;\n  }],\n  SS: ['\\\\d{2}', function (d, v) {\n    d.millisecond = v * 10;\n  }],\n  SSS: [threeDigits, function (d, v) {\n    d.millisecond = v;\n  }],\n  d: [twoDigits, noop],\n  ddd: [word, noop],\n  MMM: [word, monthUpdate('monthNamesShort')],\n  MMMM: [word, monthUpdate('monthNames')],\n  a: [word, function (d, v, i18n) {\n    var val = v.toLowerCase();\n    if (val === i18n.amPm[0]) {\n      d.isPm = false;\n    } else if (val === i18n.amPm[1]) {\n      d.isPm = true;\n    }\n  }],\n  ZZ: ['[^\\\\s]*?[\\\\+\\\\-]\\\\d\\\\d:?\\\\d\\\\d|[^\\\\s]*?Z', function (d, v) {\n    var parts = (v + '').match(/([+-]|\\d\\d)/gi), minutes;\n\n    if (parts) {\n      minutes = +(parts[1] * 60) + parseInt(parts[2], 10);\n      d.timezoneOffset = parts[0] === '+' ? minutes : -minutes;\n    }\n  }]\n};\nparseFlags.dd = parseFlags.d;\nparseFlags.dddd = parseFlags.ddd;\nparseFlags.DD = parseFlags.D;\nparseFlags.mm = parseFlags.m;\nparseFlags.hh = parseFlags.H = parseFlags.HH = parseFlags.h;\nparseFlags.MM = parseFlags.M;\nparseFlags.ss = parseFlags.s;\nparseFlags.A = parseFlags.a;\n\n\n// Some common format strings\nfecha.masks = {\n  default: 'ddd MMM DD YYYY HH:mm:ss',\n  shortDate: 'M/D/YY',\n  mediumDate: 'MMM D, YYYY',\n  longDate: 'MMMM D, YYYY',\n  fullDate: 'dddd, MMMM D, YYYY',\n  shortTime: 'HH:mm',\n  mediumTime: 'HH:mm:ss',\n  longTime: 'HH:mm:ss.SSS'\n};\n\n/***\n * Format a date\n * @method format\n * @param {Date|number} dateObj\n * @param {string} mask Format of the date, i.e. 'mm-dd-yy' or 'shortDate'\n */\nfecha.format = function (dateObj, mask, i18nSettings) {\n  var i18n = i18nSettings || fecha.i18n;\n\n  if (typeof dateObj === 'number') {\n    dateObj = new Date(dateObj);\n  }\n\n  if (Object.prototype.toString.call(dateObj) !== '[object Date]' || isNaN(dateObj.getTime())) {\n    throw new Error('Invalid Date in fecha.format');\n  }\n\n  mask = fecha.masks[mask] || mask || fecha.masks['default'];\n\n  var literals = [];\n\n  // Make literals inactive by replacing them with ??\n  mask = mask.replace(literal, function($0, $1) {\n    literals.push($1);\n    return '@@@';\n  });\n  // Apply formatting rules\n  mask = mask.replace(token, function ($0) {\n    return $0 in formatFlags ? formatFlags[$0](dateObj, i18n) : $0.slice(1, $0.length - 1);\n  });\n  // Inline literal values back into the formatted value\n  return mask.replace(/@@@/g, function() {\n    return literals.shift();\n  });\n};\n\n/**\n * Parse a date string into an object, changes - into /\n * @method parse\n * @param {string} dateStr Date string\n * @param {string} format Date parse format\n * @returns {Date|boolean}\n */\nfecha.parse = function (dateStr, format, i18nSettings) {\n  var i18n = i18nSettings || fecha.i18n;\n\n  if (typeof format !== 'string') {\n    throw new Error('Invalid format in fecha.parse');\n  }\n\n  format = fecha.masks[format] || format;\n\n  // Avoid regular expression denial of service, fail early for really long strings\n  // https://www.owasp.org/index.php/Regular_expression_Denial_of_Service_-_ReDoS\n  if (dateStr.length > 1000) {\n    return null;\n  }\n\n  var dateInfo = {};\n  var parseInfo = [];\n  var literals = [];\n  format = format.replace(literal, function($0, $1) {\n    literals.push($1);\n    return '@@@';\n  });\n  var newFormat = regexEscape(format).replace(token, function ($0) {\n    if (parseFlags[$0]) {\n      var info = parseFlags[$0];\n      parseInfo.push(info[1]);\n      return '(' + info[0] + ')';\n    }\n\n    return $0;\n  });\n  newFormat = newFormat.replace(/@@@/g, function() {\n    return literals.shift();\n  });\n  var matches = dateStr.match(new RegExp(newFormat, 'i'));\n  if (!matches) {\n    return null;\n  }\n\n  for (var i = 1; i < matches.length; i++) {\n    parseInfo[i - 1](dateInfo, matches[i], i18n);\n  }\n\n  var today = new Date();\n  if (dateInfo.isPm === true && dateInfo.hour != null && +dateInfo.hour !== 12) {\n    dateInfo.hour = +dateInfo.hour + 12;\n  } else if (dateInfo.isPm === false && +dateInfo.hour === 12) {\n    dateInfo.hour = 0;\n  }\n\n  var date;\n  if (dateInfo.timezoneOffset != null) {\n    dateInfo.minute = +(dateInfo.minute || 0) - +dateInfo.timezoneOffset;\n    date = new Date(Date.UTC(dateInfo.year || today.getFullYear(), dateInfo.month || 0, dateInfo.day || 1,\n      dateInfo.hour || 0, dateInfo.minute || 0, dateInfo.second || 0, dateInfo.millisecond || 0));\n  } else {\n    date = new Date(dateInfo.year || today.getFullYear(), dateInfo.month || 0, dateInfo.day || 1,\n      dateInfo.hour || 0, dateInfo.minute || 0, dateInfo.second || 0, dateInfo.millisecond || 0);\n  }\n  return date;\n};\n\nexport default fecha;\n","import { deepMix } from '@antv/util';\nimport { DEFAULT_GLOBAL_THEME } from './default';\nimport { DEFAULT_DARK_THEME } from './dark';\n\n/** 所有的全局主题 */\nconst GLOBAL_THEME_MAP: Record<string, any> = {\n  default: DEFAULT_GLOBAL_THEME,\n  dark: DEFAULT_DARK_THEME,\n};\n\n/**\n * 注册全局主题\n * @param name\n * @param theme\n */\nexport function registerGlobalTheme(name: string, theme: any): void {\n  const defaultTheme = getGlobalTheme();\n  GLOBAL_THEME_MAP[name.toLowerCase()] = deepMix({}, defaultTheme, theme);\n}\n\n/**\n * 获取默认主题\n * @param name 如果 name 为空，则返回默认的主题，否则返回指定 name 的主题\n */\nexport function getGlobalTheme(name: string = 'default'): any {\n  const theme = GLOBAL_THEME_MAP[name.toLowerCase()];\n  if (theme) {\n    return theme;\n  }\n  // 如没有找到，则使用当前全局主题替代\n  console.warn(\"error in theme: Can't find the theme named %s. Please register theme first.\", name);\n  return DEFAULT_GLOBAL_THEME;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nvar line_1 = require(\"./line\");\nvar bezier_1 = require(\"./bezier\");\nfunction cubicAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t; // t * t * t 的性能大概是 Math.pow(t, 3) 的三倍\n    return onet * onet * onet * p0 + 3 * p1 * t * onet * onet + 3 * p2 * t * t * onet + p3 * t * t * t;\n}\nfunction derivativeAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return 3 * (onet * onet * (p1 - p0) + 2 * onet * t * (p2 - p1) + t * t * (p3 - p2));\n}\nfunction extrema(p0, p1, p2, p3) {\n    var a = -3 * p0 + 9 * p1 - 9 * p2 + 3 * p3;\n    var b = 6 * p0 - 12 * p1 + 6 * p2;\n    var c = 3 * p1 - 3 * p0;\n    var extremas = [];\n    var t1;\n    var t2;\n    var discSqrt;\n    if (util_1.isNumberEqual(a, 0)) {\n        if (!util_1.isNumberEqual(b, 0)) {\n            t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                extremas.push(t1);\n            }\n        }\n    }\n    else {\n        var disc = b * b - 4 * a * c;\n        if (util_1.isNumberEqual(disc, 0)) {\n            extremas.push(-b / (2 * a));\n        }\n        else if (disc > 0) {\n            discSqrt = Math.sqrt(disc);\n            t1 = (-b + discSqrt) / (2 * a);\n            t2 = (-b - discSqrt) / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                extremas.push(t1);\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                extremas.push(t2);\n            }\n        }\n    }\n    return extremas;\n}\n// 分割贝塞尔曲线\nfunction divideCubic(x1, y1, x2, y2, x3, y3, x4, y4, t) {\n    // 划分点\n    var xt = cubicAt(x1, x2, x3, x4, t);\n    var yt = cubicAt(y1, y2, y3, y4, t);\n    // 计算两点之间的差值点\n    var c1 = line_1.default.pointAt(x1, y1, x2, y2, t);\n    var c2 = line_1.default.pointAt(x2, y2, x3, y3, t);\n    var c3 = line_1.default.pointAt(x3, y3, x4, y4, t);\n    var c12 = line_1.default.pointAt(c1.x, c1.y, c2.x, c2.y, t);\n    var c23 = line_1.default.pointAt(c2.x, c2.y, c3.x, c3.y, t);\n    return [\n        [x1, y1, c1.x, c1.y, c12.x, c12.y, xt, yt],\n        [xt, yt, c23.x, c23.y, c3.x, c3.y, x4, y4],\n    ];\n}\n// 使用迭代法取贝塞尔曲线的长度，二阶和三阶分开写，更清晰和便于调试\nfunction cubicLength(x1, y1, x2, y2, x3, y3, x4, y4, iterationCount) {\n    if (iterationCount === 0) {\n        return bezier_1.snapLength([x1, x2, x3, x4], [y1, y2, y3, y4]);\n    }\n    var cubics = divideCubic(x1, y1, x2, y2, x3, y3, x4, y4, 0.5);\n    var left = cubics[0];\n    var right = cubics[1];\n    left.push(iterationCount - 1);\n    right.push(iterationCount - 1);\n    return cubicLength.apply(null, left) + cubicLength.apply(null, right);\n}\nexports.default = {\n    extrema: extrema,\n    box: function (x1, y1, x2, y2, x3, y3, x4, y4) {\n        var xArr = [x1, x4];\n        var yArr = [y1, y4];\n        var xExtrema = extrema(x1, x2, x3, x4);\n        var yExtrema = extrema(y1, y2, y3, y4);\n        for (var i = 0; i < xExtrema.length; i++) {\n            xArr.push(cubicAt(x1, x2, x3, x4, xExtrema[i]));\n        }\n        for (var i = 0; i < yExtrema.length; i++) {\n            yArr.push(cubicAt(y1, y2, y3, y4, yExtrema[i]));\n        }\n        return util_1.getBBoxByArray(xArr, yArr);\n    },\n    length: function (x1, y1, x2, y2, x3, y3, x4, y4) {\n        // 迭代三次，划分成 8 段求长度\n        return cubicLength(x1, y1, x2, y2, x3, y3, x4, y4, 3);\n    },\n    nearestPoint: function (x1, y1, x2, y2, x3, y3, x4, y4, x0, y0) {\n        return bezier_1.nearestPoint([x1, x2, x3, x4], [y1, y2, y3, y4], x0, y0, cubicAt);\n    },\n    pointDistance: function (x1, y1, x2, y2, x3, y3, x4, y4, x0, y0) {\n        var point = this.nearestPoint(x1, y1, x2, y2, x3, y3, x4, y4, x0, y0);\n        return util_1.distance(point.x, point.y, x0, y0);\n    },\n    interpolationAt: cubicAt,\n    pointAt: function (x1, y1, x2, y2, x3, y3, x4, y4, t) {\n        return {\n            x: cubicAt(x1, x2, x3, x4, t),\n            y: cubicAt(y1, y2, y3, y4, t),\n        };\n    },\n    divide: function (x1, y1, x2, y2, x3, y3, x4, y4, t) {\n        return divideCubic(x1, y1, x2, y2, x3, y3, x4, y4, t);\n    },\n    tangentAngle: function (x1, y1, x2, y2, x3, y3, x4, y4, t) {\n        var dx = derivativeAt(x1, x2, x3, x4, t);\n        var dy = derivativeAt(y1, y2, y3, y4, t);\n        return util_1.piMod(Math.atan2(dy, dx));\n    },\n};\n//# sourceMappingURL=cubic.js.map","import { each } from '@antv/util';\nimport { View } from '../dependents';\nimport BBox from '../util/bbox';\nimport Interaction from './core';\nimport ViewLayer from '../base/view-layer';\nimport { IInteractionConfig } from '../interface/config';\n\nexport interface InteractionCtor {\n  new (\n    cfg: { view: View },\n    viewLayer: ViewLayer<any>,\n    interactionRange?: BBox,\n    interaction?: IInteractionConfig\n  ): BaseInteraction;\n  getInteractionRange(layerRange: BBox, interaction?: IInteractionConfig): BBox;\n}\n\ninterface InteractionMap {\n  [type: string]: InteractionCtor;\n}\n\nexport default abstract class BaseInteraction extends Interaction {\n  public static registerInteraction(type: string, ctor: any) {\n    BaseInteraction.GLOBAL_INTERACTION_MAP[type] = ctor;\n  }\n\n  public static registerPlotInteraction(plotType: string, type: string, ctor: any) {\n    if (!BaseInteraction.PLOT_INTERACTION_MAP[plotType]) {\n      BaseInteraction.PLOT_INTERACTION_MAP[plotType] = {};\n    }\n    BaseInteraction.PLOT_INTERACTION_MAP[plotType][type] = ctor;\n  }\n\n  public static getInteraction(type: string, plotType?: string): InteractionCtor | undefined {\n    if (plotType && BaseInteraction.PLOT_INTERACTION_MAP[plotType] && BaseInteraction[plotType][type]) {\n      return BaseInteraction.PLOT_INTERACTION_MAP[plotType][type];\n    }\n    return BaseInteraction.GLOBAL_INTERACTION_MAP[type];\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public static getInteractionRange(layerRange: BBox, interaction?: IInteractionConfig): BBox | undefined {\n    return undefined;\n  }\n\n  private static GLOBAL_INTERACTION_MAP: InteractionMap = {};\n  private static PLOT_INTERACTION_MAP: { [plot: string]: InteractionMap } = {};\n\n  public type: string;\n  public cfg: any;\n  private interactionConfig: IInteractionConfig;\n  private interactionRange: BBox;\n  private viewLayer: ViewLayer<any>;\n  private disposables: (() => void)[];\n\n  constructor(\n    cfg: { view: View },\n    viewLayer: ViewLayer<any>,\n    interactionRange?: BBox,\n    interaction?: IInteractionConfig\n  ) {\n    super(cfg);\n    this.viewLayer = viewLayer;\n    this.interactionRange = interactionRange;\n    this.interactionConfig = interaction;\n    this.disposables = [];\n    this.render();\n  }\n\n  public destroy(): void {\n    each(this.disposables, (fn) => {\n      fn();\n    });\n    this.disposables = [];\n    this.clear();\n    super.destroy();\n  }\n\n  protected getViewLayer(): ViewLayer<any> {\n    return this.viewLayer;\n  }\n\n  protected getRange(): BBox | undefined {\n    return this.interactionRange;\n  }\n\n  protected getInteractionConfig(): IInteractionConfig | undefined {\n    return this.interactionConfig;\n  }\n\n  protected addDisposable(fn: () => void) {\n    this.disposables.push(fn);\n  }\n\n  protected render(): void {\n    return;\n  }\n\n  protected abstract clear(): void;\n}\n","import { IShape } from '@antv/g-base';\n\nexport default function textHide(shape: IShape) {\n  shape.attr('text', '');\n}\n","import { __spreadArrays } from \"tslib\";\nimport { mat3, vec3 } from '@antv/matrix-util';\nimport * as _ from '@antv/util';\n/**\n * Coordinate Base Class\n */\nvar Coordinate = /** @class */ (function () {\n    function Coordinate(cfg) {\n        // 自身属性\n        this.type = 'coordinate';\n        this.isRect = false;\n        this.isHelix = false;\n        this.isPolar = false;\n        this.isReflectX = false;\n        this.isReflectY = false;\n        var start = cfg.start, end = cfg.end, _a = cfg.matrix, matrix = _a === void 0 ? [1, 0, 0, 0, 1, 0, 0, 0, 1] : _a, _b = cfg.isTransposed, isTransposed = _b === void 0 ? false : _b;\n        this.start = start;\n        this.end = end;\n        this.matrix = matrix;\n        this.originalMatrix = __spreadArrays(matrix); // 去除引用\n        this.isTransposed = isTransposed;\n    }\n    /**\n     * 初始化流程\n     */\n    Coordinate.prototype.initial = function () {\n        // center、width、height\n        this.center = {\n            x: (this.start.x + this.end.x) / 2,\n            y: (this.start.y + this.end.y) / 2,\n        };\n        this.width = Math.abs(this.end.x - this.start.x);\n        this.height = Math.abs(this.end.y - this.start.y);\n    };\n    /**\n     * 更新配置\n     * @param cfg\n     */\n    Coordinate.prototype.update = function (cfg) {\n        _.assign(this, cfg);\n        this.initial();\n    };\n    Coordinate.prototype.convertDim = function (percent, dim) {\n        var _a;\n        var _b = this[dim], start = _b.start, end = _b.end;\n        // 交换\n        if (this.isReflect(dim)) {\n            _a = [end, start], start = _a[0], end = _a[1];\n        }\n        return start + percent * (end - start);\n    };\n    Coordinate.prototype.invertDim = function (value, dim) {\n        var _a;\n        var _b = this[dim], start = _b.start, end = _b.end;\n        // 交换\n        if (this.isReflect(dim)) {\n            _a = [end, start], start = _a[0], end = _a[1];\n        }\n        return (value - start) / (end - start);\n    };\n    /**\n     * 将坐标点进行矩阵变换\n     * @param x   对应 x 轴画布坐标\n     * @param y   对应 y 轴画布坐标\n     * @param tag 默认为 0，可取值 0, 1\n     * @return    返回变换后的三阶向量 [x, y, z]\n     */\n    Coordinate.prototype.applyMatrix = function (x, y, tag) {\n        if (tag === void 0) { tag = 0; }\n        var matrix = this.matrix;\n        var vector = [x, y, tag];\n        vec3.transformMat3(vector, vector, matrix);\n        return vector;\n    };\n    /**\n     * 将坐标点进行矩阵逆变换\n     * @param x   对应 x 轴画布坐标\n     * @param y   对应 y 轴画布坐标\n     * @param tag 默认为 0，可取值 0, 1\n     * @return    返回矩阵逆变换后的三阶向量 [x, y, z]\n     */\n    Coordinate.prototype.invertMatrix = function (x, y, tag) {\n        if (tag === void 0) { tag = 0; }\n        var matrix = this.matrix;\n        var inverted = mat3.invert([], matrix);\n        var vector = [x, y, tag];\n        if (inverted) {\n            // 如果为空则不进行矩阵变化，防止报错\n            vec3.transformMat3(vector, vector, inverted);\n        }\n        return vector;\n    };\n    /**\n     * 将归一化的坐标点数据转换为画布坐标，并根据坐标系当前矩阵进行变换\n     * @param point 归一化的坐标点\n     * @return      返回进行矩阵变换后的画布坐标\n     */\n    Coordinate.prototype.convert = function (point) {\n        var _a = this.convertPoint(point), x = _a.x, y = _a.y;\n        var vector = this.applyMatrix(x, y, 1);\n        return {\n            x: vector[0],\n            y: vector[1],\n        };\n    };\n    /**\n     * 将进行过矩阵变换画布坐标转换为归一化坐标\n     * @param point 画布坐标\n     * @return      返回归一化的坐标点\n     */\n    Coordinate.prototype.invert = function (point) {\n        var vector = this.invertMatrix(point.x, point.y, 1);\n        return this.invertPoint({\n            x: vector[0],\n            y: vector[1],\n        });\n    };\n    /**\n     * 坐标系旋转变换\n     * @param  radian 旋转弧度\n     * @return        返回坐标系对象\n     */\n    Coordinate.prototype.rotate = function (radian) {\n        var matrix = this.matrix;\n        var center = this.center;\n        mat3.translate(matrix, matrix, [-center.x, -center.y]);\n        mat3.rotate(matrix, matrix, radian);\n        mat3.translate(matrix, matrix, [center.x, center.y]);\n        return this;\n    };\n    /**\n     * 坐标系反射变换\n     * @param dim 反射维度\n     * @return    返回坐标系对象\n     */\n    Coordinate.prototype.reflect = function (dim) {\n        if (dim === 'x') {\n            this.isReflectX = !this.isReflectX;\n        }\n        else {\n            this.isReflectY = !this.isReflectY;\n        }\n        return this;\n    };\n    /**\n     * 坐标系比例变换\n     * @param s1 x 方向缩放比例\n     * @param s2 y 方向缩放比例\n     * @return     返回坐标系对象\n     */\n    Coordinate.prototype.scale = function (s1, s2) {\n        var matrix = this.matrix;\n        var center = this.center;\n        mat3.translate(matrix, matrix, [-center.x, -center.y]);\n        mat3.scale(matrix, matrix, [s1, s2]);\n        mat3.translate(matrix, matrix, [center.x, center.y]);\n        return this;\n    };\n    /**\n     * 坐标系平移变换\n     * @param x x 方向平移像素\n     * @param y y 方向平移像素\n     * @return    返回坐标系对象\n     */\n    Coordinate.prototype.translate = function (x, y) {\n        var matrix = this.matrix;\n        mat3.translate(matrix, matrix, [x, y]);\n        return this;\n    };\n    /**\n     * 将坐标系 x y 两个轴进行转置\n     * @return 返回坐标系对象\n     */\n    Coordinate.prototype.transpose = function () {\n        this.isTransposed = !this.isTransposed;\n        return this;\n    };\n    Coordinate.prototype.getCenter = function () {\n        return this.center;\n    };\n    Coordinate.prototype.getWidth = function () {\n        return this.width;\n    };\n    Coordinate.prototype.getHeight = function () {\n        return this.height;\n    };\n    Coordinate.prototype.getRadius = function () {\n        return this.radius;\n    };\n    /**\n     * whether has reflect\n     * @param dim\n     */\n    Coordinate.prototype.isReflect = function (dim) {\n        return dim === 'x' ? this.isReflectX : this.isReflectY;\n    };\n    /**\n     * 重置 matrix\n     * @param matrix 如果传入，则使用，否则使用构造函数中传入的默认 matrix\n     */\n    Coordinate.prototype.resetMatrix = function (matrix) {\n        // 去除引用关系\n        this.matrix = matrix ? matrix : __spreadArrays(this.originalMatrix);\n    };\n    return Coordinate;\n}());\nexport default Coordinate;\n//# sourceMappingURL=base.js.map","import { __extends } from \"tslib\";\nimport Coordinate from './base';\n/**\n * 笛卡尔坐标系\n * https://www.zhihu.com/question/20665303\n */\nvar Cartesian = /** @class */ (function (_super) {\n    __extends(Cartesian, _super);\n    function Cartesian(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.isRect = true;\n        _this.type = 'cartesian';\n        _this.initial();\n        return _this;\n    }\n    Cartesian.prototype.initial = function () {\n        _super.prototype.initial.call(this);\n        var start = this.start;\n        var end = this.end;\n        this.x = {\n            start: start.x,\n            end: end.x,\n        };\n        this.y = {\n            start: start.y,\n            end: end.y,\n        };\n    };\n    Cartesian.prototype.convertPoint = function (point) {\n        var _a;\n        var x = point.x, y = point.y;\n        // 交换\n        if (this.isTransposed) {\n            _a = [y, x], x = _a[0], y = _a[1];\n        }\n        return {\n            x: this.convertDim(x, 'x'),\n            y: this.convertDim(y, 'y'),\n        };\n    };\n    Cartesian.prototype.invertPoint = function (point) {\n        var _a;\n        var x = this.invertDim(point.x, 'x');\n        var y = this.invertDim(point.y, 'y');\n        if (this.isTransposed) {\n            _a = [y, x], x = _a[0], y = _a[1];\n        }\n        return { x: x, y: y };\n    };\n    return Cartesian;\n}(Coordinate));\nexport default Cartesian;\n//# sourceMappingURL=cartesian.js.map","import { __extends } from \"tslib\";\nimport { vec2 } from '@antv/matrix-util';\nimport { isNumberEqual } from '@antv/util';\nimport Coordinate from './base';\n/**\n * 螺旋坐标系\n */\nvar Helix = /** @class */ (function (_super) {\n    __extends(Helix, _super);\n    function Helix(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.isHelix = true;\n        _this.type = 'helix';\n        var _a = cfg.startAngle, startAngle = _a === void 0 ? 1.25 * Math.PI : _a, _b = cfg.endAngle, endAngle = _b === void 0 ? 7.25 * Math.PI : _b, _c = cfg.innerRadius, innerRadius = _c === void 0 ? 0 : _c, radius = cfg.radius;\n        _this.startAngle = startAngle;\n        _this.endAngle = endAngle;\n        _this.innerRadius = innerRadius;\n        _this.radius = radius;\n        _this.initial();\n        return _this;\n    }\n    Helix.prototype.initial = function () {\n        _super.prototype.initial.call(this);\n        var index = (this.endAngle - this.startAngle) / (2 * Math.PI) + 1; // 螺线圈数\n        var maxRadius = Math.min(this.width, this.height) / 2;\n        if (this.radius && this.radius >= 0 && this.radius <= 1) {\n            maxRadius = maxRadius * this.radius;\n        }\n        this.d = Math.floor((maxRadius * (1 - this.innerRadius)) / index);\n        this.a = this.d / (Math.PI * 2); // 螺线系数\n        this.x = {\n            start: this.startAngle,\n            end: this.endAngle,\n        };\n        this.y = {\n            start: this.innerRadius * maxRadius,\n            end: this.innerRadius * maxRadius + this.d * 0.99,\n        };\n    };\n    /**\n     * 将百分比数据变成屏幕坐标\n     * @param point 归一化的点坐标\n     * @return      返回对应的屏幕坐标\n     */\n    Helix.prototype.convertPoint = function (point) {\n        var _a;\n        var x = point.x, y = point.y;\n        if (this.isTransposed) {\n            _a = [y, x], x = _a[0], y = _a[1];\n        }\n        var thi = this.convertDim(x, 'x');\n        var r = this.a * thi;\n        var newY = this.convertDim(y, 'y');\n        return {\n            x: this.center.x + Math.cos(thi) * (r + newY),\n            y: this.center.y + Math.sin(thi) * (r + newY),\n        };\n    };\n    /**\n     * 将屏幕坐标点还原成百分比数据\n     * @param point 屏幕坐标\n     * @return      返回对应的归一化后的数据\n     */\n    Helix.prototype.invertPoint = function (point) {\n        var _a;\n        var d = this.d + this.y.start;\n        var v = vec2.subtract([], [point.x, point.y], [this.center.x, this.center.y]);\n        var thi = vec2.angleTo(v, [1, 0], true);\n        var rMin = thi * this.a; // 坐标与原点的连线在第一圈上的交点，最小r值\n        if (vec2.length(v) < rMin) {\n            // 坐标与原点的连线不可能小于最小r值，但不排除因小数计算产生的略小于rMin的情况\n            rMin = vec2.length(v);\n        }\n        var index = Math.floor((vec2.length(v) - rMin) / d); // 当前点位于第index圈\n        thi = 2 * index * Math.PI + thi;\n        var r = this.a * thi;\n        var newY = vec2.length(v) - r;\n        newY = isNumberEqual(newY, 0) ? 0 : newY;\n        var x = this.invertDim(thi, 'x');\n        var y = this.invertDim(newY, 'y');\n        x = isNumberEqual(x, 0) ? 0 : x;\n        y = isNumberEqual(y, 0) ? 0 : y;\n        if (this.isTransposed) {\n            _a = [y, x], x = _a[0], y = _a[1];\n        }\n        return { x: x, y: y };\n    };\n    return Helix;\n}(Coordinate));\nexport default Helix;\n//# sourceMappingURL=helix.js.map","import { __extends } from \"tslib\";\nimport { mat3, vec2, vec3 } from '@antv/matrix-util';\nimport { isNumberEqual } from '@antv/util';\nimport Coordinate from './base';\nvar Polar = /** @class */ (function (_super) {\n    __extends(Polar, _super);\n    function Polar(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.isPolar = true;\n        _this.type = 'polar';\n        var _a = cfg.startAngle, startAngle = _a === void 0 ? -Math.PI / 2 : _a, _b = cfg.endAngle, endAngle = _b === void 0 ? (Math.PI * 3) / 2 : _b, _c = cfg.innerRadius, innerRadius = _c === void 0 ? 0 : _c, radius = cfg.radius;\n        _this.startAngle = startAngle;\n        _this.endAngle = endAngle;\n        _this.innerRadius = innerRadius;\n        _this.radius = radius;\n        _this.initial();\n        return _this;\n    }\n    Polar.prototype.initial = function () {\n        _super.prototype.initial.call(this);\n        while (this.endAngle < this.startAngle) {\n            this.endAngle += Math.PI * 2;\n        }\n        var oneBox = this.getOneBox();\n        var oneWidth = oneBox.maxX - oneBox.minX;\n        var oneHeight = oneBox.maxY - oneBox.minY;\n        var left = Math.abs(oneBox.minX) / oneWidth;\n        var top = Math.abs(oneBox.minY) / oneHeight;\n        var maxRadius;\n        if (this.height / oneHeight > this.width / oneWidth) {\n            // width 为主\n            maxRadius = this.width / oneWidth;\n            this.circleCenter = {\n                x: this.center.x - (0.5 - left) * this.width,\n                y: this.center.y - (0.5 - top) * maxRadius * oneHeight,\n            };\n        }\n        else {\n            // height 为主\n            maxRadius = this.height / oneHeight;\n            this.circleCenter = {\n                x: this.center.x - (0.5 - left) * maxRadius * oneWidth,\n                y: this.center.y - (0.5 - top) * this.height,\n            };\n        }\n        this.polarRadius = this.radius;\n        if (!this.radius) {\n            this.polarRadius = maxRadius;\n        }\n        else if (this.radius > 0 && this.radius <= 1) {\n            this.polarRadius = maxRadius * this.radius;\n        }\n        else if (this.radius <= 0 || this.radius > maxRadius) {\n            this.polarRadius = maxRadius;\n        }\n        this.x = {\n            start: this.startAngle,\n            end: this.endAngle,\n        };\n        this.y = {\n            start: this.innerRadius * this.polarRadius,\n            end: this.polarRadius,\n        };\n    };\n    Polar.prototype.getRadius = function () {\n        return this.polarRadius;\n    };\n    Polar.prototype.convertPoint = function (point) {\n        var _a;\n        var center = this.getCenter();\n        var x = point.x, y = point.y;\n        if (this.isTransposed) {\n            _a = [y, x], x = _a[0], y = _a[1];\n        }\n        x = this.convertDim(x, 'x');\n        y = this.convertDim(y, 'y');\n        return {\n            x: center.x + Math.cos(x) * y,\n            y: center.y + Math.sin(x) * y,\n        };\n    };\n    Polar.prototype.invertPoint = function (point) {\n        var center = this.getCenter();\n        var vPoint = [point.x - center.x, point.y - center.y];\n        var m = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n        mat3.rotate(m, m, this.startAngle);\n        var vStart = [1, 0, 0];\n        vec3.transformMat3(vStart, vStart, m);\n        vStart = [vStart[0], vStart[1]];\n        var angle = vec2.angleTo(vStart, vPoint, this.endAngle < this.startAngle);\n        if (isNumberEqual(angle, Math.PI * 2)) {\n            angle = 0;\n        }\n        var radius = vec2.length(vPoint);\n        var xPercent = angle / (this.endAngle - this.startAngle);\n        xPercent = this.endAngle - this.startAngle > 0 ? xPercent : -xPercent;\n        var yPercent = this.invertDim(radius, 'y');\n        var rst = { x: 0, y: 0 };\n        rst.x = this.isTransposed ? yPercent : xPercent;\n        rst.y = this.isTransposed ? xPercent : yPercent;\n        return rst;\n    };\n    Polar.prototype.getCenter = function () {\n        return this.circleCenter;\n    };\n    Polar.prototype.getOneBox = function () {\n        var startAngle = this.startAngle;\n        var endAngle = this.endAngle;\n        if (Math.abs(endAngle - startAngle) >= Math.PI * 2) {\n            return {\n                minX: -1,\n                maxX: 1,\n                minY: -1,\n                maxY: 1,\n            };\n        }\n        var xs = [0, Math.cos(startAngle), Math.cos(endAngle)];\n        var ys = [0, Math.sin(startAngle), Math.sin(endAngle)];\n        for (var i = Math.min(startAngle, endAngle); i < Math.max(startAngle, endAngle); i += Math.PI / 18) {\n            xs.push(Math.cos(i));\n            ys.push(Math.sin(i));\n        }\n        return {\n            minX: Math.min.apply(Math, xs),\n            maxX: Math.max.apply(Math, xs),\n            minY: Math.min.apply(Math, ys),\n            maxY: Math.max.apply(Math, ys),\n        };\n    };\n    return Polar;\n}(Coordinate));\nexport default Polar;\n//# sourceMappingURL=polar.js.map","import EventEmitter from '@antv/event-emitter';\nimport { ICanvas, IGroup } from '../dependents';\nimport { deepMix, each, findIndex, keys, contains, isFunction } from '@antv/util';\nimport { Point } from '../interface/config';\nimport { LAYER_EVENT_MAP } from '../util/event';\nimport BBox from '../util/bbox';\n\nexport interface LayerConfig {\n  /** @ignore */\n  id?: string;\n  /** the top-left-x of layer, local position relative to the parent layer */\n  /** @ignore */\n  x?: number;\n  /** the top-left-y of layer, local position relative to the parent layer */\n  /** @ignore */\n  y?: number;\n  /** layer width */\n  width?: number;\n  /** layer height */\n  height?: number;\n  /** the parent node of layer */\n  /** @ignore */\n  parent?: any;\n  /** @ignore */\n  canvas?: ICanvas;\n  name?: string;\n}\n\nexport interface Region {\n  /** the top-left corner of layer-range, range from 0 to 1, relative to parent layer's range */\n  readonly start: Point;\n  /** the bottom-right corner of layer-range, range from 0 to 1, relative to parent layer's range */\n  readonly end: Point;\n}\n\nexport interface Range {\n  x?: number;\n  y?: number;\n  width?: number;\n  height?: number;\n}\n\nexport default class Layer<T extends LayerConfig = LayerConfig> extends EventEmitter {\n  public id: string;\n  public x: number;\n  public y: number;\n  public width: number;\n  public height: number;\n  public parent: Layer;\n  public canvas: ICanvas;\n  public layerBBox: BBox;\n  public layers: Layer[] = [];\n  public container: IGroup;\n  public destroyed: boolean = false;\n  protected visibility: boolean = true;\n  protected layerRegion: Region;\n  private rendered: boolean = false;\n  private eventHandlers: any[] = [];\n  public options: T;\n\n  /**\n   * layer base for g2plot\n   */\n  constructor(props: T) {\n    super();\n    this.options = this.getOptions(props);\n    this.processOptions(this.options);\n  }\n\n  public processOptions(options) {\n    this.id = options.id;\n    this.x = options.x;\n    this.y = options.y;\n    this.width = options.width;\n    this.height = options.height;\n    this.canvas = options.canvas;\n    this.parent = options.parent;\n  }\n\n  public updateConfig(cfg: Partial<T>): void {\n    this.options = deepMix({}, this.options, cfg);\n    this.processOptions(this.options);\n  }\n\n  public beforeInit() {\n    return null;\n  }\n\n  /**\n   * init life cycle\n   */\n  public init() {\n    this.layerBBox = this.getLayerBBox();\n    this.layerRegion = this.getLayerRegion();\n    this.eachLayer((layer) => {\n      layer.init();\n    });\n  }\n\n  public afterInit() {\n    return null;\n  }\n\n  /**\n   * render layer recursively\n   */\n  public render() {\n    // fixme: 等plot不再继承layer，这个就可以挪到构造函数里去，不需要再加是否render过的判断了\n    if (!this.rendered) {\n      this.container = this.parent ? this.parent.container.addGroup() : this.canvas.addGroup();\n    }\n    this.rendered = true;\n    this.beforeInit();\n    this.init();\n    this.afterInit();\n    //(this.container, [['t', this.x, this.y]]);\n    this.eachLayer((layer) => {\n      layer.render();\n    });\n    this.canvas.draw();\n  }\n\n  /**\n   * clear layer content\n   */\n  public clear() {\n    this.eachLayer((layer) => {\n      layer.destroy();\n    });\n    this.layers = [];\n    this.container.clear();\n  }\n\n  /**\n   * destroy layer recursively, remove the container of layer\n   */\n  public destroy() {\n    this.eachLayer((layer) => {\n      layer.destroy();\n    });\n    each(this.eventHandlers, (h) => {\n      this.off(h.eventName, h.handler);\n    });\n    this.container.remove(true);\n    this.destroyed = true;\n  }\n\n  /**\n   * display layer\n   */\n  public show() {\n    this.container.attr('visible', true);\n    this.container.set('visible', true);\n    this.visibility = true;\n    this.canvas.draw();\n  }\n\n  /**\n   * hide layer\n   */\n  public hide() {\n    this.container.attr('visible', false);\n    this.container.set('visible', false);\n    this.visibility = false;\n    this.canvas.draw();\n  }\n\n  /**\n   * add children layer\n   * @param layer\n   */\n  public addLayer(layer: Layer<any>) {\n    const idx = findIndex(this.layers, (item) => item === layer);\n    if (idx < 0) {\n      if (layer.parent !== this) {\n        layer.parent = this;\n        layer.init();\n      }\n      this.layers.push(layer);\n    }\n  }\n\n  /**\n   * remove children layer\n   * @param layer\n   */\n  public removeLayer(layer: Layer<any>) {\n    const idx = findIndex(this.layers, (item) => item === layer);\n    if (idx >= 0) {\n      this.layers.splice(idx, 1);\n    }\n  }\n\n  /**\n   * update layer's display range\n   * @param props\n   * @param recursive whether update children layers or not\n   */\n  public updateBBox(props: Range, recursive: boolean = false) {\n    const originRange = {\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height,\n    };\n    const newRange = deepMix({}, originRange, props);\n    this.x = newRange.x;\n    this.y = newRange.y;\n    this.width = newRange.width;\n    this.height = newRange.height;\n    this.layerBBox = this.getLayerBBox();\n    this.layerRegion = this.getLayerRegion();\n    this.render();\n    if (recursive) {\n      this.eachLayer((layer) => {\n        layer.updateBBoxByParent();\n        layer.render();\n      });\n    }\n    this.canvas.draw();\n  }\n\n  /**\n   * update display range according to parent layer's range\n   */\n  public updateBBoxByParent() {\n    const region = this.layerRegion;\n    this.x = this.parent.x + this.parent.width * region.start.x;\n    this.y = this.parent.y + this.parent.height * region.start.y;\n    this.width = this.parent.width * (region.end.x - region.start.x);\n    this.height = this.parent.height * (region.end.y - region.start.y);\n    this.layerBBox = this.getLayerBBox();\n  }\n\n  /**\n   * get global position of layer\n   */\n  public getGlobalPosition() {\n    let globalX = this.x;\n    let globalY = this.y;\n    let parent = this.parent;\n    while (parent) {\n      globalX += parent.x;\n      globalY += parent.y;\n      parent = parent.parent;\n    }\n    return { x: globalX, y: globalY };\n  }\n\n  public getGlobalBBox() {\n    const globalPosition = this.getGlobalPosition();\n    return new BBox(globalPosition.x, globalPosition.y, this.width, this.height);\n  }\n\n  public getOptions(props: Partial<T>): T {\n    let parentWidth = 0;\n    let parentHeight = 0;\n    if (props.parent) {\n      parentWidth = props.parent.width;\n      parentHeight = props.parent.height;\n    }\n    const defaultOptions = {\n      x: 0,\n      y: 0,\n      width: parentWidth,\n      height: parentHeight,\n    };\n    return deepMix({}, defaultOptions, props);\n  }\n\n  public eachLayer(cb: (layer: Layer<any>) => void) {\n    each(this.layers, cb);\n  }\n\n  protected parseEvents(eventParser?) {\n    const eventsName = keys(LAYER_EVENT_MAP);\n    each(eventParser, (e, k) => {\n      if (contains(eventsName, k) && isFunction(e)) {\n        const eventName = LAYER_EVENT_MAP[k] || k;\n        const handler = e;\n        this.on(eventName, handler);\n        this.eventHandlers.push({ name: eventName, handler });\n      }\n    });\n  }\n\n  private getLayerBBox() {\n    return new BBox(this.x, this.y, this.width, this.height);\n  }\n\n  private getLayerRegion() {\n    if (this.parent) {\n      const parentWidth = this.parent.width;\n      const parentHeight = this.parent.height;\n      const parentX = this.parent.x;\n      const parentY = this.parent.y;\n      const startX = (this.x - parentX) / parentWidth;\n      const startY = (this.y - parentY) / parentHeight;\n      const endX = (this.x + this.width - parentX) / parentWidth;\n      const endY = (this.y + this.height - parentY) / parentHeight;\n      return { start: { x: startX, y: startY }, end: { x: endX, y: endY } };\n    }\n    return { start: { x: 0, y: 0 }, end: { x: 1, y: 1 } };\n  }\n}\n","import { View, Axis, COMPONENT_TYPE } from '../dependents';\n\n/**\n * 判断text是否可用, title description\n *\n * @param source\n */\nexport function isTextUsable(source?: { visible?: boolean; text?: string }): boolean {\n  if (!source) return false;\n  if (source.visible === true && typeof source.text === 'string' && source.text.trim()) return true;\n  return false;\n}\n\n/**\n * 为字符串添加换行符\n * @param source - 字符串数组 ['a', 'b', 'c']\n * @param breaks - 要添加换行的index\n *\n * @example\n * ```js\n * breakText(['a','b','c'], [1])\n *\n * // a\\nbc\n * ```\n */\nexport function breakText(source: string[], breaks: number[]): string {\n  const result = [...source];\n  breaks.forEach((pos, index) => {\n    result.splice(pos + index, 0, '\\n');\n  });\n  return result.join('');\n}\n\n/**\n * 获取 View 中所有的 Axis 组件\n */\nexport function getAxisComponents(view: View): Axis.Base[] {\n  return view\n    .getComponents()\n    .filter((co) => co.type === COMPONENT_TYPE.AXIS)\n    .map((co) => co.component) as Axis.Base[];\n}\n\nexport function getAxisShapes(view) {\n  const axisShape = view.backgroundGroup.findAll((el) => {\n    if (el.get('name')) {\n      const name = el.get('name').split('-');\n      return name[0] === 'axis';\n    }\n  });\n  return axisShape;\n}\n\nexport function getLegendShapes(view) {\n  const axisShape = view.foregroundGroup.findAll((el) => {\n    if (el.get('name')) {\n      return el.get('name') === 'legend-item-group';\n    }\n  });\n  return axisShape;\n}\n\nexport function sortedLastIndex<T>(arr: T[], val: T): number {\n  let i = arr.length;\n  while (i > 0) {\n    if (val >= arr[i - 1]) {\n      break;\n    }\n    i -= 1;\n  }\n  return i;\n}\n","import { deepMix } from '@antv/util';\nimport { DEFAULT_RESPONSIVE_THEME } from './default';\n\n/**\n * 所有的响应式主题配置\n */\nconst RESPONSIVE_THEME_MAP = {\n  default: DEFAULT_RESPONSIVE_THEME,\n};\n\n/**\n * 添加一个响应式主题配置\n * @param name\n * @param theme\n */\nexport function registerResponsiveTheme(name: string, theme) {\n  RESPONSIVE_THEME_MAP[name.toLowerCase()] = deepMix({}, DEFAULT_RESPONSIVE_THEME, theme);\n}\n\n/**\n * 获取一个响应式主题配置，如果找不到则返回默认\n * @param name\n */\nexport function getResponsiveTheme(name: string) {\n  const theme = RESPONSIVE_THEME_MAP[name.toLowerCase()];\n  return theme ? theme : DEFAULT_RESPONSIVE_THEME;\n}\n","import { assign } from '@antv/util';\nimport { ElementOption } from '../interface/config';\n\nexport default class ElementParser {\n  public plot: any;\n  public type: string;\n  public config: ElementOption;\n  public style: any;\n  private positionFields: string[];\n  private widthRatio: { [key: string]: number };\n\n  constructor(cfg) {\n    assign(this, cfg);\n    this.init();\n  }\n\n  public init() {\n    this.config = {\n      type: this.type,\n      position: {\n        fields: this.positionFields,\n      },\n    };\n  }\n}\n","import * as MatrixUtil from '@antv/matrix-util';\nimport { clone } from '@antv/util';\nimport { Util } from '../dependents';\n\nexport function groupTransform(group, actions) {\n  const ulMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n  const matrix = MatrixUtil.transform(ulMatrix, actions);\n  group.setMatrix(matrix);\n}\n\nexport function transform(actions, matrix?) {\n  const ulMatrix = matrix ? clone(matrix) : [1, 0, 0, 0, 1, 0, 0, 0, 1];\n  return MatrixUtil.transform(ulMatrix, actions);\n}\n\nexport function move(element, x, y, matrix?) {\n  const ulMatrix = matrix ? clone(matrix) : [1, 0, 0, 0, 1, 0, 0, 0, 1];\n  ulMatrix[6] = x;\n  ulMatrix[7] = y;\n  element.setMatrix(ulMatrix);\n}\n\nexport function translate(element, x, y) {\n  Util.translate(element, x, y);\n}\n\nexport function rotate(element, radian) {\n  Util.rotate(element, radian);\n}\n","import { deepMix, has, each, clone } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport ViewLayer from '../../base/view-layer';\nimport { getGeom } from '../../geoms/factory';\nimport { ElementOption } from '../../interface/config';\nimport ConversionTag from '../../components/conversion-tag';\nimport { extractScale } from '../../util/scale';\nimport responsiveMethods from './apply-responsive';\nimport './apply-responsive/theme';\nimport './component/label';\nimport './component/label-auto';\nimport * as EventParser from './event';\nimport './theme';\nimport { DataItem } from '../../interface/config';\nimport { getGeometryByType } from '../../util/view';\nimport { ColumnViewConfig } from './interface';\n\nconst G2_GEOM_MAP = {\n  column: 'interval',\n};\n\nconst PLOT_GEOM_MAP = {\n  interval: 'column',\n};\n\nexport interface ColumnLayerConfig extends ColumnViewConfig, LayerConfig {}\n\nexport default class BaseColumnLayer<T extends ColumnLayerConfig = ColumnLayerConfig> extends ViewLayer<T> {\n  public static getDefaultOptions(): any {\n    return deepMix({}, super.getDefaultOptions(), {\n      xAxis: {\n        visible: true,\n        tickLine: {\n          visible: false,\n        },\n        title: {\n          visible: true,\n        },\n      },\n      yAxis: {\n        nice: true,\n        title: {\n          visible: true,\n        },\n        label: {\n          visible: true,\n        },\n        grid: {\n          visible: true,\n        },\n      },\n      tooltip: {\n        visible: true,\n        shared: true,\n        showCrosshairs: false,\n        showMarkers: false,\n      },\n      label: {\n        visible: false,\n        position: 'top',\n        adjustColor: true,\n      },\n      legend: {\n        visible: true,\n        position: 'top-left',\n      },\n      interactions: [\n        { type: 'tooltip' },\n        { type: 'active-region' },\n        { type: 'legend-active' },\n        { type: 'legend-filter' },\n      ],\n      conversionTag: {\n        visible: false,\n      },\n    });\n  }\n  public column: any;\n  public type: string = 'column';\n  public conversionTag?: ConversionTag;\n\n  public beforeInit() {\n    super.beforeInit();\n    /** 响应式图形 */\n    if (this.options.responsive && this.options.padding !== 'auto') {\n      this.applyResponsive('preRender');\n    }\n  }\n\n  public afterRender() {\n    const props = this.options;\n    this.renderLabel();\n    /** 响应式 */\n    if (this.options.responsive && this.options.padding !== 'auto') {\n      this.applyResponsive('afterRender');\n    }\n    if (props.conversionTag.visible) {\n      this.conversionTag = new ConversionTag({\n        view: this.view,\n        field: props.yField,\n        transpose: true,\n        animation: props.animation === false ? false : true,\n        ...props.conversionTag,\n      });\n    }\n    super.afterRender();\n  }\n\n  protected geometryParser(dim, type) {\n    if (dim === 'g2') {\n      return G2_GEOM_MAP[type];\n    }\n    return PLOT_GEOM_MAP[type];\n  }\n\n  protected processData(originData?: DataItem[]) {\n    const { xField } = this.options;\n    const processedData = [];\n    each(originData, (data) => {\n      const d = clone(data);\n      d[xField] = d[xField].toString();\n      processedData.push(d);\n    });\n    return processedData;\n  }\n\n  protected scale() {\n    const { options } = this;\n    const scales = {};\n    /** 配置x-scale */\n    scales[options.xField] = { type: 'cat' };\n    if (has(options, 'xAxis')) {\n      extractScale(scales[options.xField], options.xAxis);\n    }\n    /** 配置y-scale */\n    scales[options.yField] = {};\n    if (has(options, 'yAxis')) {\n      extractScale(scales[options.yField], options.yAxis);\n    }\n    this.setConfig('scales', scales);\n    super.scale();\n  }\n\n  protected coord() {\n    return;\n  }\n\n  //eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected adjustColumn(column: ElementOption) {\n    return;\n  }\n\n  protected addGeometry() {\n    const { options } = this;\n    const column = getGeom('interval', 'main', {\n      positionFields: [options.xField, options.yField],\n      plot: this,\n    });\n    if (options.conversionTag.visible) {\n      this.setConfig(\n        'theme',\n        deepMix({}, this.getTheme(), {\n          columnWidthRatio: 1 / 3,\n        })\n      );\n    }\n    this.adjustColumn(column);\n    this.column = column;\n    if (options.tooltip && (options.tooltip.fields || options.tooltip.formatter)) {\n      this.geometryTooltip();\n    }\n    this.setConfig('geometry', column);\n  }\n\n  protected geometryTooltip() {\n    this.column.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      this.column.tooltip.fields = tooltipOptions.fields;\n    }\n    if (tooltipOptions.formatter) {\n      this.column.tooltip.callback = tooltipOptions.formatter;\n      if (!tooltipOptions.fields) {\n        this.column.tooltip.fields = [this.options.xField, this.options.yField];\n        if (this.options.colorField) {\n          this.column.tooltip.fields.push(this.options.colorField);\n        }\n      }\n    }\n  }\n\n  protected animation() {\n    super.animation();\n    if (this.options.animation === false) {\n      /** 关闭动画 */\n      this.column.animate = false;\n    }\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n\n  protected renderLabel() {\n    const { scales } = this.config;\n    const { label, yField } = this.options;\n    const scale = scales[yField];\n    if (label?.visible) {\n      const geometry = getGeometryByType(this.view, 'interval');\n      this.doRenderLabel(geometry, {\n        type: 'column',\n        formatter: scale.formatter,\n        ...this.options.label,\n      });\n    }\n  }\n\n  private applyResponsive(stage) {\n    const methods = responsiveMethods[stage];\n    each(methods, (r) => {\n      const responsive = r;\n      responsive.method(this);\n    });\n  }\n}\n\nregisterPlotType('column', BaseColumnLayer);\n","import { get, each, deepMix } from '@antv/util';\nimport { IShape, Element } from '../../../dependents';\nimport BaseLabel, { registerLabelComponent } from '../../../components/label/base';\nimport { TextStyle } from '../../../interface/config';\nimport { mappingColor, rgb2arr } from '../../../util/color';\nimport BBox from '../../../util/bbox';\nimport { IColumnLabel } from '../interface';\n\nexport default class ColumnLabel<L extends IColumnLabel = IColumnLabel> extends BaseLabel<L> {\n  protected getLabelItemAttrs(element: Element, idx: number): TextStyle {\n    const { style, formatter } = this.options;\n    const { shape } = element;\n    const value = this.getValue(element);\n\n    return deepMix({}, style, {\n      ...this.getPosition(element),\n      text: formatter ? formatter(value, shape, idx) : value,\n      fill: this.getTextFill(element),\n      stroke: this.getTextStroke(element),\n      textAlign: this.getTextAlign(),\n      textBaseline: this.getTextBaseLine(),\n    });\n  }\n\n  protected getDefaultOptions() {\n    const { theme } = this.layer;\n    const { label = {} } = theme;\n    return {\n      offsetX: 0,\n      offsetY: 0,\n      adjustPosition: true,\n      ...label,\n    };\n  }\n\n  protected adjustLabel(label: IShape, element: Element): void {\n    const { adjustPosition } = this.options;\n    if (adjustPosition) {\n      const offset = this.getDefaultOffset();\n      const labelRange = label.getBBox();\n      const shapeRange = this.getElementShapeBBox(element);\n      if (shapeRange.height <= labelRange.height) {\n        const yPosition = shapeRange.minY + this.options.offsetY - offset;\n        label.attr('y', yPosition);\n        label.attr('textBaseline', 'bottom');\n        label.attr('fill', this.options.style.fill);\n      }\n    }\n  }\n\n  protected getValue(element: Element): number | undefined | null {\n    return get(element.getData(), this.layer.options.yField);\n  }\n\n  protected getPosition(element: Element): { x: number; y: number } {\n    const offset = this.getDefaultOffset();\n    const value = this.getValue(element);\n    const bbox = this.getElementShapeBBox(element);\n    const { minX, minY, maxY, height, width } = bbox;\n    const { offsetX, offsetY, position } = this.options;\n    const x = minX + width / 2 + offsetX;\n    const dir = value > 0 ? -1 : 1;\n    let y;\n\n    if (position === 'top') {\n      const root = value > 0 ? minY : maxY;\n      y = root + offset * dir + offsetY;\n    } else if (position === 'bottom') {\n      const root = value > 0 ? maxY : minY;\n      y = root + offset * dir + offsetY;\n    } else {\n      y = minY + height / 2 + offsetY;\n    }\n\n    return { x, y };\n  }\n\n  protected getTextFill(element: Element) {\n    const { shape } = element;\n    if (this.options.adjustColor && this.options.position !== 'top') {\n      const shapeColor = shape.attr('fill');\n      const shapeOpacity = shape.attr('opacity') ? shape.attr('opacity') : 1;\n      const rgb = rgb2arr(shapeColor);\n      const gray = Math.round(rgb[0] * 0.299 + rgb[1] * 0.587 + rgb[2] * 0.114) / shapeOpacity;\n      const colorBand = [\n        { from: 0, to: 85, color: 'white' },\n        { from: 85, to: 170, color: '#F6F6F6' },\n        { from: 170, to: 255, color: 'black' },\n      ];\n      const reflect = mappingColor(colorBand, gray);\n      return reflect;\n    }\n    const defaultColor = this.options.style.fill;\n    return defaultColor;\n  }\n\n  protected getTextStroke(element: Element) {\n    const fill = this.getTextFill(element);\n    const { position, adjustColor } = this.options;\n    return position !== 'top' && adjustColor && fill !== 'black' ? null : undefined;\n  }\n\n  protected getElementShapeBBox(element: Element): BBox {\n    const { shape } = element;\n    const points = [];\n    each(shape.get('origin').points, (p) => {\n      points.push(this.coord.convertPoint(p));\n    });\n    const xValues = points.map((point) => point.x);\n    const xValuesMin = Math.min(...xValues);\n    const xValueMax = Math.max(...xValues);\n    const yValues = points.map((point) => point.y);\n    const yValuesMin = Math.min(...yValues);\n    const yValuesMax = Math.max(...yValues);\n    const bbox = new BBox(xValuesMin, yValuesMin, xValueMax - xValuesMin, yValuesMax - yValuesMin);\n    return bbox;\n  }\n\n  protected getTextAlign() {\n    return 'center';\n  }\n\n  protected getTextBaseLine() {\n    return 'middle';\n  }\n\n  protected getLabelOffset() {\n    // Column 的 offset 在 getPosition 中因 position 不同单独处理\n    return {\n      x: 0,\n      y: 0,\n    };\n  }\n}\n\nregisterLabelComponent('column', ColumnLabel);\n","import { deepMix, each } from '@antv/util';\nimport { LayerConfig } from '../base/layer';\nimport ViewLayer, { ViewConfig } from '../base/view-layer';\nimport { getComponent } from '../components/factory';\nimport '../geoms/line/mini';\n\nexport interface TinyViewConfig extends ViewConfig {\n  indicator?: any;\n  guideLine?: any; // FIXME:\n}\n\nexport interface TinyLayerConfig extends TinyViewConfig, LayerConfig {}\n\nexport default abstract class TinyLayer<T extends TinyLayerConfig = TinyLayerConfig> extends ViewLayer<T> {\n  public static getDefaultOptions(): any {\n    return deepMix({}, super.getDefaultOptions(), {\n      title: {\n        visible: false,\n      },\n      description: {\n        visible: false,\n      },\n      padding: [0, 0, 0, 0],\n      legend: {\n        visible: false,\n      },\n      xAxis: {\n        visible: false,\n      },\n      yAxis: {\n        visible: false,\n      },\n      tooltip: {\n        visible: false,\n      },\n    });\n  }\n\n  protected coord() {\n    return;\n  }\n\n  protected addGeometry() {\n    return;\n  }\n\n  protected annotation() {\n    const props = this.options;\n    const config = [];\n    const defaultGuidelineCfg = {\n      line: {\n        style: {\n          lineWidth: 1,\n          stroke: '#66d6a8',\n        },\n      },\n    };\n    each(props.guideLine, (line) => {\n      const guideLine = getComponent('guideLine', {\n        plot: this,\n        cfg: deepMix({}, defaultGuidelineCfg, line),\n      });\n      config.push(guideLine);\n    });\n    this.setConfig('annotations', config);\n  }\n}\n","import EventEmitter from '@antv/event-emitter';\nimport { Canvas, IGroup, BBox } from '../dependents';\nimport { each } from '@antv/util';\n\nexport interface BaseComponentConfig {\n  container: IGroup;\n}\n\nexport default abstract class BaseComponent<T extends BaseComponentConfig = BaseComponentConfig> extends EventEmitter {\n  protected container: IGroup;\n  protected group: IGroup;\n  protected destroyed: boolean;\n  protected config: T;\n  private disposables: (() => void)[];\n\n  public constructor(config: T) {\n    super();\n    this.container = config.container;\n    this.destroyed = false;\n    this.group = this.container.addGroup();\n    this.config = config;\n    this.disposables = [];\n    this.init(config);\n  }\n\n  public getGroup(): IGroup {\n    return this.group;\n  }\n\n  public getBBox(): BBox {\n    return this.getGroup().getBBox();\n  }\n\n  public clear() {\n    this.group.clear();\n  }\n\n  public render(): void {\n    this.renderInner(this.group);\n    this.getCanvas().draw();\n  }\n\n  public update(config: Partial<T>): void {\n    this.config = { ...this.config, ...config };\n    this.init({ ...this.config, config });\n    this.group.clear();\n    this.renderInner(this.group);\n    this.getCanvas().draw();\n  }\n\n  public destroy(): void {\n    each(this.disposables, (fn) => {\n      fn();\n    });\n    this.disposables = [];\n    this.group.remove(true);\n    this.destroyed = true;\n  }\n\n  protected getCanvas(): Canvas {\n    return this.container.get('canvas');\n  }\n\n  protected addDisposable(fn: () => void) {\n    this.disposables.push(fn);\n  }\n\n  protected abstract init(config: T): void;\n\n  protected abstract renderInner(group: IGroup): void;\n}\n","/**\n * stateManager负责stateManager的创建/绑定，对状态量更新的响应\n */\nimport { IGroup, IShape } from '../../dependents';\nimport { isFunction, assign, each, isArray, mix, clone } from '@antv/util';\nimport { getComponentStateMethod } from '../../components/factory';\nimport { onEvent } from '../../util/event';\nimport StateManager from '../../util/state-manager';\n\nexport function compare(origin, condition) {\n  if (!isFunction(condition)) {\n    const { name, exp } = condition;\n    if (isFunction(exp)) {\n      return exp(origin[name]);\n    }\n    return origin[name] === exp;\n  }\n  return condition(origin);\n}\n\nexport default class StateController {\n  private plot: any;\n  private stateManager: StateManager;\n  private shapes: IShape[];\n  private originAttrs: any[]; // 缓存图形的原始属性\n  private shapeContainers: IGroup[] = [];\n\n  constructor(cfg) {\n    assign(this, cfg);\n  }\n\n  public createStateManager() {\n    this.stateManager = new StateManager();\n  }\n\n  public bindStateManager(manager: StateManager, cfg) {\n    this.stateManager = manager;\n    if (cfg.setState) {\n      this._updateStateProcess(cfg.setState);\n    }\n    if (cfg.onStateChange) {\n      this._stateChangeProcess(cfg.onStateChange);\n    }\n  }\n\n  public defaultStates(states) {\n    each(states, (state, type) => {\n      const { condition, related } = state;\n      this.setState({ type, condition, related });\n    });\n  }\n\n  public setState(cfg) {\n    const { type, condition, related } = cfg;\n    this.shapes = this._getShapes();\n    this.originAttrs = this._getOriginAttrs();\n    // this.resetZIndex();\n    each(this.shapes, (shape, index) => {\n      const shapeOrigin = shape.get('origin').data;\n      const origin = isArray(shapeOrigin) ? shapeOrigin[0] : shapeOrigin;\n      if (compare(origin, condition)) {\n        const stateStyle = cfg.style ? cfg.style : this._getDefaultStateStyle(type, shape);\n        const originAttr = this.originAttrs[index];\n        let attrs;\n        if (isFunction(stateStyle)) {\n          attrs = stateStyle(originAttr);\n        } else {\n          attrs = mix({}, originAttr, stateStyle);\n        }\n        shape.attr(attrs);\n        this.setZIndex(type, shape);\n        // const canvas = this.plot.canvas;\n        // canvas.draw();\n      }\n    });\n    // 组件与图形对状态量的响应不一定同步\n    if (related) {\n      this._parserRelated(type, related, condition);\n    }\n    this.plot.canvas.draw();\n  }\n\n  private _updateStateProcess(setStateCfg) {\n    each(setStateCfg, (cfg: any) => {\n      const state = cfg.state;\n      let handler;\n      if (isFunction(state)) {\n        handler = (e) => {\n          const s = state(e);\n          this.stateManager.setState(s.name, s.exp);\n        };\n      } else {\n        handler = () => {\n          this.stateManager.setState(state.name, state.exp);\n        };\n      }\n      if (cfg.event) {\n        onEvent(this.plot, this._eventParser(cfg.event), handler);\n      } else {\n        handler();\n      }\n    });\n  }\n\n  private _stateChangeProcess(onChangeCfg) {\n    each(onChangeCfg, (cfg: any) => {\n      this.stateManager.on(`${cfg.name}:change`, (props) => {\n        cfg.callback(props, this.plot);\n      });\n    });\n  }\n\n  private _getShapes() {\n    const shapes = [];\n    const geoms = this.plot.view.geometries;\n    each(geoms, (geom: any) => {\n      const shapeContainer = geom.container;\n      this.shapeContainers.push(shapeContainer);\n      if (!geom.destroyed) {\n        shapes.push(...geom.getShapes());\n      }\n    });\n    return shapes;\n  }\n\n  private _getOriginAttrs() {\n    const attrs = [];\n    each(this.shapes, (shape) => {\n      attrs.push(clone(shape.attr()));\n    });\n    return attrs;\n  }\n\n  // 将g2 geomtry转为plot层geometry\n  private _eventParser(event) {\n    const eventCfg = event.split(':');\n    const eventTarget = this.plot.geometryParser('g2', eventCfg[0]);\n    const eventName = eventCfg[1];\n    return `${eventTarget}:${eventName}`;\n  }\n\n  private _getDefaultStateStyle(type, shape) {\n    const theme = this.plot.theme;\n    const plotGeomType = this.plot.geometryParser('plot', shape.name);\n    const styleField = `${plotGeomType}Style`;\n    if (theme[styleField]) {\n      let style = theme[styleField][type];\n      if (isFunction(style)) {\n        style = style(shape.attr());\n      }\n      return style;\n    }\n    return {};\n  }\n\n  private _parserRelated(type, related, condition) {\n    each(related, (r) => {\n      if (this.plot[r]) {\n        // fixme: 自定义组件\n        // this.plot[r].setState(type, condition);\n        const method = getComponentStateMethod(r, type);\n        method(this.plot, condition);\n      }\n    });\n  }\n\n  // private set\n  private setZIndex(stateType: string, shape: IShape | any) {\n    if (stateType === 'active' || stateType === 'selected') {\n      // shape.setZIndex(1);\n      const children = shape.get('parent').get('children');\n      children[children.length - 1].setZIndex(0);\n      shape.setZIndex(1);\n    }\n  }\n\n  private resetZIndex() {\n    each(this.shapeContainers, (container) => {\n      const children = container.get('children');\n      children.sort((obj1, obj2) => {\n        return obj1._INDEX - obj2._INDEX;\n      });\n    });\n  }\n}\n","import { Axis } from '../../../dependents';\nimport { each } from '@antv/util';\nimport ShapeNodes from '../node/shape-nodes';\nimport Responsive from '../responsive';\nimport ApplyResponsive from './base';\n\nconst SCALE_MAPPER = {\n  cat: 'category',\n  timeCat: 'category',\n  time: 'dateTime',\n  linear: 'linear',\n};\n\nexport default class ApplyResponsiveAxis extends ApplyResponsive {\n  private dim: string;\n  private axisInstance: Axis.Base;\n\n  protected init() {\n    this.axisInstance = this.getAxisInstance();\n    super.init();\n  }\n\n  protected shouldApply() {\n    const { options } = this.plot;\n    if (!this.responsiveTheme.axis) {\n      return false;\n    }\n    if (\n      this.responsiveTheme.axis[this.dim] &&\n      options[`${this.dim}Axis`].visible &&\n      options[`${this.dim}Axis`].label &&\n      options[`${this.dim}Axis`].label.visible\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  protected apply() {\n    const rawLabels = this.plot.view.backgroundGroup.findAll((el) => {\n      const name = el.get('name');\n      if (name === 'axis-label') {\n        const field = el.get('delegateObject').axis.get('field');\n        if (field === this.plot.options[`${this.dim}Field`]) {\n          return el;\n        }\n      }\n    });\n    const shapes = [];\n    for (let i = 0; i < rawLabels.length; i++) {\n      shapes.push(rawLabels[i]);\n    }\n    const shapeNodes = new ShapeNodes({\n      shapes,\n    });\n    const { constraints, rules } = this.responsiveTheme.axis.x[this.type];\n    new Responsive({\n      nodes: shapeNodes,\n      constraints,\n      region: this.plot.getViewRange(),\n      rules,\n      plot: this.plot,\n      onEnd: (nodes) => {\n        this.updateTicks(nodes.origion_nodes);\n      },\n    });\n  }\n\n  protected getType() {\n    const props = this.plot.options;\n    const axis = `${this.dim}Axis`;\n    const field = `${this.dim}Field`;\n    if (props[axis] && props[axis].type && props[axis].type === 'dateTime') {\n      return 'dateTime';\n    }\n    const scaleType = this.plot.view.getScaleByField([props[field]]).type;\n    return SCALE_MAPPER[scaleType];\n  }\n\n  private getAxisInstance() {\n    const axisIndex = this.dim === 'x' ? 0 : 1;\n    const axis = this.plot.view.getController('axis').getComponents()[axisIndex].component;\n    return axis;\n  }\n\n  private updateTicks(nodes) {\n    const tickLineContainer = this.plot.view.backgroundGroup.findAll((el) => {\n      const name = el.get('name');\n      if (name === 'axis-tickline-group') {\n        const field = el.get('delegateObject').axis.get('field');\n        if (field === this.plot.options[`${this.dim}Field`]) {\n          return el;\n        }\n      }\n    })[0];\n    if (tickLineContainer) {\n      const tickShapes = tickLineContainer.get('children');\n      each(nodes, (n, index) => {\n        if (n.shape.attr('text') === '') {\n          tickShapes[index].attr('opacity', 0);\n        }\n      });\n    }\n    this.plot.canvas.draw();\n  }\n}\n","import { deepMix, has, each, clone } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport ViewLayer from '../../base/view-layer';\nimport { getComponent } from '../../components/factory';\nimport ConversionTag from '../../components/conversion-tag';\nimport { getGeom } from '../../geoms/factory';\nimport { ElementOption, DataItem } from '../../interface/config';\nimport { extractScale } from '../../util/scale';\nimport responsiveMethods from './apply-responsive';\nimport './theme';\nimport './component/label';\nimport './component/label-auto';\nimport * as EventParser from './event';\nimport { getGeometryByType } from '../../util/view';\nimport { BarViewConfig } from './interface';\n\nconst G2_GEOM_MAP = {\n  bar: 'interval',\n};\n\nconst PLOT_GEOM_MAP = {\n  interval: 'bar',\n};\n\nexport interface BarLayerConfig extends BarViewConfig, LayerConfig {}\n\nexport default class BaseBarLayer<T extends BarLayerConfig = BarLayerConfig> extends ViewLayer<T> {\n  public static getDefaultOptions(): Partial<BarViewConfig> {\n    const cfg: Partial<BarViewConfig> = {\n      xAxis: {\n        visible: true,\n        line: {\n          visible: false,\n        },\n        title: {\n          visible: true,\n        },\n        label: {\n          visible: false,\n        },\n        tickLine: {\n          visible: false,\n        },\n        grid: {\n          visible: false,\n        },\n        nice: true,\n      },\n      yAxis: {\n        visible: true,\n        grid: {\n          visible: false,\n        },\n        line: {\n          visible: false,\n        },\n        tickLine: {\n          visible: false,\n        },\n        label: {\n          visible: true,\n          autoRotate: false,\n          autoHide: true,\n        },\n        title: {\n          visible: false,\n          offset: 12,\n        },\n      },\n      tooltip: {\n        visible: true,\n        shared: true,\n        showCrosshairs: false,\n        showMarkers: false,\n      },\n      label: {\n        visible: true,\n        position: 'left',\n        adjustColor: true,\n      },\n      legend: {\n        visible: false,\n        position: 'top-left',\n      },\n      interactions: [\n        { type: 'tooltip' },\n        { type: 'active-region' },\n        { type: 'legend-active' },\n        { type: 'legend-filter' },\n      ],\n      conversionTag: {\n        visible: false,\n      },\n    };\n    return deepMix({}, super.getDefaultOptions(), cfg);\n  }\n\n  public bar: any;\n  public type: string = 'bar';\n  public conversionTag?: ConversionTag;\n\n  public beforeInit() {\n    super.beforeInit();\n    const props = this.options;\n    /** 响应式图形 */\n    if (props.responsive && props.padding !== 'auto') {\n      this.applyResponsive('preRender');\n    }\n  }\n\n  public afterRender() {\n    const props = this.options;\n    this.renderLabel();\n    /** 响应式 */\n    if (props.responsive && props.padding !== 'auto') {\n      this.applyResponsive('afterRender');\n    }\n    if (props.conversionTag.visible) {\n      this.conversionTag = new ConversionTag({\n        view: this.view,\n        field: props.xField,\n        animation: props.animation === false ? false : true,\n        ...props.conversionTag,\n      });\n    }\n    super.afterRender();\n  }\n\n  protected geometryParser(dim, type) {\n    if (dim === 'g2') {\n      return G2_GEOM_MAP[type];\n    }\n    return PLOT_GEOM_MAP[type];\n  }\n\n  protected processData(originData?: DataItem[]) {\n    const inputData = originData ? originData.slice().reverse() : originData;\n    const { yField } = this.options;\n    const processedData = [];\n    each(inputData, (data) => {\n      const d = clone(data);\n      d[yField] = d[yField].toString();\n      processedData.push(d);\n    });\n    return processedData;\n  }\n\n  protected scale() {\n    const props = this.options;\n    const scales = {};\n    /** 配置x-scale */\n    scales[props.yField] = {\n      type: 'cat',\n    };\n    if (has(props, 'yAxis')) {\n      extractScale(scales[props.yField], props.yAxis);\n    }\n    /** 配置y-scale */\n    scales[props.xField] = {};\n    if (has(props, 'xAxis')) {\n      extractScale(scales[props.xField], props.xAxis);\n    }\n    this.setConfig('scales', scales);\n    super.scale();\n  }\n\n  protected coord() {\n    this.setConfig('coordinate', {\n      actions: [['transpose']],\n    });\n  }\n\n  protected axis(): void {\n    const xAxis_parser = getComponent('axis', {\n      plot: this,\n      dim: 'x',\n    });\n    const yAxis_parser = getComponent('axis', {\n      plot: this,\n      dim: 'y',\n    });\n    /** 转置坐标系特殊配置 */\n    if (xAxis_parser) {\n      xAxis_parser.position = 'left';\n    }\n    if (yAxis_parser) {\n      yAxis_parser.position = 'bottom';\n    }\n    const axesConfig = {};\n    axesConfig[this.options.xField] = xAxis_parser;\n    axesConfig[this.options.yField] = yAxis_parser;\n    /** 存储坐标轴配置项到config */\n    this.setConfig('axes', axesConfig);\n  }\n\n  //eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected adjustBar(bar: ElementOption) {\n    return null;\n  }\n\n  protected addGeometry() {\n    const props: any = this.options;\n    const bar = getGeom('interval', 'main', {\n      positionFields: [props.yField, props.xField],\n      plot: this,\n    });\n    if (props.conversionTag.visible) {\n      this.setConfig(\n        'theme',\n        deepMix({}, this.getTheme(), {\n          columnWidthRatio: 1 / 3,\n        })\n      );\n    }\n    this.adjustBar(bar);\n    this.bar = bar;\n\n    if (props.tooltip && (props.tooltip.fields || props.tooltip.formatter)) {\n      this.geometryTooltip();\n    }\n\n    this.setConfig('geometry', bar);\n  }\n\n  protected animation() {\n    super.animation();\n    const props = this.options;\n    if (props.animation === false) {\n      /** 关闭动画 */\n      this.bar.animate = false;\n    }\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n\n  protected renderLabel() {\n    const { scales } = this.config;\n    const { label, xField } = this.options;\n    const scale = scales[xField];\n    if (label?.visible) {\n      const geometry = getGeometryByType(this.view, 'interval');\n      this.doRenderLabel(geometry, {\n        type: 'bar',\n        formatter: scale.formatter,\n        ...this.options.label,\n      });\n    }\n  }\n\n  protected geometryTooltip() {\n    this.bar.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      this.bar.tooltip.fields = tooltipOptions.fields;\n    }\n    if (tooltipOptions.formatter) {\n      this.bar.tooltip.callback = tooltipOptions.formatter;\n      if (!tooltipOptions.fields) {\n        this.bar.tooltip.fields = [this.options.xField, this.options.yField];\n        if (this.options.colorField) {\n          this.bar.tooltip.fields.push(this.options.colorField);\n        }\n      }\n    }\n  }\n\n  private applyResponsive(stage) {\n    const methods = responsiveMethods[stage];\n    each(methods, (r) => {\n      const responsive = r;\n      responsive.method(this);\n    });\n  }\n\n  public getLabelOptionsByPosition(position: string) {\n    if (position === 'middle') {\n      return {\n        offset: 0,\n      };\n    }\n\n    if (position === 'left') {\n      return {\n        offset: 7,\n        style: {\n          stroke: null,\n          lineWidth: 0,\n        },\n      };\n    }\n\n    if (position === 'right') {\n      return {\n        offset: 4,\n      };\n    }\n  }\n}\n\nregisterPlotType('bar', BaseBarLayer);\n","import { IGroup, IShape, BBox } from '../../../../dependents';\nimport { transform } from '@antv/matrix-util';\nimport { deepMix, isString } from '@antv/util';\nimport { getEndPoint, getLabelRotate, getAngleByPoint, getOverlapArea, near } from './utils';\nimport { Label, TextStyle } from '../../../../interface/config';\nimport PieLayer from '../../layer';\nimport { getEllipsisText } from './utils/text';\n\n/** label text和line距离 4px */\nexport const CROOK_DISTANCE = 4;\n\nexport function percent2Number(value: string): number {\n  const percentage = Number(value.endsWith('%') ? value.slice(0, -1) : value);\n  return percentage / 100;\n}\n\n/**\n * 超出panel边界的标签默认隐藏\n */\nfunction checkInPanel(label: IShape, panel: BBox): void {\n  const box = label.getBBox();\n  //  横向溢出 暂不隐藏\n  if (!(panel.y <= box.y && panel.y + panel.height >= box.y + box.height)) {\n    label.get('parent').set('visible', false);\n  }\n}\n\nexport interface LabelItem {\n  x: number;\n  y: number;\n  color: string;\n  origin: object;\n  name: string;\n  angle: number;\n  textAlign: string;\n  textBaseline?: string;\n}\n\nexport interface PieLabelConfig extends Label {\n  visible: boolean;\n  formatter?: (text: string | number | undefined | null, item: any, idx: number, ...extras: any[]) => string;\n  /** whether */\n  adjustPosition?: boolean;\n  /** allow label overlap */\n  allowOverlap?: boolean;\n  autoRotate?: boolean;\n  labelHeight?: number;\n  offset?: number | string;\n  offsetX?: number;\n  offsetY?: number;\n  /** label leader-line */\n  line?: {\n    visible?: boolean;\n    smooth?: boolean;\n    stroke?: string;\n    lineWidth?: number;\n  };\n  style?: TextStyle;\n}\n\nexport default abstract class PieBaseLabel {\n  public options: PieLabelConfig & { offset: number };\n  public destroyed: boolean = false;\n  protected plot: PieLayer;\n  protected coordinateBBox: BBox;\n  protected container: IGroup;\n  /** 圆弧上的锚点 */\n  protected arcPoints: LabelItem[];\n\n  constructor(plot: PieLayer, cfg: PieLabelConfig) {\n    this.plot = plot;\n    this.coordinateBBox = this.plot.view.coordinateBBox;\n    const options = deepMix(this.getDefaultOptions(), cfg, {});\n    this.adjustOption(options);\n    this.options = options;\n    this.init();\n  }\n\n  protected abstract getDefaultOptions();\n  protected abstract layout(labels: IShape[], shapeInfos: LabelItem[], panelBox: BBox);\n  /** 处理标签遮挡问题 */\n  protected adjustOverlap(labels: IShape[], panel: BBox): void {\n    // clearOverlap;\n    for (let i = 1; i < labels.length; i++) {\n      const label = labels[i];\n      let overlapArea = 0;\n      for (let j = i - 1; j >= 0; j--) {\n        const prev = labels[j];\n        // fix: start draw point.x is error when textAlign is right\n        const prevBox = prev.getBBox();\n        const currBox = label.getBBox();\n        // if the previous one is invisible, skip\n        if (prev.get('parent').get('visible')) {\n          overlapArea = getOverlapArea(prevBox, currBox);\n          if (!near(overlapArea, 0)) {\n            label.get('parent').set('visible', false);\n            break;\n          }\n        }\n      }\n    }\n    labels.forEach((label) => checkInPanel(label, panel));\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected adjustItem(item: LabelItem): void {\n    return;\n  }\n\n  protected init() {\n    this.container = this.getGeometry().labelsContainer;\n    this.plot.view.on('beforerender', () => {\n      this.clear();\n      this.plot.canvas.draw();\n    });\n  }\n\n  public render() {\n    // 先清空 再重新渲染（避免双次绘制）\n    this.clear();\n    this.initArcPoints();\n    this.drawTexts();\n    this.drawLines();\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n  }\n\n  public hide() {\n    this.container.set('visible', false);\n    this.plot.canvas.draw();\n  }\n\n  public show() {\n    this.container.set('visible', true);\n    this.plot.canvas.draw();\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.remove();\n    }\n    this.destroyed = true;\n  }\n\n  private getFilteredSum() {\n    const { angleField } = this.plot.options;\n    const filteredData = (this.plot.view as any).filteredData || [];\n    return filteredData.reduce((pre, filteredDataItem) => {\n      return pre + filteredDataItem[angleField];\n    }, 0);\n  }\n\n  /** 绘制文本 */\n  protected drawTexts() {\n    const { style, formatter, autoRotate, offsetX, offsetY, adjustPosition, allowOverlap } = this.options;\n    const shapeInfos = this.getItems();\n    const shapes: IShape[] = [];\n    shapeInfos.map((shapeInfo, idx) => {\n      const attrs = deepMix({}, shapeInfo, style);\n      const filteredSum = this.getFilteredSum();\n      const { angleField } = this.plot.options;\n      const percent = shapeInfo.origin[angleField] / filteredSum;\n      const content = formatter\n        ? formatter(\n            shapeInfo.name,\n            {\n              _origin: shapeInfo.origin,\n              percent,\n            },\n            idx\n          )\n        : shapeInfo.name;\n      const itemGroup = this.container.addGroup({ name: 'itemGroup', index: idx });\n      const textShape = itemGroup.addShape('text', {\n        attrs: deepMix({}, attrs, {\n          x: shapeInfo.x + offsetX,\n          y: shapeInfo.y + offsetY,\n          text: content,\n        }),\n      });\n      textShape.set('id', `text-${shapeInfo.name}-${idx}`);\n      shapes.push(textShape);\n    });\n    shapes.forEach((shape) => {\n      const panelBox = this.coordinateBBox;\n      this.adjustText(shape, panelBox);\n    });\n    if (adjustPosition) {\n      this.layout(shapes, shapeInfos, this.coordinateBBox);\n    }\n    if (!allowOverlap) {\n      this.adjustOverlap(shapes, this.coordinateBBox);\n    }\n    shapes.forEach((label, idx) => {\n      if (autoRotate) {\n        this.rotateLabel(label, getLabelRotate(shapeInfos[idx].angle));\n      }\n    });\n  }\n\n  private adjustText(label: IShape, panelBox: BBox) {\n    const box = label.getBBox();\n    let width = box.width;\n    const deltaWidth = 0;\n    if (box.maxX > panelBox.maxX) {\n      width = panelBox.maxX - box.minX;\n    } else if (box.minX < panelBox.minX) {\n      width = box.maxX - panelBox.minX;\n    }\n    if (label.attr('textAlign') === 'left') {\n      label.attr('x', Math.max(box.x - deltaWidth, 0));\n    } else if (label.attr('textAlign') === 'right') {\n      label.attr('x', Math.max(box.maxX - deltaWidth, 0));\n    }\n    if (width !== box.width) {\n      const font = {};\n      ['fontSize', 'fontFamily', 'fontWeight'].forEach((k) => {\n        font[k] = label.attr(k);\n      });\n      const ellipsisTexts = label\n        .attr('text')\n        .split('\\n')\n        .map((t) => getEllipsisText(t, width, font));\n      label.attr('text', ellipsisTexts.join('\\n'));\n    }\n  }\n\n  /** 绘制拉线 */\n  protected drawLines() {\n    if (this.options.line.visible) {\n      const itemGroups = this.container.get('children');\n      const { center } = this.getCoordinate();\n      itemGroups.forEach((labelGroup, idx) => {\n        const label: IShape = labelGroup.get('children')[0];\n        const anchor = this.arcPoints[idx];\n        const inLeft = anchor.x < center.x;\n        // 拉线 和 label 之间的距离\n        const distance = this.options.offset > 4 ? 4 : 0;\n        const path = this.getLinePath(label, anchor, distance);\n        const style = this.options.line;\n        labelGroup.addShape('path', {\n          attrs: {\n            path,\n            stroke: anchor.color,\n            ...style,\n          },\n        });\n        // 由于拉线的存在 label 需要进行偏移\n        label.attr('x', label.attr('x') + (inLeft ? -distance : distance));\n      });\n    }\n  }\n\n  /** 获取label leader-line, 默认 not smooth */\n  private getLinePath(label: IShape, anchor: LabelItem, distance: number): string {\n    const smooth = this.options.line ? this.options.line.smooth : false;\n    const angle = anchor.angle;\n    const { center, radius } = this.getCoordinate();\n    let breakAt = getEndPoint(center, angle, radius + distance);\n    if (distance < 4) {\n      breakAt = anchor;\n    }\n    const inLeft = anchor.x < center.x;\n    const box = label.getBBox();\n    const labelPosition = { x: inLeft ? box.maxX : box.minX, y: box.y + box.height / 2 };\n    const smoothPath = [\n      'C', // soft break\n      // 1st control point (of the curve)\n      labelPosition.x +\n        // 4 gives the connector a little horizontal bend\n        (inLeft ? 1 : -1) * (distance < 4 ? distance / 2 : 4),\n      labelPosition.y, //\n      2 * breakAt.x - anchor.x, // 2nd control point\n      2 * breakAt.y - anchor.y, //\n      breakAt.x, // end of the curve\n      breakAt.y, //\n    ];\n    const straightPath = ['L', /** pointy break */ breakAt.x, breakAt.y];\n    const linePath = smooth ? smoothPath : straightPath;\n    const path = ['M', labelPosition.x, labelPosition.y].concat(linePath).concat('L', anchor.x, anchor.y);\n\n    return path.join(',');\n  }\n\n  protected getGeometry() {\n    return this.plot.view.geometries[0];\n  }\n\n  protected getCoordinate() {\n    const coordinate = this.getGeometry().coordinate;\n    const center = coordinate.getCenter();\n    // @ts-ignore\n    const radius = coordinate.getRadius();\n    const startAngle = coordinate.startAngle;\n    return { center, radius, startAngle };\n  }\n\n  protected adjustOption(options: PieLabelConfig): void {\n    let offset = options.offset;\n    const { radius } = this.getCoordinate();\n    if (isString(offset)) {\n      offset = radius * percent2Number(offset);\n    }\n    options.offset = offset;\n  }\n\n  private rotateLabel(label: IShape, angle): void {\n    const x = label.attr('x');\n    const y = label.attr('y');\n    const matrix = transform(label.getMatrix(), [\n      ['t', -x, -y],\n      ['r', angle],\n      ['t', x, y],\n    ]);\n    label.setMatrix(matrix);\n  }\n\n  private getItems(): LabelItem[] {\n    const { offset } = this.options;\n    const { center, radius } = this.getCoordinate();\n    const items = this.arcPoints.map((anchor) => {\n      const point = getEndPoint(center, anchor.angle, radius + offset);\n      const item = { ...anchor, ...point };\n      this.adjustItem(item);\n      return item;\n    });\n    return items;\n  }\n\n  // 初始化圆弧上锚点\n  private initArcPoints(): void {\n    const { angleField } = this.plot.options;\n    const elements = this.getGeometry().elements;\n    const coord = this.getCoordinate();\n    const { center, radius } = coord;\n    let { startAngle } = this.getCoordinate();\n    const scale = this.getGeometry().scales[angleField];\n    const anchors = elements.map((ele) => {\n      const origin = ele.shape.get('origin');\n      const color = origin.color;\n      const originData = origin.data[0] || origin.data;\n      const endAngle = startAngle + Math.PI * 2 * scale.scale(originData[angleField]);\n      const angle = (startAngle + endAngle) / 2;\n      const point = getEndPoint(center, angle, radius);\n      startAngle = endAngle;\n      const name = `${originData[angleField]}`;\n      const textAlign = point.x > center.x ? 'left' : 'right';\n\n      return {\n        x: point.x,\n        y: point.y,\n        color,\n        name,\n        origin: originData,\n        // 实际的角度\n        angle: getAngleByPoint(this.getGeometry().coordinate, point),\n        textAlign,\n      };\n    });\n    this.arcPoints = anchors;\n  }\n}\n","/**\n * 当前一周中的第几天（周日 = 0）\n */\nexport const DAY_FIELD = '$$day$$';\n/**\n * 当前是一年中的第几周\n */\nexport const WEEK_FIELD = '$$week$$';\n/**\n * 日期字段，Date 类型\n */\nexport const DATE_FIELD = '$$date$$';\n/**\n * 数据处理阶段，标记这周是否是当月中间\n */\nexport const IS_MONTH_CENTER_FIELD = '$$is_month_center$$';\n/**\n * 格式化日期\n */\nexport const FORMATTER = 'YYYY-MM-DD';\n/**\n * 月份枚举\n */\nexport const MONTHS = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n/**\n * 周枚举\n */\nexport const WEEKS = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar register_1 = require(\"./register\");\nexports.getBBoxMethod = register_1.getMethod;\nvar rect_1 = require(\"./rect\");\nvar circle_1 = require(\"./circle\");\nvar polyline_1 = require(\"./polyline\");\nvar polygon_1 = require(\"./polygon\");\nvar text_1 = require(\"./text\");\nvar path_1 = require(\"./path\");\nvar line_1 = require(\"./line\");\nvar ellipse_1 = require(\"./ellipse\");\nregister_1.register('rect', rect_1.default);\nregister_1.register('image', rect_1.default); // image 使用 rect 的包围盒计算\nregister_1.register('circle', circle_1.default);\nregister_1.register('marker', circle_1.default); // marker 使用 circle 的计算方案\nregister_1.register('polyline', polyline_1.default);\nregister_1.register('polygon', polygon_1.default);\nregister_1.register('text', text_1.default);\nregister_1.register('path', path_1.default);\nregister_1.register('line', line_1.default);\nregister_1.register('ellipse', ellipse_1.default);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nvar offscreen_1 = require(\"./offscreen\");\n/**\n * 获取文本的高度\n * @param text 文本\n * @param fontSize 字体大小\n * @param lineHeight 行高，可以为空\n */\nfunction getTextHeight(text, fontSize, lineHeight) {\n    var lineCount = 1;\n    if (util_1.isString(text)) {\n        lineCount = text.split('\\n').length;\n    }\n    if (lineCount > 1) {\n        var spaceingY = getLineSpaceing(fontSize, lineHeight);\n        return fontSize * lineCount + spaceingY * (lineCount - 1);\n    }\n    return fontSize;\n}\nexports.getTextHeight = getTextHeight;\n/**\n * 获取行间距如果文本多行，需要获取文本间距\n * @param fontSize 字体大小\n * @param lineHeight 行高\n */\nfunction getLineSpaceing(fontSize, lineHeight) {\n    return lineHeight ? lineHeight - fontSize : fontSize * 0.14;\n}\nexports.getLineSpaceing = getLineSpaceing;\n/**\n * 字体宽度\n * @param text 文本\n * @param font 字体\n */\nfunction getTextWidth(text, font) {\n    var context = offscreen_1.getOffScreenContext(); // 获取离屏的 ctx 进行计算\n    var width = 0;\n    // null 或者 undefined 时，宽度为 0\n    if (util_1.isNil(text) || text === '') {\n        return width;\n    }\n    context.save();\n    context.font = font;\n    if (util_1.isString(text) && text.includes('\\n')) {\n        var textArr = text.split('\\n');\n        util_1.each(textArr, function (subText) {\n            var measureWidth = context.measureText(subText).width;\n            if (width < measureWidth) {\n                width = measureWidth;\n            }\n        });\n    }\n    else {\n        width = context.measureText(text).width;\n    }\n    context.restore();\n    return width;\n}\nexports.getTextWidth = getTextWidth;\nfunction assembleFont(attrs) {\n    var fontSize = attrs.fontSize, fontFamily = attrs.fontFamily, fontWeight = attrs.fontWeight, fontStyle = attrs.fontStyle, fontVariant = attrs.fontVariant;\n    return [fontStyle, fontVariant, fontWeight, fontSize + \"px\", fontFamily].join(' ').trim();\n}\nexports.assembleFont = assembleFont;\n//# sourceMappingURL=text.js.map","import parsePathString from './parse-path-string';\nvar REGEX_MD = /[a-z]/;\nfunction toSymmetry(p, c) {\n    return [\n        c[0] + (c[0] - p[0]),\n        c[1] + (c[1] - p[1]),\n    ];\n}\nexport default function pathToAbsolute(pathString) {\n    var pathArray = parsePathString(pathString);\n    if (!pathArray || !pathArray.length) {\n        return [\n            ['M', 0, 0],\n        ];\n    }\n    var needProcess = false; // 如果存在小写的命令或者 V,H,T,S 则需要处理\n    for (var i = 0; i < pathArray.length; i++) {\n        var cmd = pathArray[i][0];\n        // 如果存在相对位置的命令，则中断返回\n        if (REGEX_MD.test(cmd) || ['V', 'H', 'T', 'S'].indexOf(cmd) >= 0) {\n            needProcess = true;\n            break;\n        }\n    }\n    // 如果不存在相对命令，则直接返回\n    // 如果在业务上都写绝对路径，这种方式最快，仅做了一次检测\n    if (!needProcess) {\n        return pathArray;\n    }\n    var res = [];\n    var x = 0;\n    var y = 0;\n    var mx = 0;\n    var my = 0;\n    var start = 0;\n    var pa0;\n    var dots;\n    var first = pathArray[0];\n    if (first[0] === 'M' || first[0] === 'm') {\n        x = +first[1];\n        y = +first[2];\n        mx = x;\n        my = y;\n        start++;\n        res[0] = ['M', x, y];\n    }\n    for (var i = start, ii = pathArray.length; i < ii; i++) {\n        var pa = pathArray[i];\n        var preParams = res[i - 1]; // 取前一个已经处理后的节点，否则会出现问题\n        var r = [];\n        var cmd = pa[0];\n        var upCmd = cmd.toUpperCase();\n        if (cmd !== upCmd) {\n            r[0] = upCmd;\n            switch (upCmd) {\n                case 'A':\n                    r[1] = pa[1];\n                    r[2] = pa[2];\n                    r[3] = pa[3];\n                    r[4] = pa[4];\n                    r[5] = pa[5];\n                    r[6] = +pa[6] + x;\n                    r[7] = +pa[7] + y;\n                    break;\n                case 'V':\n                    r[1] = +pa[1] + y;\n                    break;\n                case 'H':\n                    r[1] = +pa[1] + x;\n                    break;\n                case 'M':\n                    mx = +pa[1] + x;\n                    my = +pa[2] + y;\n                    break; // for lint\n                default:\n                    for (var j = 1, jj = pa.length; j < jj; j++) {\n                        r[j] = +pa[j] + ((j % 2) ? x : y);\n                    }\n            }\n        }\n        else { // 如果本来已经大写，则不处理\n            r = pathArray[i];\n        }\n        // 需要在外面统一做，同时处理 V,H,S,T 等特殊指令\n        switch (upCmd) {\n            case 'Z':\n                x = +mx;\n                y = +my;\n                break;\n            case 'H':\n                x = r[1];\n                r = ['L', x, y];\n                break;\n            case 'V':\n                y = r[1];\n                r = ['L', x, y];\n                break;\n            case 'T':\n                x = r[1];\n                y = r[2];\n                // 以 x, y 为中心的，上一个控制点的对称点\n                // 需要假设上一个节点的命令为 Q\n                var symetricT = toSymmetry([preParams[1], preParams[2]], [preParams[3], preParams[4]]);\n                r = ['Q', symetricT[0], symetricT[1], x, y];\n                break;\n            case 'S':\n                x = r[r.length - 2];\n                y = r[r.length - 1];\n                // 以 x,y 为中心，取上一个控制点，\n                // 需要假设上一个线段为 C 或者 S\n                var length_1 = preParams.length;\n                var symetricS = toSymmetry([preParams[length_1 - 4], preParams[length_1 - 3]], [preParams[length_1 - 2], preParams[length_1 - 1]]);\n                r = ['C', symetricS[0], symetricS[1], r[1], r[2], x, y];\n                break;\n            case 'M':\n                mx = r[r.length - 2];\n                my = r[r.length - 1];\n                break; // for lint\n            default:\n                x = r[r.length - 2];\n                y = r[r.length - 1];\n        }\n        res.push(r);\n    }\n    return res;\n}\n//# sourceMappingURL=path-2-absolute.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar segments_1 = require(\"./segments\");\nvar util_1 = require(\"./util\");\nexports.default = {\n    /**\n     * 计算多折线的包围盒\n     * @param {array} points 点的集合 [x,y] 的形式\n     * @return {object} 包围盒\n     */\n    box: function (points) {\n        var xArr = [];\n        var yArr = [];\n        for (var i = 0; i < points.length; i++) {\n            var point = points[i];\n            xArr.push(point[0]);\n            yArr.push(point[1]);\n        }\n        return util_1.getBBoxByArray(xArr, yArr);\n    },\n    /**\n     * 计算多折线的长度\n     * @param {array} points 点的集合 [x,y] 的形式\n     * @return {object} 多条边的长度\n     */\n    length: function (points) {\n        return segments_1.lengthOfSegment(points);\n    },\n    /**\n     * 根据比例获取多折线的点\n     * @param {array} points 点的集合 [x,y] 的形式\n     * @param {number} t 在多折线的长度上的比例\n     * @return {object} 根据比例值计算出来的点\n     */\n    pointAt: function (points, t) {\n        return segments_1.pointAtSegments(points, t);\n    },\n    /**\n     * 指定点到多折线的距离\n     * @param {array} points 点的集合 [x,y] 的形式\n     * @param {number} x 指定点的 x\n     * @param {number} y 指定点的 y\n     * @return {number} 点到多折线的距离\n     */\n    pointDistance: function (points, x, y) {\n        return segments_1.distanceAtSegment(points, x, y);\n    },\n    /**\n     * 根据比例获取多折线的切线角度\n     * @param {array} points 点的集合 [x,y] 的形式\n     * @param {number} t 在多折线的长度上的比例\n     * @return {object} 根据比例值计算出来的角度\n     */\n    tangentAngle: function (points, t) {\n        return segments_1.angleAtSegments(points, t);\n    },\n};\n//# sourceMappingURL=polyline.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * @fileoverview 事件处理器\n * @author dxq613@gmail.com\n */\nvar graph_event_1 = require(\"./graph-event\");\nvar util_1 = require(\"../util/util\");\nvar CLICK_OFFSET = 40;\nvar LEFT_BTN_CODE = 0;\nvar DELEGATION_SPLIT = ':';\nvar EVENTS = [\n    'mousedown',\n    'mouseup',\n    'dblclick',\n    'mouseout',\n    'mouseover',\n    'mousemove',\n    'mouseleave',\n    'mouseenter',\n    'touchstart',\n    'touchmove',\n    'touchend',\n    'dragenter',\n    'dragover',\n    'dragleave',\n    'drop',\n    'contextmenu',\n    'mousewheel',\n];\n// 触摸事件的 clientX，clientY 获取有一定差异\nfunction getClientPoint(event) {\n    var clientInfo = event;\n    if (event.touches) {\n        if (event.type === 'touchend') {\n            clientInfo = event.changedTouches[0];\n        }\n        else {\n            clientInfo = event.touches[0];\n        }\n    }\n    return {\n        clientX: clientInfo.clientX,\n        clientY: clientInfo.clientY,\n    };\n}\n// 是否有委托事件监听\nfunction hasDelegation(events, type) {\n    for (var key in events) {\n        if (events.hasOwnProperty(key) && key.indexOf(DELEGATION_SPLIT + type) >= 0) {\n            return true;\n        }\n    }\n    return false;\n}\n// 触发目标事件，目标只能是 shape 或 canvas\nfunction emitTargetEvent(target, type, eventObj) {\n    eventObj.name = type;\n    eventObj.target = target;\n    eventObj.currentTarget = target;\n    eventObj.delegateTarget = target;\n    target.emit(type, eventObj);\n}\n// 事件冒泡, enter 和 leave 需要对 fromShape 和 toShape 进行判同\nfunction bubbleEvent(container, type, eventObj) {\n    if (eventObj.bubbles) {\n        var relativeShape = void 0;\n        var isOverEvent = false;\n        if (type === 'mouseenter') {\n            relativeShape = eventObj.fromShape;\n            isOverEvent = true;\n        }\n        else if (type === 'mouseleave') {\n            isOverEvent = true;\n            relativeShape = eventObj.toShape;\n        }\n        // canvas 上的 mouseenter， mouseleave 事件，仅当进入或者移出 canvas 时触发\n        if (container.isCanvas() && isOverEvent) {\n            return;\n        }\n        // 如果相关图形同当前图形在同一个容器内，不触发事件\n        if (relativeShape && util_1.isParent(container, relativeShape)) {\n            // 阻止继续向上冒泡\n            eventObj.bubbles = false;\n            return;\n        }\n        // 事件名称可能在委托过程中被修改，因此事件冒泡时需要重新设置事件名称\n        eventObj.name = type;\n        eventObj.currentTarget = container;\n        eventObj.delegateTarget = container;\n        container.emit(type, eventObj);\n    }\n}\nvar EventController = /** @class */ (function () {\n    function EventController(cfg) {\n        var _this = this;\n        // 正在被拖拽的图形\n        this.draggingShape = null;\n        this.dragging = false;\n        // 当前鼠标/touch所在位置的图形\n        this.currentShape = null;\n        this.mousedownShape = null;\n        this.mousedownPoint = null;\n        // 统一处理所有的回调\n        this._eventCallback = function (ev) {\n            var type = ev.type;\n            _this._triggerEvent(type, ev);\n        };\n        // 在 document 处理拖拽到画布外的事件，处理从图形上移除画布未被捕捉的问题\n        this._onDocumentMove = function (ev) {\n            var canvas = _this.canvas;\n            var el = canvas.get('el');\n            if (el !== ev.target) {\n                // 不在 canvas 上移动\n                if (_this.dragging || _this.currentShape) {\n                    var pointInfo = _this._getPointInfo(ev);\n                    // 还在拖拽过程中\n                    if (_this.dragging) {\n                        _this._emitEvent('drag', ev, pointInfo, _this.draggingShape);\n                    }\n                    // 说明从某个图形直接移动到了画布外面，\n                    // 修复了 mouseleave 的 bug 后不再出现这种情况\n                    // if (this.currentShape) {\n                    //   this._emitEvent('mouseleave', ev, pointInfo, this.currentShape, this.currentShape, null);\n                    //   this.currentShape = null;\n                    // }\n                }\n            }\n        };\n        // 在 document 上处理拖拽到外面，释放鼠标时触发 dragend\n        this._onDocumentMouseUp = function (ev) {\n            var canvas = _this.canvas;\n            var el = canvas.get('el');\n            if (el !== ev.target) {\n                // 不在 canvas 上移动\n                if (_this.dragging) {\n                    var pointInfo = _this._getPointInfo(ev);\n                    if (_this.draggingShape) {\n                        // 如果存在拖拽的图形，则也触发 drop 事件\n                        _this._emitEvent('drop', ev, pointInfo, null);\n                    }\n                    _this._emitEvent('dragend', ev, pointInfo, _this.draggingShape);\n                    _this._afterDrag(_this.draggingShape, pointInfo, ev);\n                }\n            }\n        };\n        this.canvas = cfg.canvas;\n    }\n    EventController.prototype.init = function () {\n        this._bindEvents();\n    };\n    // 注册事件\n    EventController.prototype._bindEvents = function () {\n        var _this = this;\n        var el = this.canvas.get('el');\n        util_1.each(EVENTS, function (eventName) {\n            el.addEventListener(eventName, _this._eventCallback);\n        });\n        if (document) {\n            // 处理移动到外面没有触发 shape mouse leave 的事件\n            // 处理拖拽到外部的问题\n            document.addEventListener('mousemove', this._onDocumentMove);\n            // 处理拖拽过程中在外部释放鼠标的问题\n            document.addEventListener('mouseup', this._onDocumentMouseUp);\n        }\n    };\n    // 清理事件\n    EventController.prototype._clearEvents = function () {\n        var _this = this;\n        var el = this.canvas.get('el');\n        util_1.each(EVENTS, function (eventName) {\n            el.removeEventListener(eventName, _this._eventCallback);\n        });\n        if (document) {\n            document.removeEventListener('mousemove', this._onDocumentMove);\n            document.removeEventListener('mouseup', this._onDocumentMouseUp);\n        }\n    };\n    EventController.prototype._getEventObj = function (type, event, point, target, fromShape, toShape) {\n        var eventObj = new graph_event_1.default(type, event);\n        eventObj.fromShape = fromShape;\n        eventObj.toShape = toShape;\n        eventObj.x = point.x;\n        eventObj.y = point.y;\n        eventObj.clientX = point.clientX;\n        eventObj.clientY = point.clientY;\n        eventObj.propagationPath.push(target);\n        // 事件的x,y应该是基于画布左上角的，与canvas的matrix无关\n        return eventObj;\n    };\n    // 根据点获取图形，提取成独立方法，便于后续优化\n    EventController.prototype._getShape = function (point, ev) {\n        return this.canvas.getShape(point.x, point.y, ev);\n    };\n    // 获取事件的当前点的信息\n    EventController.prototype._getPointInfo = function (ev) {\n        var canvas = this.canvas;\n        var clientPoint = getClientPoint(ev);\n        var point = canvas.getPointByClient(clientPoint.clientX, clientPoint.clientY);\n        return {\n            x: point.x,\n            y: point.y,\n            clientX: clientPoint.clientX,\n            clientY: clientPoint.clientY,\n        };\n    };\n    // 触发事件\n    EventController.prototype._triggerEvent = function (type, ev) {\n        var pointInfo = this._getPointInfo(ev);\n        // 每次都获取图形有一定成本，后期可以考虑进行缓存策略\n        var shape = this._getShape(pointInfo, ev);\n        var method = this[\"_on\" + type];\n        var leaveCanvas = false;\n        if (method) {\n            method.call(this, pointInfo, shape, ev);\n        }\n        else {\n            var preShape = this.currentShape;\n            // 如果进入、移出画布时存在图形，则要分别触发事件\n            if (type === 'mouseenter' || type === 'dragenter' || type === 'mouseover') {\n                this._emitEvent(type, ev, pointInfo, null, null, shape); // 先进入画布\n                if (shape) {\n                    this._emitEvent(type, ev, pointInfo, shape, null, shape); // 再触发图形的事件\n                }\n                if (type === 'mouseenter' && this.draggingShape) {\n                    // 如果正在拖拽图形, 则触发 dragleave\n                    this._emitEvent('dragenter', ev, pointInfo, null);\n                }\n            }\n            else if (type === 'mouseleave' || type === 'dragleave' || type === 'mouseout') {\n                leaveCanvas = true;\n                if (preShape) {\n                    this._emitEvent(type, ev, pointInfo, preShape, preShape, null); // 先触发图形的事件\n                }\n                this._emitEvent(type, ev, pointInfo, null, preShape, null); // 再触发离开画布事件\n                if (type === 'mouseleave' && this.draggingShape) {\n                    this._emitEvent('dragleave', ev, pointInfo, null);\n                }\n            }\n            else {\n                this._emitEvent(type, ev, pointInfo, shape, null, null); // 一般事件中不需要考虑 from, to\n            }\n        }\n        if (!leaveCanvas) {\n            this.currentShape = shape;\n        }\n        // 当鼠标从画布移动到 shape 或者从 preShape 移动到 shape 时，应用 shape 上的鼠标样式\n        if (shape && !shape.get('destroyed')) {\n            var canvas = this.canvas;\n            var el = canvas.get('el');\n            el.style.cursor = shape.attr('cursor') || canvas.get('cursor');\n        }\n    };\n    // 记录下点击的位置、图形，便于拖拽事件、click 事件的判定\n    EventController.prototype._onmousedown = function (pointInfo, shape, event) {\n        // 只有鼠标左键的 mousedown 事件才会设置 mousedownShape 等属性，避免鼠标右键的 mousedown 事件引起其他事件发生\n        if (event.button === LEFT_BTN_CODE) {\n            this.mousedownShape = shape;\n            this.mousedownPoint = pointInfo;\n            this.mousedownTimeStamp = event.timeStamp;\n        }\n        this._emitEvent('mousedown', event, pointInfo, shape, null, null); // mousedown 不考虑fromShape, toShape\n    };\n    // mouseleave 和 mouseenter 都是成对存在的\n    // mouseenter 和 mouseover 同时触发\n    EventController.prototype._emitMouseoverEvents = function (event, pointInfo, fromShape, toShape) {\n        var el = this.canvas.get('el');\n        if (fromShape !== toShape) {\n            if (fromShape) {\n                this._emitEvent('mouseout', event, pointInfo, fromShape, fromShape, toShape);\n                this._emitEvent('mouseleave', event, pointInfo, fromShape, fromShape, toShape);\n                // 当鼠标从 fromShape 移动到画布上时，重置鼠标样式\n                if (!toShape || toShape.get('destroyed')) {\n                    el.style.cursor = this.canvas.get('cursor');\n                }\n            }\n            if (toShape) {\n                this._emitEvent('mouseover', event, pointInfo, toShape, fromShape, toShape);\n                this._emitEvent('mouseenter', event, pointInfo, toShape, fromShape, toShape);\n            }\n        }\n    };\n    // dragover 不等同于 mouseover，而等同于 mousemove\n    EventController.prototype._emitDragoverEvents = function (event, pointInfo, fromShape, toShape, isCanvasEmit) {\n        if (toShape) {\n            if (toShape !== fromShape) {\n                if (fromShape) {\n                    this._emitEvent('dragleave', event, pointInfo, fromShape, fromShape, toShape);\n                }\n                this._emitEvent('dragenter', event, pointInfo, toShape, fromShape, toShape);\n            }\n            if (!isCanvasEmit) {\n                this._emitEvent('dragover', event, pointInfo, toShape);\n            }\n        }\n        else if (fromShape) {\n            // TODO: 此处判断有问题，当 drag 图形时，也会触发一次 dragleave 事件，因为此时 toShape 为 null，这不是所期望的\n            // 经过空白区域\n            this._emitEvent('dragleave', event, pointInfo, fromShape, fromShape, toShape);\n        }\n        if (isCanvasEmit) {\n            this._emitEvent('dragover', event, pointInfo, toShape);\n        }\n    };\n    // drag 完成后，需要做一些清理工作\n    EventController.prototype._afterDrag = function (draggingShape, pointInfo, event) {\n        if (draggingShape) {\n            draggingShape.set('capture', true); // 恢复可以拾取\n            this.draggingShape = null;\n        }\n        this.dragging = false;\n        // drag 完成后，有可能 draggingShape 已经移动到了当前位置，所以不能直接取当前图形\n        var shape = this._getShape(pointInfo, event);\n        // 拖拽完成后，进行 enter，leave 的判定\n        if (shape !== draggingShape) {\n            this._emitMouseoverEvents(event, pointInfo, draggingShape, shape);\n        }\n        this.currentShape = shape; // 更新当前 shape，如果不处理当前图形的 mouseleave 事件可能会出问题\n    };\n    // 按键抬起时，会终止拖拽、触发点击\n    EventController.prototype._onmouseup = function (pointInfo, shape, event) {\n        // eevent.button === 0 表示鼠标左键事件，此处加上判断主要是为了避免右键鼠标会触发 mouseup 和 click 事件\n        // ref: https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\n        if (event.button === LEFT_BTN_CODE) {\n            var draggingShape = this.draggingShape;\n            if (this.dragging) {\n                // 存在可以拖拽的图形，同时拖拽到其他图形上时触发 drag 事件\n                if (draggingShape) {\n                    this._emitEvent('drop', event, pointInfo, shape);\n                }\n                this._emitEvent('dragend', event, pointInfo, draggingShape);\n                this._afterDrag(draggingShape, pointInfo, event);\n            }\n            else {\n                this._emitEvent('mouseup', event, pointInfo, shape); // 先触发 mouseup 再触发 click\n                if (shape === this.mousedownShape) {\n                    this._emitEvent('click', event, pointInfo, shape);\n                }\n                this.mousedownShape = null;\n                this.mousedownPoint = null;\n            }\n        }\n    };\n    // 当触发浏览器的 dragover 事件时，不会再触发 mousemove ，所以这时候的 dragenter, dragleave 事件需要重新处理\n    EventController.prototype._ondragover = function (pointInfo, shape, event) {\n        event.preventDefault(); // 如果不对 dragover 进行 preventDefault，则不会在 canvas 上触发 drop 事件\n        var preShape = this.currentShape;\n        this._emitDragoverEvents(event, pointInfo, preShape, shape, true);\n    };\n    // 大量的图形事件，都通过 mousemove 模拟\n    EventController.prototype._onmousemove = function (pointInfo, shape, event) {\n        var canvas = this.canvas;\n        var preShape = this.currentShape;\n        var draggingShape = this.draggingShape;\n        // 正在拖拽时\n        if (this.dragging) {\n            // 正在拖拽中\n            if (draggingShape) {\n                // 如果拖拽了 shape 会触发 dragenter, dragleave, dragover 和 drag 事件\n                this._emitDragoverEvents(event, pointInfo, preShape, shape, false);\n            }\n            // 如果存在 draggingShape 则会在 draggingShape 上触发 drag 事件，冒泡到 canvas 上\n            // 否则在 canvas 上触发 drag 事件\n            this._emitEvent('drag', event, pointInfo, draggingShape);\n        }\n        else {\n            var mousedownPoint = this.mousedownPoint;\n            if (mousedownPoint) {\n                // 当鼠标点击下去，同时移动时，进行 drag 判定\n                var mousedownShape = this.mousedownShape;\n                var now = event.timeStamp;\n                var timeWindow = now - this.mousedownTimeStamp;\n                var dx = mousedownPoint.clientX - pointInfo.clientX;\n                var dy = mousedownPoint.clientY - pointInfo.clientY;\n                var dist = dx * dx + dy * dy;\n                if (timeWindow > 120 || dist > CLICK_OFFSET) {\n                    if (mousedownShape && mousedownShape.get('draggable')) {\n                        // 设置了 draggable 的 shape 才能触发 drag 相关的事件\n                        draggingShape = this.mousedownShape; // 拖动鼠标点下时的 shape\n                        draggingShape.set('capture', false); // 禁止继续拾取，否则无法进行 dragover,dragenter,dragleave,drop的判定\n                        this.draggingShape = draggingShape;\n                        this.dragging = true;\n                        this._emitEvent('dragstart', event, pointInfo, draggingShape);\n                        // 清理按下鼠标时缓存的值\n                        this.mousedownShape = null;\n                        this.mousedownPoint = null;\n                    }\n                    else if (!mousedownShape && canvas.get('draggable')) {\n                        // 设置了 draggable 的 canvas 才能触发 drag 相关的事件\n                        this.dragging = true;\n                        this._emitEvent('dragstart', event, pointInfo, null);\n                        // 清理按下鼠标时缓存的值\n                        this.mousedownShape = null;\n                        this.mousedownPoint = null;\n                    }\n                    else {\n                        this._emitMouseoverEvents(event, pointInfo, preShape, shape);\n                        this._emitEvent('mousemove', event, pointInfo, shape);\n                    }\n                }\n                else {\n                    this._emitMouseoverEvents(event, pointInfo, preShape, shape);\n                    this._emitEvent('mousemove', event, pointInfo, shape);\n                }\n            }\n            else {\n                // 没有按键按下时，则直接触发 mouse over 相关的各种事件\n                this._emitMouseoverEvents(event, pointInfo, preShape, shape);\n                // 始终触发移动\n                this._emitEvent('mousemove', event, pointInfo, shape);\n            }\n        }\n    };\n    // 触发事件\n    EventController.prototype._emitEvent = function (type, event, pointInfo, shape, fromShape, toShape) {\n        var eventObj = this._getEventObj(type, event, pointInfo, shape, fromShape, toShape);\n        // 存在 shape 触发，则进行冒泡处理\n        if (shape) {\n            eventObj.shape = shape;\n            // 触发 shape 上的事件\n            emitTargetEvent(shape, type, eventObj);\n            var parent_1 = shape.getParent();\n            // 执行冒泡\n            while (parent_1) {\n                // 委托事件要先触发\n                parent_1.emitDelegation(type, eventObj);\n                // 事件冒泡停止，不能妨碍委托事件\n                if (!eventObj.propagationStopped) {\n                    bubbleEvent(parent_1, type, eventObj);\n                }\n                eventObj.propagationPath.push(parent_1);\n                parent_1 = parent_1.getParent();\n            }\n        }\n        else {\n            // 如果没有 shape 直接在 canvas 上触发\n            var canvas = this.canvas;\n            // 直接触发 canvas 上的事件\n            emitTargetEvent(canvas, type, eventObj);\n        }\n    };\n    EventController.prototype.destroy = function () {\n        // 清理事件\n        this._clearEvents();\n        // 清理缓存的对象\n        this.canvas = null;\n        this.currentShape = null;\n        this.draggingShape = null;\n        this.mousedownPoint = null;\n        this.mousedownShape = null;\n        this.mousedownTimeStamp = null;\n    };\n    return EventController;\n}());\nexports.default = EventController;\n//# sourceMappingURL=event-contoller.js.map","// http://schepers.cc/getting-to-the-point\nexport default function catmullRom2Bezier(crp, z) {\n    var d = [];\n    // @ts-ignore\n    for (var i = 0, iLen = crp.length; iLen - 2 * !z > i; i += 2) {\n        var p = [{\n                x: +crp[i - 2],\n                y: +crp[i - 1],\n            }, {\n                x: +crp[i],\n                y: +crp[i + 1],\n            }, {\n                x: +crp[i + 2],\n                y: +crp[i + 3],\n            }, {\n                x: +crp[i + 4],\n                y: +crp[i + 5],\n            }];\n        if (z) {\n            if (!i) {\n                p[0] = {\n                    x: +crp[iLen - 2],\n                    y: +crp[iLen - 1],\n                };\n            }\n            else if (iLen - 4 === i) {\n                p[3] = {\n                    x: +crp[0],\n                    y: +crp[1],\n                };\n            }\n            else if (iLen - 2 === i) {\n                p[2] = {\n                    x: +crp[0],\n                    y: +crp[1],\n                };\n                p[3] = {\n                    x: +crp[2],\n                    y: +crp[3],\n                };\n            }\n        }\n        else {\n            if (iLen - 4 === i) {\n                p[3] = p[2];\n            }\n            else if (!i) {\n                p[0] = {\n                    x: +crp[i],\n                    y: +crp[i + 1],\n                };\n            }\n        }\n        d.push(['C',\n            (-p[0].x + 6 * p[1].x + p[2].x) / 6,\n            (-p[0].y + 6 * p[1].y + p[2].y) / 6,\n            (p[1].x + 6 * p[2].x - p[3].x) / 6,\n            (p[1].y + 6 * p[2].y - p[3].y) / 6,\n            p[2].x,\n            p[2].y,\n        ]);\n    }\n    return d;\n}\n//# sourceMappingURL=catmull-rom-2-bezier.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar is_array_1 = require(\"@antv/util/lib/is-array\");\nvar SPACES = '\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029';\nvar PATH_COMMAND = new RegExp('([a-z])[' + SPACES + ',]*((-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?[' + SPACES + ']*,?[' + SPACES + ']*)+)', 'ig');\nvar PATH_VALUES = new RegExp('(-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?)[' + SPACES + ']*,?[' + SPACES + ']*', 'ig');\n// Parses given path string into an array of arrays of path segments\nfunction parsePathString(pathString) {\n    if (!pathString) {\n        return null;\n    }\n    if (is_array_1.default(pathString)) {\n        return pathString;\n    }\n    var paramCounts = {\n        a: 7,\n        c: 6,\n        o: 2,\n        h: 1,\n        l: 2,\n        m: 2,\n        r: 4,\n        q: 4,\n        s: 4,\n        t: 2,\n        v: 1,\n        u: 3,\n        z: 0,\n    };\n    var data = [];\n    String(pathString).replace(PATH_COMMAND, function (a, b, c) {\n        var params = [];\n        var name = b.toLowerCase();\n        c.replace(PATH_VALUES, function (a, b) {\n            b && params.push(+b);\n        });\n        if (name === 'm' && params.length > 2) {\n            data.push([b].concat(params.splice(0, 2)));\n            name = 'l';\n            b = b === 'm' ? 'l' : 'L';\n        }\n        if (name === 'o' && params.length === 1) {\n            data.push([b, params[0]]);\n        }\n        if (name === 'r') {\n            data.push([b].concat(params));\n        }\n        else {\n            while (params.length >= paramCounts[name]) {\n                data.push([b].concat(params.splice(0, paramCounts[name])));\n                if (!paramCounts[name]) {\n                    break;\n                }\n            }\n        }\n        return '';\n    });\n    return data;\n}\nexports.default = parsePathString;\n//# sourceMappingURL=parse-path-string.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setMatrixArrayType = setMatrixArrayType;\nexports.toRadian = toRadian;\nexports.equals = equals;\n/**\n * Common utilities\n * @module glMatrix\n */\n\n// Configuration Constants\nvar EPSILON = exports.EPSILON = 0.000001;\nvar ARRAY_TYPE = exports.ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nvar RANDOM = exports.RANDOM = Math.random;\n\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Type} type Array type, such as Float32Array or Array\n */\nfunction setMatrixArrayType(type) {\n  exports.ARRAY_TYPE = ARRAY_TYPE = type;\n}\n\nvar degree = Math.PI / 180;\n\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\nfunction toRadian(a) {\n  return a * degree;\n}\n\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\nfunction equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// 合并包围盒\nfunction mergeBBox(bbox1, bbox2) {\n    if (!bbox1 || !bbox2) {\n        return bbox1 || bbox2;\n    }\n    return {\n        minX: Math.min(bbox1.minX, bbox2.minX),\n        minY: Math.min(bbox1.minY, bbox2.minY),\n        maxX: Math.max(bbox1.maxX, bbox2.maxX),\n        maxY: Math.max(bbox1.maxY, bbox2.maxY),\n    };\n}\nexports.mergeBBox = mergeBBox;\n// 合并箭头的包围盒\nfunction mergeArrowBBox(shape, bbox) {\n    var startArrowShape = shape.get('startArrowShape');\n    var endArrowShape = shape.get('endArrowShape');\n    var startArrowBBox = null;\n    var endArrowBBox = null;\n    if (startArrowShape) {\n        startArrowBBox = startArrowShape.getCanvasBBox();\n        bbox = mergeBBox(bbox, startArrowBBox);\n    }\n    if (endArrowShape) {\n        endArrowBBox = endArrowShape.getCanvasBBox();\n        bbox = mergeBBox(bbox, endArrowBBox);\n    }\n    return bbox;\n}\nexports.mergeArrowBBox = mergeArrowBBox;\n//# sourceMappingURL=util.js.map","import { assign, each, wrapBehavior } from '@antv/util';\nimport { View, ICanvas } from '../dependents';\n\ninterface InteractionCfg {\n  view: View;\n  startEvent?: string;\n  processEvent?: string;\n  endEvent?: string;\n  resetEvent?: string;\n}\n\nexport interface InteractionConstructor {\n  new (cfg: any): Interaction;\n}\n\nconst EVENT_TYPES = ['start', 'process', 'end', 'reset'];\n\nexport default abstract class Interaction {\n  view: View;\n  protected canvas: ICanvas;\n  startEvent: string;\n  processEvent: string;\n  endEvent: string;\n  resetEvent: string;\n  private _eventHandlers: any[];\n  constructor(cfg: InteractionCfg) {\n    const defaultCfg = this.getDefaultCfg();\n    assign(this, defaultCfg, cfg);\n    this.canvas = this.view.canvas;\n    this._eventHandlers = [];\n    this._bindEvents();\n  }\n\n  protected getDefaultCfg() {\n    return {\n      startEvent: 'mousedown',\n      processEvent: 'mousemove',\n      endEvent: 'mouseup',\n      resetEvent: 'dblclick',\n    };\n  }\n\n  private _start(ev) {\n    this.preStart(ev);\n    this.start(ev);\n    this.afterStart(ev);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected preStart(ev): void {\n    return;\n  }\n\n  protected abstract start(ev): void;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected afterStart(ev): void {\n    return;\n  }\n\n  private _process(ev) {\n    this.preProcess(ev);\n    this.process(ev);\n    this.afterProcess(ev);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected preProcess(ev): void {\n    return;\n  }\n\n  //eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected process(ev): void {\n    return;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected afterProcess(ev): void {\n    return;\n  }\n\n  private _end(ev) {\n    this.preEnd(ev);\n    this.end(ev);\n    this.afterEnd(ev);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected preEnd(ev): void {\n    return;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected end(ev): void {\n    return;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected afterEnd(ev): void {\n    return;\n  }\n\n  private _reset(ev?: any) {\n    this.preReset(ev);\n    this.reset(ev);\n    this.afterReset(ev);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected preReset(ev?: any): void {\n    return;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected reset(ev?: any): void {\n    return;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected afterReset(ev?: any): void {\n    return;\n  }\n\n  private _bindEvents() {\n    each(EVENT_TYPES, (type) => {\n      const eventName = this[`${type}Event`];\n      const handler = wrapBehavior(this, `_${type}`);\n      this.view.on(eventName, handler);\n      this._eventHandlers.push({ type: eventName, handler });\n    });\n  }\n\n  private _unbindEvents() {\n    const eventHandlers = this._eventHandlers;\n    each(eventHandlers, (eh) => {\n      this.view.off(eh.type, eh.handler);\n    });\n  }\n\n  public destroy() {\n    this._unbindEvents();\n    this._reset();\n  }\n}\n","/**\n * @description path 计算、转换的辅助工具\n */\n\nimport * as matrixUtil from '@antv/matrix-util';\nimport { each } from '@antv/util';\nconst vector2 = matrixUtil.vec2;\n\ninterface PointObject {\n  x: number;\n  y: number;\n}\n\ntype PointArray = [number, number];\n\nfunction _points2path(points: PointObject[], isInCircle: boolean): any[] {\n  const path = [];\n  if (points.length) {\n    for (let i = 0, length = points.length; i < length; i += 1) {\n      const item = points[i];\n      const command = i === 0 ? 'M' : 'L';\n      path.push([command, item.x, item.y]);\n    }\n\n    if (isInCircle) {\n      path.push(['Z']);\n    }\n  }\n\n  return path;\n}\n\nfunction _getPointRadius(coord, point: PointObject): number {\n  const center = coord.getCenter();\n  const r = Math.sqrt(Math.pow(point.x - center.x, 2) + Math.pow(point.y - center.y, 2));\n  return r;\n}\n\nfunction _convertArr(arr: number[], coord): any[] {\n  const tmp = [arr[0]];\n  for (let i = 1, len = arr.length; i < len; i = i + 2) {\n    const point = coord.convertPoint({\n      x: arr[i],\n      y: arr[i + 1],\n    });\n    tmp.push(point.x, point.y);\n  }\n  return tmp;\n}\n\nfunction _convertPolarPath(pre: any[], cur: any[], coord): any[] {\n  const { isTransposed, startAngle, endAngle } = coord;\n\n  const prePoint = {\n    x: pre[1],\n    y: pre[2],\n  };\n  const curPoint = {\n    x: cur[1],\n    y: cur[2],\n  };\n  const rst = [];\n  const xDim = isTransposed ? 'y' : 'x';\n  const angleRange = Math.abs(curPoint[xDim] - prePoint[xDim]) * (endAngle - startAngle);\n  const direction = curPoint[xDim] >= prePoint[xDim] ? 1 : 0; // 圆弧的方向\n  const flag = angleRange > Math.PI ? 1 : 0; // 大弧还是小弧标志位\n  const convertPoint = coord.convertPoint(curPoint);\n  const r = _getPointRadius(coord, convertPoint);\n  if (r >= 0.5) {\n    // 小于1像素的圆在图像上无法识别\n    if (angleRange === Math.PI * 2) {\n      const middlePoint = {\n        x: (curPoint.x + prePoint.x) / 2,\n        y: (curPoint.y + prePoint.y) / 2,\n      };\n      const middleConvertPoint = coord.convertPoint(middlePoint);\n      rst.push(['A', r, r, 0, flag, direction, middleConvertPoint.x, middleConvertPoint.y]);\n      rst.push(['A', r, r, 0, flag, direction, convertPoint.x, convertPoint.y]);\n    } else {\n      rst.push(['A', r, r, 0, flag, direction, convertPoint.x, convertPoint.y]);\n    }\n  }\n  return rst;\n}\n\n// 当存在整体的圆时，去除圆前面和后面的线，防止出现直线穿过整个圆的情形\nfunction _filterFullCirleLine(path: any[]): void {\n  each(path, (subPath, index) => {\n    const cur = subPath;\n    if (cur[0].toLowerCase() === 'a') {\n      const pre = path[index - 1];\n      const next = path[index + 1];\n      if (next && next[0].toLowerCase() === 'a') {\n        if (pre && pre[0].toLowerCase() === 'l') {\n          pre[0] = 'M';\n        }\n      } else if (pre && pre[0].toLowerCase() === 'a') {\n        if (next && next[0].toLowerCase() === 'l') {\n          next[0] = 'M';\n        }\n      }\n    }\n  });\n}\n\nexport const smoothBezier = (\n  points: PointArray[],\n  smooth: number,\n  isLoop: boolean,\n  constraint: PointArray[]\n): PointArray[] => {\n  const cps = [];\n\n  let prevPoint: PointArray;\n  let nextPoint: PointArray;\n  const hasConstraint = !!constraint;\n  let min: PointArray;\n  let max: PointArray;\n  if (hasConstraint) {\n    min = [Infinity, Infinity];\n    max = [-Infinity, -Infinity];\n\n    for (let i = 0, l = points.length; i < l; i++) {\n      const point = points[i];\n      min = vector2.min([], min, point);\n      max = vector2.max([], max, point);\n    }\n    min = vector2.min([], min, constraint[0]);\n    max = vector2.max([], max, constraint[1]);\n  }\n\n  for (let i = 0, len = points.length; i < len; i++) {\n    const point = points[i];\n    if (isLoop) {\n      prevPoint = points[i ? i - 1 : len - 1];\n      nextPoint = points[(i + 1) % len];\n    } else {\n      if (i === 0 || i === len - 1) {\n        cps.push(point);\n        continue;\n      } else {\n        prevPoint = points[i - 1];\n        nextPoint = points[i + 1];\n      }\n    }\n    let v = [];\n    v = vector2.sub(v, nextPoint, prevPoint);\n    v = vector2.scale(v, v, smooth);\n\n    let d0 = vector2.distance(point, prevPoint);\n    let d1 = vector2.distance(point, nextPoint);\n\n    const sum = d0 + d1;\n    if (sum !== 0) {\n      d0 /= sum;\n      d1 /= sum;\n    }\n\n    const v1 = vector2.scale([], v, -d0);\n    const v2 = vector2.scale([], v, d1);\n\n    let cp0 = vector2.add([], point, v1);\n    let cp1 = vector2.add([], point, v2);\n\n    if (hasConstraint) {\n      cp0 = vector2.max([], cp0, min);\n      cp0 = vector2.min([], cp0, max);\n      cp1 = vector2.max([], cp1, min);\n      cp1 = vector2.min([], cp1, max);\n    }\n\n    cps.push(cp0);\n    cps.push(cp1);\n  }\n\n  if (isLoop) {\n    cps.push(cps.shift());\n  }\n  return cps;\n};\n\n// 贝塞尔曲线\nexport function catmullRom2bezier(crp: number[], z: boolean, constraint: PointArray[]): any[] {\n  const isLoop = !!z;\n  const pointList = [];\n  for (let i = 0, l = crp.length; i < l; i += 2) {\n    pointList.push([crp[i], crp[i + 1]]);\n  }\n\n  const controlPointList = smoothBezier(pointList, 0.4, isLoop, constraint);\n  const len = pointList.length;\n  const d1 = [];\n\n  let cp1: PointArray;\n  let cp2: PointArray;\n  let p: PointArray;\n\n  for (let i = 0; i < len - 1; i++) {\n    cp1 = controlPointList[i * 2];\n    cp2 = controlPointList[i * 2 + 1];\n    p = pointList[i + 1];\n\n    d1.push(['C', cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]]);\n  }\n\n  if (isLoop) {\n    cp1 = controlPointList[len];\n    cp2 = controlPointList[len + 1];\n    p = pointList[0];\n\n    d1.push(['C', cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]]);\n  }\n  return d1;\n}\n\n// 将点连接成路径 path\nexport function getLinePath(points: PointObject[], isInCircle: boolean): any[] {\n  return _points2path(points, isInCircle);\n}\n\n// get spline： 限定了范围的平滑线\nexport function getSplinePath(points: PointObject[], isInCircle: boolean, constaint: any): any[] {\n  const data = [];\n  const first = points[0];\n  let prePoint = null;\n  if (points.length <= 2) {\n    // 两点以内直接绘制成路径\n    return getLinePath(points, isInCircle);\n  }\n  each(points, (point) => {\n    if (!prePoint || !(prePoint.x === point.x && prePoint.y === point.y)) {\n      data.push(point.x);\n      data.push(point.y);\n      prePoint = point;\n    }\n  });\n  const constraint = constaint || [\n    // 范围\n    [0, 0],\n    [1, 1],\n  ];\n  const splinePath = catmullRom2bezier(data, isInCircle, constraint);\n  splinePath.unshift(['M', first.x, first.y]);\n  return splinePath;\n}\n\n// 获取点到圆心的距离\nexport function getPointRadius(coord, point: PointObject): number {\n  return _getPointRadius(coord, point);\n}\n\n// 获取点到圆心的夹角\nexport function getPointAngle(coord, point: PointObject): number {\n  const center = coord.getCenter();\n  return Math.atan2(point.y - center.y, point.x - center.x);\n}\n\nexport function convertNormalPath(coord, path: any[]): any[] {\n  const tmp = [];\n  each(path, (subPath) => {\n    const action = subPath[0];\n    switch (action.toLowerCase()) {\n      case 'm':\n      case 'l':\n      case 'c':\n        tmp.push(_convertArr(subPath, coord));\n        break;\n      case 'z':\n      default:\n        tmp.push(subPath);\n        break;\n    }\n  });\n  return tmp;\n}\n\nexport function convertPolarPath(coord, path: any[]): any[] {\n  let tmp = [];\n  let pre: any[];\n  let cur: any[];\n  let transposed: boolean;\n  let equals: boolean;\n  each(path, (subPath, index) => {\n    const action = subPath[0];\n\n    switch (action.toLowerCase()) {\n      case 'm':\n      case 'c':\n      case 'q':\n        tmp.push(_convertArr(subPath, coord));\n        break;\n      case 'l':\n        pre = path[index - 1];\n        cur = subPath;\n        transposed = coord.isTransposed;\n        // 是否半径相同，转换成圆弧\n        equals = transposed ? pre[pre.length - 2] === cur[1] : pre[pre.length - 1] === cur[2];\n        if (equals) {\n          tmp = tmp.concat(_convertPolarPath(pre, cur, coord));\n        } else {\n          // y 不相等，所以直接转换\n          tmp.push(_convertArr(subPath, coord));\n        }\n        break;\n      case 'z':\n      default:\n        tmp.push(subPath);\n        break;\n    }\n  });\n  _filterFullCirleLine(tmp); // 过滤多余的直线\n  return tmp;\n}\n","import { LooseObject } from '../../dependents';\nimport { isFunction, has, isString } from '@antv/util';\nimport ElementParser from '../base';\n\nexport default class LineParser extends ElementParser {\n  public init() {\n    const props = this.plot.options;\n    this.config = {\n      type: 'line',\n      position: {\n        fields: [props.xField, props.yField],\n      },\n      connectNulls: props.connectNulls,\n    };\n    if (props.lineSize) {\n      this.parseSize();\n    }\n    if (props.smooth) {\n      this.config.shape = { values: ['smooth'] };\n    }\n    if (props.step) {\n      this.config.shape = { values: [props.step] };\n    }\n    if (props.seriesField || props.color) {\n      this.parseColor();\n    }\n    if (props.lineStyle) {\n      this.parseStyle();\n    }\n  }\n\n  public parseSize() {\n    const sizeProps = this.plot.options.lineSize;\n    const config: LooseObject = {};\n    if (isFunction(sizeProps)) {\n      config.callback = sizeProps;\n    } else {\n      config.values = [sizeProps];\n    }\n    this.config.size = config;\n  }\n\n  public parseColor() {\n    const props = this.plot.options;\n    const config: LooseObject = {};\n    if (props.seriesField) {\n      config.fields = [props.seriesField];\n    }\n    if (has(props, 'color')) {\n      const color = props.color;\n      if (isString(color)) {\n        config.values = [color];\n      } else if (isFunction(color)) {\n        config.callback = color;\n      } else {\n        config.values = color as [];\n      }\n    }\n\n    this.config.color = config;\n  }\n\n  public parseStyle() {\n    const props = this.plot.options;\n    const styleProps = props.lineStyle;\n    const config = {\n      fields: null,\n      callback: null,\n      cfg: null,\n    };\n    if (isFunction(styleProps) && props.seriesField) {\n      config.fields = [props.seriesField];\n      config.callback = styleProps;\n    } else {\n      config.cfg = styleProps;\n    }\n    this.config.style = config;\n  }\n}\n","/** 可插拔的responsive模块 */\nimport { IShape, BBox } from '@antv/g-base';\nimport { assign } from '@antv/util';\nimport { constraintsLib } from './constraints/index';\nimport ShapeNodes, { IShapeNode } from './node/shape-nodes';\nimport VariableNodes from './node/variable-node';\nimport { rulesLib } from './rules/index';\nimport { LooseMap } from '../../interface/types';\n\ninterface IConstraint {\n  name: string;\n  option?: any;\n}\n\ninterface IRule {\n  name: string;\n  method?: (...args: any[]) => any;\n  option?: any;\n}\n\ninterface ResponsiveCfg {\n  plot: any;\n  region?: any;\n  nodes: ShapeNodes | VariableNodes;\n  constraints: IConstraint[];\n  rules?: any;\n  iterationTime?: number;\n  onStart?: (...args: any[]) => any;\n  onIteration?: (...args: any[]) => any;\n  onEnd?: (...args: any[]) => any;\n  cfg?: LooseMap;\n}\n\nexport default class Responsive {\n  public plot: any;\n  public region: BBox;\n  public nodes: ShapeNodes | VariableNodes;\n  public constraints: any[];\n  public rules: any[];\n  public iterationTime: number = 10;\n  public iterationIndex: number = 0;\n  public rulesLocker: any[] = [];\n  public currentConstraint: IConstraint;\n  public constraintIndex: number = 0;\n  public onStart: (nodes: ShapeNodes | VariableNodes) => void;\n  public onIteration: (nodes: ShapeNodes | VariableNodes) => void;\n  public onEnd: (nodes: ShapeNodes | VariableNodes) => void;\n\n  constructor(cfg: ResponsiveCfg) {\n    assign(this, cfg);\n    this.currentConstraint = this.constraints[0];\n    if (this.rules) {\n      this.iterationTime = this.rules[this.currentConstraint.name].length;\n    }\n    this._start();\n    this._run();\n    this._end();\n  }\n\n  private _start() {\n    if (this.onStart) {\n      this.onStart(this.nodes);\n    }\n  }\n\n  private _iteration() {\n    let nodes;\n    if (this.nodes.type === 'shape') {\n      nodes = this.nodes as ShapeNodes;\n    } else {\n      nodes = this.nodes as VariableNodes;\n    }\n    if (nodes.type === 'shape') {\n      nodes.measureNodes();\n    }\n    if (this.rules) {\n      this._applyRules();\n    }\n    if (nodes.type === 'shape') {\n      nodes.measureNodes();\n    }\n    if (this.onIteration) {\n      this.onIteration(this.nodes);\n    }\n  }\n\n  private _end() {\n    if (this.onEnd) {\n      this.onEnd(this.nodes);\n    }\n  }\n\n  private _run() {\n    let constraintPassed = this._constraintsTest();\n    while (!constraintPassed) {\n      if (this.iterationIndex > this.iterationTime - 1) {\n        break;\n      }\n      this._iteration();\n      constraintPassed = this._constraintsTest();\n      this.iterationIndex++;\n    }\n    if (this.constraintIndex < this.constraints.length - 1) {\n      this.constraintIndex++;\n      this.currentConstraint = this.constraints[this.constraintIndex];\n      this.iterationTime = this.rules ? this.rules[this.currentConstraint.name].length : 1;\n      this.iterationIndex = 0;\n      this._run();\n    }\n  }\n\n  private _constraintsTest(): boolean {\n    const constraint = constraintsLib[this.currentConstraint.name];\n    const constraintOption = this.currentConstraint.option;\n    if (constraint.usage === 'compare') {\n      return this._constraintCompare(constraint, constraintOption);\n    }\n    return this._constraintAssignment(constraint, constraintOption);\n  }\n\n  private _constraintCompare(constraint, option) {\n    const { type, expression } = constraint;\n    const nodes = this.nodes.nodes;\n    if (type === 'chain') {\n      return this._chainConstraintCompare(expression, nodes, option);\n    }\n    if (type === 'padding') {\n      return this._paddingConstraintCompare(expression, this.region, nodes, option);\n    }\n    if (type === 'group') {\n      return this._groupConstraintCompare(expression, nodes, option);\n    }\n  }\n\n  private _chainConstraintCompare(expression, nodes, option) {\n    for (let i = 0; i < nodes.length - 1; i++) {\n      const a = nodes[i];\n      const b = nodes[i + 1];\n      if (expression(a, b, option) === false) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  private _paddingConstraintCompare(expression, region, nodes, option) {\n    if (region) {\n      for (const node of nodes) {\n        if (expression(node, region, option) === false) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  private _groupConstraintCompare(expression, nodes, option) {\n    for (let i = 0; i < nodes.length; i++) {\n      const a = nodes[i];\n      for (let j = 0; j < nodes.length; j++) {\n        if (j !== i) {\n          const b = nodes[j];\n          if (expression(a, b, option) === false) {\n            return false;\n          }\n        }\n      }\n    }\n    return true;\n  }\n\n  private _constraintAssignment(constraint, option) {\n    const { type, expression } = constraint;\n    const nodes = this.nodes.nodes;\n    if (type === 'chain') {\n      return this._chainConstraintAssign();\n    }\n    if (type === 'padding') {\n      return this._paddingConstraintAssign(expression, this.region, nodes, option);\n    }\n  }\n\n  private _chainConstraintAssign() {\n    return true;\n  }\n\n  private _paddingConstraintAssign(expression, region, nodes, option) {\n    if (region) {\n      for (const node of nodes) {\n        const value = expression(node, region, option);\n        node.value = value;\n      }\n    }\n    return true;\n  }\n\n  private _applyRules() {\n    const ruleCfg = this.rules[this.currentConstraint.name][this.iterationIndex];\n    // if (this.rulesLocker.indexOf(ruleCfg) < 0) {\n    const rule = rulesLib[ruleCfg.name];\n    const option = ruleCfg.option ? ruleCfg.option : {};\n    const nodes = this.nodes.nodes as IShapeNode[];\n    for (let i = 0; i < nodes.length; i++) {\n      const node = nodes[i];\n      /** apply rule上下文 */\n      this._applyRule(node.shape, rule, option, i);\n    }\n    // this.rulesLocker.push(ruleCfg);\n    // }\n  }\n\n  private _applyRule(shape: IShape, rule, option, index) {\n    const cfg = {\n      nodes: this.nodes,\n      region: this.region,\n      plot: this.plot,\n    };\n    // rule(shape, option, index, this);\n    rule(shape, option, index, cfg);\n  }\n}\n","import { get, map, isArray, last } from '@antv/util';\nimport { Element, MappingDatum } from '../../dependents';\nimport BaseLabel, { registerLabelComponent } from '../../components/label/base';\nimport { TextStyle, Label } from '../../interface/config';\n\nexport default class PointLabel<L extends Label = Label> extends BaseLabel<L> {\n  protected getDefaultOptions() {\n    const { theme } = this.layer;\n    const { label = {} } = theme;\n    return {\n      offsetX: 0,\n      offsetY: 0,\n      ...label,\n    };\n  }\n\n  protected getLabelOffset() {\n    return this.getLabelOffsetByDimAndFactor('y', -1);\n  }\n\n  protected getLabelItemAttrs(element: Element, idx: number): TextStyle[] {\n    const { style, formatter } = this.options;\n    const { shape } = element;\n    const mappingData: MappingDatum[] = get(element, 'model.mappingData', []);\n\n    return map(mappingData, (datum) => {\n      const value = this.getValue(datum);\n      return {\n        ...this.getPosition(datum),\n        text: formatter ? formatter(value, shape, idx) : value,\n        textAlign: 'center',\n        textBaseline: 'middle',\n        ...style,\n      };\n    });\n  }\n\n  protected getValue(datum: MappingDatum): number | undefined | null {\n    return get(datum._origin, this.layer.options.yField);\n  }\n\n  protected getPosition(datum: MappingDatum): { x: number; y: number } {\n    const pos = {\n      x: isArray(datum.x) ? last(datum.x) : datum.x,\n      y: isArray(datum.y) ? last(datum.y) : datum.y,\n    };\n    return pos;\n  }\n\n  protected adjustLabel() {\n    return;\n  }\n}\n\nregisterLabelComponent('point', PointLabel);\n","import { registerTheme } from '../../theme';\n\nconst BAR_ACTIVE_STYLE = (style) => {\n  const opacity = style.opacity || 1;\n  return { opacity: opacity * 0.5 };\n};\n\nconst BAR_DISABLE_STYLE = (style) => {\n  const opacity = style.opacity || 1;\n  return { opacity: opacity * 0.5 };\n};\n\nexport const DEFAULT_BAR_THEME = {\n  label: {\n    darkStyle: {\n      fill: '#2c3542',\n      stroke: '#ffffff',\n      fillOpacity: 0.85,\n    },\n    lightStyle: {\n      fill: '#ffffff',\n      stroke: '#ffffff',\n      fillOpacity: 1,\n    },\n  },\n  columnStyle: {\n    normal: {},\n    active: BAR_ACTIVE_STYLE,\n    disable: BAR_DISABLE_STYLE,\n    selected: { lineWidth: 1, stroke: 'black' },\n  },\n};\n\nregisterTheme('bar', DEFAULT_BAR_THEME);\n","import { each, get, deepMix } from '@antv/util';\nimport { Element, IShape } from '../../../dependents';\nimport BaseLabel, { registerLabelComponent } from '../../../components/label/base';\nimport { rgb2arr, mappingColor } from '../../../util/color';\nimport BBox from '../../../util/bbox';\nimport { TextStyle } from '../../../interface/config';\nimport { IBarLabel } from '../interface';\n\nexport default class BarLabel<L extends IBarLabel = IBarLabel> extends BaseLabel<L> {\n  protected getLabelItemAttrs(element: Element, idx: number): TextStyle {\n    const { style, formatter } = this.options;\n    const { shape } = element;\n    const value = this.getValue(element);\n\n    return deepMix({}, style, {\n      ...this.getPosition(element),\n      text: formatter ? formatter(value, shape, idx) : value,\n      fill: this.getTextFill(element),\n      stroke: this.getTextStroke(element),\n      textAlign: this.getTextAlign(element),\n      textBaseline: this.getTextBaseline(),\n    });\n  }\n\n  protected adjustLabel(label: IShape, element: Element): void {\n    const { adjustPosition, style } = this.options;\n    if (adjustPosition) {\n      const offset = this.getDefaultOffset();\n      const labelRange = label.getBBox();\n      const shapeRange = this.getElementShapeBBox(element);\n      if (shapeRange.width <= labelRange.width) {\n        const xPosition = shapeRange.maxX + this.options.offsetX + offset;\n        label.attr('x', xPosition);\n        label.attr('fill', style.fill);\n      }\n    }\n  }\n\n  protected getDefaultOptions() {\n    const { theme } = this.layer;\n    const { label = {} } = theme;\n    return {\n      offsetX: 0,\n      offsetY: 0,\n      adjustPosition: true,\n      ...label,\n    };\n  }\n\n  protected getValue(element: Element): number | undefined | null {\n    return get(element.getData(), this.layer.options.xField);\n  }\n\n  protected getPosition(element: Element): { x: number; y: number } {\n    const offset = this.getDefaultOffset();\n    const value = this.getValue(element);\n    const bbox = this.getElementShapeBBox(element);\n    const { minX, maxX, minY, height, width } = bbox;\n    const { offsetX, offsetY, position } = this.options;\n    const y = minY + height / 2 + offsetY;\n    const dir = value < 0 ? -1 : 1;\n    let x;\n    if (position === 'left') {\n      const root = value > 0 ? minX : maxX;\n      x = root + offset * dir + offsetX;\n    } else if (position === 'right') {\n      const root = value > 0 ? maxX : minX;\n      x = root + offset * dir + offsetX;\n    } else {\n      x = minX + width / 2 + offsetX;\n    }\n\n    return { x, y };\n  }\n\n  protected getTextFill(element: Element) {\n    const { shape } = element;\n    if (this.options.adjustColor && this.options.position !== 'right') {\n      const shapeColor = shape.attr('fill');\n      const shapeOpacity = shape.attr('opacity') ? shape.attr('opacity') : 1;\n      const rgb = rgb2arr(shapeColor);\n      const gray = Math.round(rgb[0] * 0.299 + rgb[1] * 0.587 + rgb[2] * 0.114) / shapeOpacity;\n      const colorBand = [\n        { from: 0, to: 85, color: 'white' },\n        { from: 85, to: 170, color: '#F6F6F6' },\n        { from: 170, to: 255, color: 'black' },\n      ];\n      const reflect = mappingColor(colorBand, gray);\n      return reflect;\n    }\n    const defaultColor = this.options.style.fill;\n    return defaultColor;\n  }\n\n  protected getTextStroke(element: Element) {\n    const fill = this.getTextFill(element);\n    const { position, adjustColor } = this.options;\n    return position !== 'right' && adjustColor && fill !== 'black' ? null : undefined;\n  }\n\n  protected getTextAlign(element: Element) {\n    const value = this.getValue(element);\n    const { position } = this.options;\n    const alignOptions = {\n      right: 'left',\n      left: 'left',\n      middle: 'center',\n    };\n    const alignOptionsReverse = {\n      right: 'right',\n      left: 'right',\n      middle: 'center',\n    };\n    if (value < 0) {\n      return alignOptionsReverse[position];\n    }\n    return alignOptions[position];\n  }\n\n  protected getTextBaseline() {\n    return 'middle';\n  }\n\n  protected getElementShapeBBox(element: Element): BBox {\n    const { shape } = element;\n    const points = [];\n    each(shape.get('origin').points, (p) => {\n      points.push(this.coord.convertPoint(p));\n    });\n    const xValues = points.map((point) => point.x);\n    const xValuesMin = Math.min(...xValues);\n    const xValueMax = Math.max(...xValues);\n    const yValues = points.map((point) => point.y);\n    const yValuesMin = Math.min(...yValues);\n    const yValuesMax = Math.max(...yValues);\n    const bbox = new BBox(xValuesMin, yValuesMin, xValueMax - xValuesMin, yValuesMax - yValuesMin);\n    return bbox;\n  }\n\n  protected getLabelOffset() {\n    // Column 的 offset 在 getPosition 中因 position 不同单独处理\n    return {\n      x: 0,\n      y: 0,\n    };\n  }\n}\n\nregisterLabelComponent('bar', BarLabel);\n","import { deepMix } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport { ElementOption } from '../../interface/config';\nimport BaseBarLayer from '../bar/layer';\nimport { BarViewConfig } from '../bar/interface';\nimport './theme';\nimport './component/label';\nimport './component/label-auto';\nimport { getGeometryByType } from '../../util/view';\n\nexport interface StackedBarViewConfig extends BarViewConfig {\n  stackField: string;\n}\n\nexport interface StackedBarLayerConfig extends StackedBarViewConfig, LayerConfig {}\n\nexport default class StackedBarLayer<T extends StackedBarLayerConfig = StackedBarLayerConfig> extends BaseBarLayer<T> {\n  public static getDefaultOptions() {\n    return deepMix({}, super.getDefaultOptions(), {\n      xAxis: {\n        visible: true,\n        autoRotateTitle: false,\n        grid: {\n          visible: true,\n        },\n        line: {\n          visible: false,\n        },\n        tickLine: {\n          visible: true,\n        },\n        label: {\n          visible: true,\n          autoRotate: true,\n          autoHide: true,\n        },\n        title: {\n          visible: true,\n          offset: 12,\n        },\n      },\n      yAxis: {\n        visible: true,\n        autoRotateTitle: true,\n        grid: {\n          visible: false,\n        },\n        line: {\n          visible: false,\n        },\n        tickLine: {\n          visible: false,\n        },\n        label: {\n          visible: true,\n          autoRotate: true,\n          autoHide: true,\n        },\n        title: {\n          visible: false,\n          offset: 12,\n        },\n      },\n      legend: {\n        visible: true,\n        position: 'top-left',\n        offsetY: 0,\n      },\n    });\n  }\n\n  public type: string = 'stackedBar';\n\n  protected adjustBar(bar: ElementOption) {\n    bar.adjust = [\n      {\n        type: 'stack',\n      },\n    ];\n  }\n\n  protected renderLabel() {\n    const { scales } = this.config;\n    const { label, xField } = this.options;\n    const scale = scales[xField];\n    if (label?.visible) {\n      const geometry = getGeometryByType(this.view, 'interval');\n      this.doRenderLabel(geometry, {\n        type: 'stacked-bar',\n        formatter: scale.formatter,\n        ...this.options.label,\n      });\n    }\n  }\n\n  protected geometryTooltip() {\n    this.bar.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      this.bar.tooltip.fields = tooltipOptions.fields;\n    }\n    if (tooltipOptions.formatter) {\n      this.bar.tooltip.callback = tooltipOptions.formatter;\n      if (!tooltipOptions.fields) {\n        this.bar.tooltip.fields = [this.options.xField, this.options.yField, this.options.stackField];\n      }\n    }\n  }\n}\n\nregisterPlotType('stackedBar', StackedBarLayer);\n","import { groupBy, mapValues, map, flatten, isNumber, reduce, each } from '@antv/util';\nimport { DataItem } from '../interface/config';\n\nexport const transformDataPercentage = (data: DataItem[], groupField: string, measures: string[]): DataItem[] => {\n  // 按照groupBy字段计算各个group的总和\n  let chain = groupBy(data, groupField);\n  chain = mapValues(chain, (items) => map(items, (item) => map(measures, (field) => item[field])));\n  chain = mapValues(chain, flatten);\n  chain = mapValues(chain, (vals) =>\n    map(vals, (val) => {\n      // @ts-ignore\n      const v = Number.parseFloat(val);\n      if (!isNumber(v) || isNaN(v)) {\n        return 0;\n      }\n      return v;\n    })\n  );\n  // @ts-ignore\n  const groupTotals = mapValues(chain, (vals: number[]) => reduce(vals, (sum, val) => sum + val, 0));\n\n  // 覆盖measures字段的值为对于的百分比\n  const newData = map(data, (item) => {\n    const rst = { ...item, _origin: item, total: groupTotals[item[groupField]] };\n    each(measures, (field) => {\n      // @ts-ignore\n      rst[field] = item[field] / groupTotals[item[groupField]];\n    });\n    return rst;\n  });\n\n  // 检查精度，确保总和为1\n  each(groupBy(newData, groupField), (items: DataItem[]) => {\n    let sum = 0;\n    each(items, (item: DataItem, itemIdx: number) => {\n      each(measures, (field: string, fieldIdx: number) => {\n        // @ts-ignore\n        if (sum + item[field] >= 1 || (itemIdx === items.length - 1 && fieldIdx === measures.length - 1)) {\n          item[field] = 1 - sum;\n        }\n        // @ts-ignore\n        sum += item[field];\n      });\n    });\n  });\n\n  // @ts-ignore\n  return newData;\n};\n","import { deepMix, has, each } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport ViewLayer from '../../base/view-layer';\nimport { getGeom } from '../../geoms/factory';\nimport { ElementOption } from '../../interface/config';\nimport './component/label/area-point';\nimport './component/label/area-point-auto';\nimport { extractScale } from '../../util/scale';\nimport responsiveMethods from './apply-responsive';\nimport * as EventParser from './event';\nimport './theme';\nimport { getGeometryByType } from '../../util/view';\nimport { AreaViewConfig } from './interface';\n\nconst GEOM_MAP = {\n  area: 'area',\n  line: 'line',\n  point: 'point',\n};\n\nexport interface AreaLayerConfig extends AreaViewConfig, LayerConfig {}\n\nexport default class AreaLayer<T extends AreaLayerConfig = AreaLayerConfig> extends ViewLayer<T> {\n  public static getDefaultOptions(): any {\n    return deepMix({}, super.getDefaultOptions(), {\n      smooth: false,\n      areaStyle: {\n        opacity: 0.25,\n      },\n      line: {\n        visible: true,\n        size: 2,\n        style: {\n          opacity: 1,\n          lineJoin: 'round',\n          lineCap: 'round',\n        },\n      },\n      point: {\n        visible: false,\n        size: 4,\n        shape: 'point',\n      },\n      label: {\n        visible: false,\n        type: 'point',\n      },\n      legend: {\n        visible: true,\n        position: 'top-left',\n        wordSpacing: 4,\n      },\n      tooltip: {\n        visible: true,\n        shared: true,\n        showCrosshairs: true,\n        crosshairs: {\n          type: 'x',\n        },\n        offset: 20,\n      },\n    });\n  }\n\n  public line: any;\n  public point: any;\n  public area: any;\n  public type: string = 'area';\n\n  public beforeInit() {\n    super.beforeInit();\n    /** 响应式图形 */\n    if (this.options.responsive && this.options.padding !== 'auto') {\n      this.applyResponsive('preRender');\n    }\n  }\n\n  public afterRender() {\n    this.renderLabel();\n    /** 响应式 */\n    if (this.options.responsive && this.options.padding !== 'auto') {\n      this.applyResponsive('afterRender');\n    }\n    super.afterRender();\n  }\n\n  protected geometryParser(dim, type) {\n    return GEOM_MAP[type];\n  }\n\n  protected scale() {\n    const props = this.options;\n    const scales = {};\n    /** 配置x-scale */\n    scales[props.xField] = {\n      type: 'cat',\n    };\n    if (has(props, 'xAxis')) {\n      extractScale(scales[props.xField], props.xAxis);\n    }\n    /** 配置y-scale */\n    scales[props.yField] = {};\n    if (has(props, 'yAxis')) {\n      extractScale(scales[props.yField], props.yAxis);\n    }\n    this.setConfig('scales', scales);\n    super.scale();\n  }\n\n  protected coord() {\n    return null;\n  }\n\n  protected addGeometry() {\n    const props: any = this.options;\n    const area = getGeom('area', 'main', {\n      plot: this,\n    });\n    this.area = area;\n\n    if (props.label) {\n      this.label();\n    }\n\n    if (props.tooltip && (props.tooltip.fields || props.tooltip.formatter)) {\n      this.geometryTooltip();\n    }\n\n    this.adjustArea(area);\n    this.setConfig('geometry', area);\n\n    this.addLine();\n\n    this.addPoint();\n  }\n\n  //eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected adjustArea(area: ElementOption) {\n    return;\n  }\n\n  //eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected adjustLine(line?: ElementOption) {\n    return;\n  }\n\n  //eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected adjustPoint(point?: ElementOption) {\n    return;\n  }\n\n  protected addLine() {\n    const props: any = this.options;\n    const lineConfig = deepMix({}, props.line);\n    if (lineConfig.visible) {\n      const line = getGeom('line', 'guide', {\n        type: 'line',\n        plot: this,\n        line: lineConfig,\n      });\n      this.adjustLine(line);\n      this.setConfig('geometry', line);\n      this.line = line;\n    }\n  }\n\n  protected addPoint() {\n    const props = this.options;\n    const pointConfig = deepMix({}, props.point);\n    if (pointConfig.visible) {\n      const point = getGeom('point', 'guide', {\n        plot: this,\n      });\n      this.adjustPoint(point);\n      this.setConfig('geometry', point);\n      this.point = point;\n    }\n  }\n\n  protected renderLabel() {\n    const { scales } = this.config;\n    const { label, yField } = this.options;\n    const scale = scales[yField];\n    if (label.visible) {\n      const geometry = getGeometryByType(this.view, 'area');\n      this.doRenderLabel(geometry, {\n        type: 'area-point',\n        formatter: scale.formatter,\n        ...this.options.label,\n      });\n    }\n  }\n\n  protected animation() {\n    super.animation();\n    const props = this.options;\n    if (props.animation === false) {\n      // 关闭动画\n      this.area.animate = false;\n      if (this.line) this.line.animate = false;\n      if (this.point) this.point.animate = false;\n    }\n  }\n\n  protected label() {\n    return;\n  }\n\n  protected geometryTooltip() {\n    this.area.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      this.area.tooltip.fields = tooltipOptions.fields;\n    }\n    if (tooltipOptions.formatter) {\n      this.area.tooltip.callback = tooltipOptions.formatter;\n      if (!tooltipOptions.fields) {\n        this.area.tooltip.fields = [this.options.xField, this.options.yField];\n        if (this.options.seriesField) {\n          this.area.tooltip.fields.push(this.options.seriesField);\n        }\n      }\n    }\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n\n  private applyResponsive(stage) {\n    const methods = responsiveMethods[stage];\n    each(methods, (r) => {\n      const responsive = r as any;\n      responsive.method(this);\n    });\n  }\n}\n\nregisterPlotType('area', AreaLayer);\n","import { deepMix, get, each } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport { ElementOption, Label } from '../../interface/config';\nimport BaseArea from '../area/layer';\nimport { getPlotComponents } from './component';\nimport './component/label/area-point';\nimport './component/label/area-point-auto';\nimport { StackedAreaViewConfig } from './interface';\nimport './theme';\n\nexport interface StackedAreaLayerConfig extends StackedAreaViewConfig, LayerConfig {}\n\nexport default class StackedAreaLayer<T extends StackedAreaLayerConfig = StackedAreaLayerConfig> extends BaseArea<T> {\n  protected plotComponents: any[] = [];\n\n  public static getDefaultOptions(): any {\n    return deepMix({}, super.getDefaultOptions(), {\n      label: {\n        visible: false,\n        type: 'area',\n      },\n    });\n  }\n\n  public type: string = 'stackedArea';\n\n  public beforeInit() {\n    const visible = get(this.options, ['label', 'visible']);\n    const type = get(this.options, ['label', 'type']);\n    const options: any = this.options;\n    if (visible) {\n      if (type === 'line') {\n        options.lineLabel = this.options.label;\n      }\n      if (type === 'area') {\n        options.areaLabel = this.options.label;\n      }\n    }\n    super.beforeInit();\n  }\n\n  protected label() {\n    const props = this.options;\n    const label = props.label as Label;\n\n    if (label && label.visible === false) {\n      if (this.line) {\n        this.line.label = false;\n      }\n      if (this.point) {\n        this.point.label = false;\n      }\n      this.area.label = false;\n      return;\n    }\n  }\n\n  protected adjustArea(ele: ElementOption) {\n    ele.adjust = [\n      {\n        type: 'stack',\n      },\n    ];\n  }\n\n  protected adjustLine(ele: ElementOption) {\n    ele.adjust = [\n      {\n        type: 'stack',\n      },\n    ];\n  }\n\n  protected adjustPoint(ele: ElementOption) {\n    ele.adjust = [\n      {\n        type: 'stack',\n      },\n    ];\n  }\n\n  public afterRender() {\n    this.renderPlotComponents();\n    this.options.responsive = false;\n    super.afterRender();\n  }\n\n  protected geometryTooltip() {\n    this.area.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      this.area.tooltip.fields = tooltipOptions.fields;\n    }\n    if (tooltipOptions.formatter) {\n      this.area.tooltip.callback = tooltipOptions.formatter;\n      if (!tooltipOptions.fields) {\n        this.area.tooltip.fields = [this.options.xField, this.options.yField, this.options.stackField];\n      }\n    }\n  }\n\n  protected renderPlotComponents() {\n    const componentsType = ['areaLabel', 'lineLabel'];\n    each(componentsType, (t) => {\n      const cfg = {\n        view: this.view,\n        plot: this,\n        ...this.options[t],\n      };\n      const component = getPlotComponents(this, t, cfg);\n      if (component) {\n        component.render();\n        this.plotComponents.push(component);\n      }\n    });\n  }\n}\n\nregisterPlotType('stackedArea', StackedAreaLayer);\n","import { registerTheme } from '../../theme';\n\nconst COLUMN_ACTIVE_STYLE = (style) => {\n  const opacity = style.opacity || 1;\n  return { opacity: opacity * 0.5 };\n};\n\nconst COLUMN_DISABLE_STYLE = (style) => {\n  const opacity = style.opacity || 1;\n  return { opacity: opacity * 0.5, fillOpacity: opacity * 0.5 };\n};\n\nexport const DEFAULT_COLUMN_THEME = {\n  label: {\n    darkStyle: {\n      fill: '#2c3542',\n      stroke: '#ffffff',\n      fillOpacity: 0.85,\n    },\n    lightStyle: {\n      fill: '#ffffff',\n      stroke: '#ffffff',\n      fillOpacity: 1,\n    },\n  },\n  columnStyle: {\n    normal: {},\n    active: COLUMN_ACTIVE_STYLE,\n    disable: COLUMN_DISABLE_STYLE,\n    selected: { lineWidth: 1, stroke: 'black' },\n  },\n};\n\nregisterTheme('column', DEFAULT_COLUMN_THEME);\n","import { deepMix } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport ConnectedArea from '../../components/connected-area';\nimport { ElementOption } from '../../interface/config';\nimport BaseColumnLayer from '../column/layer';\nimport { ColumnViewConfig } from '../column/interface';\nimport './theme';\nimport './component/label';\nimport './component/label-auto';\nimport { getGeometryByType } from '../../util/view';\n\nexport interface StackedColumnViewConfig extends ColumnViewConfig {\n  stackField: string;\n  connectedArea?: any;\n}\n\nexport interface StackedColumnLayerConfig extends StackedColumnViewConfig, LayerConfig {}\n\nexport default class StackedColumnLayer<\n  T extends StackedColumnLayerConfig = StackedColumnLayerConfig\n> extends BaseColumnLayer<T> {\n  public static getDefaultOptions() {\n    return deepMix({}, super.getDefaultOptions(), {\n      legend: {\n        visible: true,\n        position: 'right-top',\n      },\n      label: {\n        visible: false,\n        position: 'middle',\n        offset: 0,\n        adjustColor: true,\n      },\n      connectedArea: {\n        visible: false,\n        triggerOn: 'mouseenter',\n      },\n    });\n  }\n\n  public type: string = 'stackedColumn';\n  public connectedArea: any;\n\n  public init() {\n    if (this.options.connectedArea.visible) {\n      this.options.tooltip.crosshairs = null;\n    }\n    super.init();\n  }\n\n  public afterRender() {\n    const props = this.options;\n    // 绘制区域连接组件\n    if (props.connectedArea.visible) {\n      this.connectedArea = new ConnectedArea({\n        view: this.view,\n        field: props.stackField,\n        animation: props.animation === false ? false : true,\n        ...props.connectedArea,\n      });\n    }\n    super.afterRender();\n  }\n\n  protected adjustColumn(column: ElementOption) {\n    column.adjust = [\n      {\n        type: 'stack',\n      },\n    ];\n  }\n\n  protected renderLabel() {\n    const { scales } = this.config;\n    const { label, yField } = this.options;\n    const scale = scales[yField];\n    if (label && label.visible) {\n      const geometry = getGeometryByType(this.view, 'interval');\n      this.doRenderLabel(geometry, {\n        type: 'stacked-column',\n        formatter: scale.formatter,\n        ...this.options.label,\n      });\n    }\n  }\n\n  protected geometryTooltip() {\n    this.column.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      this.column.tooltip.fields = tooltipOptions.fields;\n    }\n    if (tooltipOptions.formatter) {\n      this.column.tooltip.callback = tooltipOptions.formatter;\n      if (!tooltipOptions.fields) {\n        this.column.tooltip.fields = [this.options.xField, this.options.yField, this.options.stackField];\n      }\n    }\n  }\n}\n\nregisterPlotType('stackedColumn', StackedColumnLayer);\n","export interface Point {\n  x: number;\n  y: number;\n}\n\nexport function getEndPoint(center, angle, r): Point {\n  return {\n    x: center.x + r * Math.cos(angle),\n    y: center.y + r * Math.sin(angle),\n  };\n}\n\nexport interface Box {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\n/** 获取矩形中点 */\nexport function getCenter(box: Box): Point {\n  return {\n    x: box.x + box.width / 2,\n    y: box.y + box.height / 2,\n  };\n}\n\nexport function getOverlapArea(a: Box, b: Box, margin = 0): number {\n  const xOverlap = Math.max(\n    0,\n    Math.min(a.x + a.width + margin, b.x + b.width + margin) - Math.max(a.x - margin, b.x - margin)\n  );\n  const yOverlap = Math.max(\n    0,\n    Math.min(a.y + a.height + margin, b.y + b.height + margin) - Math.max(a.y - margin, b.y - margin)\n  );\n  return xOverlap * yOverlap;\n}\n\n/**\n * 计算两个矩形之间的堆叠情况\n * @return xOverlap x方向重叠大小\n * @return yOverlap y方向重叠大小\n */\nexport function getOverlapInfo(a: Box, b: Box, margin = 0): { xOverlap: number; yOverlap: number } {\n  let xOverlap = Math.max(\n    0,\n    Math.min(a.x + a.width + margin, b.x + b.width + margin) - Math.max(a.x - margin, b.x - margin)\n  );\n  let yOverlap = Math.max(\n    0,\n    Math.min(a.y + a.height + margin, b.y + b.height + margin) - Math.max(a.y - margin, b.y - margin)\n  );\n\n  // 添加 sign\n  if (xOverlap && a.x < b.x) {\n    xOverlap = -xOverlap;\n  }\n  if (yOverlap && a.y < b.y) {\n    yOverlap = -yOverlap;\n  }\n\n  // 重叠\n  if (a.x === b.x && a.width === b.width) {\n    xOverlap = b.width;\n  }\n  if (a.y === b.y && a.height === b.height) {\n    yOverlap = b.height;\n  }\n\n  return { xOverlap, yOverlap };\n}\n\n/**\n * 粗略地判断是否在panel内部\n * @param panel\n * @param shape\n */\nexport function inPanel(panel: Box, shape: Box) {\n  return (\n    panel.x < shape.x &&\n    panel.x + panel.width > shape.x + shape.width &&\n    panel.y < shape.y &&\n    panel.y + panel.height > shape.y + shape.height\n  );\n}\n\n/**\n * 判断两个数值 是否接近\n * - 解决精度问题（由于无法确定精度上限，根据具体场景可传入 精度 参数）\n */\nexport const near = (x: number, y: number, e: number = Number.EPSILON ** 0.5): boolean =>\n  [x, y].includes(Infinity) ? Math.abs(x) === Math.abs(y) : Math.abs(x - y) < e;\n\n/**\n * 获取点到圆心的连线与水平方向的夹角\n */\nexport function getAngleByPoint(coordinate, point): number {\n  const center = coordinate.getCenter();\n  return Math.atan2(point.y - center.y, point.x - center.x);\n}\n\n/**\n * 获取 label 的旋转角度\n * @param angle\n */\nexport function getLabelRotate(angle: number) {\n  const HALF_PI = Math.PI / 2;\n  let rotate = angle;\n  if (rotate > HALF_PI || rotate < -HALF_PI) {\n    rotate = rotate + Math.PI;\n  }\n  return rotate;\n}\n","/**\n * Create By Bruce Too\n * On 2020-02-17\n */\nimport { deepMix } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../..';\nimport ViewLayer, { ViewConfig } from '../../base/view-layer';\nimport { getComponent } from '../../components/factory';\nimport { getGeom } from '../../geoms/factory';\nimport { Label } from '../..';\nimport * as EventParser from './event';\nimport { GraphicStyle } from '../../interface/config';\n\nexport interface RoseViewConfig extends ViewConfig {\n  radiusField: string;\n  categoryField: string;\n  colorField?: string;\n  radius?: number;\n  innerRadius?: number;\n  /** 每个扇形切片的样式 */\n  sectorStyle?: GraphicStyle | ((...args: any[]) => GraphicStyle);\n  label?: RoseLabel;\n}\n\ntype RoseLabel = ViewConfig['label'] & {\n  type: 'outer' | 'inner';\n  /** 自动调整颜色 */\n  adjustColor?: boolean;\n  /** 自动旋转 */\n  autoRotate?: boolean;\n  // label的内容，如果不配置，读取scale中的第一个field对应的值  G2 4.0 就这样实现的\n  content?: string | ((...args: any[]) => string);\n};\n\nexport interface RoseLayerConfig extends RoseViewConfig, LayerConfig {}\n\nconst G2_GEOM_MAP = {\n  rose: 'interval',\n};\n\nconst PLOT_GEOM_MAP = {\n  rose: 'column',\n};\n\nexport default class RoseLayer<T extends RoseLayerConfig = RoseLayerConfig> extends ViewLayer<T> {\n  public static getDefaultOptions(): any {\n    return deepMix({}, super.getDefaultOptions(), {\n      width: 400,\n      height: 400,\n      title: {\n        visible: false,\n      },\n      description: {\n        visible: false,\n      },\n      forceFit: true,\n      padding: 'auto',\n      radius: 0.8,\n      innerRadius: 0,\n      label: {\n        visible: true,\n        type: 'inner',\n        autoRotate: true,\n        adjustColor: false,\n      },\n      legend: {\n        visible: true,\n        position: 'right',\n      },\n      tooltip: {\n        visible: true,\n        shared: false,\n        showCrosshairs: false,\n        showMarkers: false,\n      },\n      columnStyle: {\n        stroke: 'white',\n        lineWidth: 1,\n      },\n      xAxis: {\n        visible: false,\n        line: {\n          visible: false,\n        },\n        tickLine: {\n          visible: false,\n        },\n        grid: {\n          visible: true,\n          alignTick: false,\n          style: {\n            lineWidth: 0.5,\n          },\n        },\n        label: {\n          offset: 5,\n          autoRotate: true,\n        },\n      },\n      yAxis: {\n        visible: false,\n      },\n    });\n  }\n\n  public rose: any;\n  public type: string = 'rose';\n\n  public getOptions(props: T) {\n    const options = super.getOptions(props);\n    const columnStyle = props.sectorStyle;\n    const xField = props.categoryField;\n    const yField = props.radiusField;\n    return deepMix({}, options, { columnStyle, xField, yField });\n  }\n\n  protected geometryParser(dim, type) {\n    if (dim === 'g2') {\n      return G2_GEOM_MAP[type];\n    }\n    return PLOT_GEOM_MAP[type];\n  }\n\n  protected scale() {\n    // super.scale();\n    const props = this.options;\n    const scales = {};\n    scales[props.radiusField] = {};\n    scales[props.categoryField] = { type: 'cat' };\n    this.setConfig('scales', scales);\n  }\n\n  /** 不显示坐标轴 */\n  /*protected axis() {\n    super.axis();\n    const options = this.options;\n    if (!options.stackField && !options.groupField) {\n      this.setConfig('axes', false);\n    }\n  }*/\n\n  protected coord() {\n    const props = this.options;\n    const coordConfig = {\n      type: 'polar',\n      cfg: {\n        radius: props.radius,\n        innerRadius: props.innerRadius || 0,\n      },\n    };\n    this.setConfig('coordinate', coordConfig as any);\n  }\n\n  protected addGeometry() {\n    const options = this.options;\n    const rose = getGeom('interval', 'main', {\n      plot: this,\n      positionFields: [options.categoryField, options.radiusField],\n      widthRatio: {\n        rose: 1,\n      },\n    });\n    rose.label = this.extractLabel();\n    rose.adjust = this.adjustRoseAdjust();\n    this.rose = rose;\n    if (options.tooltip && (options.tooltip.fields || options.tooltip.formatter)) {\n      this.geometryTooltip();\n    }\n    this.setConfig('geometry', rose);\n  }\n\n  protected adjustRoseAdjust() {\n    return;\n  }\n\n  protected geometryTooltip() {\n    this.rose.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      this.rose.tooltip.fields = tooltipOptions.fields;\n    }\n    if (tooltipOptions.formatter) {\n      this.rose.tooltip.callback = tooltipOptions.formatter;\n      if (!tooltipOptions.fields) {\n        this.rose.tooltip.fields = [this.options.radiusField, this.options.categoryField, this.options.colorField];\n      }\n    }\n  }\n\n  protected animation() {\n    super.animation();\n    const props = this.options;\n    if (props.animation === false) {\n      /** 关闭动画 */\n      this.rose.animate = false;\n    }\n  }\n\n  protected annotation() {\n    return;\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n\n  protected extractLabel() {\n    const options = this.options;\n    if (!options.label || !options.label.visible) {\n      return false;\n    }\n    const label = deepMix({}, options.label as Label);\n    this.adjustLabelOptions(label);\n    const fields = [options.categoryField, options.radiusField];\n    const labelConfig = getComponent('label', {\n      plot: this,\n      labelType: 'polar',\n      fields,\n      ...label,\n    });\n    return labelConfig;\n  }\n\n  private adjustLabelOptions(labelOptions: RoseLabel) {\n    const { radiusField } = this.options;\n    if (labelOptions) {\n      const { offset, type, content } = labelOptions;\n      if (type === 'inner') {\n        labelOptions.offset = offset < 0 ? offset : -10;\n      } else if (type === 'outer') {\n        labelOptions.offset = offset >= 0 ? offset : 10;\n      }\n      if (!content) {\n        // 默认显示 数值\n        labelOptions.content = (text, item) => `${item._origin[radiusField]}`;\n      }\n    }\n  }\n}\n\nregisterPlotType('rose', RoseLayer);\n","/**\n * Create By Bruce Too\n * On 2020-02-18\n */\nimport { deepMix, get, map, isArray, reduce, has, isFunction, isString, isObject } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport './geometry/shape/waterfall';\nimport { ElementOption, DataItem, LayerConfig } from '../..';\nimport ViewLayer, { ViewConfig } from '../../base/view-layer';\nimport { extractScale } from '../../util/scale';\nimport { AttributeCfg } from '@antv/attr';\nimport { getComponent } from '../../components/factory';\nimport * as EventParser from './event';\nimport './component/label/waterfall-label';\nimport DiffLabel, { DiffLabelcfg } from './component/label/diff-label';\nimport { LineStyle, TextStyle, GraphicStyle } from '../../interface/config';\nimport { getGeometryByType } from '../../util/view';\n\nconst G2_GEOM_MAP = {\n  waterfall: 'interval',\n};\n\nconst PLOT_GEOM_MAP = {\n  interval: 'waterfall',\n};\n\nexport const VALUE_FIELD = '$$value$$';\nexport const IS_TOTAL = '$$total$$';\nconst INDEX_FIELD = '$$index$$';\n\nexport interface WaterfallViewConfig extends ViewConfig {\n  showTotal?: {\n    visible: boolean;\n    label: string;\n  };\n  /** 差值label */\n  diffLabel?: {\n    visible: boolean;\n    style?: TextStyle;\n    formatter?: DiffLabelcfg['formatter'];\n  };\n  leaderLine?: {\n    visible: boolean;\n    style?: LineStyle;\n  };\n  color?:\n    | string\n    | { rising: string; falling: string; total?: string }\n    | ((type: string, value: number | null, values: number | number[], index: number) => string);\n  waterfallStyle?: GraphicStyle | ((...args: any[]) => GraphicStyle);\n}\n\nexport interface WaterfallLayerConfig extends WaterfallViewConfig, LayerConfig {}\n\nexport default class WaterfallLayer extends ViewLayer<WaterfallLayerConfig> {\n  public waterfall;\n  public type: string = 'watarfall';\n  public diffLabel;\n\n  public static getDefaultOptions(): Partial<WaterfallLayerConfig> {\n    return deepMix({}, super.getDefaultOptions(), {\n      legend: {\n        visible: false,\n        position: 'bottom',\n      },\n      label: {\n        visible: true,\n        adjustPosition: true,\n      },\n      /** 差值 label */\n      diffLabel: {\n        visible: true,\n      },\n      /** 迁移线 */\n      leaderLine: {\n        visible: true,\n      },\n      /** 显示总计 */\n      showTotal: {\n        visible: true,\n        label: '总计值',\n      },\n      waterfallStyle: {\n        /** 默认无描边 */\n        lineWidth: 0,\n      },\n      tooltip: {\n        visible: true,\n        shared: true,\n        showCrosshairs: false,\n        showMarkers: false,\n      },\n    });\n  }\n\n  public getOptions(props: WaterfallLayerConfig) {\n    const options = super.getOptions(props);\n    this.adjustLegendOptions(options);\n    this.adjustMeta(options);\n    return options;\n  }\n\n  public afterInit() {\n    super.afterInit();\n    const options = this.options;\n    if (options.diffLabel && options.diffLabel.visible) {\n      this.diffLabel = new DiffLabel({\n        view: this.view,\n        fields: [options.xField, options.yField, VALUE_FIELD],\n        formatter: options.diffLabel.formatter,\n        style: options.diffLabel.style,\n      });\n    } else if (this.diffLabel) {\n      this.diffLabel.clear();\n      this.diffLabel = null;\n    }\n  }\n\n  public afterRender() {\n    super.afterRender();\n    const options = this.options;\n    this.view.on('tooltip:change', (e) => {\n      const { items } = e;\n      for (let i = 0; i < items.length; i++) {\n        const item = items[i];\n        const data = get(item, 'data', {});\n        // 改变 tooltip 显示的name和value\n        item.name = data[options.xField];\n        item.value = data[options.yField];\n        if (!item.value && data[IS_TOTAL]) {\n          const values = data[VALUE_FIELD];\n          item.value = values[0] - values[1];\n        }\n        e.items[i] = item;\n      }\n    });\n    this.renderLabel();\n  }\n\n  protected renderLabel() {\n    const geometry = getGeometryByType(this.view, 'interval');\n    if (this.options.label && this.options.label.visible) {\n      this.doRenderLabel(geometry, {\n        type: 'waterfall',\n        ...this.options.label,\n      });\n    }\n  }\n\n  protected geometryParser(dim, type) {\n    if (dim === 'g2') {\n      return G2_GEOM_MAP[type];\n    }\n    return PLOT_GEOM_MAP[type];\n  }\n\n  protected interaction() {\n    this.setConfig('interactions', [{ type: 'tooltip' }, { type: 'active-region' }]);\n  }\n\n  protected addGeometry() {\n    const options = this.options;\n    const waterfall: ElementOption = {\n      type: 'interval',\n      position: {\n        fields: [options.xField, VALUE_FIELD],\n      },\n      shape: {\n        values: ['waterfall'],\n      },\n    };\n    waterfall.style = this._parseStyle();\n    waterfall.color = this._parseColor();\n    this.waterfall = waterfall;\n    if (this.options.tooltip && (this.options.tooltip.fields || this.options.tooltip.formatter)) {\n      this.geometryTooltip();\n    }\n    this.setConfig('geometry', waterfall);\n  }\n\n  protected processData(originData?: DataItem[]) {\n    const plotData = [];\n    const xField = this.options.xField;\n    const yField = this.options.yField;\n    map(originData, (dataItem, idx: number) => {\n      let value: any = dataItem[yField];\n      if (idx > 0) {\n        const prevValue = plotData[idx - 1][VALUE_FIELD];\n        if (isArray(prevValue)) {\n          value = [prevValue[1], dataItem[yField] + prevValue[1]];\n        } else {\n          value = [prevValue, dataItem[yField] + prevValue];\n        }\n      }\n      plotData.push({\n        ...dataItem,\n        [VALUE_FIELD]: value,\n        [INDEX_FIELD]: idx,\n      });\n    });\n    if (this.options.showTotal && this.options.showTotal.visible) {\n      const values = map(originData, (o) => o[yField]);\n      const totalValue = reduce(values, (p: number, n: number) => p + n, 0);\n      plotData.push({\n        [xField]: this.options.showTotal.label,\n        [yField]: null,\n        [VALUE_FIELD]: [totalValue, 0],\n        [INDEX_FIELD]: plotData.length,\n        [IS_TOTAL]: true,\n      });\n    }\n    return plotData;\n  }\n\n  protected scale() {\n    const { options } = this;\n    const scales = {};\n    /** 配置x-scale */\n    scales[options.xField] = { type: 'cat' };\n    if (has(options, 'xAxis')) {\n      extractScale(scales[options.xField], options.xAxis);\n    }\n    /** 配置y-scale */\n    scales[VALUE_FIELD] = {};\n    if (has(options, 'yAxis')) {\n      extractScale(scales[VALUE_FIELD], options.yAxis);\n    }\n    this.setConfig('scales', scales);\n  }\n\n  /** @override */\n  protected axis(): void {\n    const xAxis_parser = getComponent('axis', {\n      plot: this,\n      dim: 'x',\n    });\n    const yAxis_parser = getComponent('axis', {\n      plot: this,\n      dim: 'y',\n    });\n    const axesConfig = { fields: {} };\n    axesConfig.fields[this.options.xField] = xAxis_parser;\n    axesConfig.fields[VALUE_FIELD] = yAxis_parser;\n    /** 存储坐标轴配置项到config */\n    this.setConfig('axes', axesConfig);\n  }\n\n  protected coord() {\n    return;\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n\n  protected geometryTooltip() {\n    this.waterfall.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      this.waterfall.tooltip.fields = tooltipOptions.fields;\n    }\n    if (tooltipOptions.formatter) {\n      this.waterfall.tooltip.callback = tooltipOptions.formatter;\n      if (!tooltipOptions.fields) {\n        this.waterfall.tooltip.fields = [this.options.xField, VALUE_FIELD];\n      }\n    }\n  }\n\n  /** 牵引线的样式注入到style中 */\n  private _parseStyle(): LineStyle {\n    const style = this.options.waterfallStyle;\n    const leaderLine = this.options.leaderLine;\n    const config: Record<string, any> = {};\n    if (isFunction(style)) {\n      config.callback = (...args) => {\n        return Object.assign({}, style(...args), { leaderLine });\n      };\n    } else {\n      config.cfg = { ...style, leaderLine };\n    }\n\n    return config;\n  }\n\n  private _parseColor(): AttributeCfg {\n    const options = this.options;\n    const { xField, yField } = this.options;\n    const config: any = {\n      fields: [xField, yField, VALUE_FIELD, INDEX_FIELD],\n    };\n    if (isFunction(options.color)) {\n      config.callback = options.color;\n    } else {\n      let risingColor = '#f4664a';\n      let fallingColor = '#30bf78';\n      let totalColor = 'rgba(0, 0, 0, 0.25)';\n      if (isString(options.color)) {\n        risingColor = fallingColor = totalColor = options.color;\n      } else if (isObject(options.color)) {\n        const { rising, falling, total } = options.color;\n        risingColor = rising;\n        fallingColor = falling;\n        totalColor = total;\n      }\n      config.callback = (type, value, values: number | number[], index: number) => {\n        if (index === this.options.data.length) {\n          return totalColor || (values[0] >= 0 ? risingColor : fallingColor);\n        }\n        return (isArray(values) ? values[1] - values[0] : values) >= 0 ? risingColor : fallingColor;\n      };\n    }\n    return config as AttributeCfg;\n  }\n\n  /** 复写 legend 配置, 瀑布图默认无legend */\n  private adjustLegendOptions(options): void {\n    const legendOptions = options.legend;\n    if (legendOptions) {\n      legendOptions.visible = false;\n    }\n  }\n\n  /** 复写 meta 配置 */\n  private adjustMeta(options): void {\n    const metaOptions = options.meta;\n    if (metaOptions) {\n      const valueFieldMeta = metaOptions ? metaOptions[options.yField] : {};\n      valueFieldMeta.alias = valueFieldMeta.alias || options.yField;\n      options.meta[VALUE_FIELD] = valueFieldMeta;\n    }\n  }\n}\n\nregisterPlotType('waterfall', WaterfallLayer);\n","import { head, last } from '@antv/util';\nimport fecha from 'fecha';\nimport { FORMATTER } from '../plots/calendar/constant';\n\n/**\n * 一天多少 ms\n */\nexport const DAY_MS = 86400000;\n\n/**\n * 获取最大最小日期范围\n * @param dates\n */\nexport function getDateRange(dates: Date[]): string[] {\n  const ds = [...dates].sort((a: Date, b: Date) => a.getTime() - b.getTime());\n\n  return [fecha.format(head(ds), FORMATTER), fecha.format(last(ds), FORMATTER)];\n}\n\n/**\n * 日期对应年的范围\n * @param date\n */\nexport function getYearRange(date?: Date): string[] {\n  const curr = date ? date : new Date();\n\n  return [\n    fecha.format(new Date(curr.getFullYear(), 0, 1), FORMATTER),\n    fecha.format(new Date(curr.getFullYear(), 11, 30), FORMATTER),\n  ];\n}\n\n/**\n * 是否当前月的最后一周\n */\nexport function isLastWeekOfMonth(date: Date): boolean {\n  // 偏移 7 天之后，月份是否一样\n  return date.getMonth() !== advanceBy(new Date(date), 7 * DAY_MS).getMonth();\n}\n\n/**\n * 是否是当月的最后一天\n */\nexport function isLastDayOfMonth(date: Date): boolean {\n  // 偏移 1 天之后，月份是否一样\n  return date.getMonth() !== advanceBy(new Date(date), DAY_MS).getMonth();\n}\n\n/**\n * 获取 date 对应的周索引（国际标准：一年的第一个周四为第一周）\n * @param date\n */\nexport function getWeek(date: Date): number {\n  // 当年的第一天\n  const oneJan = new Date(date.getFullYear(), 0, 1);\n\n  return Math.ceil(((date.getTime() - oneJan.getTime()) / DAY_MS + oneJan.getDay() + 1) / 7);\n}\n\n/**\n * 获得一周的第几天（周日第 0 天）\n * @param date\n */\nexport function getDay(date: Date): number {\n  return date.getDay();\n}\n\n/**\n * 将 Date 前进 ms 时间\n * @param d\n * @param ms\n */\nexport function advanceBy(d: Date, ms: number): Date {\n  d.setMilliseconds(d.getMilliseconds() + ms);\n  return d;\n}\n","/**\n * @author linhuiw\n * @description 仪表盘 layer\n */\nimport { deepMix, uniqueId } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport ViewLayer from '../../base/view-layer';\nimport { ElementOption } from '../../interface/config';\nimport { extractScale } from '../../util/scale';\nimport { GaugeViewConfig } from './interface';\nimport { GaugeShape } from './geometry/shape/gauge-shape';\nimport * as EventParser from './event';\n\nexport interface GaugeLayerConfig extends GaugeViewConfig, LayerConfig {}\n\nexport default class GaugeLayer<T extends GaugeLayerConfig = GaugeLayerConfig> extends ViewLayer<T> {\n  data: [];\n\n  gaugeShape: any;\n\n  options: any;\n\n  constructor(props) {\n    super(props);\n  }\n\n  public static getDefaultOptions(): any {\n    return deepMix({}, super.getDefaultOptions(), {\n      startAngle: -7 / 6,\n      endAngle: 1 / 6,\n      rangeBackgroundStyle: {\n        fill: '#f0f0f0',\n      },\n      rangeSize: 24,\n      statistic: {\n        position: ['50%', '80%'],\n      },\n      axis: {\n        visible: true,\n        offset: -10,\n        tickCount: 21,\n        subTickCount: 4,\n        tickLine: {\n          visible: true,\n          length: 5,\n          style: {\n            stroke: '#aaa',\n            lineWidth: 2,\n          },\n        },\n        label: {\n          visible: true,\n          style: {\n            fill: '#aaa',\n            fontSize: 16,\n            textAlign: 'center',\n            textBaseline: 'middle',\n          },\n        },\n      },\n      pivot: {\n        visible: true,\n        thickness: 6,\n        pin: {\n          visible: true,\n          size: 2,\n          style: {\n            fill: '#2E364B',\n          },\n        },\n        base: {\n          visible: true,\n          style: {\n            fill: '#EEEEEE',\n          },\n        },\n        pointer: {\n          visible: true,\n          style: {\n            fill: '#CFCFCF',\n          },\n        },\n      },\n    });\n  }\n\n  public type: string = 'gauge';\n\n  public init() {\n    const { value, range } = this.options;\n    const rangeSorted = (range || []).map((d: number) => +d).sort((a: number, b: number) => a - b);\n\n    const { min = rangeSorted[0], max = rangeSorted[rangeSorted.length - 1], format = (d) => `${d}` } = this.options;\n\n    const valueText = format(value);\n    //const styleMix = this.getStyleMix();\n    //this.options.styleMix = styleMix;\n    this.options.data = [{ value: value || 0 }];\n    this.options.valueText = valueText;\n    this.options.min = min;\n    this.options.max = max;\n    this.options.format = format;\n    this.initG2Shape();\n    super.init();\n  }\n\n  /**\n   * 绘制指针\n   */\n  protected initG2Shape() {\n    this.gaugeShape = new GaugeShape(uniqueId());\n    this.gaugeShape.setOption(\n      this.type,\n      deepMix({}, this.options, {\n        radius: 0.6,\n        angle: 240,\n        textPosition: '100%',\n      })\n    );\n    this.gaugeShape.render();\n  }\n\n  protected geometryParser(): string {\n    return 'gauge';\n  }\n\n  protected scale() {\n    const { min, max, format } = this.options;\n    const scales = {\n      value: {},\n    };\n    extractScale(scales.value, {\n      min,\n      max,\n      minLimit: min,\n      maxLimit: max,\n      nice: true,\n      formatter: format,\n      // 自定义 tick step\n      tickInterval: 20,\n    });\n    // @ts-ignore\n    this.setConfig('scales', scales);\n    super.scale();\n  }\n\n  protected coord() {\n    const coordConfig: any = {\n      type: 'polar',\n      cfg: {\n        radius: 1,\n        startAngle: this.options.startAngle * Math.PI,\n        endAngle: this.options.endAngle * Math.PI,\n      },\n    };\n    this.setConfig('coordinate', coordConfig);\n  }\n\n  protected axis() {\n    const { axis } = this.options;\n\n    const axesConfig: any = {\n      value: {\n        line: null,\n        grid: null,\n        tickLine: null,\n      },\n    };\n    let offsetValue;\n    if (axis.offset < 0) {\n      offsetValue = axis.offset - this.options.rangeSize - axis.tickLine.length;\n    } else {\n      offsetValue = axis.offset + axis.tickLine.length;\n    }\n    if (axis.label.visible) {\n      axesConfig.value.label = {\n        offset: offsetValue,\n        textStyle: axis.label.style,\n        autoRotate: true,\n      };\n    } else {\n      axesConfig.value.label = {\n        style: {\n          opacity: 0,\n        },\n      };\n    }\n\n    axesConfig['1'] = false;\n    this.setConfig('axes', axesConfig);\n  }\n\n  protected addGeometry() {\n    const pointerColor = this.options.pivot.pointer.style.fill || this.theme.defaultColor;\n\n    const pointer: ElementOption = {\n      type: 'point',\n      position: {\n        fields: ['value', '1'],\n      },\n      shape: {\n        values: ['gauge'],\n      },\n      color: {\n        values: [pointerColor],\n      },\n    };\n\n    this.setConfig('geometry', pointer);\n  }\n\n  protected annotation() {\n    const { statistic } = this.options;\n    const annotationConfigs = [];\n    // @ts-ignore\n    if (statistic && statistic.visible) {\n      const statistics = this.renderStatistic();\n      annotationConfigs.push(statistics);\n    }\n    this.setConfig('annotations', annotationConfigs);\n  }\n\n  protected renderStatistic() {\n    const containerSize = Math.max(this.options.width, this.options.height) / 20;\n    const { statistic } = this.options;\n    const text = {\n      type: 'text',\n      content: statistic.text,\n      top: true,\n      position: statistic.position,\n      style: {\n        fill: statistic.color,\n        fontSize: statistic.size ? statistic.size : containerSize * 1.2,\n        textAlign: 'center',\n        textBaseline: 'middle',\n      },\n    };\n    return text;\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n}\n\nregisterPlotType('gauge', GaugeLayer);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// 全局设置一个唯一离屏的 ctx，用于计算 isPointInPath\nvar offScreenCtx = null;\nfunction getOffScreenContext() {\n    if (!offScreenCtx) {\n        var canvas = document.createElement('canvas');\n        canvas.width = 1;\n        canvas.height = 1;\n        offScreenCtx = canvas.getContext('2d');\n    }\n    return offScreenCtx;\n}\nexports.getOffScreenContext = getOffScreenContext;\n//# sourceMappingURL=offscreen.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar line_1 = require(\"./line\");\nvar util_1 = require(\"./util\");\nvar bezier_1 = require(\"./bezier\");\n// 差值公式\nfunction quadraticAt(p0, p1, p2, t) {\n    var onet = 1 - t;\n    return onet * onet * p0 + 2 * t * onet * p1 + t * t * p2;\n}\n// 求极值\nfunction extrema(p0, p1, p2) {\n    var a = p0 + p2 - 2 * p1;\n    if (util_1.isNumberEqual(a, 0)) {\n        return [0.5];\n    }\n    var rst = (p0 - p1) / a;\n    if (rst <= 1 && rst >= 0) {\n        return [rst];\n    }\n    return [];\n}\nfunction derivativeAt(p0, p1, p2, t) {\n    return 2 * (1 - t) * (p1 - p0) + 2 * t * (p2 - p1);\n}\n// 分割贝塞尔曲线\nfunction divideQuadratic(x1, y1, x2, y2, x3, y3, t) {\n    // 划分点\n    var xt = quadraticAt(x1, x2, x3, t);\n    var yt = quadraticAt(y1, y2, y3, t);\n    // 分割的第一条曲线的控制点\n    var controlPoint1 = line_1.default.pointAt(x1, y1, x2, y2, t);\n    // 分割的第二条曲线的控制点\n    var controlPoint2 = line_1.default.pointAt(x2, y2, x3, y3, t);\n    return [\n        [x1, y1, controlPoint1.x, controlPoint1.y, xt, yt],\n        [xt, yt, controlPoint2.x, controlPoint2.y, x3, y3],\n    ];\n}\n// 使用迭代法取贝塞尔曲线的长度\nfunction quadraticLength(x1, y1, x2, y2, x3, y3, iterationCount) {\n    if (iterationCount === 0) {\n        return (util_1.distance(x1, y1, x2, y2) + util_1.distance(x2, y2, x3, y3) + util_1.distance(x1, y1, x3, y3)) / 2;\n    }\n    var quadratics = divideQuadratic(x1, y1, x2, y2, x3, y3, 0.5);\n    var left = quadratics[0];\n    var right = quadratics[1];\n    left.push(iterationCount - 1);\n    right.push(iterationCount - 1);\n    return quadraticLength.apply(null, left) + quadraticLength.apply(null, right);\n}\nexports.default = {\n    box: function (x1, y1, x2, y2, x3, y3) {\n        var xExtrema = extrema(x1, x2, x3)[0];\n        var yExtrema = extrema(y1, y2, y3)[0];\n        // 控制点不加入 box 的计算\n        var xArr = [x1, x3];\n        var yArr = [y1, y3];\n        if (xExtrema !== undefined) {\n            xArr.push(quadraticAt(x1, x2, x3, xExtrema));\n        }\n        if (yExtrema !== undefined) {\n            yArr.push(quadraticAt(y1, y2, y3, yExtrema));\n        }\n        return util_1.getBBoxByArray(xArr, yArr);\n    },\n    length: function (x1, y1, x2, y2, x3, y3) {\n        return quadraticLength(x1, y1, x2, y2, x3, y3, 3);\n    },\n    nearestPoint: function (x1, y1, x2, y2, x3, y3, x0, y0) {\n        return bezier_1.nearestPoint([x1, x2, x3], [y1, y2, y3], x0, y0, quadraticAt);\n    },\n    pointDistance: function (x1, y1, x2, y2, x3, y3, x0, y0) {\n        var point = this.nearestPoint(x1, y1, x2, y2, x3, y3, x0, y0);\n        return util_1.distance(point.x, point.y, x0, y0);\n    },\n    interpolationAt: quadraticAt,\n    pointAt: function (x1, y1, x2, y2, x3, y3, t) {\n        return {\n            x: quadraticAt(x1, x2, x3, t),\n            y: quadraticAt(y1, y2, y3, t),\n        };\n    },\n    divide: function (x1, y1, x2, y2, x3, y3, t) {\n        return divideQuadratic(x1, y1, x2, y2, x3, y3, t);\n    },\n    tangentAngle: function (x1, y1, x2, y2, x3, y3, t) {\n        var dx = derivativeAt(x1, x2, x3, t);\n        var dy = derivativeAt(y1, y2, y3, t);\n        var angle = Math.atan2(dy, dx);\n        return util_1.piMod(angle);\n    },\n};\n//# sourceMappingURL=quadratic.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar get_arc_params_1 = require(\"./get-arc-params\");\nvar get_arc_params_2 = require(\"./get-arc-params\");\nvar parse_path_1 = require(\"./parse-path\");\n// 点对称\nfunction toSymmetry(point, center) {\n    return {\n        x: center.x + (center.x - point.x),\n        y: center.y + (center.y - point.y),\n    };\n}\nfunction getSegments(path) {\n    path = parse_path_1.default(path);\n    var segments = [];\n    var currentPoint = null; // 当前图形\n    var nextParams = null; // 下一节点的 path 参数\n    var startMovePoint = null; // 开始 M 的点，可能会有多个\n    var lastStartMovePointIndex = 0; // 最近一个开始点 M 的索引\n    var count = path.length;\n    for (var i = 0; i < count; i++) {\n        var params = path[i];\n        nextParams = path[i + 1];\n        var command = params[0];\n        // 数学定义上的参数，便于后面的计算\n        var segment = {\n            command: command,\n            prePoint: currentPoint,\n            params: params,\n            startTangent: null,\n            endTangent: null,\n        };\n        switch (command) {\n            case 'M':\n                startMovePoint = [params[1], params[2]];\n                lastStartMovePointIndex = i;\n                break;\n            case 'A':\n                var arcParams = get_arc_params_1.default(currentPoint, params);\n                segment['arcParams'] = arcParams;\n                break;\n            default:\n                break;\n        }\n        if (command === 'Z') {\n            // 有了 Z 后，当前节点从开始 M 的点开始\n            currentPoint = startMovePoint;\n            // 如果当前点的命令为 Z，相当于当前点为最近一个 M 点，则下一个点直接指向最近一个 M 点的下一个点\n            nextParams = path[lastStartMovePointIndex + 1];\n        }\n        else {\n            var len = params.length;\n            currentPoint = [params[len - 2], params[len - 1]];\n        }\n        if (nextParams && nextParams[0] === 'Z') {\n            // 如果下一个点的命令为 Z，则下一个点直接指向最近一个 M 点\n            nextParams = path[lastStartMovePointIndex];\n            if (segments[lastStartMovePointIndex]) {\n                // 如果下一个点的命令为 Z，则最近一个 M 点的前一个点为当前点\n                segments[lastStartMovePointIndex].prePoint = currentPoint;\n            }\n        }\n        segment['currentPoint'] = currentPoint;\n        // 如果当前点与最近一个 M 点相同，则最近一个 M 点的前一个点为当前点的前一个点\n        if (segments[lastStartMovePointIndex] &&\n            get_arc_params_2.isSamePoint(currentPoint, segments[lastStartMovePointIndex].currentPoint)) {\n            segments[lastStartMovePointIndex].prePoint = segment.prePoint;\n        }\n        var nextPoint = nextParams ? [nextParams[nextParams.length - 2], nextParams[nextParams.length - 1]] : null;\n        segment['nextPoint'] = nextPoint;\n        // Add startTangent and endTangent\n        var prePoint = segment.prePoint;\n        if (['L', 'H', 'V'].includes(command)) {\n            segment.startTangent = [prePoint[0] - currentPoint[0], prePoint[1] - currentPoint[1]];\n            segment.endTangent = [currentPoint[0] - prePoint[0], currentPoint[1] - prePoint[1]];\n        }\n        else if (command === 'Q') {\n            // 二次贝塞尔曲线只有一个控制点\n            var cp = [params[1], params[2]];\n            // 二次贝塞尔曲线的终点为 currentPoint\n            segment.startTangent = [prePoint[0] - cp[0], prePoint[1] - cp[1]];\n            segment.endTangent = [currentPoint[0] - cp[0], currentPoint[1] - cp[1]];\n        }\n        else if (command === 'T') {\n            var preSegment = segments[i - 1];\n            var cp = toSymmetry(preSegment.currentPoint, prePoint);\n            if (preSegment.command === 'Q') {\n                segment.command = 'Q';\n                segment.startTangent = [prePoint[0] - cp[0], prePoint[1] - cp[1]];\n                segment.endTangent = [currentPoint[0] - cp[0], currentPoint[1] - cp[1]];\n            }\n            else {\n                segment.command = 'TL';\n                segment.startTangent = [prePoint[0] - currentPoint[0], prePoint[1] - currentPoint[1]];\n                segment.endTangent = [currentPoint[0] - prePoint[0], currentPoint[1] - prePoint[1]];\n            }\n        }\n        else if (command === 'C') {\n            // 三次贝塞尔曲线有两个控制点\n            var cp1 = [params[1], params[2]];\n            var cp2 = [params[3], params[4]];\n            segment.startTangent = [prePoint[0] - cp1[0], prePoint[1] - cp1[1]];\n            segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];\n        }\n        else if (command === 'S') {\n            var preSegment = segments[i - 1];\n            var cp1 = toSymmetry(preSegment.currentPoint, prePoint);\n            var cp2 = [params[1], params[2]];\n            if (preSegment.command === 'C') {\n                segment.command = 'C'; // 将 S 命令变换为 C 命令\n                segment.startTangent = [prePoint[0] - cp1[0], prePoint[1] - cp1[1]];\n                segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];\n            }\n            else {\n                segment.command = 'SQ'; // 将 S 命令变换为 SQ 命令\n                segment.startTangent = [prePoint[0] - cp2[0], prePoint[1] - cp2[1]];\n                segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];\n            }\n        }\n        else if (command === 'A') {\n            var d = 0.001;\n            var _a = segment['arcParams'] || {}, _b = _a.rx, rx = _b === void 0 ? 0 : _b, _c = _a.ry, ry = _c === void 0 ? 0 : _c, _d = _a.xRotation, xRotation = _d === void 0 ? 0 : _d, _e = _a.arcFlag, arcFlag = _e === void 0 ? 0 : _e, _f = _a.sweepFlag, sweepFlag = _f === void 0 ? 0 : _f, _g = _a.startAngle, startAngle = _g === void 0 ? 0 : _g, _h = _a.endAngle, endAngle = _h === void 0 ? 0 : _h;\n            if (sweepFlag === 0) {\n                d *= -1;\n            }\n            var dx1 = xRotation * Math.cos(startAngle - d) + rx;\n            var dy1 = arcFlag * Math.sin(startAngle - d) + ry;\n            segment.startTangent = [dx1 - startMovePoint[0], dy1 - startMovePoint[1]];\n            var dx2 = xRotation * Math.cos(startAngle + endAngle + d) + rx;\n            var dy2 = arcFlag * Math.sin(startAngle + endAngle - d) + ry;\n            segment.endTangent = [prePoint.x - dx2, prePoint.y - dy2];\n        }\n        segments.push(segment);\n    }\n    return segments;\n}\nexports.default = getSegments;\n//# sourceMappingURL=path-2-segments.js.map","import { isString, each, isArray } from './util';\nvar regexTags = /[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi;\nvar regexDot = /[^\\s\\,]+/gi;\nvar regexLG = /^l\\s*\\(\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nvar regexRG = /^r\\s*\\(\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nvar regexPR = /^p\\s*\\(\\s*([axyn])\\s*\\)\\s*(.*)/i;\nvar regexColorStop = /[\\d.]+:(#[^\\s]+|[^\\)]+\\))/gi;\nfunction addStop(steps, gradient) {\n    var arr = steps.match(regexColorStop);\n    each(arr, function (item) {\n        var itemArr = item.split(':');\n        gradient.addColorStop(itemArr[0], itemArr[1]);\n    });\n}\n/**\n * 将边和填充设置的颜色转换成线性渐变对象\n * @param {CanvasRenderingContext2D} context canvas 上下文\n * @param {IElement}                 element  图形元素\n * @param {string}                   gradientStr   颜色\n * @returns {any} 渐变对象\n */\nexport function parseLineGradient(context, element, gradientStr) {\n    var arr = regexLG.exec(gradientStr);\n    var angle = (parseFloat(arr[1]) % 360) * (Math.PI / 180);\n    var steps = arr[2];\n    var box = element.getBBox();\n    var start;\n    var end;\n    if (angle >= 0 && angle < (1 / 2) * Math.PI) {\n        start = {\n            x: box.minX,\n            y: box.minY,\n        };\n        end = {\n            x: box.maxX,\n            y: box.maxY,\n        };\n    }\n    else if ((1 / 2) * Math.PI <= angle && angle < Math.PI) {\n        start = {\n            x: box.maxX,\n            y: box.minY,\n        };\n        end = {\n            x: box.minX,\n            y: box.maxY,\n        };\n    }\n    else if (Math.PI <= angle && angle < (3 / 2) * Math.PI) {\n        start = {\n            x: box.maxX,\n            y: box.maxY,\n        };\n        end = {\n            x: box.minX,\n            y: box.minY,\n        };\n    }\n    else {\n        start = {\n            x: box.minX,\n            y: box.maxY,\n        };\n        end = {\n            x: box.maxX,\n            y: box.minY,\n        };\n    }\n    var tanTheta = Math.tan(angle);\n    var tanTheta2 = tanTheta * tanTheta;\n    var x = (end.x - start.x + tanTheta * (end.y - start.y)) / (tanTheta2 + 1) + start.x;\n    var y = (tanTheta * (end.x - start.x + tanTheta * (end.y - start.y))) / (tanTheta2 + 1) + start.y;\n    var gradient = context.createLinearGradient(start.x, start.y, x, y);\n    addStop(steps, gradient);\n    return gradient;\n}\n/**\n * 将边和填充设置的颜色转换成圆形渐变对象\n * @param {CanvasRenderingContext2D} context canvas 上下文\n * @param {IElement}                 element  图形元素\n * @param {string}                   gradientStr   颜色\n * @returns {any} 渐变对象\n */\nexport function parseRadialGradient(context, element, gradientStr) {\n    var arr = regexRG.exec(gradientStr);\n    var fx = parseFloat(arr[1]);\n    var fy = parseFloat(arr[2]);\n    var fr = parseFloat(arr[3]);\n    var steps = arr[4];\n    // 环半径为0时，默认无渐变，取渐变序列的最后一个颜色\n    if (fr === 0) {\n        var colors = steps.match(regexColorStop);\n        return colors[colors.length - 1].split(':')[1];\n    }\n    var box = element.getBBox();\n    var width = box.maxX - box.minX;\n    var height = box.maxY - box.minY;\n    var r = Math.sqrt(width * width + height * height) / 2;\n    var gradient = context.createRadialGradient(box.minX + width * fx, box.minY + height * fy, 0, box.minX + width / 2, box.minY + height / 2, fr * r);\n    addStop(steps, gradient);\n    return gradient;\n}\n/**\n * 边和填充设置的颜色转换成 pattern\n * @param {CanvasRenderingContext2D} context canvas 上下文\n * @param {IElement}                 element  图形元素\n * @param {string}                   patternStr   生成 pattern 的字符串\n */\nexport function parsePattern(context, element, patternStr) {\n    // 在转换过程中进行了缓存\n    if (element.get('patternSource') && element.get('patternSource') === patternStr) {\n        return element.get('pattern');\n    }\n    var pattern;\n    var img;\n    var arr = regexPR.exec(patternStr);\n    var repeat = arr[1];\n    var source = arr[2];\n    // Function to be called when pattern loads\n    function onload() {\n        // Create pattern\n        pattern = context.createPattern(img, repeat);\n        element.set('pattern', pattern); // be a cache\n        element.set('patternSource', patternStr);\n    }\n    switch (repeat) {\n        case 'a':\n            repeat = 'repeat';\n            break;\n        case 'x':\n            repeat = 'repeat-x';\n            break;\n        case 'y':\n            repeat = 'repeat-y';\n            break;\n        case 'n':\n            repeat = 'no-repeat';\n            break;\n        default:\n            repeat = 'no-repeat';\n    }\n    img = new Image();\n    // If source URL is not a data URL\n    if (!source.match(/^data:/i)) {\n        // Set crossOrigin for this image\n        img.crossOrigin = 'Anonymous';\n    }\n    img.src = source;\n    if (img.complete) {\n        onload();\n    }\n    else {\n        img.onload = onload;\n        // Fix onload() bug in IE9\n        img.src = img.src;\n    }\n    return pattern;\n}\nexport function parseStyle(context, element, color) {\n    if (isString(color)) {\n        if (color[1] === '(' || color[2] === '(') {\n            if (color[0] === 'l') {\n                // regexLG.test(color)\n                return parseLineGradient(context, element, color);\n            }\n            if (color[0] === 'r') {\n                // regexRG.test(color)\n                return parseRadialGradient(context, element, color);\n            }\n            if (color[0] === 'p') {\n                // regexPR.test(color)\n                return parsePattern(context, element, color);\n            }\n        }\n        return color;\n    }\n}\nexport function parseRadius(radius) {\n    var r1 = 0;\n    var r2 = 0;\n    var r3 = 0;\n    var r4 = 0;\n    if (isArray(radius)) {\n        if (radius.length === 1) {\n            r1 = r2 = r3 = r4 = radius[0];\n        }\n        else if (radius.length === 2) {\n            r1 = r3 = radius[0];\n            r2 = r4 = radius[1];\n        }\n        else if (radius.length === 3) {\n            r1 = radius[0];\n            r2 = r4 = radius[1];\n            r3 = radius[2];\n        }\n        else {\n            r1 = radius[0];\n            r2 = radius[1];\n            r3 = radius[2];\n            r4 = radius[3];\n        }\n    }\n    else {\n        r1 = r2 = r3 = r4 = radius;\n    }\n    return [r1, r2, r3, r4];\n}\n//# sourceMappingURL=parse.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\n// 向量长度\nfunction vMag(v) {\n    return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n}\n// u.v/|u||v|，计算夹角的余弦值\nfunction vRatio(u, v) {\n    // 当存在一个向量的长度为 0 时，夹角也为 0，即夹角的余弦值为 1\n    return vMag(u) * vMag(v) ? (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v)) : 1;\n}\n// 向量角度\nfunction vAngle(u, v) {\n    return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n}\n// A 0:rx 1:ry 2:x-axis-rotation 3:large-arc-flag 4:sweep-flag 5: x 6: y\nfunction getArcParams(startPoint, params) {\n    var rx = params[1];\n    var ry = params[2];\n    var xRotation = util_1.mod(util_1.toRadian(params[3]), Math.PI * 2);\n    var arcFlag = params[4];\n    var sweepFlag = params[5];\n    // 弧形起点坐标\n    var x1 = startPoint[0];\n    var y1 = startPoint[1];\n    // 弧形终点坐标\n    var x2 = params[6];\n    var y2 = params[7];\n    var xp = (Math.cos(xRotation) * (x1 - x2)) / 2.0 + (Math.sin(xRotation) * (y1 - y2)) / 2.0;\n    var yp = (-1 * Math.sin(xRotation) * (x1 - x2)) / 2.0 + (Math.cos(xRotation) * (y1 - y2)) / 2.0;\n    var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n    if (lambda > 1) {\n        rx *= Math.sqrt(lambda);\n        ry *= Math.sqrt(lambda);\n    }\n    var diff = rx * rx * (yp * yp) + ry * ry * (xp * xp);\n    var f = diff ? Math.sqrt((rx * rx * (ry * ry) - diff) / diff) : 1;\n    if (arcFlag === sweepFlag) {\n        f *= -1;\n    }\n    if (isNaN(f)) {\n        f = 0;\n    }\n    // 旋转前的起点坐标，且当长半轴和短半轴的长度为 0 时，坐标按 (0, 0) 处理\n    var cxp = ry ? (f * rx * yp) / ry : 0;\n    var cyp = rx ? (f * -ry * xp) / rx : 0;\n    // 椭圆圆心坐标\n    var cx = (x1 + x2) / 2.0 + Math.cos(xRotation) * cxp - Math.sin(xRotation) * cyp;\n    var cy = (y1 + y2) / 2.0 + Math.sin(xRotation) * cxp + Math.cos(xRotation) * cyp;\n    // 起始点的单位向量\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n    // 终止点的单位向量\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n    // 计算起始点和圆心的连线，与 x 轴正方向的夹角\n    var theta = vAngle([1, 0], u);\n    // 计算圆弧起始点和终止点与椭圆圆心连线的夹角\n    var dTheta = vAngle(u, v);\n    if (vRatio(u, v) <= -1) {\n        dTheta = Math.PI;\n    }\n    if (vRatio(u, v) >= 1) {\n        dTheta = 0;\n    }\n    if (sweepFlag === 0 && dTheta > 0) {\n        dTheta = dTheta - 2 * Math.PI;\n    }\n    if (sweepFlag === 1 && dTheta < 0) {\n        dTheta = dTheta + 2 * Math.PI;\n    }\n    return {\n        cx: cx,\n        cy: cy,\n        // 弧形的起点和终点相同时，长轴和短轴的长度按 0 处理\n        rx: util_1.isSamePoint(startPoint, [x2, y2]) ? 0 : rx,\n        ry: util_1.isSamePoint(startPoint, [x2, y2]) ? 0 : ry,\n        startAngle: theta,\n        endAngle: theta + dTheta,\n        xRotation: xRotation,\n        arcFlag: arcFlag,\n        sweepFlag: sweepFlag,\n    };\n}\nexports.default = getArcParams;\n//# sourceMappingURL=arc-params.js.map","import { __assign, __rest } from \"tslib\";\nimport { Path } from '../shape';\nvar sin = Math.sin, cos = Math.cos, atan2 = Math.atan2, PI = Math.PI;\nfunction _addDefaultArrow(shape, attrs, x1, y1, x2, y2, isStart) {\n    var stroke = attrs.stroke, lineWidth = attrs.lineWidth;\n    var x = x1 - x2;\n    var y = y1 - y2;\n    var rad = atan2(y, x);\n    var arrowShape = new Path({\n        type: 'path',\n        canvas: shape.get('canvas'),\n        isArrowShape: true,\n        attrs: {\n            // 默认箭头的边长为 10，夹角为 60 度\n            path: \"M\" + 10 * cos(PI / 6) + \",\" + 10 * sin(PI / 6) + \" L0,0 L\" + 10 * cos(PI / 6) + \",-\" + 10 * sin(PI / 6),\n            // 使用 shape stroke 值\n            stroke: stroke,\n            lineWidth: lineWidth,\n        },\n    });\n    arrowShape.translate(x2, y2);\n    arrowShape.rotateAtPoint(x2, y2, rad);\n    shape.set(isStart ? 'startArrowShape' : 'endArrowShape', arrowShape);\n}\n/**\n * 箭头 path 的设置要求\n * 1. 箭头顶点坐标需要为 (0, 0)\n * 2. 箭头夹角的中心分割线需要与 X 轴正方向对齐\n */\nfunction _addCustomizedArrow(shape, attrs, x1, y1, x2, y2, isStart) {\n    var startArrow = attrs.startArrow, endArrow = attrs.endArrow, stroke = attrs.stroke, lineWidth = attrs.lineWidth;\n    var arrowAttrs = isStart ? startArrow : endArrow;\n    var d = arrowAttrs.d, arrowFill = arrowAttrs.fill, arrowStroke = arrowAttrs.stroke, arrowLineWidth = arrowAttrs.lineWidth, restAttrs = __rest(arrowAttrs, [\"d\", \"fill\", \"stroke\", \"lineWidth\"]);\n    var x = x1 - x2;\n    var y = y1 - y2;\n    var rad = atan2(y, x);\n    if (d) {\n        x2 = x2 - cos(rad) * d;\n        y2 = y2 - sin(rad) * d;\n    }\n    var arrowShape = new Path({\n        type: 'path',\n        canvas: shape.get('canvas'),\n        isArrowShape: true,\n        attrs: __assign(__assign({}, restAttrs), { \n            // 支持单独设置箭头的 stroke 和 lineWidth，若为空则使用 shape 的值\n            stroke: arrowStroke || stroke, lineWidth: arrowLineWidth || lineWidth, \n            // 箭头是否填充需要手动设置，不会继承自 shape 的值\n            fill: arrowFill }),\n    });\n    arrowShape.translate(x2, y2);\n    arrowShape.rotateAtPoint(x2, y2, rad);\n    shape.set(isStart ? 'startArrowShape' : 'endArrowShape', arrowShape);\n}\n/**\n * 如果自定义箭头并且有 d 需要做偏移，如果直接画，线条会超出箭头尖端，因此需要根据箭头偏移 d, 返回线需要缩短的距离\n * |----------------\n * |<|--------------\n * |\n * @param {number} x1 起始点 x\n * @param {number} y1 起始点 y\n * @param {number} x2 箭头作用点 x\n * @param {number} y2 箭头作用点 y\n * @param {number} d  箭头沿线条方向的偏移距离\n * @return {{dx: number, dy: number}} 返回线条偏移距离\n */\nexport function getShortenOffset(x1, y1, x2, y2, d) {\n    var rad = atan2(y2 - y1, x2 - x1);\n    return {\n        dx: cos(rad) * d,\n        dy: sin(rad) * d,\n    };\n}\n/**\n * 绘制起始箭头\n * @param {IShape} shape 图形\n * @param {ShapeAttrs} attrs shape 的绘图属性\n * @param {number} x1 起始点 x\n * @param {number} y1 起始点 y\n * @param {number} x2 箭头作用点 x\n * @param {number} y2 箭头作用点 y\n */\nexport function addStartArrow(shape, attrs, x1, y1, x2, y2) {\n    if (typeof attrs.startArrow === 'object') {\n        _addCustomizedArrow(shape, attrs, x1, y1, x2, y2, true);\n    }\n    else if (attrs.startArrow) {\n        _addDefaultArrow(shape, attrs, x1, y1, x2, y2, true);\n    }\n    else {\n        shape.set('startArrowShape', null);\n    }\n}\n/**\n * 绘制结束箭头\n * @param {IShape} shape 图形\n * @param {ShapeAttrs} attrs shape 的绘图属性\n * @param {number} x1 起始点 x\n * @param {number} y1 起始点 y\n * @param {number} x2 箭头作用点 x\n * @param {number} y2 箭头作用点 y\n */\nexport function addEndArrow(shape, attrs, x1, y1, x2, y2) {\n    if (typeof attrs.endArrow === 'object') {\n        _addCustomizedArrow(shape, attrs, x1, y1, x2, y2, false);\n    }\n    else if (attrs.endArrow) {\n        _addDefaultArrow(shape, attrs, x1, y1, x2, y2, false);\n    }\n    else {\n        shape.set('startArrowShape', null);\n    }\n}\n//# sourceMappingURL=arrow.js.map","import { setTransform, setClip } from './svg';\nimport { sortDom, moveTo } from './dom';\nexport function drawChildren(context, children) {\n    children.forEach(function (child) {\n        child.draw(context);\n    });\n}\n/**\n * 更新元素，包括 group 和 shape\n * @param {IElement} element       SVG 元素\n * @param {ChangeType} changeType  更新类型\n */\nexport function refreshElement(element, changeType) {\n    // 对于还没有挂载到画布下的元素，canvas 可能为空\n    var canvas = element.get('canvas');\n    // 只有挂载到画布下，才对元素进行实际渲染\n    if (canvas && canvas.get('autoDraw')) {\n        var context = canvas.get('context');\n        var parent_1 = element.getParent();\n        var parentChildren = parent_1 ? parent_1.getChildren() : [canvas];\n        var el = element.get('el');\n        if (changeType === 'remove') {\n            var isClipShape = element.get('isClipShape');\n            // 对于 clip，不仅需要将 clipShape 对于的 SVG 元素删除，还需要将上层的 clipPath 元素也删除\n            if (isClipShape) {\n                var clipPathEl = el && el.parentNode;\n                var defsEl = clipPathEl && clipPathEl.parentNode;\n                if (clipPathEl && defsEl) {\n                    defsEl.removeChild(clipPathEl);\n                }\n            }\n            else if (el && el.parentNode) {\n                el.parentNode.removeChild(el);\n            }\n        }\n        else if (changeType === 'show') {\n            el.setAttribute('visibility', 'visible');\n        }\n        else if (changeType === 'hide') {\n            el.setAttribute('visibility', 'hidden');\n        }\n        else if (changeType === 'zIndex') {\n            moveTo(el, parentChildren.indexOf(element));\n        }\n        else if (changeType === 'sort') {\n            var children_1 = element.get('children');\n            if (children_1 && children_1.length) {\n                sortDom(element, function (a, b) {\n                    return children_1.indexOf(a) - children_1.indexOf(b) ? 1 : 0;\n                });\n            }\n        }\n        else if (changeType === 'clear') {\n            // el maybe null for group\n            if (el) {\n                el.innerHTML = '';\n            }\n        }\n        else if (changeType === 'matrix') {\n            setTransform(element);\n        }\n        else if (changeType === 'clip') {\n            setClip(element, context);\n        }\n        else if (changeType === 'attr') {\n            // 已在 afterAttrsChange 进行了处理，此处 do nothing\n        }\n        else if (changeType === 'add') {\n            element.draw(context);\n        }\n    }\n}\n//# sourceMappingURL=draw.js.map","import { __assign, __extends } from \"tslib\";\nimport { AbstractShape } from '@antv/g-base';\nimport { setShadow, setTransform, setClip } from '../util/svg';\nimport { createDom } from '../util/dom';\nimport { refreshElement } from '../util/draw';\nimport { SVG_ATTR_MAP } from '../constant';\nimport * as Shape from './index';\nimport Group from '../group';\nimport { getBBoxMethod } from '@antv/g-base/lib/bbox/index';\nvar ShapeBase = /** @class */ (function (_super) {\n    __extends(ShapeBase, _super);\n    function ShapeBase() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'svg';\n        _this.canFill = false;\n        _this.canStroke = false;\n        return _this;\n    }\n    ShapeBase.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        // 设置默认值\n        return __assign(__assign({}, attrs), { lineWidth: 1, lineAppendWidth: 0, strokeOpacity: 1, fillOpacity: 1 });\n    };\n    // 覆盖基类的 afterAttrsChange 方法\n    ShapeBase.prototype.afterAttrsChange = function (targetAttrs) {\n        _super.prototype.afterAttrsChange.call(this, targetAttrs);\n        var canvas = this.get('canvas');\n        // 只有挂载到画布下，才对元素进行实际渲染\n        if (canvas && canvas.get('autoDraw')) {\n            var context = canvas.get('context');\n            this.draw(context, targetAttrs);\n        }\n    };\n    ShapeBase.prototype.getShapeBase = function () {\n        return Shape;\n    };\n    ShapeBase.prototype.getGroupBase = function () {\n        return Group;\n    };\n    /**\n     * 一些方法调用会引起画布变化\n     * @param {ChangeType} changeType 改变的类型\n     */\n    ShapeBase.prototype.onCanvasChange = function (changeType) {\n        refreshElement(this, changeType);\n    };\n    ShapeBase.prototype.calculateBBox = function () {\n        var el = this.get('el');\n        var bbox = null;\n        // 包围盒计算依赖于绘制，如果还没有生成对应的 Dom 元素，则包围盒的长宽均为 0\n        if (el) {\n            bbox = el.getBBox();\n        }\n        else {\n            var bboxMethod = getBBoxMethod(this.get('type'));\n            if (bboxMethod) {\n                bbox = bboxMethod(this);\n            }\n        }\n        if (bbox) {\n            var x = bbox.x, y = bbox.y, width = bbox.width, height = bbox.height;\n            var lineWidth = this.getHitLineWidth();\n            var halfWidth = lineWidth / 2;\n            var minX = x - halfWidth;\n            var minY = y - halfWidth;\n            var maxX = x + width + halfWidth;\n            var maxY = y + height + halfWidth;\n            return {\n                x: minX,\n                y: minY,\n                minX: minX,\n                minY: minY,\n                maxX: maxX,\n                maxY: maxY,\n                width: width + lineWidth,\n                height: height + lineWidth,\n            };\n        }\n        return {\n            x: 0,\n            y: 0,\n            minX: 0,\n            minY: 0,\n            maxX: 0,\n            maxY: 0,\n            width: 0,\n            height: 0,\n        };\n    };\n    ShapeBase.prototype.isFill = function () {\n        var _a = this.attr(), fill = _a.fill, fillStyle = _a.fillStyle;\n        return (fill || fillStyle || this.isClipShape()) && this.canFill;\n    };\n    ShapeBase.prototype.isStroke = function () {\n        var _a = this.attr(), stroke = _a.stroke, strokeStyle = _a.strokeStyle;\n        return (stroke || strokeStyle) && this.canStroke;\n    };\n    ShapeBase.prototype.draw = function (context, targetAttrs) {\n        var el = this.get('el');\n        if (this.get('destroyed')) {\n            if (el) {\n                el.parentNode.removeChild(el);\n            }\n        }\n        else {\n            if (!el) {\n                createDom(this);\n            }\n            setClip(this, context);\n            this.createPath(context, targetAttrs);\n            this.shadow(context, targetAttrs);\n            this.strokeAndFill(context, targetAttrs);\n            this.transform(targetAttrs);\n        }\n    };\n    /**\n     * @protected\n     * 绘制图形的路径\n     * @param {Defs} context 上下文\n     * @param {ShapeAttrs} targetAttrs 渲染的目标属性\n     */\n    ShapeBase.prototype.createPath = function (context, targetAttrs) { };\n    // stroke and fill\n    ShapeBase.prototype.strokeAndFill = function (context, targetAttrs) {\n        var attrs = targetAttrs || this.attr();\n        var fill = attrs.fill, fillStyle = attrs.fillStyle, stroke = attrs.stroke, strokeStyle = attrs.strokeStyle, fillOpacity = attrs.fillOpacity, strokeOpacity = attrs.strokeOpacity, lineWidth = attrs.lineWidth;\n        var el = this.get('el');\n        if (this.canFill) {\n            // 初次渲染和更新渲染的逻辑有所不同: 初次渲染值为空时，需要设置为 none，否则就会是黑色，而更新渲染则不需要\n            if (!targetAttrs) {\n                this._setColor(context, 'fill', fill || fillStyle);\n            }\n            else if ('fill' in attrs) {\n                this._setColor(context, 'fill', fill);\n            }\n            else if ('fillStyle' in attrs) {\n                // compatible with fillStyle\n                this._setColor(context, 'fill', fillStyle);\n            }\n            if (fillOpacity) {\n                el.setAttribute(SVG_ATTR_MAP['fillOpacity'], fillOpacity);\n            }\n        }\n        if (this.canStroke && lineWidth > 0) {\n            if (!targetAttrs) {\n                this._setColor(context, 'stroke', stroke || strokeStyle);\n            }\n            else if ('stroke' in attrs) {\n                this._setColor(context, 'stroke', stroke);\n            }\n            else if ('strokeStyle' in attrs) {\n                // compatible with strokeStyle\n                this._setColor(context, 'stroke', strokeStyle);\n            }\n            if (strokeOpacity) {\n                el.setAttribute(SVG_ATTR_MAP['strokeOpacity'], strokeOpacity);\n            }\n            if (lineWidth) {\n                el.setAttribute(SVG_ATTR_MAP['lineWidth'], lineWidth);\n            }\n        }\n    };\n    ShapeBase.prototype._setColor = function (context, attr, value) {\n        var el = this.get('el');\n        if (!value) {\n            // need to set `none` to avoid default value\n            el.setAttribute(SVG_ATTR_MAP[attr], 'none');\n            return;\n        }\n        value = value.trim();\n        if (/^[r,R,L,l]{1}[\\s]*\\(/.test(value)) {\n            var id = context.find('gradient', value);\n            if (!id) {\n                id = context.addGradient(value);\n            }\n            el.setAttribute(SVG_ATTR_MAP[attr], \"url(#\" + id + \")\");\n        }\n        else if (/^[p,P]{1}[\\s]*\\(/.test(value)) {\n            var id = context.find('pattern', value);\n            if (!id) {\n                id = context.addPattern(value);\n            }\n            el.setAttribute(SVG_ATTR_MAP[attr], \"url(#\" + id + \")\");\n        }\n        else {\n            el.setAttribute(SVG_ATTR_MAP[attr], value);\n        }\n    };\n    ShapeBase.prototype.shadow = function (context, targetAttrs) {\n        var attrs = this.attr();\n        var _a = targetAttrs || attrs, shadowOffsetX = _a.shadowOffsetX, shadowOffsetY = _a.shadowOffsetY, shadowBlur = _a.shadowBlur, shadowColor = _a.shadowColor;\n        if (shadowOffsetX || shadowOffsetY || shadowBlur || shadowColor) {\n            setShadow(this, context);\n        }\n    };\n    ShapeBase.prototype.transform = function (targetAttrs) {\n        var attrs = this.attr();\n        var matrix = (targetAttrs || attrs).matrix;\n        if (matrix) {\n            setTransform(this);\n        }\n    };\n    ShapeBase.prototype.isInShape = function (refX, refY) {\n        return this.isPointInPath(refX, refY);\n    };\n    ShapeBase.prototype.isPointInPath = function (refX, refY) {\n        var el = this.get('el');\n        var canvas = this.get('canvas');\n        var bbox = canvas.get('el').getBoundingClientRect();\n        var clientX = refX + bbox.left;\n        var clientY = refY + bbox.top;\n        var element = document.elementFromPoint(clientX, clientY);\n        if (element && element.isEqualNode(el)) {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * 获取线拾取的宽度\n     * @returns {number} 线的拾取宽度\n     */\n    ShapeBase.prototype.getHitLineWidth = function () {\n        var _a = this.attrs, lineWidth = _a.lineWidth, lineAppendWidth = _a.lineAppendWidth;\n        if (this.isStroke()) {\n            return lineWidth + lineAppendWidth;\n        }\n        return 0;\n    };\n    return ShapeBase;\n}(AbstractShape));\nexport default ShapeBase;\n//# sourceMappingURL=base.js.map","/**\n * @fileoverview circle\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Circle = /** @class */ (function (_super) {\n    __extends(Circle, _super);\n    function Circle() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'circle';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Circle.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, r: 0 });\n    };\n    Circle.prototype.createPath = function (context, targetAttrs) {\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            // 圆和椭圆的点坐标属性不是 x, y，而是 cx, cy\n            if (attr === 'x' || attr === 'y') {\n                el.setAttribute(\"c\" + attr, value);\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    return Circle;\n}(ShapeBase));\nexport default Circle;\n//# sourceMappingURL=circle.js.map","/**\n * @fileoverview ellipse\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Ellipse = /** @class */ (function (_super) {\n    __extends(Ellipse, _super);\n    function Ellipse() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'ellipse';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Ellipse.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, rx: 0, ry: 0 });\n    };\n    Ellipse.prototype.createPath = function (context, targetAttrs) {\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            // 圆和椭圆的点坐标属性不是 x, y，而是 cx, cy\n            if (attr === 'x' || attr === 'y') {\n                el.setAttribute(\"c\" + attr, value);\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    return Ellipse;\n}(ShapeBase));\nexport default Ellipse;\n//# sourceMappingURL=ellipse.js.map","/**\n * @fileoverview image\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each, isString } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Image = /** @class */ (function (_super) {\n    __extends(Image, _super);\n    function Image() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'image';\n        _this.canFill = false;\n        _this.canStroke = false;\n        return _this;\n    }\n    Image.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, width: 0, height: 0 });\n    };\n    Image.prototype.createPath = function (context, targetAttrs) {\n        var _this = this;\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            if (attr === 'img') {\n                _this._setImage(attrs.img);\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    Image.prototype.setAttr = function (name, value) {\n        this.attrs[name] = value;\n        if (name === 'img') {\n            this._setImage(value);\n        }\n    };\n    Image.prototype._setImage = function (img) {\n        var attrs = this.attr();\n        var el = this.get('el');\n        if (isString(img)) {\n            el.setAttribute('href', img);\n        }\n        else if (img instanceof window.Image) {\n            if (!attrs.width) {\n                el.setAttribute('width', img.width);\n                this.attr('width', img.width);\n            }\n            if (!attrs.height) {\n                el.setAttribute('height', img.height);\n                this.attr('height', img.height);\n            }\n            el.setAttribute('href', img.src);\n        }\n        else if (img instanceof HTMLElement && isString(img.nodeName) && img.nodeName.toUpperCase() === 'CANVAS') {\n            // @ts-ignore\n            el.setAttribute('href', img.toDataURL());\n        }\n        else if (img instanceof ImageData) {\n            var canvas = document.createElement('canvas');\n            canvas.setAttribute('width', \"\" + img.width);\n            canvas.setAttribute('height', \"\" + img.height);\n            canvas.getContext('2d').putImageData(img, 0, 0);\n            if (!attrs.width) {\n                el.setAttribute('width', \"\" + img.width);\n                this.attr('width', img.width);\n            }\n            if (!attrs.height) {\n                el.setAttribute('height', \"\" + img.height);\n                this.attr('height', img.height);\n            }\n            el.setAttribute('href', canvas.toDataURL());\n        }\n    };\n    return Image;\n}(ShapeBase));\nexport default Image;\n//# sourceMappingURL=image.js.map","import LineUtil from '@antv/g-math/lib/line';\nexport default function inLine(x1, y1, x2, y2, lineWidth, x, y) {\n    var minX = Math.min(x1, x2);\n    var maxX = Math.max(x1, x2);\n    var minY = Math.min(y1, y2);\n    var maxY = Math.max(y1, y2);\n    var halfWidth = lineWidth / 2;\n    // 因为目前的方案是计算点到直线的距离，而有可能会在延长线上，所以要先判断是否在包围盒内\n    // 这种方案会在水平或者竖直的情况下载线的延长线上有半 lineWidth 的误差\n    if (!(x >= minX - halfWidth && x <= maxX + halfWidth && y >= minY - halfWidth && y <= maxY + halfWidth)) {\n        return false;\n    }\n    // 因为已经计算了包围盒，所以仅需要计算到直线的距离即可，可以显著提升性能\n    return LineUtil.pointToLine(x1, y1, x2, y2, x, y) <= lineWidth / 2;\n}\n//# sourceMappingURL=line.js.map","import { __assign, __extends } from \"tslib\";\n/**\n * @fileoverview line\n * @author dengfuping_develop@163.com\n */\nimport LineUtil from '@antv/g-math/lib/line';\nimport { each, isObject } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Line = /** @class */ (function (_super) {\n    __extends(Line, _super);\n    function Line() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'line';\n        _this.canFill = false;\n        _this.canStroke = true;\n        return _this;\n    }\n    Line.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x1: 0, y1: 0, x2: 0, y2: 0, startArrow: false, endArrow: false });\n    };\n    Line.prototype.createPath = function (context, targetAttrs) {\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            if (attr === 'startArrow' || attr === 'endArrow') {\n                if (value) {\n                    var id = isObject(value)\n                        ? context.addArrow(attrs, SVG_ATTR_MAP[attr])\n                        : context.getDefaultArrow(attrs, SVG_ATTR_MAP[attr]);\n                    el.setAttribute(SVG_ATTR_MAP[attr], \"url(#\" + id + \")\");\n                }\n                else {\n                    el.removeAttribute(SVG_ATTR_MAP[attr]);\n                }\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    /**\n     * Use math calculation to get length of line\n     * @return {number} length\n     */\n    Line.prototype.getTotalLength = function () {\n        var _a = this.attr(), x1 = _a.x1, y1 = _a.y1, x2 = _a.x2, y2 = _a.y2;\n        return LineUtil.length(x1, y1, x2, y2);\n    };\n    /**\n     * Use math calculation to get point according to ratio as same sa Canvas version\n     * @param {number} ratio\n     * @return {Point} point\n     */\n    Line.prototype.getPoint = function (ratio) {\n        var _a = this.attr(), x1 = _a.x1, y1 = _a.y1, x2 = _a.x2, y2 = _a.y2;\n        return LineUtil.pointAt(x1, y1, x2, y2, ratio);\n    };\n    return Line;\n}(ShapeBase));\nexport default Line;\n//# sourceMappingURL=line.js.map","/**\n * @fileoverview Marker\n * @author dxq613@gmail.com\n */\nimport { __extends } from \"tslib\";\nimport { isNil } from '@antv/util';\nimport path2Absolute from '@antv/path-util/lib/path-2-absolute';\nimport ShapeBase from './base';\nimport { isFunction } from '../util/util';\nimport { drawPath } from '../util/draw';\nvar Symbols = {\n    // 圆\n    circle: function (x, y, r) {\n        return [\n            ['M', x - r, y],\n            ['A', r, r, 0, 1, 0, x + r, y],\n            ['A', r, r, 0, 1, 0, x - r, y],\n        ];\n    },\n    // 正方形\n    square: function (x, y, r) {\n        return [['M', x - r, y - r], ['L', x + r, y - r], ['L', x + r, y + r], ['L', x - r, y + r], ['Z']];\n    },\n    // 菱形\n    diamond: function (x, y, r) {\n        return [['M', x - r, y], ['L', x, y - r], ['L', x + r, y], ['L', x, y + r], ['Z']];\n    },\n    // 三角形\n    triangle: function (x, y, r) {\n        var diffY = r * Math.sin((1 / 3) * Math.PI);\n        return [['M', x - r, y + diffY], ['L', x, y - diffY], ['L', x + r, y + diffY], ['Z']];\n    },\n    // 倒三角形\n    'triangle-down': function (x, y, r) {\n        var diffY = r * Math.sin((1 / 3) * Math.PI);\n        return [['M', x - r, y - diffY], ['L', x + r, y - diffY], ['L', x, y + diffY], ['Z']];\n    },\n};\nvar Marker = /** @class */ (function (_super) {\n    __extends(Marker, _super);\n    function Marker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Marker.prototype.initAttrs = function (attrs) {\n        this._resetParamsCache();\n    };\n    // 重置绘制 path 存储的缓存\n    Marker.prototype._resetParamsCache = function () {\n        // 为了加速 path 的绘制、拾取和计算，这个地方可以缓存很多东西\n        // 这些缓存都是第一次需要时计算和存储，虽然增加了复杂度，但是频繁调用的方法，性能有很大提升\n        this.set('paramsCache', {}); // 清理缓存\n    };\n    // 更新属性时，检测是否更改了 path\n    Marker.prototype.onAttrChange = function (name, value, originValue) {\n        _super.prototype.onAttrChange.call(this, name, value, originValue);\n        if (['symbol', 'x', 'y', 'r', 'radius'].indexOf(name) !== -1) {\n            // path 相关属性更改时，清理缓存\n            this._resetParamsCache();\n        }\n    };\n    // 仅仅使用包围盒检测来进行拾取\n    // 所以不需要复写 isInStrokeOrPath 的方法\n    Marker.prototype.isOnlyHitBox = function () {\n        return true;\n    };\n    Marker.prototype._getR = function (attrs) {\n        // 兼容 r 和 radius 两种写法，推荐使用 r\n        return isNil(attrs.r) ? attrs.radius : attrs.r;\n    };\n    Marker.prototype._getPath = function () {\n        var attrs = this.attr();\n        var x = attrs.x, y = attrs.y;\n        var symbol = attrs.symbol || 'circle';\n        var r = this._getR(attrs);\n        var method;\n        var path;\n        if (isFunction(symbol)) {\n            method = symbol;\n            path = method(x, y, r);\n            // 将 path 转成绝对路径\n            path = path2Absolute(path);\n        }\n        else {\n            // 内置 symbol 的 path 都是绝对路径，直接绘制即可，不需要对 path 进行特殊处理\n            method = Marker.Symbols[symbol];\n            path = method(x, y, r);\n        }\n        if (!method) {\n            console.warn(symbol + \" marker is not supported.\");\n            return null;\n        }\n        return path;\n    };\n    Marker.prototype.createPath = function (context) {\n        var path = this._getPath();\n        var paramsCache = this.get('paramsCache');\n        drawPath(this, context, { path: path }, paramsCache);\n    };\n    Marker.Symbols = Symbols;\n    return Marker;\n}(ShapeBase));\nexport default Marker;\n//# sourceMappingURL=marker.js.map","import { getOffScreenContext } from '@antv/g-base/lib/util/offscreen';\nexport default function isPointInPath(shape, x, y) {\n    var ctx = getOffScreenContext();\n    shape.createPath(ctx);\n    return ctx.isPointInPath(x, y);\n}\n//# sourceMappingURL=point-in-path.js.map","/**\n * @fileoverview 判断点是否在多边形内\n * @author dxq613@gmail.com\n */\n// 多边形的射线检测，参考：https://blog.csdn.net/WilliamSun0122/article/details/77994526\nvar tolerance = 1e-6;\n// 三态函数，判断两个double在eps精度下的大小关系\nfunction dcmp(x) {\n    if (Math.abs(x) < tolerance) {\n        return 0;\n    }\n    return x < 0 ? -1 : 1;\n}\n// 判断点Q是否在p1和p2的线段上\nfunction onSegment(p1, p2, q) {\n    if ((q[0] - p1[0]) * (p2[1] - p1[1]) === (p2[0] - p1[0]) * (q[1] - p1[1]) &&\n        Math.min(p1[0], p2[0]) <= q[0] &&\n        q[0] <= Math.max(p1[0], p2[0]) &&\n        Math.min(p1[1], p2[1]) <= q[1] &&\n        q[1] <= Math.max(p1[1], p2[1])) {\n        return true;\n    }\n    return false;\n}\n// 判断点P在多边形内-射线法\nexport default function isInPolygon(points, x, y) {\n    var isHit = false;\n    var n = points.length;\n    if (n <= 2) {\n        // svg 中点小于 3 个时，不显示，也无法被拾取\n        return false;\n    }\n    for (var i = 0; i < n; i++) {\n        var p1 = points[i];\n        var p2 = points[(i + 1) % n];\n        if (onSegment(p1, p2, [x, y])) {\n            // 点在多边形一条边上\n            return true;\n        }\n        // 前一个判断min(p1[1],p2[1])<P.y<=max(p1[1],p2[1])\n        // 后一个判断被测点 在 射线与边交点 的左边\n        if (dcmp(p1[1] - y) > 0 !== dcmp(p2[1] - y) > 0 &&\n            dcmp(x - ((y - p1[1]) * (p1[0] - p2[0])) / (p1[1] - p2[1]) - p1[0]) < 0) {\n            isHit = !isHit;\n        }\n    }\n    return isHit;\n}\n//# sourceMappingURL=polygon.js.map","import { distance } from '../util';\nexport default function arc(cx, cy, r, startAngle, endAngle, lineWidth, x, y) {\n    var angle = (Math.atan2(y - cy, x - cx) + Math.PI * 2) % (Math.PI * 2); // 转换到 0 - 2 * Math.PI 之间\n    if (angle < startAngle || angle > endAngle) {\n        return false;\n    }\n    var point = {\n        x: cx + r * Math.cos(angle),\n        y: cy + r * Math.sin(angle),\n    };\n    return distance(point.x, point.y, x, y) <= lineWidth / 2;\n}\n//# sourceMappingURL=arc.js.map","import * as glMatrix from \"./common.js\";\n/**\r\n * 3x3 Matrix\r\n * @module mat3\r\n */\n\n/**\r\n * Creates a new identity mat3\r\n *\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the upper-left 3x3 values into the given mat3.\r\n *\r\n * @param {mat3} out the receiving 3x3 matrix\r\n * @param {ReadonlyMat4} a   the source 4x4 matrix\r\n * @returns {mat3} out\r\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\r\n * Creates a new mat3 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat3} a matrix to clone\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Copy the values from one mat3 to another\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Create a new mat3 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} A new mat3\r\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set the components of a mat3 to the given values\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} out\r\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set a mat3 to the identity matrix\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @returns {mat3} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat3\r\n *\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\r\n * Multiplies two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\r\n * Translate a mat3 by the given vector\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to translate\r\n * @param {ReadonlyVec2} v vector to translate by\r\n * @returns {mat3} out\r\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\r\n * Rotates a mat3 by the given angle\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\r\n * Scales the mat3 by the dimensions in the given vec2\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to rotate\r\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\r\n * @returns {mat3} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.translate(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyVec2} v Translation vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.rotate(dest, dest, rad);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.scale(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyVec2} v Scaling vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the values from a mat2d into a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to copy\r\n * @returns {mat3} out\r\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Calculates a 3x3 matrix from the given quaternion\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat3} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\r\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\r\n *\r\n * @returns {mat3} out\r\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\r\n * Generates a 2D projection matrix with the given bounds\r\n *\r\n * @param {mat3} out mat3 frustum matrix will be written into\r\n * @param {number} width Width of your gl context\r\n * @param {number} height Height of gl context\r\n * @returns {mat3} out\r\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat3\r\n *\r\n * @param {ReadonlyMat3} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat3\r\n *\r\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\r\n * Adds two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\r\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat3} out the receiving vector\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat3} a The first matrix.\r\n * @param {ReadonlyMat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat3} a The first matrix.\r\n * @param {ReadonlyMat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\r\n * Alias for {@link mat3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {ReadonlyVec3} a The first operand\r\n * @param {ReadonlyVec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import { __assign, __extends } from \"tslib\";\nimport { each, isArray, isObject } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Path = /** @class */ (function (_super) {\n    __extends(Path, _super);\n    function Path() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'path';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Path.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { startArrow: false, endArrow: false });\n    };\n    Path.prototype.createPath = function (context, targetAttrs) {\n        var _this = this;\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            if (attr === 'path' && isArray(value)) {\n                el.setAttribute('d', _this._formatPath(value));\n            }\n            else if (attr === 'startArrow' || attr === 'endArrow') {\n                if (value) {\n                    var id = isObject(value)\n                        ? context.addArrow(attrs, SVG_ATTR_MAP[attr])\n                        : context.getDefaultArrow(attrs, SVG_ATTR_MAP[attr]);\n                    el.setAttribute(SVG_ATTR_MAP[attr], \"url(#\" + id + \")\");\n                }\n                else {\n                    el.removeAttribute(SVG_ATTR_MAP[attr]);\n                }\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    Path.prototype._formatPath = function (value) {\n        var newValue = value\n            .map(function (path) {\n            return path.join(' ');\n        })\n            .join('');\n        if (~newValue.indexOf('NaN')) {\n            return '';\n        }\n        return newValue;\n    };\n    /**\n     * Get total length of path\n     * 尽管通过浏览器的 SVGPathElement.getTotalLength() 接口获取的 path 长度，\n     * 与 Canvas 版本通过数学计算的方式得到的长度有一些细微差异，但最大误差在个位数像素，精度上可以能接受\n     * @return {number} length\n     */\n    Path.prototype.getTotalLength = function () {\n        var el = this.get('el');\n        return el ? el.getTotalLength() : null;\n    };\n    /**\n     * Get point according to ratio\n     * @param {number} ratio\n     * @return {Point} point\n     */\n    Path.prototype.getPoint = function (ratio) {\n        var el = this.get('el');\n        var totalLength = this.getTotalLength();\n        var point = el ? el.getPointAtLength(ratio * totalLength) : null;\n        return point\n            ? {\n                x: point.x,\n                y: point.y,\n            }\n            : null;\n    };\n    return Path;\n}(ShapeBase));\nexport default Path;\n//# sourceMappingURL=path.js.map","import inLine from './line';\nexport default function inPolyline(points, lineWidth, x, y, isClose) {\n    var count = points.length;\n    if (count < 2) {\n        return false;\n    }\n    for (var i = 0; i < count - 1; i++) {\n        var x1 = points[i][0];\n        var y1 = points[i][1];\n        var x2 = points[i + 1][0];\n        var y2 = points[i + 1][1];\n        if (inLine(x1, y1, x2, y2, lineWidth, x, y)) {\n            return true;\n        }\n    }\n    // 如果封闭，则计算起始点和结束点的边\n    if (isClose) {\n        var first = points[0];\n        var last = points[count - 1];\n        if (inLine(first[0], first[1], last[0], last[1], lineWidth, x, y)) {\n            return true;\n        }\n    }\n    return false;\n}\n//# sourceMappingURL=polyline.js.map","import { __extends } from \"tslib\";\n/**\n * @fileoverview polygon\n * @author dengfuping_develop@163.com\n */\nimport { each, isArray } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Polygon = /** @class */ (function (_super) {\n    __extends(Polygon, _super);\n    function Polygon() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'polygon';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Polygon.prototype.createPath = function (context, targetAttrs) {\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            if (attr === 'points' && isArray(value) && value.length >= 2) {\n                el.setAttribute('points', value.map(function (point) { return point[0] + \",\" + point[1]; }).join(' '));\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    return Polygon;\n}(ShapeBase));\nexport default Polygon;\n//# sourceMappingURL=polygon.js.map","import { __assign, __extends } from \"tslib\";\nimport LineUtil from '@antv/g-math/lib/line';\nimport PolylineUtil from '@antv/g-math/lib/polyline';\nimport { each, isArray, isNil } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Polyline = /** @class */ (function (_super) {\n    __extends(Polyline, _super);\n    function Polyline() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'polyline';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Polyline.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { startArrow: false, endArrow: false });\n    };\n    // 更新属性时，检测是否更改了 points\n    Polyline.prototype.onAttrChange = function (name, value, originValue) {\n        _super.prototype.onAttrChange.call(this, name, value, originValue);\n        if (['points'].indexOf(name) !== -1) {\n            this._resetCache();\n        }\n    };\n    Polyline.prototype._resetCache = function () {\n        this.set('totalLength', null);\n        this.set('tCache', null);\n    };\n    Polyline.prototype.createPath = function (context, targetAttrs) {\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            if (attr === 'points' && isArray(value) && value.length >= 2) {\n                el.setAttribute('points', value.map(function (point) { return point[0] + \",\" + point[1]; }).join(' '));\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    /**\n     * Get length of polyline\n     * @return {number} length\n     */\n    Polyline.prototype.getTotalLength = function () {\n        var points = this.attr().points;\n        // get totalLength from cache\n        var totalLength = this.get('totalLength');\n        if (!isNil(totalLength)) {\n            return totalLength;\n        }\n        this.set('totalLength', PolylineUtil.length(points));\n        return this.get('totalLength');\n    };\n    /**\n     * Get point according to ratio\n     * @param {number} ratio\n     * @return {Point} point\n     */\n    Polyline.prototype.getPoint = function (ratio) {\n        var points = this.attr().points;\n        // get tCache from cache\n        var tCache = this.get('tCache');\n        if (!tCache) {\n            this._setTcache();\n            tCache = this.get('tCache');\n        }\n        var subt;\n        var index;\n        each(tCache, function (v, i) {\n            if (ratio >= v[0] && ratio <= v[1]) {\n                subt = (ratio - v[0]) / (v[1] - v[0]);\n                index = i;\n            }\n        });\n        return LineUtil.pointAt(points[index][0], points[index][1], points[index + 1][0], points[index + 1][1], subt);\n    };\n    Polyline.prototype._setTcache = function () {\n        var points = this.attr().points;\n        if (!points || points.length === 0) {\n            return;\n        }\n        var totalLength = this.getTotalLength();\n        if (totalLength <= 0) {\n            return;\n        }\n        var tempLength = 0;\n        var tCache = [];\n        var segmentT;\n        var segmentL;\n        each(points, function (p, i) {\n            if (points[i + 1]) {\n                segmentT = [];\n                segmentT[0] = tempLength / totalLength;\n                segmentL = LineUtil.length(p[0], p[1], points[i + 1][0], points[i + 1][1]);\n                tempLength += segmentL;\n                segmentT[1] = tempLength / totalLength;\n                tCache.push(segmentT);\n            }\n        });\n        this.set('tCache', tCache);\n    };\n    /**\n     * Get start tangent vector\n     * @return {Array}\n     */\n    Polyline.prototype.getStartTangent = function () {\n        var points = this.attr().points;\n        var result = [];\n        result.push([points[1][0], points[1][1]]);\n        result.push([points[0][0], points[0][1]]);\n        return result;\n    };\n    /**\n     * Get end tangent vector\n     * @return {Array}\n     */\n    Polyline.prototype.getEndTangent = function () {\n        var points = this.attr().points;\n        var l = points.length - 1;\n        var result = [];\n        result.push([points[l - 1][0], points[l - 1][1]]);\n        result.push([points[l][0], points[l][1]]);\n        return result;\n    };\n    return Polyline;\n}(ShapeBase));\nexport default Polyline;\n//# sourceMappingURL=polyline.js.map","/**\n * @fileoverview rect\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each, isArray } from '@antv/util';\nimport ShapeBase from './base';\nimport { SVG_ATTR_MAP } from '../constant';\nimport { parseRadius } from '../util/format';\nvar Rect = /** @class */ (function (_super) {\n    __extends(Rect, _super);\n    function Rect() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'rect';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Rect.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, width: 0, height: 0, radius: 0 });\n    };\n    Rect.prototype.createPath = function (context, targetAttrs) {\n        var _this = this;\n        var attrs = this.attr();\n        var el = this.get('el');\n        // 加上状态量，用来标记 path 是否已组装\n        var completed = false;\n        // 和组装 path 相关的绘图属性\n        var pathRelatedAttrs = ['x', 'y', 'width', 'height', 'radius'];\n        each(targetAttrs || attrs, function (value, attr) {\n            if (pathRelatedAttrs.indexOf(attr) !== -1 && !completed) {\n                el.setAttribute('d', _this._assembleRect(attrs));\n                completed = true;\n            }\n            else if (pathRelatedAttrs.indexOf(attr) === -1 && SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    Rect.prototype._assembleRect = function (attrs) {\n        var x = attrs.x;\n        var y = attrs.y;\n        var w = attrs.width;\n        var h = attrs.height;\n        var radius = attrs.radius;\n        if (!radius) {\n            return \"M \" + x + \",\" + y + \" l \" + w + \",0 l 0,\" + h + \" l\" + -w + \" 0 z\";\n        }\n        var r = parseRadius(radius);\n        if (isArray(radius)) {\n            if (radius.length === 1) {\n                r.r1 = r.r2 = r.r3 = r.r4 = radius[0];\n            }\n            else if (radius.length === 2) {\n                r.r1 = r.r3 = radius[0];\n                r.r2 = r.r4 = radius[1];\n            }\n            else if (radius.length === 3) {\n                r.r1 = radius[0];\n                r.r2 = r.r4 = radius[1];\n                r.r3 = radius[2];\n            }\n            else {\n                r.r1 = radius[0];\n                r.r2 = radius[1];\n                r.r3 = radius[2];\n                r.r4 = radius[3];\n            }\n        }\n        else {\n            r.r1 = r.r2 = r.r3 = r.r4 = radius;\n        }\n        var d = [\n            [\"M \" + (x + r.r1) + \",\" + y],\n            [\"l \" + (w - r.r1 - r.r2) + \",0\"],\n            [\"a \" + r.r2 + \",\" + r.r2 + \",0,0,1,\" + r.r2 + \",\" + r.r2],\n            [\"l 0,\" + (h - r.r2 - r.r3)],\n            [\"a \" + r.r3 + \",\" + r.r3 + \",0,0,1,\" + -r.r3 + \",\" + r.r3],\n            [\"l \" + (r.r3 + r.r4 - w) + \",0\"],\n            [\"a \" + r.r4 + \",\" + r.r4 + \",0,0,1,\" + -r.r4 + \",\" + -r.r4],\n            [\"l 0,\" + (r.r4 + r.r1 - h)],\n            [\"a \" + r.r1 + \",\" + r.r1 + \",0,0,1,\" + r.r1 + \",\" + -r.r1],\n            ['z'],\n        ];\n        return d.join(' ');\n    };\n    return Rect;\n}(ShapeBase));\nexport default Rect;\n//# sourceMappingURL=rect.js.map","import inLine from './line';\nimport inArc from './arc';\nexport default function rectWithRadius(minX, minY, width, height, radius, lineWidth, x, y) {\n    var halfWidth = lineWidth / 2;\n    return (inLine(minX + radius, minY, minX + width - radius, minY, lineWidth, x, y) ||\n        inLine(minX + width, minY + radius, minX + width, minY + height - radius, lineWidth, x, y) ||\n        inLine(minX + width - radius, minY + height, minX + radius, minY + height, lineWidth, x, y) ||\n        inLine(minX, minY + height - radius, minX, minY + radius, lineWidth, x, y) ||\n        inArc(minX + width - radius, minY + radius, radius, 1.5 * Math.PI, 2 * Math.PI, lineWidth, x, y) ||\n        inArc(minX + width - radius, minY + height - radius, radius, 0, 0.5 * Math.PI, lineWidth, x, y) ||\n        inArc(minX + radius, minY + height - radius, radius, 0.5 * Math.PI, Math.PI, lineWidth, x, y) ||\n        inArc(minX + radius, minY + radius, radius, Math.PI, 1.5 * Math.PI, lineWidth, x, y));\n}\n//# sourceMappingURL=rect-radius.js.map","import { inBox } from '../util';\nexport default function inRect(minX, minY, width, height, lineWidth, x, y) {\n    var halfWidth = lineWidth / 2;\n    // 将四个边看做矩形来检测，比边的检测算法要快\n    return (inBox(minX - halfWidth, minY - halfWidth, width, lineWidth, x, y) || // 上边\n        inBox(minX + width - halfWidth, minY - halfWidth, lineWidth, height, x, y) || // 右边\n        inBox(minX + halfWidth, minY + height - halfWidth, width, lineWidth, x, y) || // 下边\n        inBox(minX - halfWidth, minY + halfWidth, lineWidth, height, x, y)); // 左边\n}\n//# sourceMappingURL=rect.js.map","/**\n * @fileoverview text\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport { detect } from 'detect-browser';\nimport { setTransform } from '../util/svg';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar LETTER_SPACING = 0.3;\nvar BASELINE_MAP = {\n    top: 'before-edge',\n    middle: 'central',\n    bottom: 'after-edge',\n    alphabetic: 'baseline',\n    hanging: 'hanging',\n};\n// for FireFox\nvar BASELINE_MAP_FOR_FIREFOX = {\n    top: 'text-before-edge',\n    middle: 'central',\n    bottom: 'text-after-edge',\n    alphabetic: 'alphabetic',\n    hanging: 'hanging',\n};\nvar ANCHOR_MAP = {\n    left: 'left',\n    start: 'left',\n    center: 'middle',\n    right: 'end',\n    end: 'end',\n};\nvar Text = /** @class */ (function (_super) {\n    __extends(Text, _super);\n    function Text() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'text';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Text.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, text: null, fontSize: 12, fontFamily: 'sans-serif', fontStyle: 'normal', fontWeight: 'normal', fontVariant: 'normal', textAlign: 'start', textBaseline: 'bottom' });\n    };\n    Text.prototype.createPath = function (context, targetAttrs) {\n        var _this = this;\n        var attrs = this.attr();\n        var el = this.get('el');\n        this._setFont();\n        each(targetAttrs || attrs, function (value, attr) {\n            if (attr === 'text') {\n                _this._setText(\"\" + value);\n            }\n            else if (attr === 'matrix' && value) {\n                setTransform(_this);\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n        el.setAttribute('paint-order', 'stroke');\n        el.setAttribute('style', 'stroke-linecap:butt; stroke-linejoin:miter;');\n    };\n    Text.prototype._setFont = function () {\n        var el = this.get('el');\n        var _a = this.attr(), textBaseline = _a.textBaseline, textAlign = _a.textAlign;\n        var browser = detect();\n        if (browser && browser.name === 'firefox') {\n            // compatible with FireFox browser, ref: https://github.com/antvis/g/issues/119\n            el.setAttribute('dominant-baseline', BASELINE_MAP_FOR_FIREFOX[textBaseline] || 'alphabetic');\n        }\n        else {\n            el.setAttribute('alignment-baseline', BASELINE_MAP[textBaseline] || 'baseline');\n        }\n        el.setAttribute('text-anchor', ANCHOR_MAP[textAlign] || 'left');\n    };\n    Text.prototype._setText = function (text) {\n        var el = this.get('el');\n        var _a = this.attr(), x = _a.x, _b = _a.textBaseline, baseline = _b === void 0 ? 'bottom' : _b;\n        if (!text) {\n            el.innerHTML = '';\n        }\n        else if (~text.indexOf('\\n')) {\n            var textArr = text.split('\\n');\n            var textLen_1 = textArr.length - 1;\n            var arr_1 = '';\n            each(textArr, function (segment, i) {\n                if (i === 0) {\n                    if (baseline === 'alphabetic') {\n                        arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"\" + -textLen_1 + \"em\\\">\" + segment + \"</tspan>\";\n                    }\n                    else if (baseline === 'top') {\n                        arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"0.9em\\\">\" + segment + \"</tspan>\";\n                    }\n                    else if (baseline === 'middle') {\n                        arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"\" + -(textLen_1 - 1) / 2 + \"em\\\">\" + segment + \"</tspan>\";\n                    }\n                    else if (baseline === 'bottom') {\n                        arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"-\" + (textLen_1 + LETTER_SPACING) + \"em\\\">\" + segment + \"</tspan>\";\n                    }\n                    else if (baseline === 'hanging') {\n                        arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"\" + (-(textLen_1 - 1) - LETTER_SPACING) + \"em\\\">\" + segment + \"</tspan>\";\n                    }\n                }\n                else {\n                    arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"1em\\\">\" + segment + \"</tspan>\";\n                }\n            });\n            el.innerHTML = arr_1;\n        }\n        else {\n            el.innerHTML = text;\n        }\n    };\n    return Text;\n}(ShapeBase));\nexport default Text;\n//# sourceMappingURL=text.js.map","import { isAllowCapture } from '@antv/g-base/lib/util/util';\nimport { multiplyVec2, invert } from '@antv/g-base/lib/util/matrix';\nfunction invertFromMatrix(v, matrix) {\n    if (matrix) {\n        var invertMatrix = invert(matrix);\n        return multiplyVec2(invertMatrix, v);\n    }\n    return v;\n}\nfunction getRefXY(element, x, y) {\n    // @ts-ignore\n    var totalMatrix = element.getTotalMatrix();\n    if (totalMatrix) {\n        var _a = invertFromMatrix([x, y, 1], totalMatrix), refX = _a[0], refY = _a[1];\n        return [refX, refY];\n    }\n    return [x, y];\n}\n// 拾取前的检测，只有通过检测才能继续拾取\nfunction preTest(element, x, y) {\n    // @ts-ignore\n    if (element.isGroup() && element.isCanvas()) {\n        return true;\n    }\n    // 不允许被拾取，则返回 null\n    // @ts-ignore\n    if (!isAllowCapture(element) && element.cfg.isInView === false) {\n        return false;\n    }\n    if (element.cfg.clipShape) {\n        // 如果存在 clip\n        var _a = getRefXY(element, x, y), refX = _a[0], refY = _a[1];\n        if (element.isClipped(refX, refY)) {\n            return false;\n        }\n    }\n    // @ts-ignore ，这个地方调用过于频繁\n    var bbox = element.cfg.cacheCanvasBBox || element.getCanvasBBox();\n    if (!(x >= bbox.minX && x <= bbox.maxX && y >= bbox.minY && y <= bbox.maxY)) {\n        return false;\n    }\n    return true;\n}\nexport function getShape(container, x, y) {\n    // 没有通过检测，则返回 null\n    if (!preTest(container, x, y)) {\n        return null;\n    }\n    var shape = null;\n    var children = container.getChildren();\n    var count = children.length;\n    for (var i = count - 1; i >= 0; i--) {\n        var child = children[i];\n        if (child.isGroup()) {\n            shape = getShape(child, x, y);\n        }\n        else if (preTest(child, x, y)) {\n            var curShape = child;\n            var _a = getRefXY(child, x, y), refX = _a[0], refY = _a[1];\n            // @ts-ignore\n            if (curShape.isInShape(refX, refY)) {\n                shape = child;\n            }\n        }\n        if (shape) {\n            break;\n        }\n    }\n    return shape;\n}\n//# sourceMappingURL=hit.js.map","import { __assign, __extends } from \"tslib\";\nimport { AbstractCanvas } from '@antv/g-base';\nimport { SHAPE_TO_TAGS } from './constant';\nimport { drawChildren } from './util/draw';\nimport { setTransform, setClip } from './util/svg';\nimport { sortDom, createSVGElement } from './util/dom';\nimport EventController from '@antv/g-base/lib/event/event-contoller';\nimport * as Shape from './shape';\nimport Group from './group';\nimport Defs from './defs';\nvar Canvas = /** @class */ (function (_super) {\n    __extends(Canvas, _super);\n    function Canvas(cfg) {\n        return _super.call(this, __assign(__assign({}, cfg), { autoDraw: true, \n            // 设置渲染引擎为 canvas，只读属性\n            renderer: 'svg' })) || this;\n    }\n    Canvas.prototype.getShapeBase = function () {\n        return Shape;\n    };\n    Canvas.prototype.getGroupBase = function () {\n        return Group;\n    };\n    // 覆盖 Container 中通过遍历的方式获取 shape 对象的逻辑，直接走 SVG 的 dom 拾取即可\n    Canvas.prototype.getShape = function (x, y, ev) {\n        var target = ev.target || ev.srcElement;\n        if (!SHAPE_TO_TAGS[target.tagName]) {\n            var parent_1 = target.parentNode;\n            while (parent_1 && !SHAPE_TO_TAGS[parent_1.tagName]) {\n                parent_1 = parent_1.parentNode;\n            }\n            target = parent_1;\n        }\n        return this.find(function (child) { return child.get('el') === target; });\n    };\n    // 复写基类的方法生成标签\n    Canvas.prototype.createDom = function () {\n        var element = createSVGElement('svg');\n        var context = new Defs(element);\n        element.setAttribute('width', \"\" + this.get('width'));\n        element.setAttribute('height', \"\" + this.get('height'));\n        // 缓存 context 对象\n        this.set('context', context);\n        return element;\n    };\n    /**\n     * 一些方法调用会引起画布变化\n     * @param {ChangeType} changeType 改变的类型\n     */\n    Canvas.prototype.onCanvasChange = function (changeType) {\n        var context = this.get('context');\n        var el = this.get('el');\n        if (changeType === 'sort') {\n            var children_1 = this.get('children');\n            if (children_1 && children_1.length) {\n                sortDom(this, function (a, b) {\n                    return children_1.indexOf(a) - children_1.indexOf(b) ? 1 : 0;\n                });\n            }\n        }\n        else if (changeType === 'clear') {\n            // el maybe null for canvas\n            if (el) {\n                // 清空 SVG 元素\n                el.innerHTML = '';\n                var defsEl = context.el;\n                // 清空 defs 元素\n                defsEl.innerHTML = '';\n                // 将清空后的 defs 元素挂载到 el 下\n                el.appendChild(defsEl);\n            }\n        }\n        else if (changeType === 'matrix') {\n            setTransform(this);\n        }\n        else if (changeType === 'clip') {\n            setClip(this, context);\n        }\n        else if (changeType === 'changeSize') {\n            el.setAttribute('width', \"\" + this.get('width'));\n            el.setAttribute('height', \"\" + this.get('height'));\n        }\n    };\n    // 复写基类的 draw 方法\n    Canvas.prototype.draw = function () {\n        var context = this.get('context');\n        var children = this.getChildren();\n        setClip(this, context);\n        if (children.length) {\n            drawChildren(context, children);\n        }\n    };\n    // 覆盖基类中的 initEvents 方法\n    Canvas.prototype.initEvents = function () {\n        var eventController = new EventController({\n            canvas: this,\n        });\n        eventController.init();\n        this.set('eventController', eventController);\n    };\n    // 覆盖基类中的 clearEvents 方法\n    Canvas.prototype.clearEvents = function () {\n        var eventController = this.get('eventController');\n        eventController.destroy();\n    };\n    return Canvas;\n}(AbstractCanvas));\nexport default Canvas;\n//# sourceMappingURL=canvas.js.map","import { createDom } from './dom';\nexport function setShadow(model, context) {\n    var el = model.cfg.el;\n    var attrs = model.attr();\n    var cfg = {\n        dx: attrs.shadowOffsetX,\n        dy: attrs.shadowOffsetY,\n        blur: attrs.shadowBlur,\n        color: attrs.shadowColor,\n    };\n    if (!cfg.dx && !cfg.dy && !cfg.blur && !cfg.color) {\n        el.removeAttribute('filter');\n    }\n    else {\n        var id = context.find('filter', cfg);\n        if (!id) {\n            id = context.addShadow(cfg);\n        }\n        el.setAttribute('filter', \"url(#\" + id + \")\");\n    }\n}\nexport function setTransform(model) {\n    var matrix = model.attr().matrix;\n    if (matrix) {\n        var el = model.cfg.el;\n        var transform = [];\n        for (var i = 0; i < 9; i += 3) {\n            transform.push(matrix[i] + \",\" + matrix[i + 1]);\n        }\n        transform = transform.join(',');\n        if (transform.indexOf('NaN') === -1) {\n            el.setAttribute('transform', \"matrix(\" + transform + \")\");\n        }\n        else {\n            console.warn('invalid matrix:', matrix);\n        }\n    }\n}\nexport function setClip(model, context) {\n    var clip = model.getClip();\n    var el = model.get('el');\n    if (!clip) {\n        el.removeAttribute('clip-path');\n    }\n    else if (clip && !el.hasAttribute('clip-path')) {\n        createDom(clip);\n        clip.createPath(context);\n        var id = context.addClip(clip);\n        el.setAttribute('clip-path', \"url(#\" + id + \")\");\n    }\n}\n//# sourceMappingURL=svg.js.map","/**\n * @fileoverview dom\n * @author dengfuping_develop@163.com\n */\nimport { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Dom = /** @class */ (function (_super) {\n    __extends(Dom, _super);\n    function Dom() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'dom';\n        _this.canFill = false;\n        _this.canStroke = false;\n        return _this;\n    }\n    Dom.prototype.createPath = function (context, targetAttrs) {\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n        el.innerHTML = attrs['html']; // set innerHTML\n    };\n    return Dom;\n}(ShapeBase));\nexport default Dom;\n//# sourceMappingURL=dom.js.map","var Symbols = {\n    // 圆\n    circle: function (x, y, r) {\n        return [['M', x, y], ['m', -r, 0], ['a', r, r, 0, 1, 0, r * 2, 0], ['a', r, r, 0, 1, 0, -r * 2, 0]];\n    },\n    // 正方形\n    square: function (x, y, r) {\n        return [['M', x - r, y - r], ['L', x + r, y - r], ['L', x + r, y + r], ['L', x - r, y + r], ['Z']];\n    },\n    // 菱形\n    diamond: function (x, y, r) {\n        return [['M', x - r, y], ['L', x, y - r], ['L', x + r, y], ['L', x, y + r], ['Z']];\n    },\n    // 三角形\n    triangle: function (x, y, r) {\n        var diffY = r * Math.sin((1 / 3) * Math.PI);\n        return [['M', x - r, y + diffY], ['L', x, y - diffY], ['L', x + r, y + diffY], ['z']];\n    },\n    // 倒三角形\n    triangleDown: function (x, y, r) {\n        var diffY = r * Math.sin((1 / 3) * Math.PI);\n        return [['M', x - r, y - diffY], ['L', x + r, y - diffY], ['L', x, y + diffY], ['Z']];\n    },\n};\nexport default {\n    get: function (type) {\n        return Symbols[type];\n    },\n    register: function (type, func) {\n        Symbols[type] = func;\n    },\n    remove: function (type) {\n        delete Symbols[type];\n    },\n    getAll: function () {\n        return Symbols;\n    },\n};\n//# sourceMappingURL=symbols.js.map","/**\n * @fileoverview marker\n * @author dengfuping_develop@163.com\n */\nimport { __extends } from \"tslib\";\nimport { isArray, isFunction } from '@antv/util';\nimport ShapeBase from '../base';\nimport symbolsFactory from './symbols';\nvar Marker = /** @class */ (function (_super) {\n    __extends(Marker, _super);\n    function Marker() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'marker';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Marker.prototype.createPath = function (context) {\n        var el = this.get('el');\n        el.setAttribute('d', this._assembleMarker());\n    };\n    Marker.prototype._assembleMarker = function () {\n        var d = this._getPath();\n        if (isArray(d)) {\n            return d\n                .map(function (path) {\n                return path.join(' ');\n            })\n                .join('');\n        }\n        return d;\n    };\n    Marker.prototype._getPath = function () {\n        var attrs = this.attr();\n        var x = attrs.x, y = attrs.y;\n        // 兼容 r 和 radius 两种写法，推荐使用 r\n        var r = attrs.r || attrs.radius;\n        var symbol = attrs.symbol || 'circle';\n        var method;\n        if (isFunction(symbol)) {\n            method = symbol;\n        }\n        else {\n            method = symbolsFactory.get(symbol);\n        }\n        if (!method) {\n            console.warn(method + \" symbol is not exist.\");\n            return null;\n        }\n        return method(x, y, r);\n    };\n    // 作为其静态属性\n    Marker.symbolsFactory = symbolsFactory;\n    return Marker;\n}(ShapeBase));\nexport default Marker;\n//# sourceMappingURL=index.js.map","import { each, isArray, isString } from '@antv/util';\nvar regexTags = /[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi;\nvar regexDot = /[^\\s\\,]+/gi;\nexport function parseRadius(radius) {\n    var r1 = 0;\n    var r2 = 0;\n    var r3 = 0;\n    var r4 = 0;\n    if (isArray(radius)) {\n        if (radius.length === 1) {\n            r1 = r2 = r3 = r4 = radius[0];\n        }\n        else if (radius.length === 2) {\n            r1 = r3 = radius[0];\n            r2 = r4 = radius[1];\n        }\n        else if (radius.length === 3) {\n            r1 = radius[0];\n            r2 = r4 = radius[1];\n            r3 = radius[2];\n        }\n        else {\n            r1 = radius[0];\n            r2 = radius[1];\n            r3 = radius[2];\n            r4 = radius[3];\n        }\n    }\n    else {\n        r1 = r2 = r3 = r4 = radius;\n    }\n    return {\n        r1: r1,\n        r2: r2,\n        r3: r3,\n        r4: r4,\n    };\n}\nexport function parsePath(path) {\n    path = path || [];\n    if (isArray(path)) {\n        return path;\n    }\n    if (isString(path)) {\n        path = path.match(regexTags);\n        each(path, function (item, index) {\n            item = item.match(regexDot);\n            if (item[0].length > 1) {\n                var tag = item[0].charAt(0);\n                item.splice(1, 0, item[0].substr(1));\n                item[0] = tag;\n            }\n            each(item, function (sub, i) {\n                if (!isNaN(sub)) {\n                    item[i] = +sub;\n                }\n            });\n            path[index] = item;\n        });\n        return path;\n    }\n}\n//# sourceMappingURL=format.js.map","/**\n * @fileoverview gradient\n * @author dengfuping_develop@163.com\n */\nimport { each, mod, toRadian, uniqueId } from '@antv/util';\nimport { createSVGElement } from '../util/dom';\nvar regexLG = /^l\\s*\\(\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nvar regexRG = /^r\\s*\\(\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nvar regexColorStop = /[\\d.]+:(#[^\\s]+|[^\\)]+\\))/gi;\nfunction addStop(steps) {\n    var arr = steps.match(regexColorStop);\n    if (!arr) {\n        return '';\n    }\n    var stops = '';\n    arr.sort(function (a, b) {\n        a = a.split(':');\n        b = b.split(':');\n        return Number(a[0]) - Number(b[0]);\n    });\n    each(arr, function (item) {\n        item = item.split(':');\n        stops += \"<stop offset=\\\"\" + item[0] + \"\\\" stop-color=\\\"\" + item[1] + \"\\\"></stop>\";\n    });\n    return stops;\n}\nfunction parseLineGradient(color, el) {\n    var arr = regexLG.exec(color);\n    var angle = mod(toRadian(parseFloat(arr[1])), Math.PI * 2);\n    var steps = arr[2];\n    var start;\n    var end;\n    if (angle >= 0 && angle < 0.5 * Math.PI) {\n        start = {\n            x: 0,\n            y: 0,\n        };\n        end = {\n            x: 1,\n            y: 1,\n        };\n    }\n    else if (0.5 * Math.PI <= angle && angle < Math.PI) {\n        start = {\n            x: 1,\n            y: 0,\n        };\n        end = {\n            x: 0,\n            y: 1,\n        };\n    }\n    else if (Math.PI <= angle && angle < 1.5 * Math.PI) {\n        start = {\n            x: 1,\n            y: 1,\n        };\n        end = {\n            x: 0,\n            y: 0,\n        };\n    }\n    else {\n        start = {\n            x: 0,\n            y: 1,\n        };\n        end = {\n            x: 1,\n            y: 0,\n        };\n    }\n    var tanTheta = Math.tan(angle);\n    var tanTheta2 = tanTheta * tanTheta;\n    var x = (end.x - start.x + tanTheta * (end.y - start.y)) / (tanTheta2 + 1) + start.x;\n    var y = (tanTheta * (end.x - start.x + tanTheta * (end.y - start.y))) / (tanTheta2 + 1) + start.y;\n    el.setAttribute('x1', start.x);\n    el.setAttribute('y1', start.y);\n    el.setAttribute('x2', x);\n    el.setAttribute('y2', y);\n    el.innerHTML = addStop(steps);\n}\nfunction parseRadialGradient(color, self) {\n    var arr = regexRG.exec(color);\n    var cx = parseFloat(arr[1]);\n    var cy = parseFloat(arr[2]);\n    var r = parseFloat(arr[3]);\n    var steps = arr[4];\n    self.setAttribute('cx', cx);\n    self.setAttribute('cy', cy);\n    self.setAttribute('r', r);\n    self.innerHTML = addStop(steps);\n}\nvar Gradient = /** @class */ (function () {\n    function Gradient(cfg) {\n        this.cfg = {};\n        var el = null;\n        var id = uniqueId('gradient_');\n        if (cfg.toLowerCase()[0] === 'l') {\n            el = createSVGElement('linearGradient');\n            parseLineGradient(cfg, el);\n        }\n        else {\n            el = createSVGElement('radialGradient');\n            parseRadialGradient(cfg, el);\n        }\n        el.setAttribute('id', id);\n        this.el = el;\n        this.id = id;\n        this.cfg = cfg;\n        return this;\n    }\n    Gradient.prototype.match = function (type, attr) {\n        return this.cfg === attr;\n    };\n    return Gradient;\n}());\nexport default Gradient;\n//# sourceMappingURL=gradient.js.map","/**\n * @fileoverview shadow\n * @author dengfuping_develop@163.com\n */\nimport { each, uniqueId } from '@antv/util';\nimport { createSVGElement } from '../util/dom';\nvar ATTR_MAP = {\n    shadowColor: 'color',\n    shadowOpacity: 'opacity',\n    shadowBlur: 'blur',\n    shadowOffsetX: 'dx',\n    shadowOffsetY: 'dy',\n};\nvar SHADOW_DIMENSION = {\n    x: '-40%',\n    y: '-40%',\n    width: '200%',\n    height: '200%',\n};\nvar Shadow = /** @class */ (function () {\n    function Shadow(cfg) {\n        this.type = 'filter';\n        this.cfg = {};\n        this.type = 'filter';\n        var el = createSVGElement('filter');\n        // expand the filter region to fill in shadows\n        each(SHADOW_DIMENSION, function (v, k) {\n            el.setAttribute(k, v);\n        });\n        this.el = el;\n        this.id = uniqueId('filter_');\n        this.el.id = this.id;\n        this.cfg = cfg;\n        this._parseShadow(cfg, el);\n        return this;\n    }\n    Shadow.prototype.match = function (type, cfg) {\n        if (this.type !== type) {\n            return false;\n        }\n        var flag = true;\n        var config = this.cfg;\n        each(Object.keys(config), function (attr) {\n            if (config[attr] !== cfg[attr]) {\n                flag = false;\n                return false;\n            }\n        });\n        return flag;\n    };\n    Shadow.prototype.update = function (name, value) {\n        var config = this.cfg;\n        config[ATTR_MAP[name]] = value;\n        this._parseShadow(config, this.el);\n        return this;\n    };\n    Shadow.prototype._parseShadow = function (config, el) {\n        var child = \"<feDropShadow\\n      dx=\\\"\" + (config.dx || 0) + \"\\\"\\n      dy=\\\"\" + (config.dy || 0) + \"\\\"\\n      stdDeviation=\\\"\" + (config.blur ? config.blur / 10 : 0) + \"\\\"\\n      flood-color=\\\"\" + (config.color ? config.color : '#000') + \"\\\"\\n      flood-opacity=\\\"\" + (config.opacity ? config.opacity : 1) + \"\\\"\\n      />\";\n        el.innerHTML = child;\n    };\n    return Shadow;\n}());\nexport default Shadow;\n//# sourceMappingURL=shadow.js.map","/**\n * @fileoverview arrow\n * @author dengfuping_develop@163.com\n */\nimport { isArray, uniqueId } from '@antv/util';\nimport { createSVGElement } from '../util/dom';\nvar Arrow = /** @class */ (function () {\n    function Arrow(attrs, type) {\n        this.cfg = {};\n        var el = createSVGElement('marker');\n        var id = uniqueId('marker_');\n        el.setAttribute('id', id);\n        var shape = createSVGElement('path');\n        shape.setAttribute('stroke', attrs.stroke || 'none');\n        shape.setAttribute('fill', attrs.fill || 'none');\n        el.appendChild(shape);\n        el.setAttribute('overflow', 'visible');\n        el.setAttribute('orient', 'auto-start-reverse');\n        this.el = el;\n        this.child = shape;\n        this.id = id;\n        var cfg = attrs[type === 'marker-start' ? 'startArrow' : 'endArrow'];\n        this.stroke = attrs.stroke || '#000';\n        if (cfg === true) {\n            this._setDefaultPath(type, shape);\n        }\n        else {\n            this.cfg = cfg; // when arrow config exists\n            this._setMarker(attrs.lineWidth, shape);\n        }\n        return this;\n    }\n    Arrow.prototype.match = function () {\n        return false;\n    };\n    Arrow.prototype._setDefaultPath = function (type, el) {\n        var parent = this.el;\n        // 默认箭头的边长为 10，夹角为 60 度\n        el.setAttribute('d', \"M0,0 L\" + 10 * Math.cos(Math.PI / 6) + \",5 L0,10\");\n        parent.setAttribute('refX', \"\" + 10 * Math.cos(Math.PI / 6));\n        parent.setAttribute('refY', \"\" + 5);\n    };\n    Arrow.prototype._setMarker = function (r, el) {\n        var parent = this.el;\n        var path = this.cfg.path;\n        var d = this.cfg.d;\n        if (isArray(path)) {\n            path = path\n                .map(function (segment) {\n                return segment.join(' ');\n            })\n                .join('');\n        }\n        el.setAttribute('d', path);\n        parent.appendChild(el);\n        if (d) {\n            parent.setAttribute('refX', \"\" + d / r);\n        }\n    };\n    Arrow.prototype.update = function (fill) {\n        var child = this.child;\n        if (child.attr) {\n            child.attr('fill', fill);\n        }\n        else {\n            child.setAttribute('fill', fill);\n        }\n    };\n    return Arrow;\n}());\nexport default Arrow;\n//# sourceMappingURL=arrow.js.map","/**\n * @fileoverview clip\n * @author dengfuping_develop@163.com\n */\nimport { uniqueId } from '@antv/util';\nimport { createSVGElement } from '../util/dom';\nvar Clip = /** @class */ (function () {\n    function Clip(cfg) {\n        this.type = 'clip';\n        this.cfg = {};\n        var el = createSVGElement('clipPath');\n        this.el = el;\n        this.id = uniqueId('clip_');\n        el.id = this.id;\n        var shapeEl = cfg.cfg.el;\n        el.appendChild(shapeEl);\n        this.cfg = cfg;\n        return this;\n    }\n    Clip.prototype.match = function () {\n        return false;\n    };\n    Clip.prototype.remove = function () {\n        var el = this.el;\n        el.parentNode.removeChild(el);\n    };\n    return Clip;\n}());\nexport default Clip;\n//# sourceMappingURL=clip.js.map","/**\n * @fileoverview pattern\n * @author dengfuping_develop@163.com\n */\nimport { uniqueId } from '@antv/util';\nimport { createSVGElement } from '../util/dom';\nvar regexPR = /^p\\s*\\(\\s*([axyn])\\s*\\)\\s*(.*)/i;\nvar Pattern = /** @class */ (function () {\n    function Pattern(cfg) {\n        this.cfg = {};\n        var el = createSVGElement('pattern');\n        el.setAttribute('patternUnits', 'userSpaceOnUse');\n        var child = createSVGElement('image');\n        el.appendChild(child);\n        var id = uniqueId('pattern_');\n        el.id = id;\n        this.el = el;\n        this.id = id;\n        this.cfg = cfg;\n        var arr = regexPR.exec(cfg);\n        var source = arr[2];\n        child.setAttribute('href', source);\n        var img = new Image();\n        if (!source.match(/^data:/i)) {\n            img.crossOrigin = 'Anonymous';\n        }\n        img.src = source;\n        function onload() {\n            el.setAttribute('width', \"\" + img.width);\n            el.setAttribute('height', \"\" + img.height);\n        }\n        if (img.complete) {\n            onload();\n        }\n        else {\n            img.onload = onload;\n            // Fix onload() bug in IE9\n            img.src = img.src;\n        }\n        return this;\n    }\n    Pattern.prototype.match = function (type, attr) {\n        return this.cfg === attr;\n    };\n    return Pattern;\n}());\nexport default Pattern;\n//# sourceMappingURL=pattern.js.map","/**\n * @fileoverview defs\n * @author dengfuping_develop@163.com\n */\nimport { uniqueId } from '@antv/util';\nimport Gradient from './gradient';\nimport Shadow from './shadow';\nimport Arrow from './arrow';\nimport Clip from './clip';\nimport Pattern from './pattern';\nimport { createSVGElement } from '../util/dom';\nvar Defs = /** @class */ (function () {\n    function Defs(canvas) {\n        var el = createSVGElement('defs');\n        var id = uniqueId('defs_');\n        el.id = id;\n        canvas.appendChild(el);\n        this.children = [];\n        this.defaultArrow = {};\n        this.el = el;\n        this.canvas = canvas;\n    }\n    Defs.prototype.find = function (type, attr) {\n        var children = this.children;\n        var result = null;\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].match(type, attr)) {\n                result = children[i].id;\n                break;\n            }\n        }\n        return result;\n    };\n    Defs.prototype.findById = function (id) {\n        var children = this.children;\n        var flag = null;\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].id === id) {\n                flag = children[i];\n                break;\n            }\n        }\n        return flag;\n    };\n    Defs.prototype.add = function (item) {\n        this.children.push(item);\n        item.canvas = this.canvas;\n        item.parent = this;\n    };\n    Defs.prototype.getDefaultArrow = function (attrs, name) {\n        var stroke = attrs.stroke || attrs.strokeStyle;\n        if (this.defaultArrow[stroke]) {\n            return this.defaultArrow[stroke].id;\n        }\n        var arrow = new Arrow(attrs, name);\n        this.defaultArrow[stroke] = arrow;\n        this.el.appendChild(arrow.el);\n        this.add(arrow);\n        return arrow.id;\n    };\n    Defs.prototype.addGradient = function (cfg) {\n        var gradient = new Gradient(cfg);\n        this.el.appendChild(gradient.el);\n        this.add(gradient);\n        return gradient.id;\n    };\n    Defs.prototype.addArrow = function (attrs, name) {\n        var arrow = new Arrow(attrs, name);\n        this.el.appendChild(arrow.el);\n        this.add(arrow);\n        return arrow.id;\n    };\n    Defs.prototype.addShadow = function (cfg) {\n        var shadow = new Shadow(cfg);\n        this.el.appendChild(shadow.el);\n        this.add(shadow);\n        return shadow.id;\n    };\n    Defs.prototype.addPattern = function (cfg) {\n        var pattern = new Pattern(cfg);\n        this.el.appendChild(pattern.el);\n        this.add(pattern);\n        return pattern.id;\n    };\n    Defs.prototype.addClip = function (cfg) {\n        var clip = new Clip(cfg);\n        this.el.appendChild(clip.el);\n        this.add(clip);\n        return clip.id;\n    };\n    return Defs;\n}());\nexport default Defs;\n//# sourceMappingURL=index.js.map","/**\n * G2-Plot配置项\n * 注意事项：\n * 1. 命名采用驼峰\n * 2. 如果是枚举值，不使用enum，全部列出\n * 3. 减少嵌套，尽量平铺配置\n */\nimport { ShapeAttrs } from '@antv/g-base';\nimport { Options, AttributeOption, AdjustOption, LabelOption, MappingDatum, Datum } from '../dependents';\nimport { LooseMap } from './types';\n\nexport interface Meta {\n  alias?: string;\n  formatter?: (v: any) => string;\n  values?: string[];\n  range?: number[];\n  type?: 'linear' | 'time' | 'timeCat' | 'cat' | 'pow' | 'log';\n}\n\nexport interface ITitle {\n  visible: boolean;\n  text: string;\n  style?: TextStyle;\n  alignTo?: 'left' | 'right' | 'middle';\n}\n\nexport interface IDescription {\n  visible: boolean;\n  text: string;\n  style?: TextStyle;\n  alignTo?: 'left' | 'right' | 'middle';\n}\n\ntype IEvents = LooseMap<string>;\n\nexport type Formatter = (text: string, item: any, idx: number) => string;\n\nexport interface IBaseAxis {\n  /** 轴是否需要显示，默认true */\n  visible?: boolean;\n  /** 轴类型，对应scale类型 */\n  type?: 'linear' | 'time' | 'timeCat' | 'cat' | 'pow' | 'log';\n  /** scale 自定义 tickMethod */\n  tickMethod?: string | ((cfg: any) => number[]);\n  /** 轴位置，默认下和左 */\n  line?: {\n    visible?: boolean;\n    style?: LineStyle;\n  };\n  grid?: {\n    /** 网格线是否显示 */\n    visible?: boolean;\n    line?: {\n      style?: LineStyle | ((text: string, idx: number, count: number) => LineStyle);\n      type?: 'line' | 'circle';\n    };\n    /** 网格设置交替的颜色，指定一个值则先渲染偶数层，两个值则交替渲染 */\n    alternateColor?: string | string[];\n  };\n  label?: {\n    visible?: boolean;\n    formatter?: (name: string, tick: any, index: number) => string;\n    offset?: number; // 坐标轴文本距离坐标轴线的距离\n    offsetX?: number; // 在 offset 的基础上，设置坐标轴文本在 x 方向上的偏移量\n    offsetY?: number; // 在 offset 的基础上，设置坐标轴文本在 y 方向上的偏移量\n    rotate?: number; // label 文本旋转的角度，使用角度制\n    style?: TextStyle;\n    autoRotate?: boolean;\n    autoHide?: boolean | string; // 默认的 autoHide 策略，或指定自动隐藏策略\n  };\n  title?: {\n    visible?: boolean;\n    autoRotate?: boolean;\n    text?: string;\n    offset?: number;\n    style?: TextStyle;\n  };\n  tickLine?: {\n    visible?: boolean;\n    style?: LineStyle;\n  };\n}\n/** Linear型 */\nexport interface IValueAxis extends IBaseAxis {\n  type?: 'linear' | 'pow' | 'log';\n  /** tick相关配置 */\n  nice?: boolean;\n  min?: number;\n  max?: number;\n  minLimit?: number;\n  maxLimit?: number;\n  tickCount?: number;\n  tickInterval?: number;\n  /** pow 指数 */\n  exponent?: number;\n  /** log 基数 */\n  base?: number;\n}\n/** 时间型 */\nexport interface ITimeAxis extends IBaseAxis {\n  type?: 'time';\n  /** tick相关配置 */\n  tickInterval?: string;\n  tickCount?: number;\n  mask?: string;\n}\n/** 离散类目型 */\nexport interface ICatAxis extends IBaseAxis {\n  type?: 'cat';\n}\n\nexport type Axis = ICatAxis | IValueAxis | ITimeAxis;\n\nexport interface Label {\n  visible?: boolean;\n  type?: string;\n  formatter?: (text: string | number | undefined | null, item: any, idx: number, ...extras: any[]) => string;\n  /** 精度配置，可通过自定义精度来固定数值类型 label 格式 */\n  precision?: number;\n  /** 添加后缀 */\n  suffix?: string;\n  style?: TextStyle;\n  offset?: number | any;\n  offsetX?: number;\n  offsetY?: number;\n  position?: string;\n  adjustColor?: boolean;\n  adjustPosition?: boolean;\n  autoRotate?: boolean;\n  // labelLine?: any;\n  /** 标签对应字段 */\n  field?: string;\n}\n\nexport type LegendPosition =\n  | 'left-top'\n  | 'left-center'\n  | 'left-bottom'\n  | 'right-top'\n  | 'right-center'\n  | 'right-bottom'\n  | 'top-left'\n  | 'top-center'\n  | 'top-bottom'\n  | 'bottom-left'\n  | 'bottom-center'\n  | 'bottom-right';\n\nexport interface Legend {\n  visible?: boolean;\n  /** 位置 */\n  position?: LegendPosition;\n  /** 翻页 */\n  flipPage?: boolean;\n  formatter?: (...args: any) => string;\n  offsetX?: number;\n  offsetY?: number;\n  clickable?: boolean;\n  title?: {\n    visible?: boolean;\n    spacing?: number;\n    style?: TextStyle;\n  };\n}\n\nexport interface Tooltip {\n  visible?: boolean;\n  fields?: string[];\n  shared?: boolean;\n  showTitle?: boolean;\n  titleField?: string;\n  formatter?: (...args: any) => { name: string; value: number };\n  showCrosshairs?: boolean;\n  crosshairs?: object;\n  offset?: number;\n  showMarkers?: boolean;\n  domStyles?: {\n    'g2-tooltop'?: any;\n    'g2-tooltip-title'?: any;\n    'g2-tooltip-list'?: any;\n    'g2-tooltip-marker'?: any;\n    'g2-tooltip-value'?: any;\n  };\n  customContent?: {\n    container?: string | HTMLElement;\n    follow?: boolean;\n    callback: (tooltipDom: HTMLElement, cfg: CustomTooltipConfig) => void;\n  };\n}\n\nexport interface Animation {\n  appear?: AnimationCfg;\n  enter?: AnimationCfg;\n  update?: AnimationCfg;\n  leave?: AnimationCfg;\n  [field: string]: any;\n}\n\nexport interface AnimationCfg {\n  /** 动画模式，延伸or缩放 */\n  type?: string;\n  duration?: number;\n  easing?: string;\n  delay?: number;\n  callback?: (...args: any[]) => void;\n  [field: string]: any;\n}\n\n// tslint:disable-next-line: no-empty-interface\nexport interface Theme {}\n\nexport interface ElementOption {\n  type: string;\n  position: {\n    fields: string[];\n  };\n  color?: AttributeOption;\n  size?: AttributeOption;\n  shape?: AttributeOption;\n  style?: GraphicStyle;\n  label?: LabelOption | false;\n  animate?: Animation;\n  adjust?: AdjustOption[];\n  connectNulls?: boolean;\n  widthRatio?: {\n    [type: string]: number;\n  };\n  tooltip?: any;\n}\n\nexport type G2Config = Options;\n\nexport interface IColorConfig {\n  fields?: string[];\n  values?: string[];\n  callback?: (...args: any[]) => any;\n}\n\nconst SECOND = 1000;\nconst MINUTE = 60 * SECOND;\nconst HOUR = 60 * MINUTE;\nconst DAY = 24 * HOUR;\nconst WEEK = DAY * 7;\nconst MONTH = DAY * 30;\nconst YEAR = DAY * 365;\nexport const timeIntervals = {\n  second: { value: SECOND, format: 'HH:mm:ss' },\n  miniute: { value: MINUTE, format: 'HH:mm' },\n  hour: { value: HOUR, format: 'HH' },\n  day: { value: DAY, format: 'YYYY-MM-DD' },\n  week: { value: WEEK, format: 'YYYY-MM-DD' },\n  month: { value: MONTH, format: 'YYYY-MM' },\n  year: { value: YEAR, format: 'YYYY' },\n};\n\ninterface StateCondition {\n  name: string;\n  exp: () => boolean | string | number;\n}\n\nexport interface StateConfig {\n  condition: () => any | StateCondition;\n  style?: GraphicStyle;\n  related?: string[];\n}\n\nexport interface GuideLineConfig {\n  type?: string;\n  start?: any[];\n  end?: any[];\n  lineStyle?: LineStyle;\n  text?: {\n    position?: 'start' | 'center' | 'end';\n    content: string;\n    offsetX?: number;\n    offsetY: number;\n    style?: TextStyle;\n  };\n}\n\nexport interface ISliderInteractionConfig {\n  /** 在图表中的位置，默认 horizontal */\n  /** @ignore */\n  type?: 'horizontal' | 'vertical';\n  /** 宽度，在 vertical 下生效 */\n  /** @ignore */\n  width?: number;\n  /** 高度，在 horizontal 下生效 */\n  height?: number;\n  /** 可选 padding */\n  padding?: [number, number, number, number];\n  /** 默认开始位置, 0~1 */\n  start?: number;\n  /** 默认结束位置, 0~1 */\n  end?: number;\n  /** 背景框样式配置 */\n  backgroundStyle?: ShapeAttrs;\n  /** 前景框样式配置 */\n  foregroundStyle?: ShapeAttrs;\n  /** 滑块样式配置 */\n  handlerStyle?: ShapeAttrs;\n  /** 文本样式配置 */\n  textStyle?: ShapeAttrs;\n  /** slider 趋势图配置  */\n  trendCfg?: {\n    /** 是否使用 smooth 折线 */\n    smooth?: boolean;\n    /** 是否使用面积图 */\n    isArea?: boolean;\n    /** 背景样式配置 */\n    backgroundStyle?: ShapeAttrs;\n    /** 折线样式配置 */\n    lineStyle?: ShapeAttrs;\n    /** 面积图样式配置 */\n    areaStyle?: ShapeAttrs;\n  };\n}\n\nexport interface IScrollbarInteractionConfig {\n  /** 在图表中的位置，默认 horizontal */\n  /** @ignore */\n  type?: 'horizontal' | 'vertical';\n  /** 宽度，在 vertical 下生效 */\n  width?: number;\n  /** 高度，在 horizontal 下生效 */\n  height?: number;\n  /** 可选 padding */\n  padding?: [number, number, number, number];\n  /** 对应水平滚动条，为X轴每个分类字段的宽度；对于垂直滚动条，为X轴每个分类字段的高度 */\n  categorySize?: number;\n}\n\nexport interface ITimeLineInteractionConfig {\n  /** 绑定过滤字段，必须传 */\n  field: string;\n  /** 判定动画 key */\n  key: string;\n  /** 是否循环播放，默认 false */\n  loop?: boolean;\n  /** 是否自动播放，默认 true */\n  auto?: boolean;\n  /** 播放速度 */\n  speed?: number;\n  /** 高度，在 horizontal 下生效 */\n  height?: number;\n  /** 可选 padding */\n  padding?: [number, number, number, number];\n  /** 当前仅支持 horizontal，只放置在图表底部 */\n  // type?: 'horizontal';\n  /** 宽度，在 vertical 下生效 */\n  // width?: number;\n}\n\n//export type IInteractionConfig = IScrollbarInteractionConfig | ISliderInteractionConfig;\n\nexport type IInteractionConfig = {\n  [field: string]: any;\n};\n\nexport interface IInteractions {\n  type: string;\n  cfg?: IInteractionConfig;\n}\n\n/**\n * 一个点位置\n */\nexport interface Point {\n  readonly x: number;\n  readonly y: number;\n}\n\nexport interface DataItem {\n  [field: string]: string | number | number[] | null | undefined;\n}\n\nexport interface IStyle {\n  [field: string]: any;\n}\n\nexport interface GraphicStyle {\n  fill?: string;\n  fillOpacity?: number;\n  stroke?: string;\n  lineWidth?: number;\n  lineDash?: number[];\n  lineOpacity?: number;\n  opacity?: number;\n  shadowColor?: string;\n  shadowBlur?: number;\n  shadowOffsetX?: number;\n  shadowOffsetY?: number;\n  cursor?: string;\n  [field: string]: any;\n}\n\nexport interface LineStyle {\n  stroke?: string;\n  lineWidth?: number;\n  lineDash?: number[];\n  lineOpacity?: number;\n  shadowColor?: string;\n  shadowBlur?: number;\n  shadowOffsetX?: number;\n  shadowOffsetY?: number;\n  cursor?: string;\n  [field: string]: any;\n}\n\nexport interface TextStyle extends GraphicStyle {\n  fontSize?: number;\n  fontFamily?: string;\n  fontWeight?: number;\n  lineHeight?: number;\n  textAlign?: 'center' | 'left' | 'right';\n  textBaseline?: 'middle' | 'top' | 'bottom';\n  [field: string]: any;\n}\n\ninterface TooltipDataItem {\n  title?: string;\n  data?: Datum;\n  mappingData?: MappingDatum;\n  name?: string;\n  value?: string;\n  color?: string;\n  marker?: boolean;\n  x?: number;\n  y?: number;\n}\n\nexport interface CustomTooltipConfig {\n  title?: string;\n  x?: number;\n  y?: number;\n  items?: TooltipDataItem[];\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nvar EPSILON = 0.0001;\n/**\n * 使用牛顿切割法求最近的点\n * @param {number[]} xArr      点的 x 数组\n * @param {number[]} yArr      点的 y 数组\n * @param {number}   x         指定的点 x\n * @param {number}   y         指定的点 y\n * @param {Function} tCallback 差值函数\n */\nfunction nearestPoint(xArr, yArr, x, y, tCallback) {\n    var t;\n    var interval = 0.005;\n    var d = Infinity;\n    var v0 = [x, y];\n    for (var i = 0; i <= 20; i++) {\n        var _t = i * 0.05;\n        var v1 = [tCallback.apply(null, xArr.concat([_t])), tCallback.apply(null, yArr.concat([_t]))];\n        var d1 = util_1.distance(v0[0], v0[1], v1[0], v1[1]);\n        if (d1 < d) {\n            t = _t;\n            d = d1;\n        }\n    }\n    // 提前终止\n    if (t === 0) {\n        return {\n            x: xArr[0],\n            y: yArr[0],\n        };\n    }\n    if (t === 1) {\n        var count = xArr.length;\n        return {\n            x: xArr[count - 1],\n            y: yArr[count - 1],\n        };\n    }\n    d = Infinity;\n    for (var i = 0; i < 32; i++) {\n        if (interval < EPSILON) {\n            break;\n        }\n        var prev = t - interval;\n        var next = t + interval;\n        var v1 = [tCallback.apply(null, xArr.concat([prev])), tCallback.apply(null, yArr.concat([prev]))];\n        var d1 = util_1.distance(v0[0], v0[1], v1[0], v1[1]);\n        if (prev >= 0 && d1 < d) {\n            t = prev;\n            d = d1;\n        }\n        else {\n            var v2 = [tCallback.apply(null, xArr.concat([next])), tCallback.apply(null, yArr.concat([next]))];\n            var d2 = util_1.distance(v0[0], v0[1], v2[0], v2[1]);\n            if (next <= 1 && d2 < d) {\n                t = next;\n                d = d2;\n            }\n            else {\n                interval *= 0.5;\n            }\n        }\n    }\n    return {\n        x: tCallback.apply(null, xArr.concat([t])),\n        y: tCallback.apply(null, yArr.concat([t])),\n    };\n}\nexports.nearestPoint = nearestPoint;\n// 近似求解 https://community.khronos.org/t/3d-cubic-bezier-segment-length/62363/2\nfunction snapLength(xArr, yArr) {\n    var totalLength = 0;\n    var count = xArr.length;\n    for (var i = 0; i < count; i++) {\n        var x = xArr[i];\n        var y = yArr[i];\n        var nextX = xArr[(i + 1) % count];\n        var nextY = yArr[(i + 1) % count];\n        totalLength += util_1.distance(x, y, nextX, nextY);\n    }\n    return totalLength / 2;\n}\nexports.snapLength = snapLength;\n//# sourceMappingURL=bezier.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mod_1 = require(\"@antv/util/lib/mod\");\nvar to_radian_1 = require(\"@antv/util/lib/to-radian\");\n// 向量长度\nfunction vMag(v) {\n    return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n}\n// u.v/|u||v|，计算夹角的余弦值\nfunction vRatio(u, v) {\n    // 当存在一个向量的长度为 0 时，夹角也为 0，即夹角的余弦值为 1\n    return vMag(u) * vMag(v) ? (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v)) : 1;\n}\n// 向量角度\nfunction vAngle(u, v) {\n    return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n}\n/**\n * 判断两个点是否重合，点坐标的格式为 [x, y]\n * @param {Array} point1 第一个点\n * @param {Array} point2 第二个点\n */\nfunction isSamePoint(point1, point2) {\n    return point1[0] === point2[0] && point1[1] === point2[1];\n}\nexports.isSamePoint = isSamePoint;\n// A 0:rx 1:ry 2:x-axis-rotation 3:large-arc-flag 4:sweep-flag 5: x 6: y\nfunction getArcParams(startPoint, params) {\n    var rx = params[1];\n    var ry = params[2];\n    var xRotation = mod_1.default(to_radian_1.default(params[3]), Math.PI * 2);\n    var arcFlag = params[4];\n    var sweepFlag = params[5];\n    // 弧形起点坐标\n    var x1 = startPoint[0];\n    var y1 = startPoint[1];\n    // 弧形终点坐标\n    var x2 = params[6];\n    var y2 = params[7];\n    var xp = (Math.cos(xRotation) * (x1 - x2)) / 2.0 + (Math.sin(xRotation) * (y1 - y2)) / 2.0;\n    var yp = (-1 * Math.sin(xRotation) * (x1 - x2)) / 2.0 + (Math.cos(xRotation) * (y1 - y2)) / 2.0;\n    var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n    if (lambda > 1) {\n        rx *= Math.sqrt(lambda);\n        ry *= Math.sqrt(lambda);\n    }\n    var diff = rx * rx * (yp * yp) + ry * ry * (xp * xp);\n    var f = diff ? Math.sqrt((rx * rx * (ry * ry) - diff) / diff) : 1;\n    if (arcFlag === sweepFlag) {\n        f *= -1;\n    }\n    if (isNaN(f)) {\n        f = 0;\n    }\n    // 旋转前的起点坐标，且当长半轴和短半轴的长度为 0 时，坐标按 (0, 0) 处理\n    var cxp = ry ? (f * rx * yp) / ry : 0;\n    var cyp = rx ? (f * -ry * xp) / rx : 0;\n    // 椭圆圆心坐标\n    var cx = (x1 + x2) / 2.0 + Math.cos(xRotation) * cxp - Math.sin(xRotation) * cyp;\n    var cy = (y1 + y2) / 2.0 + Math.sin(xRotation) * cxp + Math.cos(xRotation) * cyp;\n    // 起始点的单位向量\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n    // 终止点的单位向量\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n    // 计算起始点和圆心的连线，与 x 轴正方向的夹角\n    var theta = vAngle([1, 0], u);\n    // 计算圆弧起始点和终止点与椭圆圆心连线的夹角\n    var dTheta = vAngle(u, v);\n    if (vRatio(u, v) <= -1) {\n        dTheta = Math.PI;\n    }\n    if (vRatio(u, v) >= 1) {\n        dTheta = 0;\n    }\n    if (sweepFlag === 0 && dTheta > 0) {\n        dTheta = dTheta - 2 * Math.PI;\n    }\n    if (sweepFlag === 1 && dTheta < 0) {\n        dTheta = dTheta + 2 * Math.PI;\n    }\n    return {\n        cx: cx,\n        cy: cy,\n        // 弧形的起点和终点相同时，长轴和短轴的长度按 0 处理\n        rx: isSamePoint(startPoint, [x2, y2]) ? 0 : rx,\n        ry: isSamePoint(startPoint, [x2, y2]) ? 0 : ry,\n        startAngle: theta,\n        endAngle: theta + dTheta,\n        xRotation: xRotation,\n        arcFlag: arcFlag,\n        sweepFlag: sweepFlag,\n    };\n}\nexports.default = getArcParams;\n//# sourceMappingURL=get-arc-params.js.map","import { isNil } from '@antv/util';\nimport { Formatter } from '../interface/config';\n\nexport const combineFormatter = (...formatters: Formatter[]) => (text: string, item: any, idx) =>\n  formatters.reduce((curText, formatter) => formatter(curText, item, idx), text);\n\nexport const getNoopFormatter = () => (text: string) => text;\n\nexport const getPrecisionFormatter = (precision?: number) => (text: string) => {\n  const num = Number(text);\n  return isNaN(num) || isNil(precision) ? text : num.toFixed(precision);\n};\n\nexport const getSuffixFormatter = (suffix?: string) => (text: string) => {\n  return isNil(suffix) ? text : `${text} ${suffix}`;\n};\n","/**\n * 可插拔的状态量管理机\n */\n// todo: 后续还需要加入交互互斥的维护机制\nimport EventEmitter from '@antv/event-emitter';\nimport { each } from '@antv/util';\nimport { LooseMap } from '../interface/types';\n\ntype States = LooseMap;\n\nexport default class StateManager extends EventEmitter {\n  private _states: States;\n  private _stateStack: States;\n  private _changeTimer: any;\n\n  constructor() {\n    super();\n    this._states = {};\n    this._stateStack = {};\n  }\n\n  public setState(name: string, exp: any) {\n    this._stateStack[name] = exp;\n    this._onUpdate();\n  }\n\n  public getState(name: string) {\n    return this._states[name];\n  }\n\n  public getAllStates() {\n    return this._states;\n  }\n\n  public clear() {\n    this._states = {};\n    this._stateStack = {};\n    if (this._changeTimer) {\n      clearTimeout(this._changeTimer);\n      this._changeTimer = null;\n    }\n  }\n\n  private _onUpdate() {\n    const stateStack = this._stateStack;\n\n    if (this._changeTimer) {\n      clearTimeout(this._changeTimer);\n      this._changeTimer = null;\n    }\n\n    this._changeTimer = setTimeout(() => {\n      // for (const name in stateStack) {\n      each(stateStack, (exp, name) => {\n        const state = stateStack[name];\n        if (!this._states[name] || this._states[name] !== exp) {\n          // update states\n          this._states[name] = exp;\n          // dispatch state event\n          this._triggerEvent(name, state);\n        }\n      });\n      // }\n      // clear stack\n      this._stateStack = {};\n    }, 16);\n  }\n\n  private _triggerEvent(name: string, exp: any) {\n    this.emit(`${name}:change`, {\n      name,\n      exp,\n    });\n  }\n}\n","import { flatten, groupBy, map } from '@antv/util';\n\n/**\n * 按照scale字段values中的start和end信息从全部数据中取出对应的部分\n *\n * @param field scale field\n * @param values scale values\n * @param data original data\n * @param range range start & end\n */\nexport const getDataByScaleRange = (\n  field: string,\n  values: string[],\n  data: object[],\n  [start, end]: [number, number],\n  vertical: boolean = false\n): object[] => {\n  const groupedData = groupBy(data, field);\n  const newValues = vertical ? values.slice(values.length - end, values.length - start) : values.slice(start, end);\n\n  return flatten(map(newValues, (value: string) => groupedData[value] || []));\n};\n","import { getTheme as g2GetTheme } from '../../dependents';\nimport { isString, deepMix } from '@antv/util';\nimport { convertToG2Theme, getGlobalTheme, getTheme } from '../../theme';\nimport { getResponsiveTheme } from '../../util/responsive/theme';\nimport { ViewConfig } from '../view-layer';\n\n/**\n * 负责图表theme的管理\n */\n\nconst G2DefaultTheme = g2GetTheme();\n\nexport default class ThemeController<T extends ViewConfig = ViewConfig> {\n  /**\n   * 获取指定的全局theme\n   * @param theme\n   */\n  public static getGlobalTheme(theme: string | object) {\n    if (isString(theme)) {\n      return getGlobalTheme(theme);\n    }\n    return deepMix({}, getGlobalTheme(), theme);\n  }\n\n  /**\n   * 通过 theme 和图表类型，获取当前 plot 对应的主题\n   * @param props\n   * @param type\n   */\n  public getPlotTheme(props: T, type: string) {\n    const { theme } = props;\n    if (isString(theme)) {\n      return deepMix({}, getGlobalTheme(theme), getTheme(type));\n    }\n    return deepMix({}, getGlobalTheme(), getTheme(type), theme);\n  }\n\n  /**\n   * 获取转化成 G2 的结构主题\n   * @param props\n   * @param type\n   */\n  public getTheme(props: T, type: string): any {\n    const plotG2Theme = convertToG2Theme(this.getPlotTheme(props, type));\n    const g2Theme = deepMix({}, G2DefaultTheme, plotG2Theme);\n    return g2Theme;\n  }\n\n  public getResponsiveTheme(type: string) {\n    return getResponsiveTheme(type) || getResponsiveTheme('default');\n  }\n}\n","const COLOR = '#5B8FF9';\n\nexport const COLOR_PLATE_10 = [\n  '#5B8FF9',\n  '#5AD8A6',\n  '#5D7092',\n  '#F6BD16',\n  '#E8684A',\n  '#6DC8EC',\n  '#9270CA',\n  '#FF9D4D',\n  '#269A99',\n  '#FF99C3',\n];\n\nexport const COLOR_PLATE_20 = [\n  '#5B8FF9',\n  '#BDD2FD',\n  '#5AD8A6',\n  '#BDEFDB',\n  '#5D7092',\n  '#C2C8D5',\n  '#F6BD16',\n  '#FBE5A2',\n  '#E8684A',\n  '#F6C3B7',\n  '#6DC8EC',\n  '#B6E3F5',\n  '#9270CA',\n  '#D3C6EA',\n  '#FF9D4D',\n  '#FFD8B8',\n  '#269A99',\n  '#AAD8D8',\n  '#FF99C3',\n  '#FFD6E7',\n];\nimport { some } from '@antv/util';\nimport { ViewConfig } from '../base/view-layer';\n\nexport const DESCRIPTION_BOTTOM_MARGIN = function (legendPosition) {\n  if (legendPosition && legendPosition.split('-')[0] === 'top') {\n    return 12;\n  }\n  return 24;\n};\n\nexport const TOP_BLEEDING = (props: ViewConfig) => {\n  const titleVisible = props.title && props.title.visible;\n  const descriptionVisible = props.description && props.description.visible;\n  if (titleVisible || descriptionVisible) {\n    // 由 title/description 的 bottom-padding 负责\n    return 12;\n  }\n  return 24;\n};\n\nexport const BOTTOM_BLEEDING = (props: ViewConfig) => {\n  if (\n    some(\n      props.interactions || [],\n      (interaction) =>\n        (interaction.type === 'slider' || interaction.type === 'scrollbar') &&\n        (interaction.cfg && interaction.cfg.type) !== 'vertical'\n    )\n  ) {\n    return 8;\n  }\n  return 24;\n};\n\nexport const DEFAULT_GLOBAL_THEME = {\n  width: 400,\n  height: 400,\n  bleeding: [TOP_BLEEDING, 24, BOTTOM_BLEEDING, 24],\n  padding: 'auto',\n  defaultColor: COLOR, // 默认主题色\n  colors: COLOR_PLATE_10,\n  colors_20: COLOR_PLATE_20,\n  title: {\n    padding: [24, 24, 24, 24],\n    fontFamily: 'PingFang SC',\n    fontSize: 18,\n    fill: 'black',\n    textAlign: 'left',\n    textBaseline: 'top',\n    lineHeight: 20,\n    alignWithAxis: false,\n  },\n  description: {\n    padding: [10, 24, DESCRIPTION_BOTTOM_MARGIN, 24],\n    fontFamily: 'PingFang SC',\n    fontSize: 12,\n    fill: 'grey',\n    textAlign: 'left',\n    textBaseline: 'top',\n    lineHeight: 16,\n    alignWithAxis: false,\n  },\n  axis: {\n    y: {\n      visible: true,\n      position: 'left',\n      autoRotateTitle: true,\n      grid: {\n        visible: true,\n        line: {\n          style: {\n            stroke: 'rgba(0, 0, 0, 0.15)',\n            lineWidth: 1,\n            lineDash: [0, 0],\n          },\n        },\n      },\n      line: {\n        visible: false,\n        style: {\n          stroke: 'rgba(0, 0, 0, 0.45)',\n          lineWidth: 1,\n        },\n      },\n      tickLine: {\n        visible: false,\n        style: {\n          stroke: 'rgba(0,0,0,0.45)',\n          lineWidth: 0.5,\n          length: 4,\n        },\n      },\n      label: {\n        visible: true,\n        offset: 8,\n        textStyle: {\n          fill: 'rgba(0,0,0,0.45)',\n          fontSize: 12,\n        },\n        autoRotate: false,\n        autoHide: true,\n      },\n      title: {\n        visible: false,\n        offset: 12,\n        style: {\n          fill: 'rgba(0, 0, 0, 0.65)',\n          fontSize: 12,\n          textBaseline: 'bottom',\n        },\n      },\n    },\n    x: {\n      visible: true,\n      position: 'bottom',\n      autoRotateTitle: false,\n      grid: {\n        visible: false,\n        line: {\n          style: {\n            stroke: 'rgba(0, 0, 0, 0.15)',\n            lineWidth: 1,\n            lineDash: [0, 0],\n          },\n        },\n      },\n      line: {\n        visible: false,\n        style: {\n          stroke: 'rgba(0, 0, 0, 0.45)',\n          lineWidth: 1,\n        },\n      },\n      tickLine: {\n        visible: true,\n        style: {\n          length: 4,\n          stroke: 'rgba(0, 0, 0, 0.45)',\n          lineWidth: 0.5,\n        },\n      },\n      label: {\n        visible: true,\n        textStyle: {\n          fill: 'rgba(0,0,0,0.45)',\n          fontSize: 12,\n        },\n        offset: 16,\n        autoRotate: true,\n        autoHide: true,\n      },\n      title: {\n        visible: false,\n        offset: 12,\n        style: { fill: 'rgba(0, 0, 0, 0.65)', fontSize: 12 },\n      },\n    },\n    circle: {\n      autoHideLabel: false,\n      // gridType: 'line',\n      grid: {\n        line: {\n          style: {\n            lineDash: null,\n            lineWidth: 1,\n            stroke: 'rgba(0, 0, 0, 0.15)',\n          },\n        },\n      },\n      line: {\n        style: {\n          lineWidth: 1,\n          stroke: 'rgba(0, 0, 0, 0.45)',\n        },\n      },\n      tickLine: {\n        style: {\n          lineWidth: 1,\n          stroke: 'rgba(0, 0, 0, 0.45)',\n          length: 4,\n          alignWithLabel: true,\n        },\n      },\n      label: {\n        offset: 16,\n        textStyle: {\n          fill: 'rgba(0,0,0,0.45)',\n          fontSize: 12,\n        },\n        autoRotate: true,\n        autoHide: true,\n      },\n      title: {\n        offset: 12,\n        style: { fill: 'rgba(0, 0, 0, 0.65)', fontSize: 12 },\n      },\n    },\n    radius: {\n      label: {\n        textStyle: {\n          fill: 'rgba(0,0,0,0.45)',\n          fontSize: 12,\n        },\n      },\n    },\n  },\n  legend: {\n    flipPage: false,\n    position: 'bottom',\n    // 距离panelRange的距离\n    innerPadding: [16, 16, 16, 16],\n    margin: [0, 24, 24, 24],\n  },\n  label: {\n    offset: 12,\n    textStyle: {\n      fill: '#595959',\n    },\n    style: {\n      fill: '#595959',\n      stroke: '#ffffff',\n      lineWidth: 2,\n    },\n  },\n  tooltip: {\n    'g2-tooltip': {\n      boxShadow: '0px 0px 8px rgba(0,0,0,0.15)',\n    },\n    offset: 10,\n  },\n};\n","export { default as Line, LineConfig } from './line';\nexport { default as Treemap, TreemapConfig } from './treemap';\nexport { default as StepLine, StepLineConfig } from './step-line';\nexport { default as Bar, BarConfig } from './bar';\nexport { default as StackedBar, StackedBarConfig } from './stacked-bar';\nexport { default as GroupedBar, GroupedBarConfig } from './grouped-bar';\nexport { default as PercentStackedBar, PercentStackedBarConfig } from './percent-stacked-bar';\nexport { default as RangeBar, RangeBarConfig } from './range-bar';\nexport { default as Area, AreaConfig } from './area';\nexport { default as StackedArea, StackedAreaConfig } from './stacked-area';\nexport { default as PercentStackedArea, PercentStackedAreaConfig } from './percent-stacked-area';\nexport { default as Column, ColumnConfig } from './column';\nexport { default as ColumnLabel } from './column/component/label';\nexport { default as GroupedColumn, GroupedColumnConfig } from './grouped-column';\nexport { default as StackedColumn, StackedColumnConfig } from './stacked-column';\nexport { default as StackedColumnLabel } from './stacked-column/component/label';\nexport { default as RangeColumn, RangeColumnConfig } from './range-column';\nexport { default as PercentStackedColumn, PercentStackedColumnConfig } from './percent-stacked-column';\nexport { default as Pie, PieConfig } from './pie';\nexport { default as DensityHeatmap, DensityHeatmapConfig } from './density-heatmap';\nexport { default as Heatmap, HeatmapConfig } from './heatmap';\nexport { default as WordCloud, WordCloudConfig } from './word-cloud';\nexport { default as Rose, RoseConfig } from './rose';\nexport { default as Funnel, FunnelConfig } from './funnel';\nexport { default as StackedRose, StackedRoseConfig } from './stacked-rose';\nexport { default as GroupedRose, GroupedRoseConfig } from './grouped-rose';\nexport { default as Radar, RadarConfig } from './radar';\nexport { default as Liquid, LiquidConfig } from './liquid';\nexport { default as Histogram, HistogramConfig } from './histogram';\nexport { default as Density, DensityConfig } from './density';\nexport { default as Donut, DonutConfig } from './donut';\nexport { default as Waterfall, WaterfallConfig } from './waterfall';\nexport { default as Scatter, ScatterConfig } from './scatter';\nexport { default as Bubble, BubbleConfig } from './bubble';\nexport { default as Bullet, BulletConfig } from './bullet';\nexport { default as Calendar, CalendarConfig } from './calendar';\nexport { default as Gauge, GaugeConfig } from './gauge';\nexport { default as FanGauge, FanGaugeConfig } from './fan-gauge';\nexport { default as MeterGauge, MeterGaugeConfig } from './meter-gauge';\n\nexport * from './compatiblePlots';\n","import { deepMix, has, map, each, some } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport ViewLayer, { ViewConfig } from '../../base/view-layer';\nimport { getGeom } from '../../geoms/factory';\nimport {\n  ICatAxis,\n  ITimeAxis,\n  IValueAxis,\n  GraphicStyle,\n  LineStyle,\n  ISliderInteractionConfig,\n  IScrollbarInteractionConfig,\n} from '../../interface/config';\nimport { extractScale, trySetScaleMinToZero } from '../../util/scale';\nimport { getPlotOption } from './animation/clipIn-with-data';\nimport responsiveMethods from './apply-responsive';\nimport '../../components/label/point';\nimport '../../components/label/point-auto';\nimport LineLabel from './component/label/line-label';\nimport * as EventParser from './event';\nimport MarkerPoint, { MarkerPointCfg } from '../../components/marker-point';\nimport './theme';\nimport './apply-responsive/theme';\nimport { LooseMap } from '../../interface/types';\nimport { LineActive, LineSelect } from './interaction/index';\nimport { getGeometryByType } from '../../util/view';\n\ntype IObject = LooseMap;\n\nconst GEOM_MAP = {\n  line: 'line',\n  point: 'point',\n};\n\ntype LineInteraction =\n  | { type: 'slider'; cfg: ISliderInteractionConfig }\n  | { type: 'scrollBar'; cfg: IScrollbarInteractionConfig };\n\ntype PointShape = string | { fields?: []; callback: () => string };\n\nexport interface LineViewConfig extends ViewConfig {\n  /** 分组字段 */\n  seriesField?: string;\n  /** 是否平滑 */\n  smooth?: boolean;\n  /** 是否连接空数据 */\n  connectNulls?: boolean;\n  /** 折线extra图形样式 */\n  lineStyle?: LineStyle | ((...args: any[]) => LineStyle);\n  /** 折线数据点图形样式 */\n  point?: {\n    visible?: boolean;\n    shape?: PointShape;\n    size?: number;\n    color?: string;\n    style?: GraphicStyle;\n  };\n  markerPoints?: (Omit<MarkerPointCfg, 'view'> & {\n    visible?: boolean;\n  })[];\n  xAxis?: IValueAxis | ICatAxis | ITimeAxis;\n  yAxis?: IValueAxis;\n  interactions?: LineInteraction[];\n}\n\nexport interface LineLayerConfig extends LineViewConfig, LayerConfig {}\n\nexport default class LineLayer<T extends LineLayerConfig = LineLayerConfig> extends ViewLayer<T> {\n  public static getDefaultOptions(): Partial<LineLayerConfig> {\n    return deepMix({}, super.getDefaultOptions(), {\n      connectNulls: false,\n      smooth: false,\n      lineSize: 2,\n      lineStyle: {\n        lineJoin: 'round',\n        lineCap: 'round',\n      },\n      point: {\n        visible: false,\n        size: 3,\n        shape: 'circle',\n        style: {\n          stroke: '#fff',\n        },\n      },\n      label: {\n        visible: false,\n        type: 'point',\n      },\n      legend: {\n        visible: true,\n        position: 'top-left',\n        wordSpacing: 4,\n      },\n      tooltip: {\n        crosshairs: {\n          line: {\n            style: {\n              stroke: 'rgba(0,0,0,0.45)',\n            },\n          },\n        },\n      },\n      markerPoints: [],\n    });\n  }\n\n  public line: any; // 保存line和point的配置项，用于后续的label、tooltip\n  public point: any;\n  public type: string = 'line';\n  protected markerPoints: MarkerPoint[] = [];\n\n  public afterRender() {\n    const options = this.options;\n    this.renderLabel();\n    if (options.markerPoints) {\n      // 清空\n      each(this.markerPoints, (markerPoint: MarkerPoint) => markerPoint.destroy());\n      this.markerPoints = [];\n      options.markerPoints.forEach((markerPointOpt) => {\n        if (markerPointOpt.visible) {\n          const markerPoint = new MarkerPoint({\n            ...markerPointOpt,\n            view: this.view,\n          });\n          this.markerPoints.push(markerPoint);\n        }\n      });\n    }\n    // 响应式\n    if (options.responsive && options.padding !== 'auto') {\n      this.applyResponsive('afterRender');\n    }\n    super.afterRender();\n  }\n\n  protected geometryParser(dim, type) {\n    return GEOM_MAP[type];\n  }\n\n  protected scale() {\n    const props = this.options;\n    const scales = {};\n    /** 配置x-scale */\n    scales[props.xField] = {};\n    if (has(props, 'xAxis')) {\n      extractScale(scales[props.xField], props.xAxis);\n    }\n    /** 配置y-scale */\n    scales[props.yField] = {};\n    if (has(props, 'yAxis')) {\n      extractScale(scales[props.yField], props.yAxis);\n    }\n    this.setConfig('scales', scales);\n    trySetScaleMinToZero(\n      scales[props.yField],\n      map(props.data as any, (item) => item[props.yField])\n    );\n    super.scale();\n  }\n\n  protected coord() {\n    return;\n  }\n\n  protected tooltip() {\n    // 如果有标注点，则不展示markers\n    if (some(this.options.markerPoints, (markerPointOpt) => markerPointOpt.visible)) {\n      this.options.tooltip.showMarkers = false;\n    }\n    super.tooltip();\n  }\n\n  protected addGeometry() {\n    // 配置线\n    this.addLine();\n    // 配置数据点\n    this.addPoint();\n  }\n\n  private addLine() {\n    const props: any = this.options;\n    this.line = getGeom('line', 'main', {\n      plot: this,\n    });\n\n    if (props.tooltip && (props.tooltip.fields || props.tooltip.formatter)) {\n      this.geometryTooltip();\n    }\n\n    this.setConfig('geometry', this.line);\n  }\n\n  protected addPoint() {\n    const props = this.options;\n    const defaultConfig = { visible: false };\n    if (props.point) {\n      props.point = deepMix(defaultConfig, props.point);\n    }\n    if (props.point && props.point.visible) {\n      this.point = getGeom('point', 'guide', {\n        plot: this,\n      });\n      this.setConfig('geometry', this.point);\n    }\n  }\n\n  protected renderLabel() {\n    const { scales } = this.config;\n    const { label, yField } = this.options;\n    const scale = scales[yField];\n    if (label.visible) {\n      const geometry = getGeometryByType(this.view, 'line');\n      if (label.type === 'line') {\n        // TODO: Line Label 迁移\n        const label = new LineLabel({\n          view: this.view,\n          plot: this,\n          ...this.options.label,\n        });\n        label.render();\n      } else {\n        this.doRenderLabel(geometry, {\n          type: 'point',\n          formatter: scale.formatter,\n          ...this.options.label,\n        });\n      }\n    }\n  }\n\n  protected geometryTooltip() {\n    this.line.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      this.line.tooltip.fields = tooltipOptions.fields;\n    }\n    if (tooltipOptions.formatter) {\n      this.line.tooltip.callback = tooltipOptions.formatter;\n      if (!tooltipOptions.fields) {\n        this.line.tooltip.fields = [this.options.xField, this.options.yField];\n        if (this.options.seriesField) {\n          this.line.tooltip.fields.push(this.options.seriesField);\n        }\n      }\n    }\n  }\n\n  protected animation() {\n    super.animation();\n    const props = this.options;\n    if (!props.animation) {\n      // 关闭动画\n      this.line.animate = false;\n      if (this.point) this.point.animate = false;\n    } else {\n      getPlotOption({\n        options: this.options,\n        view: this.view,\n      });\n      this.line.animate = props.animation;\n    }\n  }\n\n  protected applyInteractions() {\n    super.applyInteractions();\n    this.interactions.push(\n      new LineActive({\n        view: this.view,\n      })\n    );\n    this.interactions.push(\n      new LineSelect({\n        view: this.view,\n      })\n    );\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n\n  private applyResponsive(stage) {\n    const methods = responsiveMethods[stage];\n    each(methods, (r) => {\n      const responsive = r as IObject;\n      responsive.method(this);\n    });\n  }\n\n  private singleLineLabelCheck() {\n    // 不允许单折线设置尾部跟随label\n    return !this.options.seriesField && this.options.label.type && this.options.label.type === 'line';\n  }\n}\n\nregisterPlotType('line', LineLayer);\n","import { Datum } from '../../dependents';\nimport { has, isString, isFunction, get } from '@antv/util';\nimport ElementParser from '../base';\n\nexport default class AreaParser extends ElementParser {\n  public init() {\n    const props = this.plot.options;\n    this.config = {\n      type: 'area',\n      position: {\n        fields: [props.xField, props.yField],\n      },\n      connectNulls: props.connectNulls || false,\n    };\n    if (props.smooth) {\n      this.config.shape = { values: ['smooth'] };\n    }\n    if (this._getColorMappingField() || props.color) {\n      this.parseColor();\n    }\n\n    if (props.areaStyle || (props.area && props.area.style)) {\n      this.parseStyle();\n    }\n  }\n\n  public parseColor() {\n    const props = this.plot.options;\n    const config: Datum = {};\n    const colorMappingField = this._getColorMappingField();\n    if (colorMappingField) {\n      config.fields = colorMappingField;\n    }\n    if (has(props, 'color')) {\n      const color = props.color;\n      if (isString(color)) {\n        config.values = [color];\n      } else if (isFunction(color)) {\n        config.callback = color;\n      } else {\n        config.values = color as [];\n      }\n    }\n    this.config.color = config;\n  }\n\n  public parseStyle() {\n    const props = this.plot.options;\n    const styleProps = props.areaStyle ? props.areaStyle : props.area.style;\n    const config: Datum = {};\n    if (isFunction(styleProps) && props.seriesField) {\n      config.fields = [props.seriesField];\n      config.callback = styleProps;\n    } else {\n      config.cfg = styleProps;\n    }\n    this.config.style = config;\n  }\n\n  private _getColorMappingField() {\n    const props = this.plot.options;\n    const colorMapper = ['stackField', 'seriesField'];\n    for (const m of colorMapper) {\n      if (get(props, m)) {\n        return [props[m]];\n      }\n    }\n  }\n}\n","/** 简化折线点 */\nimport { registerShape } from '../../dependents';\nimport { deepMix, mix } from '@antv/util';\nimport { lineSimplification } from '../../util/math';\nimport { getSplinePath } from '../../util/path';\nimport LineParser from './main';\nimport { getGlobalTheme } from '../../theme';\n\nregisterShape('line', 'miniLine', {\n  draw(cfg, container) {\n    const points = lineSimplification(cfg.points);\n    const path = [];\n    for (let i = 0; i < points.length; i++) {\n      const p = points[i];\n      const flag = i === 0 ? 'M' : 'L';\n      path.push([flag, p.x, p.y]);\n    }\n    const style = deepMix(\n      {},\n      {\n        lineJoin: 'round',\n        lineCap: 'round',\n      },\n      cfg.style\n    );\n    const shape = container.addShape('path', {\n      attrs: mix(\n        {\n          path,\n          stroke: cfg.color || getGlobalTheme().defaultColor,\n          lineWidth: cfg.size || 2,\n        },\n        style\n      ),\n    });\n    return shape;\n  },\n});\n\nregisterShape('line', 'miniLineSmooth', {\n  draw(cfg, container) {\n    const points = lineSimplification(cfg.points);\n    const constraint = [\n      [0, 0],\n      [1, 1],\n    ];\n    const path = getSplinePath(points, false, constraint);\n    const shape = container.addShape('path', {\n      attrs: mix(\n        {\n          path,\n          stroke: cfg.color || getGlobalTheme().defaultColor,\n          lineWidth: cfg.size || 2,\n        },\n        cfg.style\n      ),\n    });\n    return shape;\n  },\n});\n\nexport default class MiniLineParser extends LineParser {\n  public init() {\n    super.init();\n    this.parseShape();\n  }\n\n  private parseShape() {\n    const props = this.plot.options;\n    if (props.smooth) {\n      this.config.shape = { values: ['miniLineSmooth'] };\n    } else {\n      this.config.shape = { values: ['miniLine'] };\n    }\n  }\n}\n","/** 负责将shape数据转为node，使shape根据node数据进行update */\nimport { IShape } from '@antv/g-base';\nimport { deepMix, each } from '@antv/util';\nimport * as MathUtil from '../../math';\n\ninterface NodesCfg {\n  shapes: IShape[];\n}\nexport interface IShapeNode {\n  width: number;\n  height: number;\n  centerX: number;\n  centerY: number;\n  top: number;\n  bottom: number;\n  left: number;\n  right: number;\n  topLeft?: {};\n  topRight?: {};\n  bottomLeft?: {};\n  bottomRight?: {};\n  shape?: IShape;\n}\n\nexport default class ShapeNodes {\n  public shapes: IShape[];\n  public nodes: IShapeNode[];\n  public origion_nodes: IShapeNode[];\n  public type: string = 'shape';\n  constructor(cfg: NodesCfg) {\n    this.shapes = cfg.shapes;\n    this.nodes = [];\n    this._parserNodes();\n    this.origion_nodes = deepMix([], this.nodes);\n  }\n\n  public measure(shape) {\n    const node = deepMix({}, MathUtil.bboxOnRotate(shape), { shape });\n    return node;\n  }\n\n  public measureNodes() {\n    const nodes = [];\n    const shapes = [];\n    each(this.shapes, (shape, index) => {\n      const node = deepMix({}, this.nodes[index], this.measure(shape));\n      if (node.width !== 0 && node.height !== 0) {\n        nodes.push(node);\n        shapes.push(shape);\n      }\n      // this.nodes[index] = node;\n    });\n    this.nodes = nodes;\n    this.shapes = shapes;\n  }\n\n  private _parserNodes() {\n    each(this.shapes, (shape) => {\n      const node = this.measure(shape);\n      this.nodes.push(node);\n    });\n  }\n}\n","import columnWidth from './column-width';\nimport elementCollision from './element-collision';\nimport elementDist from './element-dist';\nimport elementDistVertical from './element-dist-vertical';\nimport elementWidth from './element-width';\nimport minRingThickness from './min-ring-thickness';\nimport ringThickness from './ring-thickness';\n\n/** constraints约束库 */\nexport interface IConstraint {\n  usage: string;\n  type: string;\n  method: (...args: any) => any;\n}\n\nexport const constraintsLib = {\n  elementDist,\n  elementDistVertical,\n  elementCollision,\n  elementWidth,\n  columnWidth,\n  ringThickness,\n  minRingThickness,\n};\n\nexport function registerResponsiveConstraint(name, constraint: IConstraint) {\n  // todo: 防止覆盖\n  constraintsLib[name] = constraint;\n}\n","import clearOverlapping from './clear-overlapping';\nimport datetimeStringAbbrevaite from './datetime-string-abbrevaite';\nimport digitsAbbreviate from './digits-abbreviate';\nimport nodeJitter from './node-jitter';\nimport nodeJitterUpward from './node-jitter-upward';\nimport nodesResampling from './nodes-resampling';\nimport nodesResamplingByAbbrevate from './nodes-resampling-by-abbrevate';\nimport nodesResamplingByChange from './nodes-resampling-by-change';\nimport nodesResamplingByState from './nodes-resampling-by-state';\nimport robustAbbrevaite from './robust-abbrevaite';\nimport textAbbreviate from './text-abbreviate';\nimport textHide from './text-hide';\nimport textRotation from './text-rotation';\nimport textWrapper from './text-wrapper';\n\nexport const rulesLib = {\n  textWrapper,\n  textRotation,\n  textAbbreviate,\n  textHide,\n  digitsAbbreviate,\n  datetimeStringAbbrevaite,\n  robustAbbrevaite,\n  nodesResampling,\n  nodesResamplingByAbbrevate,\n  nodesResamplingByChange,\n  nodesResamplingByState,\n  nodeJitter,\n  nodeJitterUpward,\n  clearOverlapping,\n};\n\nexport function registerResponsiveRule(name, method) {\n  // todo: 防止覆盖\n  rulesLib[name] = method;\n}\n","import { IShape } from '@antv/g-base';\nimport { each } from '@antv/util';\nimport textHide from './text-hide';\n\nexport default function clearOverlapping(shape: IShape, option, index, cfg) {\n  const nodes = cfg.nodes.nodes;\n  const current = nodes[index];\n  const overlapped = [];\n  /** 找到所有与当前点overlap的node */\n  if (!current.shape.get('blank')) {\n    for (let i = 0; i < nodes.length; i++) {\n      const node = nodes[i];\n      const _shape = node.shape;\n      if (i !== index && !_shape.get('blank')) {\n        const isOverlap = isNodeOverlap(current, node);\n        if (isOverlap) {\n          overlapped.push(node);\n        }\n      }\n    }\n  }\n  /** overlap处理逻辑 */\n  if (overlapped.length > 0) {\n    overlapped.push(current);\n    overlapped.sort((a, b) => {\n      return b.top - a.top;\n    });\n    /** 隐藏除最高点以外的node */\n    each(overlapped, (node: any, idx: number) => {\n      if (idx > 0) {\n        const _shape = node.shape;\n        textHide(_shape);\n        _shape.set('blank', true);\n      }\n    });\n  }\n}\n\nexport function isNodeOverlap(nodeA, nodeB) {\n  if (nodeA.bottom < nodeB.top || nodeB.bottom < nodeA.top) {\n    return false;\n  }\n  if (nodeA.right < nodeB.left || nodeB.right < nodeA.left) {\n    return false;\n  }\n  return true;\n}\n","import { each } from '@antv/util';\nimport fecha from 'fecha';\n\nconst SECOND = 1000;\nconst MINUTE = 60 * SECOND;\nconst HOUR = 60 * MINUTE;\nconst DAY = 24 * HOUR;\nconst MONTH = 31 * DAY;\nconst YEAR = 365 * DAY;\n\ninterface TimeStringAbbrevaiteCfg {\n  keep?: string[];\n}\n\nexport default function datetimeStringAbbrevaite(shape, option: TimeStringAbbrevaiteCfg, index, cfg) {\n  const nodes = cfg.nodes.nodes;\n  let campareText;\n  if (index === nodes.length - 1) {\n    campareText = nodes[index - 1].shape.get('delegateObject').item.name;\n  } else {\n    campareText = nodes[index + 1].shape.get('delegateObject').item.name;\n  }\n  const compare = new Date(campareText);\n  /** 获取时间周期和时间间隔 */\n  const text = shape.get('delegateObject').item.name;\n  const current = new Date(text);\n  const startText = nodes[0].shape.get('delegateObject').item.name;\n  const start = new Date(startText);\n  const endText = nodes[nodes.length - 1].shape.get('delegateObject').item.name;\n  const end = new Date(endText);\n  const timeDuration = getDateTimeMode(start, end);\n  const timeCycle = getDateTimeMode(current, compare); // time frequency\n  // 如果duration和frequency在同一区间\n  if (timeDuration === timeCycle) {\n    if (index !== 0 && index !== nodes.length - 1) {\n      const formatter = sameSectionFormatter(timeDuration);\n      shape.attr('text', fecha.format(current, formatter));\n    }\n    return;\n  }\n  if (index !== 0) {\n    const previousText = nodes[index - 1].shape.get('delegateObject').item.name;\n    const previous = new Date(previousText);\n    const isAbbreviate = needAbbrevaite(timeDuration, current, previous);\n    if (isAbbreviate) {\n      const formatter = getAbbrevaiteFormatter(timeDuration, timeCycle);\n      shape.attr('text', fecha.format(current, formatter));\n      return;\n    }\n  }\n}\n\nfunction needAbbrevaite(mode, current, previous) {\n  const currentStamp = getTime(current, mode);\n  const previousStamp = getTime(previous, mode);\n  if (currentStamp !== previousStamp) {\n    return false;\n  }\n  return true;\n}\n\nfunction getDateTimeMode(a, b) {\n  let mode;\n  const dist = Math.abs(a - b);\n  const mapper = {\n    minute: [MINUTE, HOUR],\n    hour: [HOUR, DAY],\n    day: [DAY, MONTH],\n    month: [MONTH, YEAR],\n    year: [YEAR, Infinity],\n  };\n  each(mapper, (range, key) => {\n    if (dist >= range[0] && dist < range[1]) {\n      mode = key;\n    }\n  });\n  return mode;\n}\n\nfunction getAbbrevaiteFormatter(duration, cycle) {\n  const times = ['year', 'month', 'day', 'hour', 'minute'];\n  const formatters = ['YYYY', 'MM', 'DD', 'HH', 'MM'];\n  const startIndex = times.indexOf(duration) + 1;\n  const endIndex = times.indexOf(cycle);\n  let formatter = '';\n  for (let i = startIndex; i <= endIndex; i++) {\n    formatter += formatters[i];\n    if (i < endIndex) {\n      formatter += '-';\n    }\n  }\n  return formatter;\n}\n\nfunction sameSectionFormatter(mode) {\n  const times = ['year', 'month', 'day', 'hour', 'minute'];\n  const formatters = ['YYYY', 'MM', 'DD', 'HH', 'MM'];\n  const index = times.indexOf(mode);\n  const formatter = formatters[index];\n  return formatter;\n}\n\nfunction getTime(date: Date, mode: string) {\n  if (mode === 'year') {\n    return date.getFullYear();\n  }\n  if (mode === 'month') {\n    return date.getMonth() + 1;\n  }\n  if (mode === 'day') {\n    return date.getDay() + 1;\n  }\n\n  if (mode === 'hour') {\n    return date.getHours() + 1;\n  }\n\n  if (mode === 'minute') {\n    return date.getMinutes() + 1;\n  }\n}\n\n/*tslint:disable*/\nexport function isTime(string) {\n  const hourminExp = /^(?:(?:[0-2][0-3])|(?:[01]\\d)):[0-5]\\d$/;\n  const hourminSecExp = /^(?:(?:[0-2][0-3])|(?:[01]\\d))(?::[0-5]\\d){2}$/;\n  return hourminExp.test(string) || hourminSecExp.test(string);\n}\n","import { IShape } from '@antv/g-base';\nimport { has, each } from '@antv/util';\nimport { getMedian } from '../../math';\n\ninterface DigitsAbbreviateCfg {\n  unit?: 'k' | 'm' | 'b' | 't' | 'auto';\n  formatter?: (val: number) => string;\n  decimal?: number;\n}\nconst unitMapper = {\n  k: { number: 1e3, index: 0 },\n  m: { number: 1e6, index: 1 },\n  b: { number: 1e9, index: 2 },\n  t: { number: 1e12, index: 3 },\n};\n\n// https://gist.github.com/MartinMuzatko/1060fe584d17c7b9ca6e\n// https://jburrows.wordpress.com/2014/11/18/abbreviating-numbers/\n/*tslint:disable*/\n\nexport default function digitsAbbreviate(shape: IShape, option: DigitsAbbreviateCfg, index, cfg) {\n  if (!has(cfg, 'node') || !has(cfg.node, 'node')) {\n    return;\n  }\n  const nodes = cfg.nodes.nodes;\n  const number = parseFloat(shape.get('origin').text);\n  if (number === 0) {\n    return;\n  }\n  if (option.formatter) {\n    shape.attr('text', option.formatter(number));\n    return;\n  }\n  if (option.unit) {\n    const { num, unitname } = abbravateDigitsByUnit(option, number);\n    shape.attr('text', num + unitname);\n  } else {\n    // 自动换算逻辑\n    // 根据中位数得到换算单位\n    const numbers = extractNumbers(nodes);\n    const median = getMedian(numbers);\n    const unitname = getUnitByNumber(median);\n    //根据数值的interval计算换算后保留的浮点数\n    const unitNumber = unitMapper[unitname].number;\n    const interval = getLinearNodesInterval(nodes);\n    const decimal = getDigitsDecimal(interval, unitNumber);\n    const { num } = abbravateDigitsByUnit({ unit: unitname, decimal }, number);\n    shape.attr('text', num + unitname);\n  }\n}\n\nfunction abbravateDigitsByUnit(option, number) {\n  const units = ['k', 'm', 'b', 't'];\n  let num;\n  let unitname;\n  if (option.unit === 'auto') {\n    /** auto formatt k-m-b-t */\n    const order = Math.floor(Math.log(number) / Math.log(1000));\n    unitname = units[order - 1];\n    num = (number / 1000 ** order).toFixed(option.decimal);\n  } else if (option.unit) {\n    const unit = unitMapper[option.unit];\n    unitname = option.unit;\n    num = (number / unit.number).toFixed(option.decimal);\n  }\n  return { num, unitname };\n}\n\nfunction getUnitByNumber(number) {\n  const units = ['k', 'm', 'b', 't'];\n  const order = Math.floor(Math.log(number) / Math.log(1000));\n  return units[order - 1];\n}\n\nfunction extractNumbers(nodes) {\n  const numbers = [];\n  each(nodes, (node) => {\n    const n = node as any;\n    const number = parseFloat(n.shape.get('origin').text);\n    numbers.push(number);\n  });\n  return numbers;\n}\n\nfunction getLinearNodesInterval(nodes) {\n  if (nodes.length >= 2) {\n    const a = parseFloat(nodes[0].shape.get('origin').text);\n    const b = parseFloat(nodes[1].shape.get('origin').text);\n    return Math.abs(a - b);\n  }\n  return 0;\n}\n\nfunction getDigitsDecimal(interval, unitNumber) {\n  const unitBit = Math.floor(Math.log10(unitNumber));\n  if (interval >= unitNumber) {\n    const remainder = interval % unitNumber;\n    if (remainder > 0) {\n      const remainderBit = Math.floor(Math.log10(remainder));\n      return Math.abs(remainderBit - unitBit);\n    }\n  } else {\n    const intervalBit = Math.floor(Math.log10(interval));\n    return Math.abs(intervalBit - unitBit);\n  }\n  return 0;\n}\n","import { each, isNumber } from '@antv/util';\nimport textHide from './text-hide';\n\nexport interface NodesResamplingCfg {\n  keep: string[];\n}\n\nexport default function nodesResampling(shape, option: NodesResamplingCfg, index, cfg) {\n  const nodes = cfg.nodes.nodes;\n  /** nodeLength为偶数，则奇数index的shape保留，反之则偶数index的shape保留 */\n  const oddKeep = nodes.length % 2 === 0 ? false : true;\n  if (isKeep(option.keep, index, nodes)) {\n    return;\n  }\n  {\n    const isOdd = index % 2 === 0 ? true : false;\n    if ((!oddKeep && isOdd) || (oddKeep && !isOdd)) {\n      textHide(shape);\n    }\n  }\n}\n\nexport function isKeep(keepCfg, index, nodes) {\n  /** 允许设置start end 或任意index */\n  const conditions = [];\n  each(keepCfg, (cfg) => {\n    if (cfg === 'start') {\n      conditions.push(index === 0);\n    } else if (cfg === 'end') {\n      conditions.push(index === nodes.length - 1);\n    } else if (isNumber(cfg)) {\n      conditions.push(index === cfg);\n    }\n  });\n  for (const condition of conditions) {\n    if (condition === true) {\n      return true;\n    }\n  }\n  return false;\n}\n","import { IShape } from '@antv/g-base';\n\ninterface TextAbbreviateCfg {\n  abbreviateBy?: 'start' | 'middle' | 'end';\n}\nexport default function textAbbreviate(shape: IShape, option: TextAbbreviateCfg) {\n  const abbreviateBy = option.abbreviateBy ? option.abbreviateBy : 'end';\n  const text = shape.attr('text');\n  let abbravateText;\n  if (abbreviateBy === 'end') {\n    abbravateText = `${text[0]}...`;\n  }\n  if (abbreviateBy === 'start') {\n    abbravateText = `...${text[text.length - 1]}`;\n  }\n  if (abbreviateBy === 'middle') {\n    abbravateText = `${text[0]}...${text[text.length - 1]}`;\n  }\n  shape.resetMatrix();\n  shape.attr({\n    text: abbravateText,\n    textAlign: 'center',\n    textBaseline: 'top',\n  });\n}\n","import { assign } from '@antv/util';\n\nexport default abstract class ApplyResponsive {\n  public plot: any;\n  public type: string;\n  public responsiveTheme: any;\n\n  constructor(cfg) {\n    assign(this, cfg);\n    this.init();\n  }\n\n  protected init() {\n    this.type = this.getType();\n    if (this.shouldApply()) {\n      this.apply();\n    }\n  }\n\n  protected abstract shouldApply(): boolean;\n\n  protected abstract apply(): void;\n\n  protected abstract getType(): string;\n}\n","import ShapeNodes from '../node/shape-nodes';\nimport Responsive from '../responsive';\nimport ApplyResponsive from './base';\nimport { each } from '@antv/util';\n\nexport default class ApplyResponsiveLabel extends ApplyResponsive {\n  protected shouldApply() {\n    if (!this.responsiveTheme.label || !this.responsiveTheme.label[this.type]) {\n      return false;\n    }\n    return true;\n  }\n\n  protected apply() {\n    const labelShapesContainer = this.plot.view.geometries[0].labelsContainer.get('children');\n    const labelShapes = [];\n    each(labelShapesContainer, (c) => {\n      labelShapes.push(c.get('children')[0]);\n    });\n    const nodes = new ShapeNodes({\n      shapes: labelShapes,\n    });\n    const { constraints, rules } = this.responsiveTheme.label[this.type];\n    new Responsive({\n      nodes,\n      constraints,\n      rules,\n      plot: this.plot,\n      region: this.plot.view.coordinateBBox,\n    });\n  }\n\n  protected getType() {\n    return null;\n  }\n}\n","import { groupBy, each, keys } from '@antv/util';\nimport { registerLabelComponent } from './base';\nimport PointLabel from './point';\nimport { Geometry, IShape, MappingDatum, FIELD_ORIGIN, ORIGIN } from '../../dependents';\nimport { Label } from '../../interface/config';\nimport { checkOriginEqual, moveInPanel, checkShapeOverlap } from '../../util/view';\nimport BBox from '../../util/bbox';\n\nexport default class PointAutoLabel<L extends Label = Label> extends PointLabel<L> {\n  protected layoutLabels(geometry: Geometry, labels: IShape[]): void {\n    const dones: IShape[] = [];\n    const panel = BBox.fromBBoxObject(this.getCoordinateBBox());\n    const [xField, yField] = geometry.getXYFields();\n    const groupedMap: Record<string, IShape[]> = groupBy(labels, (label) => label.get(ORIGIN)[FIELD_ORIGIN][xField]);\n    const offset = labels[0]?.get('offset');\n\n    each(keys(groupedMap).reverse(), (xValue: string) => {\n      const group = this.sortLabels(geometry, groupedMap[xValue]);\n      while (group.length) {\n        const label = group.shift();\n        if (\n          checkOriginEqual(\n            label,\n            dones,\n            (datumLeft: MappingDatum, datumRight: MappingDatum) =>\n              datumLeft._origin[xField] === datumRight._origin[xField] &&\n              datumLeft._origin[yField] === datumRight._origin[yField]\n          )\n        ) {\n          label.set('visible', false);\n          continue;\n        }\n        moveInPanel(label, panel);\n        const upFail = checkShapeOverlap(label, dones);\n        let downFail: boolean;\n        if (upFail) {\n          label.attr('y', label.attr('y') + 2 * offset);\n          moveInPanel(label, panel);\n          downFail = checkShapeOverlap(label, dones);\n        }\n        if (downFail) {\n          label.set('visible', false);\n          continue;\n        }\n        dones.push(label);\n      }\n    });\n  }\n\n  /** 对 Labels 排序，排序顺序决定自动布局优先级 */\n  protected sortLabels(geometry: Geometry, labels: IShape[]): IShape[] {\n    const yField = geometry.getXYFields()[1];\n    const sorted: IShape[] = [];\n\n    // 顺序：第一个、最后一个、再其他\n    labels.sort((a, b) => {\n      return b.get(ORIGIN)[FIELD_ORIGIN][yField] - a.get(ORIGIN)[FIELD_ORIGIN][yField];\n    });\n    if (labels.length > 0) {\n      sorted.push(labels.shift());\n    }\n    if (labels.length > 0) {\n      sorted.push(labels.pop());\n    }\n    sorted.push(...labels);\n\n    return sorted;\n  }\n}\n\nregisterLabelComponent('point-auto', PointAutoLabel);\n","import { each, deepMix, clone, find } from '@antv/util';\nimport { View, IGroup, Geometry } from '../../../../dependents';\n\nconst DEFAULT_OFFSET = 8;\n\nexport interface LineLabelConfig {\n  visible?: boolean;\n  formatter?: (...args: any[]) => string;\n  offsetX?: number;\n  offsetY?: number;\n  style?: any;\n}\n\nexport interface ILineLabel extends LineLabelConfig {\n  view: View;\n  plot: any;\n}\n\nexport default class LineLabel {\n  public options: LineLabelConfig;\n  public destroyed: boolean = false;\n  protected plot: any;\n  protected view: View;\n  private container: IGroup;\n\n  constructor(cfg: ILineLabel) {\n    this.view = cfg.view;\n    this.plot = cfg.plot;\n    const defaultOptions = this.getDefaultOptions();\n    this.options = deepMix(defaultOptions, cfg, {});\n    this.init();\n  }\n\n  protected init() {\n    this.container = this.getGeometry().labelsContainer;\n    this.view.on('beforerender', () => {\n      this.clear();\n      this.plot.canvas.draw();\n    });\n  }\n\n  public render() {\n    const elements = this.getGeometry().elements;\n    each(elements, (ele) => {\n      const shapeInfo = this.getShapeInfo(ele.shape);\n      const { style, offsetX, offsetY } = this.options;\n      const formatter = this.options.formatter;\n      const content = formatter ? formatter(shapeInfo.name) : shapeInfo.name;\n      this.container.addShape('text', {\n        attrs: deepMix(\n          {},\n          {\n            x: shapeInfo.x + offsetX,\n            y: shapeInfo.y + offsetY,\n            text: content,\n            fill: shapeInfo.color,\n            textAlign: 'left',\n            textBaseline: 'middle',\n          },\n          style\n        ),\n        name: 'label',\n      });\n    });\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n  }\n\n  public hide() {\n    this.container.set('visible', false);\n    this.plot.canvas.draw();\n  }\n\n  public show() {\n    this.container.set('visible', true);\n    this.plot.canvas.draw();\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.remove();\n    }\n    this.destroyed = true;\n  }\n\n  public getBBox() {\n    return this.container.getBBox();\n  }\n\n  private getDefaultOptions() {\n    const { theme } = this.plot;\n    const labelStyle = clone(theme.label.style);\n    delete labelStyle.fill;\n    return {\n      offsetX: DEFAULT_OFFSET,\n      offsetY: 0,\n      style: labelStyle,\n    };\n  }\n\n  private getGeometry() {\n    return find(this.view.geometries, (geom) => geom.type === 'line') as Geometry;\n  }\n\n  protected getShapeInfo(shape) {\n    const originPoints = shape.get('origin').points;\n    const lastPoint = originPoints[originPoints.length - 1];\n    const color = shape.attr('stroke');\n    const { seriesField } = this.plot.options;\n    const name = shape.get('origin').data[0][seriesField];\n    return { x: lastPoint.x, y: lastPoint.y, color, name };\n  }\n}\n","/**\n * 转化率组件，用于柱状图和条形图，展示从一个值到另一个值的转化率。\n */\nimport { IGroup } from '@antv/g-base';\nimport { View } from '@antv/g2';\nimport { DEFAULT_ANIMATE_CFG } from '@antv/g2/lib/animate';\nimport { each, deepMix, get } from '@antv/util';\n\nfunction parsePoints(shape, coord) {\n  const parsedPoints = [];\n  const points = shape.get('origin').points;\n  each(points, (p) => {\n    parsedPoints.push(coord.convertPoint(p));\n  });\n  return parsedPoints;\n}\nexport interface ConversionTagOptions {\n  visible: boolean;\n  size?: number;\n  spacing?: number;\n  offset?: number;\n  arrow?: ArrowOptions;\n  value?: ValueOptions;\n  animation?: any;\n  transpose?: boolean;\n}\n\ninterface ArrowOptions {\n  visible: boolean;\n  headSize?: number;\n  style?: any;\n}\n\ninterface ValueOptions {\n  visible: boolean;\n  style?: any;\n  formatter?: (valueUpper: any, valueLower: any) => string;\n}\n\nexport interface ConversionTagConfig extends ConversionTagOptions {\n  view: View;\n  field: string;\n}\n\nexport default class ConversionTag {\n  public static getDefaultOptions({ transpose }: ConversionTagConfig): ConversionTagOptions {\n    return {\n      visible: true,\n      size: transpose ? 32 : 80,\n      spacing: transpose ? 8 : 12,\n      offset: transpose ? 32 : 0,\n      arrow: {\n        visible: true,\n        headSize: 12,\n        style: {\n          fill: 'rgba(0, 0, 0, 0.05)',\n        },\n      },\n      value: {\n        visible: true,\n        style: {\n          fontSize: 12,\n          fill: 'rgba(0, 0, 0, 0.85)',\n        },\n        formatter: (valueUpper: any, valueLower: any) => `${((100 * valueLower) / valueUpper).toFixed(2)}%`,\n      },\n      animation: deepMix({}, DEFAULT_ANIMATE_CFG),\n    };\n  }\n\n  private view: View;\n  private container: IGroup;\n  private transpose?: boolean;\n  private field: string;\n  private size: number;\n  private offset: number;\n  private spacing: number;\n  private arrow: ArrowOptions;\n  private value: ValueOptions;\n  private animation: boolean;\n\n  constructor(cfg: ConversionTagConfig) {\n    // @ts-ignore\n    deepMix(this, this.constructor.getDefaultOptions(cfg), cfg);\n    this._init();\n  }\n\n  private _init() {\n    const layer = this.view.backgroundGroup;\n    this.container = layer.addGroup();\n    this.draw();\n    this.view.on('beforerender', () => {\n      this.clear();\n    });\n  }\n\n  public draw() {\n    const { transpose } = this;\n    const { values } = this.view.getScaleByField(this.field);\n    const geometry = this.view.geometries[0];\n    const shapes = geometry.getShapes();\n\n    let shapeLower, valueLower, shapeUpper, valueUpper;\n\n    if (transpose) {\n      shapes.forEach((shapeLower, i) => {\n        valueLower = values[i];\n        if (i++ > 0) {\n          this._drawTag(shapeUpper, valueUpper, shapeLower, valueLower);\n        }\n        valueUpper = valueLower;\n        shapeUpper = shapeLower;\n      });\n    } else {\n      shapes.forEach((shapeUpper, i) => {\n        valueUpper = values[i];\n        if (i++ > 0) {\n          this._drawTag(shapeUpper, valueUpper, shapeLower, valueLower);\n        }\n        valueLower = valueUpper;\n        shapeLower = shapeUpper;\n      });\n    }\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.remove();\n    }\n  }\n\n  private _drawTag(shapeUpper, valueUpper, shapeLower, valueLower) {\n    const { transpose } = this;\n    const coord = this.view.geometries[0].coordinate;\n    const pointUpper = parsePoints(shapeUpper, coord)[transpose ? 3 : 0];\n    const pointLower = parsePoints(shapeLower, coord)[transpose ? 0 : 3];\n    this._drawTagArrow(pointUpper, pointLower);\n    this._drawTagValue(pointUpper, valueUpper, pointLower, valueLower);\n  }\n\n  private _drawTagArrow(pointUpper, pointLower) {\n    let { spacing } = this;\n    const { size, offset, animation, transpose } = this;\n    const { headSize } = this.arrow;\n    const totalHeight = pointLower.y - pointUpper.y;\n    const totalWidth = pointLower.x - pointUpper.x;\n\n    let points;\n\n    if (transpose) {\n      if ((totalWidth - headSize) / 2 < spacing) {\n        // 当柱间距不足容纳箭头尖与间隔时，画三角并挤占间隔\n        spacing = Math.max(1, (totalWidth - headSize) / 2);\n        points = [\n          [pointUpper.x + spacing, pointUpper.y - offset],\n          [pointUpper.x + spacing, pointUpper.y - offset - size],\n          [pointLower.x - spacing, pointLower.y - offset - size / 2],\n        ];\n      } else {\n        // 当柱间距足够时，画完整图形并留出间隔。\n        points = [\n          [pointUpper.x + spacing, pointUpper.y - offset],\n          [pointUpper.x + spacing, pointUpper.y - offset - size],\n          [pointLower.x - spacing - headSize, pointLower.y - offset - size],\n          [pointLower.x - spacing, pointLower.y - offset - size / 2],\n          [pointLower.x - spacing - headSize, pointLower.y - offset],\n        ];\n      }\n    } else {\n      if ((totalHeight - headSize) / 2 < spacing) {\n        // 当柱间距不足容纳箭头尖与间隔时，画三角并挤占间隔\n        spacing = Math.max(1, (totalHeight - headSize) / 2);\n        points = [\n          [pointUpper.x + offset, pointUpper.y + spacing],\n          [pointUpper.x + offset + size, pointUpper.y + spacing],\n          [pointLower.x + offset + size / 2, pointLower.y - spacing],\n        ];\n      } else {\n        // 当柱间距足够时，画完整图形并留出间隔。\n        points = [\n          [pointUpper.x + offset, pointUpper.y + spacing],\n          [pointUpper.x + offset + size, pointUpper.y + spacing],\n          [pointLower.x + offset + size, pointLower.y - spacing - headSize],\n          [pointLower.x + offset + size / 2, pointLower.y - spacing],\n          [pointLower.x + offset, pointLower.y - spacing - headSize],\n        ];\n      }\n    }\n\n    const tagArrow = this.container.addShape('polygon', {\n      name: 'arrow',\n      attrs: {\n        ...this.arrow.style,\n        points,\n      },\n    });\n\n    if (animation !== false) {\n      this._fadeInTagShape(tagArrow);\n    }\n  }\n\n  private _drawTagValue(pointUpper, valueUpper, pointLower, valueLower) {\n    const { size, offset, animation, transpose } = this;\n\n    const text = this.value.formatter(valueUpper, valueLower);\n\n    const tagValue = this.container.addShape('text', {\n      name: 'value',\n      attrs: {\n        ...this.value.style,\n        text,\n        x: transpose ? (pointUpper.x + pointLower.x) / 2 : pointUpper.x + offset + size / 2,\n        y: transpose ? pointUpper.y - offset - size / 2 : (pointUpper.y + pointLower.y) / 2,\n        textAlign: 'center',\n        textBaseline: 'middle',\n      },\n    });\n\n    if (transpose) {\n      const totalWidth = pointLower.x - pointUpper.x;\n      const { width: textWidth } = tagValue.getBBox();\n      if (textWidth > totalWidth) {\n        const cWidth = textWidth / text.length;\n        const cEnd = Math.max(1, Math.ceil(totalWidth / cWidth) - 1);\n        const textAdjusted = `${text.slice(0, cEnd)}...`;\n        tagValue.attr('text', textAdjusted);\n      }\n    }\n\n    if (animation !== false) {\n      this._fadeInTagShape(tagValue);\n    }\n  }\n\n  private _fadeInTagShape(shape) {\n    const { animation } = this;\n\n    const opacity = shape.attr('opacity');\n    shape.attr('opacity', 0);\n    const { duration } = get(animation, 'appear', DEFAULT_ANIMATE_CFG.appear);\n    shape.animate({ opacity }, duration);\n  }\n}\n","import { every, each, groupBy, findIndex, uniq, map, size } from '@antv/util';\nimport { registerLabelComponent } from '../../../components/label/base';\nimport { IShape, Geometry, Element, ORIGIN, FIELD_ORIGIN } from '../../../dependents';\nimport BarLabel from './label';\nimport { getOverlapArea, moveInPanel, checkShapeOverlap } from '../../../util/view';\nimport BBox from '../../../util/bbox';\nimport { isContrastColorWhite } from '../../../util/color';\nimport { IBarAutoLabel } from '../interface';\n\n/** 自动模式的 Column 数据标签，会根据图形和数据标签自动优化数据标签布局和样式等 */\nexport default class BarAutoLabel extends BarLabel<IBarAutoLabel> {\n  protected getPosition(element: Element): { x: number; y: number } {\n    const offset = this.getDefaultOffset();\n    const value = this.getValue(element);\n    const bbox = this.getElementShapeBBox(element);\n    const { minX, maxX, minY, height } = bbox;\n    const { offsetX, offsetY } = this.options;\n    const y = minY + height / 2 + offsetY;\n    const dir = value < 0 ? -1 : 1;\n    const root = value > 0 ? maxX : minX;\n    const x = root + offset * dir + offsetX;\n\n    // 统一先设置为 right\n    return { x, y };\n  }\n\n  protected getTextAlign(element: Element) {\n    const value = this.getValue(element);\n    return value > 0 ? 'left' : 'right';\n  }\n\n  /** 默认的 fill 取自用户配置或主题配置 */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected getTextFill(element: Element) {\n    const { style } = this.options;\n    return style.fill;\n  }\n\n  /** 默认不描边 */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected getTextStroke(element: Element) {\n    return undefined;\n  }\n\n  /** 默认无处理：在 layout 阶段处理 */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected adjustLabel(label: IShape, element: Element): void {\n    // empty\n  }\n\n  /** 自动布局所有的数据标签 */\n  protected layoutLabels(geometry: Geometry, labels: IShape[]): void {\n    if (this.shouldInShapeLabels(labels)) {\n      this.inShapeLabels(geometry, labels);\n    }\n    this.autoHideLabels(geometry, labels);\n  }\n\n  /** 判断是否可以把数据标签放置在柱子内部 */\n  protected shouldInShapeLabels(labels: IShape[]): boolean {\n    return every(labels, (label) => {\n      const labelBBox = label.getBBox();\n      const element: Element = label.get('element');\n      const bbox = this.getElementShapeBBox(element);\n\n      return bbox.height >= labelBBox.height;\n    });\n  }\n\n  /** 内置数据标签，并自动设置颜色描边等属性 */\n  protected inShapeLabels(geometry: Geometry, labels: IShape[]) {\n    const coordinateBBox = this.getCoordinateBBox();\n    const [xField] = geometry.getXYFields();\n    const { darkStyle, lightStyle } = this.options;\n    const groupedLabels = groupBy(labels, (label) => label.get(ORIGIN)[FIELD_ORIGIN][xField]);\n    each(labels, (label: IShape) => {\n      const curGroup = groupedLabels[label.get(ORIGIN)[FIELD_ORIGIN][xField]] || [];\n      const element: Element = label.get('element');\n      const { shape } = element;\n      const fillWhile = isContrastColorWhite(shape.attr('fill'));\n      const shapeBBox = BBox.fromBBoxObject(shape.getBBox());\n      const labelBBox = BBox.fromBBoxObject(label.getBBox());\n\n      // 如果 Column 本身就不可见，直接隐藏对应的 label\n      if (getOverlapArea(coordinateBBox, shapeBBox) <= 0) {\n        label.set('visible', false);\n      }\n      if (labelBBox.width > shapeBBox.width) {\n        // 处理放不下的情况\n        const idx = findIndex(curGroup, (item) => item === label);\n        if (idx !== curGroup.length - 1) {\n          label.set('visible', false);\n        }\n      } else {\n        // 数据标签展示在图形中央\n        label.attr({\n          x: shapeBBox.x + shapeBBox.width / 2,\n          textAlign: 'center',\n        });\n        const overflow = labelBBox.width > shapeBBox.width || labelBBox.height > shapeBBox.height;\n        if (overflow) {\n          // 出现了溢出情况，添加描边\n          label.attr({\n            stroke: lightStyle?.stroke,\n          });\n        } else {\n          // 放置在柱形内部，颜色取反\n          label.attr({\n            fill: fillWhile ? lightStyle?.fill : darkStyle?.fill,\n            fillOpacity: fillWhile ? lightStyle?.fillOpacity : darkStyle?.fillOpacity,\n            stroke: undefined,\n          });\n        }\n      }\n    });\n  }\n\n  /** 数据标签防重叠抽样 */\n  protected autoHideLabels(geometry: Geometry, labels: IShape[]) {\n    const coordinateBBox = this.getCoordinateBBox();\n    const filteredLabels = this.filterLabels(labels);\n    const [xField] = geometry.getXYFields();\n    const dones: IShape[] = [];\n    const todo: IShape[] = [];\n    const groupedLabels = groupBy(filteredLabels, (label) => label.get(ORIGIN)[FIELD_ORIGIN][xField]);\n    const xValues = uniq(map(filteredLabels, (label: IShape) => label.get(ORIGIN)[FIELD_ORIGIN][xField]));\n    let xValue;\n\n    if (size(xValues) > 0) {\n      // 第一组\n      xValue = xValues.shift();\n      each(groupedLabels[xValue], (label) => todo.push(label));\n    }\n    if (size(xValues) > 0) {\n      // 最后一组\n      xValue = xValues.pop();\n      each(groupedLabels[xValue], (label) => todo.push(label));\n    }\n    each(xValues.reverse(), (val) => {\n      // 其他组\n      each(groupedLabels[val], (label) => todo.push(label));\n    });\n\n    while (todo.length > 0) {\n      const cur = todo.shift();\n      if (cur.get('visible')) {\n        moveInPanel(cur, coordinateBBox);\n        if (checkShapeOverlap(cur, dones)) {\n          cur.set('visible', false);\n        } else {\n          dones.push(cur);\n        }\n      }\n    }\n  }\n\n  /** 抽样数据标签，设置最大数量的数据标签，其他的统一隐藏 */\n  private filterLabels(labels: IShape[]): IShape[] {\n    const MAX_CNT = 500; // 最多显示 500 个数据标签\n    const filteredLabels = [];\n    const pages = Math.max(Math.floor(labels.length / MAX_CNT), 1);\n    each(labels, (label, idx) => {\n      if (idx % pages === 0) {\n        filteredLabels.push(label);\n      } else {\n        label.set('visible', false);\n      }\n    });\n\n    return filteredLabels;\n  }\n}\n\nregisterLabelComponent('bar-auto', BarAutoLabel);\n","import { deepMix, valuesOfKey, clone } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport { ElementOption } from '../../interface/config';\nimport BaseBarLayer from '../bar/layer';\nimport { BarViewConfig } from '../bar/interface';\nimport './theme';\n\nexport interface GroupedBarViewConfig extends BarViewConfig {\n  groupField: string;\n}\n\nexport interface GroupedBarLayerConfig extends GroupedBarViewConfig, LayerConfig {}\n\nexport default class GroupedBarLayer extends BaseBarLayer<GroupedBarLayerConfig> {\n  public static getDefaultOptions(): Partial<GroupedBarViewConfig> {\n    return deepMix({}, super.getDefaultOptions(), {\n      xAxis: {\n        visible: true,\n        grid: {\n          visible: true,\n        },\n      },\n      yAxis: {\n        visible: true,\n        title: {\n          visible: false,\n        },\n      },\n      label: {\n        visible: true,\n        position: 'right',\n        adjustColor: true,\n      },\n      legend: {\n        visible: true,\n        position: 'right-top',\n        offsetY: 0,\n      },\n    });\n  }\n\n  public type: string = 'groupedBar';\n\n  public afterRender() {\n    super.afterRender();\n    const names = valuesOfKey(this.options.data, this.options.groupField);\n    this.view.on('tooltip:change', (e) => {\n      const { items } = e;\n      const origin_items = clone(items);\n      for (let i = 0; i < names.length; i++) {\n        const name = names[i];\n        for (let j = 0; j < origin_items.length; j++) {\n          const item = origin_items[j];\n          if (item.name === name) {\n            e.items[i] = item;\n          }\n        }\n      }\n    });\n  }\n\n  protected scale() {\n    const defaultMeta = {};\n    defaultMeta[this.options.groupField] = {\n      values: valuesOfKey(this.options.data, this.options.groupField),\n    };\n    if (!this.options.meta) {\n      this.options.meta = defaultMeta;\n    } else {\n      this.options.meta = deepMix({}, this.options.meta, defaultMeta);\n    }\n    super.scale();\n  }\n\n  protected adjustBar(bar: ElementOption) {\n    bar.adjust = [\n      {\n        type: 'dodge',\n        marginRatio: 0.1,\n      },\n    ];\n  }\n\n  protected geometryTooltip() {\n    this.bar.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      this.bar.tooltip.fields = tooltipOptions.fields;\n    }\n    if (tooltipOptions.formatter) {\n      this.bar.tooltip.callback = tooltipOptions.formatter;\n      if (!tooltipOptions.fields) {\n        this.bar.tooltip.fields = [this.options.xField, this.options.yField, this.options.groupField];\n      }\n    }\n  }\n}\n\nregisterPlotType('groupedBar', GroupedBarLayer);\n","import { deepMix } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport StackedBar, { StackedBarViewConfig } from '../stacked-bar/layer';\nimport { DataItem } from '../../interface/config';\nimport { transformDataPercentage } from '../../util/data';\n\nexport type PercentStackedBarViewConfig = StackedBarViewConfig;\nexport interface PercentStackedBarLayerConfig extends PercentStackedBarViewConfig, LayerConfig {}\n\nexport default class PercentStackedBarLayer extends StackedBar<PercentStackedBarLayerConfig> {\n  public static getDefaultOptions(): any {\n    return deepMix({}, super.getDefaultOptions(), {\n      xAxis: {\n        visible: true,\n        tickLine: {\n          visible: false,\n        },\n        grid: {\n          visible: false,\n        },\n        title: {\n          visible: true,\n          formatter: (v) => `${v} (%)`,\n        },\n        label: {\n          visible: false,\n          formatter: (v) => {\n            const reg = /%/gi;\n            return v.replace(reg, '');\n          },\n        },\n      },\n    });\n  }\n  public type: string = 'percentStackedBar';\n\n  protected processData(originData?: DataItem[]) {\n    const { xField, yField } = this.options;\n    const processData = super.processData(originData);\n\n    return transformDataPercentage(processData, yField, [xField]);\n  }\n\n  protected scale() {\n    const metaConfig = {};\n    const { xField } = this.options;\n    metaConfig[xField] = {\n      tickCount: 6,\n      alias: `${xField} (%)`,\n      min: 0,\n      max: 1,\n      formatter: (v) => {\n        const formattedValue = (v * 100).toFixed(1);\n        return `${formattedValue}%`;\n      },\n    };\n    this.options.meta = metaConfig;\n    super.scale();\n  }\n}\n\nregisterPlotType('percentStackedBar', PercentStackedBarLayer);\n","import { registerLabelComponent } from '../../../../components/label/base';\nimport PointLabel from '../../../../components/label/point';\nimport { IAreaPointLabel } from '../../interface';\n\nexport default class AreaPointLabel extends PointLabel<IAreaPointLabel> {}\n\nregisterLabelComponent('area-point', AreaPointLabel);\n","import { each, map, filter, last } from '@antv/util';\nimport { registerLabelComponent } from '../../../../components/label/base';\nimport PointAutoLabel from '../../../../components/label/point-auto';\nimport { Geometry, IShape, IElement } from '../../../../dependents';\nimport { getGeometryShapes, getGeometryByType } from '../../../../util/view';\nimport { getStrokePoints } from '../../../../util/math';\nimport { isContrastColorWhite } from '../../../../util/color';\nimport { IAreaPointAutoLabel } from '../../interface';\n\nexport default class AreaPointAutoLabel extends PointAutoLabel<IAreaPointAutoLabel> {\n  protected layoutLabels(geometry: Geometry, labels: IShape[]) {\n    super.layoutLabels(geometry, labels);\n    this.adjustAreaLabelsStyle(labels);\n  }\n\n  protected adjustAreaLabelsStyle(labels: IShape[]) {\n    const { view } = this;\n    const { darkStyle, lightStyle } = this.options;\n    const areaGeometry = getGeometryByType(view, 'area');\n    const areas = getGeometryShapes(areaGeometry).sort((left: IElement, right: IElement) => {\n      return right.getBBox().height - left.getBBox().height;\n    }) as IShape[];\n\n    each(labels, (label: IShape) => {\n      const labelBBox = label.getBBox();\n      const points = getStrokePoints(labelBBox.x, labelBBox.y, labelBBox.width, labelBBox.height);\n      const match = map(areas, (area) => ({\n        area,\n        matches: filter(points, (point) => !!area.isHit(point[0], point[1])).length,\n      })).sort((left, right) => left.matches - right.matches);\n      if (last(match).matches > 0) {\n        const bgColor = last(match).area.attr('fill');\n        const fillWhite = isContrastColorWhite(bgColor);\n        label.attr({\n          fill: fillWhite ? lightStyle?.fill : darkStyle?.fill,\n          fillOpacity: fillWhite ? lightStyle.fillOpacity : darkStyle.fillOpacity,\n          stroke: fillWhite ? lightStyle?.stroke : darkStyle?.stroke,\n        });\n      }\n    });\n  }\n}\n\nregisterLabelComponent('area-point-auto', AreaPointAutoLabel);\n","import { registerTheme } from '../../theme';\n\nconst AREA_ACTIVE_STYLE = (style) => {\n  const opacity = style.opacity || 1;\n  return { opacity };\n};\n\nconst AREA_DISABLE_STYLE = (style) => {\n  const opacity = style.opacity || 1;\n  return { opacity: opacity * 0.5 };\n};\n\nconst LINE_ACTIVE_STYLE = (style) => {\n  const opacity = style.opacity || 1;\n  return { opacity };\n};\n\nconst LINE_DISABLE_STYLE = (style) => {\n  const opacity = style.opacity || 1;\n  return { opacity: opacity * 0.5 };\n};\n\nconst LINE_SELECTED_STYLE = (style) => {\n  const lineWidth = style.lineWidth || 1;\n  return { lineWidth: lineWidth + 2 };\n};\n\nconst POINT_ACTIVE_STYLE = (style) => {\n  const color = style.fill || style.fillStyle;\n  const radius = style.size || style.radius;\n\n  return {\n    radius: radius + 1,\n    shadowBlur: radius,\n    shadowColor: color,\n    stroke: color,\n    strokeOpacity: 1,\n    lineWidth: 1,\n  };\n};\n\nconst POINT_SELECTED_STYLE = (style) => {\n  const color = style.fill || style.fillStyle;\n  const radius = style.size || style.radius;\n\n  return {\n    radius: radius + 2,\n    shadowBlur: radius,\n    shadowColor: color,\n    stroke: color,\n    strokeOpacity: 1,\n    lineWidth: 2,\n  };\n};\n\nconst POINT_DISABLED_STYLE = (style) => {\n  const opacity = style.opacity || style.fillOpacity || 1;\n  return { opacity: opacity * 0.5 };\n};\n\nexport const DEFAULT_AREA_THEME = {\n  areaStyle: {\n    normal: {},\n    active: AREA_ACTIVE_STYLE,\n    disable: AREA_DISABLE_STYLE,\n    selected: { lineWidth: 1, stroke: '#333333' },\n  },\n  lineStyle: {\n    normal: {},\n    active: LINE_ACTIVE_STYLE,\n    disable: LINE_DISABLE_STYLE,\n    selected: LINE_SELECTED_STYLE,\n  },\n  pointStyle: {\n    normal: {},\n    active: POINT_ACTIVE_STYLE,\n    disable: POINT_DISABLED_STYLE,\n    selected: POINT_SELECTED_STYLE,\n  },\n  label: {\n    darkStyle: {\n      fill: '#2c3542',\n      stroke: '#ffffff',\n      fillOpacity: 0.85,\n    },\n    lightStyle: {\n      fill: '#ffffff',\n      fillOpacity: 1,\n      stroke: '#2c3542',\n    },\n  },\n};\n\nregisterTheme('area', DEFAULT_AREA_THEME);\n","import { deepMix } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport StackedArea from '../stacked-area/layer';\nimport { StackedAreaViewConfig } from '../stacked-area/interface';\nimport { DataItem } from '../../interface/config';\nimport { transformDataPercentage } from '../../util/data';\n\nexport type PercentStackedAreaViewConfig = StackedAreaViewConfig;\nexport interface PercentStackedAreaLayerConfig extends PercentStackedAreaViewConfig, LayerConfig {}\n\nexport default class PercentStackedAreaLayer extends StackedArea<PercentStackedAreaLayerConfig> {\n  public static getDefaultOptions(): any {\n    return deepMix({}, super.getDefaultOptions(), {\n      yAxis: {\n        visible: true,\n        label: {\n          visible: true,\n          formatter: (v) => {\n            const reg = /%/gi;\n            return v.replace(reg, '');\n          },\n        },\n      },\n    });\n  }\n  public type: string = 'percentStackedArea';\n\n  protected processData(originData?: DataItem[]) {\n    const { xField, yField } = this.options;\n\n    return transformDataPercentage(originData, xField, [yField]);\n  }\n\n  protected scale() {\n    const metaConfig = {};\n    const { yField } = this.options;\n    metaConfig[this.options.yField] = {\n      tickCount: 6,\n      alias: `${yField} (%)`,\n      min: 0,\n      max: 1,\n      formatter: (v) => {\n        const formattedValue = (v * 100).toFixed(1);\n        return `${formattedValue}%`;\n      },\n    };\n    this.options.meta = deepMix({}, metaConfig, this.options.meta);\n    super.scale();\n  }\n}\n\nregisterPlotType('percentStackedArea', PercentStackedAreaLayer);\n","import { every, each, groupBy, findIndex, uniq, map, size } from '@antv/util';\nimport { registerLabelComponent } from '../../../components/label/base';\nimport { IShape, Geometry, Element, ORIGIN, FIELD_ORIGIN } from '../../../dependents';\nimport ColumnLabel from './label';\nimport { getOverlapArea, moveInPanel, checkShapeOverlap } from '../../../util/view';\nimport BBox from '../../../util/bbox';\nimport { isContrastColorWhite } from '../../../util/color';\nimport { IColumnAutoLabel } from '../interface';\n\n/** 自动模式的 Column 数据标签，会根据图形和数据标签自动优化数据标签布局和样式等 */\nexport default class ColumnAutoLabel extends ColumnLabel<IColumnAutoLabel> {\n  protected getPosition(element: Element): { x: number; y: number } {\n    const offset = this.getDefaultOffset();\n    const value = this.getValue(element);\n    const bbox = this.getElementShapeBBox(element);\n    const { minX, minY, maxY, width } = bbox;\n    const { offsetX, offsetY } = this.options;\n    const x = minX + width / 2 + offsetX;\n    const dir = value > 0 ? -1 : 1;\n    const root = value > 0 ? minY : maxY;\n    const y = root + offset * dir + offsetY;\n\n    // 默认全部先设置为 top\n    return { x, y };\n  }\n\n  /** 默认的 fill 取自用户配置或主题配置 */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected getTextFill(element: Element) {\n    const { style } = this.options;\n\n    return style.fill;\n  }\n\n  /** 默认不描边 */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected getTextStroke(element: Element) {\n    return undefined;\n  }\n\n  /** 默认无处理：在 layout 阶段处理 */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected adjustLabel(label: IShape, element: Element): void {\n    // empty\n  }\n\n  /** 自动布局所有的数据标签 */\n  protected layoutLabels(geometry: Geometry, labels: IShape[]): void {\n    if (this.shouldInShapeLabels(labels)) {\n      this.inShapeLabels(geometry, labels);\n    }\n    this.autoHideLabels(geometry, labels);\n  }\n\n  /** 判断是否可以把数据标签放置在柱子内部 */\n  protected shouldInShapeLabels(labels: IShape[]): boolean {\n    return every(labels, (label) => {\n      const labelBBox = label.getBBox();\n      const element: Element = label.get('element');\n      const bbox = this.getElementShapeBBox(element);\n\n      return bbox.width >= labelBBox.width;\n    });\n  }\n\n  /** 内置数据标签，并自动设置颜色描边等属性 */\n  protected inShapeLabels(geometry: Geometry, labels: IShape[]) {\n    const coordinateBBox = this.getCoordinateBBox();\n    const [xField] = geometry.getXYFields();\n    const { darkStyle, lightStyle } = this.options;\n    const groupedLabels = groupBy(labels, (label) => label.get(ORIGIN)[FIELD_ORIGIN][xField]);\n    each(labels, (label: IShape) => {\n      const curGroup = groupedLabels[label.get(ORIGIN)[FIELD_ORIGIN][xField]] || [];\n      const element: Element = label.get('element');\n      const { shape } = element;\n      const fillWhile = isContrastColorWhite(shape.attr('fill'));\n      const shapeBBox = BBox.fromBBoxObject(shape.getBBox());\n      const labelBBox = BBox.fromBBoxObject(label.getBBox());\n\n      // 如果 Column 本身就不可见，直接隐藏对应的 label\n      if (getOverlapArea(coordinateBBox, shapeBBox) <= 0) {\n        label.set('visible', false);\n      }\n      if (labelBBox.height > shapeBBox.height) {\n        // 处理放不下的情况\n        const idx = findIndex(curGroup, (item) => item === label);\n        if (idx !== 0) {\n          label.set('visible', false);\n        }\n      } else {\n        // 数据标签展示在图形中央\n        label.attr({\n          y: shapeBBox.y + shapeBBox.height / 2,\n          textBaseline: 'middle',\n        });\n        const overflow = labelBBox.width > shapeBBox.width || labelBBox.height > shapeBBox.height;\n        if (overflow) {\n          // 出现了溢出情况，添加描边\n          label.attr({\n            stroke: lightStyle?.stroke,\n          });\n        } else {\n          // 放置在柱形内部，颜色取反\n          label.attr({\n            fill: fillWhile ? lightStyle?.fill : darkStyle?.fill,\n            fillOpacity: fillWhile ? lightStyle?.fillOpacity : darkStyle?.fillOpacity,\n            stroke: undefined,\n          });\n        }\n      }\n    });\n  }\n\n  /** 数据标签防重叠抽样 */\n  protected autoHideLabels(geometry: Geometry, labels: IShape[]) {\n    const coordinateBBox = this.getCoordinateBBox();\n    const filteredLabels = this.filterLabels(labels);\n    const [xField] = geometry.getXYFields();\n    const dones: IShape[] = [];\n    const todo: IShape[] = [];\n    const groupedLabels = groupBy(filteredLabels, (label) => label.get(ORIGIN)[FIELD_ORIGIN][xField]);\n    const xValues = uniq(map(filteredLabels, (label: IShape) => label.get(ORIGIN)[FIELD_ORIGIN][xField]));\n    let xValue;\n\n    if (size(xValues) > 0) {\n      // 第一组\n      xValue = xValues.shift();\n      each(groupedLabels[xValue], (label) => todo.push(label));\n    }\n    if (size(xValues) > 0) {\n      // 最后一组\n      xValue = xValues.pop();\n      each(groupedLabels[xValue], (label) => todo.push(label));\n    }\n    each(xValues.reverse(), (val) => {\n      // 其他组\n      each(groupedLabels[val], (label) => todo.push(label));\n    });\n\n    while (todo.length > 0) {\n      const cur = todo.shift();\n      if (cur.get('visible')) {\n        moveInPanel(cur, coordinateBBox);\n        if (checkShapeOverlap(cur, dones)) {\n          cur.set('visible', false);\n        } else {\n          dones.push(cur);\n        }\n      }\n    }\n  }\n\n  /** 抽样数据标签，设置最大数量的数据标签，其他的统一隐藏 */\n  private filterLabels(labels: IShape[]): IShape[] {\n    const MAX_CNT = 500; // 最多显示 500 个数据标签\n    const filteredLabels = [];\n    const pages = Math.max(Math.floor(labels.length / MAX_CNT), 1);\n    each(labels, (label, idx) => {\n      if (idx % pages === 0) {\n        filteredLabels.push(label);\n      } else {\n        label.set('visible', false);\n      }\n    });\n\n    return filteredLabels;\n  }\n}\n\nregisterLabelComponent('column-auto', ColumnAutoLabel);\n","import { assign } from '@antv/util';\nimport { getEventMap, EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst componentMap = {\n  column: 'interval',\n};\n\nconst SHAPE_EVENT_MAP: IEventmap = getEventMap(componentMap);\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","import { deepMix } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport { ElementOption } from '../../interface/config';\nimport BaseColumnLayer from '../column/layer';\nimport { ColumnViewConfig } from '../column/interface';\nimport './theme';\n\nexport interface GroupedColumnViewConfig extends ColumnViewConfig {\n  groupField: string;\n}\n\nexport interface GroupedColumnLayerConfig extends GroupedColumnViewConfig, LayerConfig {}\n\nexport default class GroupedColumnLayer extends BaseColumnLayer<GroupedColumnLayerConfig> {\n  public static getDefaultOptions(): Partial<GroupedColumnViewConfig> {\n    return deepMix({}, super.getDefaultOptions(), {\n      yAxis: {\n        title: {\n          visible: true,\n        },\n      },\n    });\n  }\n  public type: string = 'groupedColumn';\n  public getResponsiveTheme() {\n    return this.themeController.getResponsiveTheme('column');\n  }\n\n  protected addGeometry() {\n    super.addGeometry();\n  }\n\n  protected adjustColumn(column: ElementOption) {\n    column.adjust = [\n      {\n        type: 'dodge',\n        marginRatio: 0.1,\n      },\n    ];\n  }\n\n  protected geometryTooltip() {\n    this.column.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      this.column.tooltip.fields = tooltipOptions.fields;\n    }\n    if (tooltipOptions.formatter) {\n      this.column.tooltip.callback = tooltipOptions.formatter;\n      if (!tooltipOptions.fields) {\n        this.column.tooltip.fields = [this.options.xField, this.options.yField, this.options.groupField];\n      }\n    }\n  }\n}\n\nregisterPlotType('groupedColumn', GroupedColumnLayer);\n","import { registerLabelComponent } from '../../../components/label/base';\nimport ColumnLabel from '../../column/component/label';\nimport { IShape, Element } from '../../../dependents';\n\nexport default class StackedColumnLabel extends ColumnLabel {\n  protected adjustLabel(label: IShape, element: Element): void {\n    const { adjustPosition } = this.options;\n    if (adjustPosition) {\n      const labelRange = label.getBBox();\n      const shapeRange = this.getElementShapeBBox(element);\n      if (shapeRange.height < labelRange.height) {\n        label.hide();\n      }\n    }\n  }\n}\n\nregisterLabelComponent('stacked-column', StackedColumnLabel);\n","import { deepMix } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport StackedColumn, { StackedColumnViewConfig } from '../stacked-column/layer';\nimport { transformDataPercentage } from '../../util/data';\nimport { DataItem } from '../../interface/config';\n\nexport type PercentStackedColumnViewConfig = StackedColumnViewConfig;\nexport interface PercentStackedColumnLayerConfig extends PercentStackedColumnViewConfig, LayerConfig {}\n\nexport default class PercentStackedColumnLayer extends StackedColumn<PercentStackedColumnLayerConfig> {\n  public static getDefaultOptions(): any {\n    return deepMix({}, super.getDefaultOptions(), {\n      label: {\n        visible: true,\n        position: 'middle',\n        offset: 0,\n      },\n      yAxis: {\n        visible: true,\n        tick: {\n          visible: false,\n        },\n        grid: {\n          visible: false,\n        },\n        title: {\n          visible: true,\n        },\n        label: {\n          visible: false,\n        },\n      },\n    });\n  }\n  public type: string = 'percentStackedColumn';\n\n  protected processData(originData?: DataItem[]) {\n    const { xField, yField } = this.options;\n    return transformDataPercentage(originData || [], xField, [yField]);\n  }\n\n  protected scale() {\n    const metaConfig = {};\n    const { yField } = this.options;\n    metaConfig[yField] = {\n      tickCount: 6,\n      alias: `${yField} (%)`,\n      min: 0,\n      max: 1,\n      formatter: (v) => {\n        const formattedValue = (v * 100).toFixed(1);\n        return `${formattedValue}%`;\n      },\n    };\n    this.options.meta = metaConfig;\n    super.scale();\n  }\n}\n\nregisterPlotType('percentStackedColumn', PercentStackedColumnLayer);\n","import { deepMix } from '@antv/util';\nimport * as EventParser from './event';\nimport ViewLayer, { ViewConfig } from '../../base/view-layer';\nimport { DataItem, Label, GraphicStyle } from '../../interface/config';\nimport { getGeom } from '../../geoms/factory';\nimport { LayerConfig } from '../../base/layer';\nimport { getPieLabel, PieLabelConfig } from './component/label';\nimport SpiderLabel from './component/label/spider-label';\nimport { registerPlotType } from '../../base/global';\nimport PieBaseLabel from './component/label/base-label';\nimport './theme';\n\nexport interface PieViewConfig extends ViewConfig {\n  angleField: string;\n  colorField?: string;\n  radius?: number;\n  pieStyle?: GraphicStyle | ((...args: any[]) => GraphicStyle);\n  label?: PieLabelConfig;\n}\n\nexport interface PieLayerConfig extends PieViewConfig, LayerConfig {}\n\nconst G2_GEOM_MAP = {\n  pie: 'interval',\n};\n\nconst PLOT_GEOM_MAP = {\n  pie: 'column',\n};\n\n// @ts-ignore\nexport default class PieLayer<T extends PieLayerConfig = PieLayerConfig> extends ViewLayer<T> {\n  public static getDefaultOptions(): any {\n    return deepMix({}, super.getDefaultOptions(), {\n      width: 400,\n      height: 400,\n      title: {\n        visible: false,\n      },\n      description: {\n        visible: false,\n      },\n      forceFit: true,\n      padding: 'auto',\n      radius: 0.8,\n      label: {\n        visible: true,\n        type: 'inner',\n        autoRotate: false,\n        adjustPosition: true,\n        allowOverlap: false,\n        line: {\n          visible: true,\n          smooth: true,\n        },\n      },\n      legend: {\n        visible: true,\n        position: 'right-center',\n      },\n      tooltip: {\n        visible: true,\n        shared: false,\n        showCrosshairs: false,\n        showMarkers: false,\n      },\n      pieStyle: {\n        stroke: 'white',\n        lineWidth: 1,\n      },\n    });\n  }\n\n  public pie: any;\n  public type: string = 'pie';\n  public labelComponent: SpiderLabel | PieBaseLabel;\n\n  public afterRender() {\n    super.afterRender();\n    const options = this.options;\n    /** 蜘蛛布局label */\n    if (options.label && options.label.visible) {\n      // 清除，避免二次渲染\n      if (this.labelComponent) {\n        this.labelComponent.clear();\n      }\n      const labelConfig = options.label as Label;\n      if (labelConfig.type === 'spider') {\n        this.labelComponent = new SpiderLabel({\n          view: this.view,\n          fields: options.colorField ? [options.angleField, options.colorField] : [options.angleField],\n          ...this.options.label,\n        });\n        this.labelComponent.render();\n      } else {\n        const LabelCtor = getPieLabel(labelConfig.type);\n        this.labelComponent = new LabelCtor(this, options.label);\n        this.labelComponent.render();\n      }\n    }\n  }\n\n  protected geometryParser(dim, type) {\n    if (dim === 'g2') {\n      return G2_GEOM_MAP[type];\n    }\n    return PLOT_GEOM_MAP[type];\n  }\n\n  protected scale() {\n    const props = this.options;\n    super.scale();\n    let scales = {};\n    scales[props.angleField] = {};\n    scales[props.colorField] = { type: 'cat' };\n    scales = deepMix({}, this.config.scales, scales);\n    this.setConfig('scales', scales);\n  }\n\n  protected processData(data?: DataItem[]): DataItem[] | undefined {\n    const key = this.options.angleField;\n    return data.map((item) => ({\n      ...item,\n      [key]: typeof item[key] === 'string' ? Number.parseFloat(item[key] as 'string') : item[key],\n    }));\n  }\n\n  protected axis() {\n    return;\n  }\n\n  protected coord() {\n    const props = this.options;\n    const coordConfig: any = {\n      type: 'theta',\n      cfg: {\n        radius: props.radius,\n        // @ts-ignore 业务定制,不开放配置\n        innerRadius: props.innerRadius || 0,\n      },\n    };\n    this.setConfig('coordinate', coordConfig);\n  }\n\n  protected addGeometry() {\n    const props = this.options;\n    const pie = getGeom('interval', 'main', {\n      plot: this,\n      positionFields: [1, props.angleField],\n    });\n    pie.adjust = [{ type: 'stack' }];\n    this.pie = pie;\n    if (props.label) {\n      this.label();\n    }\n    if (props.tooltip && (props.tooltip.fields || props.tooltip.formatter)) {\n      this.geometryTooltip();\n    }\n    this.setConfig('geometry', pie);\n  }\n\n  protected geometryTooltip() {\n    this.pie.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      this.pie.tooltip.fields = tooltipOptions.fields;\n    }\n    if (tooltipOptions.formatter) {\n      this.pie.tooltip.callback = tooltipOptions.formatter;\n      if (!tooltipOptions.fields) {\n        this.pie.tooltip.fields = [this.options.angleField, this.options.colorField];\n      }\n    }\n  }\n\n  protected animation() {\n    super.animation();\n    const props = this.options;\n    if (props.animation === false) {\n      /** 关闭动画 */\n      this.pie.animate = false;\n    }\n  }\n\n  protected annotation() {\n    return;\n  }\n\n  protected parseEvents(eventParser?) {\n    if (eventParser) {\n      super.parseEvents(eventParser);\n    } else {\n      super.parseEvents(EventParser);\n    }\n  }\n\n  private label() {\n    // 不使用 g2 内置label\n    this.pie.label = false;\n  }\n}\n\nregisterPlotType('pie', PieLayer);\n","import PieBaseLabel, { PieLabelConfig } from './base-label';\nimport PieInnerLabel from './inner-label';\nimport PieOuterLabel from './outer-label';\nimport PieOuterCenterLabel from './outer-center-label';\n\nconst PieLabels = {\n  inner: PieInnerLabel,\n  outer: PieOuterLabel,\n  'outer-center': PieOuterCenterLabel,\n};\n\nexport function getPieLabel(type: string): new (plot: any, C: PieLabelConfig) => PieBaseLabel {\n  if (!PieLabels[type]) {\n    console.warn(`this label ${type} is not registered`);\n    return;\n  }\n  return PieLabels[type];\n}\n\nexport { PieLabelConfig };\n","import { modifyCSS } from '@antv/dom-util';\nimport { deepMix, each } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport PieLayer, { PieViewConfig } from '../pie/layer';\nimport responsiveMethods from './apply-responsive';\nimport './apply-responsive/theme';\nimport * as EventParser from './event';\nimport { LooseMap } from '../../interface/types';\nimport RingStatistic from './component/ring-statistic';\nimport { getPieLabel } from '../pie/component/label';\n\nexport interface DonutViewConfig extends PieViewConfig {\n  innerRadius?: number;\n  /** 指标卡用于显示总计值和各项数据 */\n  statistic?: {\n    visible: boolean;\n    /** 指标卡 总计值 标签 */\n    totalLabel: string;\n    /** 触发显示的事件 */\n    triggerOn: 'mouseenter';\n    /** 触发隐藏的事件 */\n    triggerOff: 'mouseleave';\n    content?: string;\n    htmlContent?: (...args: any) => string;\n  };\n}\n\nexport interface DonutLayerConfig extends DonutViewConfig, LayerConfig {}\n\nconst G2_GEOM_MAP = {\n  ring: 'interval',\n};\n\nconst PLOT_GEOM_MAP = {\n  interval: 'ring',\n};\n\nexport default class DonutLayer<T extends DonutLayerConfig = DonutLayerConfig> extends PieLayer<T> {\n  public static centralId = 0;\n  public type: string = 'donut';\n  private statistic: any; // 保存指标卡实例用于响应交互\n  private statisticClass: string; // 指标卡的class,用于重点文本容器的唯一标识，一个页面多个环图时，共用 class 交互会有问题。\n\n  public static getDefaultOptions(): any {\n    return deepMix({}, super.getDefaultOptions(), {\n      radius: 0.6,\n      innerRadius: 0.64,\n      statistic: {\n        visible: true,\n        totalLabel: '总计',\n        triggerOn: 'mouseenter',\n        triggerOff: 'mouseleave',\n      },\n    });\n  }\n\n  public beforeInit() {\n    super.beforeInit();\n    DonutLayer.centralId++;\n    this.statisticClass = `statisticClassId${DonutLayer.centralId}`;\n    this.adjustLabelDefaultOptions();\n    if (this.options.statistic.visible && this.options.statistic.triggerOn) {\n      this.options.tooltip.visible = false;\n    }\n    /** 响应式图形 */\n    if (this.options.responsive && this.options.padding !== 'auto') {\n      this.applyResponsive('preRender');\n    }\n  }\n\n  public afterRender() {\n    const options = this.options;\n    const container = this.canvas.get('container');\n    if (this.statistic) {\n      container.removeChild(this.statistic.wrapperNode);\n    }\n    /**环图中心文本 */\n    if (this.options.statistic && this.options.statistic.visible) {\n      const container = this.canvas.get('container');\n      modifyCSS(container, { position: 'relative' });\n      this.statistic = new RingStatistic({\n        container,\n        view: this.view,\n        plot: this,\n        statisticClass: this.statisticClass,\n        ...this.options.statistic,\n      });\n      this.statistic.render();\n      /**响应交互 */\n      if (this.options.statistic.triggerOn) {\n        this.statistic.triggerOn();\n      }\n    }\n    if (options.label && options.label.visible) {\n      const LabelCtor = getPieLabel(options.label.type);\n      const label = new LabelCtor(this, options.label);\n      label.render();\n    }\n  }\n\n  public destroy() {\n    if (this.statistic) {\n      this.statistic.destroy();\n    }\n    super.destroy();\n  }\n\n  protected geometryParser(dim, type) {\n    if (dim === 'g2') {\n      return G2_GEOM_MAP[type];\n    }\n    return PLOT_GEOM_MAP[type];\n  }\n\n  protected coord() {\n    const props = this.options;\n    const coordConfig: any = {\n      type: 'theta',\n      cfg: {\n        radius: props.radius,\n        innerRadius: props.innerRadius,\n      },\n    };\n    this.setConfig('coordinate', coordConfig);\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n\n  private applyResponsive(stage) {\n    const methods = responsiveMethods[stage];\n    each(methods, (r) => {\n      const responsive = r as LooseMap;\n      responsive.method(this);\n    });\n  }\n\n  /** @override 调整 label 默认 options */\n  protected adjustLabelDefaultOptions() {\n    const labelConfig = this.options.label;\n    if (labelConfig && labelConfig.type === 'inner') {\n      const labelStyleConfig = (labelConfig.style || {}) as LooseMap;\n      if (!labelStyleConfig.textAlign) {\n        labelStyleConfig.textAlign = 'center';\n      }\n      labelConfig.style = labelStyleConfig;\n      if (!labelConfig.offset) {\n        labelConfig.offset = `${((this.options.innerRadius - 1) / 2) * 100}%`;\n      }\n    }\n  }\n}\n\nregisterPlotType('donut', DonutLayer);\n","import { deepMix, isNil, get, has, find } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport ViewLayer, { ViewConfig } from '../../base/view-layer';\nimport { getGeom } from '../../geoms/factory';\nimport { ITimeAxis, IValueAxis, DataItem, GraphicStyle } from '../../interface/config';\nimport { extractScale } from '../../util/scale';\nimport Quadrant, { QuadrantConfig } from './components/quadrant';\nimport Trendline, { TrendlineConfig } from './components/trendline';\nimport * as EventParser from './event';\nimport { getComponent } from '../../components/factory';\nimport './theme';\n\nconst G2_GEOM_MAP = {\n  scatter: 'point',\n};\n\nconst PLOT_GEOM_MAP = {\n  point: 'point',\n};\n\nexport interface PointViewConfig extends ViewConfig {\n  /** 散点样式 */\n  pointStyle?: GraphicStyle | ((...args: any) => GraphicStyle);\n  /** 颜色字段 */\n  colorField?: string | string[];\n  /** x 轴配置 */\n  xAxis?: ITimeAxis | IValueAxis;\n  /** y 轴配置 */\n  yAxis?: ITimeAxis | IValueAxis;\n  quadrant?: QuadrantConfig;\n  trendline?: TrendlineConfig;\n}\n\nexport interface ScatterViewConfig extends PointViewConfig {\n  /** 散点大小 */\n  pointSize?: number | any;\n}\n\nexport interface ScatterLayerConfig extends ScatterViewConfig, LayerConfig {}\n\nexport default class ScatterLayer<T extends ScatterLayerConfig = ScatterLayerConfig> extends ViewLayer<T> {\n  public static getDefaultOptions(): any {\n    return deepMix({}, super.getDefaultOptions(), {\n      pointSize: 4,\n      pointStyle: {\n        lineWidth: 1,\n        strokeOpacity: 1,\n        fillOpacity: 0.95,\n        stroke: '#fff',\n      },\n      xAxis: {\n        nice: true,\n        grid: {\n          visible: true,\n        },\n        line: {\n          visible: true,\n        },\n      },\n      yAxis: {\n        nice: true,\n        grid: {\n          visible: true,\n        },\n        line: {\n          visible: true,\n        },\n      },\n      tooltip: {\n        visible: true,\n        // false 会造成 tooltip 只能显示一条数据，true 会造成 tooltip 在空白区域也会显示\n        shared: null,\n        showTitle: false,\n        showMarkers: false,\n        showCrosshairs: false,\n      },\n      label: {\n        visible: false,\n      },\n      shape: 'circle',\n    });\n  }\n\n  public type: string = 'scatter';\n  public points: any;\n  protected quadrant: Quadrant;\n  protected trendline: Trendline;\n\n  public afterRender() {\n    super.afterRender();\n    if (this.quadrant) {\n      this.quadrant.destroy();\n    }\n    if (this.trendline) {\n      this.trendline.destroy();\n    }\n    if (this.options.quadrant && this.options.quadrant.visible) {\n      this.quadrant = new Quadrant({\n        view: this.view,\n        plotOptions: this.options,\n        ...this.options.quadrant,\n      });\n      this.quadrant.render();\n    }\n    if (this.options.trendline && this.options.trendline.visible) {\n      this.trendline = new Trendline({\n        view: this.view,\n        plotOptions: this.options,\n        ...this.options.trendline,\n      });\n      this.trendline.render();\n    }\n  }\n\n  public destroy() {\n    if (this.quadrant) {\n      this.quadrant.destroy();\n      this.quadrant = null;\n    }\n    if (this.trendline) {\n      this.trendline.destroy();\n      this.trendline = null;\n    }\n    super.destroy();\n  }\n\n  private isValidLinearValue(value) {\n    if (isNil(value)) {\n      return false;\n    } else if (Number.isNaN(Number(value))) {\n      return false;\n    }\n    return true;\n  }\n\n  protected processData(data?: DataItem[]): DataItem[] | undefined {\n    const { xField, yField } = this.options;\n    const xAxisType = get(this.options, ['xAxis', 'type'], 'linear');\n    const yAxisType = get(this.options, ['yAxis', 'type'], 'linear');\n    if (xAxisType && yAxisType) {\n      const fiteredData = data\n        .filter((item) => {\n          if (xAxisType === 'linear' && !this.isValidLinearValue(item[xField])) {\n            return false;\n          }\n          if (yAxisType === 'linear' && !this.isValidLinearValue(item[yField])) {\n            return false;\n          }\n          return true;\n        })\n        .map((item) => {\n          return {\n            ...item,\n            [xField]: xAxisType === 'linear' ? Number(item[xField]) : String(item[xField]),\n            [yField]: yAxisType === 'linear' ? Number(item[yField]) : String(item[yField]),\n          };\n        });\n      return fiteredData;\n    }\n\n    return data;\n  }\n\n  protected geometryParser(dim, type) {\n    if (dim === 'g2') {\n      return G2_GEOM_MAP[type];\n    }\n    return PLOT_GEOM_MAP[type];\n  }\n\n  protected scale() {\n    const props = this.options;\n    const scales = {};\n    /** 配置x-scale */\n    scales[props.xField] = {};\n    if (has(props, 'xAxis')) {\n      extractScale(scales[props.xField], props.xAxis);\n    }\n    /** 配置y-scale */\n    scales[props.yField] = {};\n    if (has(props, 'yAxis')) {\n      extractScale(scales[props.yField], props.yAxis);\n    }\n    const timeLineInteraction = find(props.interactions, (interaction) => {\n      return interaction.type === 'timeline';\n    });\n    if (timeLineInteraction && get(timeLineInteraction, 'cfg.key')) {\n      const keyField = timeLineInteraction.cfg.key;\n      if (scales[keyField]) {\n        scales[keyField].key = true;\n      } else {\n        scales[keyField] = { key: true };\n      }\n    }\n    this.setConfig('scales', scales);\n    super.scale();\n  }\n\n  protected coord() {\n    return;\n  }\n\n  protected annotation() {\n    return;\n  }\n\n  protected addGeometry() {\n    const points = getGeom('point', 'circle', {\n      plot: this,\n    });\n    this.points = points;\n    if (this.options.tooltip && this.options.tooltip.visible) {\n      const { showTitle, titleField } = this.options.tooltip;\n      this.extractTooltip();\n      this.setConfig('tooltip', {\n        showTitle,\n        title: showTitle ? titleField : undefined,\n        ...this.options.tooltip,\n      } as any);\n    }\n    if (this.options.label) {\n      this.label();\n    }\n    this.setConfig('geometry', points);\n  }\n\n  protected label() {\n    const props = this.options;\n\n    if (props.label.visible === false) {\n      if (this.points) {\n        this.points.label = false;\n      }\n      return;\n    }\n\n    const label = getComponent('label', {\n      fields: props.label.field ? [props.label.field] : [props.yField],\n      ...props.label,\n      plot: this,\n    });\n\n    if (this.points) {\n      this.points.label = label;\n    }\n  }\n\n  protected animation() {\n    super.animation();\n    const props = this.options;\n    if (props.animation === false) {\n      /** 关闭动画 */\n      this.points.animate = false;\n    }\n  }\n\n  protected parseEvents(eventParser) {\n    // 气泡图继承散点图时，会存在 eventParser\n    super.parseEvents(eventParser || EventParser);\n  }\n\n  protected extractTooltip() {\n    this.points.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      this.points.tooltip.fields = tooltipOptions.fields;\n    } else {\n      this.points.tooltip.fields = [this.options.xField, this.options.yField];\n    }\n    if (tooltipOptions.formatter) {\n      this.points.tooltip.callback = tooltipOptions.formatter;\n      if (this.options.colorField) {\n        this.points.tooltip.fields.push(this.options.colorField);\n      }\n    }\n  }\n}\n\nregisterPlotType('scatter', ScatterLayer);\n","import { assign } from '@antv/util';\nimport { getEventMap, EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst componentMap = {\n  point: 'point',\n  trendline: 'trendline',\n  confidence: 'confidence',\n  quadrant: 'quadrant',\n  quadrantLabel: 'quadrant-label',\n  quadrantLine: 'quadrant-line',\n};\n\nconst SHAPE_EVENT_MAP: IEventmap = getEventMap(componentMap);\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","/**\n * @author linhuiw\n * @description 仪表盘形状\n */\nimport { clone, deepMix } from '@antv/util';\nimport { registerShape } from '@antv/g2';\nimport { IGroup } from '@antv/g-base';\nimport { GaugeViewConfig, GaugeAxis, GaugePivot } from '../../interface';\nimport { getGlobalTheme } from '../../../../theme';\nimport { sortedLastIndex } from '../../../../util/common';\n\n/**\n * 仪表盘指针图形\n * 指针主体由梯形和一大一小圆形组成，\n * 中心处由灰色圆底和小白圆加以装饰\n */\nexport class GaugeShape {\n  uid: any;\n\n  ringRadius: number;\n\n  center: any;\n\n  group: any;\n\n  options: GaugeViewConfig;\n\n  axis: GaugeAxis;\n\n  pivot: GaugePivot;\n\n  type: string;\n\n  constructor(uid: any) {\n    this.uid = uid;\n  }\n\n  setOption(type, options: any) {\n    this.type = type;\n    this.options = options;\n    this.axis = options.axis;\n    this.pivot = options.pivot;\n  }\n\n  render() {\n    const Gauge = this; // eslint-disable-line @typescript-eslint/no-this-alias\n    registerShape('point', 'gauge', {\n      draw(cfg: any, group: IGroup) {\n        this.gauge = {} as any;\n        this.gauge.options = Gauge.options;\n        this.gauge.axis = Gauge.axis;\n        this.gauge.pivot = Gauge.pivot;\n        this.gauge.type = Gauge.type;\n        const gauge = this.gauge;\n        const type = this.gauge.type;\n        const point = cfg.points[0];\n        const center = this.parsePoint({\n          x: 0,\n          y: 0,\n        });\n\n        const target = this.parsePoint({\n          x: point.x || 0,\n          y: 1,\n        });\n\n        gauge.center = center;\n        gauge.group = group;\n\n        const r = { x: center.x - target.x, y: center.y - target.y };\n\n        this.gauge.ringRadius = Math.sqrt(r.x * r.x + r.y * r.y);\n\n        const { starAngle, endAngle } = this.getAngleRange();\n        const currentAngle = point.x * (endAngle - starAngle) + starAngle;\n\n        switch (type) {\n          case 'meterGauge':\n            this.drawBarGauge(currentAngle);\n            if (this.gauge.axis.visible) {\n              this.drawInSideAxis();\n            }\n            break;\n          case 'fanGauge':\n            this.drawGauge(currentAngle);\n            if (this.gauge.axis.visible) {\n              this.drawOutSideAxis();\n            }\n            break;\n          case 'standardGauge':\n          default:\n            this.drawGauge(currentAngle);\n            if (this.gauge.axis.visible) {\n              this.drawAxis();\n            }\n            break;\n        }\n\n        // 绘制指针\n        if (this.gauge.pivot.visible) {\n          this.drawPivot(cfg, group);\n        }\n      },\n\n      drawGauge(currentAngle: number) {\n        const { range } = this.gauge.options;\n        this.drawBottomRing(); // 绘制灰底色\n\n        if (range && range.length) {\n          this.drawRangeColor();\n        } else {\n          this.drawCurrentRing(currentAngle);\n        }\n      },\n\n      drawRangeColor() {\n        const { min, max, range, color, rangeStyle } = this.gauge.options;\n        const colors = color || getGlobalTheme().colors;\n        const { starAngle, endAngle } = this.getAngleRange();\n        const config = {\n          min,\n          max,\n          starAngle,\n          endAngle,\n        };\n        for (let i = 0; i < range.length; i++) {\n          const start = this.valueToAngle(range[i], config);\n          const end = this.valueToAngle(range[i + 1], config);\n\n          if (end >= start) {\n            const path2 = this.getPath(start, end);\n            const style = deepMix({ fill: colors[i] }, rangeStyle);\n            this.drawRing(path2, style);\n          }\n        }\n      },\n\n      drawBottomRing() {\n        const { starAngle, endAngle } = this.getAngleRange();\n        const backgroundStyle = this.gauge.options.rangeBackgroundStyle;\n        const path = this.getPath(starAngle, endAngle);\n        this.drawRing(path, backgroundStyle);\n      },\n\n      drawCurrentRing(current: number) {\n        const { starAngle } = this.getAngleRange();\n        const { color } = this.gauge.ringStyle;\n        const path3 = this.getPath(starAngle, current);\n        this.drawRing(path3, color);\n      },\n\n      drawInSideAxis() {\n        const { min, max, axis } = this.gauge.options;\n        const { starAngle, endAngle } = this.getAngleRange();\n        const config = {\n          min,\n          max,\n          starAngle,\n          endAngle,\n        };\n        const interval = (max - min) / axis.tickCount;\n        for (let i = 0; i < axis.tickCount; i++) {\n          const startValue = min + i * interval;\n          const angle = this.valueToAngle(startValue + interval / 2, config);\n          this.drawRect(angle, {\n            length: axis.tickLine.length,\n            style: axis.tickLine.style,\n          });\n        }\n      },\n\n      drawAxis() {\n        const axis = this.gauge.axis;\n        const { min, max } = this.gauge.options;\n        const { starAngle, endAngle } = this.getAngleRange();\n        const config = {\n          min,\n          max,\n          starAngle,\n          endAngle,\n        };\n        const interval = (max - min) / (axis.tickCount - 1);\n        for (let i = 0; i < axis.tickCount; i++) {\n          const startValue = min + i * interval;\n          const angle = this.valueToAngle(startValue, config);\n          const tickLineStyle = clone(axis.tickLine.style);\n          if (i % 5 !== 0) {\n            tickLineStyle.lineWidth = tickLineStyle.lineWidth / 2;\n          }\n          this.drawRect(angle, {\n            length: i % 5 === 0 ? axis.tickLine.length : axis.tickLine.length / 2,\n            style: tickLineStyle,\n          });\n        }\n      },\n\n      drawOutSideAxis() {\n        const { axis } = this.gauge;\n        const { min, max } = this.gauge.options;\n        const { starAngle, endAngle } = this.getAngleRange();\n        const config = {\n          min,\n          max,\n          starAngle,\n          endAngle,\n        };\n        const interval = (max - min) / (axis.tickCount - 1);\n        for (let i = 0; i < axis.tickCount; i++) {\n          const startValue = min + i * interval;\n          const angle = this.valueToAngle(startValue, config);\n          this.drawRect(angle, {\n            length: axis.tickLine.length,\n            style: axis.tickLine.style,\n          });\n        }\n      },\n\n      drawBarGauge(current: number) {\n        const { min, max, range, color, rangeStyle, rangeBackgroundStyle } = this.gauge.options;\n        const colors = color || getGlobalTheme().colors;\n        const { starAngle, endAngle } = this.getAngleRange();\n        const config = {\n          min,\n          max,\n          starAngle,\n          endAngle,\n        };\n        const interval = (endAngle - starAngle) / (50 - 1);\n        const offset = interval / 3;\n\n        // 由50个柱子组成\n        for (let i = 0; i < 50; i++) {\n          const start = starAngle + i * interval;\n          const path2 = this.getPath(start - offset / 2, start + offset - offset / 2);\n\n          let style = rangeBackgroundStyle;\n          if (range && range.length) {\n            const result1 = range.map((item: any) => {\n              return this.valueToAngle(item, config);\n            });\n\n            const index = sortedLastIndex(result1, start);\n            /** 最后一个值也在最后一个区间内 */\n            const colorIndex = Math.min(index, range.length - 1);\n            style = deepMix({}, { fill: colors[colorIndex - 1] }, rangeStyle) || rangeBackgroundStyle;\n          } else {\n            style = current >= start ? deepMix({}, { fill: color }, rangeStyle) : rangeBackgroundStyle;\n          }\n\n          this.drawRing(path2, style);\n        }\n      },\n\n      getAngleRange() {\n        const { angle } = this.gauge.options;\n        const angleValue = 90 - (360 - angle) * 0.5;\n        const starAngle = ((270 - 90 - angleValue) * Math.PI) / 180;\n        const endAngle = ((270 + 90 + angleValue) * Math.PI) / 180;\n\n        return { starAngle, endAngle };\n      },\n\n      valueToAngle(value: number, config: any) {\n        const { min, max, starAngle, endAngle } = config;\n        if (value === max) {\n          return endAngle;\n        }\n        if (value === min) {\n          return starAngle;\n        }\n        let ratio = (value - min) / (max - min);\n        if (max === min) {\n          ratio = 1;\n        }\n        let angle = ratio * (endAngle - starAngle) + starAngle;\n        angle = Math.max(angle, starAngle);\n        angle = Math.min(angle, endAngle);\n\n        return angle;\n      },\n\n      drawRing(path: string, style: any) {\n        this.gauge.group.addShape('path', {\n          attrs: deepMix(\n            {},\n            {\n              path,\n            },\n            style\n          ),\n        });\n      },\n\n      drawRect(angle: number, param?: any) {\n        const { axis } = this.gauge;\n        const config = { ...axis, ...param };\n        const { offset, length } = config;\n        const center = this.gauge.center;\n\n        let radius;\n        if (offset < 0) {\n          radius = this.gauge.ringRadius - this.gauge.options.rangeSize + offset;\n        } else {\n          radius = this.gauge.ringRadius + offset;\n        }\n\n        const xA1 = radius * Math.cos(angle) + center.x;\n        const yA1 = radius * Math.sin(angle) + center.y;\n\n        const xB1 = (radius + length) * Math.cos(angle) + center.x;\n        const yB1 = (radius + length) * Math.sin(angle) + center.y;\n\n        this.gauge.group.addShape('line', {\n          attrs: deepMix(\n            {},\n            {\n              x1: xA1,\n              y1: yA1,\n              x2: xB1,\n              y2: yB1,\n            },\n            param.style\n          ),\n        });\n      },\n\n      getPath(starAngle: number, endAngle: number) {\n        /* const type = this.gauge.type;\n        const height = get(gauge, 'options.height');\n        const width = get(gauge, 'options.width');*/\n        const center = this.gauge.center;\n        const length = this.gauge.ringRadius;\n        /*let thick;\n         const { minThickness, minThickCanvsSize } = this.gauge.ringStyle;\n        const size = Math.min(width, height);\n        if (type === 'fan' && size < minThickCanvsSize) {\n          thick = length - minThickness;\n        } else {*/\n        const thick = this.gauge.options.rangeSize;\n        //}\n\n        const xA1 = length * Math.cos(starAngle) + center.x;\n        const yA1 = length * Math.sin(starAngle) + center.y;\n        const xA2 = (length - thick) * Math.cos(starAngle) + center.x;\n        const yA2 = (length - thick) * Math.sin(starAngle) + center.y;\n        const xB1 = length * Math.cos(endAngle) + center.x;\n        const yB1 = length * Math.sin(endAngle) + center.y;\n        const xB2 = (length - thick) * Math.cos(endAngle) + center.x;\n        const yB2 = (length - thick) * Math.sin(endAngle) + center.y;\n\n        const largeArcFlag = Math.abs(starAngle - endAngle) > Math.PI ? 1 : 0;\n        return [\n          ['M', xA1, yA1],\n          ['A', length, length, 0, largeArcFlag, 1, xB1, yB1],\n          ['L', xB2, yB2],\n          ['A', length - thick, length - thick, 0, largeArcFlag, 0, xA2, yA2],\n          ['Z'],\n        ];\n      },\n\n      drawPivot(cfg: any) {\n        const { starAngle, endAngle } = this.getAngleRange();\n        const { radius, rangeSize } = this.gauge.options;\n        const pivotConfig = this.gauge.pivot;\n        const bigCircle = pivotConfig.thickness;\n        const smCircle = pivotConfig.thickness / 2.5;\n        const group = this.gauge.group;\n        const point = cfg.points[0];\n        const center = this.parsePoint({\n          x: 0,\n          y: 0,\n        });\n\n        // radius\n        const current = point.x * (endAngle - starAngle) + starAngle;\n        const x = (this.gauge.ringRadius - rangeSize) * radius * Math.cos(current) + this.gauge.center.x;\n        const y = (this.gauge.ringRadius - rangeSize) * radius * Math.sin(current) + this.gauge.center.y;\n\n        const target = {\n          x,\n          y,\n        };\n\n        // 外底色灰圆\n        if (pivotConfig.base.visible) {\n          group.addShape('circle', {\n            attrs: deepMix(\n              {},\n              {\n                x: center.x,\n                y: center.y,\n                r: pivotConfig.base.size ? pivotConfig.base.size / 2 : bigCircle * 2.2,\n              },\n              pivotConfig.base.style\n            ),\n          });\n        }\n        // 指针\n        if (pivotConfig.pointer.visible) {\n          const dirVec = { x: center.x - target.x, y: center.y - target.y };\n\n          const length = Math.sqrt(dirVec.x * dirVec.x + dirVec.y * dirVec.y);\n          dirVec.x *= 1 / length;\n          dirVec.y *= 1 / length;\n\n          const angle1 = -Math.PI / 2;\n          const x1 = Math.cos(angle1) * dirVec.x - Math.sin(angle1) * dirVec.y;\n          const y1 = Math.sin(angle1) * dirVec.x + Math.cos(angle1) * dirVec.y;\n\n          const angle2 = Math.PI / 2;\n          const x2 = Math.cos(angle2) * dirVec.x - Math.sin(angle2) * dirVec.y;\n          const y2 = Math.sin(angle2) * dirVec.x + Math.cos(angle2) * dirVec.y;\n          const path = [\n            ['M', target.x + x1 * smCircle, target.y + y1 * smCircle],\n            ['L', center.x + x1 * bigCircle, center.y + y1 * bigCircle],\n            ['L', center.x + x2 * bigCircle, center.y + y2 * bigCircle],\n            ['L', target.x + x2 * smCircle, target.y + y2 * smCircle],\n            ['Z'],\n          ];\n\n          group.addShape('path', {\n            attrs: deepMix(\n              {},\n              {\n                path,\n              },\n              pivotConfig.pointer.style\n            ),\n          });\n\n          group.addShape('circle', {\n            attrs: {\n              x: target.x,\n              y: target.y,\n              r: smCircle,\n              fill: pivotConfig.pointer.style.fill,\n            },\n          });\n          group.addShape('circle', {\n            attrs: {\n              x: center.x,\n              y: center.y,\n              r: bigCircle,\n              fill: pivotConfig.pointer.style.fill,\n            },\n          });\n        }\n\n        if (pivotConfig.pin.visible) {\n          // 内部白色小圆\n          group.addShape('circle', {\n            attrs: deepMix(\n              {},\n              {\n                x: center.x,\n                y: center.y,\n                r: smCircle / 1.2,\n              },\n              pivotConfig.pin.style\n            ),\n          });\n        }\n      },\n    } as any);\n  }\n}\n","import { isArray, mix, hasKey, each, has, isFunction, clone, deepMix, isString, isNumber } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { getGeom } from '../../geoms/factory';\nimport TinyLayer, { TinyViewConfig } from '../tiny-layer';\nimport Marker, { MarkerConfig } from './component/marker';\nimport * as EventParser from './event';\nimport { GraphicStyle } from '../../interface/config';\n\nexport interface ProgressViewConfig extends TinyViewConfig {\n  progressStyle?: GraphicStyle;\n  percent?: number;\n  size?: number;\n  marker?: MarkerConfig[];\n  /** @ignore */\n  barSize?: number;\n  /** @ignore */\n  barStyle?: GraphicStyle;\n  /** @ignore */\n  stackField?: string;\n}\n\ninterface UpdateConfig {\n  percent: number;\n  color?: string | string[];\n  style?: {} | {}[];\n  marker?: MarkerConfig[];\n}\n\nexport type ProgressLayerConfig = ProgressViewConfig;\n\nconst G2_GEOM_MAP = {\n  progress: 'interval',\n};\n\nconst PLOT_GEOM_MAP = {\n  interval: 'progress',\n};\n\nconst DEFAULT_COLOR = ['#55A6F3', '#E8EDF3'];\n\nexport default class ProgressLayer<T extends ProgressLayerConfig = ProgressLayerConfig> extends TinyLayer<T> {\n  /**\n   * 将进度条配置项转为堆叠条形图配置项\n   */\n\n  public type: string = 'progress';\n  protected markers: MarkerConfig[];\n  private isEntered = false;\n\n  public processProps() {\n    let props = this.options;\n    props.data = this.processData();\n    const cfg = {\n      padding: [0, 0, 0, 0],\n      xField: 'value',\n      yField: '1',\n      stackField: 'type',\n      barSize: props.size ? props.size : this.getSize(),\n      barStyle: props.progressStyle,\n      color: this.parseColorProps(props) || DEFAULT_COLOR,\n    } as any;\n    props = mix(props, cfg);\n  }\n\n  public init() {\n    this.processProps();\n    super.init();\n  }\n\n  public beforeInit() {\n    const { percent } = this.options;\n    if (!isNumber(percent)) {\n      throw new Error('Percent value is required, and the type of percent must be Number.');\n    }\n  }\n\n  public update(cfg: UpdateConfig) {\n    const props = this.options;\n    if (hasKey(cfg, 'percent')) {\n      props.percent = cfg.percent;\n      this.changeData(this.processData());\n    }\n\n    if (cfg.style) {\n      this.styleUpdateAnimation(cfg.style);\n      this.updateColorConfigByStyle(cfg.style);\n    }\n\n    if (cfg.color) {\n      let style;\n      if (isArray(cfg.color)) {\n        this.options.color = cfg.color;\n        style = [{ fill: cfg.color[0] }, { fill: cfg.color[1] }];\n      } else {\n        this.options.color[0] = cfg.color;\n        style = { fill: cfg.color };\n      }\n      this.styleUpdateAnimation(style);\n    }\n\n    if (cfg.marker) {\n      this.updateMarkers(cfg.marker);\n      this.options.marker = cfg.marker;\n    }\n  }\n\n  public destroy() {\n    if (this.markers && this.markers.length > 0) {\n      each(this.markers, (marker) => {\n        marker.destroy();\n      });\n      this.markers = [];\n    }\n    super.destroy();\n  }\n\n  public afterRender() {\n    if (this.options.marker && !this.markers) {\n      this.markers = [];\n      each(this.options.marker, (cfg) => {\n        const markerCfg = mix(\n          {\n            canvas: this.canvas,\n            view: this.view,\n            progressSize: this.options.barSize,\n          },\n          cfg\n        );\n        const marker = new Marker(markerCfg);\n        this.markers.push(marker);\n      });\n    }\n    const progressContainer = this.view.geometries[0].container;\n    const bbox = progressContainer.getBBox();\n    const rect = progressContainer.addShape('rect', {\n      attrs: {\n        width: bbox.width,\n        height: bbox.height,\n        x: bbox.minX,\n        y: bbox.minY,\n        fill: 'rgba(0,0,0,0)',\n      },\n    });\n    this.canvas.draw();\n\n    rect.on('mouseenter', (ev) => {\n      this.isEntered = true;\n      this.view.emit('progress:mouseenter', ev);\n    });\n\n    rect.on('mouseleave', (ev) => {\n      this.isEntered = false;\n      this.view.emit('progress:mouseleave', ev);\n    });\n    const canvasDom = this.canvas.get('container');\n    canvasDom.addEventListener('mouseleave', (ev) => {\n      if (this.isEntered) {\n        this.view.emit('progress:mouseleave', ev);\n        this.isEntered = false;\n      }\n    });\n  }\n\n  protected geometryParser(dim: string, type: string): string {\n    if (dim === 'g2') {\n      return G2_GEOM_MAP[type];\n    }\n    return PLOT_GEOM_MAP[type];\n  }\n\n  protected coord() {\n    this.setConfig('coordinate', {\n      actions: [['transpose']],\n    });\n  }\n\n  protected addGeometry() {\n    const props = this.options;\n    const bar = getGeom('interval', 'main', {\n      positionFields: [props.yField, props.xField],\n      plot: this,\n    });\n    bar.adjust = [\n      {\n        type: 'stack',\n      },\n    ];\n    if (has(props, 'animation')) {\n      bar.animate = props.animation;\n    }\n    this.setConfig('geometry', bar);\n  }\n\n  protected parseEvents(eventParser?) {\n    if (eventParser) {\n      super.parseEvents(eventParser);\n    } else {\n      super.parseEvents(EventParser);\n    }\n  }\n\n  protected parseColorProps(props) {\n    let colorOption;\n    if (props.color) {\n      if (isFunction(props.color)) {\n        colorOption = props.color(props.percent);\n      } else {\n        colorOption = props.color;\n      }\n      if (isString(colorOption)) {\n        const color = clone(DEFAULT_COLOR);\n        color[0] = colorOption;\n        return color;\n      } else {\n        return colorOption;\n      }\n    }\n    return props.color;\n  }\n\n  protected processData() {\n    const props = this.options;\n    const data = [\n      { type: 'current', value: props.percent },\n      { type: 'rest', value: 1.0 - props.percent },\n    ];\n    return data;\n  }\n\n  protected updateMarkers(markerCfg: MarkerConfig[]) {\n    const markerLength = markerCfg.length;\n    const animationOptions = this.getUpdateAnimationOptions();\n    // marker diff\n    each(this.markers, (marker, index) => {\n      if (index > markerLength - 1) {\n        marker.destroy();\n      } else {\n        marker.update(markerCfg[index], animationOptions.duration, animationOptions.easing);\n      }\n    });\n    // add new markers\n    if (this.markers.length < markerLength) {\n      const startIndex = this.markers.length;\n      for (let i = startIndex; i < markerLength; i++) {\n        const cfg = deepMix(\n          {},\n          {\n            canvas: this.canvas,\n            view: this.view,\n            progressSize: this.options.barSize,\n          },\n          markerCfg[i]\n        );\n        const marker = new Marker(cfg);\n        this.markers.push(marker);\n      }\n    }\n  }\n\n  private getSize() {\n    const { height } = this;\n    if (height >= 50) {\n      return 10;\n    }\n    return 4;\n  }\n\n  private styleUpdateAnimation(style) {\n    // style更新动画接受用户animation配置的透传\n    const { duration, easing } = this.getUpdateAnimationOptions();\n    // get geometry shapes\n    const progressShapes = [];\n    const { view } = this;\n    const geometry = view.geometries;\n    each(geometry, (geom) => {\n      if (geom.type === 'interval') {\n        const elements = geom.elements;\n        each(elements, (ele) => {\n          progressShapes.push(...ele.shape);\n        });\n      }\n    });\n    if (isArray(style)) {\n      each(style, (s, index) => {\n        progressShapes[index].animate(s, duration, easing);\n      });\n    } else {\n      progressShapes[0].animate(style, duration, easing);\n    }\n  }\n\n  private getUpdateAnimationOptions() {\n    let duration = 450;\n    let easing = 'easeQuadInOut';\n    const animationOptions: any = this.options.animation;\n    if (animationOptions && animationOptions.update) {\n      if (animationOptions.update.duration) {\n        duration = animationOptions.update.duration;\n      }\n      if (animationOptions.update.easing) {\n        easing = animationOptions.update.easing;\n      }\n    }\n    return { duration, easing };\n  }\n\n  private updateColorConfigByStyle(style) {\n    if (isArray(style)) {\n      each(style, (s, index) => {\n        if (s.fill) {\n          this.options.color[index] = s.fill;\n        }\n      });\n    } else if (style.fill) {\n      this.options.color[0] = style.fill;\n    }\n  }\n}\n\nregisterPlotType('progress', ProgressLayer);\n","import * as _ from '@antv/util';\nimport { ViewLayerConfig } from '../../base/view-layer';\nimport { getGlobalTheme } from '../../theme/global';\n\nconst SINGLE_TYPE = ['line', 'area', 'column', 'bar', 'bubble', 'scatter'];\n\nexport function getColorConfig(type: string, props: ViewLayerConfig, count: number) {\n  if (props.color) {\n    return { single: false, color: props.color };\n  }\n  const isSingle = isSingleGraph(type, props);\n  const { colors } = getGlobalTheme();\n  if (isSingle && !props.color) {\n    return { single: true, color: colors[count] };\n  }\n}\n\n/** 判断是不是单图元类型的图表：单折线图、基础柱状图、散点图、基础面积图等 */\nexport function isSingleGraph(type: string, props: ViewLayerConfig) {\n  if (_.contains(SINGLE_TYPE, type)) {\n    if (type === 'line' && _.has(props, 'seriesField')) {\n      return false;\n    }\n    if (type === 'column' && _.has(props, 'colorField')) {\n      return false;\n    }\n    return true;\n  }\n  return false;\n}\n","import BBox from '../../util/bbox';\nimport * as _ from '@antv/util';\nimport { getGlobalTheme } from '../../theme/global';\n\nexport function getOverlappingPadding(layer, components) {\n  const { bleeding } = getGlobalTheme();\n  if (_.isArray(bleeding)) {\n    _.each(bleeding, (it, index) => {\n      if (typeof bleeding[index] === 'function') {\n        bleeding[index] = bleeding[index]({});\n      }\n    });\n  }\n  let viewMinX = layer.layerBBox.minX;\n  let viewMaxX = layer.layerBBox.maxX;\n  let viewMinY = _.clone(layer.layerBBox.minY);\n  let viewMaxY = layer.layerBBox.maxY;\n  _.each(components, (component) => {\n    const { position } = component;\n    const { minX, maxX, minY, maxY } = component.getBBox();\n    if (maxY > viewMinY && maxY < viewMaxY && position === 'top') {\n      viewMinY = maxY;\n    }\n    if (minY > viewMinY && maxY > viewMaxY && position === 'bottom') {\n      viewMaxY = minY;\n    }\n    if (minY > viewMinY && minY <= viewMaxY && position === 'bottom') {\n      viewMaxY = minY;\n    }\n    if (maxX > viewMinX && maxX < viewMaxX && position === 'left') {\n      viewMinX = maxX;\n    }\n    if (minX > viewMinX && maxX < viewMaxX && position === 'right') {\n      viewMaxX = minX;\n    }\n  });\n  const range = new BBox(viewMinX, viewMinY, viewMaxX - viewMinX, viewMaxY - viewMinY);\n  let top_padding = range.minY - layer.layerBBox.minY;\n  if (top_padding === 0) {\n    top_padding = bleeding[0];\n  }\n  const right_padding = layer.layerBBox.maxX - range.maxX;\n  const bottom_padding = layer.layerBBox.maxY - range.maxY;\n  const left_padding = range.minX - layer.layerBBox.minX;\n\n  return [top_padding, right_padding, bottom_padding, left_padding];\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.forEach = exports.sqrLen = exports.len = exports.sqrDist = exports.dist = exports.div = exports.mul = exports.sub = undefined;\nexports.create = create;\nexports.clone = clone;\nexports.length = length;\nexports.fromValues = fromValues;\nexports.copy = copy;\nexports.set = set;\nexports.add = add;\nexports.subtract = subtract;\nexports.multiply = multiply;\nexports.divide = divide;\nexports.ceil = ceil;\nexports.floor = floor;\nexports.min = min;\nexports.max = max;\nexports.round = round;\nexports.scale = scale;\nexports.scaleAndAdd = scaleAndAdd;\nexports.distance = distance;\nexports.squaredDistance = squaredDistance;\nexports.squaredLength = squaredLength;\nexports.negate = negate;\nexports.inverse = inverse;\nexports.normalize = normalize;\nexports.dot = dot;\nexports.cross = cross;\nexports.lerp = lerp;\nexports.hermite = hermite;\nexports.bezier = bezier;\nexports.random = random;\nexports.transformMat4 = transformMat4;\nexports.transformMat3 = transformMat3;\nexports.transformQuat = transformQuat;\nexports.rotateX = rotateX;\nexports.rotateY = rotateY;\nexports.rotateZ = rotateZ;\nexports.angle = angle;\nexports.str = str;\nexports.exactEquals = exactEquals;\nexports.equals = equals;\n\nvar _common = require('./common.js');\n\nvar glMatrix = _interopRequireWildcard(_common);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\nfunction create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n  return out;\n}\n\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {vec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\nfunction clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\n/**\n * Calculates the length of a vec3\n *\n * @param {vec3} a vector to calculate length of\n * @returns {Number} length of a\n */\nfunction length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\nfunction fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the source vector\n * @returns {vec3} out\n */\nfunction copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\nfunction set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to ceil\n * @returns {vec3} out\n */\nfunction ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to floor\n * @returns {vec3} out\n */\nfunction floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to round\n * @returns {vec3} out\n */\nfunction round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\nfunction scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\nfunction scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} distance between a and b\n */\nfunction distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\nfunction squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n\n/**\n * Calculates the squared length of a vec3\n *\n * @param {vec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nfunction squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to negate\n * @returns {vec3} out\n */\nfunction negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to invert\n * @returns {vec3} out\n */\nfunction inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to normalize\n * @returns {vec3} out\n */\nfunction normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n  }\n  return out;\n}\n\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} dot product of a and b\n */\nfunction dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nfunction lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {vec3} c the third operand\n * @param {vec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nfunction hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n\n  return out;\n}\n\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {vec3} c the third operand\n * @param {vec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nfunction bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n\n  return out;\n}\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\nfunction random(out, scale) {\n  scale = scale || 1.0;\n\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec3} out\n */\nfunction transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\nfunction transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec3} out\n */\nfunction transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x;\n  // var uuv = vec3.cross([], qvec, uv);\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx;\n  // vec3.scale(uv, uv, 2 * w);\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2;\n  // vec3.scale(uuv, uuv, 2);\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2;\n  // return vec3.add(out, a, vec3.add(out, uv, uuv));\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nfunction rotateX(out, a, b, c) {\n  var p = [],\n      r = [];\n  //Translate point to the origin\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2];\n\n  //perform rotation\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);\n  r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c);\n\n  //translate to correct position\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n\n  return out;\n}\n\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nfunction rotateY(out, a, b, c) {\n  var p = [],\n      r = [];\n  //Translate point to the origin\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2];\n\n  //perform rotation\n  r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c);\n\n  //translate to correct position\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n\n  return out;\n}\n\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nfunction rotateZ(out, a, b, c) {\n  var p = [],\n      r = [];\n  //Translate point to the origin\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2];\n\n  //perform rotation\n  r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);\n  r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);\n  r[2] = p[2];\n\n  //translate to correct position\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n\n  return out;\n}\n\n/**\n * Get the angle between two 3D vectors\n * @param {vec3} a The first operand\n * @param {vec3} b The second operand\n * @returns {Number} The angle in radians\n */\nfunction angle(a, b) {\n  var tempA = fromValues(a[0], a[1], a[2]);\n  var tempB = fromValues(b[0], b[1], b[2]);\n\n  normalize(tempA, tempA);\n  normalize(tempB, tempB);\n\n  var cosine = dot(tempA, tempB);\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n\n/**\n * Returns a string representation of a vector\n *\n * @param {vec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nfunction str(a) {\n  return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\n}\n\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {vec3} a The first vector.\n * @param {vec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nfunction exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {vec3} a The first vector.\n * @param {vec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nfunction equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\nvar sub = exports.sub = subtract;\n\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\nvar mul = exports.mul = multiply;\n\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\nvar div = exports.div = divide;\n\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\nvar dist = exports.dist = distance;\n\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\nvar sqrDist = exports.sqrDist = squaredDistance;\n\n/**\n * Alias for {@link vec3.length}\n * @function\n */\nvar len = exports.len = length;\n\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\nvar sqrLen = exports.sqrLen = squaredLength;\n\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nvar forEach = exports.forEach = function () {\n  var vec = create();\n\n  return function (a, stride, offset, count, fn, arg) {\n    var i = void 0,\n        l = void 0;\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];vec[1] = a[i + 1];vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];a[i + 1] = vec[1];a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BrowserInfo = /** @class */ (function () {\n    function BrowserInfo(name, version, os) {\n        this.name = name;\n        this.version = version;\n        this.os = os;\n    }\n    return BrowserInfo;\n}());\nexports.BrowserInfo = BrowserInfo;\nvar NodeInfo = /** @class */ (function () {\n    function NodeInfo(version) {\n        this.version = version;\n        this.name = 'node';\n        this.os = process.platform;\n    }\n    return NodeInfo;\n}());\nexports.NodeInfo = NodeInfo;\nvar BotInfo = /** @class */ (function () {\n    function BotInfo() {\n        this.bot = true; // NOTE: deprecated test name instead\n        this.name = 'bot';\n        this.version = null;\n        this.os = null;\n    }\n    return BotInfo;\n}());\nexports.BotInfo = BotInfo;\n// tslint:disable-next-line:max-line-length\nvar SEARCHBOX_UA_REGEX = /alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/;\nvar SEARCHBOT_OS_REGEX = /(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\\/Teoma)|(ia_archiver)/;\nvar REQUIRED_VERSION_PARTS = 3;\nvar userAgentRules = [\n    ['aol', /AOLShield\\/([0-9\\._]+)/],\n    ['edge', /Edge\\/([0-9\\._]+)/],\n    ['edge-ios', /EdgiOS\\/([0-9\\._]+)/],\n    ['yandexbrowser', /YaBrowser\\/([0-9\\._]+)/],\n    ['vivaldi', /Vivaldi\\/([0-9\\.]+)/],\n    ['kakaotalk', /KAKAOTALK\\s([0-9\\.]+)/],\n    ['samsung', /SamsungBrowser\\/([0-9\\.]+)/],\n    ['silk', /\\bSilk\\/([0-9._-]+)\\b/],\n    ['miui', /MiuiBrowser\\/([0-9\\.]+)$/],\n    ['beaker', /BeakerBrowser\\/([0-9\\.]+)/],\n    ['edge-chromium', /Edg\\/([0-9\\.]+)/],\n    [\n        'chromium-webview',\n        /(?!Chrom.*OPR)wv\\).*Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/,\n    ],\n    ['chrome', /(?!Chrom.*OPR)Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/],\n    ['phantomjs', /PhantomJS\\/([0-9\\.]+)(:?\\s|$)/],\n    ['crios', /CriOS\\/([0-9\\.]+)(:?\\s|$)/],\n    ['firefox', /Firefox\\/([0-9\\.]+)(?:\\s|$)/],\n    ['fxios', /FxiOS\\/([0-9\\.]+)/],\n    ['opera-mini', /Opera Mini.*Version\\/([0-9\\.]+)/],\n    ['opera', /Opera\\/([0-9\\.]+)(?:\\s|$)/],\n    ['opera', /OPR\\/([0-9\\.]+)(:?\\s|$)/],\n    ['ie', /Trident\\/7\\.0.*rv\\:([0-9\\.]+).*\\).*Gecko$/],\n    ['ie', /MSIE\\s([0-9\\.]+);.*Trident\\/[4-7].0/],\n    ['ie', /MSIE\\s(7\\.0)/],\n    ['bb10', /BB10;\\sTouch.*Version\\/([0-9\\.]+)/],\n    ['android', /Android\\s([0-9\\.]+)/],\n    ['ios', /Version\\/([0-9\\._]+).*Mobile.*Safari.*/],\n    ['safari', /Version\\/([0-9\\._]+).*Safari/],\n    ['facebook', /FBAV\\/([0-9\\.]+)/],\n    ['instagram', /Instagram\\s([0-9\\.]+)/],\n    ['ios-webview', /AppleWebKit\\/([0-9\\.]+).*Mobile/],\n    ['ios-webview', /AppleWebKit\\/([0-9\\.]+).*Gecko\\)$/],\n    ['searchbot', SEARCHBOX_UA_REGEX],\n];\nvar operatingSystemRules = [\n    ['iOS', /iP(hone|od|ad)/],\n    ['Android OS', /Android/],\n    ['BlackBerry OS', /BlackBerry|BB10/],\n    ['Windows Mobile', /IEMobile/],\n    ['Amazon OS', /Kindle/],\n    ['Windows 3.11', /Win16/],\n    ['Windows 95', /(Windows 95)|(Win95)|(Windows_95)/],\n    ['Windows 98', /(Windows 98)|(Win98)/],\n    ['Windows 2000', /(Windows NT 5.0)|(Windows 2000)/],\n    ['Windows XP', /(Windows NT 5.1)|(Windows XP)/],\n    ['Windows Server 2003', /(Windows NT 5.2)/],\n    ['Windows Vista', /(Windows NT 6.0)/],\n    ['Windows 7', /(Windows NT 6.1)/],\n    ['Windows 8', /(Windows NT 6.2)/],\n    ['Windows 8.1', /(Windows NT 6.3)/],\n    ['Windows 10', /(Windows NT 10.0)/],\n    ['Windows ME', /Windows ME/],\n    ['Open BSD', /OpenBSD/],\n    ['Sun OS', /SunOS/],\n    ['Chrome OS', /CrOS/],\n    ['Linux', /(Linux)|(X11)/],\n    ['Mac OS', /(Mac_PowerPC)|(Macintosh)/],\n    ['QNX', /QNX/],\n    ['BeOS', /BeOS/],\n    ['OS/2', /OS\\/2/],\n    ['Search Bot', SEARCHBOT_OS_REGEX],\n];\nfunction detect(userAgent) {\n    if (!!userAgent) {\n        return parseUserAgent(userAgent);\n    }\n    if (typeof navigator !== 'undefined') {\n        return parseUserAgent(navigator.userAgent);\n    }\n    return getNodeVersion();\n}\nexports.detect = detect;\nfunction parseUserAgent(ua) {\n    // opted for using reduce here rather than Array#first with a regex.test call\n    // this is primarily because using the reduce we only perform the regex\n    // execution once rather than once for the test and for the exec again below\n    // probably something that needs to be benchmarked though\n    var matchedRule = ua !== '' &&\n        userAgentRules.reduce(function (matched, _a) {\n            var browser = _a[0], regex = _a[1];\n            if (matched) {\n                return matched;\n            }\n            var uaMatch = regex.exec(ua);\n            return !!uaMatch && [browser, uaMatch];\n        }, false);\n    if (!matchedRule) {\n        return null;\n    }\n    var name = matchedRule[0], match = matchedRule[1];\n    if (name === 'searchbot') {\n        return new BotInfo();\n    }\n    var versionParts = match[1] && match[1].split(/[._]/).slice(0, 3);\n    if (versionParts) {\n        if (versionParts.length < REQUIRED_VERSION_PARTS) {\n            versionParts = __spreadArrays(versionParts, createVersionParts(REQUIRED_VERSION_PARTS - versionParts.length));\n        }\n    }\n    else {\n        versionParts = [];\n    }\n    return new BrowserInfo(name, versionParts.join('.'), detectOS(ua));\n}\nexports.parseUserAgent = parseUserAgent;\nfunction detectOS(ua) {\n    for (var ii = 0, count = operatingSystemRules.length; ii < count; ii++) {\n        var _a = operatingSystemRules[ii], os = _a[0], regex = _a[1];\n        var match = regex.test(ua);\n        if (match) {\n            return os;\n        }\n    }\n    return null;\n}\nexports.detectOS = detectOS;\nfunction getNodeVersion() {\n    var isNode = typeof process !== 'undefined' && process.version;\n    return isNode ? new NodeInfo(process.version.slice(1)) : null;\n}\nexports.getNodeVersion = getNodeVersion;\nfunction createVersionParts(count) {\n    var output = [];\n    for (var ii = 0; ii < count; ii++) {\n        output.push('0');\n    }\n    return output;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar point_in_polygon_1 = require(\"./point-in-polygon\");\nvar get_line_intersect_1 = require(\"./get-line-intersect\");\nvar util_1 = require(\"@antv/util\");\nfunction parseToLines(points) {\n    var lines = [];\n    var count = points.length;\n    for (var i = 0; i < count - 1; i++) {\n        var point = points[i];\n        var next = points[i + 1];\n        lines.push({\n            from: {\n                x: point[0],\n                y: point[1]\n            },\n            to: {\n                x: next[0],\n                y: next[1]\n            }\n        });\n    }\n    if (lines.length > 1) {\n        var first = points[0];\n        var last = points[count - 1];\n        lines.push({\n            from: {\n                x: last[0],\n                y: last[1]\n            },\n            to: {\n                x: first[0],\n                y: first[1]\n            }\n        });\n    }\n    return lines;\n}\nfunction lineIntersectPolygon(lines, line) {\n    var isIntersect = false;\n    util_1.each(lines, function (l) {\n        if (get_line_intersect_1.default(l.from, l.to, line.from, line.to)) {\n            isIntersect = true;\n            return false;\n        }\n    });\n    return isIntersect;\n}\nfunction getBBox(points) {\n    var xArr = points.map(function (p) { return p[0]; });\n    var yArr = points.map(function (p) { return p[1]; });\n    return {\n        minX: Math.min.apply(null, xArr),\n        maxX: Math.max.apply(null, xArr),\n        minY: Math.min.apply(null, yArr),\n        maxY: Math.max.apply(null, yArr)\n    };\n}\nfunction intersectBBox(box1, box2) {\n    return !(box2.minX > box1.maxX || box2.maxX < box1.minX || box2.minY > box1.maxY || box2.maxY < box1.minY);\n}\nfunction isPolygonsIntersect(points1, points2) {\n    // 空数组，或者一个点返回 false\n    if (points1.length < 2 || points2.length < 2) {\n        return false;\n    }\n    var bbox1 = getBBox(points1);\n    var bbox2 = getBBox(points2);\n    // 判定包围盒是否相交，比判定点是否在多边形内要快的多，可以筛选掉大多数情况\n    if (!intersectBBox(bbox1, bbox2)) {\n        return false;\n    }\n    var isIn = false;\n    // 判定点是否在多边形内部，一旦有一个点在另一个多边形内，则返回\n    util_1.each(points2, function (point) {\n        if (point_in_polygon_1.default(points1, point[0], point[1])) {\n            isIn = true;\n            return false;\n        }\n    });\n    if (isIn) {\n        return true;\n    }\n    // 两个多边形都需要判定\n    util_1.each(points1, function (point) {\n        if (point_in_polygon_1.default(points2, point[0], point[1])) {\n            isIn = true;\n            return false;\n        }\n    });\n    if (isIn) {\n        return true;\n    }\n    var lines1 = parseToLines(points1);\n    var lines2 = parseToLines(points2);\n    var isIntersect = false;\n    util_1.each(lines2, function (line) {\n        if (lineIntersectPolygon(lines1, line)) {\n            isIntersect = true;\n            return false;\n        }\n    });\n    return isIntersect;\n}\nexports.default = isPolygonsIntersect;\n//# sourceMappingURL=is-polygons-intersect.js.map","// 通用配置\nexport * from './interface/config';\nexport { default as Layer, LayerConfig } from './base/layer';\nexport { default as ViewLayer, ViewConfig } from './base/view-layer';\nexport { default as Base, PlotConfig } from './base/plot';\n\n// 图形\nexport * from './plots';\n\n// MINI 图形\nexport { TinyLayerConfig } from './sparkline/tiny-layer';\nexport { default as Progress, ProgressConfig } from './sparkline/progress';\nexport { default as RingProgress, RingProgressConfig } from './sparkline/ring-progress';\nexport { default as TinyColumn, TinyColumnConfig } from './sparkline/tiny-column';\nexport { default as TinyArea, TinyAreaConfig } from './sparkline/tiny-area';\nexport { default as TinyLine, TinyLineConfig } from './sparkline/tiny-line';\n\n// 混合图形\nexport { default as OverlappedComboPlot, OverlappedComboPlotConfig } from './combo-plots/overlapped';\n\n// 主题\nexport { registerTheme, registerGlobalTheme } from './theme';\nexport { registerResponsiveConstraint, IConstraint } from './util/responsive/constraints';\nexport { registerResponsiveRule } from './util/responsive/rules';\nexport { registerResponsiveTheme, getResponsiveTheme } from './util/responsive/theme';\n\nexport { default as StateManager } from './util/state-manager';\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar cache = new Map();\n/**\n * 注册计算包围盒的算法\n * @param type 方法名\n * @param method 方法\n */\nfunction register(type, method) {\n    cache.set(type, method);\n}\nexports.register = register;\n/**\n * 获取计算包围盒的算法\n * @param type 方法名\n */\nfunction getMethod(type) {\n    return cache.get(type);\n}\nexports.getMethod = getMethod;\n//# sourceMappingURL=register.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction default_1(shape) {\n    var attrs = shape.attr();\n    var x = attrs.x, y = attrs.y, width = attrs.width, height = attrs.height;\n    return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n    };\n}\nexports.default = default_1;\n//# sourceMappingURL=rect.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction default_1(shape) {\n    var _a = shape.attr(), x = _a.x, y = _a.y, r = _a.r;\n    return {\n        x: x - r,\n        y: y - r,\n        width: r * 2,\n        height: r * 2,\n    };\n}\nexports.default = default_1;\n//# sourceMappingURL=circle.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@antv/g-math/lib/util\");\nvar util_2 = require(\"./util\");\nfunction default_1(shape) {\n    var attrs = shape.attr();\n    var points = attrs.points;\n    var xArr = [];\n    var yArr = [];\n    for (var i = 0; i < points.length; i++) {\n        var point = points[i];\n        xArr.push(point[0]);\n        yArr.push(point[1]);\n    }\n    var _a = util_1.getBBoxByArray(xArr, yArr), x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n    var bbox = {\n        minX: x,\n        minY: y,\n        maxX: x + width,\n        maxY: y + height,\n    };\n    bbox = util_2.mergeArrowBBox(shape, bbox);\n    return {\n        x: bbox.minX,\n        y: bbox.minY,\n        width: bbox.maxX - bbox.minX,\n        height: bbox.maxY - bbox.minY,\n    };\n}\nexports.default = default_1;\n//# sourceMappingURL=polyline.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@antv/g-math/lib/util\");\nfunction default_1(shape) {\n    var attrs = shape.attr();\n    var points = attrs.points;\n    var xArr = [];\n    var yArr = [];\n    for (var i = 0; i < points.length; i++) {\n        var point = points[i];\n        xArr.push(point[0]);\n        yArr.push(point[1]);\n    }\n    return util_1.getBBoxByArray(xArr, yArr);\n}\nexports.default = default_1;\n//# sourceMappingURL=polygon.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar text_1 = require(\"../util/text\");\nfunction default_1(shape) {\n    var attrs = shape.attr();\n    var x = attrs.x, y = attrs.y, text = attrs.text, fontSize = attrs.fontSize, lineHeight = attrs.lineHeight;\n    var font = attrs.font;\n    if (!font) {\n        // 如果未组装 font\n        font = text_1.assembleFont(attrs);\n    }\n    var width = text_1.getTextWidth(text, font);\n    var bbox;\n    if (!width) {\n        // 如果width不存在，四点共其实点\n        bbox = {\n            x: x,\n            y: y,\n            width: 0,\n            height: 0,\n        };\n    }\n    else {\n        var textAlign = attrs.textAlign, textBaseline = attrs.textBaseline;\n        var height = text_1.getTextHeight(text, fontSize, lineHeight); // attrs.height\n        // 默认左右对齐：left, 默认上下对齐 bottom\n        var point = {\n            x: x,\n            y: y - height,\n        };\n        if (textAlign) {\n            if (textAlign === 'end' || textAlign === 'right') {\n                point.x -= width;\n            }\n            else if (textAlign === 'center') {\n                point.x -= width / 2;\n            }\n        }\n        if (textBaseline) {\n            if (textBaseline === 'top') {\n                point.y += height;\n            }\n            else if (textBaseline === 'middle') {\n                point.y += height / 2;\n            }\n        }\n        bbox = {\n            x: point.x,\n            y: point.y,\n            width: width,\n            height: height,\n        };\n    }\n    return bbox;\n}\nexports.default = default_1;\n//# sourceMappingURL=text.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar quadratic_1 = require(\"@antv/g-math/lib/quadratic\");\nvar cubic_1 = require(\"@antv/g-math/lib/cubic\");\nvar arc_1 = require(\"@antv/g-math/lib/arc\");\nvar path_2_segments_1 = require(\"@antv/path-util/lib/path-2-segments\");\nvar is_number_equal_1 = require(\"@antv/util/lib/is-number-equal\");\nvar util_1 = require(\"./util\");\nfunction getPathBox(segments, lineWidth) {\n    var xArr = [];\n    var yArr = [];\n    var segmentsWithAngle = [];\n    for (var i = 0; i < segments.length; i++) {\n        var segment = segments[i];\n        var currentPoint = segment.currentPoint, params = segment.params, prePoint = segment.prePoint;\n        var box = void 0;\n        switch (segment.command) {\n            case 'Q':\n                box = quadratic_1.default.box(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4]);\n                break;\n            case 'C':\n                box = cubic_1.default.box(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4], params[5], params[6]);\n                break;\n            case 'A':\n                var arcParams = segment.arcParams;\n                box = arc_1.default.box(arcParams.cx, arcParams.cy, arcParams.rx, arcParams.ry, arcParams.xRotation, arcParams.startAngle, arcParams.endAngle);\n                break;\n            default:\n                xArr.push(currentPoint[0]);\n                yArr.push(currentPoint[1]);\n                break;\n        }\n        if (box) {\n            segment.box = box;\n            xArr.push(box.x, box.x + box.width);\n            yArr.push(box.y, box.y + box.height);\n        }\n        if (lineWidth && (segment.command === 'L' || segment.command === 'M') && segment.prePoint && segment.nextPoint) {\n            segmentsWithAngle.push(segment);\n        }\n    }\n    // bbox calculation should ignore NaN for path attribute\n    // ref: https://github.com/antvis/g/issues/210\n    xArr = xArr.filter(function (item) { return !Number.isNaN(item); });\n    yArr = yArr.filter(function (item) { return !Number.isNaN(item); });\n    var minX = Math.min.apply(null, xArr);\n    var minY = Math.min.apply(null, yArr);\n    var maxX = Math.max.apply(null, xArr);\n    var maxY = Math.max.apply(null, yArr);\n    if (segmentsWithAngle.length === 0) {\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n    for (var i = 0; i < segmentsWithAngle.length; i++) {\n        var segment = segmentsWithAngle[i];\n        var currentPoint = segment.currentPoint;\n        var extra = void 0;\n        if (currentPoint[0] === minX) {\n            extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n            minX = minX - extra.xExtra;\n        }\n        else if (currentPoint[0] === maxX) {\n            extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n            maxX = maxX + extra.xExtra;\n        }\n        if (currentPoint[1] === minY) {\n            extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n            minY = minY - extra.yExtra;\n        }\n        else if (currentPoint[1] === maxY) {\n            extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n            maxY = maxY + extra.yExtra;\n        }\n    }\n    return {\n        x: minX,\n        y: minY,\n        width: maxX - minX,\n        height: maxY - minY,\n    };\n}\nfunction getExtraFromSegmentWithAngle(segment, lineWidth) {\n    var prePoint = segment.prePoint, currentPoint = segment.currentPoint, nextPoint = segment.nextPoint;\n    var currentAndPre = Math.pow(currentPoint[0] - prePoint[0], 2) + Math.pow(currentPoint[1] - prePoint[1], 2);\n    var currentAndNext = Math.pow(currentPoint[0] - nextPoint[0], 2) + Math.pow(currentPoint[1] - nextPoint[1], 2);\n    var preAndNext = Math.pow(prePoint[0] - nextPoint[0], 2) + Math.pow(prePoint[1] - nextPoint[1], 2);\n    // 以 currentPoint 为顶点的夹角\n    var currentAngle = Math.acos((currentAndPre + currentAndNext - preAndNext) / (2 * Math.sqrt(currentAndPre) * Math.sqrt(currentAndNext)));\n    // 夹角为空、 0 或 PI 时，不需要计算夹角处的额外宽度\n    // 注意: 由于计算精度问题，夹角为 0 的情况计算出来的角度可能是一个很小的值，还需要判断其与 0 是否近似相等\n    if (!currentAngle || Math.sin(currentAngle) === 0 || is_number_equal_1.default(currentAngle, 0)) {\n        return {\n            xExtra: 0,\n            yExtra: 0,\n        };\n    }\n    var xAngle = Math.abs(Math.atan2(nextPoint[1] - currentPoint[1], nextPoint[0] - currentPoint[0]));\n    var yAngle = Math.abs(Math.atan2(nextPoint[0] - currentPoint[0], nextPoint[1] - currentPoint[1]));\n    // 将夹角转为锐角\n    xAngle = xAngle > Math.PI / 2 ? Math.PI - xAngle : xAngle;\n    yAngle = yAngle > Math.PI / 2 ? Math.PI - yAngle : yAngle;\n    // 这里不考虑在水平和垂直方向的投影，直接使用最大差值\n    // 由于上层统一加减了二分之一线宽，这里需要进行弥补\n    var extra = {\n        // 水平方向投影\n        xExtra: Math.cos(currentAngle / 2 - xAngle) * ((lineWidth / 2) * (1 / Math.sin(currentAngle / 2))) - lineWidth / 2 || 0,\n        // 垂直方向投影\n        yExtra: Math.cos(yAngle - currentAngle / 2) * ((lineWidth / 2) * (1 / Math.sin(currentAngle / 2))) - lineWidth / 2 || 0,\n    };\n    return extra;\n}\nfunction default_1(shape) {\n    var attrs = shape.attr();\n    var path = attrs.path, stroke = attrs.stroke;\n    var lineWidth = stroke ? attrs.lineWidth : 0; // 只有有 stroke 时，lineWidth 才生效\n    var segments = shape.get('segments') || path_2_segments_1.default(path);\n    var _a = getPathBox(segments, lineWidth), x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n    var bbox = {\n        minX: x,\n        minY: y,\n        maxX: x + width,\n        maxY: y + height,\n    };\n    bbox = util_1.mergeArrowBBox(shape, bbox);\n    return {\n        x: bbox.minX,\n        y: bbox.minY,\n        width: bbox.maxX - bbox.minX,\n        height: bbox.maxY - bbox.minY,\n    };\n}\nexports.default = default_1;\n//# sourceMappingURL=path.js.map","import * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {ReadonlyVec2} a The vec2 point to rotate\r\n * @param {ReadonlyVec2} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {ReadonlyVec2} a The first operand\r\n * @param {ReadonlyVec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nvar ellipse_1 = require(\"./ellipse\");\n// 偏导数 x\nfunction derivativeXAt(cx, cy, rx, ry, xRotation, startAngle, endAngle, angle) {\n    return -1 * rx * Math.cos(xRotation) * Math.sin(angle) - ry * Math.sin(xRotation) * Math.cos(angle);\n}\n// 偏导数 y\nfunction derivativeYAt(cx, cy, rx, ry, xRotation, startAngle, endAngle, angle) {\n    return -1 * rx * Math.sin(xRotation) * Math.sin(angle) + ry * Math.cos(xRotation) * Math.cos(angle);\n}\n// x 的极值\nfunction xExtrema(rx, ry, xRotation) {\n    return Math.atan((-ry / rx) * Math.tan(xRotation));\n}\n// y 的极值\nfunction yExtrema(rx, ry, xRotation) {\n    return Math.atan(ry / (rx * Math.tan(xRotation)));\n}\n// 根据角度求 x 坐标\nfunction xAt(cx, cy, rx, ry, xRotation, angle) {\n    return rx * Math.cos(xRotation) * Math.cos(angle) - ry * Math.sin(xRotation) * Math.sin(angle) + cx;\n}\n// 根据角度求 y 坐标\nfunction yAt(cx, cy, rx, ry, xRotation, angle) {\n    return rx * Math.sin(xRotation) * Math.cos(angle) + ry * Math.cos(xRotation) * Math.sin(angle) + cy;\n}\n// 获取点在椭圆上的角度\nfunction getAngle(rx, ry, x0, y0) {\n    var angle = Math.atan2(y0 * rx, x0 * ry);\n    // 转换到 0 - 2PI 内\n    return (angle + Math.PI * 2) % (Math.PI * 2);\n}\n// 根据角度获取，x,y\nfunction getPoint(rx, ry, angle) {\n    return {\n        x: rx * Math.cos(angle),\n        y: ry * Math.sin(angle),\n    };\n}\n// 旋转\nfunction rotate(x, y, angle) {\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    return [x * cos - y * sin, x * sin + y * cos];\n}\nexports.default = {\n    /**\n     * 计算包围盒\n     * @param {number} cx         圆心 x\n     * @param {number} cy         圆心 y\n     * @param {number} rx         x 轴方向的半径\n     * @param {number} ry         y 轴方向的半径\n     * @param {number} xRotation  旋转角度\n     * @param {number} startAngle 起始角度\n     * @param {number} endAngle   结束角度\n     * @return {object} 包围盒对象\n     */\n    box: function (cx, cy, rx, ry, xRotation, startAngle, endAngle) {\n        var xDim = xExtrema(rx, ry, xRotation);\n        var minX = Infinity;\n        var maxX = -Infinity;\n        var xs = [startAngle, endAngle];\n        for (var i = -Math.PI * 2; i <= Math.PI * 2; i += Math.PI) {\n            var xAngle = xDim + i;\n            if (startAngle < endAngle) {\n                if (startAngle < xAngle && xAngle < endAngle) {\n                    xs.push(xAngle);\n                }\n            }\n            else {\n                if (endAngle < xAngle && xAngle < startAngle) {\n                    xs.push(xAngle);\n                }\n            }\n        }\n        for (var i = 0; i < xs.length; i++) {\n            var x = xAt(cx, cy, rx, ry, xRotation, xs[i]);\n            if (x < minX) {\n                minX = x;\n            }\n            if (x > maxX) {\n                maxX = x;\n            }\n        }\n        var yDim = yExtrema(rx, ry, xRotation);\n        var minY = Infinity;\n        var maxY = -Infinity;\n        var ys = [startAngle, endAngle];\n        for (var i = -Math.PI * 2; i <= Math.PI * 2; i += Math.PI) {\n            var yAngle = yDim + i;\n            if (startAngle < endAngle) {\n                if (startAngle < yAngle && yAngle < endAngle) {\n                    ys.push(yAngle);\n                }\n            }\n            else {\n                if (endAngle < yAngle && yAngle < startAngle) {\n                    ys.push(yAngle);\n                }\n            }\n        }\n        for (var i = 0; i < ys.length; i++) {\n            var y = yAt(cx, cy, rx, ry, xRotation, ys[i]);\n            if (y < minY) {\n                minY = y;\n            }\n            if (y > maxY) {\n                maxY = y;\n            }\n        }\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    },\n    /**\n     * 获取圆弧的长度，计算圆弧长度时不考虑旋转角度，\n     * 仅跟 rx, ry, startAngle, endAngle 相关\n     * @param {number} cx         圆心 x\n     * @param {number} cy         圆心 y\n     * @param {number} rx         x 轴方向的半径\n     * @param {number} ry         y 轴方向的半径\n     * @param {number} xRotation  旋转角度\n     * @param {number} startAngle 起始角度\n     * @param {number} endAngle   结束角度\n     */\n    length: function (cx, cy, rx, ry, xRotation, startAngle, endAngle) { },\n    /**\n     * 获取指定点到圆弧的最近距离的点\n     * @param {number} cx         圆心 x\n     * @param {number} cy         圆心 y\n     * @param {number} rx         x 轴方向的半径\n     * @param {number} ry         y 轴方向的半径\n     * @param {number} xRotation  旋转角度\n     * @param {number} startAngle 起始角度\n     * @param {number} endAngle   结束角度\n     * @param {number} x0         指定点的 x\n     * @param {number} y0         指定点的 y\n     * @return {object} 到指定点最近距离的点\n     */\n    nearestPoint: function (cx, cy, rx, ry, xRotation, startAngle, endAngle, x0, y0) {\n        // 将最近距离问题转换成到椭圆中心 0,0 没有旋转的椭圆问题\n        var relativeVector = rotate(x0 - cx, y0 - cy, -xRotation);\n        var x1 = relativeVector[0], y1 = relativeVector[1];\n        // 计算点到椭圆的最近的点\n        var relativePoint = ellipse_1.default.nearestPoint(0, 0, rx, ry, x1, y1);\n        // 获取点在椭圆上的角度\n        var angle = getAngle(rx, ry, relativePoint.x, relativePoint.y);\n        // 点没有在圆弧上\n        if (angle < startAngle) {\n            // 小于起始圆弧\n            relativePoint = getPoint(rx, ry, startAngle);\n        }\n        else if (angle > endAngle) {\n            // 大于结束圆弧\n            relativePoint = getPoint(rx, ry, endAngle);\n        }\n        // 旋转到 xRotation 的角度\n        var vector = rotate(relativePoint.x, relativePoint.y, xRotation);\n        return {\n            x: vector[0] + cx,\n            y: vector[1] + cy,\n        };\n    },\n    pointDistance: function (cx, cy, rx, ry, xRotation, startAngle, endAngle, x0, y0) {\n        var nearestPoint = this.nearestPoint(cx, cy, rx, ry, x0, y0);\n        return util_1.distance(nearestPoint.x, nearestPoint.y, x0, y0);\n    },\n    pointAt: function (cx, cy, rx, ry, xRotation, startAngle, endAngle, t) {\n        var angle = (endAngle - startAngle) * t + startAngle;\n        return {\n            x: xAt(cx, cy, rx, ry, xRotation, angle),\n            y: yAt(cx, cy, rx, ry, xRotation, angle),\n        };\n    },\n    tangentAngle: function (cx, cy, rx, ry, xRotation, startAngle, endAngle, t) {\n        var angle = (endAngle - startAngle) * t + startAngle;\n        var dx = derivativeXAt(cx, cy, rx, ry, xRotation, startAngle, endAngle, angle);\n        var dy = derivativeYAt(cx, cy, rx, ry, xRotation, startAngle, endAngle, angle);\n        return util_1.piMod(Math.atan2(dy, dx));\n    },\n};\n//# sourceMappingURL=arc.js.map","\"use strict\";\n/**\n * @fileoverview 椭圆的一些计算，\n *  - 周长计算参考：https://www.mathsisfun.com/geometry/ellipse-perimeter.html\n *  - 距离计算参考：https://wet-robots.ghost.io/simple-method-for-distance-to-ellipse/\n * @author dxq613@gmail.com\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nfunction copysign(v1, v2) {\n    var absv = Math.abs(v1);\n    return v2 > 0 ? absv : absv * -1;\n}\nexports.default = {\n    /**\n     * 包围盒计算\n     * @param {number} x  椭圆中心 x\n     * @param {number} y  椭圆中心 y\n     * @param {number} rx 椭圆 x 方向半径\n     * @param {number} ry 椭圆 y 方向半径\n     * @return {object} 包围盒\n     */\n    box: function (x, y, rx, ry) {\n        return {\n            x: x - rx,\n            y: y - ry,\n            width: rx * 2,\n            height: ry * 2,\n        };\n    },\n    /**\n     * 计算周长，使用近似法\n     * @param {number} x  椭圆中心 x\n     * @param {number} y  椭圆中心 y\n     * @param {number} rx 椭圆 x 方向半径\n     * @param {number} ry 椭圆 y 方向半径\n     * @return {number} 椭圆周长\n     */\n    length: function (x, y, rx, ry) {\n        return Math.PI * (3 * (rx + ry) - Math.sqrt((3 * rx + ry) * (rx + 3 * ry)));\n    },\n    /**\n     * 距离椭圆最近的点\n     * @param {number} x  椭圆中心 x\n     * @param {number} y  椭圆中心 y\n     * @param {number} rx 椭圆 x 方向半径\n     * @param {number} ry 椭圆 y 方向半径\n     * @param {number} x0  指定的点 x\n     * @param {number} y0  指定的点 y\n     * @return {object} 椭圆上距离指定点最近的点\n     */\n    nearestPoint: function (x, y, rx, ry, x0, y0) {\n        var a = rx;\n        var b = ry;\n        // 假如椭圆半径为0则返回圆心\n        if (a === 0 || b === 0) {\n            return {\n                x: x,\n                y: y,\n            };\n        }\n        // 转换成 0， 0 为中心的椭圆计算\n        var relativeX = x0 - x;\n        var relativeY = y0 - y;\n        var px = Math.abs(relativeX);\n        var py = Math.abs(relativeY);\n        var squareA = a * a;\n        var squareB = b * b;\n        // const angle0 = Math.atan2(relativeY, relativeX);\n        var t = Math.PI / 4;\n        var nearestX; // 椭圆上的任一点\n        var nearestY;\n        // 迭代 4 次\n        for (var i = 0; i < 4; i++) {\n            nearestX = a * Math.cos(t);\n            nearestY = b * Math.sin(t);\n            var ex = ((squareA - squareB) * Math.pow(Math.cos(t), 3)) / a;\n            var ey = ((squareB - squareA) * Math.pow(Math.sin(t), 3)) / b;\n            var rx1 = nearestX - ex;\n            var ry1 = nearestY - ey;\n            var qx = px - ex;\n            var qy = py - ey;\n            var r = Math.hypot(ry1, rx1);\n            var q = Math.hypot(qy, qx);\n            var delta_c = r * Math.asin((rx1 * qy - ry1 * qx) / (r * q));\n            var delta_t = delta_c / Math.sqrt(squareA + squareB - nearestX * nearestX - nearestY * nearestY);\n            t += delta_t;\n            t = Math.min(Math.PI / 2, Math.max(0, t));\n        }\n        return {\n            x: x + copysign(nearestX, relativeX),\n            y: y + copysign(nearestY, relativeY),\n        };\n    },\n    /**\n     * 点到椭圆最近的距离\n     * @param {number} x  椭圆中心 x\n     * @param {number} y  椭圆中心 y\n     * @param {number} rx 椭圆 x 方向半径\n     * @param {number} ry 椭圆 y 方向半径\n     * @param {number} x0  指定的点 x\n     * @param {number} y0  指定的点 y\n     * @return {number} 点到椭圆的距离\n     */\n    pointDistance: function (x, y, rx, ry, x0, y0) {\n        var nearestPoint = this.nearestPoint(x, y, rx, ry, x0, y0);\n        return util_1.distance(nearestPoint.x, nearestPoint.y, x0, y0);\n    },\n    /**\n     * 根据比例获取点\n     * @param {number} x 椭圆中心 x\n     * @param {number} y 椭圆中心 y\n     * @param {number} rx 椭圆 x 方向半径\n     * @param {number} ry 椭圆 y 方向半径\n     * @param {number} t 指定比例，x轴方向为 0\n     * @return {object} 点\n     */\n    pointAt: function (x, y, rx, ry, t) {\n        var angle = 2 * Math.PI * t; // 按照角度进行计算，而不按照周长计算\n        return {\n            x: x + rx * Math.cos(angle),\n            y: y + ry * Math.sin(angle),\n        };\n    },\n    /**\n     * 根据比例计算切线角度\n     * @param {number} x 椭圆中心 x\n     * @param {number} y 椭圆中心 y\n     * @param {number} rx 椭圆 x 方向半径\n     * @param {number} ry 椭圆 y 方向半径\n     * @param {number} t 指定比例 0 - 1 之间，x轴方向为 0。在 0-1 范围之外是循环还是返回 null，还需要调整\n     * @return {number} 角度，在 0 - 2PI 之间\n     */\n    tangentAngle: function (x, y, rx, ry, t) {\n        var angle = 2 * Math.PI * t; // 按照角度进行计算，而不按照周长计算\n        // 直接使用 x,y 的导数计算， x' = -rx * sin(t); y' = ry * cos(t);\n        var tangentAngle = Math.atan2(ry * Math.cos(angle), -rx * Math.sin(angle));\n        // 也可以使用指定点的切线方程计算，成本有些高\n        // const point = this.pointAt(0, 0, rx, ry, t); // 椭圆的切线同椭圆的中心不相关\n        // let tangentAngle = -1 * Math.atan((ry * ry * point.x) / (rx * rx * point.y));\n        // if (angle >= 0 && angle <= Math.PI) {\n        //   tangentAngle += Math.PI;\n        // }\n        return util_1.piMod(tangentAngle);\n    },\n};\n//# sourceMappingURL=ellipse.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar each_1 = require(\"@antv/util/lib/each\");\nvar is_array_1 = require(\"@antv/util/lib/is-array\");\nvar is_string_1 = require(\"@antv/util/lib/is-string\");\nvar regexTags = /[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig;\nvar regexDot = /[^\\s\\,]+/ig;\nfunction parsePath(p) {\n    var path = p || [];\n    if (is_array_1.default(path)) {\n        return path;\n    }\n    if (is_string_1.default(path)) {\n        path = path.match(regexTags);\n        each_1.default(path, function (item, index) {\n            // @ts-ignore\n            item = item.match(regexDot);\n            if (item[0].length > 1) {\n                var tag = item[0].charAt(0);\n                // @ts-ignore\n                item.splice(1, 0, item[0].substr(1));\n                // @ts-ignore\n                item[0] = tag;\n            }\n            // @ts-ignore\n            each_1.default(item, function (sub, i) {\n                if (!isNaN(sub)) {\n                    // @ts-ignore\n                    item[i] = +sub;\n                }\n            });\n            // @ts-ignore\n            path[index] = item;\n        });\n        return path;\n    }\n}\nexports.default = parsePath;\n//# sourceMappingURL=parse-path.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nfunction default_1(shape) {\n    var attrs = shape.attr();\n    var x1 = attrs.x1, y1 = attrs.y1, x2 = attrs.x2, y2 = attrs.y2;\n    var minX = Math.min(x1, x2);\n    var maxX = Math.max(x1, x2);\n    var minY = Math.min(y1, y2);\n    var maxY = Math.max(y1, y2);\n    var bbox = {\n        minX: minX,\n        maxX: maxX,\n        minY: minY,\n        maxY: maxY,\n    };\n    bbox = util_1.mergeArrowBBox(shape, bbox);\n    return {\n        x: bbox.minX,\n        y: bbox.minY,\n        width: bbox.maxX - bbox.minX,\n        height: bbox.maxY - bbox.minY,\n    };\n}\nexports.default = default_1;\n//# sourceMappingURL=line.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction default_1(shape) {\n    var attrs = shape.attr();\n    var x = attrs.x, y = attrs.y, rx = attrs.rx, ry = attrs.ry;\n    return {\n        x: x - rx,\n        y: y - ry,\n        width: rx * 2,\n        height: ry * 2,\n    };\n}\nexports.default = default_1;\n//# sourceMappingURL=ellipse.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar line_1 = require(\"./line\");\nvar util_1 = require(\"./util\");\nfunction analyzePoints(points) {\n    // 计算每段的长度和总的长度\n    var totalLength = 0;\n    var segments = [];\n    for (var i = 0; i < points.length - 1; i++) {\n        var from = points[i];\n        var to = points[i + 1];\n        var length_1 = util_1.distance(from[0], from[1], to[0], to[1]);\n        var seg = {\n            from: from,\n            to: to,\n            length: length_1,\n        };\n        segments.push(seg);\n        totalLength += length_1;\n    }\n    return { segments: segments, totalLength: totalLength };\n}\nfunction lengthOfSegment(points) {\n    if (points.length < 2) {\n        return 0;\n    }\n    var totalLength = 0;\n    for (var i = 0; i < points.length - 1; i++) {\n        var from = points[i];\n        var to = points[i + 1];\n        totalLength += util_1.distance(from[0], from[1], to[0], to[1]);\n    }\n    return totalLength;\n}\nexports.lengthOfSegment = lengthOfSegment;\n/**\n * 按照比例在数据片段中获取点\n * @param {array} points 点的集合\n * @param {number} t 百分比 0-1\n * @return {object} 点的坐标\n */\nfunction pointAtSegments(points, t) {\n    // 边界判断\n    if (t > 1 || t < 0 || points.length < 2) {\n        return null;\n    }\n    var _a = analyzePoints(points), segments = _a.segments, totalLength = _a.totalLength;\n    // 多个点有可能重合\n    if (totalLength === 0) {\n        return {\n            x: points[0][0],\n            y: points[0][1],\n        };\n    }\n    // 计算比例\n    var startRatio = 0;\n    var point = null;\n    for (var i = 0; i < segments.length; i++) {\n        var seg = segments[i];\n        var from = seg.from, to = seg.to;\n        var currentRatio = seg.length / totalLength;\n        if (t >= startRatio && t <= startRatio + currentRatio) {\n            var localRatio = (t - startRatio) / currentRatio;\n            point = line_1.default.pointAt(from[0], from[1], to[0], to[1], localRatio);\n            break;\n        }\n        startRatio += currentRatio;\n    }\n    return point;\n}\nexports.pointAtSegments = pointAtSegments;\n/**\n * 按照比例在数据片段中获取切线的角度\n * @param {array} points 点的集合\n * @param {number} t 百分比 0-1\n */\nfunction angleAtSegments(points, t) {\n    // 边界判断\n    if (t > 1 || t < 0 || points.length < 2) {\n        return 0;\n    }\n    var _a = analyzePoints(points), segments = _a.segments, totalLength = _a.totalLength;\n    // 计算比例\n    var startRatio = 0;\n    var angle = 0;\n    for (var i = 0; i < segments.length; i++) {\n        var seg = segments[i];\n        var from = seg.from, to = seg.to;\n        var currentRatio = seg.length / totalLength;\n        if (t >= startRatio && t <= startRatio + currentRatio) {\n            angle = Math.atan2(to[1] - from[1], to[0] - from[0]);\n            break;\n        }\n        startRatio += currentRatio;\n    }\n    return angle;\n}\nexports.angleAtSegments = angleAtSegments;\nfunction distanceAtSegment(points, x, y) {\n    var minDistance = Infinity;\n    for (var i = 0; i < points.length - 1; i++) {\n        var point = points[i];\n        var nextPoint = points[i + 1];\n        var distance_1 = line_1.default.pointDistance(point[0], point[1], nextPoint[0], nextPoint[1], x, y);\n        if (distance_1 < minDistance) {\n            minDistance = distance_1;\n        }\n    }\n    return minDistance;\n}\nexports.distanceAtSegment = distanceAtSegment;\n//# sourceMappingURL=segments.js.map","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n;\n//# sourceMappingURL=interface.js.map","\"use strict\";\n/**\n * @fileoverview 判断点是否在多边形内\n * @author dxq613@gmail.com\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// 多边形的射线检测，参考：https://blog.csdn.net/WilliamSun0122/article/details/77994526\nvar tolerance = 1e-6;\n// 三态函数，判断两个double在eps精度下的大小关系\nfunction dcmp(x) {\n    if (Math.abs(x) < tolerance) {\n        return 0;\n    }\n    return x < 0 ? -1 : 1;\n}\n// 判断点Q是否在p1和p2的线段上\nfunction onSegment(p1, p2, q) {\n    if ((q[0] - p1[0]) * (p2[1] - p1[1]) === (p2[0] - p1[0]) * (q[1] - p1[1]) &&\n        Math.min(p1[0], p2[0]) <= q[0] &&\n        q[0] <= Math.max(p1[0], p2[0]) &&\n        Math.min(p1[1], p2[1]) <= q[1] &&\n        q[1] <= Math.max(p1[1], p2[1])) {\n        return true;\n    }\n    return false;\n}\n// 判断点P在多边形内-射线法\nfunction isInPolygon(points, x, y) {\n    var isHit = false;\n    var n = points.length;\n    if (n <= 2) {\n        // svg 中点小于 3 个时，不显示，也无法被拾取\n        return false;\n    }\n    for (var i = 0; i < n; i++) {\n        var p1 = points[i];\n        var p2 = points[(i + 1) % n];\n        if (onSegment(p1, p2, [x, y])) {\n            // 点在多边形一条边上\n            return true;\n        }\n        // 前一个判断min(p1[1],p2[1])<P.y<=max(p1[1],p2[1])\n        // 后一个判断被测点 在 射线与边交点 的左边\n        if (dcmp(p1[1] - y) > 0 !== dcmp(p2[1] - y) > 0 &&\n            dcmp(x - ((y - p1[1]) * (p1[0] - p2[0])) / (p1[1] - p2[1]) - p1[0]) < 0) {\n            isHit = !isHit;\n        }\n    }\n    return isHit;\n}\nexports.default = isInPolygon;\n//# sourceMappingURL=point-in-polygon.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isBetween = function (value, min, max) { return value >= min && value <= max; };\nfunction getLineIntersect(p0, p1, p2, p3) {\n    var tolerance = 0.001;\n    var E = {\n        x: p2.x - p0.x,\n        y: p2.y - p0.y,\n    };\n    var D0 = {\n        x: p1.x - p0.x,\n        y: p1.y - p0.y,\n    };\n    var D1 = {\n        x: p3.x - p2.x,\n        y: p3.y - p2.y,\n    };\n    var kross = D0.x * D1.y - D0.y * D1.x;\n    var sqrKross = kross * kross;\n    var sqrLen0 = D0.x * D0.x + D0.y * D0.y;\n    var sqrLen1 = D1.x * D1.x + D1.y * D1.y;\n    var point = null;\n    if (sqrKross > tolerance * sqrLen0 * sqrLen1) {\n        var s = (E.x * D1.y - E.y * D1.x) / kross;\n        var t = (E.x * D0.y - E.y * D0.x) / kross;\n        if (isBetween(s, 0, 1) && isBetween(t, 0, 1)) {\n            point = {\n                x: p0.x + s * D0.x,\n                y: p0.y + s * D0.y,\n            };\n        }\n    }\n    return point;\n}\nexports.default = getLineIntersect;\n;\n//# sourceMappingURL=get-line-intersect.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar base_1 = require(\"./base\");\nvar PRESS_DELAY = 250;\n// 计算滑动的方向\nvar calcDirection = function (start, end) {\n    var xDistance = end.x - start.x;\n    var yDistance = end.y - start.y;\n    // x 的距离大于y 说明是横向，否则就是纵向\n    if (Math.abs(xDistance) > Math.abs(yDistance)) {\n        return xDistance > 0 ? 'right' : 'left';\n    }\n    return yDistance > 0 ? 'down' : 'up';\n};\n// 计算2点之间的距离\nvar calcDistance = function (point1, point2) {\n    var xDistance = Math.abs(point2.x - point1.x);\n    var yDistance = Math.abs(point2.y - point1.y);\n    return Math.sqrt(xDistance * xDistance + yDistance * yDistance);\n};\nvar getCenter = function (point1, point2) {\n    var x = (point1.x + point2.x) / 2;\n    var y = (point1.y + point2.y) / 2;\n    return { x: x, y: y };\n};\nvar convertPoints = function (touches, canvas) {\n    if (!touches) {\n        return;\n    }\n    var points = [];\n    var len = touches.length;\n    for (var i = 0; i < len; i++) {\n        var touch = touches[i];\n        // x, y: 相对canvas原点的位置，clientX, clientY 相对于可视窗口的位置\n        var clientX = touch.clientX, clientY = touch.clientY;\n        var point = canvas.getPointByClient(clientX, clientY);\n        points.push(point);\n    }\n    return points;\n};\nvar GestureController = /** @class */ (function (_super) {\n    tslib_1.__extends(GestureController, _super);\n    function GestureController(view) {\n        var _this = _super.call(this, view) || this;\n        _this.processEvent = {};\n        _this.touchStart = function (ev) {\n            var points = convertPoints(ev.originalEvent.touches, _this.canvas);\n            if (!points) {\n                return;\n            }\n            ev.points = points;\n            // 防止上次的内容没有清理掉，重新reset下\n            _this.reset();\n            // 记录touch start 的时间\n            _this.startTime = Date.now();\n            // 记录touch start 的点\n            _this.startPoints = points;\n            if (points.length > 1) {\n                _this.startDistance = calcDistance(points[0], points[1]);\n                _this.center = getCenter(points[0], points[1]);\n            }\n            else {\n                // 如果touchstart后停顿250ms, 则也触发press事件\n                _this.pressTimeout = setTimeout(function () {\n                    // 这里固定触发press事件\n                    var eventType = 'press';\n                    ev.direction = 'none';\n                    _this.emitStart(eventType, ev);\n                    _this.emitEvent(eventType, ev);\n                    _this.eventType = eventType;\n                }, PRESS_DELAY);\n            }\n        };\n        _this.touchMove = function (ev) {\n            var points = convertPoints(ev.originalEvent.touches, _this.canvas);\n            if (!points) {\n                return;\n            }\n            _this.clearPressTimeout();\n            ev.points = points;\n            var startPoints = _this.startPoints;\n            if (!startPoints) {\n                return;\n            }\n            // 多指触控\n            if (points.length > 1) {\n                // touchstart的距离\n                var startDistance = _this.startDistance;\n                var currentDistance = calcDistance(points[0], points[1]);\n                ev.zoom = currentDistance / startDistance;\n                ev.center = _this.center;\n                // 触发缩放事件\n                _this.emitStart('pinch', ev);\n                _this.emitEvent('pinch', ev);\n            }\n            else {\n                var deltaX = points[0].x - startPoints[0].x;\n                var deltaY = points[0].y - startPoints[0].y;\n                var direction = _this.direction || calcDirection(startPoints[0], points[0]);\n                _this.direction = direction;\n                // 获取press或者pan的事件类型\n                // press 按住滑动, pan表示平移\n                // 如果start后立刻move，则触发pan, 如果有停顿，则触发press\n                var eventType = _this.getEventType(points);\n                ev.direction = direction;\n                ev.deltaX = deltaX;\n                ev.deltaY = deltaY;\n                _this.emitStart(eventType, ev);\n                _this.emitEvent(eventType, ev);\n                // 记录最后2次move的时间和坐标，为了给swipe事件用\n                var prevMoveTime = _this.lastMoveTime;\n                var now = Date.now();\n                // 最后2次的时间间隔一定要大于0，否则swipe没发计算\n                if (now - prevMoveTime > 0) {\n                    _this.prevMoveTime = prevMoveTime;\n                    _this.prevMovePoints = _this.lastMovePoints;\n                    _this.lastMoveTime = now;\n                    _this.lastMovePoints = points;\n                }\n            }\n        };\n        _this.touchEnd = function (ev) {\n            _this.emitEnd(ev);\n            // swipe事件处理, 在touchend之后触发\n            var lastMoveTime = _this.lastMoveTime;\n            var now = Date.now();\n            // 做这个判断是为了最后一次touchmove后到end前，还有一个停顿的过程\n            // 100 是拍的一个值，理论这个值会很短，一般不卡顿的话在10ms以内\n            if (now - lastMoveTime < 100) {\n                var prevMoveTime = _this.prevMoveTime || _this.startTime;\n                var intervalTime = lastMoveTime - prevMoveTime;\n                // 时间间隔一定要大于0, 否则计算没意义\n                if (intervalTime > 0) {\n                    var prevMovePoints = _this.prevMovePoints || _this.startPoints;\n                    var lastMovePoints = _this.lastMovePoints;\n                    // move速率\n                    var velocity = calcDistance(prevMovePoints[0], lastMovePoints[0]) / intervalTime;\n                    // 0.3 是参考hammerjs的设置\n                    if (velocity > 0.3) {\n                        ev.velocity = velocity;\n                        ev.direction = calcDirection(prevMovePoints[0], lastMovePoints[0]);\n                        _this.emitEvent('swipe', ev);\n                    }\n                }\n            }\n            _this.reset();\n            var touches = ev.touches;\n            // 当多指只释放了1指时也会触发end, 这时重新触发一次start\n            if (touches && touches.length > 0) {\n                _this.touchStart(ev);\n            }\n        };\n        _this.canvas = view.getCanvas();\n        _this.delegateEvent();\n        // 用来记录当前触发的事件\n        _this.processEvent = {};\n        return _this;\n    }\n    Object.defineProperty(GestureController.prototype, \"name\", {\n        get: function () {\n            return 'gesture';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    GestureController.prototype.init = function () { };\n    GestureController.prototype.render = function () { };\n    GestureController.prototype.layout = function () { };\n    GestureController.prototype.update = function () { };\n    GestureController.prototype.destroy = function () {\n        this.reset();\n        this.processEvent = null;\n    };\n    GestureController.prototype.delegateEvent = function () {\n        // 代理这几个事件\n        this.canvas.on('touchstart', this.touchStart);\n        this.canvas.on('touchmove', this.touchMove);\n        this.canvas.on('touchend', this.touchEnd);\n    };\n    GestureController.prototype.emitEvent = function (type, ev) {\n        var view = this.view;\n        view.emit(type, ev);\n    };\n    // 触发start事件\n    GestureController.prototype.emitStart = function (type, ev) {\n        if (this.isProcess(type)) {\n            return;\n        }\n        this.enable(type);\n        this.emitEvent(type + \"start\", ev);\n    };\n    // 触发end事件\n    GestureController.prototype.emitEnd = function (ev) {\n        var _this = this;\n        var processEvent = this.processEvent;\n        Object.keys(processEvent).forEach(function (type) {\n            _this.emitEvent(type + \"end\", ev);\n            delete processEvent[type];\n        });\n    };\n    GestureController.prototype.enable = function (eventType) {\n        this.processEvent[eventType] = true;\n    };\n    // 是否进行中的事件\n    GestureController.prototype.isProcess = function (eventType) {\n        return this.processEvent[eventType];\n    };\n    GestureController.prototype.reset = function () {\n        this.clearPressTimeout();\n        this.startTime = 0;\n        this.startPoints = null;\n        this.startDistance = 0;\n        this.direction = null;\n        this.eventType = null;\n        this.prevMoveTime = 0;\n        this.prevMovePoints = null;\n        this.lastMoveTime = 0;\n        this.lastMovePoints = null;\n    };\n    GestureController.prototype.clearPressTimeout = function () {\n        if (this.pressTimeout) {\n            clearTimeout(this.pressTimeout);\n            this.pressTimeout = 0;\n        }\n    };\n    GestureController.prototype.getEventType = function (points) {\n        var _a = this, eventType = _a.eventType, view = _a.view, startTime = _a.startTime, startPoints = _a.startPoints;\n        if (eventType) {\n            return eventType;\n        }\n        var type;\n        var panEventListeners = view.getEvents().pan;\n        // 如果 view 上没有 pan 事件的监听，默认都是 press\n        if (!panEventListeners || !panEventListeners.length) {\n            type = 'press';\n        }\n        else {\n            // 如果有pan事件的处理，press则需要停顿250ms, 且移动距离小于10\n            var now = Date.now();\n            if (now - startTime > PRESS_DELAY && calcDistance(startPoints[0], points[0]) < 10) {\n                type = 'press';\n            }\n            else {\n                type = 'pan';\n            }\n        }\n        this.eventType = type;\n        return type;\n    };\n    return GestureController;\n}(base_1.Controller));\nexports.default = GestureController;\n//# sourceMappingURL=gesture.js.map","import { IGroup, IShape } from '../dependents';\nimport { assign, isArray, each, mix } from '@antv/util';\nimport { breakText } from '../util/common';\nimport ViewLayer from '../base/view-layer';\nimport BBox from '../util/bbox';\n\ninterface TextConfig {\n  leftMargin: number;\n  topMargin: number;\n  rightMargin: number;\n  text: string;\n  style: any;\n  wrapperWidth: number;\n  container: IGroup;\n  theme: any;\n  index: number;\n  plot: ViewLayer;\n  name: string;\n  alignTo?: 'left' | 'right' | 'middle';\n}\n\n/**\n * 图表的文字描述，一般用于生成图表的标题和副标题\n */\n\nexport default class TextDescription {\n  public shape: IShape;\n  public position: string = 'top';\n  public name: string;\n  public destroyed: boolean = false;\n  private container: IGroup;\n  private topMargin: number;\n  private leftMargin: number;\n  private rightMargin: number;\n  private wrapperWidth: number;\n  private alignTo: string;\n  private text: string;\n  private style: any;\n  private index: number;\n  private plot: ViewLayer;\n\n  constructor(cfg: TextConfig) {\n    assign(this as any, cfg);\n    this.init();\n  }\n\n  public getBBox(): BBox | null {\n    if (this.shape) {\n      // @ts-ignore\n      const bbox = this.shape.getBBox();\n      if (this.index === 0) {\n        return BBox.fromBBoxObject(bbox);\n      }\n      const padding = this.plot.theme.description.padding;\n      if (isArray(padding)) {\n        each(padding, (it, index) => {\n          if (typeof padding[index] === 'function') {\n            padding[index] = padding[index](this.plot.options.legend.position);\n          }\n        });\n      }\n      return new BBox(bbox.maxX, bbox.minY, bbox.width, bbox.height + padding[2]);\n    }\n    return null;\n  }\n\n  public clear() {\n    if (this.shape) {\n      // @ts-ignore\n      this.shape.attr('text', '');\n    }\n  }\n\n  public destroy() {\n    if (this.shape) {\n      this.shape.remove();\n    }\n    this.destroyed = true;\n  }\n\n  private init() {\n    const content = this.textWrapper();\n    const { x, y } = this.getPosition();\n    this.shape = this.container.addShape('text', {\n      attrs: mix(\n        {\n          x,\n          y,\n          text: content,\n        },\n        this.style,\n        {\n          textAlign: this.getTextAlign(),\n        }\n      ),\n    }) as IShape;\n    // @ts-ignore\n    this.shape.name = this.name;\n  }\n\n  protected getPosition() {\n    if (this.alignTo === 'left') {\n      return { x: this.leftMargin, y: this.topMargin };\n    } else if (this.alignTo === 'middle') {\n      return { x: this.leftMargin + this.wrapperWidth / 2, y: this.topMargin };\n    } else {\n      return { x: this.rightMargin, y: this.topMargin };\n    }\n  }\n\n  protected getTextAlign() {\n    if (this.alignTo === 'left') {\n      return 'left';\n    } else if (this.alignTo === 'middle') {\n      return 'center';\n    } else {\n      return 'right';\n    }\n  }\n\n  /**\n   * 当text过长时，默认换行\n   * 1. 注意初始text带换行符的场景\n   */\n  private textWrapper() {\n    const width = this.wrapperWidth;\n    const style = this.style;\n    const textContent: string = this.text;\n    const tShape = this.container.addShape('text', {\n      attrs: {\n        text: '',\n        x: 0,\n        y: 0,\n        ...style,\n      },\n    });\n    const textArr = textContent.split('\\n');\n    const wrappedTextArr = textArr.map((wrappedText) => {\n      let text = '';\n      const chars = wrappedText.split('');\n      const breakIndex: number[] = [];\n      for (let i = 0; i < chars.length; i++) {\n        const item = chars[i];\n        tShape.attr('text', (text += item));\n        const currentWidth = tShape.getBBox().width - 1;\n        if (currentWidth > width) {\n          // 如果是第一个字符就大于宽度不做任何换行处理\n          if (i === 0) {\n            break;\n          }\n          breakIndex.push(i);\n          text = '';\n        }\n      }\n\n      return breakText(chars, breakIndex);\n    });\n\n    tShape.remove();\n    return wrappedTextArr.join('\\n');\n  }\n}\n","import { deepMix, isFunction, get } from '@antv/util';\nimport { ViewLayer } from '../..';\nimport { IBaseAxis } from '../../interface/config';\nimport { combineFormatter, getNoopFormatter, getPrecisionFormatter, getSuffixFormatter } from '../../util/formatter';\n\nfunction propertyMapping(source, target, field) {\n  if (source[field]) {\n    target[field] = source[field];\n  }\n}\n\ninterface AxisConfig {\n  plot: ViewLayer;\n  dim: string;\n}\n\nexport default class AxisParser {\n  public config: any = false;\n  protected originConfig: any;\n  private plot: any;\n  private dim: string;\n  private localProps: IBaseAxis;\n  private themeConfig: any;\n\n  constructor(cfg: AxisConfig) {\n    this.plot = cfg.plot;\n    this.dim = cfg.dim;\n    this.init();\n  }\n\n  private init() {\n    this.config = false;\n    const theme = this.plot.getPlotTheme();\n    this.themeConfig = theme && theme.axis && theme.axis[this.dim];\n    if (this._needDraw()) {\n      this._styleParser();\n    }\n  }\n\n  private _styleParser() {\n    this.config = { ...this.localProps };\n    this._isVisible('line') ? this._lineParser() : (this.config.line = null);\n    this._isVisible('grid') ? this._gridParser() : (this.config.grid = null);\n    this._isVisible('tickLine') ? this._tickLineParser() : (this.config.tickLine = null);\n    this._isVisible('label') ? this._labelParser() : (this.config.label = null);\n    this._isVisible('title') ? this._titleParser() : (this.config.title = null);\n\n    propertyMapping(this.localProps, this.config, 'autoHideLabel');\n    propertyMapping(this.localProps, this.config, 'autoRotateLabel');\n    propertyMapping(this.localProps, this.config, 'autoRotateTitle');\n  }\n\n  private _needDraw() {\n    /** 如果在图表配置项里没有设置坐标轴整体的visibility则去对应的theme取 */\n    const propos = this.plot.options;\n    const propsConfig = propos[`${this.dim}Axis`] ? propos[`${this.dim}Axis`] : {};\n    const config = deepMix({}, this.themeConfig, propsConfig);\n    this.localProps = config;\n    if (config.visible) {\n      return true;\n    }\n    return false;\n  }\n\n  private _lineParser() {\n    this.config.line = this.localProps.line;\n    if (this.localProps.line.style) {\n      this.config.line = { style: this.localProps.line.style };\n    }\n    this.applyThemeConfig('line');\n  }\n\n  private _gridParser() {\n    const style = this.localProps.grid?.line?.style;\n    const type = this.localProps.grid?.line?.type;\n    const alternateColor = this.localProps.grid?.alternateColor;\n\n    if (isFunction(style)) {\n      this.config.grid = (text: string, index: number, count: number) => {\n        const cfg = style(text, index, count);\n        return {\n          line: {\n            type,\n            style: deepMix({}, get(this.themeConfig, `grid.line.style`), cfg),\n          },\n          alternateColor,\n        };\n      };\n    } else if (style) {\n      this.config.grid = {\n        line: {\n          type,\n          style,\n        },\n        alternateColor,\n      };\n      this.applyThemeConfig('grid');\n    }\n  }\n\n  private _tickLineParser() {\n    this.config.tickLine = this.localProps.tickLine;\n    if (this.localProps.tickLine.style) {\n      this.config.tickLine = { style: this.localProps.tickLine.style };\n    }\n    this.applyThemeConfig('tickLine');\n  }\n\n  private _labelParser() {\n    const { style, ...restLabelProps } = this.localProps.label;\n    const labelConfig: any = { ...restLabelProps };\n    if (style) {\n      labelConfig.style = { ...this.localProps.label.style };\n    }\n    labelConfig.style = deepMix({}, get(this.themeConfig, 'label.style'), labelConfig.style);\n    const formatter = this.parseFormatter(labelConfig);\n    labelConfig.formatter = formatter;\n    this.config.label = labelConfig;\n  }\n\n  private _titleParser() {\n    const titleConfig: any = { ...this.localProps.title };\n    const { visible, style, text } = this.localProps.title;\n    if (!visible) {\n      this.config.showTitle = false;\n    } else {\n      this.config.showTitle = true;\n      if (style) {\n        titleConfig.style = style;\n      }\n      titleConfig.style = deepMix({}, get(this.config, 'title.style'), titleConfig.textStyle);\n\n      if (text) {\n        titleConfig.text = text;\n      }\n    }\n    this.config.title = titleConfig;\n  }\n\n  private _isVisible(name: string) {\n    if (this.localProps[name] && this.localProps[name].visible) {\n      return true;\n    }\n    return false;\n  }\n\n  private applyThemeConfig(type: 'line' | 'grid' | 'tickLine') {\n    this.config[type] = deepMix({}, get(this.themeConfig, `${type}.style`), this.config[type]);\n  }\n\n  protected parseFormatter(labelConfig) {\n    let formatter = combineFormatter(\n      getNoopFormatter(),\n      getPrecisionFormatter(labelConfig.precision),\n      getSuffixFormatter(labelConfig.suffix)\n    );\n    if (labelConfig.formatter) {\n      formatter = combineFormatter(\n        formatter,\n        labelConfig.formatter as (text: string, item: any, idx: number) => string\n      );\n    }\n    return formatter;\n  }\n}\n","import { getScale } from '@antv/scale';\nimport { assign, deepMix, mix, each, isArray, isString, isNumber, contains, toArray, clone } from '@antv/util';\nimport { getMean, getMedian } from '../util/math';\n\nexport default class GuideLine {\n  public config: any;\n  private plot: any;\n  private cfg: any;\n  private values: number[];\n\n  constructor(cfg) {\n    assign(this, cfg);\n    this._init();\n  }\n\n  private _init() {\n    const defaultStyle = this.getDefaultStyle();\n    const baseConfig: any = {\n      type: 'line',\n      top: true,\n      start: this.cfg.start,\n      end: this.cfg.end,\n    };\n\n    baseConfig.style = deepMix({}, defaultStyle.line.style, this.cfg.lineStyle);\n    baseConfig.text = deepMix({}, defaultStyle.text, this.cfg.text);\n    if (this.cfg.type) {\n      const stateValue = this._getState(this.cfg.type);\n      const scale = this.getYScale();\n      const percent = `${(1.0 - scale.scale(stateValue)) * 100}%`;\n      const start = ['0%', percent];\n      const end = ['100%', percent];\n      this.config = mix(\n        {\n          start,\n          end,\n        },\n        baseConfig\n      );\n    } else {\n      const { start, end } = this.cfg;\n      this.config = clone(baseConfig);\n      const xScale = this.getXScale();\n      const yScale = this.getYScale();\n      const startData = clone(start);\n      const endData = clone(end);\n      each(start, (value, index) => {\n        if (!contains(toArray(start[index]), '%') || isNumber(start[index])) {\n          if (index === 0) {\n            startData[index] = `${xScale.scale(start[0]) * 100}%`;\n          } else {\n            startData[index] = `${(1.0 - yScale.scale(start[1])) * 100}%`;\n          }\n        }\n      });\n      each(end, (value, index) => {\n        if (!contains(toArray(end[index]), '%') || isNumber(end[index])) {\n          if (index === 0) {\n            endData[index] = `${xScale.scale(end[0]) * 100}%`;\n          } else {\n            endData[index] = `${(1.0 - yScale.scale(end[1])) * 100}%`;\n          }\n        }\n      });\n      this.config.start = startData;\n      this.config.end = endData;\n    }\n  }\n\n  private getYScale() {\n    const minValue = this._getState('min');\n    const maxValue = this._getState('max');\n    const Scale = getScale('linear');\n    // 重新组织scale并使用scale的min和max来计算guide point的百分比位置，以避免受nice的影响\n    const scale = new Scale(\n      mix(\n        {},\n        {\n          min: this.plot.type === 'column' ? 0 : minValue,\n          max: maxValue,\n          nice: true,\n          values: this.values,\n        },\n        this.plot.config.scales[this.plot.options.yField]\n      )\n    );\n    return scale;\n  }\n\n  private getXScale() {\n    const values = this.extractXValue();\n    if (isString(values[0])) {\n      const Scale = getScale('cat');\n      const scale = new Scale(\n        mix(\n          {},\n          {\n            values: values,\n          },\n          this.plot.config.scales[this.plot.options.xField]\n        )\n      );\n      return scale;\n    } else {\n      const min = Math.min(...values);\n      const max = Math.max(...values);\n      const Scale = getScale('linear');\n      const scale = new Scale(\n        mix(\n          {},\n          {\n            min: min,\n            max: max,\n            nice: true,\n            values: values,\n          },\n          this.plot.config.scales[this.plot.options.xField]\n        )\n      );\n      return scale;\n    }\n  }\n\n  private _getState(type) {\n    this.values = this._extractValues();\n    if (type === 'median') {\n      return getMedian(this.values);\n    }\n    if (type === 'mean') {\n      return getMean(this.values);\n    }\n    if (type === 'max') {\n      return Math.max(...this.values);\n    }\n    if (type === 'min') {\n      return Math.min(...this.values);\n    }\n  }\n\n  private _extractValues() {\n    const props = this.plot.options;\n    const field = props.yField;\n    const values = [];\n    const data = this.plot.processData(props.data);\n    each(data, (d) => {\n      if (isArray(d[field])) {\n        values.push(...d[field]);\n      } else {\n        values.push(d[field]);\n      }\n    });\n    return values;\n  }\n\n  private extractXValue() {\n    const props = this.plot.options;\n    const field = props.xField;\n    const values = [];\n    const data = this.plot.processData(props.data);\n    each(data, (d) => {\n      if (isArray(d[field])) {\n        values.push(...d[field]);\n      } else {\n        values.push(d[field]);\n      }\n    });\n    return values;\n  }\n\n  private getDefaultStyle() {\n    this.getDefaultTextAlign();\n    return {\n      line: {\n        style: {\n          lineWidth: 2,\n          stroke: '#333333',\n          opacity: 0.7,\n          lineDash: [0, 0],\n        },\n      },\n      text: {\n        offsetY: -5,\n        style: {\n          fontSize: 14,\n          stroke: 'white',\n          lineWidth: 2,\n          textAlign: this.getDefaultTextAlign(),\n        },\n      },\n    };\n  }\n\n  private getDefaultTextAlign() {\n    const textConfig = this.cfg.text;\n    if (textConfig) {\n      if (!textConfig.position || textConfig.position === 'start') {\n        return 'left';\n      }\n      if (textConfig.position === 'center') {\n        return 'center';\n      }\n      if (textConfig.position === 'end') {\n        return 'right';\n      }\n    }\n  }\n}\n","import { assign, isFunction, deepMix, get, each, has } from '@antv/util';\nimport { Label } from '../../interface/config';\nimport { combineFormatter, getNoopFormatter, getPrecisionFormatter, getSuffixFormatter } from '../../util/formatter';\nimport { LooseMap } from '../../interface/types';\n\nexport default class LabelParser {\n  public config: LooseMap = {};\n  protected plot: any;\n  protected originConfig: Label;\n\n  constructor(cfg) {\n    const { plot, ...rest } = cfg;\n    this.plot = plot;\n    this.originConfig = rest;\n    this.init(cfg);\n  }\n\n  public getConfig() {\n    return this.config;\n  }\n\n  protected init(cfg) {\n    assign(this.config, cfg);\n    this.config.callback = (val) => {\n      return this.parseCallBack(val);\n    };\n  }\n\n  protected parseCallBack(val) {\n    const labelProps = this.originConfig;\n    const theme = this.plot.getPlotTheme();\n    const config: LooseMap = { ...labelProps };\n    this.parseOffset(labelProps, config);\n    if (labelProps.position) {\n      if (isFunction(labelProps.position)) {\n        config.position = labelProps.position(val);\n      } else {\n        config.position = labelProps.position;\n      }\n    }\n    this.parseFormatter(config);\n    if (labelProps.style) {\n      if (isFunction(labelProps.style)) {\n        config.textStyle = labelProps.style(val);\n      } else {\n        config.textStyle = labelProps.style;\n      }\n    }\n    config.textStyle = deepMix({}, get(theme, 'label.style'), config.textStyle);\n    if (labelProps.autoRotate) {\n      config.autoRotate = labelProps.autoRotate;\n    }\n\n    return config;\n  }\n\n  protected parseOffset(props, config) {\n    const mapper = ['offset', 'offsetX', 'offsetY'];\n    let count = 0;\n    each(mapper, (m) => {\n      if (has(props, m)) {\n        config[m] = props[m];\n        count++;\n      }\n    });\n    // 如用户没有设置offset，而label position又为middle时，则默认设置offset为0\n    if (count === 0 && get(props, 'position') === 'middle') {\n      config.offset = 0;\n    }\n  }\n\n  protected parseFormatter(config: LooseMap) {\n    const labelProps = this.originConfig;\n    config.content = (data, index) => {\n      // @ts-ignore\n      const text = data[labelProps.fields[0]];\n      return combineFormatter(\n        getNoopFormatter(),\n        getPrecisionFormatter(labelProps.precision),\n        getSuffixFormatter(labelProps.suffix),\n        (labelProps.formatter as (text: string, item: any, idx: number) => string)\n          ? labelProps.formatter\n          : getNoopFormatter()\n      )(text, data, index);\n    };\n  }\n}\n","import { each, clone, isObject, isFunction } from '@antv/util';\n// import { compare } from '../../base/controller/state';\n\n// 对axis label和label样式进行缓存\nlet labels;\nlet originAttrs;\n\nfunction onActive(plot, condition) {\n  if (!labels) {\n    getAllAxisLabels(plot);\n  }\n  each(labels, (label) => {\n    const { labelData, con } = beforeCompare(label, condition);\n    if (compare(labelData, con)) {\n      const disableStyle = labelActiveStyle();\n      label.shape.attr(disableStyle);\n    }\n  });\n}\n\nfunction onDisable(plot, condition) {\n  if (!labels) {\n    getAllAxisLabels(plot);\n  }\n  each(labels, (label, index) => {\n    const { labelData, con } = beforeCompare(label, condition);\n    if (compare(labelData, con)) {\n      const originAttr = originAttrs[index];\n      const disableStyle = labelDisableStyle(originAttr);\n      label.shape.attr(disableStyle);\n    }\n  });\n}\n\nfunction getAllAxisLabels(plot) {\n  labels = [];\n  originAttrs = [];\n  const axes = plot.view.getController('axis').getComponents();\n  each(axes, (axisComponentOption) => {\n    const axis = axisComponentOption.component;\n    const labelArr = [];\n    const scale = getScale(plot, axis);\n    const labelShapes = axis.get('labelRenderer').get('group').get('children');\n    each(labelShapes, (shape) => {\n      if (shape.type === 'text') {\n        labelArr.push({ shape });\n        originAttrs.push(shape.attr());\n      }\n    });\n    if (scale) {\n      // 取到scale values作为原始数据，避免被label format的影响\n      const { ticks, field } = scale;\n      each(labelArr, (label, index) => {\n        label.value = ticks[index];\n        label.scaleField = field;\n        label.type = scale.type;\n      });\n    }\n    labels.push(...labelArr);\n  });\n}\n\n// 获取坐标轴对应的scale\nfunction getScale(plot, axis) {\n  const props = plot.options;\n  let dim = 'y';\n  const position = axis.get('position');\n  if (position === 'bottom' || position === 'top') {\n    dim = 'x';\n  }\n  const scaleField = props[`${dim}Field`];\n  return plot.view.get('scales')[scaleField];\n}\n\nfunction beforeCompare(label, condition) {\n  const labelData = { [label.scaleField]: label.value };\n  const con = clone(condition);\n  if (label.type === 'time' && isObject(condition) && !isFunction(con.exp)) {\n    con.exp = new Date(con.exp).getTime();\n  }\n  return { labelData, con };\n}\n\nfunction labelDisableStyle(style) {\n  const opacity = style.opacity || 1;\n  return { opacity: opacity * 0.2 };\n}\n\nfunction labelActiveStyle() {\n  return { opacity: 1, fontWeight: 600, fill: 'red' };\n}\n\nfunction compare(origin, condition) {\n  if (!isFunction(condition)) {\n    const { name, exp } = condition;\n    if (!origin[name]) {\n      return false;\n    }\n    if (isFunction(exp)) {\n      return exp(origin[name]);\n    }\n    return origin[name] === exp;\n  }\n  return condition(origin);\n}\n\nexport default {\n  active: onActive,\n  selected: onActive,\n  disable: onDisable,\n};\n","import { each, mix } from '@antv/util';\nimport { compare } from '../../base/controller/state';\n\n// 对label和label样式进行缓存\nlet labels;\nlet originAttrs;\n\nfunction onActive(plot, condition) {\n  if (!labels) {\n    getAllLabels(plot);\n  }\n  each(labels, (label, index) => {\n    const origin = label.get('origin');\n    if (compare(origin, condition)) {\n      const originAttr = originAttrs[index];\n      const style = mix({}, originAttr, { opacity: 1 });\n      label.attr(style);\n    }\n  });\n}\n\nfunction onDisable(plot, condition) {\n  if (!labels) {\n    getAllLabels(plot);\n  }\n  each(labels, (label, index) => {\n    const origin = label.get('origin');\n    if (compare(origin, condition)) {\n      const originAttr = originAttrs[index];\n      const disableStyle = labelDisableStyle(originAttr);\n      label.attr(disableStyle);\n    }\n  });\n}\n\nfunction getAllLabels(plot) {\n  labels = [];\n  originAttrs = [];\n  const geoms = plot.view.get('elements');\n  each(geoms, (geom) => {\n    const geomLabels = geom.get('labels');\n    if (geomLabels) {\n      each(geomLabels, (label) => {\n        labels.push(label);\n        originAttrs.push(label.attr());\n      });\n    }\n  });\n}\n\nfunction labelDisableStyle(style) {\n  const opacity = style.opacity || 1;\n  return { opacity: opacity * 0.2 };\n}\n\nexport default {\n  active: onActive,\n  selected: onActive,\n  disable: onDisable,\n};\n","import { each, clone, isFunction, has } from '@antv/util';\nimport { compare } from '../../base/controller/state';\n\nconst POSITION_MAPPER = ['xField', 'yField', 'angleField'];\n\nfunction onActive(plot, condition) {\n  const props = plot.options;\n  // 获取state condition对应在画布的位置，只有在state condition对应字段为位置映射字段时，tooltip才会对齐进行响应\n  if (shouldActive(props, condition)) {\n    const data = props.data;\n    each(data, (d) => {\n      if (compare(d, condition)) {\n        const point = plot.view.getXY(d);\n        // 调用showTooltip方法\n        plot.view.on('tooltip:create', (e) => {\n          processState(condition, e, false);\n        });\n        plot.view.showTooltip(point);\n      }\n    });\n  }\n}\n\nfunction onDisable(plot, condition) {\n  plot.view.on('tooltip:change', (e) => {\n    processState(condition, e, true);\n  });\n}\n\nfunction processState(condition, e, inverse) {\n  const expected = inverse ? false : true;\n  const originItems = clone(e.items);\n  e.items.splice(0);\n  each(originItems, (item) => {\n    const origin = item.point._origin;\n    if (compare(origin, condition) === expected) {\n      e.items.push(item);\n    }\n  });\n}\n\nfunction shouldActive(props, condition) {\n  const fields = getPositionField(props);\n  return !isFunction(condition) && fields.indexOf(condition.name);\n}\n\nfunction getPositionField(props) {\n  const fields = [];\n  each(POSITION_MAPPER, (v) => {\n    if (has(props, v)) {\n      fields.push(v);\n    }\n  });\n  return fields;\n}\n\nexport default {\n  active: onActive,\n  selected: onActive,\n  disable: onDisable,\n};\n","import BaseInteraction from './base';\nimport ScrollbarInteraction from './scrollbar';\nimport SliderInteraction from './slider';\nimport TimeLineInteraction from './timeline';\n\nBaseInteraction.registerInteraction('slider', SliderInteraction);\nBaseInteraction.registerInteraction('scrollbar', ScrollbarInteraction);\nBaseInteraction.registerInteraction('timeline', TimeLineInteraction);\n\nexport * from './base';\nexport default BaseInteraction;\n","import { IGroup, Scrollbar } from '../dependents';\nimport BBox from '../util/bbox';\nimport { Scale } from '@antv/scale';\nimport { clamp, get, isEqual, map, throttle } from '@antv/util';\nimport ViewLayer from '../base/view-layer';\nimport { IScrollbarInteractionConfig } from '../interface/config';\nimport BaseInteraction from './base';\nimport { getDataByScaleRange } from './helper/data-range';\n\nconst DEFAULT_PADDING: number = 4;\nconst DEFAULT_SIZE: number = 8;\nconst DEFAULT_CATEGORY_SIZE: number = 32;\nconst MIN_THUMB_LENGTH: number = 20;\nconst SCROLL_BAR_Z_INDEX: number = 999;\n\nconst getValidScrollbarConfig = (cfg: IScrollbarInteractionConfig = {}): Required<IScrollbarInteractionConfig> => {\n  const _cfg: Required<IScrollbarInteractionConfig> = {\n    type: 'horizontal',\n    categorySize: DEFAULT_CATEGORY_SIZE,\n    width: DEFAULT_SIZE,\n    height: DEFAULT_SIZE,\n    padding: [0, 0, 0, 0],\n    ...cfg,\n  };\n\n  // default padding\n  if (!cfg.padding) {\n    _cfg.padding =\n      _cfg.type === 'horizontal' ? [DEFAULT_PADDING, 0, DEFAULT_PADDING, 0] : [0, DEFAULT_PADDING, 0, DEFAULT_PADDING];\n  }\n\n  return _cfg;\n};\n\nexport default class ScrollbarInteraction extends BaseInteraction {\n  public static getInteractionRange(layerRange: BBox, interaction: IScrollbarInteractionConfig) {\n    const config: Required<IScrollbarInteractionConfig> = getValidScrollbarConfig(interaction);\n    const [paddingTop, paddingRight, paddingBottom, paddingLeft] = config.padding;\n\n    if (config.type === 'horizontal') {\n      return new BBox(\n        layerRange.minX,\n        layerRange.maxY - config.height - paddingTop - paddingBottom,\n        layerRange.width,\n        config.height + paddingTop + paddingBottom\n      );\n    } else {\n      return new BBox(\n        layerRange.maxX - config.width - paddingLeft - paddingRight,\n        layerRange.minY,\n        config.width + paddingLeft + paddingRight,\n        layerRange.height\n      );\n    }\n  }\n\n  private container: IGroup;\n  private scrollbar: Scrollbar;\n  private cnt: number;\n  private step: number;\n  private xScaleCfg: {\n    field: string;\n    values: string[];\n  };\n  private yScalesCfg: Array<{\n    field: string;\n    type: string;\n    min: number;\n    max: number;\n    ticks: number[];\n    formatter: any;\n  }>;\n  private ratio: number;\n  private thumbOffset: number;\n  private trackLen: number;\n  private thumbLen: number;\n  private onChangeFn = throttle(this.onChange.bind(this), 20, {\n    leading: true,\n  }) as (evt: object) => void;\n\n  protected render(): void {\n    const view = this.view;\n    this.ratio = 0;\n    this.thumbOffset = 0;\n    view.on('afterrender', () => {\n      const padding = this.view.padding;\n      // if we're not in `auto padding` process\n      if (!isEqual([0, 0, 0, 0], padding)) {\n        if (!this.trackLen) {\n          this.measureScrollBar();\n          this.changeViewData(this.getScrollRange(), true);\n        } else {\n          this.renderScrollbar();\n        }\n      }\n    });\n  }\n\n  protected start() {\n    return;\n  }\n\n  protected clear(): void {\n    if (this.scrollbar) {\n      this.scrollbar.destroy();\n      this.scrollbar = null;\n    }\n    if (this.container) {\n      this.container.remove(true);\n      this.container = null;\n    }\n    this.trackLen = null;\n    this.thumbLen = null;\n  }\n\n  private renderScrollbar(): void {\n    const config: Required<IScrollbarInteractionConfig> = getValidScrollbarConfig(this.getInteractionConfig());\n    const range = this.getRange();\n    const isHorizontal = config.type !== 'vertical';\n    const panelRange = this.view.coordinateBBox;\n    const [paddingTop, , , paddingLeft] = config.padding;\n    const position = isHorizontal\n      ? { x: panelRange.minX + paddingLeft, y: range.minY + paddingTop }\n      : { x: range.minX + paddingLeft, y: panelRange.minY + paddingTop };\n\n    if (!this.scrollbar) {\n      this.container = this.canvas.addGroup();\n      this.scrollbar = new Scrollbar({\n        container: this.container,\n        x: position.x,\n        y: position.y,\n        isHorizontal,\n        trackLen: this.trackLen,\n        thumbLen: this.thumbLen,\n        thumbOffset: this.ratio * this.trackLen,\n      });\n      this.scrollbar.init();\n      this.scrollbar.render();\n      this.scrollbar.get('group').set('zIndex', SCROLL_BAR_Z_INDEX);\n      this.scrollbar.on('scrollchange', this.onChangeFn);\n    } else {\n      this.scrollbar.update({\n        trackLen: this.trackLen,\n        thumbLen: this.thumbLen,\n        thumbOffset: this.thumbOffset,\n        x: position.x,\n        y: position.y,\n      });\n      this.scrollbar.render();\n    }\n  }\n\n  private measureScrollBar(): void {\n    const config: Required<IScrollbarInteractionConfig> = getValidScrollbarConfig(this.getInteractionConfig());\n    const [paddingTop, paddingRight, paddingBottom, paddingLeft] = config.padding;\n    const isHorizontal: boolean = config.type !== 'vertical';\n    const panelRange = this.view.coordinateBBox;\n    const xScale: Scale = this.view.getXScale();\n    const yScales: Scale[] = this.view.getYScales();\n\n    this.cnt = xScale.values.length;\n    this.xScaleCfg = { field: xScale.field, values: xScale.values || [] };\n    this.yScalesCfg = map(yScales, (item) => ({\n      field: item.field,\n      type: item.type,\n      min: item.min,\n      max: item.max,\n      ticks: item.ticks,\n      formatter: item.formatter,\n    }));\n    this.step = Math.floor((isHorizontal ? panelRange.width : panelRange.height) / config.categorySize);\n    this.trackLen = isHorizontal\n      ? panelRange.width - paddingLeft - paddingRight\n      : panelRange.height - paddingTop - paddingBottom;\n    this.thumbLen = Math.max(this.trackLen * clamp(this.step / xScale.values.length, 0, 1), MIN_THUMB_LENGTH);\n  }\n\n  private getScrollRange(): [number, number] {\n    const startIdx: number = Math.floor((this.cnt - this.step) * clamp(this.ratio, 0, 1));\n    const endIdx: number = Math.min(startIdx + this.step, this.cnt);\n\n    return [startIdx, endIdx];\n  }\n\n  private changeViewData([startIdx, endIdx]: [number, number], render?: boolean): void {\n    const config: Required<IScrollbarInteractionConfig> = getValidScrollbarConfig(this.getInteractionConfig());\n    const viewLayer: ViewLayer = this.getViewLayer();\n    const { meta } = viewLayer.options;\n    const origData: object[] = viewLayer.getData();\n    const newData: object[] = getDataByScaleRange(\n      this.xScaleCfg.field,\n      this.xScaleCfg.values,\n      origData,\n      [startIdx, endIdx],\n      config.type === 'vertical'\n    );\n\n    // ScrollBar在滚动过程中保持\b\bY轴上scale配置: min/max/ticks\n    this.yScalesCfg.forEach((cfg) => {\n      const metaCfg = get(meta, cfg.field) || {};\n      this.view.scale(cfg.field, {\n        formatter: cfg.formatter,\n        ...metaCfg,\n        type: cfg.type as 'linear' | 'cat' | 'log' | 'pow' | 'identity' | 'time',\n        min: cfg.min,\n        max: cfg.max,\n      });\n    });\n    if (render) {\n      this.view.data(newData);\n      this.view.render();\n    } else {\n      this.view.changeData(newData);\n    }\n  }\n\n  private onChange({ ratio, thumbOffset }: { ratio: number; thumbOffset: number }): void {\n    this.ratio = ratio;\n    this.thumbOffset = thumbOffset;\n\n    const origAnimate = this.view.getOptions().animate;\n    this.view.animate(false);\n    this.changeViewData(this.getScrollRange());\n    this.view.animate(origAnimate);\n    // update scrollbar\n    this.renderScrollbar();\n  }\n}\n","import { IGroup, Slider, VIEW_LIFE_CIRCLE } from '../dependents';\nimport BBox from '../util/bbox';\nimport { Scale } from '@antv/scale';\nimport { clamp, head, last, map, size, throttle, isEmpty } from '@antv/util';\nimport { ISliderInteractionConfig } from '../interface/config';\nimport BaseInteraction from './base';\nimport { getDataByScaleRange } from './helper/data-range';\n\nconst DEFAULT_PADDING: number = 4;\nconst DEFAULT_SIZE: number = 16;\n\nconst getValidSliderConfig = (cfg: ISliderInteractionConfig = {}): Required<ISliderInteractionConfig> => {\n  const _cfg: Required<ISliderInteractionConfig> = {\n    type: 'horizontal',\n    start: 0,\n    end: 1,\n    width: undefined,\n    height: undefined,\n    padding: [0, 0, 0, 0],\n    backgroundStyle: {},\n    foregroundStyle: {},\n    handlerStyle: {},\n    textStyle: {},\n    trendCfg: {},\n    ...cfg,\n  };\n\n  // default padding\n  if (!cfg.padding) {\n    _cfg.padding =\n      _cfg.type === 'horizontal' ? [DEFAULT_PADDING, 0, DEFAULT_PADDING, 0] : [0, DEFAULT_PADDING, 0, DEFAULT_PADDING];\n  }\n\n  // default size\n  if (!cfg.height) {\n    _cfg.height = DEFAULT_SIZE;\n  }\n  if (!cfg.width) {\n    _cfg.width = DEFAULT_SIZE;\n  }\n\n  // start & end\n  const start = clamp(Math.min(_cfg.start, _cfg.end), 0, 1);\n  const end = clamp(Math.max(_cfg.start, _cfg.end), 0, 1);\n  _cfg.start = start;\n  _cfg.end = end;\n\n  return _cfg;\n};\n\nexport default class SliderInteraction extends BaseInteraction {\n  public static getInteractionRange(layerRange: BBox, interaction: ISliderInteractionConfig): BBox {\n    const config: ISliderInteractionConfig = getValidSliderConfig(interaction);\n    const [paddingTop, paddingRight, paddingBottom, paddingLeft] = config.padding || [0, 0, 0, 0];\n\n    if (config.type === 'horizontal') {\n      const bbox = new BBox(\n        layerRange.minX,\n        layerRange.maxY - config.height - paddingTop - paddingBottom,\n        layerRange.width,\n        config.height + paddingTop + paddingBottom\n      );\n      return bbox;\n    } else {\n      return new BBox(\n        layerRange.maxX - config.width - paddingLeft - paddingRight,\n        layerRange.minY,\n        config.width + paddingLeft + paddingRight,\n        layerRange.height\n      );\n    }\n  }\n\n  private container: IGroup;\n  private slider: Slider;\n  private curStart: number;\n  private curEnd: number;\n  private xScaleCfg:\n    | {\n        field: string;\n        values: string[];\n      }\n    | undefined;\n  private onChangeFn: (range: [number, number]) => void = throttle(this.onChange.bind(this), 20, { leading: true }) as (\n    range: [number, number]\n  ) => void;\n\n  protected render(): void {\n    const layer = this.getViewLayer();\n    const view = this.view;\n    // 设置初始化的 start/end\n    const config = getValidSliderConfig(this.getInteractionConfig());\n    this.curStart = config.start;\n    this.curEnd = config.end;\n    this.xScaleCfg = undefined;\n    // 等待 view 每次 render 完成后更新 slider 组件\n    const callback = () => {\n      if (isEmpty(layer.options.data)) {\n        return;\n      }\n      if (!this.xScaleCfg) {\n        // 初始化配置和数据\n        const xScale: Scale = view.getXScale();\n        this.xScaleCfg = {\n          field: xScale.field,\n          values: xScale.values || [],\n        };\n        // 初始化 data\n        view.data(this.getSliderData(this.curStart, this.curEnd));\n        view.render();\n      } else {\n        this.renderSlider();\n      }\n    };\n    view.on(VIEW_LIFE_CIRCLE.AFTER_PAINT, callback);\n    this.addDisposable(() => view.off(VIEW_LIFE_CIRCLE.AFTER_PAINT, callback));\n    view.on(VIEW_LIFE_CIRCLE.AFTER_RENDER, callback);\n    this.addDisposable(() => view.off(VIEW_LIFE_CIRCLE.AFTER_RENDER, callback));\n  }\n\n  protected start() {\n    return;\n  }\n\n  protected clear(): void {\n    if (this.slider) {\n      this.slider.destroy();\n      this.slider = null;\n    }\n    if (this.container) {\n      this.container.remove(true);\n      this.container = null;\n    }\n  }\n\n  private renderSlider(): void {\n    if (!this.slider) {\n      this.container = this.canvas.addGroup();\n      this.slider = new Slider({ ...this.getSliderConfig(), container: this.container });\n      this.slider.init();\n      this.slider.render();\n      this.slider.on('sliderchange', this.onChangeFn);\n    } else {\n      this.slider.update(this.getSliderConfig());\n      this.slider.render();\n    }\n  }\n\n  private getSliderConfig() {\n    const view = this.view;\n    const panelRange = view.coordinateBBox;\n    const range = this.getRange();\n    const config: ISliderInteractionConfig | null = getValidSliderConfig(this.getInteractionConfig());\n    const { padding = [0, 0, 0, 0], backgroundStyle, foregroundStyle, handlerStyle, textStyle, trendCfg = {} } =\n      config || {};\n    const [paddingTop, paddingRight, paddingBottom, paddingLeft] = padding;\n    const { minText, maxText } = this.getSliderMinMaxText(this.curStart, this.curEnd);\n    const cfg: any = {\n      x: panelRange.minX + paddingLeft,\n      y: range.minY + paddingTop,\n      width: panelRange.width - paddingLeft - paddingRight,\n      height: range.height - paddingTop - paddingBottom,\n      start: this.curStart,\n      end: this.curEnd,\n      minText,\n      maxText,\n      backgroundStyle,\n      foregroundStyle,\n      handlerStyle,\n      textStyle,\n      trendCfg: {\n        isArea: false,\n        smooth: false,\n        ...trendCfg,\n        data: this.getSliderTrendData(),\n      },\n    };\n\n    return cfg;\n  }\n\n  private getSliderTrendData(): number[] {\n    const { data, yField } = this.getViewLayer().options;\n\n    return map(data, (item) => item[yField]);\n  }\n\n  private getSliderData(start: number, end: number): any[] {\n    const origData = this.getViewLayer().getData();\n    const length = size(this.xScaleCfg.values);\n    const startIdx = Math.round(start * length);\n    const endIdx = Math.max(startIdx + 1, Math.round(end * length));\n\n    return getDataByScaleRange(this.xScaleCfg.field, this.xScaleCfg.values, origData, [startIdx, endIdx]);\n  }\n\n  private getSliderMinMaxText(start: number, end: number): { minText: string; maxText: string } {\n    const { data = [], xField } = this.getViewLayer().options;\n    const length = size(data);\n    const startIdx = Math.round(start * length);\n    const endIdx = Math.max(startIdx + 1, Math.round(end * length));\n    const newData = data.slice(startIdx, endIdx);\n\n    return {\n      minText: newData.length > 0 ? head(newData)[xField] : '',\n      maxText: newData.length > 0 ? last(newData)[xField] : '',\n    };\n  }\n\n  private onChange(range: [number, number]): void {\n    const view = this.view;\n    const start = clamp(Math.min(range[0], range[1]), 0, 1);\n    const end = clamp(Math.max(range[0], range[1]), 0, 1);\n    const data = this.getSliderData(start, end);\n    const { minText, maxText } = this.getSliderMinMaxText(start, end);\n    this.curStart = start;\n    this.curEnd = end;\n    this.slider.update({\n      start,\n      end,\n      minText,\n      maxText,\n    });\n    this.slider.render();\n    const origAnimate = view.getOptions().animate;\n    view.animate(false);\n    view.changeData(data);\n    view.animate(origAnimate);\n  }\n}\n","import { throttle, uniq, isEqual } from '@antv/util';\nimport { IGroup, VIEW_LIFE_CIRCLE } from '../dependents';\nimport BaseInteraction from './base';\nimport { ITimeLineInteractionConfig } from '../interface/config';\nimport BBox from '../util/bbox';\nimport TimeLine from '../components/timeline';\n\nconst DEFAULT_HEIGHT = 40;\n\nfunction getValidTimeLineConfig(interaction: ITimeLineInteractionConfig): Required<ITimeLineInteractionConfig> {\n  return {\n    loop: false,\n    auto: true,\n    height: DEFAULT_HEIGHT,\n    padding: [0, 20, 0, 0],\n    speed: 2,\n    ...interaction,\n  };\n}\n\nexport default class TimeLineInteraction extends BaseInteraction {\n  private timeline: TimeLine;\n  private container: IGroup;\n  private onChangeFn: (tick: string) => void = throttle(this.onChange.bind(this), 20, { leading: true }) as (\n    tick: string\n  ) => void;\n  private config: ITimeLineInteractionConfig;\n  private originAnimation: any;\n  private timeLineConfig: any;\n  private firstRender: boolean;\n\n  /** TimeLineInteraction new 时的范围参数 interactionRange */\n  public static getInteractionRange(layerRange: BBox, interaction: ITimeLineInteractionConfig): BBox {\n    const config: ITimeLineInteractionConfig = getValidTimeLineConfig(interaction);\n    const paddingTop = config.padding[0];\n    const paddingBottom = config.padding[2];\n\n    return new BBox(\n      layerRange.minX,\n      layerRange.maxY - config.height - paddingTop - paddingBottom,\n      layerRange.width,\n      config.height + paddingTop + paddingBottom\n    );\n  }\n\n  private setAnimate(isAnimate: boolean) {\n    const geometries = this.view.geometries;\n    this.view.animate(isAnimate);\n    geometries.forEach((geom) => {\n      geom.animate(isAnimate);\n    });\n  }\n\n  protected start() {\n    return;\n  }\n\n  private renderTimeLine() {\n    this.config = getValidTimeLineConfig(this.getInteractionConfig() as ITimeLineInteractionConfig);\n\n    const viewRange = this.view.viewBBox;\n    const { loop, padding, speed } = this.config;\n    const [paddingTop, paddingRight, paddingBottom, paddingLeft] = padding;\n    const range = this.getRange();\n\n    const ticks = this.getTicks();\n    const width = viewRange.width - paddingLeft - paddingRight;\n    const timeLineConfig = {\n      x: viewRange.minX + paddingLeft,\n      y: range.tl.y + paddingTop,\n      width,\n      height: range.height - paddingTop - paddingBottom,\n      loop,\n      ticks,\n      speed,\n      defaultCurrentTick: ticks[0],\n    };\n\n    if (this.timeline) {\n      if (!isEqual(timeLineConfig, this.timeLineConfig)) {\n        this.timeLineConfig = timeLineConfig;\n        this.timeline.update(timeLineConfig);\n      }\n    } else {\n      this.container = this.canvas.addGroup();\n\n      this.timeline = new TimeLine({\n        container: this.container,\n        ...timeLineConfig,\n      });\n      this.timeline.on('timelinestart', () => {\n        this.originAnimation = this.view.getOptions().animate;\n        this.setAnimate(true);\n      });\n      this.timeline.on('timelineend', () => {\n        this.setAnimate(this.originAnimation);\n      });\n      this.timeline.on('timelinechange', this.onChangeFn);\n      this.timeline.on('timelineupdate', this.onChange.bind(this));\n      this.view.data(this.getFilterData(ticks[0]));\n      this.timeLineConfig = timeLineConfig;\n    }\n  }\n\n  private onChange(tick: string) {\n    const filterData = this.getFilterData(tick);\n    this.view.changeData(filterData);\n  }\n\n  private getFilterData(tick: string) {\n    const { field } = this.config;\n    const { data } = this.getViewLayer().options;\n    return data.filter((item) => item[field] === tick);\n  }\n\n  private getTicks() {\n    const { field } = this.config;\n    const { data } = this.getViewLayer().options;\n    return uniq(data.map((item) => item[field]));\n  }\n\n  /** 渲染 timeline */\n  protected render(): void {\n    this.firstRender = true;\n    this.view.on(VIEW_LIFE_CIRCLE.BEFORE_RENDER, () => {\n      this.renderTimeLine();\n    });\n    this.view.on(VIEW_LIFE_CIRCLE.BEFORE_PAINT, () => {\n      this.renderTimeLine();\n    });\n    this.view.on(VIEW_LIFE_CIRCLE.AFTER_PAINT, () => {\n      if (this.config.auto && this.firstRender) {\n        this.timeline.isPlay = true;\n        this.timeline.changePlayStatus();\n      }\n      this.firstRender = false;\n    });\n    this.view.on(VIEW_LIFE_CIRCLE.AFTER_RENDER, () => {\n      if (this.config.auto && this.firstRender) {\n        this.timeline.isPlay = true;\n        this.timeline.changePlayStatus();\n      }\n      this.firstRender = false;\n    });\n  }\n\n  protected clear(): void {\n    if (this.timeline) {\n      this.timeline.destroy();\n      this.timeline = null;\n    }\n    if (this.container) {\n      this.container.remove(true);\n      this.container = null;\n    }\n  }\n}\n","/**\n * @file 基于 G 的播放轴组件\n * @author blackganglion\n */\n\nimport { IShape, Event } from '@antv/g-base';\nimport { deepMix, findIndex, get } from '@antv/util';\nimport Button from './button';\nimport BaseComponent, { BaseComponentConfig } from '../base';\n\nconst TIMELINE_START = 'timelinestart';\nconst TIMELINE_CHANGE = 'timelinechange';\nconst TIMELINE_END = 'timelineend';\nconst TIMELINE_UPDATE = 'timelineupdate';\n\nconst PADDING_LEFT = 20;\nconst PADDING_RIGHT = 20;\n\n/** 播放轴配置项 */\ninterface TimeLineCfg extends BaseComponentConfig {\n  /** 播放轴位置数据 */\n  readonly x: number;\n  readonly y: number;\n  readonly width: number;\n  readonly height: number;\n  /** 刻度值 */\n  readonly ticks: string[];\n  /** 播放速度，1 个 tick 花费时间 */\n  readonly speed?: number;\n  /** 默认当前刻度值 */\n  readonly defaultCurrentTick?: string;\n  /** 是否循环播放 */\n  readonly loop?: boolean;\n}\n\n/**\n * 参考示例\n * https://www.gapminder.org/tools/#$state$time$value=1870&delay:100;;&chart-type=bubbles\n */\nexport default class TimeLine extends BaseComponent<TimeLineCfg> {\n  /** 是否处于播放状态 */\n  public isPlay: boolean;\n  /** 当前处于刻度值 */\n  private currentTick: string;\n  /** 刻度位置预处理 */\n  private tickPosList: number[];\n\n  /** 组件 */\n  private timeLineButton: Button;\n  private timeLine: {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    shape: IShape;\n    textList: IShape[];\n  };\n  private timeSelect: IShape;\n  private timeSelectText: IShape;\n\n  /** 偏移量 */\n  private prevX: number;\n\n  /** 动画 id */\n  private playHandler: number;\n\n  constructor(cfg: TimeLineCfg) {\n    super(\n      deepMix(\n        {},\n        {\n          speed: 1,\n          loop: false,\n        },\n        cfg\n      )\n    );\n  }\n\n  protected renderInner() {\n    // 基类抽象方法，暂无实现\n  }\n\n  // 更新配置\n  public update(cfg: Partial<TimeLineCfg>) {\n    this.config = deepMix({}, this.config, cfg);\n\n    const { ticks } = this.config;\n    this.currentTick = ticks.includes(this.currentTick) ? this.currentTick : ticks[0];\n    this.renderPlayButton();\n    this.renderTimeLine();\n    this.renderTimeSelect(this.currentTick);\n    // 更新时需要触发一次，来过滤数据\n    this.emit(TIMELINE_UPDATE, this.currentTick);\n  }\n\n  public destroy() {\n    super.destroy();\n    this.timeLineButton.destroy();\n    this.timeLineButton.off();\n    this.timeSelect.off();\n    if (this.playHandler) {\n      window.cancelAnimationFrame(this.playHandler);\n    }\n  }\n\n  protected init() {\n    const { ticks, defaultCurrentTick } = this.config;\n\n    if (ticks && ticks.length) {\n      this.currentTick = this.config.ticks.includes(defaultCurrentTick) ? defaultCurrentTick : ticks[0];\n      this.renderPlayButton();\n      this.renderTimeLine();\n      this.renderTimeSelect(this.currentTick);\n      this.initEvent();\n    }\n  }\n\n  private renderPlayButton() {\n    const { height, x, y } = this.config;\n    const ratio = 0.8;\n    const r = (height / 2) * ratio;\n    if (this.timeLineButton) {\n      this.timeLineButton.update({\n        x: x + r,\n        y: y + r + (height * (1 - ratio)) / 2,\n        r,\n      });\n    } else {\n      this.timeLineButton = new Button({\n        container: this.group,\n        x: x + r,\n        y: y + r + (height * (1 - ratio)) / 2,\n        r,\n        isPlay: this.isPlay,\n      });\n    }\n  }\n\n  private getTimeLinePath() {\n    const { x, y, width, height } = this.timeLine;\n    const r = height / 2;\n\n    if (width > 0) {\n      return (\n        `M${x}, ${y}` +\n        `A${r},${r} 90 0,0 ${x},${y + height}` +\n        `L${x + width}, ${y + height}` +\n        `A${r},${r} 90 0,0 ${x + width},${y}` +\n        `L${x}, ${y}`\n      );\n    }\n\n    return [];\n  }\n\n  private renderTimeLine() {\n    const { width, height, ticks, x, y } = this.config;\n\n    if (!this.timeLine) {\n      this.timeLine = {} as any;\n    }\n\n    /** 默认高度是真实高度 15% */\n    this.timeLine.height = height * 0.15;\n    this.timeLine.x = x + height + PADDING_LEFT;\n    this.timeLine.y = y + (height / 2 - this.timeLine.height / 2);\n    this.timeLine.width = width - this.timeLine.x - PADDING_RIGHT;\n\n    if (this.timeLine && this.timeLine.shape) {\n      this.timeLine.shape.attr('path', this.getTimeLinePath());\n    } else {\n      this.timeLine.shape = this.group.addShape('path', {\n        attrs: {\n          path: this.getTimeLinePath(),\n          fill: '#607889',\n          opacity: 0.2,\n        },\n      });\n    }\n\n    const interval = this.timeLine.width / (ticks.length - 1);\n    this.tickPosList = [];\n    if (this.timeLine.textList && this.timeLine.textList.length) {\n      this.timeLine.textList.forEach((text) => {\n        text.destroy();\n      });\n    }\n    let lastX = -Infinity;\n    this.timeLine.textList = ticks.map((tick, index) => {\n      this.tickPosList.push(this.timeLine.x + index * interval);\n\n      const text = this.group.addShape('text', {\n        attrs: {\n          x: this.timeLine.x + index * interval,\n          y: this.timeLine.y + this.timeLine.height + 5,\n          text: tick,\n          textAlign: 'center',\n          textBaseline: 'top',\n          fill: '#607889',\n          opacity: 0.35,\n        },\n      });\n\n      const bbox = text.getBBox();\n\n      // 抽样，标签与标签间距不小于 10\n      if (bbox.minX > lastX) {\n        text.show();\n        lastX = bbox.minX + bbox.width + 10;\n      } else {\n        text.hide();\n      }\n\n      return text;\n    });\n  }\n\n  private renderTimeSelect(tickValue: string) {\n    const { ticks, height } = this.config;\n    const interval = this.timeLine.width / (ticks.length - 1);\n    const index = findIndex(ticks, (tick) => tick === tickValue);\n    const x = this.timeLine.x + index * interval;\n    const y = this.config.y + height / 2;\n    const r = height * 0.15;\n\n    if (this.timeSelect) {\n      this.timeSelect.attr('x', x);\n      this.timeSelect.attr('y', y);\n      this.timeSelect.attr('r', r);\n    } else {\n      this.timeSelect = this.group.addShape('circle', {\n        attrs: {\n          x,\n          y,\n          r,\n          fill: '#607889',\n        },\n      });\n    }\n\n    if (this.timeSelectText) {\n      this.timeSelectText.attr('x', x);\n      this.timeSelectText.attr('y', y - height * 0.15 - 14);\n      this.timeSelectText.attr('text', this.currentTick);\n    } else {\n      this.timeSelectText = this.group.addShape('text', {\n        attrs: {\n          x,\n          y: y - height * 0.15 - 14,\n          text: this.currentTick,\n          textAlign: 'center',\n          textBaseline: 'top',\n          fill: '#607889',\n        },\n      });\n    }\n  }\n\n  /** 输入当前圆点位置，输出离哪个 tick 的位置最近 */\n  private adjustTickIndex(timeSelectX: number) {\n    for (let i = 0; i < this.tickPosList.length - 1; i++) {\n      if (this.tickPosList[i] <= timeSelectX && timeSelectX <= this.tickPosList[i + 1]) {\n        return Math.abs(this.tickPosList[i] - timeSelectX) < Math.abs(timeSelectX - this.tickPosList[i + 1])\n          ? i\n          : i + 1;\n      }\n    }\n  }\n\n  /** 拖动或自动播放过程中，设置 TimeSelect 的位置 */\n  private setTimeSelectX(offsetX: number) {\n    let timeSelectX = this.timeSelect.attr('x') + offsetX;\n    // 防止左右溢出\n    if (timeSelectX < this.timeLine.x) {\n      timeSelectX = this.timeLine.x;\n    }\n    if (timeSelectX > this.timeLine.x + this.timeLine.width) {\n      timeSelectX = this.timeLine.x + this.timeLine.width;\n      // 正在播放场景\n      if (this.isPlay) {\n        // 如果是循环\n        if (this.config.loop) {\n          // 当前滑动点已经处于最后一个 tick 上，才能重置回去，继续循环\n          if (this.timeSelect.attr('x') === this.timeLine.x + this.timeLine.width) {\n            timeSelectX = this.timeLine.x;\n          }\n        } else {\n          this.isPlay = false;\n          this.changePlayStatus();\n        }\n      }\n    }\n    this.timeSelect.attr('x', timeSelectX);\n    this.timeSelectText.attr('x', timeSelectX);\n\n    const index = this.adjustTickIndex(timeSelectX);\n    if (this.currentTick !== this.config.ticks[index]) {\n      this.currentTick = this.config.ticks[index];\n      this.timeSelectText.attr('text', this.currentTick);\n      this.emit(TIMELINE_CHANGE, this.currentTick);\n    }\n\n    this.getCanvas().draw();\n  }\n\n  /** 同步圆点到 currnentTick */\n  private syncCurrnentTick() {\n    const { ticks } = this.config;\n    const interval = this.timeLine.width / (ticks.length - 1);\n    const index = findIndex(ticks, (tick) => tick === this.currentTick);\n    const x = this.timeLine.x + index * interval;\n    this.timeSelect.attr('x', x);\n    this.timeSelectText.attr('x', x);\n    this.getCanvas().draw();\n  }\n\n  private onTimeSelectMouseMove = (e: MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n\n    const x = get(e, 'touches.0.pageX', e.pageX);\n    const offsetX = x - this.prevX;\n\n    this.setTimeSelectX(offsetX);\n\n    this.prevX = x;\n  };\n\n  private onTimeSelectMouseUp = () => {\n    this.syncCurrnentTick();\n\n    this.emit(TIMELINE_END, null);\n\n    // 取消事件\n    const containerDOM = this.getCanvas().get('container');\n    if (containerDOM) {\n      containerDOM.removeEventListener('mousemove', this.onTimeSelectMouseMove);\n      containerDOM.removeEventListener('mouseup', this.onTimeSelectMouseUp);\n      // 防止滑动到 canvas 外部之后，状态丢失\n      containerDOM.removeEventListener('mouseleave', this.onTimeSelectMouseUp);\n      // 移动端事件\n      containerDOM.removeEventListener('touchmove', this.onTimeSelectMouseMove);\n      containerDOM.removeEventListener('touchend', this.onTimeSelectMouseUp);\n      containerDOM.removeEventListener('touchcancel', this.onTimeSelectMouseUp);\n    }\n  };\n\n  private onTimeSelectMouseDown = (e: Event) => {\n    // 取出原生事件\n    const event = e.originalEvent as MouseEvent;\n\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (this.isPlay === false) {\n      this.emit(TIMELINE_START, null);\n    } else {\n      // 取消播放状态\n      this.isPlay = false;\n      // 拖动过程中的播放暂停不需要调整 tick 位置，防止偏移\n      this.changePlayStatus(false);\n    }\n\n    this.prevX = get(event, 'touches.0.pageX', event.pageX);\n\n    // 开始滑动的时候，绑定 move 和 up 事件\n    const containerDOM = this.getCanvas().get('container');\n    containerDOM.addEventListener('mousemove', this.onTimeSelectMouseMove);\n    containerDOM.addEventListener('mouseup', this.onTimeSelectMouseUp);\n    containerDOM.addEventListener('mouseleave', this.onTimeSelectMouseUp);\n    // 移动端事件\n    containerDOM.addEventListener('touchmove', this.onTimeSelectMouseMove);\n    containerDOM.addEventListener('touchend', this.onTimeSelectMouseUp);\n    containerDOM.addEventListener('touchcancel', this.onTimeSelectMouseUp);\n  };\n\n  private startPlay() {\n    return window.requestAnimationFrame(() => {\n      const { speed, ticks } = this.config;\n      const { width } = this.timeLine;\n\n      const tickInterval = width / ticks.length;\n      const offsetX = tickInterval / ((speed * 1000) / 60);\n\n      this.setTimeSelectX(offsetX);\n\n      if (this.isPlay) {\n        this.playHandler = this.startPlay();\n      }\n    });\n  }\n\n  public changePlayStatus(isSync = true) {\n    this.timeLineButton.update({\n      isPlay: this.isPlay,\n    });\n    if (this.isPlay) {\n      // 开始播放\n      this.playHandler = this.startPlay();\n      this.emit(TIMELINE_START, null);\n    } else {\n      // 结束播放\n      if (this.playHandler) {\n        window.cancelAnimationFrame(this.playHandler);\n        if (isSync) {\n          this.syncCurrnentTick();\n          this.emit(TIMELINE_END, null);\n        }\n      }\n    }\n    this.getCanvas().draw();\n  }\n\n  private initEvent() {\n    /** 播放/暂停事件 */\n    this.timeLineButton.on('click', () => {\n      this.isPlay = !this.isPlay;\n      this.changePlayStatus();\n    });\n\n    /** 播放轴上圆点滑动事件 */\n    this.timeSelect.on('mousedown', (event) => {\n      this.onTimeSelectMouseDown(event);\n    });\n  }\n}\n","/**\n * @file 播放轴组件按钮\n * @author blackganglion\n */\n\nimport { IShape, IGroup } from '@antv/g-base';\nimport { deepMix } from '@antv/util';\nimport BaseComponent, { BaseComponentConfig } from '../base';\n\n/** 播放按钮配置 */\ninterface ButtonCfg extends BaseComponentConfig {\n  /** 按钮位置数据 */\n  readonly x: number;\n  readonly y: number;\n  readonly r: number;\n  readonly isPlay: boolean;\n}\n\nexport default class Button extends BaseComponent<ButtonCfg> {\n  /** 圆点 */\n  private circle: IShape;\n  /** 开始 marker */\n  private startMarker: IShape;\n  /** 暂停 marker */\n  private pauseGroupMarker: IGroup;\n  private pauseLeftMarker: IShape;\n  private pauseRightMarker: IShape;\n\n  constructor(cfg: ButtonCfg) {\n    super(deepMix({}, cfg));\n  }\n\n  protected renderInner() {\n    // 基类抽象方法，暂无实现\n  }\n\n  public update(cfg: Partial<ButtonCfg>) {\n    this.config = deepMix({}, this.config, cfg);\n    this.updateElement();\n    this.renderMarker();\n  }\n\n  protected init() {\n    this.initElement();\n    this.renderMarker();\n\n    this.group.on('click', () => {\n      this.emit('click');\n    });\n  }\n\n  public destroy() {\n    this.group.off();\n    super.destroy();\n  }\n\n  private initElement() {\n    this.circle = this.group.addShape('circle', {\n      attrs: {\n        x: this.config.x,\n        y: this.config.y,\n        r: this.config.r,\n        fill: '#607889',\n      },\n    });\n\n    this.startMarker = this.group.addShape('path', {\n      attrs: {\n        path: this.getStartMarkerPath(),\n        fill: '#ffffff',\n      },\n    });\n\n    this.pauseGroupMarker = this.group.addGroup();\n    const width = (1 / 4) * this.config.r;\n    const height = 0.5 * this.config.r * Math.sqrt(3);\n    this.pauseLeftMarker = this.pauseGroupMarker.addShape('rect', {\n      attrs: {\n        x: this.config.x - (1 / 4 + 1 / 8) * this.config.r,\n        y: this.config.y - height / 2,\n        width,\n        height,\n        fill: '#ffffff',\n      },\n    });\n    this.pauseRightMarker = this.pauseGroupMarker.addShape('rect', {\n      attrs: {\n        x: this.config.x + (1 / 8) * this.config.r,\n        y: this.config.y - height / 2,\n        width,\n        height,\n        fill: '#ffffff',\n      },\n    });\n\n    this.group.add(this.pauseGroupMarker);\n  }\n\n  private updateElement() {\n    this.circle.attr('x', this.config.x);\n    this.circle.attr('y', this.config.y);\n    this.circle.attr('r', this.config.r);\n\n    this.startMarker.attr('path', this.getStartMarkerPath());\n\n    const width = (1 / 4) * this.config.r;\n    const height = 0.5 * this.config.r * Math.sqrt(3);\n\n    this.pauseLeftMarker.attr('x', this.config.x - (1 / 4 + 1 / 8) * this.config.r);\n    this.pauseLeftMarker.attr('y', this.config.y - height / 2);\n    this.pauseLeftMarker.attr('width', width);\n    this.pauseLeftMarker.attr('height', height);\n\n    this.pauseRightMarker.attr('x', this.config.x + (1 / 8) * this.config.r);\n    this.pauseRightMarker.attr('y', this.config.y - height / 2);\n    this.pauseRightMarker.attr('width', width);\n    this.pauseRightMarker.attr('height', height);\n  }\n\n  private renderMarker() {\n    if (this.config.isPlay) {\n      this.startMarker.hide();\n      this.pauseGroupMarker.show();\n    } else {\n      this.startMarker.show();\n      this.pauseGroupMarker.hide();\n    }\n  }\n\n  /** 获取播放键 marker path */\n  private getStartMarkerPath() {\n    const sideLength = 0.5 * this.config.r * Math.sqrt(3);\n    return [\n      ['M', this.config.x - sideLength / Math.sqrt(3) / 2, this.config.y - sideLength / 2],\n      ['L', this.config.x + sideLength / Math.sqrt(3), this.config.y],\n      ['L', this.config.x - sideLength / Math.sqrt(3) / 2, this.config.y + sideLength / 2],\n    ];\n  }\n}\n","import { filter, each, isArray, clone, has } from '@antv/util';\nimport ViewLayer from '../view-layer';\nimport { MarginPadding } from '../../interface/types';\nimport BBox from '../../util/bbox';\nimport { getLegendShapes, getAxisComponents } from '../../util/common';\nimport { View, Axis } from '../../dependents';\n\ninterface ControllerConfig {\n  plot: ViewLayer;\n}\n\n/**\n * 处理图表padding的逻辑：\n * 注册参与padding的自定义组件\n */\n\nexport default class PaddingController {\n  private plot: ViewLayer;\n  private bleeding: number[];\n\n  private innerPaddingComponents: any[] = [];\n  private outerPaddingComponents: any[] = [];\n\n  constructor(cfg: ControllerConfig) {\n    this.plot = cfg.plot;\n  }\n\n  public registerPadding(component: any, type: 'outer' | 'inner' = 'outer', checkIfExist: boolean = false) {\n    if (type === 'inner') {\n      if (checkIfExist) {\n        if (!this.innerPaddingComponents.find((c) => c == component)) {\n          this.innerPaddingComponents.push(component);\n        }\n      } else {\n        this.innerPaddingComponents.push(component);\n      }\n    } else {\n      if (checkIfExist) {\n        if (!this.outerPaddingComponents.find((c) => c == component)) {\n          this.outerPaddingComponents.push(component);\n        }\n      } else {\n        this.outerPaddingComponents.push(component);\n      }\n    }\n  }\n\n  /**\n   * 清除已经注册的元素\n   */\n  public clear() {\n    this.innerPaddingComponents = [];\n    // 一些组件是在view渲染完成之后渲染初始化的\n    // TODO: afterRender的什么时候清除\n    this.outerPaddingComponents = filter(this.outerPaddingComponents, (component) => component.afterRender);\n  }\n\n  public clearOuterComponents() {\n    each(this.outerPaddingComponents, (component) => {\n      if (component.afterRender) {\n        component.destroy();\n      }\n    });\n    this.outerPaddingComponents = [];\n  }\n\n  public getPadding() {\n    const props = this.plot.options;\n    const padding = props.padding ? props.padding : this.plot.config.theme.padding;\n    if (padding === 'auto') {\n      return [0, 0, 0, 1];\n    }\n    return padding;\n  }\n\n  /** view层的padding计算 */\n  public processAutoPadding() {\n    const padding = this._getInnerAutoPadding();\n    this.plot.updateConfig({\n      padding,\n    });\n    this.plot.render();\n  }\n\n  public processOuterPadding() {\n    if (!this.plot.layerBBox) {\n      this.plot.layerBBox = new BBox(this.plot.x, this.plot.y, this.plot.width, this.plot.height);\n    }\n    let viewMinX = this.plot.layerBBox.minX;\n    let viewMaxX = this.plot.layerBBox.maxX;\n    let viewMinY = this.plot.layerBBox.minY;\n    let viewMaxY = this.plot.layerBBox.maxY;\n    each(this.outerPaddingComponents, (component) => {\n      const { position } = component;\n      const { minX, maxX, minY, maxY } = component.getBBox();\n      if (maxY >= viewMinY && maxY <= viewMaxY && position === 'top') {\n        viewMinY = maxY;\n      }\n      if (minY >= viewMinY && minY <= viewMaxY && position === 'bottom') {\n        viewMaxY = minY;\n      }\n      if (maxX > viewMinX && maxX <= viewMaxX && position === 'left') {\n        viewMinX = maxX;\n      }\n      if (minX >= viewMinX && maxX <= viewMaxX && position === 'right') {\n        viewMaxX = minX;\n      }\n    });\n    return new BBox(viewMinX, viewMinY, viewMaxX - viewMinX, viewMaxY - viewMinY);\n  }\n\n  private _getInnerAutoPadding() {\n    const props = this.plot.options;\n    const view = this.plot.view;\n    const viewRange: any = clone(view.viewBBox);\n    const { maxX, maxY } = viewRange;\n    const bleeding = this.plot.config.theme.bleeding;\n    if (isArray(bleeding)) {\n      each(bleeding, (it, index) => {\n        if (typeof bleeding[index] === 'function') {\n          bleeding[index] = bleeding[index](props);\n        }\n      });\n    }\n    this.plot.config.theme.legend.margin = bleeding;\n    this.bleeding = clone(bleeding);\n    // 参与auto padding的components: axis legend\n    let components_bbox;\n    if (has(this.plot.options, 'radius')) {\n      components_bbox = [new BBox(0, viewRange.minY, viewRange.width, viewRange.height)];\n    } else {\n      components_bbox = [new BBox(0, 0, viewRange.width, viewRange.height)];\n    }\n    this._getAxis(view, components_bbox);\n    let box = this._mergeBBox(components_bbox);\n    this._getLegend(view, components_bbox, viewRange, this.plot.options);\n    box = this._mergeBBox(components_bbox);\n    // 参与auto padding的自定义组件\n    const components = this.innerPaddingComponents;\n    each(components, (obj) => {\n      const component = obj;\n      const bbox = component.getBBox();\n      components_bbox.push(bbox);\n    });\n    box = this._mergeBBox(components_bbox);\n    const padding: MarginPadding = [\n      0 - box.minY + this.bleeding[0], // 上面超出的部分\n      box.maxX - maxX + this.bleeding[1], // 右边超出的部分\n      box.maxY - maxY + this.bleeding[2], // 下边超出的部分\n      0 - box.minX + this.bleeding[3],\n    ];\n    //this.adjustAxisPadding(view, padding);\n    // label、annotation等\n    const panelPadding = this._getPanel(view);\n    padding[0] += panelPadding[0];\n    padding[1] += panelPadding[1];\n    padding[2] += panelPadding[2];\n    padding[3] += panelPadding[3];\n\n    return padding;\n  }\n\n  private _getAxis(view: View, bboxes: BBox[]) {\n    const axes = getAxisComponents(view);\n    each(axes, (axis: Axis.Base) => {\n      const layoutBBox = axis.getLayoutBBox();\n      bboxes.push(BBox.fromBBoxObject(layoutBBox));\n    });\n  }\n\n  private _getLegend(view, bboxes, viewRange, options) {\n    const legendContainer = getLegendShapes(view)[0];\n    if (legendContainer) {\n      const bbox = legendContainer.getBBox();\n      if (options.legend) {\n        const position = options.legend.position.split('-')[0];\n        if (position === 'top') {\n          bboxes.push(new BBox(bbox.minX, -bbox.height, bbox.width, bbox.height));\n        } else if (position === 'bottom') {\n          bboxes.push(new BBox(bbox.minX, bbox.height + viewRange.height, bbox.width, bbox.height));\n        } else if (position === 'left') {\n          bboxes.push(new BBox(bbox.minX - bbox.width, bbox.minY, bbox.width, bbox.height));\n        } else {\n          bboxes.push(new BBox(viewRange.maxX, bbox.minY, bbox.width, bbox.height));\n        }\n      }\n    }\n  }\n\n  private _getPanel(view) {\n    const groups = [];\n    const geoms = view.geometries;\n    each(geoms, (geom) => {\n      if (geom.labelsContainer) {\n        groups.push(geom.labelsContainer);\n      }\n    });\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n    each(groups, (group) => {\n      const children = group.get('children');\n      children.forEach((child) => {\n        if (child.type === 'group' && child.get('children').length === 0) {\n          return;\n        }\n        const bbox = child.getBBox();\n        if (bbox.minX < minX) {\n          minX = bbox.minX;\n        }\n        if (bbox.maxX > maxX) {\n          maxX = bbox.maxX;\n        }\n        if (bbox.minY < minY) {\n          minY = bbox.minY;\n        }\n        if (bbox.maxY > maxY) {\n          maxY = bbox.maxY;\n        }\n      });\n    });\n    const panelRange = view.coordinateBBox;\n    //right\n    let rightDist = Math.max(maxX - parseFloat(panelRange.maxX), 0);\n    if (rightDist > 0) {\n      const ratio = panelRange.width / (panelRange.width + rightDist);\n      rightDist *= ratio;\n    }\n    //left\n    let leftDist = Math.max(parseFloat(panelRange.minX) - minX, 0);\n    if (leftDist > 0) {\n      const ratio = panelRange.width / (panelRange.width + leftDist);\n      leftDist *= ratio;\n    }\n    //top\n    let topDist = Math.max(parseFloat(panelRange.minY) - minY, 0);\n    if (topDist > 0) {\n      const ratio = panelRange.height / (panelRange.height + topDist);\n      topDist *= ratio;\n    }\n    //bottom\n    let bottomDist = Math.max(maxY - parseFloat(panelRange.maxY), 0);\n    if (bottomDist > 0) {\n      const ratio = panelRange.height / (panelRange.height + bottomDist);\n      bottomDist *= ratio;\n    }\n\n    return [topDist, rightDist, bottomDist, leftDist];\n  }\n\n  private _mergeBBox(bboxes) {\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n\n    each(bboxes, (bbox) => {\n      const box = bbox;\n      minX = Math.min(box.minX, minX);\n      maxX = Math.max(box.maxX, maxX);\n      minY = Math.min(box.minY, minY);\n      maxY = Math.max(box.maxY, maxY);\n    });\n\n    return { minX, maxX, minY, maxY };\n    // return new BBox(minX, minY, maxX - minX, maxY - minY);\n  }\n\n  private _adjustLegend(legend, view, box) {\n    const position = legend.get('position').split('-');\n    const container = legend.get('container');\n    const bbox = container.getBBox();\n    const { width, maxY, minY } = view.viewBBox;\n    if (position[0] === 'right') {\n      container.move(width, minY);\n    }\n    if (position[0] === 'left') {\n      container.move(box.minX - bbox.width, minY);\n    }\n    if (position[0] === 'top') {\n      container.move(0, box.minY - bbox.height);\n    }\n    if (position[0] === 'bottom') {\n      container.move(0, Math.max(maxY, box.maxY));\n    }\n  }\n\n  private _getLegendInnerPadding(legend) {\n    const innerPadding = this.plot.theme.legend.innerPadding;\n    const position = legend.get('position').split('-');\n    if (position[0] === 'top') {\n      return [innerPadding[0], 0, 0, 0];\n    }\n    if (position[0] === 'bottom') {\n      return [0, 0, innerPadding[2], 0];\n    }\n    if (position[0] === 'left') {\n      return [0, 0, 0, innerPadding[3]];\n    }\n    if (position[0] === 'right') {\n      return [0, innerPadding[1], 0, 0];\n    }\n  }\n\n  private _mergeBleeding(source) {\n    const target = this.bleeding;\n    if (source.length !== target.length) {\n      return;\n    }\n    for (let i = 0; i < source.length; i++) {\n      target[i] += source[i];\n    }\n  }\n\n  /* private adjustAxisPadding(view: View, padding: MarginPadding) {\n    // 3.6.x Axis组件的 autoRotate padding 修正\n    const xAxis = view.get('axisController').axes[0];\n    if (!xAxis || !xAxis.get('autoRotateLabel') || !xAxis.getOffsetByRotateAngle) {\n      return;\n    }\n    const labelRenderer = xAxis.get('labelRenderer');\n    const labels = labelRenderer.getLabels();\n    const curOffset = xAxis.getOffsetByRotateAngle(xAxis.get('autoRotateAngle'));\n    const curTotalWidth = Math.abs(xAxis.get('end').x - xAxis.get('start').x);\n    // 如果只有一项数据, 平均宽度 = 总宽\n    let curAvgWidth = curTotalWidth;\n    // 当多项数据时，根据 label 位置计算均宽\n    if (labels.length > 1) {\n      curAvgWidth = Math.abs(labels[1].attr('x') - labels[0].attr('x'));\n    }\n    const newTotalWidth = curTotalWidth - padding[1] - padding[3];\n    const newAvgWidth = (curAvgWidth * newTotalWidth) / curTotalWidth;\n    const newOffset = xAxis.getOffsetByRotateAngle(xAxis.getAutoRotateAngleByAvgWidth(newAvgWidth));\n\n    if (newOffset > curOffset) {\n      padding[2] += newOffset - curOffset;\n    }\n  }*/\n}\n","import { DESCRIPTION_BOTTOM_MARGIN, TOP_BLEEDING, BOTTOM_BLEEDING } from './default';\n\nexport const DEFAULT_DARK_THEME = {\n  backgroundStyle: {\n    fill: '#262626',\n  },\n  defaultColor: '#5B8FF9',\n  width: 400,\n  height: 400,\n  bleeding: [TOP_BLEEDING, 24, BOTTOM_BLEEDING, 24],\n  padding: 'auto',\n  title: {\n    padding: [24, 24, 24, 24],\n    fontFamily: 'PingFang SC',\n    fontSize: 18,\n    fontWeight: 'bold',\n    fill: 'rgba(255,255,255,0.65)',\n    stroke: 'rgba(0,0,0,0.95)',\n    textAlign: 'left',\n    textBaseline: 'top',\n    lineHeight: 20,\n    alignWithAxis: false,\n  },\n  description: {\n    padding: [10, 24, DESCRIPTION_BOTTOM_MARGIN, 24],\n    fontFamily: 'PingFang SC',\n    fontSize: 12,\n    fill: 'rgba(255, 255, 255, 0.65)',\n    stroke: 'rgba(0,0,0,0.95)',\n    textAlign: 'left',\n    textBaseline: 'top',\n    lineHeight: 16,\n    alignWithAxis: false,\n  },\n  axis: {\n    y: {\n      visible: true,\n      position: 'left',\n      autoRotateTitle: true,\n      grid: {\n        visible: true,\n        line: {\n          style: {\n            stroke: 'rgba(255, 255, 255, 0.15)',\n            lineWidth: 1,\n            lineDash: null,\n          },\n        },\n      },\n      line: {\n        visible: false,\n        style: {\n          stroke: 'rgba(255, 255, 255, 0.45)',\n          lineWidth: 1,\n        },\n      },\n      tickLine: {\n        visible: false,\n        style: {\n          stroke: 'rgba(255, 255, 255, 0.45)',\n          lineWidth: 0.5,\n          length: 4,\n        },\n      },\n      label: {\n        visible: true,\n        offset: 8,\n        autoRotate: false,\n        autoHide: true,\n        textStyle: {\n          fill: 'rgba(255, 255, 255, 0.45)',\n          fontSize: 12,\n        },\n      },\n      title: {\n        visible: false,\n        offset: 12,\n        style: {\n          fill: 'rgba(255, 255, 255, 0.65)',\n          fontSize: 12,\n          textBaseline: 'bottom',\n        },\n      },\n    },\n    x: {\n      visible: true,\n      position: 'bottom',\n      autoRotateTitle: false,\n      grid: {\n        visible: false,\n        line: {\n          style: {\n            stroke: 'rgba(255, 255, 255, 0.15)',\n            lineWidth: 1,\n            lineDash: null,\n          },\n        },\n      },\n      line: {\n        visible: false,\n        style: {\n          stroke: 'rgba(255, 255, 255, 0.45)',\n        },\n      },\n      tickLine: {\n        visible: true,\n        style: {\n          length: 4,\n          stroke: 'rgba(255, 255, 255, 0.45)',\n          lineWidth: 0.5,\n        },\n      },\n      label: {\n        visible: true,\n        textStyle: {\n          fill: 'rgba(255, 255, 255, 0.65)',\n          fontSize: 12,\n        },\n        offset: 16,\n        autoHide: true,\n        autoRotate: true,\n      },\n      title: {\n        visible: false,\n        offset: 12,\n        style: {\n          fill: 'rgba(255, 255, 255, 0.65)',\n          fontSize: 12,\n        },\n      },\n    },\n    circle: {\n      autoRotateTitle: true,\n      // gridType: 'line',\n      grid: {\n        style: {\n          lineDash: null,\n          lineWidth: 1,\n          stroke: '#E3E8EC',\n        },\n      },\n      line: {\n        style: {\n          lineWidth: 1,\n          stroke: '#BFBFBF',\n        },\n      },\n      tickLine: {\n        style: {\n          lineWidth: 1,\n          stroke: '#bdc8d3',\n          length: 4,\n          alignWithLabel: true,\n        },\n      },\n      label: {\n        offset: 16,\n        textStyle: {\n          fill: '#a0a4aa',\n          fontSize: 12,\n        },\n        autoRotate: true,\n        autoHide: true,\n      },\n      title: {\n        offset: 12,\n        style: { fill: '#767b84', fontSize: 12 },\n      },\n    },\n    radius: {\n      label: {\n        offset: 12,\n        textStyle: {\n          fill: '#a0a4aa',\n          fontSize: 12,\n        },\n      },\n    },\n  },\n  legend: {\n    flipPage: false,\n    position: 'bottom',\n    // 距离panelRange的距离\n    innerPadding: [16, 16, 16, 16],\n  },\n  label: {\n    offset: 12,\n    textStyle: {\n      fill: 'rgba(255, 255, 255, 0.65)',\n    },\n    style: {\n      fill: 'rgba(255, 255, 255, 0.65)',\n      lineWidth: 1,\n    },\n  },\n  components: {\n    tooltip: {\n      domStyles: {\n        'g2-tooltip': {\n          backgroundColor: 'rgba(33,33,33, 0.95)',\n          boxShadow: '0px 0px 8px rgba(0,0,0,0.65)',\n          color: 'rgba(255, 255, 255, 0.65)',\n        },\n      },\n    },\n  },\n};\n","import { each, set, has, isEmpty } from '@antv/util';\n\n/**\n * 所有的 plot theme object，每个图类型只会存在一个 theme\n */\nconst PLOT_THEME_MAP: Record<string, any> = {};\n\n/**\n * 将 主题 转换为 G2 主题配置\n * @param type plotType\n */\nfunction convertThemeToG2Theme(type: string, theme: any) {\n  let styleMapShape: object = {\n    lineStyle: 'line.line',\n    columnStyle: 'interval.rect',\n    pointStyle: 'point.circle', // point 可能是其他shape，如square等\n  };\n  const g2Theme = {};\n  if (type === 'area') {\n    styleMapShape = {\n      areaStyle: 'area.area',\n      lineStyle: 'area.line', // todo area-smooth怎么配置\n      pointStyle: 'point.circle',\n    };\n  }\n  const geometryTheme = {};\n  each(theme, (style, styleKey) => {\n    if (has(styleMapShape, styleKey)) {\n      const shapePath = styleMapShape[styleKey];\n      each(style, (v, k) => {\n        set(geometryTheme, `${shapePath}.${[k === 'normal' ? 'default' : k]}.style`, v);\n      });\n    } else {\n      set(g2Theme, styleKey, style);\n    }\n  });\n  if (!isEmpty(geometryTheme)) {\n    set(g2Theme, 'geometries', geometryTheme);\n  }\n  return g2Theme;\n}\n\n/**\n * 注册新的图表主题\n * @param type\n * @param theme\n */\nexport function registerTheme(type: string, theme: object) {\n  PLOT_THEME_MAP[type.toLowerCase()] = convertThemeToG2Theme(type, theme);\n}\n\n/**\n * 根据类型获取主题\n * @param type plotType, such as line, column, bar, pie, bullet, radar and so on\n */\nexport function getTheme(type: string): any {\n  return PLOT_THEME_MAP[type.toLowerCase()] || {};\n}\n","import { clone } from '@antv/util';\n\n/**\n * mutable 的方式修改 axis 配置\n * @param axis\n */\n// function convertToG2Axis(axis: any): void {\n//   if (axis.line && axis.line.style) {\n//     const lineStyle = axis.line.style;\n//     delete axis.line.style;\n//     mix(axis.line, lineStyle);\n//   }\n//   if (axis.tickLine) {\n//     const tickLineStyle = axis.tickLine.style;\n//     delete axis.tickLine.style;\n//     mix(axis.tickLine, tickLineStyle);\n//   }\n//   if (axis.grid) {\n//     const gridStyle = axis.grid.style;\n//     delete axis.grid.style;\n//     mix(axis.grid, gridStyle);\n//   }\n//   if (axis.label) {\n//     if (axis.label.style) {\n//       axis.label.textStyle = axis.label.style;\n//       delete axis.label.style;\n//     }\n//   }\n//   if (axis.title) {\n//     if (axis.title.style) {\n//       axis.title.textStyle = axis.title.style;\n//       delete axis.title.style;\n//     }\n//   }\n// }\n\n/**\n * 将图形主题转换成 g2 theme 格式\n * @param plotTheme\n */\nexport function convertToG2Theme(plotTheme: any): any {\n  const g2Theme = clone(plotTheme);\n  /** tempo: legend margin设置为0 */\n  if (!g2Theme.legend) {\n    g2Theme.legend = {};\n  }\n  return g2Theme;\n}\n","// 存储一些共用部分\nexport const DEFAULT_RESPONSIVE_THEME = {\n  axis: {\n    x: {\n      category: {\n        constraints: [{ name: 'elementDist' }],\n        rules: {\n          elementDist: [\n            {\n              name: 'textWrapper',\n              option: {\n                lineNumber: 2,\n              },\n            },\n            {\n              name: 'textRotation',\n              option: {\n                degree: 45,\n              },\n            },\n            {\n              name: 'textRotation',\n              option: {\n                degree: 90,\n              },\n            },\n            {\n              name: 'textAbbreviate',\n              option: {\n                abbreviateBy: 'end',\n              },\n            },\n            {\n              name: 'textHide',\n            },\n          ],\n        },\n      },\n      linear: {\n        constraints: [{ name: 'elementDist' }],\n        rules: {\n          elementDist: [\n            {\n              name: 'nodesResampling',\n              option: {\n                keep: ['end'],\n              },\n            },\n            {\n              name: 'textRotation',\n              option: {\n                degree: 45,\n              },\n            },\n            {\n              name: 'textRotation',\n              option: {\n                degree: 90,\n              },\n            },\n            {\n              name: 'robustAbbrevaite',\n              option: {\n                unit: 'thousand',\n                decimal: 1,\n                abbreviateBy: 'end',\n              },\n            },\n            {\n              name: 'textHide',\n            },\n          ],\n        },\n      },\n      dateTime: {\n        constraints: [{ name: 'elementDist' }],\n        rules: {\n          elementDist: [\n            {\n              name: 'datetimeStringAbbrevaite',\n            },\n            {\n              name: 'nodesResamplingByAbbrevate',\n              option: {\n                keep: ['end'],\n              },\n            },\n            {\n              name: 'textRotation',\n              option: {\n                degree: 45,\n              },\n            },\n            {\n              name: 'textRotation',\n              option: {\n                degree: 90,\n              },\n            },\n            {\n              name: 'nodesResampling',\n            },\n            {\n              name: 'nodesResampling',\n            },\n            {\n              name: 'textHide',\n            },\n          ],\n        },\n      },\n    },\n    y: {\n      linear: {\n        constraints: [{ name: 'elementDistVertical' }, { name: 'elementWidth' }],\n        rules: {\n          elementDistVertical: [{ name: 'nodesResampling' }, { name: 'textHide' }],\n          elementWidth: [{ name: 'digitsAbbreviate' }, { name: 'textHide' }],\n        },\n      }, // linear y axis\n      category: {\n        constraints: [{ name: 'elementDistVertical' }, { name: 'elementWidth' }],\n        rules: {\n          elementDistVertical: [{ name: 'nodesResampling' }, { name: 'textHide' }],\n          elementWidth: [\n            {\n              name: 'textAbbreviate',\n              option: {\n                abbreviateBy: 'end',\n              },\n            },\n            { name: 'textHide' },\n          ],\n        },\n      },\n    }, // categroy y axis， 条形图\n  },\n};\n","import { modifyCSS } from '@antv/dom-util';\nimport { Canvas, SVG, ICanvas } from '../../dependents';\nimport { debounce, get } from '@antv/util';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport { getGlobalTheme } from '../../theme/global';\nimport BasePlot from '../plot';\nimport ThemeController from './theme';\n\nexport interface CanvasControllerCfg {\n  readonly containerDOM: HTMLElement;\n  readonly plot: BasePlot;\n}\n\ntype ICanvasCtor = new (...cfg: any) => ICanvas;\n\n/**\n * Canvas controller\n * 1. create G.Canvas, destroy G.Canvas\n * 2. process auto fit container\n * 3. API for G.Canvas\n */\n\nexport default class CanvasController {\n  public width: number;\n  public height: number;\n  public canvas: ICanvas;\n\n  private containerDOM: HTMLElement;\n  private plot: BasePlot; // temp\n  private resizeObserver: any;\n\n  /**\n   * when the container size changed, trigger it after 300ms.\n   */\n  private onResize = debounce(() => {\n    if (this.plot.destroyed) {\n      return;\n    }\n    const { width, height } = this.getCanvasSize();\n    /** height measure不准导致重复 forceFit */\n    if (this.width === width && this.height === height) {\n      return;\n    }\n    // got new width, height, re-render the plot\n    this.width = width;\n    this.height = height;\n    this.plot.updateConfig({ width, height });\n    this.plot.render();\n  }, 300);\n\n  constructor(cfg: CanvasControllerCfg) {\n    const { containerDOM, plot } = cfg;\n    this.containerDOM = containerDOM;\n    this.plot = plot;\n    this.init();\n  }\n\n  /**\n   * get canvas size from props.\n   * @returns the width, height of canvas\n   */\n  public getCanvasSize() {\n    const theme = getGlobalTheme();\n    let width = this.plot.width ? this.plot.width : theme.width;\n    let height = this.plot.height ? this.plot.height : theme.height;\n\n    // if forceFit = true, then use the container's size as default.\n    if (this.plot.forceFit) {\n      width = this.containerDOM.offsetWidth ? this.containerDOM.offsetWidth : width;\n      height = this.containerDOM.offsetHeight ? this.containerDOM.offsetHeight : height;\n    }\n    return { width, height };\n  }\n\n  /**\n   * get the canvas dom\n   * @returns Canvas DOM\n   */\n  public getCanvasDOM() {\n    return this.canvas.get('container');\n  }\n\n  /**\n   * update the plot size\n   */\n  public updateCanvasSize() {\n    const { width, height } = this.getCanvasSize();\n\n    this.width = width;\n    this.height = height;\n    this.canvas.changeSize(width, height);\n    // this.plot.updateRange();\n  }\n\n  /**\n   * 根据主题调整canvas样式\n   */\n  public updateCanvasTheme() {\n    const { theme } = this.plot;\n    const globalTheme = ThemeController.getGlobalTheme(theme);\n    const fill: string = get(globalTheme, 'backgroundStyle.fill');\n    if (fill) {\n      this.updateCanvasStyle({\n        backgroundColor: fill,\n      });\n    }\n  }\n\n  /**\n   * update the canvas dom styles\n   * @param styles\n   */\n  private updateCanvasStyle(styles: Record<string, string | number>) {\n    // 修改容器的样式\n    modifyCSS(this.getCanvasDOM(), styles);\n\n    // 修改 canvas 的样式\n    modifyCSS(this.canvas.get('el'), {\n      display: 'inline-block',\n      verticalAlign: 'middle',\n    });\n  }\n\n  /**\n   * destroy the plot, remove resize event.\n   */\n  public destroy() {\n    // remove event\n    if (this.resizeObserver) {\n      this.resizeObserver.unobserve(this.containerDOM);\n      this.resizeObserver.disconnect();\n      this.containerDOM = null;\n    }\n    // remove G.Canvas\n    this.canvas.destroy();\n  }\n\n  /**\n   * when forceFit = true, then bind the event to listen the container size change\n   */\n  private bindForceFit() {\n    const { forceFit } = this.plot;\n\n    // use ResizeObserver to listen the container size change.\n    if (forceFit) {\n      this.resizeObserver = new ResizeObserver(this.onResize);\n      this.resizeObserver.observe(this.containerDOM);\n    }\n  }\n\n  /**\n   * init life circle\n   */\n  private init() {\n    this.initGCanvas();\n\n    this.bindForceFit();\n\n    // 追加容器的 css 样式，防止 tooltip 的位置参考点不正确\n    this.updateCanvasStyle({ position: 'relative' });\n  }\n\n  /**\n   * init G.Canvas instance\n   */\n  private initGCanvas() {\n    /** 创建canvas */\n    const { renderer = 'canvas', pixelRatio, localRefresh } = this.plot;\n    const { width, height } = this.getCanvasSize();\n\n    const G: ICanvasCtor = renderer === 'canvas' ? Canvas : SVG;\n\n    this.canvas = new G({\n      localRefresh,\n      container: this.containerDOM,\n      width,\n      height,\n      pixelRatio,\n    });\n    this.width = width;\n    this.height = height;\n    this.updateCanvasTheme();\n  }\n}\n","/**\r\n * A collection of shims that provide minimal functionality of the ES6 collections.\r\n *\r\n * These implementations are not meant to be used outside of the ResizeObserver\r\n * modules as they cover only a limited range of use cases.\r\n */\r\n/* eslint-disable require-jsdoc, valid-jsdoc */\r\nvar MapShim = (function () {\r\n    if (typeof Map !== 'undefined') {\r\n        return Map;\r\n    }\r\n    /**\r\n     * Returns index in provided array that matches the specified key.\r\n     *\r\n     * @param {Array<Array>} arr\r\n     * @param {*} key\r\n     * @returns {number}\r\n     */\r\n    function getIndex(arr, key) {\r\n        var result = -1;\r\n        arr.some(function (entry, index) {\r\n            if (entry[0] === key) {\r\n                result = index;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        return result;\r\n    }\r\n    return /** @class */ (function () {\r\n        function class_1() {\r\n            this.__entries__ = [];\r\n        }\r\n        Object.defineProperty(class_1.prototype, \"size\", {\r\n            /**\r\n             * @returns {boolean}\r\n             */\r\n            get: function () {\r\n                return this.__entries__.length;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        /**\r\n         * @param {*} key\r\n         * @returns {*}\r\n         */\r\n        class_1.prototype.get = function (key) {\r\n            var index = getIndex(this.__entries__, key);\r\n            var entry = this.__entries__[index];\r\n            return entry && entry[1];\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @param {*} value\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.set = function (key, value) {\r\n            var index = getIndex(this.__entries__, key);\r\n            if (~index) {\r\n                this.__entries__[index][1] = value;\r\n            }\r\n            else {\r\n                this.__entries__.push([key, value]);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.delete = function (key) {\r\n            var entries = this.__entries__;\r\n            var index = getIndex(entries, key);\r\n            if (~index) {\r\n                entries.splice(index, 1);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.has = function (key) {\r\n            return !!~getIndex(this.__entries__, key);\r\n        };\r\n        /**\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.clear = function () {\r\n            this.__entries__.splice(0);\r\n        };\r\n        /**\r\n         * @param {Function} callback\r\n         * @param {*} [ctx=null]\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.forEach = function (callback, ctx) {\r\n            if (ctx === void 0) { ctx = null; }\r\n            for (var _i = 0, _a = this.__entries__; _i < _a.length; _i++) {\r\n                var entry = _a[_i];\r\n                callback.call(ctx, entry[1], entry[0]);\r\n            }\r\n        };\r\n        return class_1;\r\n    }());\r\n})();\n\n/**\r\n * Detects whether window and document objects are available in current environment.\r\n */\r\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;\n\n// Returns global object of a current environment.\r\nvar global$1 = (function () {\r\n    if (typeof global !== 'undefined' && global.Math === Math) {\r\n        return global;\r\n    }\r\n    if (typeof self !== 'undefined' && self.Math === Math) {\r\n        return self;\r\n    }\r\n    if (typeof window !== 'undefined' && window.Math === Math) {\r\n        return window;\r\n    }\r\n    // eslint-disable-next-line no-new-func\r\n    return Function('return this')();\r\n})();\n\n/**\r\n * A shim for the requestAnimationFrame which falls back to the setTimeout if\r\n * first one is not supported.\r\n *\r\n * @returns {number} Requests' identifier.\r\n */\r\nvar requestAnimationFrame$1 = (function () {\r\n    if (typeof requestAnimationFrame === 'function') {\r\n        // It's required to use a bounded function because IE sometimes throws\r\n        // an \"Invalid calling object\" error if rAF is invoked without the global\r\n        // object on the left hand side.\r\n        return requestAnimationFrame.bind(global$1);\r\n    }\r\n    return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };\r\n})();\n\n// Defines minimum timeout before adding a trailing call.\r\nvar trailingTimeout = 2;\r\n/**\r\n * Creates a wrapper function which ensures that provided callback will be\r\n * invoked only once during the specified delay period.\r\n *\r\n * @param {Function} callback - Function to be invoked after the delay period.\r\n * @param {number} delay - Delay after which to invoke callback.\r\n * @returns {Function}\r\n */\r\nfunction throttle (callback, delay) {\r\n    var leadingCall = false, trailingCall = false, lastCallTime = 0;\r\n    /**\r\n     * Invokes the original callback function and schedules new invocation if\r\n     * the \"proxy\" was called during current request.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function resolvePending() {\r\n        if (leadingCall) {\r\n            leadingCall = false;\r\n            callback();\r\n        }\r\n        if (trailingCall) {\r\n            proxy();\r\n        }\r\n    }\r\n    /**\r\n     * Callback invoked after the specified delay. It will further postpone\r\n     * invocation of the original function delegating it to the\r\n     * requestAnimationFrame.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function timeoutCallback() {\r\n        requestAnimationFrame$1(resolvePending);\r\n    }\r\n    /**\r\n     * Schedules invocation of the original function.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function proxy() {\r\n        var timeStamp = Date.now();\r\n        if (leadingCall) {\r\n            // Reject immediately following calls.\r\n            if (timeStamp - lastCallTime < trailingTimeout) {\r\n                return;\r\n            }\r\n            // Schedule new call to be in invoked when the pending one is resolved.\r\n            // This is important for \"transitions\" which never actually start\r\n            // immediately so there is a chance that we might miss one if change\r\n            // happens amids the pending invocation.\r\n            trailingCall = true;\r\n        }\r\n        else {\r\n            leadingCall = true;\r\n            trailingCall = false;\r\n            setTimeout(timeoutCallback, delay);\r\n        }\r\n        lastCallTime = timeStamp;\r\n    }\r\n    return proxy;\r\n}\n\n// Minimum delay before invoking the update of observers.\r\nvar REFRESH_DELAY = 20;\r\n// A list of substrings of CSS properties used to find transition events that\r\n// might affect dimensions of observed elements.\r\nvar transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];\r\n// Check if MutationObserver is available.\r\nvar mutationObserverSupported = typeof MutationObserver !== 'undefined';\r\n/**\r\n * Singleton controller class which handles updates of ResizeObserver instances.\r\n */\r\nvar ResizeObserverController = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserverController.\r\n     *\r\n     * @private\r\n     */\r\n    function ResizeObserverController() {\r\n        /**\r\n         * Indicates whether DOM listeners have been added.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.connected_ = false;\r\n        /**\r\n         * Tells that controller has subscribed for Mutation Events.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.mutationEventsAdded_ = false;\r\n        /**\r\n         * Keeps reference to the instance of MutationObserver.\r\n         *\r\n         * @private {MutationObserver}\r\n         */\r\n        this.mutationsObserver_ = null;\r\n        /**\r\n         * A list of connected observers.\r\n         *\r\n         * @private {Array<ResizeObserverSPI>}\r\n         */\r\n        this.observers_ = [];\r\n        this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\r\n        this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\r\n    }\r\n    /**\r\n     * Adds observer to observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be added.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.addObserver = function (observer) {\r\n        if (!~this.observers_.indexOf(observer)) {\r\n            this.observers_.push(observer);\r\n        }\r\n        // Add listeners if they haven't been added yet.\r\n        if (!this.connected_) {\r\n            this.connect_();\r\n        }\r\n    };\r\n    /**\r\n     * Removes observer from observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be removed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.removeObserver = function (observer) {\r\n        var observers = this.observers_;\r\n        var index = observers.indexOf(observer);\r\n        // Remove observer if it's present in registry.\r\n        if (~index) {\r\n            observers.splice(index, 1);\r\n        }\r\n        // Remove listeners if controller has no connected observers.\r\n        if (!observers.length && this.connected_) {\r\n            this.disconnect_();\r\n        }\r\n    };\r\n    /**\r\n     * Invokes the update of observers. It will continue running updates insofar\r\n     * it detects changes.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.refresh = function () {\r\n        var changesDetected = this.updateObservers_();\r\n        // Continue running updates if changes have been detected as there might\r\n        // be future ones caused by CSS transitions.\r\n        if (changesDetected) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Updates every observer from observers list and notifies them of queued\r\n     * entries.\r\n     *\r\n     * @private\r\n     * @returns {boolean} Returns \"true\" if any observer has detected changes in\r\n     *      dimensions of it's elements.\r\n     */\r\n    ResizeObserverController.prototype.updateObservers_ = function () {\r\n        // Collect observers that have active observations.\r\n        var activeObservers = this.observers_.filter(function (observer) {\r\n            return observer.gatherActive(), observer.hasActive();\r\n        });\r\n        // Deliver notifications in a separate cycle in order to avoid any\r\n        // collisions between observers, e.g. when multiple instances of\r\n        // ResizeObserver are tracking the same element and the callback of one\r\n        // of them changes content dimensions of the observed target. Sometimes\r\n        // this may result in notifications being blocked for the rest of observers.\r\n        activeObservers.forEach(function (observer) { return observer.broadcastActive(); });\r\n        return activeObservers.length > 0;\r\n    };\r\n    /**\r\n     * Initializes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.connect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already added.\r\n        if (!isBrowser || this.connected_) {\r\n            return;\r\n        }\r\n        // Subscription to the \"Transitionend\" event is used as a workaround for\r\n        // delayed transitions. This way it's possible to capture at least the\r\n        // final state of an element.\r\n        document.addEventListener('transitionend', this.onTransitionEnd_);\r\n        window.addEventListener('resize', this.refresh);\r\n        if (mutationObserverSupported) {\r\n            this.mutationsObserver_ = new MutationObserver(this.refresh);\r\n            this.mutationsObserver_.observe(document, {\r\n                attributes: true,\r\n                childList: true,\r\n                characterData: true,\r\n                subtree: true\r\n            });\r\n        }\r\n        else {\r\n            document.addEventListener('DOMSubtreeModified', this.refresh);\r\n            this.mutationEventsAdded_ = true;\r\n        }\r\n        this.connected_ = true;\r\n    };\r\n    /**\r\n     * Removes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.disconnect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already removed.\r\n        if (!isBrowser || !this.connected_) {\r\n            return;\r\n        }\r\n        document.removeEventListener('transitionend', this.onTransitionEnd_);\r\n        window.removeEventListener('resize', this.refresh);\r\n        if (this.mutationsObserver_) {\r\n            this.mutationsObserver_.disconnect();\r\n        }\r\n        if (this.mutationEventsAdded_) {\r\n            document.removeEventListener('DOMSubtreeModified', this.refresh);\r\n        }\r\n        this.mutationsObserver_ = null;\r\n        this.mutationEventsAdded_ = false;\r\n        this.connected_ = false;\r\n    };\r\n    /**\r\n     * \"Transitionend\" event handler.\r\n     *\r\n     * @private\r\n     * @param {TransitionEvent} event\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.onTransitionEnd_ = function (_a) {\r\n        var _b = _a.propertyName, propertyName = _b === void 0 ? '' : _b;\r\n        // Detect whether transition may affect dimensions of an element.\r\n        var isReflowProperty = transitionKeys.some(function (key) {\r\n            return !!~propertyName.indexOf(key);\r\n        });\r\n        if (isReflowProperty) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Returns instance of the ResizeObserverController.\r\n     *\r\n     * @returns {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.getInstance = function () {\r\n        if (!this.instance_) {\r\n            this.instance_ = new ResizeObserverController();\r\n        }\r\n        return this.instance_;\r\n    };\r\n    /**\r\n     * Holds reference to the controller's instance.\r\n     *\r\n     * @private {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.instance_ = null;\r\n    return ResizeObserverController;\r\n}());\n\n/**\r\n * Defines non-writable/enumerable properties of the provided target object.\r\n *\r\n * @param {Object} target - Object for which to define properties.\r\n * @param {Object} props - Properties to be defined.\r\n * @returns {Object} Target object.\r\n */\r\nvar defineConfigurable = (function (target, props) {\r\n    for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\r\n        var key = _a[_i];\r\n        Object.defineProperty(target, key, {\r\n            value: props[key],\r\n            enumerable: false,\r\n            writable: false,\r\n            configurable: true\r\n        });\r\n    }\r\n    return target;\r\n});\n\n/**\r\n * Returns the global object associated with provided element.\r\n *\r\n * @param {Object} target\r\n * @returns {Object}\r\n */\r\nvar getWindowOf = (function (target) {\r\n    // Assume that the element is an instance of Node, which means that it\r\n    // has the \"ownerDocument\" property from which we can retrieve a\r\n    // corresponding global object.\r\n    var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\r\n    // Return the local global object if it's not possible extract one from\r\n    // provided element.\r\n    return ownerGlobal || global$1;\r\n});\n\n// Placeholder of an empty content rectangle.\r\nvar emptyRect = createRectInit(0, 0, 0, 0);\r\n/**\r\n * Converts provided string to a number.\r\n *\r\n * @param {number|string} value\r\n * @returns {number}\r\n */\r\nfunction toFloat(value) {\r\n    return parseFloat(value) || 0;\r\n}\r\n/**\r\n * Extracts borders size from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @param {...string} positions - Borders positions (top, right, ...)\r\n * @returns {number}\r\n */\r\nfunction getBordersSize(styles) {\r\n    var positions = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        positions[_i - 1] = arguments[_i];\r\n    }\r\n    return positions.reduce(function (size, position) {\r\n        var value = styles['border-' + position + '-width'];\r\n        return size + toFloat(value);\r\n    }, 0);\r\n}\r\n/**\r\n * Extracts paddings sizes from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @returns {Object} Paddings box.\r\n */\r\nfunction getPaddings(styles) {\r\n    var positions = ['top', 'right', 'bottom', 'left'];\r\n    var paddings = {};\r\n    for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {\r\n        var position = positions_1[_i];\r\n        var value = styles['padding-' + position];\r\n        paddings[position] = toFloat(value);\r\n    }\r\n    return paddings;\r\n}\r\n/**\r\n * Calculates content rectangle of provided SVG element.\r\n *\r\n * @param {SVGGraphicsElement} target - Element content rectangle of which needs\r\n *      to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getSVGContentRect(target) {\r\n    var bbox = target.getBBox();\r\n    return createRectInit(0, 0, bbox.width, bbox.height);\r\n}\r\n/**\r\n * Calculates content rectangle of provided HTMLElement.\r\n *\r\n * @param {HTMLElement} target - Element for which to calculate the content rectangle.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getHTMLElementContentRect(target) {\r\n    // Client width & height properties can't be\r\n    // used exclusively as they provide rounded values.\r\n    var clientWidth = target.clientWidth, clientHeight = target.clientHeight;\r\n    // By this condition we can catch all non-replaced inline, hidden and\r\n    // detached elements. Though elements with width & height properties less\r\n    // than 0.5 will be discarded as well.\r\n    //\r\n    // Without it we would need to implement separate methods for each of\r\n    // those cases and it's not possible to perform a precise and performance\r\n    // effective test for hidden elements. E.g. even jQuery's ':visible' filter\r\n    // gives wrong results for elements with width & height less than 0.5.\r\n    if (!clientWidth && !clientHeight) {\r\n        return emptyRect;\r\n    }\r\n    var styles = getWindowOf(target).getComputedStyle(target);\r\n    var paddings = getPaddings(styles);\r\n    var horizPad = paddings.left + paddings.right;\r\n    var vertPad = paddings.top + paddings.bottom;\r\n    // Computed styles of width & height are being used because they are the\r\n    // only dimensions available to JS that contain non-rounded values. It could\r\n    // be possible to utilize the getBoundingClientRect if only it's data wasn't\r\n    // affected by CSS transformations let alone paddings, borders and scroll bars.\r\n    var width = toFloat(styles.width), height = toFloat(styles.height);\r\n    // Width & height include paddings and borders when the 'border-box' box\r\n    // model is applied (except for IE).\r\n    if (styles.boxSizing === 'border-box') {\r\n        // Following conditions are required to handle Internet Explorer which\r\n        // doesn't include paddings and borders to computed CSS dimensions.\r\n        //\r\n        // We can say that if CSS dimensions + paddings are equal to the \"client\"\r\n        // properties then it's either IE, and thus we don't need to subtract\r\n        // anything, or an element merely doesn't have paddings/borders styles.\r\n        if (Math.round(width + horizPad) !== clientWidth) {\r\n            width -= getBordersSize(styles, 'left', 'right') + horizPad;\r\n        }\r\n        if (Math.round(height + vertPad) !== clientHeight) {\r\n            height -= getBordersSize(styles, 'top', 'bottom') + vertPad;\r\n        }\r\n    }\r\n    // Following steps can't be applied to the document's root element as its\r\n    // client[Width/Height] properties represent viewport area of the window.\r\n    // Besides, it's as well not necessary as the <html> itself neither has\r\n    // rendered scroll bars nor it can be clipped.\r\n    if (!isDocumentElement(target)) {\r\n        // In some browsers (only in Firefox, actually) CSS width & height\r\n        // include scroll bars size which can be removed at this step as scroll\r\n        // bars are the only difference between rounded dimensions + paddings\r\n        // and \"client\" properties, though that is not always true in Chrome.\r\n        var vertScrollbar = Math.round(width + horizPad) - clientWidth;\r\n        var horizScrollbar = Math.round(height + vertPad) - clientHeight;\r\n        // Chrome has a rather weird rounding of \"client\" properties.\r\n        // E.g. for an element with content width of 314.2px it sometimes gives\r\n        // the client width of 315px and for the width of 314.7px it may give\r\n        // 314px. And it doesn't happen all the time. So just ignore this delta\r\n        // as a non-relevant.\r\n        if (Math.abs(vertScrollbar) !== 1) {\r\n            width -= vertScrollbar;\r\n        }\r\n        if (Math.abs(horizScrollbar) !== 1) {\r\n            height -= horizScrollbar;\r\n        }\r\n    }\r\n    return createRectInit(paddings.left, paddings.top, width, height);\r\n}\r\n/**\r\n * Checks whether provided element is an instance of the SVGGraphicsElement.\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nvar isSVGGraphicsElement = (function () {\r\n    // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement\r\n    // interface.\r\n    if (typeof SVGGraphicsElement !== 'undefined') {\r\n        return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };\r\n    }\r\n    // If it's so, then check that element is at least an instance of the\r\n    // SVGElement and that it has the \"getBBox\" method.\r\n    // eslint-disable-next-line no-extra-parens\r\n    return function (target) { return (target instanceof getWindowOf(target).SVGElement &&\r\n        typeof target.getBBox === 'function'); };\r\n})();\r\n/**\r\n * Checks whether provided element is a document element (<html>).\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nfunction isDocumentElement(target) {\r\n    return target === getWindowOf(target).document.documentElement;\r\n}\r\n/**\r\n * Calculates an appropriate content rectangle for provided html or svg element.\r\n *\r\n * @param {Element} target - Element content rectangle of which needs to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getContentRect(target) {\r\n    if (!isBrowser) {\r\n        return emptyRect;\r\n    }\r\n    if (isSVGGraphicsElement(target)) {\r\n        return getSVGContentRect(target);\r\n    }\r\n    return getHTMLElementContentRect(target);\r\n}\r\n/**\r\n * Creates rectangle with an interface of the DOMRectReadOnly.\r\n * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly\r\n *\r\n * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.\r\n * @returns {DOMRectReadOnly}\r\n */\r\nfunction createReadOnlyRect(_a) {\r\n    var x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n    // If DOMRectReadOnly is available use it as a prototype for the rectangle.\r\n    var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;\r\n    var rect = Object.create(Constr.prototype);\r\n    // Rectangle's properties are not writable and non-enumerable.\r\n    defineConfigurable(rect, {\r\n        x: x, y: y, width: width, height: height,\r\n        top: y,\r\n        right: x + width,\r\n        bottom: height + y,\r\n        left: x\r\n    });\r\n    return rect;\r\n}\r\n/**\r\n * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.\r\n * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit\r\n *\r\n * @param {number} x - X coordinate.\r\n * @param {number} y - Y coordinate.\r\n * @param {number} width - Rectangle's width.\r\n * @param {number} height - Rectangle's height.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction createRectInit(x, y, width, height) {\r\n    return { x: x, y: y, width: width, height: height };\r\n}\n\n/**\r\n * Class that is responsible for computations of the content rectangle of\r\n * provided DOM element and for keeping track of it's changes.\r\n */\r\nvar ResizeObservation = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObservation.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     */\r\n    function ResizeObservation(target) {\r\n        /**\r\n         * Broadcasted width of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastWidth = 0;\r\n        /**\r\n         * Broadcasted height of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastHeight = 0;\r\n        /**\r\n         * Reference to the last observed content rectangle.\r\n         *\r\n         * @private {DOMRectInit}\r\n         */\r\n        this.contentRect_ = createRectInit(0, 0, 0, 0);\r\n        this.target = target;\r\n    }\r\n    /**\r\n     * Updates content rectangle and tells whether it's width or height properties\r\n     * have changed since the last broadcast.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObservation.prototype.isActive = function () {\r\n        var rect = getContentRect(this.target);\r\n        this.contentRect_ = rect;\r\n        return (rect.width !== this.broadcastWidth ||\r\n            rect.height !== this.broadcastHeight);\r\n    };\r\n    /**\r\n     * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data\r\n     * from the corresponding properties of the last observed content rectangle.\r\n     *\r\n     * @returns {DOMRectInit} Last observed content rectangle.\r\n     */\r\n    ResizeObservation.prototype.broadcastRect = function () {\r\n        var rect = this.contentRect_;\r\n        this.broadcastWidth = rect.width;\r\n        this.broadcastHeight = rect.height;\r\n        return rect;\r\n    };\r\n    return ResizeObservation;\r\n}());\n\nvar ResizeObserverEntry = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObserverEntry.\r\n     *\r\n     * @param {Element} target - Element that is being observed.\r\n     * @param {DOMRectInit} rectInit - Data of the element's content rectangle.\r\n     */\r\n    function ResizeObserverEntry(target, rectInit) {\r\n        var contentRect = createReadOnlyRect(rectInit);\r\n        // According to the specification following properties are not writable\r\n        // and are also not enumerable in the native implementation.\r\n        //\r\n        // Property accessors are not being used as they'd require to define a\r\n        // private WeakMap storage which may cause memory leaks in browsers that\r\n        // don't support this type of collections.\r\n        defineConfigurable(this, { target: target, contentRect: contentRect });\r\n    }\r\n    return ResizeObserverEntry;\r\n}());\n\nvar ResizeObserverSPI = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback function that is invoked\r\n     *      when one of the observed elements changes it's content dimensions.\r\n     * @param {ResizeObserverController} controller - Controller instance which\r\n     *      is responsible for the updates of observer.\r\n     * @param {ResizeObserver} callbackCtx - Reference to the public\r\n     *      ResizeObserver instance which will be passed to callback function.\r\n     */\r\n    function ResizeObserverSPI(callback, controller, callbackCtx) {\r\n        /**\r\n         * Collection of resize observations that have detected changes in dimensions\r\n         * of elements.\r\n         *\r\n         * @private {Array<ResizeObservation>}\r\n         */\r\n        this.activeObservations_ = [];\r\n        /**\r\n         * Registry of the ResizeObservation instances.\r\n         *\r\n         * @private {Map<Element, ResizeObservation>}\r\n         */\r\n        this.observations_ = new MapShim();\r\n        if (typeof callback !== 'function') {\r\n            throw new TypeError('The callback provided as parameter 1 is not a function.');\r\n        }\r\n        this.callback_ = callback;\r\n        this.controller_ = controller;\r\n        this.callbackCtx_ = callbackCtx;\r\n    }\r\n    /**\r\n     * Starts observing provided element.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.observe = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is already being observed.\r\n        if (observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.set(target, new ResizeObservation(target));\r\n        this.controller_.addObserver(this);\r\n        // Force the update of observations.\r\n        this.controller_.refresh();\r\n    };\r\n    /**\r\n     * Stops observing provided element.\r\n     *\r\n     * @param {Element} target - Element to stop observing.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.unobserve = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is not being observed.\r\n        if (!observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.delete(target);\r\n        if (!observations.size) {\r\n            this.controller_.removeObserver(this);\r\n        }\r\n    };\r\n    /**\r\n     * Stops observing all elements.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.disconnect = function () {\r\n        this.clearActive();\r\n        this.observations_.clear();\r\n        this.controller_.removeObserver(this);\r\n    };\r\n    /**\r\n     * Collects observation instances the associated element of which has changed\r\n     * it's content rectangle.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.gatherActive = function () {\r\n        var _this = this;\r\n        this.clearActive();\r\n        this.observations_.forEach(function (observation) {\r\n            if (observation.isActive()) {\r\n                _this.activeObservations_.push(observation);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Invokes initial callback function with a list of ResizeObserverEntry\r\n     * instances collected from active resize observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.broadcastActive = function () {\r\n        // Do nothing if observer doesn't have active observations.\r\n        if (!this.hasActive()) {\r\n            return;\r\n        }\r\n        var ctx = this.callbackCtx_;\r\n        // Create ResizeObserverEntry instance for every active observation.\r\n        var entries = this.activeObservations_.map(function (observation) {\r\n            return new ResizeObserverEntry(observation.target, observation.broadcastRect());\r\n        });\r\n        this.callback_.call(ctx, entries, ctx);\r\n        this.clearActive();\r\n    };\r\n    /**\r\n     * Clears the collection of active observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.clearActive = function () {\r\n        this.activeObservations_.splice(0);\r\n    };\r\n    /**\r\n     * Tells whether observer has active observations.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObserverSPI.prototype.hasActive = function () {\r\n        return this.activeObservations_.length > 0;\r\n    };\r\n    return ResizeObserverSPI;\r\n}());\n\n// Registry of internal observers. If WeakMap is not available use current shim\r\n// for the Map collection as it has all required methods and because WeakMap\r\n// can't be fully polyfilled anyway.\r\nvar observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();\r\n/**\r\n * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation\r\n * exposing only those methods and properties that are defined in the spec.\r\n */\r\nvar ResizeObserver = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback that is invoked when\r\n     *      dimensions of the observed elements change.\r\n     */\r\n    function ResizeObserver(callback) {\r\n        if (!(this instanceof ResizeObserver)) {\r\n            throw new TypeError('Cannot call a class as a function.');\r\n        }\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        var controller = ResizeObserverController.getInstance();\r\n        var observer = new ResizeObserverSPI(callback, controller, this);\r\n        observers.set(this, observer);\r\n    }\r\n    return ResizeObserver;\r\n}());\r\n// Expose public methods of ResizeObserver.\r\n[\r\n    'observe',\r\n    'unobserve',\r\n    'disconnect'\r\n].forEach(function (method) {\r\n    ResizeObserver.prototype[method] = function () {\r\n        var _a;\r\n        return (_a = observers.get(this))[method].apply(_a, arguments);\r\n    };\r\n});\n\nvar index = (function () {\r\n    // Export existing implementation if available.\r\n    if (typeof global$1.ResizeObserver !== 'undefined') {\r\n        return global$1.ResizeObserver;\r\n    }\r\n    return ResizeObserver;\r\n})();\n\nexport default index;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import { wrapBehavior, each, contains } from '@antv/util';\nimport { ICanvas, IShape } from '../../dependents';\nimport BBox from '../../util/bbox';\nimport BasePlot from '../plot';\nimport Layer from '../layer';\nimport { Point } from '../../interface/config';\n\ninterface ControllerConfig {\n  canvas: ICanvas;\n  plot: BasePlot;\n}\n\ninterface IEventHandler {\n  target: ICanvas;\n  type: string;\n  handler: Function;\n}\n\ninterface EventObj {\n  x: number;\n  y: number;\n  clientX: number;\n  clientY: number;\n  target: any;\n  data: any;\n  gEvent: object;\n}\n\nfunction isSameShape(shape1: IShape, shape2: IShape) {\n  if (shape1 && shape2 && shape1 === shape2) {\n    return true;\n  }\n  return false;\n}\n\nfunction isPointInBBox(point: Point, bbox: BBox) {\n  if (point.x >= bbox.minX && point.x <= bbox.maxX && point.y >= bbox.minY && point.y <= bbox.maxY) {\n    return true;\n  }\n  return false;\n}\n\nexport default class EventController {\n  private plot: BasePlot;\n  private canvas: ICanvas;\n  private eventHandlers: IEventHandler[];\n  private lastShape: any;\n\n  constructor(cfg: ControllerConfig) {\n    this.plot = cfg.plot;\n    this.canvas = cfg.canvas;\n    this.eventHandlers = [];\n  }\n\n  public bindEvents() {\n    this.addEvent(this.canvas, 'mousedown', wrapBehavior(this, 'onEvents'));\n    this.addEvent(this.canvas, 'mousemove', wrapBehavior(this, 'onMove'));\n    this.addEvent(this.canvas, 'mouseup', wrapBehavior(this, 'onEvents'));\n    this.addEvent(this.canvas, 'click', wrapBehavior(this, 'onEvents'));\n    this.addEvent(this.canvas, 'dblclick', wrapBehavior(this, 'onEvents'));\n    this.addEvent(this.canvas, 'contextmenu', wrapBehavior(this, 'onEvents'));\n    this.addEvent(this.canvas, 'wheel', wrapBehavior(this, 'onEvents'));\n  }\n\n  public clearEvents() {\n    const eventHandlers = this.eventHandlers;\n    each(eventHandlers, (eh) => {\n      eh.target.off(eh.type, eh.handler);\n    });\n  }\n\n  private addEvent(target: ICanvas, eventType: string, handler: Function) {\n    target.on(eventType, handler);\n    this.eventHandlers.push({ target, type: eventType, handler });\n  }\n\n  private onEvents(ev) {\n    const eventObj = this.getEventObj(ev);\n    const target: any = ev.target;\n    // 判断是否拾取到view以外的shape\n    if (!this.isShapeInView(target) && target.name) {\n      this.plot.emit(`${target.name}:${ev.type}`, ev);\n    }\n    this.plot.emit(`${ev.type}`, eventObj);\n    // layer事件\n    const layers = this.plot.getLayers();\n    if (layers.length > 0) {\n      this.onLayerEvent(layers, eventObj, ev.type);\n    }\n  }\n\n  private onMove(ev) {\n    const target: any = ev.target;\n    const eventObj = this.getEventObj(ev);\n    // shape的mouseenter, mouseleave和mousemove事件\n    if (!this.isShapeInView(target) && target.name) {\n      this.plot.emit(`${target.name}:${ev.type}`, eventObj);\n      // mouseleave & mouseenter\n      if (this.lastShape && !isSameShape(target, this.lastShape)) {\n        if (this.lastShape) {\n          this.plot.emit(`${this.lastShape.name}:mouseleave`, eventObj);\n        }\n        this.plot.emit(`${target.name}:mouseenter`, eventObj);\n      }\n      this.lastShape = target;\n    }\n    this.plot.emit('mousemove', eventObj);\n    // layer事件\n    const layers = this.plot.getLayers();\n    if (layers.length > 0) {\n      this.onLayerEvent(layers, eventObj, 'mousemove');\n    }\n  }\n\n  private isShapeInView(shape: IShape) {\n    const groupName = ['frontgroundGroup', 'backgroundGroup', 'panelGroup'];\n    let parent = shape.get('parent');\n    while (parent) {\n      const parentName = parent.get('name');\n      if (parentName && contains(groupName, parentName)) {\n        return true;\n      }\n      parent = parent.get('parent');\n    }\n    return false;\n  }\n\n  private getEventObj(ev) {\n    const obj = {\n      clientX: ev.clientX,\n      clientY: ev.clientY,\n      x: ev.x,\n      y: ev.y,\n      plot: this.plot,\n      data: ev.data ? ev.data.data : null,\n      canvas: this.canvas,\n      target: ev.target,\n      gEvent: ev, // g事件的event\n    };\n    return obj;\n  }\n\n  private onLayerEvent(layers: Layer[], eventObj: EventObj, eventName: string) {\n    each(layers, (layer) => {\n      const bbox = layer.getGlobalBBox();\n      if (isPointInBBox({ x: eventObj.x, y: eventObj.y }, bbox)) {\n        layer.emit(`${eventName}`, eventObj);\n        const subLayers = layer.layers;\n        if (subLayers.length > 0) {\n          this.onLayerEvent(subLayers, eventObj, eventName);\n        }\n      }\n    });\n  }\n}\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport LineLayer, { LineViewConfig } from './layer';\n\nexport interface LineConfig extends LineViewConfig, PlotConfig {}\n\nexport default class Line extends BasePlot<LineConfig> {\n  public static getDefaultOptions: typeof LineLayer.getDefaultOptions = LineLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'line';\n    super.createLayers(layerProps);\n  }\n}\n","import AreaParser from './main';\nimport MiniAreaParser from './mini';\n\nexport default {\n  main: AreaParser,\n  mini: MiniAreaParser,\n};\n","/** 简化折线点 */\nimport { registerShape } from '../../dependents';\nimport { deepMix, each } from '@antv/util';\nimport { lineSimplification } from '../../util/math';\nimport { getSplinePath } from '../../util/path';\nimport AreaParser from './main';\nimport { getGlobalTheme } from '../../theme';\n\nregisterShape('area', 'miniArea', {\n  draw(cfg, container) {\n    const opacity = cfg.style ? cfg.style.opacity : null;\n    const path = getPath(cfg, this, false);\n    const style = deepMix(\n      {},\n      {\n        lineJoin: 'round',\n        lineCap: 'round',\n      },\n      cfg.style\n    );\n    const shape = container.addShape('path', {\n      attrs: {\n        path,\n        fill: parseGradient(cfg.color || getGlobalTheme().defaultColor),\n        opacity: opacity || 0.4,\n      },\n      style,\n    });\n    return shape;\n  },\n});\n\nregisterShape('area', 'miniAreaSmooth', {\n  draw(cfg, container) {\n    const opacity = cfg.style ? cfg.style.opacity : null;\n    const path = getPath(cfg, this, true);\n    const shape = container.addShape('path', {\n      attrs: {\n        path,\n        fill: parseGradient(cfg.color || getGlobalTheme().defaultColor),\n        opacity: opacity || 0.5,\n      },\n    });\n    return shape;\n  },\n});\n\nfunction getPath(cfg, shape, isSmooth) {\n  const constraint = [\n    [0, 0],\n    [1, 1],\n  ];\n  let topLinePoints = [];\n  let bottomLinePoints = [];\n  each(cfg.points, (point) => {\n    topLinePoints.push(point[1]);\n    bottomLinePoints.push(point[0]);\n  });\n  bottomLinePoints = shape.parsePoints(bottomLinePoints.reverse());\n  topLinePoints = lineSimplification(shape.parsePoints(topLinePoints));\n  const topPath = isSmooth ? getSplinePath(topLinePoints, false, constraint) : getStraightPath(topLinePoints);\n  const bottomPath = getStraightPath(bottomLinePoints);\n  bottomPath[0][0] = 'L';\n  const path = topPath.concat(bottomPath);\n\n  return path;\n}\n\nfunction getStraightPath(points) {\n  const path = [];\n  for (let i = 0; i < points.length; i++) {\n    const p = points[i];\n    const flag = i === 0 ? 'M' : 'L';\n    path.push([flag, p.x, p.y]);\n  }\n  return path;\n}\n\nfunction parseGradient(color) {\n  return `l(90) 0:${color} 1:#ffffff`;\n}\n\nexport default class MiniAreaParser extends AreaParser {\n  public init() {\n    super.init();\n    this.parseShape();\n  }\n\n  private parseShape() {\n    const props = this.plot.options;\n    if (props.smooth) {\n      this.config.shape = { values: ['miniAreaSmooth'] };\n    } else {\n      this.config.shape = { values: ['miniArea'] };\n    }\n  }\n}\n","import IntervalParser from './main';\n\nexport default {\n  main: IntervalParser,\n};\n","import { isString, isFunction, isArray, isObject, get } from '@antv/util';\nimport ElementParser from '../base';\n\nconst COLOR_MAPPER = ['colorField', 'stackField', 'groupField'];\n\nexport default class IntervalParser extends ElementParser {\n  public init() {\n    this.type = 'interval';\n    super.init();\n    const props = this.plot.options;\n    if (this._needParserColor()) {\n      this.parseColor();\n    }\n    if (!this.config.color) {\n      this.config.color = { values: ['#5b8ff9'] };\n    }\n    const sizeProps = this._getSizeProps(props);\n    if (sizeProps) {\n      this.parseSize(sizeProps);\n    }\n    const styleProps = this._getStyleProps(props);\n    if (styleProps) {\n      this.parseStyle(styleProps);\n    }\n  }\n\n  public parseColor() {\n    const props = this.plot.options;\n    const colorField = this._getColorMappingField(props);\n    const config: any = {};\n    if (colorField) {\n      config.fields = colorField;\n    }\n    if (props.color) {\n      if (isString(props.color)) {\n        config.values = [props.color];\n      } else if (isFunction(props.color)) {\n        config.callback = props.color;\n      } else if (isArray(props.color)) {\n        config.values = props.color;\n      } else if (isObject(props.color)) {\n        config.fields = colorField;\n        config.callback = (d) => {\n          return props.color[d];\n        };\n      }\n    }\n    this.config.color = config;\n  }\n\n  public parseSize(sizeProps) {\n    const props = this.plot.options;\n    const config: any = {};\n    if (isFunction(props[sizeProps])) {\n      config.fields = [this.config.position.fields];\n      config.callback = props[sizeProps];\n    } else {\n      config.values = [props[sizeProps]];\n    }\n    this.config.size = config;\n  }\n\n  public parseStyle(styleProps) {\n    const props = this.plot.options;\n    const color = this.config.color;\n    const style = this.plot.options[styleProps];\n    const config: any = {};\n    if (isFunction(style)) {\n      config.fields = color?.fields || [props.xField, props.yField];\n      config.callback = style;\n    } else {\n      config.cfg = style;\n    }\n\n    this.config.style = config;\n  }\n\n  private _getSizeProps(props) {\n    const sizeMapper = ['columnSize', 'barSize'];\n    for (const m of sizeMapper) {\n      if (get(props, m)) {\n        return m;\n      }\n    }\n  }\n\n  private _getStyleProps(props) {\n    const sizeMapper = ['columnStyle', 'barStyle', 'pieStyle', 'ringStyle'];\n    for (const m of sizeMapper) {\n      if (get(props, m)) {\n        return m;\n      }\n    }\n  }\n\n  private _getColorMappingField(props) {\n    /**如果有colorFiled或stackField配置项(后者为堆叠interval)，则参与colorMapping的字段为对应值\n     * 如没有特别设定，则一般是callback中的传参，传入位置映射的字段\n     */\n    for (const m of COLOR_MAPPER) {\n      if (get(props, m)) {\n        return [props[m]];\n      }\n    }\n  }\n\n  private _needParserColor() {\n    const props = this.plot.options;\n    if (props.color) {\n      return true;\n    }\n    for (const m of COLOR_MAPPER) {\n      if (props[m]) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n","import GuideLineParser from './guide';\nimport LineParser from './main';\nimport MiniLineParser from './mini';\n\nexport default {\n  main: LineParser,\n  guide: GuideLineParser,\n  mini: MiniLineParser,\n};\n","import { LooseObject } from '../../dependents';\nimport { isString, isFunction, isArray, get } from '@antv/util';\nimport LineParser from './main';\n\nexport default class GuideLineParser extends LineParser {\n  public init() {\n    const props = this.plot.options;\n    if (!props.xField || !props.yField) {\n      return;\n    }\n    this.config = {\n      type: 'line',\n      position: {\n        fields: [props.xField, props.yField],\n      },\n      tooltip: false,\n    };\n\n    if (this._getColorMappingField() || this._needParseAttribute('color')) {\n      this.parseColor();\n    }\n    if (this._needParseAttribute('size')) {\n      this.parseSize();\n    }\n    if (props.line.style) {\n      this.parseStyle();\n    }\n\n    if (props.smooth) {\n      this.config.shape = { values: ['smooth'] };\n    }\n  }\n\n  public parseSize() {\n    const props = this.plot.options;\n    const config: LooseObject = {};\n    if (props.line.size) {\n      config.values = [props.line.size];\n    } else {\n      // line作为辅助图形没有在style里指定size属性的情况下，设置默认值\n      config.values = [2];\n    }\n    this.config.size = config;\n  }\n\n  public parseColor() {\n    const props = this.plot.options;\n    const config: LooseObject = {};\n    let colorField = this._getColorMappingField();\n    if (colorField) {\n      config.fields = colorField;\n    }\n    if (props.line.color) {\n      config.values = [props.line.color];\n    } else {\n      if (!colorField) {\n        colorField = this.config.position.fields;\n      }\n      // line作为辅助图形没有在style里指定color属性的情况下，默认接受主体图形的透传\n      if (isString(props.color)) {\n        config.values = [props.color];\n      } else if (isFunction(props.color)) {\n        config.fields = colorField;\n        config.callback = props.color;\n      } else if (isArray(props.color)) {\n        config.fields = colorField;\n        config.values = props.color;\n      }\n    }\n\n    this.config.color = config;\n  }\n\n  public parseStyle() {\n    const props = this.plot.options;\n    const styleProps = props.line.style;\n    const config: LooseObject = {};\n    if (isFunction(styleProps)) {\n      config.fields = this.config.position.fields;\n      config.callback = styleProps;\n    } else {\n      config.cfg = styleProps;\n    }\n    this.config.style = config;\n  }\n\n  private _needParseAttribute(attr) {\n    const props = this.plot.options;\n    if (props[attr]) {\n      return true;\n    } else if (props.line[attr]) {\n      return true;\n    }\n    return false;\n  }\n\n  private _getColorMappingField() {\n    const props = this.plot.options;\n    const colorMapper = ['stackField', 'seriesField'];\n    for (const m of colorMapper) {\n      if (get(props, m)) {\n        return [props[m]];\n      }\n    }\n  }\n}\n","import CircleParser from './circle';\nimport GuidePointParser from './guide';\n\nexport default {\n  guide: GuidePointParser,\n  circle: CircleParser,\n};\n","import { LooseObject } from '../../dependents';\nimport { isArray, isFunction, isString, isEmpty, isNil } from '@antv/util';\nimport ElementParser from '../base';\n\nexport default class CircleParser extends ElementParser {\n  public init() {\n    const props = this.plot.options;\n    this.style = props.pointStyle;\n    if (!props.xField || !props.yField) {\n      return;\n    }\n    this.config = {\n      type: 'point',\n      position: {\n        fields: [props.xField, props.yField],\n      },\n    };\n    this.parseColor();\n    this.parseSize();\n\n    if (props.shape) {\n      this.parseShape(props.shape);\n    }\n    if (props.pointStyle) {\n      this.parseStyle();\n    }\n  }\n\n  public parseColor() {\n    const props = this.plot.options;\n    const config: LooseObject = {};\n    const colorField = props.colorField;\n    if (colorField) {\n      config.fields = isArray(colorField) ? colorField : [colorField];\n    }\n    if (props.color) {\n      this._parseColor(props, config);\n    }\n    if (!isEmpty(config)) {\n      this.config.color = config;\n    }\n  }\n\n  public parseSize() {\n    const props = this.plot.options;\n    const config: LooseObject = {};\n    if (props.sizeField) {\n      config.fields = [props.sizeField];\n    }\n    if (props.pointSize) {\n      config.values = isArray(props.pointSize) ? props.pointSize : [props.pointSize];\n    }\n    this.config.size = config;\n  }\n\n  public parseShape(shapeName) {\n    this.config.shape = shapeName;\n  }\n\n  public parseStyle() {\n    const props = this.plot.options;\n    const styleProps = props.pointStyle;\n    const config = {\n      fields: null,\n      callback: null,\n      cfg: null,\n    };\n    const { xField, yField, colorField } = props;\n    if (isFunction(styleProps)) {\n      if (colorField) {\n        config.fields = isArray(colorField)\n          ? [xField, yField, colorField].concat(colorField)\n          : [xField, yField, colorField];\n      } else {\n        config.fields = [xField, yField];\n      }\n      config.callback = styleProps;\n    } else {\n      config.cfg = styleProps;\n      // opacity 与 fillOpacity 兼容\n      if (!isNil(styleProps.opacity)) {\n        config.cfg.fillOpacity = styleProps.opacity;\n      }\n    }\n    this.config.style = config;\n  }\n\n  private _parseColor(props, config) {\n    if (isString(props.color)) {\n      config.values = [props.color];\n    } else if (isFunction(props.color)) {\n      config.callback = props.color;\n    } else if (isArray(props.color)) {\n      config.values = props.color;\n    }\n  }\n}\n","import { LooseObject } from '../../dependents';\nimport { each, uniq, keys, isFunction, isString, isArray, has, get, isObject } from '@antv/util';\nimport ElementParser from '../base';\n\nfunction getValuesByField(field, data) {\n  const values = [];\n  each(data, (d) => {\n    const v = d[field];\n    values.push(v);\n  });\n  return uniq(values);\n}\n\nconst COLOR_MAPPER = ['seriesField', 'stackField'];\n\ntype PointShape = string | { fields?: []; callback: () => string };\n\nexport default class GuidePointParser extends ElementParser {\n  public init() {\n    const props = this.plot.options;\n    this.style = props.point.style;\n    if (!props.xField || !props.yField) {\n      return;\n    }\n    this.config = {\n      type: 'point',\n      position: {\n        fields: [props.xField, props.yField],\n      },\n      tooltip: false,\n    };\n    // if (this._needParseAttribute('color')) {\n    this.parseColor();\n    // }\n    if (this._needParseAttribute('size')) {\n      this.parseSize();\n    }\n    if (props.point.shape) {\n      this.parseShape(props.point.shape);\n    }\n    if (props.point.style) {\n      this.parseStyle();\n    }\n  }\n\n  public parseColor() {\n    const props = this.plot.options;\n    const config: LooseObject = {};\n    const mappingField = this._getColorMappingField(props);\n    if (mappingField) {\n      this._parseColorByField(props, config, mappingField);\n    } else {\n      if (props.point && props.point.color) {\n        config.values = [props.point.color];\n      } else if (props.color) {\n        this._parseColor(props, config);\n      } else {\n        const theme = this.plot.getTheme();\n        config.values = [theme.defaultColor];\n      }\n    }\n    if (keys(config).length > 0) {\n      this.config.color = config;\n    }\n  }\n\n  public parseSize() {\n    const props = this.plot.options;\n    const config: LooseObject = {};\n    config.values = [props.point.size];\n    this.config.size = config;\n  }\n\n  public parseShape(shapeCfg: PointShape) {\n    const config: LooseObject = {};\n    if (isString(shapeCfg)) {\n      config.values = [shapeCfg];\n    } else if (isObject(shapeCfg)) {\n      config.fields = shapeCfg.fields;\n      config.callback = shapeCfg.callback;\n    }\n    this.config.shape = config;\n  }\n\n  public parseStyle() {\n    const props = this.plot.options;\n    const styleProps = props.point && props.point.style;\n    const config = {\n      fields: null,\n      callback: null,\n      cfg: null,\n    };\n    const field = this._getColorMappingField(props);\n    if (isFunction(styleProps) && field) {\n      config.fields = [field];\n      config.callback = styleProps;\n    } else {\n      config.cfg = styleProps;\n    }\n    this.config.style = config;\n  }\n\n  private _parseColorByField(props, config, field) {\n    config.fields = [field];\n    if (props.point.color) {\n      const count = getValuesByField(field, props.data).length;\n      const values = [];\n      for (let i = 0; i < count; i++) {\n        values.push(props.point.color);\n      }\n      config.values = values;\n    } else if (props.color) {\n      this._parseColor(props, config);\n    }\n  }\n\n  private _parseColor(props, config) {\n    if (isString(props.color)) {\n      config.values = [props.color];\n    } else if (isFunction(props.color)) {\n      config.callback = props.color;\n    } else if (isArray(props.color)) {\n      config.values = props.color;\n    }\n  }\n\n  private _needParseAttribute(attr) {\n    const props = this.plot.options;\n    const condition = props.point && has(props.point, attr);\n    return condition;\n    // const condition = !this.style || this.style[attr];\n    // return condition;\n  }\n\n  private _getColorMappingField(props) {\n    for (const m of COLOR_MAPPER) {\n      if (get(props, m)) {\n        return [props[m]];\n      }\n    }\n  }\n}\n","import { registerAnimation } from '../../../dependents';\nimport { clone, isFunction, isNil, deepMix } from '@antv/util';\n\nlet plotInfo;\n\nfunction clipingWithData(shape, animateCfg) {\n  const defaultCfg = {\n    easing: 'easeLinear',\n    duration: 10000,\n  };\n  const animationConfig = deepMix({}, animateCfg, defaultCfg);\n  const geometry = shape.get('element').geometry;\n  geometry.labelsContainer.set('visible', false);\n  /** 动画初始状态 */\n  const index = shape.get('index');\n  const coord = geometry.coordinate;\n  const scales = geometry.scales;\n  const yScale = scales[plotInfo.options.yField];\n  const shapeData = clone(shape.get('origin'));\n  setClip(shape, coord);\n  const clip = shape.get('clipShape');\n  const parent = shape.get('parent');\n  const offsetX = 12;\n  let title = null;\n  const { seriesField } = plotInfo.options;\n  if (seriesField) {\n    title = parent.addShape('text', {\n      attrs: {\n        x: coord.start.x + offsetX,\n        y: 0,\n        text: shapeData.data[0][seriesField],\n        fill: shape.attr('stroke'),\n        fontSize: 12,\n        textAlign: 'start',\n        textBaseline: 'middle',\n      },\n    });\n  }\n  const offsetY = title ? 16 : 0;\n  const marker = parent.addShape('text', {\n    attrs: {\n      x: coord.start.x + offsetX,\n      y: offsetY,\n      text: `test${index}`,\n      fill: shape.attr('stroke'),\n      fontSize: 12,\n      textAlign: 'start',\n      textBaseline: 'middle',\n    },\n  });\n  /** 动画执行之后 */\n  animationConfig.callback = () => {\n    if (shape && !shape.get('destroyed')) {\n      shape.setClip(null);\n      clip.remove();\n      marker.animate(\n        {\n          opacity: 0,\n        },\n        300,\n        () => {\n          marker.remove();\n          if (!isNil(title)) {\n            title.remove();\n          }\n          const labelsContainer = geometry.labelsContainer;\n          if (!labelsContainer.get('visible')) {\n            labelsContainer.set('visible', true);\n          }\n        }\n      );\n    }\n  };\n  /** 执行动画 */\n  /** 准备动画参数 */\n  let delay = animationConfig.delay;\n  if (isFunction(delay)) {\n    delay = animationConfig.delay(index);\n  }\n  let easing = animationConfig.easing;\n  if (isFunction(easing)) {\n    easing = animationConfig.easing(index);\n  }\n  /** 动起来 */\n  clip.animate(\n    {\n      width: coord.getWidth(),\n    },\n    animationConfig.duration,\n    easing,\n    animationConfig.callback,\n    delay\n  );\n  (animationConfig.onFrame = (ratio) => {\n    const position = getPositionByRatio(ratio, shapeData, coord);\n    if (!position) return;\n\n    marker.attr('x', position[0] + offsetX);\n    marker.attr('y', position[1] + offsetY);\n    let yText = getDataByPosition(yScale, position[1], coord);\n\n    // use formatter\n    if (yScale.formatter) {\n      yText = yScale.formatter(yText);\n    }\n\n    marker.attr('text', yText);\n  }),\n    marker.animate(animationConfig.onFrame, {\n      duration: animationConfig.duration,\n      easing,\n      callback: animationConfig.callback,\n      delay,\n    });\n  if (title) {\n    title.animate(\n      {\n        onFrame: (ratio) => {\n          const position = getPositionByRatio(ratio, shapeData, coord);\n          if (!position) return;\n          title.attr('x', position[0] + offsetX);\n          title.attr('y', position[1]);\n        },\n      },\n      animationConfig.duration,\n      easing,\n      animationConfig.callback,\n      delay\n    );\n  }\n}\n\nfunction setClip(shape, coord) {\n  const { start, end, height } = coord;\n  shape.setClip({\n    type: 'rect',\n    attrs: {\n      x: start.x,\n      y: end.y,\n      width: 0,\n      height,\n    },\n  });\n}\n\nfunction getPositionByRatio(ratio, dataPoints, coord) {\n  const { points } = dataPoints;\n  const currentX = coord.start.x + coord.getWidth() * ratio;\n  for (let i = 0; i < points.length - 1; i++) {\n    const current = points[i];\n    const next = points[i + 1];\n    if (currentX >= current.x && currentX <= next.x) {\n      const m = (next.y - current.y) / (next.x - current.x); // 斜率\n      const y = current.y + m * (currentX - current.x);\n      return [currentX, y];\n    }\n  }\n}\n\nfunction getDataByPosition(scale, y, coord) {\n  const yRatio = (y - coord.start.y) / (coord.end.y - coord.start.y);\n  return scale.invert(yRatio).toFixed(2);\n}\n\nexport function getPlotOption(option) {\n  plotInfo = option;\n}\n\nregisterAnimation('clipingWithData', clipingWithData);\n","import responsiveAxis from './axis';\nimport responsivePointLabel from './label';\n\nconst preRenderResponsive = [];\n\nconst afterRenderResponsive = [\n  { name: 'responsiveAxis', method: responsiveAxis },\n  { name: 'responsivePointLabel', method: responsivePointLabel },\n];\n\nexport default {\n  preRender: preRenderResponsive,\n  afterRender: afterRenderResponsive,\n};\n","import ApplyResponsiveAxis from '../../../util/responsive/apply/axis';\nimport LineLayer from '../layer';\n\nexport default function responsiveAxis(layer: LineLayer) {\n  const responsiveTheme = layer.getResponsiveTheme();\n  const canvas = layer.canvas;\n  // x-axis\n  new ApplyResponsiveAxis({\n    plot: layer,\n    responsiveTheme,\n    dim: 'x',\n  });\n  // y-axis\n  new ApplyResponsiveAxis({\n    plot: layer,\n    responsiveTheme,\n    dim: 'y',\n  });\n\n  canvas.draw();\n}\n","export interface ColumnWidthCfg {\n  ratio?: number;\n}\n\nfunction columnWidth(node, region, cfg: ColumnWidthCfg = { ratio: 0.6 }) {\n  return region.width * cfg.ratio;\n}\n\nexport default {\n  type: 'padding',\n  usage: 'assign',\n  expression: columnWidth,\n};\n","import * as MathUtil from '../../math';\n\nfunction elementCollision(a, b) {\n  const polygonA = [a.topLeft, a.topRight, a.bottomRight, a.bottomLeft]; // 顶点顺时针\n  const polygonB = [b.topLeft, b.topRight, b.bottomRight, b.bottomLeft];\n  const dist = MathUtil.minDistBetweenConvexPolygon(polygonA, polygonB);\n  return Math.round(dist) >= 2;\n}\n\nexport default {\n  type: 'group',\n  usage: 'compare',\n  expression: elementCollision,\n};\n","import * as MathUtil from '../../math';\n\nexport interface ElementDistCfg {\n  value: number;\n}\n\nfunction elementDist(a, b, cfg: ElementDistCfg = { value: 4 }) {\n  const polygonA = [a.topLeft, a.topRight, a.bottomRight, a.bottomLeft]; // 顶点顺时针\n  const polygonB = [b.topLeft, b.topRight, b.bottomRight, b.bottomLeft];\n  const dist = MathUtil.minDistBetweenConvexPolygon(polygonA, polygonB);\n  return Math.round(dist) >= cfg.value;\n}\n\nexport default {\n  type: 'chain',\n  usage: 'compare',\n  expression: elementDist,\n};\n","export interface ElementDistVerticalCfg {\n  value: number;\n}\n\nfunction elementDistVertical(a, b, cfg: ElementDistVerticalCfg = { value: 5 }) {\n  const dist = Math.abs(a.bottom - b.top);\n  return Math.round(dist) >= cfg.value;\n}\n\nexport default {\n  type: 'chain',\n  usage: 'compare',\n  expression: elementDistVertical,\n};\n","export interface ElementWidthCfg {\n  ratio: number;\n}\n\nfunction elementWidth(node, region, cfg: ElementWidthCfg = { ratio: 0.15 }) {\n  return node.width < region.width * cfg.ratio;\n}\n\nexport default {\n  type: 'padding',\n  usage: 'compare',\n  expression: elementWidth,\n};\n","function minRingThickness(node, region) {\n  const minThicknessPixel = 2;\n  const minThickness = region.coord.radius / minThicknessPixel;\n  return Math.min(minThickness, node.value);\n}\n\nexport default {\n  type: 'padding',\n  usage: 'assign',\n  expression: minRingThickness,\n};\n","export interface RingThicknessCfg {\n  ratio: number;\n}\n\nfunction ringThickness(node, region, cfg: RingThicknessCfg = { ratio: 0.8 }) {\n  return region.radius * cfg.ratio;\n}\n\nexport default {\n  type: 'padding',\n  usage: 'assign',\n  expression: ringThickness,\n};\n","import { IShape } from '@antv/g-base';\nimport { dotProduct2D } from '../../math';\n\n/** 图形在水平或垂直方向抖开 */\nexport default function nodeJitter(shape: IShape, index, cfg) {\n  const nodes = cfg.nodes.nodes;\n  if (index === nodes.length - 1) {\n    return;\n  }\n  const current = nodes[index];\n  const next = nodes[index + 1];\n  const { dir } = alignDirection(current, next);\n  const startPoint = shape.get('startPoint');\n  if (dir === 'x') {\n    shape.attr('y', startPoint.y + 20);\n  }\n}\n\nfunction alignDirection(nodeA, nodeB) {\n  let dir;\n  /** 计算两个node 中心点向量的角度 */\n  const vector = { x: nodeB.centerX - nodeA.centerX, y: nodeB.centerY - nodeA.centerY };\n  const mag = Math.sqrt(vector.x * vector.x + vector.y * vector.y);\n  const vector_horizontal = { x: 10, y: 0 }; // 水平方向向量\n  /*tslint:disable*/\n  const mag_horizontal = Math.sqrt(\n    vector_horizontal.x * vector_horizontal.x + vector_horizontal.y * vector_horizontal.y\n  );\n  const dot = dotProduct2D(vector, vector_horizontal);\n  let angle = ((dot / (mag * mag_horizontal)) * 180) / Math.PI;\n  if (angle < 0) angle = 360 - angle;\n  angle = adjustAngle(angle); // 将角度从0-360转换到0-90\n\n  /** 计算两个node在x、y两个方向上的距离 */\n  const distX = Math.abs(nodeA.centerX - nodeB.centerX);\n  const distY = Math.abs(nodeA.centerY - nodeB.centerY);\n\n  if (angle > 45) {\n    dir = 'x';\n  } else if (angle < 45) {\n    dir = 'y';\n  }\n\n  return { dir, distX, distY };\n}\n\nfunction adjustAngle(angle) {\n  if (angle > 90 && angle <= 180) {\n    return 180 - angle;\n  }\n  if (angle > 180 && angle < 270) {\n    return angle - 180;\n  }\n  return 360 - angle;\n}\n","import { IShape } from '@antv/g-base';\nimport { each } from '@antv/util';\nimport { isNodeOverlap } from './clear-overlapping';\n\n/** 图形向上抖开并拉线 */\n// todo 允许设置offset和拉线样式\nexport default function nodeJitterUpward(shape: IShape, option, index, cfg) {\n  const nodes = cfg.nodes.nodes;\n  if (index === 0) {\n    return;\n  }\n  const current = nodes[index];\n  const previous = nodes[index - 1];\n  if (isNodeOverlap(current, previous)) {\n    const element = cfg.plot.plot.get('elements')[0];\n    const y = previous.top - current.height / 2;\n    const offset = 10;\n    if (y - offset > cfg.region.top) {\n      // 取到label对应的element-shape\n      const origin = current.shape.get('origin');\n      const shapeId = element.getShapeId(origin);\n      const shapes = element.getShapes();\n      const shapeBbox = getShapeById(shapeId, shapes).get('box');\n      const originX = shapeBbox.left + shapeBbox.width / 2;\n      const originY = shapeBbox.top;\n      // 拉线\n      const container = element.get('labelController').labelsContainer;\n      const labelLine = container.addShape('path', {\n        attrs: {\n          path: [\n            ['M', originX, originY],\n            ['L', current.shape.attr('x'), y],\n          ],\n          stroke: '#ccc',\n          lineWidth: 1,\n        },\n      });\n      /** 保存labelLine和label初始位置信息 */\n      const origin_position = { x: shape.attr('x'), y: shape.attr('y') };\n      // 更新标签位置，同步更新node\n      current.shape.attr('y', y - offset);\n      nodes[index] = cfg.nodes.measure(current.shape);\n      nodes[index].line = labelLine;\n      nodes[index].origin_position = origin_position;\n    }\n  }\n}\n\nfunction getShapeById(shapeId, shapes) {\n  let target;\n  each(shapes, (shape) => {\n    const s = shape as IShape;\n    const id = s.get('id');\n    if (id === shapeId) {\n      target = s;\n    }\n  });\n  return target;\n}\n","import { isKeep, NodesResamplingCfg } from './nodes-resampling';\nimport textHide from './text-hide';\n\nexport default function nodesResamplingByAbbrevate(shape, option: NodesResamplingCfg, index, cfg) {\n  const nodes = cfg.nodes.nodes;\n  if (isKeep(option.keep, index, nodes)) {\n    return;\n  }\n  {\n    const currentText = shape.attr('text');\n    const originText = shape.get('delegateObject').item.name;\n    if (currentText !== originText) {\n      textHide(shape);\n    }\n  }\n}\n","import { IShape } from '@antv/g-base';\nimport { deepMix } from '@antv/util';\nimport textHide from './text-hide';\n\n/** 根据变化进行抽样，保留变化较大的点，类似于点简化算法 */\nexport default function nodesResamplingByChange(shape: IShape, option, index, cfg) {\n  const nodes = cfg.nodes.nodes;\n  const tolerance = getGlobalTolerance(nodes);\n  if (index <= 1) {\n    return;\n  }\n  const current = nodes[index];\n  // const previous = nodes[index-1];\n  const previous = findPrevious(index, nodes);\n  const distX = previous.centerX - current.centerX;\n  const distY = previous.centerY - current.centerY;\n  const dist = Math.sqrt(distX * distX + distY * distY);\n  if (dist < tolerance) {\n    textHide(shape);\n    shape.set('blank', true);\n  }\n}\n\nfunction findPrevious(index, nodes) {\n  for (let i = index - 1; i > 0; i--) {\n    const node = nodes[i];\n    if (!node.shape.get('blank')) {\n      return node;\n    }\n  }\n}\n\nfunction getGlobalTolerance(nodes) {\n  const nodesClone = deepMix([], nodes);\n  nodesClone.sort((a, b) => {\n    return b.width - a.width;\n  });\n  return Math.round(nodesClone[0].width);\n}\n","import { IShape } from '@antv/g-base';\nimport { each, clone } from '@antv/util';\nimport textHide from './text-hide';\n\nexport default function nodesResamplingByState(shape: IShape, option, index, cfg) {\n  const nodes = cfg.nodes.nodes;\n  const current = nodes[index];\n  if (current.line) {\n    current.line.remove();\n  }\n\n  const data = cfg.plot.initialProps.data;\n  const field = cfg.plot[cfg.plot.type].label.fields[0];\n  const stateNodes = getStateNodes(data, field, nodes);\n\n  let isState = false;\n  each(stateNodes, (node) => {\n    // @ts-ignore\n    if (node.shape.get('origin') === current.shape.get('origin')) {\n      isState = true;\n    }\n  });\n  if (isState) {\n    if (current.origin_position) {\n      const { x, y } = current.origin_position;\n      shape.attr('x', x);\n      shape.attr('y', y);\n    }\n  } else {\n    textHide(shape);\n  }\n}\n\nfunction getStateNodes(data, field, nodes) {\n  const extract_data = [];\n  each(data, (d) => {\n    extract_data.push(d[field]);\n  });\n  extract_data.sort((a, b) => {\n    return a - b;\n  });\n  const min = extract_data[0];\n  const min_node = getNodeByNumber(nodes, field, min);\n  const max = extract_data[extract_data.length - 1];\n  const max_node = getNodeByNumber(nodes, field, max);\n  const median = getMedian(extract_data);\n  const median_node = getNodeByNumber(nodes, field, median);\n\n  return { min: min_node, max: max_node, median: median_node };\n}\n\nfunction getMedian(array) {\n  const list = clone(array);\n  list.sort((a, b) => {\n    return a - b;\n  });\n\n  const half = Math.floor(list.length / 2);\n\n  if (list.length % 2) {\n    return list[half];\n  }\n\n  return list[half];\n}\n\nfunction getNodeByNumber(nodes, field, num) {\n  for (const node of nodes) {\n    const d = node.shape.get('origin');\n    if (d[field] === num) {\n      return node;\n    }\n  }\n}\n","import { IShape } from '@antv/g-base';\n\nimport datetimeStringAbbrevaite, { isTime } from './datetime-string-abbrevaite';\nimport digitsAbbreviate from './digits-abbreviate';\nimport textAbbreviate from './text-abbreviate';\n\ninterface RobustAbbrevaiteCfg {\n  keep?: string[];\n  abbreviateBy?: 'start' | 'middle' | 'end';\n  unit?: 'k' | 'm' | 'b' | 't' | 'auto';\n  decimal?: number;\n}\n\nexport default function robustAbbrevaite(shape: IShape, option: RobustAbbrevaiteCfg, index, cfg) {\n  const nodes = cfg.nodes.nodes;\n  const text = shape.attr('text');\n  /** 判断text类型： 数字、时间、文本 */\n  const isnum = /^\\d+$/.test(text);\n  if (isnum) {\n    digitsAbbreviate(shape, option, index, nodes);\n  } else if (isTime(text)) {\n    datetimeStringAbbrevaite(shape, option, index, nodes);\n  } else {\n    textAbbreviate(shape, option);\n  }\n}\n","import { IShape } from '@antv/g-base';\n\ninterface TextRotationCfg {\n  degree: number;\n}\n\nexport default function textRotation(shape: IShape, option: TextRotationCfg) {\n  shape.resetMatrix();\n  shape.attr({\n    rotate: 360 - option.degree,\n    textAlign: 'right',\n    textBaseline: 'middle',\n  });\n}\n","import { IShape } from '@antv/g-base';\n\ninterface TextWrapperCfg {\n  lineNumber: number;\n}\n\nexport default function textWrapper(shape: IShape, option: TextWrapperCfg) {\n  const text = shape.attr('text');\n  const step = Math.ceil(text.length / option.lineNumber);\n  let wrapperText = '';\n  for (let i = 1; i < option.lineNumber; i++) {\n    const index = step * i;\n    wrapperText = `${text.slice(0, index)}\\n${text.slice(index)}`;\n  }\n  const fontSize = shape.attr('fontSize');\n  shape.attr({\n    text: wrapperText,\n    lineHeight: fontSize,\n    textAlign: 'center',\n    textBaseline: 'top',\n  });\n}\n","import ApplyResponsiveLabel from '../../../util/responsive/apply/label';\nimport LineLayer from '../layer';\n\nclass ApplyResponsiveLineLabel extends ApplyResponsiveLabel {\n  protected getType() {\n    const props = this.plot.options;\n    if (props.label && props.label.type) {\n      return props.label.type;\n    }\n    return 'point';\n  }\n}\n\nexport default function responsivePointLabel(layer: LineLayer) {\n  const responsiveTheme = layer.getResponsiveTheme();\n  new ApplyResponsiveLineLabel({\n    plot: layer,\n    responsiveTheme,\n  });\n}\n","import { assign } from '@antv/util';\nimport { getEventMap, EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst componentMap = {\n  line: 'line',\n  point: 'point',\n};\n\nconst SHAPE_EVENT_MAP: IEventmap = getEventMap(componentMap);\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","import { View, IGroup, IShape, MarkerSymbols } from '../dependents';\nimport { deepMix, isMatch, isString, isArray, each, find } from '@antv/util';\nimport { MappingDatum, GAnimateCfg } from '@antv/g2/lib/interface';\nimport { DEFAULT_ANIMATE_CFG } from '@antv/g2/lib/animate';\nimport { Event } from '@antv/g2/lib/dependents';\n\ninterface PointStyle {\n  size?: number;\n  fill?: string;\n  stroke?: string;\n  lineWidth?: number;\n}\n\ninterface MarkerItem {\n  _origin: object;\n}\n\ntype AnimationOption = {\n  endState: PointStyle;\n  animateCfg: GAnimateCfg;\n};\n\ninterface Cfg {\n  view: View;\n  data: any[];\n  // 'image://http://xxx.xxx.xxx/a/b.png'\n  symbol?: string | ((x: number, y: number, r: number) => any[][]);\n  size?: number;\n  /** 标注点 point 坐标的 x 偏移 */\n  offsetX?: number;\n  offsetY?: number;\n  label?: {\n    visible: boolean;\n    /** marker point 映射的字段 */\n    field?: string;\n    /** _origin: 原始数据 */\n    formatter?: (text: string, item: MarkerItem, index: number) => string;\n    position?: 'top' | 'bottom';\n    offsetX?: number;\n    offsetY?: number;\n    style?: object;\n  };\n  style?: {\n    normal?: PointStyle;\n    active?: PointStyle;\n    selected?: PointStyle;\n  };\n  events?: {\n    mouseenter?: (e: Event) => void;\n    mouseleave?: (e: Event) => void;\n    click?: (e: Event) => void;\n  };\n  animation?: boolean | AnimationOption;\n}\n\nconst DEFAULT_STYLE = {\n  stroke: 'transparent',\n  fill: '#FCC509',\n  lineWidth: 0,\n};\n\nconst ACTIVE_STYLE = {\n  stroke: '#FFF',\n  fill: '#FCC509',\n  lineWidth: 1,\n};\n\nconst SELECTED_STYLE = {\n  stroke: 'rgba(0,0,0,0.85)',\n  fill: '#FCC509',\n  lineWidth: 1,\n};\n\ninterface StateCondition {\n  id: string;\n  data: {};\n}\ntype State = 'active' | 'inactive' | 'selected';\n\nexport { Cfg as MarkerPointCfg };\n\n/**\n * 标注点 绘制在最顶层\n */\nexport default class MarkerPoint {\n  public view: View;\n  public container: IGroup;\n  public config: Cfg;\n  private points: IShape[] = [];\n  private labels: IShape[] = [];\n  private size: number;\n  private name = 'markerPoints';\n  private selectedPoint: IShape;\n\n  protected defaultCfg = {\n    offsetX: 0,\n    offsetY: 0,\n    style: { normal: DEFAULT_STYLE, selected: SELECTED_STYLE, active: ACTIVE_STYLE },\n    label: {\n      visible: false,\n      offsetY: -8,\n      position: 'top',\n      style: {\n        fill: 'rgba(0, 0, 0, 0.85)',\n      },\n    },\n    animation: false,\n  };\n\n  constructor(cfg: Cfg) {\n    this.view = cfg.view;\n    this.size = cfg.size || 6;\n    this.config = deepMix({}, this.defaultCfg, cfg);\n    this._init();\n  }\n\n  public render() {\n    const dataArray = this.getDataArray();\n    this._renderPoints(dataArray);\n    this.view.canvas.draw();\n    this._addInteraction();\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.remove();\n    }\n    this.points = [];\n    this.labels = [];\n  }\n\n  protected getDataArray(): MappingDatum[][] {\n    const geometry = this.view.geometries[0];\n    return geometry.dataArray;\n  }\n\n  private _init() {\n    const layer = this.view.foregroundGroup;\n    this.container = layer.addGroup();\n    this.render();\n    this.view.on('beforerender', () => {\n      this.clear();\n    });\n  }\n\n  private _renderPoints(dataArray: MappingDatum[][]) {\n    each(this.config.data, (dataItem, dataItemIdx) => {\n      const origin = find(dataArray[0], (d) => isMatch(d._origin, dataItem));\n      if (origin) {\n        const pointAttrs = this.config.style.normal;\n        const group = this.container.addGroup({ name: this.name });\n        let { x, y } = origin;\n        if (isArray(x)) {\n          x = x[0];\n        }\n        if (isArray(y)) {\n          y = y[0];\n        }\n        let symbol = this.config.symbol;\n        const { offsetX, offsetY } = this.config;\n        let point;\n        if (isString(symbol) && symbol.startsWith('image://')) {\n          const imageUrl = symbol.substr(8);\n          point = group.addShape('image', {\n            attrs: {\n              x: x - this.size / 2 + offsetX,\n              y: y - this.size / 2 + offsetY,\n              img: imageUrl,\n              width: this.size,\n              height: this.size,\n            },\n          });\n        } else {\n          symbol = isString(symbol) ? MarkerSymbols[symbol] : symbol;\n          point = group.addShape({\n            type: 'marker',\n            name: 'marker-point',\n            id: `point-${dataItemIdx}`,\n            attrs: {\n              x: x + offsetX,\n              y: y + offsetY,\n              r: this.size / 2,\n              ...pointAttrs,\n              symbol,\n            },\n          });\n        }\n        this.points.push(point);\n        this._animatePoint(point);\n        this._renderLabel(group, origin, dataItemIdx);\n        group.set('data', dataItem);\n        group.set('origin', origin);\n      }\n    });\n  }\n\n  private _renderLabel(container: IGroup, origin: MappingDatum, index) {\n    const { label: labelCfg } = this.config;\n    if (labelCfg && labelCfg.visible) {\n      const { offsetX = 0, offsetY = 0, formatter, position, field } = labelCfg;\n      let text = origin._origin[field];\n      if (formatter) {\n        text = formatter(text, { _origin: origin._origin }, index);\n      }\n      const x = isArray(origin.x) ? origin.x[0] : origin.x;\n      const y = isArray(origin.y) ? origin.y[0] : origin.y;\n      const label = container.addShape('text', {\n        name: 'marker-label',\n        id: `label-${index}`,\n        attrs: {\n          x: x + offsetX,\n          y: y + offsetY,\n          text: text || '',\n          ...labelCfg.style,\n          textAlign: 'center',\n          textBaseline: position === 'top' ? 'bottom' : 'top',\n        },\n      });\n      this.labels.push(label);\n    }\n  }\n\n  private _addInteraction() {\n    const { events } = this.config;\n    each(events, (cb, eventName) => {\n      this.container.on(`${this.name}:${eventName}`, (e) => {\n        cb(e);\n        const target = e.target.get('parent');\n        const pointShape = target.get('children')[0];\n        if (pointShape) {\n          const data = pointShape.get('data');\n          const id = pointShape.get('id');\n          const condition = { id, data };\n          if (eventName === 'click') {\n            if (this.selectedPoint && this.selectedPoint.get('id') === id) {\n              this.selectedPoint = null;\n              this.setState('inactive', condition);\n            } else {\n              this.selectedPoint = pointShape;\n              this.setState('selected', condition);\n            }\n          } else if (eventName === 'mouseenter') {\n            this.setState('active', condition);\n          } else if (eventName === 'mouseleave') {\n            this.setState('inactive', condition);\n          }\n        }\n        this.view.canvas.draw();\n      });\n      this.view.on('click', (e) => {\n        const target = e.target.get('parent');\n        if (!target || (target.get('name') !== this.name && this.selectedPoint)) {\n          this.selectedPoint = null;\n          this.setState('inactive');\n        }\n      });\n    });\n  }\n\n  private setState(state: State, condition?: StateCondition) {\n    if (state === 'active') {\n      if (!this.selectedPoint || condition.id !== this.selectedPoint.get('id')) {\n        this._onActive(condition);\n      }\n    } else if (state === 'inactive') {\n      this.points.forEach((p) => this._onInactive(p));\n    } else if (state === 'selected') {\n      this._onSelected(condition);\n    }\n  }\n\n  private _onActive(condition?: StateCondition) {\n    const { active } = this.config.style;\n    each(this.points, (point) => {\n      if (point.get('id') === condition.id) {\n        each(active, (v, k) => {\n          point.attr(k, v);\n        });\n      } else {\n        this._onInactive(point);\n      }\n    });\n  }\n\n  private _onInactive(point: IShape) {\n    const { normal } = this.config.style;\n    if (!this.selectedPoint || point.get('id') !== this.selectedPoint.get('id')) {\n      each(normal, (v, k) => {\n        point.attr(k, v);\n      });\n    }\n  }\n\n  private _onSelected(condition: StateCondition) {\n    const { selected } = this.config.style;\n    each(this.points, (point) => {\n      if (point.get('id') === condition.id) {\n        each(selected, (v, k) => {\n          point.attr(k, v);\n        });\n      } else {\n        this._onInactive(point);\n      }\n    });\n  }\n\n  /** point animation, not for label */\n  private _animatePoint(shape: IShape) {\n    const { animation, size } = this.config;\n    if (animation !== false) {\n      const { endState = {}, animateCfg = DEFAULT_ANIMATE_CFG.appear } = animation as AnimationOption;\n      shape.animate(\n        {\n          r: Number.isNaN(endState.size / 2) ? size / 2 : endState.size / 2,\n          ...endState,\n        },\n        animateCfg\n      );\n    }\n  }\n}\n","import { IShape } from '../../dependents';\nimport { registerTheme } from '../../theme';\n\nconst LINE_ACTIVE_STYLE = ({ shape }: { shape: IShape }) => {\n  const lineWidth = shape.attr('lineWidth') || 1;\n  return { lineWidth: lineWidth + 1 };\n};\n\nconst LINE_DISABLE_STYLE = ({ shape }: { shape: IShape }) => {\n  const opacity = shape.attr('opacity') || 1;\n  return { opacity: opacity * 0.2 };\n};\n\nconst LINE_SELECTED_STYLE = ({ shape }: { shape: IShape }) => {\n  const lineWidth = shape.attr('lineWidth') || 1;\n  return { lineWidth: lineWidth + 2 };\n};\n\nregisterTheme('line', {\n  lineStyle: {\n    normal: {},\n    active: LINE_ACTIVE_STYLE,\n    disable: LINE_DISABLE_STYLE,\n    selected: LINE_SELECTED_STYLE,\n  },\n  pointStyle: {\n    normal: {},\n    active: {},\n    disable: {},\n    selected: {},\n  },\n});\n","import { registerResponsiveTheme } from '../../../util/responsive/theme';\n\n/** 组装theme */\nconst lineTheme = {\n  label: {\n    point: {\n      constraints: [{ name: 'elementCollision' }],\n      rules: {\n        elementCollision: [{ name: 'nodesResamplingByChange' }, { name: 'clearOverlapping' }],\n      },\n    },\n  },\n};\nregisterResponsiveTheme('line', lineTheme);\n","import LineActive from './line-active';\nimport LineSelect from './line-select';\n\nexport { LineActive, LineSelect };\n","import { each, filter, get } from '@antv/util';\nimport Interaction from '../../../interaction/core';\nimport { Geometry } from '../../../dependents';\n\nexport default class LineActive extends Interaction {\n  constructor(cfg) {\n    super({\n      /** 没有用 line:mouseenter 和 line:mouseleave 事件，是因为可能在多条折线的情况下，从一条线滑动到另一条会同时触发process和reset，使画面出现闪动 */\n      processEvent: 'mousemove',\n      ...cfg,\n    });\n  }\n\n  public start() {\n    return;\n  }\n\n  public process(ev) {\n    const lines: Geometry[] = filter(this.view.geometries, (geom) => geom.type == 'line');\n    const target = ev.target;\n    if (target.get('name') === 'line') {\n      const data = get(ev, 'data.data');\n      each(lines, (line: Geometry) => {\n        each(line.elements, (element) => {\n          element.setState('active', element.data === data);\n        });\n      });\n    } else {\n      each(lines, (line: Geometry) => {\n        each(line.elements, (element) => {\n          element.setState('active', false);\n        });\n      });\n    }\n  }\n}\n","import { get, each, filter } from '@antv/util';\nimport Interaction from '../../../interaction/core';\nimport { Geometry } from '../../../dependents';\n\nexport default class LineSelect extends Interaction {\n  constructor(cfg) {\n    super({\n      endEvent: 'click',\n      ...cfg,\n    });\n  }\n\n  public start() {\n    return;\n  }\n\n  public end(ev) {\n    const target = ev.target;\n    const lines: Geometry[] = filter(this.view.geometries, (geom) => geom.type == 'line');\n    if (target.get('name') === 'line') {\n      const data = get(ev, 'data.data');\n      each(lines, (line: Geometry) => {\n        each(line.elements, (element) => {\n          element.setState('inactive', element.data !== data);\n        });\n      });\n      // TODO： 设置z-index\n    } else {\n      each(lines, (line: Geometry) => {\n        each(line.elements, (element) => {\n          element.setState('inactive', false);\n        });\n      });\n      // TODO: 重置z-index\n    }\n  }\n}\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport TreemapLayer, { TreemapViewConfig } from './layer';\n\nexport interface TreemapConfig extends TreemapViewConfig, PlotConfig {}\n\nexport default class Treemap extends BasePlot<TreemapConfig> {\n  public static getDefaultOptions: typeof TreemapLayer.getDefaultOptions = TreemapLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'treemap';\n    super.createLayers(layerProps);\n  }\n}\n","import { deepMix, each, hasKey } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport ViewLayer, { ViewConfig } from '../../base/view-layer';\nimport squarify from './layout/squarify';\nimport { INTERACTION_MAP } from './interaction';\nimport * as EventParser from './event';\nimport TreemapLabel, { TreemapLabelConfig } from './components/label';\nimport { GraphicStyle, IInteractions } from '../../interface/config';\nimport { IDrillDown } from './interaction/drillDown';\n\nconst PARENT_NODE_OFFSET = 4;\nconst BLOCK_MARGIN = 4;\n\ntype TreemapInteraction = { type: 'drilldown'; cfg: IDrillDown } | IInteractions;\n\nexport interface TreemapViewConfig extends ViewConfig {\n  data: any;\n  maxLevel?: number;\n  colorField: string;\n  colors?: string[];\n  rectStyle?: GraphicStyle;\n  label: TreemapLabelConfig;\n  interactions?: TreemapInteraction[];\n}\n\nexport interface TreemapLayerConfig extends TreemapViewConfig, LayerConfig {}\n\nexport default class TreemapLayer<T extends TreemapLayerConfig = TreemapLayerConfig> extends ViewLayer<T> {\n  public static getDefaultOptions(): Partial<TreemapLayerConfig> {\n    return deepMix({}, super.getDefaultOptions(), {\n      maxLevel: 2,\n      padding: [0, 0, 0, 0],\n      tooltip: {\n        visible: false,\n        showTitle: false,\n        showCrosshairs: false,\n        showMarkers: false,\n        shared: false,\n      },\n      legend: {\n        visible: false,\n      },\n      xAxis: {\n        visible: false,\n      },\n      yAxis: {\n        visible: false,\n      },\n      xField: 'x',\n      yField: 'y',\n      label: {\n        visible: true,\n        adjustPosition: true,\n        style: {\n          stroke: 'rgba(0,0,0,0)',\n          lineWidth: 0,\n          fontSize: 12,\n        },\n      },\n      meta: {\n        x: {\n          nice: false,\n        },\n        y: {\n          nice: false,\n        },\n      },\n      interactions: [{ type: 'tooltip' }],\n    });\n  }\n  public type: string = 'treemap';\n  public rootData: any;\n  public rect: any;\n  private isDrilldown: boolean;\n\n  public beforeInit() {\n    super.beforeInit();\n    const { interactions } = this.options;\n    if (interactions) {\n      each(interactions, (interaction) => {\n        if (interaction.type === 'drilldown') {\n          this.isDrilldown = true;\n          this.options.maxLevel = 1;\n        }\n      });\n    }\n    const { data } = this.options;\n    const treemapData = this.getTreemapData(data);\n    this.rootData = treemapData;\n  }\n\n  public afterRender() {\n    super.afterRender();\n    if (this.options.label && this.options.label.visible) {\n      const label = new TreemapLabel({\n        view: this.view,\n        plot: this,\n        ...this.options.label,\n      });\n      label.render();\n    }\n  }\n\n  protected geometryParser() {\n    return 'polygon';\n  }\n\n  public getTreemapData(data, level?) {\n    const viewRange = this.getViewRange();\n    const root = squarify(data, viewRange.x, viewRange.y, viewRange.width, viewRange.height);\n    this.recursive(root, 1);\n    const treemapData = [];\n    this.getAllNodes(root, treemapData, level);\n    treemapData.sort((a, b) => {\n      return a.depth - b.depth;\n    });\n    this.options.xField = 'x';\n    this.options.yField = 'y';\n    return treemapData;\n  }\n\n  protected processData() {\n    return this.rootData;\n  }\n\n  protected coord() {\n    return;\n  }\n\n  protected addGeometry() {\n    const { data, colorField, color } = this.options;\n    const treemapData = this.getTreemapData(data);\n    this.rootData = treemapData;\n    const isNested = this.isNested(treemapData);\n    this.rect = {\n      type: 'polygon',\n      position: {\n        fields: ['x', 'y'],\n      },\n      color: {\n        fields: [colorField],\n        values: color,\n      },\n      style: {\n        fields: ['depth'],\n        callback: (d) => {\n          const defaultStyle = this.adjustStyleByDepth(d, isNested);\n          return deepMix({}, defaultStyle, this.options.rectStyle);\n        },\n      },\n      tooltip: {\n        fields: ['name', 'value'],\n      },\n    };\n    if (this.options.tooltip && this.options.tooltip.formatter) {\n      this.rect.tooltip.callback = this.options.tooltip.formatter;\n    }\n    this.setConfig('geometry', this.rect);\n  }\n\n  protected applyInteractions() {\n    const interactionCfg = this.options.interactions;\n    const interactions = this.view.interactions;\n    each(interactionCfg, (inter) => {\n      const Ctr = INTERACTION_MAP[inter.type];\n      if (Ctr) {\n        const interaction = new Ctr(\n          deepMix(\n            {},\n            {\n              view: this.view,\n              plot: this,\n              startEvent: 'polygon:click',\n            },\n            inter.cfg,\n            Ctr.getInteractionRange(this.layerBBox, inter.cfg)\n          )\n        );\n        interactions[inter.type] = interaction;\n      }\n    });\n  }\n\n  protected animation() {\n    super.animation();\n    if (this.isDrilldown) {\n      this.rect.animate = false;\n    }\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n\n  private recursive(rows, depth?) {\n    const { colorField } = this.options;\n    each(rows, (r) => {\n      each(r.children, (c) => {\n        c.depth = depth;\n        if (depth > 1) c.parent = r;\n        if (!hasKey(c, colorField)) {\n          c[colorField] = r[colorField];\n        }\n        c.showLabel = true;\n        const leaf = this.isLeaf(c);\n        if (!leaf) {\n          const cliperHeight = Math.abs(c.y1 - c.y0);\n          const labelHeight = this.getLabelHeight();\n          const parentLabelOffset = cliperHeight / 2 > labelHeight ? labelHeight : BLOCK_MARGIN;\n          c.showLabel = parentLabelOffset === BLOCK_MARGIN ? false : true;\n          const c_rows = squarify(\n            c,\n            c.x0 + BLOCK_MARGIN,\n            c.y0 + parentLabelOffset,\n            c.x1 - BLOCK_MARGIN,\n            c.y1 - BLOCK_MARGIN\n          );\n          this.fillColorField(c_rows, colorField, c[colorField]);\n          this.recursive(c_rows, c.depth + 1);\n        }\n      });\n    });\n  }\n\n  private getAllNodes(data, nodes, level?) {\n    const max = level ? level : this.options.maxLevel;\n    const viewRange = this.getViewRange();\n    each(data, (d) => {\n      if (hasKey(d, 'x0') && d.depth <= max) {\n        nodes.push({\n          ...d,\n          x: [d.x0, d.x1, d.x1, d.x0],\n          y: [viewRange.height - d.y1, viewRange.height - d.y1, viewRange.height - d.y0, viewRange.height - d.y0],\n        });\n      }\n      if (hasKey(d, 'children')) {\n        this.getAllNodes(d.children, nodes);\n      }\n    });\n  }\n\n  private fillColorField(rows, fieldName, value) {\n    each(rows, (r) => {\n      if (!hasKey(r, fieldName)) {\n        r[fieldName] = value;\n      }\n    });\n  }\n\n  private getLabelHeight() {\n    const { label } = this.options;\n    const { fontSize } = this.getPlotTheme().label.style;\n    let size = 0;\n    if (label && label.visible) {\n      const labelStyle: any = label.style;\n      size = labelStyle && labelStyle.fontSize ? labelStyle.fontSize : fontSize;\n    }\n    return size + PARENT_NODE_OFFSET * 2;\n  }\n\n  private isLeaf(data) {\n    return !data.children || data.children.length === 0;\n  }\n\n  private isNested(data) {\n    const { maxLevel } = this.options;\n    if (maxLevel === 1) {\n      return false;\n    }\n    let nested = false;\n    for (let i = 0; i < data.length; i++) {\n      if (data[i].children) {\n        nested = true;\n        break;\n      }\n    }\n    return nested;\n  }\n\n  private adjustStyleByDepth(depth, isNested) {\n    const { maxLevel } = this.options;\n    if (!isNested) {\n      return {\n        lineWidth: 1,\n        stroke: 'rgba(0,0,0,0.9)',\n        opacity: 0.9,\n      };\n    } else if (depth === 1) {\n      return {\n        lineWidth: 1,\n        stroke: 'black',\n        opacity: depth / maxLevel,\n      };\n    } else {\n      return {\n        lineWidth: 1,\n        stroke: 'rgba(0,0,0,0.3)',\n        opacity: depth / maxLevel,\n      };\n    }\n  }\n}\n\nregisterPlotType('treemap', TreemapLayer);\n","import { dice } from './dice';\nimport { slice } from './slice';\n\n//reference: https://github.com/d3/d3-hierarchy/blob/master/src/treemap/squarify.js\n\n// 黄金分割\nconst ratio = (1 + Math.sqrt(5)) / 2;\n\nexport default function squarify(root, x0, y0, x1, y1) {\n  const { children } = root;\n  let value = root.value;\n  children.sort((a, b) => {\n    return b.value - a.value;\n  });\n  const rows = [];\n  let sumValue, maxValue, minValue;\n  let alpha, beta;\n  let newRatio, minRatio;\n  let nodeValue;\n  let i = 0,\n    j = 0;\n\n  // todo: 剔除empty node\n  while (i < children.length) {\n    const width = x1 - x0;\n    const height = y1 - y0;\n    sumValue = children[j++].value;\n    maxValue = sumValue;\n    minValue = sumValue;\n    alpha = Math.max(height / width, width / height) / (value * ratio);\n    beta = sumValue * sumValue * alpha;\n    minRatio = Math.max(maxValue / beta, beta / minValue);\n    for (; j < children.length; j++) {\n      nodeValue = children[j].value;\n      sumValue += nodeValue;\n      if (nodeValue < minValue) minValue = nodeValue;\n      if (nodeValue > maxValue) maxValue = nodeValue;\n      beta = sumValue * sumValue * alpha;\n      newRatio = Math.max(maxValue / beta, beta / minValue);\n      if (newRatio > minRatio) {\n        sumValue -= nodeValue;\n        break;\n      }\n      minRatio = newRatio;\n    }\n    const row = { value: sumValue, dice: width < height, children: children.slice(i, j) };\n    rows.push(row);\n    if (row.dice) {\n      const h = value ? (height * sumValue) / value : height;\n      dice(row, x0, y0, x1, y0 + h);\n      if (value) {\n        y0 += h;\n      }\n    } else {\n      const w = value ? (width * sumValue) / value : width;\n      slice(row, x0, y0, x0 + w, y1);\n      if (value) {\n        x0 += w;\n      }\n    }\n    value -= sumValue;\n    i = j;\n  }\n  return rows;\n}\n","import { each } from '@antv/util';\n\nexport function dice(root, x0, y0, x1, y1) {\n  const width = x1 - x0;\n  const { children, value } = root;\n  children.sort((a, b) => {\n    return b.value - a.value;\n  });\n  const k = width / value;\n  let node_x = x0;\n  each(children, (c) => {\n    c.y0 = y0;\n    c.y1 = y1;\n    c.x0 = node_x;\n    node_x += c.value * k;\n    c.x1 = c.x0 + c.value * k;\n  });\n}\n","import { each } from '@antv/util';\n\nexport function slice(root, x0, y0, x1, y1) {\n  const height = y1 - y0;\n  const { children, value } = root;\n  children.sort((a, b) => {\n    return b.value - a.value;\n  });\n  const k = height / value;\n  let node_y = y0;\n  each(children, (c) => {\n    c.x0 = x0;\n    c.x1 = x1;\n    c.y0 = node_y;\n    node_y += c.value * k;\n    c.y1 = c.y0 + c.value * k;\n  });\n}\n","import DrillDownInteraction from './drillDown';\n\nexport const INTERACTION_MAP = {\n  drilldown: DrillDownInteraction,\n};\n","import Breadcrumb from '../../../components/breadcrumb';\nimport BaseInteraction from '../../../interaction/base';\nimport { IGroup } from '@antv/g-base';\nimport BBox from '../../../util/bbox';\nimport TreemapLayer from '../layer';\nimport { each, hasKey, isFunction, clone } from '@antv/util';\nimport { drillingDown, rollingUp } from './animation';\n\nconst DEFAULT_ITEM_WIDTH = 100;\nconst DEFAULT_ITEM_HEIGHT = 30;\nconst PADDING_TOP = 10;\n\ninterface IStartNode {\n  name?: string;\n}\n\ninterface IMapping {\n  [key: string]: IMappingConfig;\n}\n\ninterface IMappingConfig {\n  field: string;\n  values?: string[] | Function;\n}\n\ninterface IDrillDownInteractionConfig {\n  x?: number;\n  y?: number;\n  startNode?: IStartNode;\n  itemWidth?: number;\n  itemHeight?: number;\n  padding?: number[];\n}\n\nexport type IDrillDown = {\n  mapping?: {\n    [key: string]: IMappingConfig;\n  };\n};\n\nconst getValidBreadcrumbConfig = (cfg: IDrillDownInteractionConfig = {}): Required<IDrillDownInteractionConfig> => {\n  const _cfg: Required<IDrillDownInteractionConfig> = {\n    x: 0,\n    y: 0,\n    startNode: { name: 'root' },\n    itemWidth: DEFAULT_ITEM_WIDTH,\n    itemHeight: DEFAULT_ITEM_HEIGHT,\n    padding: [0, 0, 0, 0],\n    ...cfg,\n  };\n  return _cfg;\n};\n\nexport default class DrillDownInteraction extends BaseInteraction {\n  public static getInteractionRange(layerRange: BBox, interaction: IDrillDownInteractionConfig) {\n    const config: Required<IDrillDownInteractionConfig> = getValidBreadcrumbConfig(interaction);\n    const [paddingTop, paddingBottom] = config.padding;\n    if (layerRange) {\n      return new BBox(\n        layerRange.minX,\n        layerRange.maxY - config.itemHeight - paddingTop - paddingBottom,\n        layerRange.width,\n        config.itemHeight + paddingTop + paddingBottom\n      );\n    }\n  }\n\n  private container: IGroup;\n  private breadcrumb: Breadcrumb;\n  private plot: TreemapLayer;\n  private startNode: IStartNode;\n  private parentNode: any;\n  private currentNode: any;\n  private currentDepth: number;\n  private startNodeName: string;\n  private cache: any;\n  private mapping: IMapping;\n  private originMapping: IMappingConfig;\n  private y: number;\n  private geometry: any;\n\n  public start(ev) {\n    const data = ev.data.data;\n    if (data.children) {\n      this.parentNode = {\n        color: ev.target.attr('fill'),\n        shape: ev.target,\n        data: {\n          name: clone(this.currentNode.name),\n          value: clone(this.currentNode.value),\n        },\n        depth: clone(this.currentDepth),\n      };\n      this.currentDepth++;\n      drillingDown(ev.target, this.view, () => {\n        this.update(data);\n      });\n    }\n  }\n\n  protected update(data) {\n    if (!hasKey(this.cache, data.name)) {\n      this.cache[data.name] = data;\n    }\n    const tempoData = this.plot.getTreemapData(data, data.depth);\n    this.view.changeData(tempoData);\n    this.adjustScale(this.currentDepth);\n    this.currentNode = data;\n    this.render();\n  }\n\n  protected render() {\n    if (this.breadcrumb) {\n      const items = this.getItems();\n      this.breadcrumb.update({\n        items,\n      });\n      this.layout();\n    } else {\n      this.initGeometry();\n      this.cache = {};\n      this.saveOriginMapping();\n      this.container = this.plot.canvas.addGroup();\n      if (!this.startNode) {\n        this.startNode = {\n          name: 'root',\n        };\n      }\n      if (this.startNode.name === 'root') {\n        this.startNodeName = hasKey(this.plot.options.data, 'name') ? this.plot.options.data.name : 'root';\n        this.currentNode = this.plot.options.data;\n        this.currentDepth = 1;\n      } else {\n        this.startNodeName = this.startNode.name;\n        this.currentNode = this.startNode;\n      }\n      this.y = this.view.coordinateBBox.maxY + PADDING_TOP;\n      this.breadcrumb = new Breadcrumb({\n        container: this.container,\n        x: 0,\n        y: this.y,\n        items: this.getItems(),\n      });\n      this.breadcrumb.render();\n      this.plot.canvas.draw();\n      this.layout();\n    }\n    this.onInteraction();\n  }\n\n  protected clear() {\n    return;\n  }\n\n  private layout() {\n    const currentWidth = this.container.getBBox().width;\n    const x = (this.plot.width - currentWidth) / 2;\n    this.breadcrumb.update({\n      x,\n      y: this.y,\n    });\n  }\n\n  private getItems() {\n    let items = [];\n    if (this.currentNode.name && this.currentNode.name === this.startNodeName) {\n      const rootItem = this.getRootItem();\n      items.push(rootItem);\n    } else {\n      items = [];\n      const parents = [];\n      this.findParent(this.currentNode, parents);\n      items.push(this.getRootItem());\n      each(parents, (p, index) => {\n        items.push({ key: String(index + 2), text: p.name, data: p });\n      });\n      items.push({ key: String(parents.length + 2), text: this.currentNode.name, data: this.currentNode });\n    }\n    return items;\n  }\n\n  private findParent(data, parents) {\n    if (data.parent) {\n      if (hasKey(this.cache, data.parent.name)) {\n        parents.push(this.cache[data.parent.name]);\n      } else {\n        parents.push(data.parent);\n      }\n      this.findParent(data.parent, parents);\n    } else {\n      return;\n    }\n  }\n\n  private onInteraction() {\n    this.container.on('click', (ev) => {\n      const targetParent = ev.target.get('parent');\n      if (targetParent && targetParent.get('class') === 'item-group') {\n        const data = targetParent.get('data');\n        if (data.data) {\n          if (data.text === this.startNodeName) {\n            const targetDepth = 1;\n            //只有前后depth相邻才执行上卷动画，否则直接更新\n            if (this.currentDepth - 1 === targetDepth) {\n              rollingUp(this.currentNode.name, this.view, () => {\n                this.updateRoot(data);\n              });\n            } else {\n              this.updateRoot(data);\n            }\n            this.currentDepth = 1;\n          } else if (this.currentNode === data.data) {\n            return;\n          } else {\n            const previousDepth = clone(this.currentDepth);\n            this.currentDepth = parseInt(data.key);\n            if (previousDepth - 1 === this.currentDepth) {\n              rollingUp(this.currentNode.name, this.view, () => {\n                this.update(data.data);\n              });\n            } else {\n              this.update(data.data);\n            }\n          }\n        }\n      }\n    });\n  }\n\n  private getRootItem() {\n    const rootData = this.plot.options.data;\n    const rootName = hasKey(rootData, 'name') ? rootData.name : 'root';\n    return { key: '1', text: rootName, data: this.plot.rootData };\n  }\n\n  private saveOriginMapping() {\n    const { colorField, colors } = this.plot.options;\n    const mappingInfo = { field: colorField, values: colors };\n    this.originMapping = mappingInfo;\n  }\n\n  private adjustScale(index) {\n    const { view } = this;\n    // 根据当前层级确定mapping配置项\n    if (this.mapping && hasKey(this.mapping, String(index))) {\n      const mappingCfg = clone(this.mapping[index]);\n      if (mappingCfg.values && isFunction(mappingCfg.values)) {\n        const values = mappingCfg.values(this.parentNode, this.currentNode);\n        mappingCfg.values = values;\n      }\n      this.view.geometries[0].color(mappingCfg.field, mappingCfg.values);\n    } else {\n      const mappingCfg = clone(this.originMapping);\n      this.view.geometries[0].color(mappingCfg.field, mappingCfg.values);\n    }\n    view.render();\n  }\n\n  private initGeometry() {\n    this.geometry = this.view.geometries[0];\n    const viewRange = this.view.viewBBox;\n    const container = this.geometry.container;\n    container.setClip({\n      type: 'rect',\n      attrs: {\n        x: viewRange.minX,\n        y: viewRange.minY,\n        width: viewRange.width,\n        height: viewRange.height,\n      },\n    });\n  }\n\n  private updateRoot(data) {\n    this.view.changeData(data.data);\n    this.adjustScale(1);\n    this.currentNode = this.plot.options.data;\n    this.render();\n  }\n}\n\nBaseInteraction.registerInteraction('drilldown', DrillDownInteraction);\n","import BaseComponent, { BaseComponentConfig } from './base';\nimport { IGroup, BBox, IShape } from '../dependents';\nimport { move } from '../util/g-util';\nimport { TextStyle, GraphicStyle } from '../interface/config';\n\nexport interface BreadcrumbItem {\n  key: string;\n  text: string;\n}\n\nexport interface BreadcrumbConfig extends BaseComponentConfig {\n  x: number;\n  y: number;\n  items: BreadcrumbItem[];\n  itemPadding?: [number, number, number, number];\n  backgroundStyle?: GraphicStyle;\n  itemBackgroundStyle?: GraphicStyle;\n  itemActiveBackgroundStyle?: GraphicStyle;\n  separator?: string;\n  separatorStyle?: TextStyle;\n  itemWidth?: number;\n  itemHeight?: number;\n  maxItemWidth?: number;\n  textStyle?: TextStyle;\n}\n\nexport default class Breadcrumb extends BaseComponent<BreadcrumbConfig> {\n  private x: number;\n  private y: number;\n  private items: BreadcrumbItem[];\n  private itemPadding: [number, number, number, number];\n  private backgroundStyle: {\n    fill?: string;\n    stroke?: string;\n    lineWidth?: number;\n  };\n  private itemBackgroundStyle: {\n    fill?: string;\n    opacity?: number;\n  };\n  private itemActiveBackgroundStyle: {\n    fill?: string;\n    opacity?: number;\n  };\n  private separator: string;\n  private separatorStyle: TextStyle;\n  private itemWidth: number | undefined;\n  private itemHeight: number | undefined;\n  private maxItemWidth: number | undefined;\n  private textStyle: TextStyle;\n\n  private listeners: { target: IShape | IGroup; event: string; callback: () => void }[] = [];\n\n  public destroy() {\n    this.offEvents();\n    super.destroy();\n  }\n\n  protected init(config: BreadcrumbConfig) {\n    this.x = config.x;\n    this.y = config.y;\n    this.items = config.items || [];\n    this.itemPadding = config.itemPadding || [2, 8, 2, 8];\n    this.backgroundStyle = { lineWidth: 1, stroke: '#ffffff', ...(config.backgroundStyle || {}) };\n    this.itemBackgroundStyle = { fill: '#fff', ...(config.itemBackgroundStyle || {}) };\n    this.itemActiveBackgroundStyle = { fill: '#ccc', opacity: 0.2, ...(config.itemActiveBackgroundStyle || {}) };\n    this.separator = config.separator || '/';\n    this.separatorStyle = { textBaseline: 'top', fill: '#000000', opacity: 0.45, ...(config.separatorStyle || {}) };\n    this.itemWidth = config.itemWidth;\n    this.itemHeight = config.itemHeight;\n    this.maxItemWidth = config.maxItemWidth;\n    this.textStyle = { textBaseline: 'top', fill: '#000000', opacity: 0.45, ...(config.textStyle || {}) };\n  }\n\n  protected renderInner(group: IGroup) {\n    const startX = 0;\n    const startY = 0;\n    this.offEvents();\n    this.renderItems(group, startX, startY);\n    //this.bindEvents(group);\n    move(this.group, this.x, this.y);\n  }\n\n  private renderItems(group: IGroup, startX: number, startY: number) {\n    const [topPadding, rightPadding, bottomPadding, leftPadding] = this.itemPadding;\n    let itemHeight;\n\n    // background\n    const backgroundRect = group.addShape('rect', {\n      class: 'breadcrumb-background',\n      attrs: {\n        x: startX,\n        y: startY,\n        width: 1,\n        height: 1,\n        ...this.backgroundStyle,\n      },\n    });\n\n    this.items.forEach((item: BreadcrumbItem, idx: number) => {\n      // item group\n      const itemGroup: IGroup = group.addGroup({\n        id: `item-group-${item.key}`,\n        // data: item.key,\n        data: item,\n        class: 'item-group',\n        attrs: {\n          cursor: 'pointer',\n        },\n      });\n\n      // background rect\n\n      const rectShape: any = itemGroup.addShape('rect', {\n        id: `item-background-${item.key}`,\n        class: 'item-background',\n        attrs: {\n          x: startX,\n          y: startY,\n          width: leftPadding + rightPadding,\n          height: topPadding + bottomPadding,\n          ...this.itemBackgroundStyle,\n          cursor: 'pointer',\n        },\n      });\n      rectShape.name = 'breadcrumb';\n\n      // text shape\n      const textShape: any = itemGroup.addShape('text', {\n        id: `item-text-${item.key}`,\n        class: 'item-text',\n        attrs: {\n          x: startX + leftPadding,\n          y: startY + topPadding,\n          text: item.text,\n          ...this.textStyle,\n          cursor: 'pointer',\n        },\n      });\n      textShape.name = 'breadcrumb';\n      const textShapeBBox: BBox = textShape.getBBox();\n      itemHeight = this.itemHeight || textShapeBBox.height;\n      let itemWidth = this.itemWidth || textShapeBBox.width;\n      if (this.maxItemWidth) {\n        itemWidth = Math.min(itemWidth, this.maxItemWidth);\n      }\n      // update background rect\n      const backgroundRectAttr = {\n        x: startX,\n        y: startY,\n        width: itemWidth + leftPadding + rightPadding,\n        height: itemHeight + topPadding + bottomPadding,\n      };\n      rectShape.attr('width', backgroundRectAttr.width);\n      rectShape.attr('height', backgroundRectAttr.height);\n      // clip\n      itemGroup.setClip({\n        type: 'rect',\n        attrs: backgroundRectAttr,\n      });\n      startX += backgroundRectAttr.width;\n\n      // separator\n      if (idx !== this.items.length - 1) {\n        const sepShape: any = group.addShape('text', {\n          attrs: {\n            x: startX,\n            y: startY + topPadding,\n            text: this.separator,\n            ...this.separatorStyle,\n          },\n          class: 'separator',\n        });\n        startX += sepShape.getBBox().width;\n      }\n    });\n\n    // update background\n    backgroundRect.attr({\n      width: startX,\n      height: itemHeight + topPadding + bottomPadding,\n    });\n  }\n\n  private bindEvents(group: IGroup) {\n    const items = this.items;\n    const itemGroups = group.get('children').filter((item) => item.get('class') === 'item-group');\n    const callback = (event: string, itemGroup: IGroup, emitEventName: string) => () => {\n      const key: string = itemGroup.get('data');\n      const item = items.find((val) => val.key === key);\n      this.emit(emitEventName, {\n        item,\n      });\n    };\n\n    itemGroups.forEach((itemGroup) => {\n      const clickCallback = callback('click', itemGroup, 'onItemClick');\n      const dblclickCallback = callback('dblclick', itemGroup, 'onItemDblclick');\n      const mouseEnterCallback = this.onItemGroupToggleActive(itemGroup, true);\n      const mouseLeaveCallback = this.onItemGroupToggleActive(itemGroup, false);\n      itemGroup.on('click', clickCallback);\n      itemGroup.on('dblclick', dblclickCallback);\n      itemGroup.on('mouseenter', mouseEnterCallback);\n      itemGroup.on('mouseleave', mouseLeaveCallback);\n      this.listeners.push({ target: itemGroup, event: 'click', callback: clickCallback });\n      this.listeners.push({ target: itemGroup, event: 'dblclick', callback: dblclickCallback });\n      this.listeners.push({ target: itemGroup, event: 'mouseenter', callback: mouseEnterCallback });\n      this.listeners.push({ target: itemGroup, event: 'mouseleave', callback: mouseLeaveCallback });\n    });\n  }\n\n  private onItemGroupToggleActive = (itemGroup: IGroup, active: boolean) => () => {\n    const rectShape = itemGroup.get('children').find((item) => item.get('class') === 'item-background');\n    if (rectShape) {\n      rectShape.attr(active ? this.itemActiveBackgroundStyle : this.itemBackgroundStyle);\n    }\n    this.getCanvas().draw();\n  };\n\n  private offEvents() {\n    if (this.listeners) {\n      this.listeners.forEach(({ target, event, callback }) => {\n        target.off(event, callback);\n      });\n    }\n    this.listeners = [];\n  }\n}\n","import { each, clone, deepMix } from '@antv/util';\nimport { groupTransform, transform } from '../../../util/g-util';\n\nconst ulMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\nconst duration = 400;\nconst easing = 'easeQuadInOut';\n\nexport function drillingDown(target, view, callback) {\n  const rect = getRect(target);\n  const range = getRange(view);\n  const xRatio = range.width / rect.width;\n  const yRatio = range.height / rect.height;\n  const offsetX = (range.minX - rect.minX) * xRatio;\n  const offsetY = (range.minY - rect.minY) * yRatio;\n\n  const transformMatrix = transform([\n    ['s', xRatio, yRatio],\n    ['t', offsetX, offsetY],\n  ]);\n\n  let geometry = view.geometries[0];\n  hideLabel(geometry);\n  const tem_container = view.backgroundGroup.addGroup();\n  tem_container.set('zIndex', -100);\n  tem_container.setClip({\n    type: 'rect',\n    attrs: {\n      x: range.minX,\n      y: range.minY,\n      width: range.width,\n      height: range.height,\n    },\n  });\n  const tem_shapes = getTemShapes(geometry, tem_container);\n  geometry.container.set('visible', false);\n  view.canvas.draw();\n  callback();\n  window.setTimeout(() => {\n    each(tem_shapes, (shape, index) => {\n      if (index === 0) {\n        shape.animate({ matrix: transformMatrix }, duration, easing, () => {\n          tem_container.remove();\n          view.canvas.draw();\n        });\n      } else {\n        shape.animate(transform, duration);\n      }\n    });\n    geometry = view.geometries[0];\n    hideLabel(geometry);\n    const shapes = geometry.getShapes();\n    each(shapes, (shape) => {\n      shape.attr('opacity', 0);\n      shape.animate(\n        {\n          opacity: 1,\n        },\n        duration,\n        easing\n      );\n    });\n    const container = geometry.container;\n    container.stopAnimate();\n    container.set('visible', true);\n    container.attr('matrix', clone(ulMatrix));\n    groupTransform(container, [\n      ['s', rect.width / range.width, rect.height / range.height],\n      ['t', rect.minX, rect.minY],\n    ]);\n    const matrix = clone(ulMatrix);\n    geometry.container.animate(\n      {\n        matrix,\n      },\n      duration,\n      easing,\n      () => {\n        showLabel(geometry);\n      }\n    );\n    view.canvas.draw();\n  }, 16);\n}\n\nfunction getTemShapes(geometry, container) {\n  const shapes = geometry.getShapes();\n  const tem_shapes = [];\n  each(shapes, (shape) => {\n    const s = container.addShape('path', {\n      attrs: deepMix({}, shape.attrs, { capture: false }),\n    });\n    tem_shapes.push(s);\n  });\n  return tem_shapes;\n}\n\nexport function rollingUp(name, view, callback) {\n  let geometry = view.geometries[0];\n  hideLabel(geometry);\n  let container = geometry.container;\n  container.attr('matrix', clone(ulMatrix));\n  const tem_container = view.backgroundGroup.addGroup();\n  tem_container.set('zIndex', -100);\n  const tem_shapes = getTemShapes(geometry, tem_container);\n  container.set('visible', false);\n  view.canvas.draw();\n  callback();\n  geometry = view.geometries[0];\n  hideLabel(geometry);\n  container = geometry.container;\n  const shape = findShapeByName(geometry.getShapes(), name); //根据name获得上一级shape\n  const rect = getRect(shape);\n  const range = getRange(view);\n  const containerParent = container.get('parent');\n  if (!containerParent.get('clipShape')) {\n    container.setClip({\n      type: 'rect',\n      attrs: {\n        x: range.minX,\n        y: range.minY,\n        width: range.width,\n        height: range.height,\n      },\n    });\n  }\n  shrinkTemp(tem_container, tem_shapes, rect, range);\n  const xRatio = range.width / rect.width;\n  const yRatio = range.height / rect.height;\n  const offsetX = (range.minX - rect.minX) * xRatio;\n  const offsetY = (range.minY - rect.minY) * yRatio;\n  const transformMatrix = transform([\n    ['s', xRatio, yRatio],\n    ['t', offsetX, offsetY],\n  ]);\n  container.setMatrix(transformMatrix);\n  container.set('visible', true);\n  container.animate(\n    {\n      matrix: ulMatrix,\n    },\n    duration,\n    easing,\n    () => {\n      showLabel(geometry);\n    }\n  );\n}\n\nfunction findShapeByName(shapes, n) {\n  let shape;\n  each(shapes, (s) => {\n    const { name } = s.get('origin').data;\n    if (name === n) {\n      shape = s;\n    }\n  });\n  return shape;\n}\n\nfunction getRange(view) {\n  const viewRange = view.coordinateBBox;\n  const range = {\n    minX: viewRange.minX,\n    minY: viewRange.minY,\n    centerX: (viewRange.maxX - viewRange.minX) / 2,\n    centerY: (viewRange.maxY - viewRange.minY) / 2,\n    width: viewRange.width,\n    height: viewRange.height,\n  };\n  return range;\n}\n\nfunction getRect(shape) {\n  const path = shape.attr('path');\n  const x0 = path[0][1];\n  const y1 = path[0][2];\n  const x1 = path[1][1];\n  const y0 = path[2][2];\n  const rect = {\n    minX: x0,\n    minY: y0,\n    centerX: (x1 - x0) / 2,\n    centerY: (y1 - y0) / 2,\n    width: Math.abs(x1 - x0),\n    height: Math.abs(y1 - y0),\n  };\n  return rect;\n}\n\nfunction shrinkTemp(container, shapes, rect, range) {\n  const xRatio = rect.width / range.width;\n  const yRatio = rect.height / range.height;\n  const transformMatrix = transform([\n    ['s', xRatio, yRatio],\n    ['t', rect.minX, rect.minY],\n  ]);\n  container.animate({ matrix: transformMatrix }, duration, easing, () => {\n    container.remove();\n  });\n  each(shapes, (shape) => {\n    shape.animate(\n      {\n        opacity: 0,\n      },\n      duration,\n      easing\n    );\n  });\n}\n\nfunction hideLabel(geometry) {\n  const labelContainer = geometry.labelsContainer;\n  labelContainer.set('visible', false);\n}\n\nfunction showLabel(geometry) {\n  const labelContainer = geometry.labelsContainer;\n  labelContainer.set('visible', true);\n}\n","import { assign } from '@antv/util';\nimport { getEventMap, EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst componentMap = {\n  rect: 'polygon',\n  breadcrumb: 'breadcrumb',\n};\n\nconst SHAPE_EVENT_MAP: IEventmap = getEventMap(componentMap);\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","import { each, deepMix, clone, find } from '@antv/util';\nimport { View, IGroup } from '../../../dependents';\nimport { breakText } from '../../../util/common';\n\nconst LEAF_LABEL_OFFSET = 4;\nconst MIN_FONTSIZE = 8;\n\nfunction isLeaf(data, maxLevel) {\n  return !data.children || data.depth >= maxLevel;\n}\n\nfunction textWrapper(label, width, container) {\n  const fontSize = label.attr('fontSize');\n  const textContent: string = label.attr('text');\n  const tShape = container.addShape('text', {\n    attrs: {\n      text: '',\n      x: 0,\n      y: 0,\n      fontSize,\n    },\n  });\n  const textArr = textContent.split('\\n');\n  const wrappedTextArr = textArr.map((wrappedText) => {\n    let text = '';\n    const chars = wrappedText.split('');\n    const breakIndex: number[] = [];\n    for (let i = 0; i < chars.length; i++) {\n      const item = chars[i];\n      tShape.attr('text', (text += item));\n      const currentWidth = tShape.getBBox().width - 1;\n      if (currentWidth > width) {\n        // 如果是第一个字符就大于宽度不做任何换行处理\n        if (i === 0) {\n          break;\n        }\n        breakIndex.push(i);\n        text = '';\n      }\n    }\n\n    return breakText(chars, breakIndex);\n  });\n\n  tShape.remove();\n  return wrappedTextArr.join('\\n');\n}\n\nfunction textAbbreviate(text, fontSize, width, container) {\n  const tailShape = container.addShape('text', {\n    attrs: {\n      text: '...',\n      x: 0,\n      y: 0,\n      fontSize,\n    },\n  });\n  const tailWidth = tailShape.getBBox().width;\n  const tShape = container.addShape('text', {\n    attrs: {\n      text: '',\n      x: 0,\n      y: 0,\n      fontSize,\n    },\n  });\n  let t = '';\n  const abbreviateWidth = width - tailWidth;\n  for (let i = 0; i < text.length; i++) {\n    const item = text[i];\n    tShape.attr('text', (t += item));\n    const currentWidth = tShape.getBBox().width;\n    if (currentWidth >= abbreviateWidth) {\n      const string = t.substr(0, t.length - 1);\n      if (string.length > 0) {\n        return string + '...';\n      }\n    }\n  }\n  tShape.remove();\n  tailShape.remove();\n  return t;\n}\n\nexport interface TreemapLabelConfig {\n  visible?: boolean;\n  formatter?: (...args: any[]) => string;\n  offsetX?: number;\n  offsetY?: number;\n  style?: any;\n}\n\nexport interface ILineLabel extends TreemapLabelConfig {\n  view: View;\n  plot: any;\n}\n\nexport default class TreemapLabel {\n  public options: TreemapLabelConfig;\n  public destroyed: boolean = false;\n  protected plot: any;\n  protected view: View;\n  private container: IGroup;\n\n  constructor(cfg: ILineLabel) {\n    this.view = cfg.view;\n    this.plot = cfg.plot;\n    const defaultOptions = this.getDefaultOptions();\n    this.options = deepMix(defaultOptions, cfg, {});\n    this.init();\n  }\n\n  protected init() {\n    this.container = this.getGeometry().labelsContainer;\n    this.view.on('beforerender', () => {\n      this.clear();\n      this.plot.canvas.draw();\n    });\n  }\n\n  public render() {\n    const elements = this.getGeometry().elements;\n    each(elements, (ele) => {\n      const shape = ele.shape;\n      const data = shape.get('origin').data;\n      const isLeafNode = isLeaf(data, this.plot.options.maxLevel);\n      if (data.showLabel) {\n        const style = clone(this.options.style);\n        const position = this.getPosition(shape, isLeafNode);\n        const formatter = this.options.formatter;\n        const content = formatter ? formatter(data.name) : data.name;\n        const textBaseline = this.getTextBaseLine(isLeafNode);\n        const label = this.container.addShape('text', {\n          attrs: deepMix({}, style, {\n            x: position.x,\n            y: position.y,\n            text: content,\n            fill: 'black',\n            textAlign: 'center',\n            textBaseline,\n            fontWeight: isLeafNode ? 300 : 600,\n          }),\n          name: 'label',\n        });\n        this.adjustLabel(label, shape, isLeafNode);\n      }\n    });\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n  }\n\n  public hide() {\n    this.container.set('visible', false);\n    this.plot.canvas.draw();\n  }\n\n  public show() {\n    this.container.set('visible', true);\n    this.plot.canvas.draw();\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.remove();\n    }\n    this.destroyed = true;\n  }\n\n  public getBBox() {\n    return this.container.getBBox();\n  }\n\n  protected getPosition(shape, isLeafNode) {\n    const shapeBbox = shape.getBBox();\n    let x = 0;\n    let y = 0;\n    if (!isLeafNode) {\n      x = shapeBbox.x + shapeBbox.width / 2;\n      y = shapeBbox.y + 4;\n    } else {\n      x = shapeBbox.minX + shapeBbox.width / 2;\n      y = shapeBbox.minY + shapeBbox.height / 2;\n    }\n    return { x, y };\n  }\n\n  protected getTextBaseLine(isLeafNode) {\n    return isLeafNode ? 'middle' : 'top';\n  }\n\n  protected adjustLabel(label, shape, isLeafNode) {\n    if (isLeafNode) {\n      this.adjustLeafLabel(label, shape);\n    } else {\n      this.adjustParentLabel(label, shape);\n    }\n  }\n\n  private adjustLeafLabel(label, shape) {\n    const bbox = shape.getBBox();\n    const labelBBox = label.getBBox();\n    const labelText = clone(label.attr('text'));\n    const sizeOffset = 2;\n    const fontSize = Math.max(label.attr('fontSize') - sizeOffset, MIN_FONTSIZE);\n    const centerX = bbox.x + bbox.width / 2;\n    const centerY = bbox.y + bbox.height / 2;\n    label.attr({\n      x: centerX,\n      y: centerY,\n      textAlign: 'center',\n      textBaseline: 'middle',\n      lineHeight: fontSize,\n      fontSize,\n    });\n    const wrapperWidth = bbox.width - LEAF_LABEL_OFFSET * 2;\n    if (labelBBox.width > bbox.width && labelBBox.height > bbox.height) {\n      label.attr('text', '');\n      return;\n    } else if (wrapperWidth < fontSize) {\n      label.attr('text', '');\n      return;\n    }\n    if (labelBBox.width > bbox.width) {\n      const wrappedText = textWrapper(label, wrapperWidth, this.container);\n      label.attr({\n        lineHeight: label.attr('fontSize'),\n        text: wrappedText,\n      });\n      const tem_bbox = label.getBBox();\n      if (tem_bbox.height > bbox.height) {\n        const text = textAbbreviate(labelText, fontSize, wrapperWidth, this.container);\n        label.attr('text', text);\n      }\n    }\n  }\n\n  private adjustParentLabel(label, shape) {\n    const shapeBbox = shape.getBBox();\n    const wrapperWidth = shapeBbox.width - LEAF_LABEL_OFFSET * 2;\n    if (label.getBBox().width > wrapperWidth) {\n      const text = textAbbreviate(label.attr('text'), label.attr('fontSize'), wrapperWidth, this.container);\n      label.attr('text', text);\n    }\n  }\n\n  private getDefaultOptions() {\n    const { theme } = this.plot;\n    const labelStyle = theme.label.style;\n    return {\n      offsetX: 0,\n      offsetY: 0,\n      style: clone(labelStyle),\n    };\n  }\n\n  private getGeometry() {\n    return find(this.view.geometries, (geom) => geom.type === 'polygon');\n  }\n}\n","import { deepMix } from '@antv/util';\nimport { PlotConfig } from '../..';\nimport { StepLineViewConfig, StepLineLayer } from './layer';\nimport BasePlot from '../../base/plot';\n\nexport interface StepLineConfig extends StepLineViewConfig, PlotConfig {}\n\nexport default class StepLine extends BasePlot<StepLineConfig> {\n  public static getDefaultOptions: typeof StepLineLayer.getDefaultOptions = StepLineLayer.getDefaultOptions;\n\n  /**\n   * 复写父类方法\n   * @param props\n   */\n  protected createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'step-line';\n    super.createLayers(layerProps);\n  }\n}\n","import { deepMix } from '@antv/util';\n\nimport LineLayer, { LineLayerConfig, LineViewConfig } from '../line/layer';\nimport { LayerConfig } from '../..';\nimport { registerPlotType } from '../../base/global';\n\nexport interface StepLineViewConfig extends LineViewConfig {\n  readonly step?: 'hv' | 'vh' | 'vhv' | 'hvh'; // 默认为 hv\n}\n\nexport interface StepLineLayerConfig extends StepLineViewConfig, LayerConfig {}\n\nexport class StepLineLayer extends LineLayer<StepLineLayerConfig> {\n  public type: string = 'step-line'; // 覆写父类的 type\n\n  public static getDefaultOptions(): Partial<LineLayerConfig> {\n    return deepMix({}, super.getDefaultOptions(), {\n      step: 'hv',\n    });\n  }\n}\n\nregisterPlotType('step-line', StepLineLayer);\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport BarLayer from './layer';\nimport { BarViewConfig } from './interface';\n\nexport interface BarConfig extends BarViewConfig, PlotConfig {}\n\nexport default class Bar extends BasePlot<BarConfig> {\n  public static getDefaultOptions: typeof BarLayer.getDefaultOptions = BarLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'bar';\n    super.createLayers(layerProps);\n  }\n}\n","import responsiveAxis from './axis';\n\nconst preRenderResponsive = [];\n\nconst afterRenderResponsive = [{ name: 'responsiveAxis', method: responsiveAxis }];\n\nexport default {\n  preRender: preRenderResponsive,\n  afterRender: afterRenderResponsive,\n};\n","import ApplyResponsiveAxis from '../../../util/responsive/apply/axis';\nimport BarLayer from '../layer';\n\nexport default function responsiveAxis(layer: BarLayer) {\n  const responsiveTheme = layer.getResponsiveTheme();\n  const canvas = layer.canvas;\n  // x-axis\n  new ApplyResponsiveAxis({\n    plot: layer,\n    responsiveTheme,\n    dim: 'x',\n  });\n  // y-axis\n  new ApplyResponsiveAxis({\n    plot: layer,\n    responsiveTheme,\n    dim: 'y',\n  });\n\n  canvas.draw();\n}\n","import { assign } from '@antv/util';\nimport { getEventMap, EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst componentMap = {\n  bar: 'interval',\n};\n\nconst SHAPE_EVENT_MAP: IEventmap = getEventMap(componentMap);\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport StackedBarLayer, { StackedBarViewConfig } from './layer';\n\nexport interface StackedBarConfig extends StackedBarViewConfig, PlotConfig {}\n\nexport default class StackedBar extends BasePlot<StackedBarConfig> {\n  public static getDefaultOptions: typeof StackedBarLayer.getDefaultOptions = StackedBarLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'stackedBar';\n    super.createLayers(layerProps);\n  }\n}\n","import { registerTheme } from '../../theme';\nimport { DEFAULT_BAR_THEME } from '../bar/theme';\n\nregisterTheme('stackedBar', DEFAULT_BAR_THEME);\n","import { Element, IShape } from '../../../dependents';\nimport { registerLabelComponent } from '../../../components/label/base';\nimport BarLabel from '../../bar/component/label';\n\nexport default class StackedBarLabel extends BarLabel {\n  protected adjustLabel(label: IShape, element: Element) {\n    if (this.options.adjustPosition) {\n      const labelRange = label.getBBox();\n      const shapeRange = this.getElementShapeBBox(element);\n      // label 有 offset\n      if (shapeRange.maxX <= labelRange.maxX) {\n        label.set('visible', false);\n      }\n    }\n  }\n}\n\nregisterLabelComponent('stacked-bar', StackedBarLabel);\n","import { registerLabelComponent } from '../../../components/label/base';\nimport BarAutoLabel from '../../bar/component/label-auto';\nimport { IShape } from '../../../dependents';\n\n/** 自动模式的 StackedBar 数据标签，会根据图形和数据标签自动优化数据标签布局和样式等 */\nexport default class StackedBarAutoLabel extends BarAutoLabel {\n  /** 堆积柱形图全部内置 */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected shouldInShapeLabels(labels: IShape[]): boolean {\n    return true;\n  }\n}\n\nregisterLabelComponent('stacked-bar-auto', StackedBarAutoLabel);\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport GroupedBarLayer, { GroupedBarViewConfig } from './layer';\n\nexport interface GroupedBarConfig extends GroupedBarViewConfig, PlotConfig {}\n\nexport default class GroupedBar extends BasePlot<GroupedBarConfig> {\n  public static getDefaultOptions: typeof GroupedBarLayer.getDefaultOptions = GroupedBarLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'groupedBar';\n    super.createLayers(layerProps);\n  }\n}\n","import { registerTheme } from '../../theme';\nimport { DEFAULT_BAR_THEME } from '../bar/theme';\n\nregisterTheme('groupedBar', DEFAULT_BAR_THEME);\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport PercentStackedBarLayer, { PercentStackedBarLayerConfig } from './layer';\n\nexport interface PercentStackedBarConfig extends PercentStackedBarLayerConfig, PlotConfig {}\n\nexport default class PercentStackedBar<T extends PercentStackedBarConfig = PercentStackedBarConfig> extends BasePlot<\n  T\n> {\n  public static getDefaultOptions: typeof PercentStackedBarLayer.getDefaultOptions =\n    PercentStackedBarLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'percentStackedBar';\n    super.createLayers(layerProps);\n  }\n}\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport RangeBarLayer, { RangeBarViewConfig } from './layer';\n\nexport interface RangeBarConfig extends RangeBarViewConfig, PlotConfig {}\n\nexport default class RangeBar extends BasePlot<RangeBarConfig> {\n  public static getDefaultOptions: typeof RangeBarLayer.getDefaultOptions = RangeBarLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'rangeBar';\n    super.createLayers(layerProps);\n  }\n}\n","import { deepMix, each } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport BaseBarLayer from '../bar/layer';\nimport { BarViewConfig } from '../bar/interface';\nimport RangeBarLabel, { RangeBarLabelConfig } from './component/label';\nimport { setShapeCache } from './animation';\n\nexport interface RangeBarViewConfig extends BarViewConfig {\n  label?: RangeBarLabelConfig;\n}\n\nexport interface RangeBarLayerConfig extends RangeBarViewConfig, LayerConfig {}\n\nexport default class RangeBarLayer extends BaseBarLayer<RangeBarLayerConfig> {\n  public static getDefaultOptions(): Partial<RangeBarViewConfig> {\n    return deepMix(\n      super.getDefaultOptions(),\n      {\n        label: {\n          visible: true,\n          position: 'outer',\n        },\n        xAxis: {\n          visible: true,\n          autoRotateTitle: false,\n          grid: {\n            visible: true,\n          },\n          line: {\n            visible: false,\n          },\n          tickLine: {\n            visible: false,\n          },\n          label: {\n            visible: true,\n            autoRotate: true,\n            autoHide: true,\n          },\n          title: {\n            visible: true,\n            offset: 12,\n          },\n        },\n        yAxis: {\n          visible: true,\n          autoRotateTitle: true,\n          grid: {\n            visible: false,\n          },\n          line: {\n            visible: true,\n          },\n          tickLine: {\n            visible: true,\n          },\n          label: {\n            visible: true,\n            autoHide: true,\n            autoRotate: false,\n          },\n          title: {\n            visible: false,\n            offset: 12,\n          },\n        },\n      },\n      {}\n    );\n  }\n\n  public type: string = 'rangeBar';\n\n  public afterRender() {\n    this.renderLabel();\n    // 为更新动画缓存shape\n    const shapeCaches = [];\n    const geoms = this.view.geometries;\n    each(geoms, (geom) => {\n      const elements = geom.elements;\n      each(elements, (ele) => {\n        shapeCaches.push(ele.shape);\n      });\n    });\n    setShapeCache(shapeCaches);\n    super.afterRender();\n  }\n\n  protected renderLabel() {\n    if (this.options.label && this.options.label.visible) {\n      const label = new RangeBarLabel({\n        view: this.view,\n        plot: this,\n        ...this.options.label,\n      });\n      label.render();\n    }\n  }\n\n  protected animation() {\n    super.animation();\n    this.bar.animate = {\n      appear: {\n        animation: 'clipInFromCenter',\n        duration: 600,\n      },\n      update: {\n        animation: 'updateFromCenter',\n        duration: 600,\n      },\n    };\n  }\n}\n\nregisterPlotType('rangeBar', RangeBarLayer);\n","import { each, deepMix, clone, find } from '@antv/util';\nimport { View, IGroup, Geometry } from '../../../dependents';\nimport { rgb2arr } from '../../../util/color';\nimport BBox from '../../../util/bbox';\n\nconst DEFAULT_OFFSET = 8;\n\nfunction mappingColor(band, gray) {\n  let reflect;\n  each(band, (b) => {\n    const map = b;\n    if (gray >= map.from && gray < map.to) {\n      reflect = map.color;\n    }\n  });\n  return reflect;\n}\n\nexport interface RangeBarLabelConfig {\n  visible: boolean;\n  position?: 'outer' | 'inner';\n  formatter?: (...args: any[]) => string;\n  offsetX?: number;\n  offsetY?: number;\n  style?: any;\n  leftStyle?: any;\n  rightStyle?: any;\n  adjustColor?: boolean;\n  adjustPosition?: boolean;\n}\n\nexport interface IRangeBarLabel extends RangeBarLabelConfig {\n  view: View;\n  plot: any;\n}\n\nexport default class RangeBarLabel {\n  public options: RangeBarLabelConfig;\n  public destroyed: boolean = false;\n  private plot: any;\n  private view: View;\n  private coord: any;\n  private container: IGroup;\n\n  constructor(cfg: IRangeBarLabel) {\n    this.view = cfg.view;\n    this.plot = cfg.plot;\n    const defaultOptions = this.getDefaultOptions();\n    this.options = deepMix(defaultOptions, cfg, {});\n    if (!this.options.leftStyle) {\n      this.options.leftStyle = this.options.style;\n    }\n    if (!this.options.rightStyle) {\n      this.options.rightStyle = this.options.style;\n    }\n    this.init();\n  }\n\n  public init() {\n    this.container = this.getGeometry().labelsContainer;\n    this.view.on('beforerender', () => {\n      this.clear();\n      this.plot.canvas.draw();\n    });\n  }\n\n  public render() {\n    const { elements, coordinate } = this.getGeometry();\n    this.coord = coordinate;\n    each(elements, (ele) => {\n      const { shape } = ele;\n      const positions = this.getPosition(shape);\n      const values = this.getValue(shape);\n      const textAlign = this.getTextAlign();\n      const labels = [];\n      each(positions, (pos, i) => {\n        const style = i === 0 ? this.options.leftStyle : this.options.rightStyle;\n        const color = this.getTextColor(shape, i);\n        if (this.options.position === 'inner' && this.options.adjustColor && color !== 'black') {\n          style.stroke = null;\n        }\n        const formatter = this.options.formatter;\n        const content = formatter ? formatter(values[i]) : values[i];\n        const label = this.container.addShape('text', {\n          attrs: deepMix({}, style, {\n            x: pos.x,\n            y: pos.y,\n            text: content,\n            fill: color,\n            textAlign: textAlign[i],\n            textBaseline: 'middle',\n          }),\n          name: 'label',\n        });\n        labels.push(label);\n        this.doAnimation(label);\n      });\n      shape.set('labelShapes', labels);\n      this.adjustPosition(labels[0], labels[1], shape);\n    });\n    this.plot.canvas.draw();\n  }\n\n  public hide() {\n    this.container.set('visible', false);\n    this.plot.canvas.draw();\n  }\n\n  public show() {\n    this.container.set('visible', true);\n    this.plot.canvas.draw();\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.remove();\n    }\n    this.destroyed = true;\n  }\n\n  public getBBox() {\n    return this.container.getBBox();\n  }\n\n  protected getShapeBbox(shape) {\n    const points = [];\n    each(shape.get('origin').points, (p) => {\n      points.push(this.coord.convertPoint(p));\n    });\n    const bbox = new BBox(\n      points[0].x,\n      points[1].y,\n      Math.abs(points[2].x - points[0].x),\n      Math.abs(points[0].y - points[1].y)\n    );\n    return bbox;\n  }\n\n  private getDefaultOptions() {\n    const { theme } = this.plot;\n    const labelStyle = theme.label.style;\n    return {\n      position: 'outer',\n      offsetX: DEFAULT_OFFSET,\n      offsetY: 0,\n      style: clone(labelStyle),\n      adjustColor: true,\n      adjustPosition: true,\n    };\n  }\n\n  private getPosition(shape) {\n    const bbox = this.getShapeBbox(shape);\n    const { minX, maxX, minY, height } = bbox;\n    const { offsetX, offsetY } = this.options;\n    const y = minY + height / 2 + offsetY;\n    let x1, x2;\n    if (this.options.position === 'outer') {\n      x1 = minX - offsetX;\n      x2 = maxX + offsetX;\n    } else {\n      x1 = minX + offsetX;\n      x2 = maxX - offsetX;\n    }\n    return [\n      { x: x1, y },\n      { x: x2, y },\n    ];\n  }\n\n  private getValue(shape) {\n    const { xField } = this.plot.options;\n    return shape.get('origin').data[xField];\n  }\n\n  private getTextAlign() {\n    if (this.options.position === 'outer') {\n      return ['right', 'left'];\n    } else {\n      return ['left', 'right'];\n    }\n  }\n\n  private getTextColor(shape, index) {\n    if (this.options.adjustColor && this.options.position === 'inner') {\n      const shapeColor = shape.attr('fill');\n      const shapeOpacity = shape.attr('opacity') ? shape.attr('opacity') : 1;\n      const rgb = rgb2arr(shapeColor);\n      const gray = Math.round(rgb[0] * 0.299 + rgb[1] * 0.587 + rgb[2] * 0.114) / shapeOpacity;\n      const colorBand = [\n        { from: 0, to: 85, color: 'white' },\n        { from: 85, to: 170, color: '#F6F6F6' },\n        { from: 170, to: 255, color: 'black' },\n      ];\n      const reflect = mappingColor(colorBand, gray);\n      return reflect;\n    }\n    const defaultColor = index === 0 ? this.options.leftStyle.fill : this.options.rightStyle.fill;\n    return defaultColor;\n  }\n\n  private doAnimation(label) {\n    if (this.plot.animation && this.plot.animation === false) {\n      return;\n    }\n    label.attr('fillOpacity', 0);\n    label.attr('strokeOpacity', 0);\n    label.stopAnimate();\n    label.animate(\n      {\n        fillOpacity: 1,\n        strokeOpacity: 1,\n      },\n      800,\n      'easeLinear',\n      500\n    );\n  }\n\n  private adjustPosition(la, lb, shape) {\n    const origin = shape.get('origin');\n    const shapeMinX = origin.x[0];\n    const shapeMaxX = origin.x[1];\n    const shapeWidth = Math.abs(shapeMaxX - shapeMinX);\n    const panelRange = this.view.coordinateBBox;\n    const boxes = [la.getBBox(), lb.getBBox()];\n    let ax = la.attr('x');\n    let bx = lb.attr('x');\n    if (this.options.adjustPosition && this.options.position === 'inner') {\n      const totalLength = boxes[0].width + boxes[1].width;\n      const isOverlap = boxes[0].maxX - boxes[1].minX > 2;\n      const isTooShort = totalLength > shapeWidth;\n      if (isOverlap || isTooShort) {\n        ax = shapeMinX - this.options.offsetX;\n        la.attr('fill', this.options.leftStyle.fill);\n        la.attr('textAlign', 'right');\n        boxes[0] = la.getBBox();\n        bx = shapeMaxX + this.options.offsetX;\n        lb.attr('fill', this.options.rightStyle.fill);\n        lb.attr('textAlign', 'left');\n        boxes[1] = lb.getBBox();\n      }\n    }\n    if (boxes[0].minX < panelRange.minX) {\n      ax = panelRange.minX + DEFAULT_OFFSET;\n      la.attr('textAlign', 'left');\n    }\n    la.attr('x', ax);\n    lb.attr('x', bx);\n    this.plot.canvas.draw();\n  }\n\n  private getGeometry() {\n    return find(this.view.geometries, (geom) => geom.type === 'interval') as Geometry;\n  }\n}\n","import { registerAnimation, IShape } from '../../dependents';\nimport { clone, each } from '@antv/util';\n\n// 记录之前的状态\nlet shapeCache: IShape[];\n\nfunction clipInFromCenter(shape, animateCfg) {\n  const bbox = shape.getBBox();\n  const centerX = bbox.minX + bbox.width / 2;\n  shape.setClip({\n    type: 'rect',\n    attrs: {\n      x: centerX,\n      y: bbox.minY,\n      width: 0,\n      height: bbox.height,\n    },\n  });\n  const cliper = shape.get('clipShape');\n  cliper.animate(\n    {\n      width: bbox.width,\n      x: bbox.minX,\n    },\n    animateCfg.duration,\n    animateCfg.easing,\n    () => {\n      shape.setClip(null);\n    },\n    animateCfg.delay\n  );\n}\n\nclipInFromCenter.animationName = 'clipInFromCenter';\n\nexport function setShapeCache(shapes) {\n  shapeCache = shapes;\n}\n\nfunction updateFromCenter(shape, animateCfg) {\n  const fromPath = getShapeFromCache(shape).attr('path');\n  const toPath = clone(shape.attr('path'));\n  shape.attr('path', fromPath);\n  shape.animate(\n    {\n      path: toPath,\n    },\n    animateCfg.duration,\n    animateCfg.easing,\n    animateCfg.callback,\n    100\n  );\n}\n\nfunction getShapeFromCache(shape) {\n  const { id } = shape;\n  let target;\n  each(shapeCache, (s) => {\n    if (s.id === id) {\n      target = s;\n    }\n  });\n  return target;\n}\n\nupdateFromCenter.animationName = 'updateFromCenter';\n\nregisterAnimation('clipInFromCenter', clipInFromCenter);\nregisterAnimation('updateFromCenter', updateFromCenter);\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport AreaLayer from './layer';\nimport { AreaViewConfig } from './interface';\n\nexport interface AreaConfig extends AreaViewConfig, PlotConfig {}\n\nexport default class Area extends BasePlot<AreaConfig> {\n  public static getDefaultOptions: typeof AreaLayer.getDefaultOptions = AreaLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'area';\n    super.createLayers(layerProps);\n  }\n}\n","import responsiveAxis from './axis';\n\nconst preRenderResponsive = [];\n\nconst afterRenderResponsive = [{ name: 'responsiveAxis', method: responsiveAxis }];\n\nexport default {\n  preRender: preRenderResponsive,\n  afterRender: afterRenderResponsive,\n};\n","import ApplyResponsiveAxis from '../../../util/responsive/apply/axis';\nimport AreaLayer from '../layer';\n\nexport default function responsiveAxis(layer: AreaLayer) {\n  const responsiveTheme = layer.getResponsiveTheme();\n  const canvas = layer.canvas;\n  // x-axis\n  new ApplyResponsiveAxis({\n    plot: layer,\n    responsiveTheme,\n    dim: 'x',\n  });\n  // y-axis\n  new ApplyResponsiveAxis({\n    plot: layer,\n    responsiveTheme,\n    dim: 'y',\n  });\n\n  canvas.draw();\n}\n","import { assign } from '@antv/util';\nimport { getEventMap, EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst componentMap = {\n  area: 'area',\n  line: 'line',\n  point: 'point',\n};\n\nconst SHAPE_EVENT_MAP: IEventmap = getEventMap(componentMap);\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport StackedAreaLayer, { StackedAreaLayerConfig } from './layer';\n\nexport interface StackedAreaConfig extends StackedAreaLayerConfig, PlotConfig {}\n\nexport default class StackedArea extends BasePlot<StackedAreaConfig> {\n  public static getDefaultOptions: typeof StackedAreaLayer.getDefaultOptions = StackedAreaLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'stackedArea';\n    super.createLayers(layerProps);\n  }\n}\n","import AreaLineLabel from './label/line-label';\nimport AreaLabel from './label/area-label';\n\nconst ComponentsInfo = {\n  lineLabel: { Ctr: AreaLineLabel },\n  areaLabel: { Ctr: AreaLabel },\n};\n\nexport function getPlotComponents(plot, type, cfg) {\n  if (plot.options[type] && plot.options[type].visible) {\n    const componentInfo = ComponentsInfo[type];\n    const component = new componentInfo.Ctr(cfg);\n    if (componentInfo.padding) {\n      plot.paddingController.registerPadding(component, componentInfo.padding);\n    }\n    return component;\n  }\n}\n","import { reduce, size } from '@antv/util';\nimport LineLabel from '../../../line/component/label/line-label';\n\n/**\n * 复用扎线图的 label，并修改取值方式\n */\nexport default class AreaLineLabel extends LineLabel {\n  protected getShapeInfo(shape) {\n    const originPoints = shape.get('origin').points;\n    const lastPoint = originPoints[originPoints.length - 1];\n    const color = shape.attr('stroke');\n    const { stackField } = this.plot.options;\n    const name = shape.get('origin').data[0][stackField];\n\n    const y =\n      reduce(\n        lastPoint.y,\n        (r: number, a: number): number => {\n          return r + a;\n        },\n        0\n      ) / size(lastPoint.y);\n\n    return { x: lastPoint.x, y, color, name };\n  }\n}\n","import { each, deepMix, clone, find } from '@antv/util';\nimport { View, IGroup, Geometry } from '../../../../dependents';\n\nconst DEFAULT_SIZE = 12;\nconst TOLERANCE = 0.01;\nconst MAX_ITERATION = 100;\nconst MIN_HEIGHT = 12;\n\nfunction getRange(points) {\n  let maxHeight = -Infinity;\n  let min = Infinity;\n  let max = -Infinity;\n  each(points, (p) => {\n    min = Math.min(p.x, min);\n    max = Math.max(p.x, max);\n    const height = Math.abs(p.y[0] - p.y[1]);\n    maxHeight = Math.max(maxHeight, height);\n  });\n  return {\n    xRange: [min, max],\n    maxHeight,\n  };\n}\n\nfunction interpolateY(x, points, index) {\n  let leftPoint = points[0];\n  let rightPoint = points[points.length - 1];\n  each(points, (p) => {\n    if (p.x === x) {\n      return p.y[index];\n    }\n    if (p.x < x && p.x > leftPoint.x) {\n      leftPoint = p;\n    }\n    if (p.x > x && p.x < rightPoint.x) {\n      rightPoint = p;\n    }\n  });\n  const t = (x - leftPoint.x) / (rightPoint.x - leftPoint.x);\n  return leftPoint.y[index] * (1 - t) + rightPoint.y[index] * t;\n}\n\nfunction getXIndex(data, x) {\n  // tslint:disable-next-line: prefer-for-of\n  let i;\n  for (i = 0; i < data.length; i++) {\n    const d = data[i];\n    if (d.x === x || d.x > x) {\n      break;\n    }\n  }\n  return i;\n}\n\nexport interface AreaLabelConfig {\n  visible: boolean;\n  formatter?: (...args: any[]) => string;\n  offsetX?: number;\n  offsetY?: number;\n  style?: any;\n  autoScale?: boolean;\n}\n\nexport interface IAreaLabel extends AreaLabelConfig {\n  view: View;\n  plot: any;\n}\n\nexport default class AreaLabel {\n  public options: AreaLabelConfig;\n  public destroyed: boolean = false;\n  protected plot: any;\n  protected view: View;\n  private container: IGroup;\n  private scaleFactor: number[] = [];\n\n  constructor(cfg: IAreaLabel) {\n    this.view = cfg.view;\n    this.plot = cfg.plot;\n    const defaultOptions = this.getDefaultOptions();\n    this.options = deepMix(defaultOptions, cfg, {});\n    this.init();\n  }\n\n  protected init() {\n    this.container = this.getGeometry().labelsContainer;\n    this.view.on('beforerender', () => {\n      this.clear();\n      this.plot.canvas.draw();\n    });\n  }\n\n  public render() {\n    const stackField = this.plot.options.stackField;\n    const groupedPoints = this.getGeometry().dataArray;\n    const labelPoints = [];\n    each(groupedPoints, (pointArray, name) => {\n      const labelPoint = this.drawLabel(pointArray, name);\n      if (labelPoint) {\n        labelPoints.push(deepMix({}, pointArray[0], labelPoint));\n        this.scaleFactor.push(labelPoint.scaleFactor);\n      }\n    });\n    const labelShapes = [];\n    each(labelPoints, (p, index) => {\n      const { style, offsetX, offsetY } = this.options;\n      const labelSize = this.getFontSize(index);\n      const formatter = this.options.formatter;\n      const content = formatter ? formatter(p._origin[stackField]) : p._origin[stackField];\n      const text = this.container.addShape('text', {\n        attrs: deepMix(\n          {},\n          {\n            x: p.x + offsetX,\n            y: p.y + offsetY,\n            text: content,\n            fill: p.color,\n            fontSize: labelSize,\n            textAlign: 'center',\n            textBaseline: 'top',\n          },\n          style\n        ),\n        name: 'label',\n      });\n      labelShapes.push(text);\n    });\n    this.plot.canvas.draw();\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n  }\n\n  public hide() {\n    this.container.set('visible', false);\n    this.plot.canvas.draw();\n  }\n\n  public show() {\n    this.container.set('visible', true);\n    this.plot.canvas.draw();\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.remove();\n    }\n    this.destroyed = true;\n  }\n\n  public getBBox() {\n    return this.container.getBBox();\n  }\n\n  protected getDefaultOptions() {\n    const { theme } = this.plot;\n    const labelStyle = clone(theme.label.style);\n    labelStyle.stroke = null;\n    delete labelStyle.fill;\n    return {\n      offsetX: 0,\n      offsetY: 0,\n      style: labelStyle,\n      autoScale: true,\n    };\n  }\n\n  protected drawLabel(points, name) {\n    const { xRange, maxHeight } = getRange(points);\n    // 根据area宽度在x方向各点间做插值\n    const resolution = xRange[1] - xRange[0];\n    const interpolatedPoints = this.getInterpolatedPoints(xRange[0], resolution, points);\n    // 获取label的bbox\n    const bbox = this.getLabelBbox(name);\n    const fitOption = {\n      xRange,\n      aspect: bbox.width / bbox.height,\n      data: interpolatedPoints,\n      justTest: true,\n    };\n    const height = this.bisection(MIN_HEIGHT, maxHeight, this.testFit, fitOption, TOLERANCE, MAX_ITERATION);\n    if (height === null) {\n      return;\n    }\n    fitOption.justTest = false;\n    const fit: any = this.testFit(fitOption);\n    fit.x = fit.x;\n    fit.y = fit.y0 + (fit.y1 - fit.y0) / 2;\n    fit.scaleFactor = (height / bbox.height) * 0.2;\n    return fit;\n  }\n\n  private getInterpolatedPoints(minX, resolution, points) {\n    const interpolatedPoints = [];\n    const step = 2;\n    for (let i = minX; i < resolution; i += step) {\n      const y0 = interpolateY(i, points, 0);\n      const y1 = interpolateY(i, points, 1);\n      interpolatedPoints.push({\n        x: i,\n        y: [y0, y1],\n      });\n    }\n    return interpolatedPoints;\n  }\n\n  private bisection(min, max, test, testOption, tolerance, maxIteration) {\n    for (let i = 0; i < maxIteration; i++) {\n      const middle = (min + max) / 2;\n      const options = testOption;\n      options.height = middle;\n      options.width = middle * options.aspect;\n      const passesTest = test(options);\n      const withinTolerance = (max - min) / 2 < tolerance;\n      if (passesTest && withinTolerance) {\n        return middle;\n      }\n      if (passesTest) {\n        min = middle;\n      } else {\n        max = middle;\n      }\n    }\n    return null;\n  }\n\n  private testFit(option) {\n    const { xRange, width, height, data, justTest } = option;\n    for (let i = 0; i < data.length; i++) {\n      const d = data[i];\n      const x0 = d.x;\n      const x1 = x0 + width;\n      if (x1 > xRange[1]) {\n        break;\n      }\n      const x1_index = getXIndex(data, x1);\n      let ceiling = -Infinity;\n      let ceilingFloor = null; // 保存ceiling时对应的bottom位置，ceil和floor不一定是一对坐标\n      let floor = Infinity;\n      for (let j = i; j < x1_index; j++) {\n        const top = data[j].y[1];\n        const bottom = data[j].y[0];\n        if (bottom < floor) {\n          floor = bottom;\n        }\n        if (top > ceiling) {\n          ceiling = top;\n          ceilingFloor = bottom;\n        }\n        if (floor - ceiling < height) {\n          break;\n        }\n      }\n      if (floor - ceiling >= height) {\n        if (justTest) {\n          return true;\n        }\n        return {\n          x: x0,\n          y0: ceiling,\n          y1: ceilingFloor,\n          width,\n          height,\n        };\n      }\n    }\n    return false;\n  }\n\n  private getLabelBbox(text) {\n    const labelStyle = clone(this.plot.theme.label.textStyle);\n    labelStyle.fontSize = DEFAULT_SIZE;\n    const tShape = this.container.addShape('text', {\n      attrs: {\n        text,\n        x: 0,\n        y: 0,\n        ...labelStyle,\n      },\n    });\n    const bbox = tShape.getBBox();\n    tShape.remove();\n    return bbox;\n  }\n\n  private getGeometry() {\n    return find(this.view.geometries, (geom) => geom.type === 'area') as Geometry;\n  }\n\n  protected getFontSize(index) {\n    if (this.options.autoScale) {\n      const scaleFactor = this.scaleFactor[index];\n      return DEFAULT_SIZE * scaleFactor;\n    }\n    return DEFAULT_SIZE;\n  }\n}\n","import { registerLabelComponent } from '../../../../components/label/base';\nimport AreaPointLabel from '../../../area/component/label/area-point';\n\nexport default class StackedAreaPointLabel extends AreaPointLabel {}\n\nregisterLabelComponent('stackedArea-point', StackedAreaPointLabel);\n","import { Geometry, IShape } from '../../../../dependents';\nimport { registerLabelComponent } from '../../../../components/label/base';\nimport AreaPointAutoLabel from '../../../area/component/label/area-point-auto';\n\nexport default class StackedAreaPointAutoLabel extends AreaPointAutoLabel {\n  /** 对堆积面积使用自定义的排序 */\n  protected sortLabels(geometry: Geometry, labels: IShape[]): IShape[] {\n    const sorted: IShape[] = [];\n    if (labels.length > 0) {\n      sorted.push(labels.shift());\n    }\n    if (labels.length > 0) {\n      sorted.push(labels.pop());\n    }\n    sorted.push(...labels);\n\n    return sorted;\n  }\n}\n\nregisterLabelComponent('stackedArea-point-auto', StackedAreaPointAutoLabel);\n","import { registerTheme } from '../../theme';\nimport { DEFAULT_AREA_THEME } from '../area/theme';\n\nregisterTheme('stackedArea', DEFAULT_AREA_THEME);\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport PercentStackedAreaLayer, { PercentStackedAreaLayerConfig } from './layer';\n\nexport interface PercentStackedAreaConfig extends PercentStackedAreaLayerConfig, PlotConfig {}\n\nexport default class PercentStackedArea<T extends PercentStackedAreaConfig = PercentStackedAreaConfig> extends BasePlot<\n  T\n> {\n  public static getDefaultOptions: typeof PercentStackedAreaLayer.getDefaultOptions =\n    PercentStackedAreaLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'percentStackedArea';\n    super.createLayers(layerProps);\n  }\n}\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport ColumnLayer from './layer';\nimport { ColumnViewConfig } from './interface';\n\nexport interface ColumnConfig extends ColumnViewConfig, PlotConfig {}\n\nexport default class Column extends BasePlot<ColumnConfig> {\n  public static getDefaultOptions: typeof ColumnLayer.getDefaultOptions = ColumnLayer.getDefaultOptions;\n\n  public createLayers(props: ColumnConfig) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'column';\n    super.createLayers(layerProps);\n  }\n}\n","import responsiveAxis from './axis';\nimport responsiveLabel from './label';\n\nconst preRenderResponsive = [];\n\nconst afterRenderResponsive = [\n  { name: 'responsiveAxis', method: responsiveAxis },\n  { name: 'responsiveLabel', method: responsiveLabel },\n];\n\nexport default {\n  preRender: preRenderResponsive,\n  afterRender: afterRenderResponsive,\n};\n","import ApplyResponsiveAxis from '../../../util/responsive/apply/axis';\nimport ColumnLayer from '../layer';\n\nexport default function responsiveAxis(layer: ColumnLayer) {\n  const responsiveTheme = layer.getResponsiveTheme();\n  const canvas = layer.canvas;\n  // x-axis\n  new ApplyResponsiveAxis({\n    plot: layer,\n    responsiveTheme,\n    dim: 'x',\n  });\n  // y-axis\n  new ApplyResponsiveAxis({\n    plot: layer,\n    responsiveTheme,\n    dim: 'y',\n  });\n\n  canvas.draw();\n}\n","import ApplyResponsiveLabel from '../../../util/responsive/apply/label';\nimport ColumnLayer from '../layer';\n\nclass ApplyResponsiveColumnLabel extends ApplyResponsiveLabel {\n  protected getType() {\n    if (this.plot.column.label) {\n      if (!this.plot.column.label.position || this.plot.column.label.position === 'top') {\n        return 'top';\n      }\n    }\n    return 'inner';\n  }\n}\n\nexport default function responsivePointLabel(layer: ColumnLayer) {\n  const responsiveTheme = layer.getResponsiveTheme();\n  new ApplyResponsiveColumnLabel({\n    plot: layer,\n    responsiveTheme,\n  });\n}\n","import { registerResponsiveTheme } from '../../../util/responsive/theme';\n\n/** 组装theme */\nconst columnTheme = {\n  label: {\n    top: {\n      constraints: [{ name: 'elementCollision' }],\n      rules: {\n        elementCollision: [\n          { name: 'nodeJitterUpward' },\n          {\n            name: 'nodesResamplingByState',\n            option: {\n              keep: ['min', 'max', 'median'],\n            },\n          },\n          {\n            name: 'textHide',\n          },\n        ],\n      },\n    },\n  },\n};\n\nregisterResponsiveTheme('column', columnTheme);\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport GroupedColumnLayer, { GroupedColumnViewConfig } from './layer';\n\nexport interface GroupedColumnConfig extends GroupedColumnViewConfig, PlotConfig {}\n\nexport default class GroupedColumn extends BasePlot<GroupedColumnConfig> {\n  public static getDefaultOptions: typeof GroupedColumnLayer.getDefaultOptions = GroupedColumnLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'groupedColumn';\n    super.createLayers(layerProps);\n  }\n}\n","import { registerTheme } from '../../theme';\nimport { DEFAULT_COLUMN_THEME } from '../column/theme';\n\nregisterTheme('groupedColumn', DEFAULT_COLUMN_THEME);\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport StackedColumnLayer, { StackedColumnViewConfig } from './layer';\n\nexport interface StackedColumnConfig extends StackedColumnViewConfig, PlotConfig {}\n\nexport default class StackedColumn extends BasePlot<StackedColumnConfig> {\n  public static getDefaultOptions: typeof StackedColumnLayer.getDefaultOptions = StackedColumnLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'stackedColumn';\n    super.createLayers(layerProps);\n  }\n}\n","/**\n * 区域连接组件，用于堆叠柱状图和堆叠条形图\n */\nimport { each, assign, mix, find } from '@antv/util';\nimport { IGroup, IShape, View } from '../dependents';\nimport { compare } from '../base/controller/state';\n\nfunction parsePoints(shape, coord) {\n  const parsedPoints = [];\n  const points = shape.get('origin').points;\n  each(points, (p) => {\n    parsedPoints.push(coord.convertPoint(p));\n  });\n  return parsedPoints;\n}\n\nfunction getDefaultStyle() {\n  return {\n    areaStyle: {\n      opacity: 0.2,\n    },\n    lineStyle: {\n      lineWidth: 2,\n      opacity: 0.1,\n    },\n  };\n}\n\nexport default class ConnectedArea {\n  private view: View;\n  private container: IGroup;\n  private field: string; // 堆叠字段\n  private areas: IShape[] = [];\n  private lines: IShape[] = [];\n  private areaStyle: any;\n  private _areaStyle: any = {};\n  private lineStyle: any;\n  private _lineStyle: any = {};\n  private triggerOn: string;\n  private animation: boolean;\n\n  constructor(cfg) {\n    assign(this, cfg);\n    this._init();\n  }\n\n  public draw() {\n    const groupedShapes = this._getGroupedShapes();\n    each(groupedShapes, (shapes, name) => {\n      if (shapes.length > 0) {\n        this._drawConnection(shapes, name);\n      }\n    });\n    if (this.triggerOn) {\n      this._addInteraction();\n    } else if (this.animation) {\n      // 如果定义了triggerOn的方式，则组件是响应交互的，初始化为不可见状态，因此无需动画\n      this._initialAnimation();\n    }\n  }\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n    this.areas = [];\n    this.lines = [];\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.remove();\n    }\n  }\n\n  public setState(state, condition) {\n    if (state === 'active') {\n      this._onActive(condition);\n    }\n    if (state === 'disabled') {\n      this._onDisabled(condition);\n    }\n    if (state === 'selected') {\n      this._onSelected(condition);\n    }\n  }\n\n  private _init() {\n    const layer = this.view.backgroundGroup;\n    this.container = layer.addGroup();\n    this.draw();\n    this.view.on('beforerender', () => {\n      this.clear();\n    });\n  }\n\n  private _getGroupedShapes() {\n    // 根据堆叠字段对shape进行分组\n    const { values } = this.view.getScaleByField(this.field);\n    const geometry = this.view.geometries[0];\n    const shapes = geometry.getShapes();\n    // 创建分组\n    const groups = {};\n    each(values, (v) => {\n      groups[v] = [];\n    });\n    // 执行分组\n    each(shapes, (shape) => {\n      const origin = shape.get('origin').data;\n      const key = origin[this.field];\n      groups[key].push(shape);\n    });\n    return groups;\n  }\n\n  private _drawConnection(shapes, name) {\n    // tslint:disable-next-line: prefer-for-of\n    const originColor = shapes[0].attr('fill');\n    this._areaStyle[name] = this._getShapeStyle(originColor, 'area');\n    this._lineStyle[name] = this._getShapeStyle(originColor, 'line');\n    const coord = this.view.geometries[0].coordinate;\n    for (let i = 0; i < shapes.length - 1; i++) {\n      const current = parsePoints(shapes[i], coord);\n      const next = parsePoints(shapes[i + 1], coord);\n      const areaStyle = mix({}, this._areaStyle[name]);\n      const lineStyle = mix({}, this._lineStyle[name]);\n      if (this.triggerOn) {\n        areaStyle.opacity = 0;\n        lineStyle.opacity = 0;\n      }\n      const area = this.container.addShape('path', {\n        attrs: mix({} as any, areaStyle, {\n          path: [\n            ['M', current[2].x, current[2].y],\n            ['L', next[1].x, next[1].y],\n            ['L', next[0].x, next[0].y],\n            ['L', current[3].x, current[3].y],\n          ],\n        }),\n        name: 'connectedArea',\n      });\n      const line = this.container.addShape('path', {\n        attrs: mix({} as any, lineStyle, {\n          path: [\n            ['M', current[2].x, current[2].y],\n            ['L', next[1].x, next[1].y],\n          ],\n          // stroke: shapes[i].attr('fill'),\n        }),\n        name: 'connectedArea',\n      });\n      // 在辅助图形上记录数据，用以交互和响应状态量\n      const originData = shapes[i].get('origin').data;\n      area.set('data', originData);\n      line.set('data', originData);\n      this.areas.push(area);\n      this.lines.push(line);\n    }\n  }\n\n  private _getShapeStyle(originColor, shapeType) {\n    const styleName = `${shapeType}Style`;\n    // 如果用户自己指定了样式，则不采用默认颜色映射\n    if (this[styleName]) {\n      return this[styleName];\n    }\n    const defaultStyle = getDefaultStyle()[styleName];\n    let mappedStyle: any = { fill: originColor };\n    if (shapeType === 'line') {\n      mappedStyle = { stroke: originColor };\n    }\n\n    return mix(defaultStyle, mappedStyle);\n  }\n\n  private _addInteraction() {\n    const eventName = this.triggerOn;\n    this.view.on(`interval:${eventName}`, (e) => {\n      const origin = e.target.get('origin').data[this.field];\n      this.setState('active', {\n        name: this.field,\n        exp: origin,\n      });\n      this.setState('disabled', {\n        name: this.field,\n        exp: (d) => {\n          return d !== origin;\n        },\n      });\n      this.view.canvas.draw();\n    });\n    // 当鼠标移动到其他区域时取消显示\n    this.view.on('mousemove', (e) => {\n      if (e.gEvent.target.get('name') !== 'interval') {\n        this.setState('disabled', {\n          name: this.field,\n          exp: () => {\n            return true;\n          },\n        });\n      }\n    });\n  }\n\n  private _initialAnimation() {\n    // clipIn动画\n    const { x, y, width, height } = this.view.coordinateBBox;\n    this.container.setClip({\n      type: 'rect',\n      attrs: {\n        x,\n        y,\n        width: 0,\n        height,\n      },\n    });\n    this.container.set('animating', true);\n    this.container.getClip().animate(\n      {\n        width,\n      },\n      600,\n      'easeQuadOut',\n      () => {}, // eslint-disable-line @typescript-eslint/no-empty-function\n      400\n    );\n  }\n\n  private _onActive(condition) {\n    each(this.areas, (area) => {\n      const shapeData = area.get('data');\n      const styleField = shapeData[this.field];\n      if (compare(shapeData, condition)) {\n        const opacity = this._areaStyle[styleField].opacity || 1;\n        // area.attr('opacity',this._areaStyle[styleField].opacity || 1);\n        area.stopAnimate();\n        area.animate({ opacity }, 400, 'easeQuadOut');\n      }\n    });\n    each(this.lines, (line) => {\n      const shapeData = line.get('data');\n      const styleField = shapeData[this.field];\n      if (compare(shapeData, condition)) {\n        const opacity = this._lineStyle[styleField].opacity || 1;\n        // line.attr('opacity',this._lineStyle[styleField].opacity || 1);\n        line.stopAnimate();\n        line.animate({ opacity }, 400, 'easeQuadOut');\n      }\n    });\n  }\n\n  private _onDisabled(condition) {\n    each(this.areas, (area) => {\n      const shapeData = area.get('data');\n      if (compare(shapeData, condition)) {\n        // area.attr('opacity',0);\n        area.stopAnimate();\n        area.animate(\n          {\n            opacity: 0,\n          },\n          400,\n          'easeQuadOut'\n        );\n      }\n    });\n    each(this.lines, (line) => {\n      const shapeData = line.get('data');\n      if (compare(shapeData, condition)) {\n        // line.attr('opacity',0);\n        line.stopAnimate();\n        line.animate(\n          {\n            opacity: 0,\n          },\n          400,\n          'easeQuadOut'\n        );\n      }\n    });\n  }\n\n  private _onSelected(condition) {\n    this._onActive(condition);\n  }\n\n  private getGeometry() {\n    return find(this.view.geometries, (geom) => geom.type === 'interval');\n  }\n}\n","import { registerTheme } from '../../theme';\nimport { DEFAULT_COLUMN_THEME } from '../column/theme';\n\nregisterTheme('stackedColumn', DEFAULT_COLUMN_THEME);\n","import { registerLabelComponent } from '../../../components/label/base';\nimport ColumnAutoLabel from '../../column/component/label-auto';\nimport { IShape } from '../../../dependents';\n\n/** 自动模式的 StackedColumn 数据标签，会根据图形和数据标签自动优化数据标签布局和样式等 */\nexport default class StackedColumnAutoLabel extends ColumnAutoLabel {\n  /** 堆积柱形图全部内置 */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected shouldInShapeLabels(labels: IShape[]): boolean {\n    return true;\n  }\n}\n\nregisterLabelComponent('stacked-column-auto', StackedColumnAutoLabel);\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport RangeColumnLayer, { RangeColumnViewConfig } from './layer';\n\nexport interface RangeColumnConfig extends RangeColumnViewConfig, PlotConfig {}\n\nexport default class RangeColumn extends BasePlot<RangeColumnConfig> {\n  public static getDefaultOptions: typeof RangeColumnLayer.getDefaultOptions = RangeColumnLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'rangeColumn';\n    super.createLayers(layerProps);\n  }\n}\n","import { deepMix, each } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport BaseColumnLayer from '../column/layer';\nimport { ColumnViewConfig } from '../column/interface';\nimport RangeColumnLabel, { RangeColumnLabelConfig } from './component/label';\nimport { setShapeCache } from './animation';\n\nexport interface RangeColumnViewConfig extends ColumnViewConfig {\n  label?: RangeColumnLabelConfig;\n}\n\nexport interface RangeColumnLayerConfig extends RangeColumnViewConfig, LayerConfig {}\n\nexport default class RangeColumnLayer extends BaseColumnLayer<RangeColumnLayerConfig> {\n  public static getDefaultOptions(): Partial<RangeColumnViewConfig> {\n    return deepMix(\n      super.getDefaultOptions(),\n      {\n        label: {\n          visible: true,\n          position: 'outer',\n        },\n      },\n      {}\n    );\n  }\n\n  public type: string = 'rangeColumn';\n\n  public afterRender() {\n    this.renderLabel();\n    // 为更新动画缓存shape\n    const shapeCaches = [];\n    const geoms = this.view.geometries;\n    each(geoms, (geom) => {\n      const elements = geom.elements;\n      each(elements, (ele) => {\n        shapeCaches.push(ele.shape);\n      });\n    });\n    setShapeCache(shapeCaches);\n    super.afterRender();\n  }\n\n  protected animation() {\n    super.animation();\n    this.column.animate = {\n      appear: {\n        animation: 'clipInFromCenterVertical',\n        duration: 600,\n      },\n      update: {\n        animation: 'updateFromCenterVertical',\n        duration: 600,\n      },\n    };\n  }\n\n  protected renderLabel() {\n    if (this.options.label && this.options.label.visible) {\n      const label = new RangeColumnLabel({\n        view: this.view,\n        plot: this,\n        ...this.options.label,\n      });\n      label.render();\n    }\n  }\n}\n\nregisterPlotType('rangeColumn', RangeColumnLayer);\n","import { each, deepMix, clone, find } from '@antv/util';\nimport { View, IGroup, Geometry } from '../../../dependents';\nimport { rgb2arr } from '../../../util/color';\nimport BBox from '../../../util/bbox';\n\nconst DEFAULT_OFFSET = 8;\n\nfunction mappingColor(band, gray) {\n  let reflect;\n  each(band, (b) => {\n    const map = b;\n    if (gray >= map.from && gray < map.to) {\n      reflect = map.color;\n    }\n  });\n  return reflect;\n}\n\nexport interface RangeColumnLabelConfig {\n  visible: boolean;\n  position?: 'outer' | 'inner';\n  formatter?: (...args: any[]) => string;\n  offsetX?: number;\n  offsetY?: number;\n  style?: any;\n  topStyle?: any;\n  bottomStyle?: any;\n  adjustColor?: boolean;\n  adjustPosition?: boolean;\n}\n\nexport interface IRangeColumnLabel extends RangeColumnLabelConfig {\n  view: View;\n  plot: any;\n}\n\nexport default class RangeColumnLabel {\n  public options: RangeColumnLabelConfig;\n  public destroyed: boolean = false;\n  private plot: any;\n  private view: View;\n  private coord: any;\n  private container: IGroup;\n\n  constructor(cfg: IRangeColumnLabel) {\n    this.view = cfg.view;\n    this.plot = cfg.plot;\n    const defaultOptions = this.getDefaultOptions();\n    this.options = deepMix(defaultOptions, cfg, {});\n    if (!this.options.topStyle) {\n      this.options.topStyle = this.options.style;\n    }\n    if (!this.options.bottomStyle) {\n      this.options.bottomStyle = this.options.style;\n    }\n    this.init();\n  }\n\n  public init() {\n    this.container = this.getGeometry().labelsContainer;\n    this.view.on('beforerender', () => {\n      this.clear();\n      this.plot.canvas.draw();\n    });\n  }\n\n  public render() {\n    const { coordinate, elements } = this.getGeometry();\n    this.coord = coordinate;\n    each(elements, (ele) => {\n      const shape = ele.shape;\n      const positions = this.getPosition(shape);\n      const values = this.getValue(shape);\n      const textBaeline = this.getTextBaseline();\n      const labels = [];\n      each(positions, (pos, i) => {\n        const style = i === 1 ? this.options.topStyle : this.options.bottomStyle;\n        const color = this.getTextColor(shape, i);\n        if (this.options.position === 'inner' && this.options.adjustColor && color !== 'black') {\n          style.stroke = null;\n        }\n        const formatter = this.options.formatter;\n        const content = formatter ? formatter(values[i]) : values[i];\n        const label = this.container.addShape('text', {\n          attrs: deepMix({}, style, {\n            x: pos.x,\n            y: pos.y,\n            text: content,\n            fill: color,\n            textAlign: 'center',\n            textBaseline: textBaeline[i],\n          }),\n          name: 'label',\n        });\n        labels.push(label);\n        this.doAnimation(label);\n      });\n      shape.set('labelShapes', labels);\n      this.adjustPosition(labels[0], labels[1], shape);\n    });\n    this.plot.canvas.draw();\n  }\n\n  public hide() {\n    this.container.set('visible', false);\n    this.plot.canvas.draw();\n  }\n\n  public show() {\n    this.container.set('visible', true);\n    this.plot.canvas.draw();\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.remove();\n    }\n    this.destroyed = true;\n  }\n\n  public getBBox() {\n    return this.container.getBBox();\n  }\n\n  protected getShapeBbox(shape) {\n    const points = [];\n    each(shape.get('origin').points, (p) => {\n      points.push(this.coord.convertPoint(p));\n    });\n    const bbox = new BBox(\n      points[0].x,\n      points[1].y,\n      Math.abs(points[2].x - points[0].x),\n      Math.abs(points[0].y - points[1].y)\n    );\n    return bbox;\n  }\n\n  private getDefaultOptions() {\n    const { theme } = this.plot;\n    const labelStyle = theme.label.style;\n    return {\n      position: 'outer',\n      offsetX: 0,\n      offsetY: DEFAULT_OFFSET,\n      style: clone(labelStyle),\n      adjustColor: true,\n      adjustPosition: true,\n    };\n  }\n\n  private getPosition(shape) {\n    const bbox = this.getShapeBbox(shape);\n    const { minX, minY, maxY, width } = bbox;\n    const { offsetY } = this.options;\n    const x = minX + width / 2;\n    let y1, y2;\n    if (this.options.position === 'outer') {\n      y1 = minY - offsetY;\n      y2 = maxY + offsetY;\n    } else {\n      y1 = minY + offsetY;\n      y2 = maxY - offsetY;\n    }\n    return [\n      { x: x, y: y2 },\n      { x: x, y: y1 },\n    ];\n  }\n\n  private getValue(shape) {\n    const { yField } = this.plot.options;\n    return shape.get('origin').data[yField];\n  }\n\n  private getTextBaseline() {\n    if (this.options.position === 'outer') {\n      return ['top', 'bottom'];\n    } else {\n      return ['bottom', 'top'];\n    }\n  }\n\n  private getTextColor(shape, index) {\n    if (this.options.adjustColor && this.options.position === 'inner') {\n      const shapeColor = shape.attr('fill');\n      const shapeOpacity = shape.attr('opacity') ? shape.attr('opacity') : 1;\n      const rgb = rgb2arr(shapeColor);\n      const gray = Math.round(rgb[0] * 0.299 + rgb[1] * 0.587 + rgb[2] * 0.114) / shapeOpacity;\n      const colorBand = [\n        { from: 0, to: 85, color: 'white' },\n        { from: 85, to: 170, color: '#F6F6F6' },\n        { from: 170, to: 255, color: 'black' },\n      ];\n      const reflect = mappingColor(colorBand, gray);\n      return reflect;\n    }\n    const defaultColor = index === 1 ? this.options.topStyle.fill : this.options.bottomStyle.fill;\n    return defaultColor;\n  }\n\n  private doAnimation(label) {\n    if (this.plot.animation && this.plot.animation === false) {\n      return;\n    }\n    label.attr('fillOpacity', 0);\n    label.attr('strokeOpacity', 0);\n    label.stopAnimate();\n    label.animate(\n      {\n        fillOpacity: 1,\n        strokeOpacity: 1,\n      },\n      800,\n      'easeLinear',\n      500\n    );\n  }\n\n  private adjustPosition(la, lb, shape) {\n    const origin = shape.get('origin');\n    const shapeMinY = origin.y[1];\n    const shapeMaxY = origin.y[0];\n    const bbox = shape.getBBox();\n    const { height } = bbox;\n    const shapeHeight = height;\n    const panelRange = this.view.coordinateBBox;\n    const boxes = [la.getBBox(), lb.getBBox()];\n    let ay = la.attr('y');\n    let by = lb.attr('y');\n    if (this.options.adjustPosition && this.options.position === 'inner') {\n      const totalLength = boxes[0].height + boxes[1].height;\n      const isOverlap = boxes[1].maxY - boxes[0].minY > 2;\n      const isTooShort = totalLength > shapeHeight;\n      if (isOverlap || isTooShort) {\n        by = shapeMinY - this.options.offsetY;\n        lb.attr('fill', this.options.topStyle.fill);\n        lb.attr('textBaseline', 'bottom');\n        ay = shapeMaxY + this.options.offsetY;\n        la.attr('fill', this.options.bottomStyle.fill);\n        la.attr('textBaseline', 'top');\n        boxes[0] = la.getBBox();\n        boxes[1] = lb.getBBox();\n      }\n    }\n    // fixme: textBaseline 取不准bbox\n    if (boxes[0].maxY > panelRange.maxY - DEFAULT_OFFSET) {\n      ay = panelRange.maxY - DEFAULT_OFFSET / 2;\n      la.attr('textBaseline', 'bottom');\n    }\n    la.attr('y', ay);\n    lb.attr('y', by);\n    this.plot.canvas.draw();\n  }\n\n  private getGeometry() {\n    return find(this.view.geometries, (geom) => geom.type === 'interval') as Geometry;\n  }\n}\n","import { IShape, registerAnimation } from '../../dependents';\nimport { clone, each } from '@antv/util';\n\n// 记录之前的状态\nlet shapeCache: IShape[];\n\nfunction clipInFromCenterVertical(shape, animateCfg) {\n  const bbox = shape.getBBox();\n  const centerY = bbox.minY + bbox.height / 2;\n  shape.setClip({\n    type: 'rect',\n    attrs: {\n      x: bbox.minX,\n      y: centerY,\n      width: bbox.width,\n      height: 0,\n    },\n  });\n  const cliper = shape.get('clipShape');\n  cliper.animate(\n    {\n      height: bbox.height,\n      y: bbox.minY,\n    },\n    animateCfg.duration,\n    animateCfg.easing,\n    () => {\n      shape.setClip(null);\n    },\n    animateCfg.delay\n  );\n}\n\nclipInFromCenterVertical.animationName = 'clipInFromCenterVertical';\n\nexport function setShapeCache(shapes) {\n  shapeCache = shapes;\n}\n\nfunction updateFromCenterVertical(shape, animateCfg) {\n  const fromPath = getShapeFromCache(shape).attr('path');\n  const toPath = clone(shape.attr('path'));\n  shape.attr('path', fromPath);\n  shape.animate(\n    {\n      path: toPath,\n    },\n    animateCfg.duration,\n    animateCfg.easing,\n    animateCfg.callback,\n    100\n  );\n}\n\nfunction getShapeFromCache(shape) {\n  const { id } = shape;\n  let target;\n  each(shapeCache, (s) => {\n    if (s.id === id) {\n      target = s;\n    }\n  });\n  return target;\n}\n\nupdateFromCenterVertical.animationName = 'updateFromCenterVertical';\n\nregisterAnimation('clipInFromCenterVertical', clipInFromCenterVertical);\nregisterAnimation('updateFromCenterVertical', updateFromCenterVertical);\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport PercentStackedColumnLayer, { PercentStackedColumnLayerConfig } from './layer';\n\nexport interface PercentStackedColumnConfig extends PercentStackedColumnLayerConfig, PlotConfig {}\n\nexport default class PercentStackedColumn<\n  T extends PercentStackedColumnConfig = PercentStackedColumnConfig\n> extends BasePlot<T> {\n  public static getDefaultOptions: typeof PercentStackedColumnLayer.getDefaultOptions =\n    PercentStackedColumnLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'percentStackedColumn';\n    super.createLayers(layerProps);\n  }\n}\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport PieLayer, { PieViewConfig } from './layer';\n\nexport interface PieConfig extends PieViewConfig, PlotConfig {}\n\nexport default class Pie extends BasePlot<PieConfig, PieLayer> {\n  public static getDefaultOptions: typeof PieLayer.getDefaultOptions = PieLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'pie';\n    super.createLayers(layerProps);\n  }\n}\n","import { assign } from '@antv/util';\nimport { getEventMap, EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst componentMap = {\n  pie: 'interval',\n};\n\nconst SHAPE_EVENT_MAP: IEventmap = getEventMap(componentMap);\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","import { memoize, isString, values, toString } from '@antv/util';\nconst canvas = document.createElement('canvas');\nconst ctx = canvas.getContext('2d');\n\ninterface Font {\n  fontFamily?: string;\n  fontWeight?: string;\n  fontStyle?: string;\n  fontVariant?: string;\n  fontSize?: number;\n}\n\n/**\n * 计算文本在画布中的宽度\n */\nexport const measureTextWidth = memoize(\n  (text: any, font: Font = {}): number => {\n    const { fontSize, fontFamily, fontWeight, fontStyle, fontVariant } = font;\n    ctx.font = [fontStyle, fontVariant, fontWeight, `${fontSize}px`, fontFamily].join(' ');\n    return ctx.measureText(isString(text) ? text : '').width;\n  },\n  (text: any, font: Font) => (font ? [text, ...values(font)].join('') : text)\n);\n\n/**\n * 获取文本的 ... 文本。\n * 算法（减少每次 measureText 的长度，measureText 的性能跟字符串时间相关）：\n * 1. 先通过 STEP 逐步计算，找到最后一个小于 maxWidth 的字符串\n * 2. 然后对最后这个字符串二分计算\n * @param text 需要计算的文本, 由于历史原因 除了支持string，还支持空值,number和数组等\n * @param maxWidth\n * @param font\n * TODO 后续更新省略算法\n */\nexport const getEllipsisText = (text: any, maxWidth: number, font: Font) => {\n  const STEP = 16; // 每次 16，调参工程师\n  const DOT_WIDTH = measureTextWidth('...', font);\n\n  let leftText;\n\n  if (!isString(text)) {\n    leftText = toString(text);\n  } else {\n    leftText = text;\n  }\n\n  let leftWidth = maxWidth;\n\n  const r = []; // 最终的分段字符串\n  let currentText;\n  let currentWidth;\n\n  if (measureTextWidth(text, font) <= maxWidth) {\n    return text;\n  }\n\n  // 首先通过 step 计算，找出最大的未超出长度的\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    // 更新字符串\n    currentText = leftText.substr(0, STEP);\n\n    // 计算宽度\n    currentWidth = measureTextWidth(currentText, font);\n\n    // 超出剩余宽度，则停止\n    if (currentWidth + DOT_WIDTH > leftWidth) {\n      if (currentWidth > leftWidth) {\n        break;\n      }\n    }\n\n    r.push(currentText);\n\n    // 没有超出，则计算剩余宽度\n    leftWidth -= currentWidth;\n    leftText = leftText.substr(STEP);\n\n    // 字符串整体没有超出\n    if (!leftText) {\n      return r.join('');\n    }\n  }\n\n  // 最下的最后一个 STEP，使用 1 递增（用二分效果更高）\n  //eslint-disable-next-line no-constant-condition\n  while (true) {\n    // 更新字符串\n    currentText = leftText.substr(0, 1);\n\n    // 计算宽度\n    currentWidth = measureTextWidth(currentText, font);\n\n    // 超出剩余宽度，则停止\n    if (currentWidth + DOT_WIDTH > leftWidth) {\n      break;\n    }\n\n    r.push(currentText);\n    // 没有超出，则计算剩余宽度\n    leftWidth -= currentWidth;\n    leftText = leftText.substr(1);\n\n    if (!leftText) {\n      return r.join('');\n    }\n  }\n\n  return `${r.join('')}...`;\n};\n","import { IShape } from '../../../../dependents';\nimport { each, clone } from '@antv/util';\nimport PieBaseLabel, { LabelItem, PieLabelConfig } from './base-label';\nimport { getOverlapInfo } from './utils';\nimport { distBetweenPoints } from '../../../../util/math';\n\nexport function percent2Number(value: string): number {\n  const percentage = Number(value.endsWith('%') ? value.slice(0, -1) : value);\n  return percentage / 100;\n}\n\nexport default class PieInnerLabel extends PieBaseLabel {\n  /** @override 不能大于0 */\n  protected adjustOption(options: PieLabelConfig) {\n    super.adjustOption(options);\n    if (options.offset > 0) {\n      options.offset = 0;\n    }\n  }\n\n  protected adjustItem(item: LabelItem) {\n    item.textAlign = 'middle';\n  }\n\n  /** @override 不绘制拉线 */\n  protected drawLines() {\n    return;\n  }\n\n  protected layout(labels: IShape[], shapeInfos: LabelItem[]) {\n    labels.forEach((label, idx) => {\n      if (idx > 0) {\n        each(labels.slice(0, idx), (prevLabel) => {\n          this.resolveCollision(label, prevLabel, shapeInfos[idx]);\n        });\n      }\n    });\n  }\n\n  protected getDefaultOptions() {\n    const { theme } = this.plot;\n    const labelStyle = theme.label.style;\n    return {\n      offsetX: 0,\n      offsetY: 0,\n      offset: '-30%',\n      style: {\n        ...labelStyle,\n        textAlign: 'center',\n        textBaseline: 'middle',\n      },\n    };\n  }\n\n  /** label 碰撞调整 */\n  protected resolveCollision(label: IShape, prev: IShape, shapeInfo: LabelItem): void {\n    const { center } = this.getCoordinate();\n    const angle = shapeInfo.angle;\n    const box = label.getBBox();\n    const prevBBox = prev.getBBox();\n    const pos = { x: (box.minX + box.maxX) / 2, y: (box.minY + box.maxY) / 2 };\n    // 两种调整方案\n    /** 先偏移 x 方向 -> 再计算 y 位置 */\n    const pos1 = clone(pos);\n    /** 先偏移 y 方向 -> 再计算 x 位置 */\n    const pos2 = clone(pos);\n    // check overlap\n    if (prev.get('id') !== label.get('id')) {\n      const { xOverlap, yOverlap } = getOverlapInfo(box, prevBBox);\n      if (xOverlap) {\n        pos1.x = pos.x + xOverlap;\n        pos1.y = pos.y + Math.tan(angle) * xOverlap;\n      }\n      if (yOverlap) {\n        // fix issue-460\n        let yMover = yOverlap;\n        if (pos.y < center.y) {\n          // 上方label优先往上偏移\n          yMover = yMover < 0 ? yMover : prevBBox.minY - box.maxY;\n        } else {\n          // 下方label优先往下偏移\n          yMover = yMover > 0 ? yMover : prevBBox.maxY - box.minY;\n        }\n        pos2.y = pos.y + yMover;\n        pos2.x = pos.x + yMover / Math.tan(angle);\n      }\n\n      const dist1 = distBetweenPoints(pos, pos1);\n      const dist2 = distBetweenPoints(pos, pos2);\n      const actualPos = dist1 < dist2 ? pos1 : pos2;\n      // 取偏移距离最小的\n      label.attr('x', actualPos.x);\n      label.attr('y', actualPos.y);\n    }\n  }\n}\n","import { IShape, BBox } from '../../../../dependents';\nimport { filter, head, last, map } from '@antv/util';\nimport PieBaseLabel, { LabelItem, PieLabelConfig } from './base-label';\nimport { getEndPoint } from './utils';\n\n// 默认label和element的偏移 16px\nexport const DEFAULT_OFFSET = 16;\n\nexport default class PieOuterLabel extends PieBaseLabel {\n  /** @override 不能大于0 */\n  protected adjustOption(options: PieLabelConfig) {\n    super.adjustOption(options);\n    if (options.offset < 0) {\n      options.offset = 0;\n    }\n  }\n\n  protected getDefaultOptions() {\n    const { theme } = this.plot;\n    const labelStyle = theme.label.style;\n    return {\n      offsetX: 0,\n      offsetY: 0,\n      offset: 12,\n      style: {\n        ...labelStyle,\n        textBaseline: 'middle',\n      },\n    };\n  }\n\n  /** label 碰撞调整 */\n  protected layout(labels: IShape[], items: LabelItem[], panel: BBox) {\n    const { center } = this.getCoordinate();\n    const leftHalf = filter(labels, (l) => l.attr('x') <= center.x);\n    const rightHalf = filter(labels, (l) => l.attr('x') > center.x);\n    [rightHalf, leftHalf].forEach((half, isLeft) => {\n      this._antiCollision(half, !isLeft, panel);\n    });\n  }\n\n  /** labels 碰撞处理（重点算法） */\n  private _antiCollision(labels: IShape[], isRight: boolean, panelBox: BBox) {\n    const labelHeight = this.getLabelHeight(labels);\n    const { center, radius } = this.getCoordinate();\n    const offset = this.options.offset;\n    const totalR = radius + offset;\n    const totalHeight = Math.min(panelBox.height, Math.max(totalR * 2 + labelHeight * 2, labels.length * labelHeight));\n    const maxLabelsCount = Math.floor(totalHeight / labelHeight);\n    // fix-bug, maxLabelsCount 之后的labels 在非 allowOverlap 不显示（避免出现尾部label展示，而前置label不展示）\n    if (!this.options.allowOverlap) {\n      labels.slice(maxLabelsCount).forEach((label) => {\n        label.get('parent').set('visible', false);\n      });\n    }\n    labels.splice(maxLabelsCount, labels.length - maxLabelsCount);\n\n    // sort by y DESC\n    labels.sort((a, b) => a.getBBox().y - b.getBBox().y);\n    // adjust y position of labels to avoid overlapping\n    let overlapping = true;\n    let i;\n    let maxY = center.y + totalHeight / 2;\n    let minY = center.y - totalHeight / 2;\n    const boxes = labels.map((label) => {\n      const labelBox = label.getBBox();\n      if (labelBox.maxY > maxY) {\n        maxY = Math.min(panelBox.maxY, labelBox.maxY);\n      }\n      if (labelBox.minY < minY) {\n        minY = Math.max(panelBox.minY, labelBox.minY);\n      }\n      return {\n        text: label.attr('text'),\n        size: labelHeight,\n        pos: labelBox.y,\n        targets: [],\n      };\n    });\n    let j = 0;\n    while (j < boxes.length) {\n      if (j === boxes.length - 1) {\n        boxes[j].targets[0] = maxY;\n      } else {\n        boxes[j].targets[0] = boxes[j + 1].pos - boxes[j + 1].size / 2;\n      }\n      j++;\n    }\n    while (overlapping) {\n      boxes.forEach((box) => {\n        const target = last(box.targets);\n        box.pos = Math.max(minY, Math.min(box.pos, target - box.size));\n      });\n      // detect overlapping and join boxes\n      overlapping = false;\n      i = boxes.length;\n      while (i--) {\n        if (i > 0) {\n          const previousBox = boxes[i - 1];\n          const box = boxes[i];\n          if (previousBox.pos + previousBox.size > box.pos) {\n            // overlapping\n            previousBox.size += box.size;\n            previousBox.targets = previousBox.targets.concat(box.targets);\n            // overflow, shift up\n            const target = last(previousBox.targets);\n            if (previousBox.pos + previousBox.size > target) {\n              previousBox.pos = target - previousBox.size;\n            }\n            boxes.splice(i, 1); // removing box\n            overlapping = true;\n          } else {\n            // 换掉最后一个\n            previousBox.targets.splice(-1, 1, box.pos);\n          }\n        }\n      }\n    }\n\n    i = 0;\n    // step 4: normalize y and adjust x\n    boxes.forEach((b) => {\n      let posInCompositeBox = labelHeight / 2; // middle of the label\n      b.targets.forEach(() => {\n        labels[i].attr('y', b.pos + posInCompositeBox);\n        posInCompositeBox += labelHeight;\n        i++;\n      });\n    });\n\n    // 调整 x 位置在椭圆轨道上\n    const topLabels = [];\n    const bottomLabels = [];\n    labels.forEach((label, idx) => {\n      const anchor = this.arcPoints[idx];\n      if (anchor.angle >= 0 && anchor.angle <= Math.PI) {\n        bottomLabels.push(label);\n      } else {\n        topLabels.push(label);\n      }\n    });\n    [topLabels, bottomLabels].forEach((adjustLabels, isBottom) => {\n      if (!adjustLabels.length) {\n        return;\n      }\n      let ry = isBottom ? last(adjustLabels).getBBox().maxY - center.y : center.y - head(adjustLabels).getBBox().minY;\n      ry = Math.max(totalR, ry);\n      const distance = offset > 4 ? 4 : 0;\n      const maxLabelWidth =\n        Math.max.apply(\n          0,\n          map(labels, (label) => label.getBBox().width)\n        ) +\n        offset +\n        distance;\n      const rx = Math.max(totalR, Math.min((ry + totalR) / 2, center.x - (panelBox.minX + maxLabelWidth)));\n      const rxPow2 = rx * rx;\n      const ryPow2 = ry * ry;\n      adjustLabels.forEach((label, idx) => {\n        const anchor = this.arcPoints[idx];\n        const box = label.getBBox();\n        const boxCenter = { x: box.minX + box.width / 2, y: box.minY + box.height / 2 };\n        const dyPow2 = Math.pow(boxCenter.y - center.y, 2);\n        const endPoint = getEndPoint(center, anchor.angle, radius);\n        const distance_offset = (isRight ? 1 : -1) * distance * 2;\n        if (dyPow2 > ryPow2) {\n          console.warn('异常(一般不会出现)', label.attr('text'));\n          label.attr('x', endPoint.x + distance_offset);\n        } else {\n          // (x - cx)^2 / rx ^ 2 + (y - cy)^2 / ry ^ 2 = 1\n          // 避免 label的 拉线 在 element 上\n          let xPos = center.x + (isRight ? 1 : -1) * Math.sqrt((1 - dyPow2 / ryPow2) * rxPow2);\n          if (\n            (center.x === endPoint.x && boxCenter.y === endPoint.y) ||\n            (center.y === endPoint.y && xPos === endPoint.x)\n          ) {\n            xPos = endPoint.x;\n          } else {\n            // const k1 = (center.y - endPoint.y) / (center.x - endPoint.x);\n            // const k2 = (boxCenter.y - endPoint.y) / (xPos - endPoint.x);\n            // const theta = Math.atan((k1 - k2) / (1 + k1 * k2));\n            // 切角 < 90度（目前的坐标系 无法精准计算切角）\n            // if (Math.cos(theta) > 0 && (!isRight ? xPos > endPoint.x : xPos < endPoint.x)) {\n            //   xPos = endPoint.x;\n            // }\n          }\n          label.attr('x', xPos + distance_offset);\n        }\n      });\n    });\n  }\n\n  /** 获取label height */\n  private getLabelHeight(labels: IShape[]): number {\n    if (!this.options.labelHeight) {\n      return head(labels) ? head(labels).getBBox().height : 14;\n    }\n    return this.options.labelHeight;\n  }\n}\n","import { IShape, BBox } from '../../../../dependents';\nimport PieBaseLabel, { LabelItem, PieLabelConfig } from './base-label';\n\n// 默认label和element的偏移 16px\nexport const DEFAULT_OFFSET = 16;\n\nexport default class PieOuterCenterLabel extends PieBaseLabel {\n  /** @override 不能大于0 */\n  protected adjustOption(options: PieLabelConfig) {\n    super.adjustOption(options);\n    if (options.offset < 0) {\n      options.offset = 0;\n    }\n  }\n\n  protected getDefaultOptions() {\n    const { theme } = this.plot;\n    const labelStyle = theme.label.style;\n    return {\n      offsetX: 0,\n      offsetY: 0,\n      offset: 12,\n      style: {\n        ...labelStyle,\n        textBaseline: 'middle',\n      },\n    };\n  }\n\n  protected adjustItem(item: LabelItem): void {\n    const offset = this.options.offset;\n    if (item.textAlign === 'left') {\n      item.x += offset > 4 ? 4 : offset / 2;\n    } else if (item.textAlign === 'right') {\n      item.x -= offset > 4 ? 4 : offset / 2;\n    }\n  }\n\n  /** label 碰撞调整 */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars,@typescript-eslint/no-empty-function\n  protected layout(labels: IShape[], items: LabelItem[], panel: BBox) {}\n}\n","import { View, IGroup, IShape } from '../../../../dependents';\nimport { deepMix, clone, each, isString, mix } from '@antv/util';\nimport { LooseMap } from '../../../../interface/types';\n\nconst ANCHOR_OFFSET = 0; // 锚点偏移量\nconst INFLECTION_OFFSET = 15; // 拐点偏移量\nconst DEFAULT_COLOR = '#CCC';\nconst LABEL1_OFFSETY = 2;\nconst LABEL2_OFFSETY = -2;\nconst ADJUSTOFFSET = 15;\n\ntype IAttrs = LooseMap;\n\ntype Point = { x: number; y: number };\ninterface LabelData {\n  _anchor: Point;\n  _inflection: Point;\n  _data: object;\n  x: number;\n  y: number;\n  r: number;\n  fill: string;\n  textGroup: IGroup;\n  _side?: 'left' | 'right';\n}\n\ninterface SpiderLabelConfig {\n  line?: any;\n  text?: any;\n  formatter?: (text: string, item: OriginLabelItem, index: number) => string | string[];\n  offsetX?: number;\n  offsetY?: number;\n  [field: string]: any;\n}\n\ninterface ISpiderLabel extends SpiderLabelConfig {\n  view: View;\n  fields: string[];\n}\n\nfunction getEndPoint(center, angle, r) {\n  return {\n    x: center.x + r * Math.cos(angle),\n    y: center.y + r * Math.sin(angle),\n  };\n}\n\ninterface OriginLabelItem {\n  /** 原始数据值 */\n  _origin: object;\n  color?: string;\n}\n\nexport default class SpiderLabel {\n  public destroyed: boolean = false;\n  private view: View;\n  private options: ISpiderLabel;\n  private halves: any[][];\n  private container: IGroup;\n  private width: number;\n  private height: number;\n  private coord: any;\n\n  constructor(cfg: ISpiderLabel) {\n    this.view = cfg.view;\n    this.options = deepMix({}, this.getDefaultOptions(), cfg);\n    this._adjustOptions(this.options);\n    this.init();\n  }\n\n  private init() {\n    this.container = this.view.geometries[0].labelsContainer;\n    this.view.on('beforerender', () => {\n      this.clear();\n    });\n  }\n\n  public render() {\n    if (!this.view || this.view.destroyed) {\n      return;\n    }\n    /** 如果有formatter则事先处理数据 */\n    const data = clone(this.view.getData());\n    this.halves = [[], []];\n    const shapes = [];\n    const elements = this.view.geometries[0].elements;\n    each(elements, (ele) => {\n      shapes.push(ele.shape);\n    });\n    this.coord = this.view.geometries[0].coordinate;\n    const angleField = this.options.fields[0];\n    const scale = this.view.getScalesByDim('y')[angleField];\n    const center = this.coord.getCenter();\n    const { startAngle } = this.coord;\n    const radius = this.coord.polarRadius;\n    const { width, height } = this.view.coordinateBBox;\n    this.width = width;\n    this.height = height;\n    let angle = startAngle;\n    // tslint:disable-next-line: prefer-for-of\n    for (let idx = 0; idx < data.length; idx++) {\n      const d = data[idx];\n      // 计算每个切片的middle angle\n      const angleValue = scale.scale(d[angleField]);\n      const targetAngle = angle + Math.PI * 2 * angleValue;\n      const middleAngle = angle + (targetAngle - angle) / 2;\n      angle = targetAngle;\n      // 根据middle angle计算锚点和拐点距离\n      const anchorPoint = getEndPoint(center, middleAngle, radius + ANCHOR_OFFSET);\n      const inflectionPoint = getEndPoint(center, middleAngle, radius + INFLECTION_OFFSET);\n      // 获取对应shape的color\n      let color = DEFAULT_COLOR;\n      if (this.options.fields.length === 2) {\n        const colorField = this.options.fields[1];\n        const colorScale = this.view.geometries[0].scales[colorField];\n        const colorIndex = colorScale.scale(d[colorField]);\n        const shapeIndex = Math.floor(colorIndex * (shapes.length - 1));\n        color = shapes[shapeIndex].attr('fill');\n      }\n      // 组装label数据\n      const label: LabelData = {\n        _anchor: anchorPoint,\n        _inflection: inflectionPoint,\n        _data: d,\n        x: inflectionPoint.x,\n        y: inflectionPoint.y,\n        r: radius + INFLECTION_OFFSET,\n        fill: color,\n        textGroup: null,\n        _side: null,\n      };\n      // 创建label文本\n      let texts = [];\n      each(this.options.fields, (f) => {\n        texts.push(d[f]);\n      });\n      if (this.options.formatter) {\n        let formatted: any = this.options.formatter(d[angleField], { _origin: d, color }, idx);\n        if (isString(formatted)) {\n          formatted = [formatted];\n        }\n        texts = formatted;\n      }\n      const textGroup = this.container.addGroup();\n      const textAttrs: IAttrs = {\n        x: 0,\n        y: 0,\n        fontSize: this.options.text.fontSize,\n        lineHeight: this.options.text.fontSize,\n        fontWeight: this.options.text.fontWeight,\n        fill: this.options.text.fill,\n      };\n      // label1:下部label\n      let lowerText = d[angleField];\n      if (this.options.formatter) {\n        lowerText = texts[0];\n      }\n      const lowerTextAttrs = clone(textAttrs);\n      if (texts.length === 2) {\n        lowerTextAttrs.fontWeight = 700;\n      }\n      const lowerTextShape: any = textGroup.addShape('text', {\n        attrs: mix(\n          {\n            textBaseline: texts.length === 2 ? 'top' : 'middle',\n            text: lowerText,\n          },\n          lowerTextAttrs\n        ),\n        data: d,\n        offsetY: texts.length === 2 ? LABEL1_OFFSETY : 0,\n        name: 'label',\n      });\n      lowerTextShape.name = 'label'; // 用于事件标记 shapeName\n      /** label2:上部label */\n      if (texts.length === 2) {\n        const topTextShape: any = textGroup.addShape('text', {\n          attrs: mix(\n            {\n              textBaseline: 'bottom',\n              text: texts[1],\n            },\n            textAttrs\n          ),\n          data: d,\n          offsetY: LABEL2_OFFSETY,\n          name: 'label',\n        });\n        topTextShape.name = 'label'; // 用于事件标记 shapeName\n      }\n\n      label.textGroup = textGroup;\n\n      /** 将label分组 */\n      if (anchorPoint.x < center.x) {\n        label._side = 'left';\n        this.halves[0].push(label);\n      } else {\n        label._side = 'right';\n        this.halves[1].push(label);\n      }\n    }\n\n    /** 绘制label */\n    const maxCountForOneSide = Math.floor(height / this.options.lineHeight);\n\n    each(this.halves, (half) => {\n      if (half.length > maxCountForOneSide) {\n        half.splice(maxCountForOneSide, half.length - maxCountForOneSide);\n      }\n\n      half.sort((a, b) => {\n        return a.y - b.y;\n      });\n\n      this._antiCollision(half);\n    });\n    this.view.canvas.draw();\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n  }\n\n  public hide() {\n    this.container.set('visible', false);\n    this.view.canvas.draw();\n  }\n\n  public show() {\n    this.container.set('visible', true);\n    this.view.canvas.draw();\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.remove();\n    }\n    this.destroyed = true;\n  }\n\n  protected getDefaultOptions() {\n    return {\n      text: {\n        fill: 'rgba(0, 0, 0, 0.65)',\n        fontSize: 12,\n      },\n      line: {\n        lineWidth: 0.5,\n        stroke: 'rgba(0, 0, 0, 0.45)',\n      },\n      lineHeight: 32,\n      /** distance between label and edge */\n      sidePadding: 20,\n      // anchorSize: 2,\n    };\n  }\n\n  private _antiCollision(half: LabelData[]) {\n    const { coord } = this;\n    const canvasHeight = coord.getHeight();\n    const { center } = coord;\n    const radius = coord.getRadius();\n    const startY = center.y - radius - INFLECTION_OFFSET - this.options.lineHeight;\n    let overlapping = true;\n    let totalH = canvasHeight;\n    let i;\n\n    let maxY = 0;\n    let minY = Number.MIN_VALUE;\n    let maxLabelWidth = 0;\n    const boxes: any[] = half.map((label) => {\n      const labelY = label.y;\n      if (labelY > maxY) {\n        maxY = labelY;\n      }\n      if (labelY < minY) {\n        minY = labelY;\n      }\n\n      const textGroup = label.textGroup;\n      const labelWidth = textGroup.getBBox().width;\n      if (labelWidth >= maxLabelWidth) {\n        maxLabelWidth = labelWidth;\n      }\n\n      return {\n        size: this.options.lineHeight,\n        targets: [labelY - startY],\n      };\n    });\n    if (maxY - startY > totalH) {\n      totalH = maxY - startY;\n    }\n\n    const iteratorBoxed = function (items) {\n      items.forEach((box) => {\n        const target = (Math.min.apply(minY, box.targets) + Math.max.apply(minY, box.targets)) / 2;\n        box.pos = Math.min(Math.max(minY, target - box.size / 2), totalH - box.size);\n      });\n    };\n\n    while (overlapping) {\n      iteratorBoxed(boxes);\n      // detect overlapping and join boxes\n      overlapping = false;\n      i = boxes.length;\n      while (i--) {\n        if (i > 0) {\n          const previousBox = boxes[i - 1];\n          const box = boxes[i];\n          if (previousBox.pos + previousBox.size > box.pos) {\n            // overlapping\n            previousBox.size += box.size;\n            previousBox.targets = previousBox.targets.concat(box.targets);\n\n            // overflow, shift up\n            if (previousBox.pos + previousBox.size > totalH) {\n              previousBox.pos = totalH - previousBox.size;\n            }\n            boxes.splice(i, 1); // removing box\n            overlapping = true;\n          }\n        }\n      }\n    }\n\n    i = 0;\n    boxes.forEach((b) => {\n      let posInCompositeBox = startY; // middle of the label\n      b.targets.forEach(() => {\n        half[i].y = b.pos + posInCompositeBox + this.options.lineHeight / 2;\n        posInCompositeBox += this.options.lineHeight;\n        i++;\n      });\n    });\n\n    const drawnLabels = [];\n    half.forEach((label) => {\n      const textGroup = this._drawLabel(label);\n      this._drawLabelLine(label, maxLabelWidth, textGroup);\n      drawnLabels.push(textGroup);\n    });\n  }\n\n  private _drawLabel(label: LabelData) {\n    const { coord } = this;\n    const center = coord.getCenter();\n    const radius = coord.getRadius();\n\n    const { y, textGroup } = label;\n    const children = textGroup.get('children');\n    const x_dir = label._side === 'left' ? 1 : -1;\n\n    const textAttrs = {\n      textAlign: label._side === 'left' ? 'right' : 'left',\n      x:\n        label._side === 'left'\n          ? center.x - radius - this.options.sidePadding\n          : center.x + radius + this.options.sidePadding,\n    };\n\n    if (this.options.offsetX) {\n      textAttrs.x += this.options.offsetX * x_dir;\n    }\n\n    children.forEach((child) => {\n      const offsetY = child.get('offsetY');\n      const yPosition = y + offsetY;\n      child.attr(textAttrs);\n      child.attr('y', yPosition);\n    });\n\n    return textGroup;\n  }\n\n  private _drawLabelLine(label: LabelData, maxLabelWidth, container: IGroup): IShape {\n    const _anchor = [label._anchor.x, label._anchor.y];\n    const _inflection = [label._inflection.x, label._inflection.y];\n    const { y, textGroup } = label;\n    if (!textGroup) return;\n    const lastPoint = [label._side === 'left' ? textGroup.getBBox().maxX + 4 : textGroup.getBBox().minX - 4, y];\n\n    let points = [_anchor, _inflection, lastPoint];\n    if (_inflection[1] !== y) {\n      // 展示全部文本文本位置做过调整\n      if (_inflection[1] < y) {\n        // 文本被调整下去了，则添加拐点连接线\n        const point1 = _inflection;\n        const leftPoint = lastPoint[0] + maxLabelWidth + ADJUSTOFFSET;\n        const rightPoint = lastPoint[0] - maxLabelWidth - ADJUSTOFFSET;\n        const point2 = [label._side === 'left' ? leftPoint : rightPoint, _inflection[1]];\n        const point3 = [\n          label._side === 'left' ? lastPoint[0] + maxLabelWidth : lastPoint[0] - maxLabelWidth,\n          lastPoint[1],\n        ];\n\n        points = [_anchor, point1, point2, point3, lastPoint];\n\n        if ((label._side === 'right' && point2[0] < point1[0]) || (label._side === 'left' && point2[0] > point1[0])) {\n          points = [_anchor, point3, lastPoint];\n        }\n      } else {\n        points = [_anchor, [_inflection[0], y], lastPoint];\n      }\n    }\n\n    const path = [];\n    for (let i = 0; i < points.length; i++) {\n      const p = points[i];\n      let starter = 'L';\n      if (i === 0) {\n        starter = 'M';\n      }\n      path.push([starter, p[0], p[1]]);\n    }\n    container.addShape('path', {\n      attrs: {\n        path,\n        lineWidth: this.options.line.lineWidth,\n        stroke: this.options.line.stroke,\n      },\n    });\n\n    // 绘制锚点\n    // container.addShape('circle', {\n    //   attrs: {\n    //     x: _anchor[0],\n    //     y: _anchor[1],\n    //     r: this.config.anchorSize,\n    //     fill,\n    //   },\n    // });\n  }\n\n  private _adjustOptions(config) {\n    if (config.text.fontSize) {\n      config.lineHeight = config.text.fontSize * 3;\n    }\n  }\n}\n","import { registerTheme } from '../../theme';\n\nconst PIE_ACTIVE_STYLE = (style) => {\n  const opacity = style.opacity || 1;\n  return { fillOpacity: opacity * 0.8 };\n};\n\nconst PIE_DISABLE_STYLE = (style) => {\n  const opacity = style.opacity || 1;\n  return { fillOpacity: opacity * 0.5 };\n};\n\nregisterTheme('pie', {\n  columnStyle: {\n    normal: {},\n    active: PIE_ACTIVE_STYLE,\n    disable: PIE_DISABLE_STYLE,\n    selected: { lineWidth: 1, stroke: 'black' },\n  },\n});\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport DensityHeatmapLayer, { DensityHeatmapViewConfig } from './layer';\n\nexport interface DensityHeatmapConfig extends DensityHeatmapViewConfig, PlotConfig {}\n\nexport default class DensityHeatmap extends BasePlot<DensityHeatmapConfig> {\n  public static getDefaultOptions: typeof DensityHeatmapLayer.getDefaultOptions = DensityHeatmapLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'densityHeatmap';\n    super.createLayers(layerProps);\n  }\n}\n","import { deepMix, each, has } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport ViewLayer, { ViewConfig } from '../../base/view-layer';\nimport { getComponent } from '../../components/factory';\nimport { getGeom } from '../../geoms/factory';\nimport { extractScale } from '../../util/scale';\nimport '../../geoms/heatmap/linear';\nimport { HeatmapLegendConfig } from './components/legend';\nimport { HeatmapBackgroundConfig } from './components/background';\nimport { getPlotComponents } from './components';\nimport * as EventParser from './event';\nimport { GraphicStyle } from '../../interface/config';\n\nexport interface DensityHeatmapViewConfig extends ViewConfig {\n  colorField: string;\n  radius?: number;\n  intensity?: number;\n  point?: {\n    visible?: boolean;\n    shape?: string;\n    size?: number;\n    color?: string;\n    style?: GraphicStyle;\n  };\n  legend?: HeatmapLegendConfig;\n  background?: HeatmapBackgroundConfig;\n}\n\nexport interface DensityHeatmapLayerConfig extends DensityHeatmapViewConfig, LayerConfig {}\n\nexport default class DensityHeatmapLayer<\n  T extends DensityHeatmapLayerConfig = DensityHeatmapLayerConfig\n> extends ViewLayer<T> {\n  public type: string = 'densityHeatmap';\n  protected plotComponents: any[] = [];\n\n  public static getDefaultOptions(): any {\n    return deepMix({}, super.getDefaultOptions(), {\n      xAxis: {\n        visible: true,\n        autoRotateTitle: false,\n        grid: {\n          visible: false,\n        },\n        line: {\n          visible: true,\n        },\n        tickLine: {\n          visible: true,\n        },\n        label: {\n          visible: true,\n          autoHide: true,\n          autoRotate: true,\n        },\n        title: {\n          visible: false,\n          offset: 12,\n        },\n      },\n      yAxis: {\n        visible: true,\n        autoRotateTitle: true,\n        grid: {\n          visible: false,\n        },\n        line: {\n          visible: true,\n        },\n        tickLine: {\n          visible: true,\n        },\n        label: {\n          visible: true,\n          autoHide: true,\n          autoRotate: false,\n        },\n        title: {\n          visible: false,\n          offset: 12,\n        },\n      },\n      tooltip: {\n        visible: true,\n        showCrosshairs: true,\n        crosshairs: {\n          type: 'xy',\n          line: {\n            style: {\n              stroke: '#000000',\n              lineWidth: 1,\n              opacity: 0.5,\n            },\n          },\n        },\n        showMarkers: false,\n      },\n      legend: {\n        visible: true,\n        position: 'bottom-center',\n      },\n      color: [\n        'rgba(33,102,172,0)',\n        'rgb(103,169,207)',\n        'rgb(209,229,240)',\n        'rgb(253,219,199)',\n        'rgb(239,138,98)',\n        'rgb(178,24,43)',\n      ],\n      interactions: [{ type: 'tooltip' }],\n    });\n  }\n\n  public afterRender() {\n    this.renderPlotComponents();\n    super.afterRender();\n  }\n\n  public destroy() {\n    each(this.plotComponents, (component) => {\n      component.destroy();\n    });\n    super.destroy();\n  }\n\n  protected scale() {\n    const props = this.options;\n    const scales = {};\n    /** 配置x-scale */\n    scales[props.xField] = {};\n    if (has(props, 'xAxis')) {\n      extractScale(scales[props.xField], props.xAxis);\n    }\n    /** 配置y-scale */\n    scales[props.yField] = {};\n    if (has(props, 'yAxis')) {\n      extractScale(scales[props.yField], props.yAxis);\n    }\n    this.setConfig('scales', scales);\n    super.scale();\n  }\n\n  protected coord() {\n    return;\n  }\n\n  protected geometryParser() {\n    return 'heatmap';\n  }\n\n  protected addGeometry() {\n    if (this.options.data.length > 1) {\n      const config = {\n        type: 'linearheatmap',\n        position: {\n          fields: [this.options.xField, this.options.yField],\n        },\n        color: {\n          fields: [this.options.colorField],\n          values: this.options.color,\n        },\n        cfg: {\n          intensity: this.options.intensity,\n          radius: this.options.radius,\n        },\n      } as any;\n\n      if (this.options.radius) {\n        config.radius = this.options.radius;\n      }\n\n      if (this.options.intensity) {\n        config.intensity = this.options.intensity;\n      }\n\n      if (this.options.tooltip && (this.options.tooltip.fields || this.options.tooltip.formatter)) {\n        this.geometryTooltip(config);\n      }\n\n      this.setConfig('geometry', config);\n\n      this.addPoint();\n    }\n  }\n\n  protected addPoint() {\n    const props = this.options;\n    const defaultConfig = { visible: false, size: 0 };\n    if (props.point && props.point.visible) {\n      props.point = deepMix(defaultConfig, props.point);\n    } else {\n      props.point = defaultConfig;\n    }\n    const point = getGeom('point', 'guide', {\n      plot: this,\n    });\n    point.active = false;\n    // point.label = this.extractLabel();\n    this.setConfig('geometry', point);\n  }\n\n  protected extractLabel() {\n    const props = this.options;\n    const label = props.label;\n    if (label && label.visible === false) {\n      return false;\n    }\n    const labelConfig = getComponent('label', {\n      plot: this,\n      labelType: 'scatterLabel',\n      fields: [props.xField, props.yField],\n      position: 'middle',\n      offset: 0,\n      ...label,\n    });\n    return labelConfig;\n  }\n\n  protected legend() {\n    this.setConfig('legends', false);\n  }\n\n  protected geometryTooltip(config) {\n    config.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      config.tooltip.fields = tooltipOptions.fields;\n    }\n    if (tooltipOptions.formatter) {\n      config.tooltip.callback = tooltipOptions.formatter;\n      if (!tooltipOptions.fields) {\n        config.tooltip.fields = [this.options.xField, this.options.yField];\n        if (this.options.colorField) {\n          config.tooltip.fields.push(this.options.colorField);\n        }\n      }\n    }\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n\n  protected renderPlotComponents() {\n    each(this.plotComponents, (component) => {\n      component.destroy();\n    });\n    const componentsType = ['legend', 'background'];\n    each(componentsType, (t) => {\n      const cfg = {\n        view: this.view,\n        plot: this,\n        ...this.options[t],\n      };\n      const component = getPlotComponents(this, t, cfg);\n      if (component) {\n        component.render();\n        this.plotComponents.push(component);\n      }\n    });\n  }\n}\n\nregisterPlotType('densityHeatmap', DensityHeatmapLayer);\n","import { registerGeometry, Geometry, MappingDatum } from '../../dependents';\nimport { isNumber, get } from '@antv/util';\nimport * as colorUtil from '../../util/color';\n\nconst GAUSS_COEF = 0.3989422804014327;\nconst ZERO = 1.0 / 255.0 / 16.0;\n\nconst ORIGIN_FIELD = '_origin';\n\nclass LinearHeatmap extends Geometry {\n  public readonly type: string = 'heatmap';\n  private intensity: number;\n  private radius: number;\n  private blur: number;\n  private grayScaleCanvas: any;\n  private shadowCanvas: any;\n  private paletteCache: any = {};\n  private imageShape: any;\n\n  constructor(cfg) {\n    super(cfg);\n    this.intensity = cfg.intensity;\n    this.radius = cfg.radius;\n  }\n\n  protected createElements(mappingData: MappingDatum[] /*index: number, isUpdate: boolean = false*/) {\n    const range = this.prepareRange(mappingData);\n    this.prepareSize();\n    this.prepareBlur();\n    this.prepareGreyScaleBlurredCircle(this.radius);\n    this.drawWithRange(mappingData, range);\n    return null;\n  }\n\n  public clear() {\n    this.clearShadowCanvasCtx();\n    super.clear();\n  }\n\n  private prepareRange(data) {\n    const colorAttr = this.getAttribute('color');\n    const colorField = colorAttr.getFields()[0];\n    let min = Infinity;\n    let max = -Infinity;\n    data.forEach((row) => {\n      const value = row[ORIGIN_FIELD][colorField];\n      if (value > max) {\n        max = value;\n      }\n      if (value < min) {\n        min = value;\n      }\n    });\n    if (min === max) {\n      min = max - 1;\n    }\n    return [min, max];\n  }\n\n  private prepareSize() {\n    let radius = this.radius;\n    if (!this.radius) {\n      radius = this.getDefaultValue('size');\n      if (!isNumber(radius)) {\n        radius = this.getDefaultSize();\n      }\n      this.radius = radius;\n    }\n  }\n\n  private prepareBlur() {\n    let blur = get(this.styleOption, ['style', 'shadowBlur']);\n    if (!isNumber(blur)) {\n      blur = this.radius / 2;\n    }\n    this.blur = blur;\n  }\n\n  private getDefaultSize() {\n    const position = this.getAttribute('position');\n    const coord = this.coordinate;\n    const radius = Math.min(\n      coord.getWidth() / (position.scales[0].ticks.length * 4),\n      coord.getHeight() / (position.scales[1].ticks.length * 4)\n    );\n    return radius;\n  }\n\n  private colorize(img) {\n    const colorAttr = this.getAttribute('color') as any;\n    const pixels = img.data;\n    const paletteCache = this.paletteCache;\n    for (let i = 3; i < pixels.length; i += 4) {\n      const alpha = pixels[i]; // get gradient color from opacity value\n      if (alpha) {\n        let palette;\n        if (paletteCache[alpha]) {\n          palette = paletteCache[alpha];\n        } else {\n          palette = colorUtil.rgb2arr(colorAttr.gradient(alpha / 256));\n          paletteCache[alpha] = palette;\n        }\n        // const palette = colorUtil.rgb2arr(colorAttr.gradient(alpha / 256));\n        pixels[i - 3] = palette[0];\n        pixels[i - 2] = palette[1];\n        pixels[i - 1] = palette[2];\n        pixels[i] = alpha;\n      }\n    }\n  }\n\n  private prepareGreyScaleBlurredCircle(r) {\n    let circleCanvas = this.grayScaleCanvas;\n    if (!circleCanvas) {\n      circleCanvas = document.createElement('canvas');\n      this.grayScaleCanvas = circleCanvas;\n    }\n    const intensity = this.intensity ? this.intensity : 2;\n    const circleRadius = (Math.sqrt(-2.0 * Math.log(ZERO / r / intensity / GAUSS_COEF)) / 3.0) * r;\n    const blur = circleRadius - r;\n    const r2 = circleRadius + blur;\n    const ctx = circleCanvas.getContext('2d');\n    circleCanvas.width = circleCanvas.height = r2 * 2;\n    ctx.clearRect(0, 0, circleCanvas.width, circleCanvas.height);\n    ctx.shadowOffsetX = ctx.shadowOffsetY = r2 * 2;\n    ctx.shadowBlur = blur;\n    ctx.shadowColor = 'black';\n\n    ctx.beginPath();\n    ctx.arc(-r2, -r2, r, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.fill();\n  }\n\n  private drawGrayScaleBlurredCircle(x, y, r, alpha, ctx) {\n    const circleCanvas = this.grayScaleCanvas;\n    ctx.globalAlpha = alpha;\n    ctx.drawImage(circleCanvas, x - r, y - r);\n  }\n\n  private getShadowCanvasCtx() {\n    let canvas = this.shadowCanvas;\n    if (!canvas) {\n      canvas = document.createElement('canvas');\n      this.shadowCanvas = canvas;\n    }\n    canvas.width = this.coordinate.getWidth();\n    canvas.height = this.coordinate.getHeight();\n    const context = canvas.getContext('2d');\n    context.globalCompositeOperation = 'lighter';\n    return context;\n  }\n\n  private clearShadowCanvasCtx() {\n    const ctx = this.getShadowCanvasCtx();\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  }\n\n  private getImageShape() {\n    let imageShape = this.imageShape;\n    if (imageShape) {\n      return imageShape;\n    }\n    const container = this.container;\n    imageShape = container.addShape({\n      type: 'image',\n      attrs: {},\n    });\n    this.imageShape = imageShape;\n  }\n\n  private drawWithRange(data, range) {\n    // canvas size\n    const { start, end } = this.coordinate;\n    const width = this.coordinate.getWidth();\n    const height = this.coordinate.getHeight();\n\n    // value, range, etc\n    const colorAttr = this.getAttribute('color');\n    const valueField = colorAttr.getFields()[0];\n\n    // prepare shadow canvas context\n    this.clearShadowCanvasCtx();\n    const ctx = this.getShadowCanvasCtx();\n    // filter data\n    if (range) {\n      data = data.filter((row) => {\n        return row[ORIGIN_FIELD][valueField] <= range[1] && row[ORIGIN_FIELD][valueField] >= range[0];\n      });\n    }\n\n    // step1. draw points with shadow\n    const scale = this.scales[valueField];\n    for (let i = 0; i < data.length; i++) {\n      const obj = data[i];\n      const cfg = this.getDrawCfg(obj);\n      const alpha = scale.scale(obj[ORIGIN_FIELD][valueField]);\n      // @ts-ignore\n      this.drawGrayScaleBlurredCircle(cfg.x - start.x, cfg.y - end.y, this.radius + this.blur, alpha, ctx);\n    }\n\n    // step2. convert pixels\n    const colored = ctx.getImageData(0, 0, width, height);\n    this.clearShadowCanvasCtx();\n    this.colorize(colored);\n    ctx.putImageData(colored, 0, 0);\n    const image = new Image();\n    image.src = ctx.canvas.toDataURL('image/png');\n    this.getImageShape();\n    this.imageShape.attr('x', start.x);\n    this.imageShape.attr('y', end.y);\n    this.imageShape.attr('width', width);\n    this.imageShape.attr('height', height);\n    this.imageShape.attr('img', ctx.canvas);\n    this.imageShape.set('origin', this.getShapeInfo(data)); // 存储绘图信息数据\n  }\n\n  private getShapeInfo(mappingData) {\n    const shapeCfg = this.getDrawCfg(mappingData[0]);\n\n    return {\n      ...shapeCfg,\n      mappingData,\n      data: this.getData(mappingData),\n    };\n  }\n\n  private getData(mappingData) {\n    return mappingData.map((obj) => {\n      return obj[ORIGIN_FIELD];\n    });\n  }\n}\n\nregisterGeometry('linearHeatmap', LinearHeatmap);\n","import HeatmapBackground from './background';\nimport HeatmapLegend from './legend';\n\nconst ComponentsInfo = {\n  background: { Ctr: HeatmapBackground },\n  legend: { Ctr: HeatmapLegend, padding: 'outer' },\n};\n\nexport function getPlotComponents(plot, type, cfg) {\n  if (plot.options[type] && plot.options[type].visible) {\n    const componentInfo = ComponentsInfo[type];\n    const component = new componentInfo.Ctr(cfg);\n    if (componentInfo.padding) {\n      plot.paddingController.registerPadding(component, componentInfo.padding);\n    }\n    return component;\n  }\n}\n","import { each } from '@antv/util';\nimport { View, IGroup } from '../../../dependents';\nimport EventEmitter from '@antv/event-emitter';\n\nexport interface HeatmapBackgroundConfig {\n  visible?: boolean;\n  type?: string;\n  value?: any;\n  src?: string;\n  callback?: Function;\n}\n\nexport interface IHeatmapBackground extends HeatmapBackgroundConfig {\n  view: View;\n  plot: any;\n}\n\nexport default class HeatmapBackground extends EventEmitter {\n  public options: IHeatmapBackground;\n  public container: IGroup;\n  protected view: View;\n  protected x: number;\n  protected y: number;\n  protected width: number;\n  protected height: number;\n\n  constructor(cfg: IHeatmapBackground) {\n    super();\n    this.options = cfg;\n    this.view = this.options.view;\n    this.init();\n  }\n\n  public init() {\n    const coord = this.getCoordinate();\n    this.width = coord.getWidth();\n    this.height = coord.getHeight();\n    this.x = coord.start.x;\n    this.y = coord.end.y;\n    this.container = this.view.backgroundGroup.addGroup({});\n  }\n\n  public render() {\n    if (this.options.type === 'color') {\n      this.renderColorBackground();\n    } else if (this.options.type === 'image') {\n      this.renderImageBackground();\n    } else if (this.options.callback) {\n      const callbackCfg = {\n        x: this.x,\n        y: this.y,\n        width: this.width,\n        height: this.height,\n        container: this.container,\n      };\n      this.options.callback(callbackCfg);\n    }\n  }\n\n  public renderColorBackground() {\n    this.container.addShape('rect', {\n      attrs: {\n        x: this.x,\n        y: this.y,\n        width: this.width,\n        height: this.height,\n        fill: this.options.value,\n      },\n      name: 'heatmap-background',\n    });\n  }\n\n  public renderImageBackground() {\n    this.container.addShape('image', {\n      attrs: {\n        x: this.x,\n        y: this.y,\n        width: this.width,\n        height: this.height,\n        img: this.options.src,\n      },\n      name: 'heatmap-background',\n    });\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n      this.emit('background:clear');\n    }\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.remove();\n      // 使用callback定制的html background需要自己监听销毁事件自行销毁\n      this.emit('background:destroy');\n    }\n  }\n\n  private getCoordinate() {\n    let coordinate;\n    each(this.view.geometries, (geom) => {\n      if (geom.type === 'heatmap') {\n        coordinate = geom.coordinate;\n      }\n    });\n    return coordinate;\n  }\n}\n","import { each, isArray, deepMix, clone } from '@antv/util';\nimport { View, IGroup } from '../../../dependents';\nimport BBox from '../../../util/bbox';\nimport { LegendPosition } from '../../../interface/config';\n\nconst LABEL_MARGIN = 4;\nconst ACTIVE_OPACITY = 1;\nconst DEACTIVE_OPACITY = 0.1;\n\nexport interface HeatmapLegendConfig {\n  visible?: boolean;\n  position?: LegendPosition;\n  width?: number;\n  height?: number;\n  text?: {\n    style?: any;\n    formatter?: () => string;\n  };\n  gridlineStyle?: any;\n  triggerOn?: string;\n}\n\nexport interface IHeatmapLegend extends HeatmapLegendConfig {\n  view: View;\n  plot: any;\n}\n\nexport default class HeatmapLegend {\n  public options: IHeatmapLegend;\n  public container: IGroup;\n  public afterRender: boolean;\n  public destroyed: boolean = false;\n  protected view: View;\n  protected layout: string;\n  protected width: number;\n  protected height: number;\n  protected position: string;\n  protected x: number;\n  protected y: number;\n  protected dataSlides: any = {};\n  protected colorScale: any;\n\n  constructor(cfg: IHeatmapLegend) {\n    let defaultOptions = this.getDefaultOptions();\n    if (cfg.plot.options.theme && cfg.plot.options.theme === 'dark') {\n      defaultOptions = this.getDarkOptions();\n    }\n    this.options = deepMix({}, defaultOptions, cfg);\n    this.view = this.options.view;\n    this.afterRender = true;\n    this.init();\n  }\n\n  public init() {\n    this.layout = this.getLayout();\n    this.width = this.options.width ? this.options.width : this.getDefaultWidth();\n    this.height = this.options.height ? this.options.height : this.getDefaultHeight();\n    const plotContainer = this.options.plot.container;\n    this.container = plotContainer.addGroup();\n  }\n\n  public render() {\n    const scales = this.getScales();\n    const colorField = this.options.plot.options.colorField;\n    this.colorScale = scales[colorField];\n    const { min, max } = this.colorScale;\n    const { color } = this.options.plot.options;\n    if (this.layout === 'horizontal') {\n      this.renderHorizontal(min, max, color);\n    } else {\n      this.renderVertical(min, max, color);\n    }\n    this.legendLayout();\n    this.addInteraction();\n    this.options.plot.canvas.draw();\n  }\n\n  public hide() {\n    this.container.set('visible', false);\n    this.options.plot.canvas.draw();\n  }\n\n  public show() {\n    this.container.set('visible', true);\n    this.options.plot.canvas.draw();\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.remove();\n    }\n    this.destroyed = true;\n  }\n\n  public getBBox() {\n    const origin_bbox = this.container.getBBox();\n    return new BBox(this.x, this.y, origin_bbox.width, origin_bbox.height);\n  }\n\n  protected renderVertical(min, max, colors) {\n    const gridWidth = this.width;\n    const gridHeight = this.height / colors.length;\n    const gridLineContainer = this.container.addGroup();\n    const gridColors = clone(colors).reverse();\n    const valueStep = (max - min) / colors.length;\n    // 绘制色彩格子\n    each(gridColors, (c, i) => {\n      const y = gridHeight * i;\n      // 记录每个grid代表的区间信息用于legend交互\n      const appendInfo = { to: max - valueStep * i, from: max - valueStep * (i + 1) };\n      const rect = this.container.addShape('rect', {\n        attrs: {\n          x: 0,\n          y,\n          width: gridWidth,\n          height: gridHeight,\n          fill: c,\n          opacity: ACTIVE_OPACITY,\n          cursor: 'pointer',\n        },\n        name: 'legend',\n      });\n      rect.set('info', appendInfo);\n      const dataSlide = this.getDataSlide(appendInfo);\n      this.dataSlides[`${appendInfo.from}-${appendInfo.to}`] = { mode: 'active', data: dataSlide };\n      gridLineContainer.addShape('path', {\n        attrs: {\n          path: [\n            ['M', 0, y + gridHeight],\n            ['L', gridWidth, y + gridHeight],\n          ],\n          ...this.options.gridlineStyle,\n        },\n      });\n    });\n    // 绘制两边的label\n    this.container.addShape('text', {\n      attrs: {\n        text: max,\n        x: gridWidth / 2,\n        y: -LABEL_MARGIN,\n        textAlign: 'center',\n        textBaseline: 'bottom',\n        ...this.options.text.style,\n      },\n      name: 'legend-label',\n    });\n    this.container.addShape('text', {\n      attrs: {\n        text: min,\n        x: gridWidth / 2,\n        y: this.height + LABEL_MARGIN,\n        textAlign: 'center',\n        textBaseline: 'top',\n        ...this.options.text.style,\n        name: 'legend-label',\n      },\n    });\n    // 绘制包围线\n    gridLineContainer.addShape('path', {\n      attrs: {\n        path: [\n          ['M', 0, 0],\n          ['L', this.width, 0],\n          ['L', this.width, this.height],\n          ['L', 0, this.height],\n          ['L', 0, 0],\n        ],\n        ...this.options.gridlineStyle,\n      },\n    });\n  }\n\n  protected renderHorizontal(min, max, colors) {\n    const gridWidth = this.width / colors.length;\n    const gridHeight = this.height;\n    const gridLineContainer = this.container.addGroup();\n    const valueStep = (max - min) / colors.length;\n    // 绘制色彩格子\n    each(colors, (c, i) => {\n      const x = gridWidth * i;\n      // 记录每个grid代表的区间信息用于legend交互\n      const appendInfo = { from: valueStep * i, to: valueStep * (i + 1) };\n      const rect = this.container.addShape('rect', {\n        attrs: {\n          x,\n          y: 0,\n          width: gridWidth,\n          height: gridHeight,\n          fill: c,\n          opacity: 0.8,\n          cursor: 'pointer',\n        },\n        name: 'legend',\n      });\n      rect.set('info', appendInfo);\n      gridLineContainer.addShape('path', {\n        attrs: {\n          path: [\n            ['M', x + gridWidth, 0],\n            ['L', x + gridWidth, gridHeight],\n          ],\n          ...this.options.gridlineStyle,\n        },\n      });\n    });\n    // 绘制两边的label\n    this.container.addShape('text', {\n      attrs: {\n        text: min,\n        x: -LABEL_MARGIN,\n        y: gridHeight / 2,\n        ...this.options.text.style,\n        textAlign: 'right',\n        textBaseline: 'middle',\n      },\n      name: 'legend-label',\n    });\n    this.container.addShape('text', {\n      attrs: {\n        text: max,\n        x: this.width + LABEL_MARGIN,\n        y: gridHeight / 2,\n        textAlign: 'left',\n        textBaseline: 'middle',\n        ...this.options.text.style,\n      },\n      name: 'legend-label',\n    });\n    // 绘制包围线\n    gridLineContainer.addShape('path', {\n      attrs: {\n        path: [\n          ['M', 0, 0],\n          ['L', this.width, 0],\n          ['L', this.width, this.height],\n          ['L', 0, this.height],\n          ['L', 0, 0],\n        ],\n        ...this.options.gridlineStyle,\n      },\n    });\n  }\n\n  protected getLayout() {\n    const positions = this.options.position.split('-');\n    this.position = positions[0];\n    if (positions[0] === 'left' || positions[0] === 'right') {\n      return 'vertical';\n    }\n    return 'horizontal';\n  }\n\n  protected getDefaultWidth() {\n    if (this.layout === 'horizontal') {\n      const { width } = this.options.plot.options;\n      return width * 0.5;\n    }\n    return 10;\n  }\n\n  protected getDefaultHeight() {\n    if (this.layout === 'vertical') {\n      const { height } = this.options.plot.options;\n      return height * 0.5;\n    }\n    return 10;\n  }\n\n  protected legendLayout() {\n    const { bleeding } = this.options.plot.getPlotTheme();\n    if (isArray(bleeding)) {\n      each(bleeding, (it, index) => {\n        if (typeof bleeding[index] === 'function') {\n          bleeding[index] = bleeding[index](this.options.plot.options);\n        }\n      });\n    }\n    const bbox = this.container.getBBox();\n    let x = 0;\n    let y = 0;\n    const positions = this.options.position.split('-');\n    const plotWidth = this.options.plot.width;\n    const plotHeight = this.options.plot.height;\n    // 先确定x\n    if (positions[0] === 'left') {\n      x = bleeding[3];\n    } else if (positions[0] === 'right') {\n      x = plotWidth - bleeding[1] - bbox.width;\n    } else if (positions[1] === 'center') {\n      x = (plotWidth - bbox.width) / 2;\n    } else if (positions[1] === 'left') {\n      x = bleeding[3];\n    } else if (positions[1] === 'right') {\n      x = this.options.plot.width - bleeding[1] - bbox.width;\n    }\n    // 再确定y\n    if (positions[0] === 'bottom') {\n      y = plotHeight - bleeding[2] - bbox.height;\n    } else if (positions[0] === 'top') {\n      y = this.getTopPosition(bleeding);\n    } else if (positions[1] === 'center') {\n      y = (plotHeight - bbox.height) / 2;\n    } else if (positions[1] === 'top') {\n      y = bleeding[0];\n    } else if (positions[1] === 'bottom') {\n      y = plotHeight - bleeding[2] - bbox.height;\n    }\n\n    this.x = x;\n    this.y = y;\n\n    this.container.translate(x, y);\n  }\n\n  protected getDefaultOptions() {\n    return {\n      text: {\n        style: {\n          fontSize: 12,\n          fill: 'rgba(0, 0, 0, 0.45)',\n        },\n      },\n      gridlineStyle: {\n        lineWidth: 1,\n        stroke: 'rgba(0, 0, 0, 0.45)',\n      },\n    };\n  }\n\n  protected getDarkOptions() {\n    return {\n      text: {\n        style: {\n          fontSize: 12,\n          fill: 'rgba(255, 255, 255, 0.45)',\n        },\n      },\n      gridlineStyle: {\n        lineWidth: 1,\n        stroke: 'rgba(255, 255, 255, 0.25)',\n      },\n    };\n  }\n\n  protected addInteraction() {\n    const { colorField } = this.options.plot.options;\n    this.container.on('click', (ev) => {\n      const { target } = ev;\n      if (target.get('name') === 'legend') {\n        const appendInfo = target.get('info');\n        const targetInfo = `${appendInfo.from}-${appendInfo.to}`;\n        const relativeData = this.dataSlides[targetInfo];\n        if (relativeData.mode === 'active') {\n          relativeData.mode = 'deactive';\n          target.stopAnimate();\n          target.animate(\n            {\n              opacity: DEACTIVE_OPACITY,\n            },\n            200\n          );\n        } else {\n          relativeData.mode = 'active';\n          target.stopAnimate();\n          target.animate(\n            {\n              opacity: ACTIVE_OPACITY,\n            },\n            200\n          );\n        }\n        const filteredData = this.getFilteredData();\n        if (filteredData.length > 0) {\n          this.view.changeData(filteredData);\n          //this.view.set('data', filteredData);\n          this.view.scale(colorField, {\n            min: this.colorScale.min,\n            max: this.colorScale.max,\n            nice: this.colorScale.nice,\n          } as any);\n          this.view.render();\n        }\n      }\n    });\n  }\n\n  protected getFilteredData() {\n    const filteredData = [];\n    each(this.dataSlides, (s) => {\n      if (s.mode == 'active') {\n        filteredData.push(...s.data);\n      }\n    });\n    return filteredData;\n  }\n\n  //预先对数据进行分组\n  protected getDataSlide(range) {\n    const slide = [];\n    const { colorField, data } = this.options.plot.options;\n    each(data, (d) => {\n      const value = d[colorField];\n      if (value >= range.from && value < range.to) {\n        slide.push(d);\n      }\n    });\n    return slide;\n  }\n\n  private getTopPosition(bleeding) {\n    if (this.options.plot.description) {\n      const bbox = this.options.plot.description.getBBox();\n      return bbox.maxY + 10;\n    } else if (this.options.plot.title) {\n      const bbox = this.options.plot.title.getBBox();\n      return bbox.maxY + 10;\n    }\n    return bleeding[0];\n  }\n\n  private getScales() {\n    let scales;\n    each(this.view.geometries, (geom) => {\n      if (geom.type === 'heatmap') {\n        scales = geom.scales;\n      }\n    });\n    return scales;\n  }\n}\n","import { assign } from '@antv/util';\nimport { getEventMap, EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst componentMap = {\n  heatmap: 'heatmap',\n  legendLabel: 'legend-label',\n  heatmapBackground: 'heatmap-background',\n};\n\nconst SHAPE_EVENT_MAP: IEventmap = getEventMap(componentMap);\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport HeatmapLayer, { HeatmapLayerConfig } from './layer';\n\nexport interface HeatmapConfig extends HeatmapLayerConfig, PlotConfig {}\n\nexport default class Heatmap extends BasePlot<HeatmapConfig> {\n  public static getDefaultOptions: typeof HeatmapLayer.getDefaultOptions = HeatmapLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'heatmap';\n    super.createLayers(layerProps);\n  }\n\n  public changeShape(type: string) {\n    const layer: any = this.layers[0];\n    layer.changeShape(type);\n  }\n\n  public mappingSize(field: string) {\n    const layer: any = this.layers[0];\n    layer.mappingSize(field);\n  }\n\n  public disableMappingSize() {\n    const layer: any = this.layers[0];\n    layer.disableMappingSize();\n  }\n}\n","import { deepMix, valuesOfKey, each, isObject, isFunction } from '@antv/util';\nimport { getScale } from '@antv/scale';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport ViewLayer, { ViewConfig } from '../../base/view-layer';\nimport { MatrixLegendConfig } from './component/legend';\nimport { getRectPath, getCirclePath, getCircleCurve } from './shape';\nimport { getPlotComponents } from './component';\nimport { GraphicStyle } from '../../interface/config';\n\nexport interface HeatmapViewConfig extends ViewConfig {\n  sizeField?: string;\n  colorField?: string;\n  shapeSize?: number[];\n  shapeType?: string;\n  shapeStyle?: GraphicStyle;\n  color?: string[];\n  legend?: MatrixLegendConfig;\n}\n\nexport interface HeatmapLayerConfig extends HeatmapViewConfig, LayerConfig {}\n\nexport default class HeatmapLayer<T extends HeatmapLayerConfig = HeatmapLayerConfig> extends ViewLayer<T> {\n  public static getDefaultOptions(): any {\n    return deepMix({}, super.getDefaultOptions(), {\n      shapeType: 'rect',\n      legend: {\n        visible: true,\n        position: 'right-center',\n      },\n      tooltip: {\n        shared: false,\n        showCrosshairs: false,\n        showMarkers: false,\n      },\n      xAxis: {\n        visible: true,\n        gridAlign: 'center',\n        grid: {\n          visible: true,\n        },\n        tickLine: {\n          visible: true,\n        },\n        line: {\n          visible: false,\n        },\n        label: {\n          visible: true,\n          autoHide: true,\n          autoRotate: true,\n        },\n      },\n      yAxis: {\n        visible: true,\n        gridAlign: 'center',\n        grid: {\n          visible: true,\n          align: 'center',\n        },\n        tickLine: {\n          visible: true,\n        },\n        label: {\n          autoHide: true,\n          autoRotate: false,\n        },\n      },\n      color: ['#9ae3d5', '#66cdbb', '#e7a744', '#f1e066', '#f27664', '#e7c1a2'],\n      label: {\n        visible: true,\n        adjustColor: true,\n        adjustPosition: true,\n        offset: 0,\n        style: {\n          stroke: 'rgba(255,255,255,0)',\n          lineWidth: 0,\n        },\n      },\n      interactions: [{ type: 'tooltip' }],\n    });\n  }\n\n  public type: string = 'heatmap';\n  protected gridSize: number[] = [];\n  protected plotComponents: any[] = [];\n\n  public afterRender() {\n    this.renderPlotComponents();\n    super.afterRender();\n  }\n\n  public changeShape(type: string) {\n    if (this.options.shapeType === type) {\n      return;\n    }\n    this.options.shapeType = type;\n    if (type === 'rect') {\n      const shapes = this.getShapes();\n      this.circleToRect(shapes);\n    } else if (type === 'circle') {\n      const shapes = this.getShapes();\n      this.rectToCircle(shapes);\n    }\n  }\n\n  public mappingSize(field: string) {\n    if (this.options.sizeField && this.options.sizeField === field) {\n      return;\n    }\n    this.options.sizeField = field;\n    // 创建scale\n    const values = valuesOfKey(this.options.data, field);\n    const min = Math.min(...values);\n    const max = Math.max(...values);\n    const LinearScale = getScale('linear');\n    const scale = new LinearScale({\n      min,\n      max,\n    });\n    const shapes = this.getShapes();\n    if (this.options.shapeType === 'rect') {\n      this.rectSizeMapping(shapes, scale, field);\n    } else if (this.options.shapeType === 'circle') {\n      this.circleSizeMapping(shapes, scale, field);\n    }\n  }\n\n  public disableMappingSize() {\n    const shapes = this.getShapes();\n    if (this.options.shapeType === 'rect') {\n      this.rectDisableSizeMapping(shapes);\n    } else if (this.options.shapeType === 'circle') {\n      this.circleDisableSizeMapping(shapes);\n    }\n  }\n\n  public destroy() {\n    each(this.plotComponents, (component) => {\n      component.destroy();\n    });\n    super.destroy();\n  }\n\n  protected geometryParser() {\n    return '';\n  }\n\n  protected coord() {\n    return;\n  }\n\n  protected legend() {\n    this.setConfig('legends', false);\n  }\n\n  protected addGeometry() {\n    this.gridSize = this.getGridSize();\n    let geomConfig;\n    if (this.options.shapeType === 'rect') {\n      geomConfig = this.addRect();\n    } else {\n      const circle = this.addCircle();\n      geomConfig = circle;\n    }\n    if (this.options.shapeStyle) {\n      const styleConfig: any = {};\n      if (isObject(this.options.shapeStyle)) {\n        styleConfig.cfg = this.options.shapeStyle;\n      } else if (isFunction(this.options.shapeType)) {\n        styleConfig.fields = [\n          this.options.colorField,\n          this.options.xField,\n          this.options.yField,\n          this.options.sizeField,\n        ];\n        styleConfig.callback = this.options.shapeType;\n      }\n      geomConfig.style = styleConfig;\n    }\n    if (this.options.tooltip && (this.options.tooltip.fields || this.options.tooltip.formatter)) {\n      this.geometryTooltip(geomConfig);\n    }\n\n    this.setConfig('geometry', geomConfig);\n  }\n\n  protected addRect() {\n    // 如果用户设置了size，将size数值转换为[0,1]区间\n    const size = [0.3, 0.9];\n    if (this.options.shapeSize) {\n      size[0] = this.options.shapeSize[0] / this.gridSize[0];\n      size[1] = this.options.shapeSize[1] / this.gridSize[1];\n    }\n    const rect: any = {\n      type: 'polygon',\n      position: {\n        fields: [this.options.xField, this.options.yField],\n      },\n      color: {\n        fields: [this.options.colorField],\n        values: this.options.color,\n      },\n      shape: {\n        values: ['rect'],\n      },\n      label: false,\n    };\n    if (this.options.sizeField) {\n      rect.size = {\n        fields: [this.options.sizeField],\n        values: size,\n      };\n    } else {\n      rect.size = {\n        values: [1],\n      };\n    }\n    return rect;\n  }\n\n  protected addCircle() {\n    let size = [0.3, 0.9];\n    if (this.options.shapeSize) {\n      size = this.options.shapeSize;\n    } else {\n      size[0] = this.gridSize[0] * size[0] * 0.5;\n      size[1] = this.gridSize[1] * size[1] * 0.5;\n    }\n    const circle: any = {\n      type: 'point',\n      position: {\n        fields: [this.options.xField, this.options.yField],\n      },\n      color: {\n        fields: [this.options.colorField],\n        values: this.options.color,\n      },\n      shape: {\n        values: ['curvePoint'],\n      },\n      label: false,\n    };\n    if (this.options.sizeField) {\n      circle.size = {\n        fields: [this.options.sizeField],\n        values: size,\n      };\n    } else {\n      circle.size = {\n        values: [Math.min(this.gridSize[0], this.gridSize[1]) * 0.5 * 0.9],\n      };\n    }\n    return circle;\n  }\n\n  protected geometryTooltip(config) {\n    config.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      config.tooltip.fields = tooltipOptions.fields;\n    }\n    if (tooltipOptions.formatter) {\n      config.tooltip.callback = tooltipOptions.formatter;\n      if (!tooltipOptions.fields) {\n        config.tooltip.fields = [this.options.xField, this.options.yField];\n        if (this.options.colorField) {\n          config.tooltip.fields.push(this.options.colorField);\n        }\n      }\n    }\n  }\n\n  private getGridSize() {\n    if (this.options.padding === 'auto') {\n      return [0, 0];\n    } else {\n      const viewRange = this.getViewRange();\n      const { padding, xField, yField, data } = this.options;\n      const width = viewRange.width - padding[1] - padding[3];\n      const height = viewRange.height - padding[0] - padding[2];\n      const xCount = valuesOfKey(data, xField).length;\n      const yCount = valuesOfKey(data, yField).length;\n      return [width / xCount, height / yCount];\n    }\n  }\n\n  private circleToRect(shapes) {\n    const gridSize = this.gridSize;\n    each(shapes, (shape) => {\n      const { x, y, size } = shape.get('origin');\n      let sizeRatio = (size * 2) / Math.min(gridSize[0], gridSize[1]);\n      if (!this.options.sizeField) {\n        sizeRatio = 1;\n      }\n      const curvePath = getCircleCurve(x, y, size);\n      const rectPath = getRectPath(x, y, gridSize[0], gridSize[1], sizeRatio);\n      shape.stopAnimate();\n      shape.attr('path', curvePath);\n      shape.animate(\n        {\n          path: rectPath,\n        },\n        500,\n        'easeLinear'\n      );\n    });\n  }\n\n  private rectToCircle(shapes) {\n    each(shapes, (shape) => {\n      const coord = shape.get('coord');\n      const { points } = shape.get('origin');\n      const ps = [];\n      each(points, (p) => {\n        ps.push(coord.convertPoint(p));\n      });\n      const bbox = shape.getBBox();\n      const width = bbox.width;\n      const height = bbox.height;\n      const centerX = bbox.minX + width / 2;\n      const centerY = bbox.minY + height / 2;\n      const offsetRatio = this.options.sizeField ? 1 : 0.9;\n      const curvePath = getCircleCurve(centerX, centerY, (Math.min(width, height) / 2) * offsetRatio);\n      const circlePath = getCirclePath(centerX, centerY, (Math.min(width, height) / 2) * offsetRatio);\n      shape.stopAnimate();\n      shape.animate(\n        {\n          path: curvePath,\n        },\n        500,\n        'easeLinear',\n        () => {\n          shape.attr('path', circlePath);\n        }\n      );\n    });\n  }\n\n  private rectSizeMapping(shapes, scale, field) {\n    each(shapes, (shape) => {\n      const data = shape.get('origin').data;\n      const ratio = 0.3 + scale.scale(data[field]) * 0.6;\n      shape.get('origin').size = ratio;\n      const bbox = shape.getBBox();\n      const width = bbox.width;\n      const height = bbox.height;\n      const centerX = bbox.minX + width / 2;\n      const centerY = bbox.minY + height / 2;\n      const path = getRectPath(centerX, centerY, width, height, ratio);\n      shape.stopAnimate();\n      shape.animate(\n        {\n          path: path,\n        },\n        500,\n        'easeLinear'\n      );\n    });\n  }\n\n  private circleSizeMapping(shapes, scale, field) {\n    each(shapes, (shape) => {\n      const data = shape.get('origin').data;\n      const ratio = 0.3 + scale.scale(data[field]) * 0.6;\n      const { x, y, size } = shape.get('origin');\n      const path = getCirclePath(x, y, size * ratio);\n      shape.get('origin').size = size * ratio;\n      shape.stopAnimate();\n      shape.animate(\n        {\n          path: path,\n        },\n        500,\n        'easeLinear'\n      );\n    });\n  }\n\n  private circleDisableSizeMapping(shapes) {\n    this.options.sizeField = null;\n    each(shapes, (shape) => {\n      const { x, y } = shape.get('origin');\n      const size = Math.min(this.gridSize[0], this.gridSize[1]) * 0.9;\n      shape.get('origin').size = size / 2;\n      const path = getCirclePath(x, y, size / 2);\n      shape.stopAnimate();\n      shape.animate(\n        {\n          path: path,\n        },\n        500,\n        'easeLinear'\n      );\n    });\n  }\n\n  private rectDisableSizeMapping(shapes) {\n    this.options.sizeField = null;\n    each(shapes, (shape) => {\n      const bbox = shape.getBBox();\n      const width = bbox.width;\n      const height = bbox.height;\n      const centerX = bbox.minX + width / 2;\n      const centerY = bbox.minY + height / 2;\n      const path = getRectPath(centerX, centerY, this.gridSize[0], this.gridSize[1], 1);\n      shape.get('origin').size = 1;\n      shape.stopAnimate();\n      shape.animate(\n        {\n          path: path,\n        },\n        500,\n        'easeLinear'\n      );\n    });\n  }\n\n  private getShapes() {\n    const elements = this.view.geometries[0].elements;\n    const shapes = [];\n    each(elements, (ele) => {\n      shapes.push(ele.shape);\n    });\n    return shapes;\n  }\n\n  protected renderPlotComponents() {\n    each(this.plotComponents, (component) => {\n      component.destroy();\n    });\n    this.plotComponents = [];\n    const componentsType = ['label', 'legend'];\n    each(componentsType, (t) => {\n      const cfg = {\n        view: this.view,\n        plot: this,\n        ...this.options[t],\n      };\n      const component = getPlotComponents(this, t, cfg);\n      if (component) {\n        component.render();\n        this.plotComponents.push(component);\n      }\n    });\n  }\n}\n\nregisterPlotType('heatmap', HeatmapLayer);\n","import { registerShape } from '../../dependents';\nimport { deepMix } from '@antv/util';\n\nexport function getRectPath(cx, cy, width, height, size) {\n  const w = width * size;\n  const h = height * size;\n  const path = [\n    ['M', cx - w / 2, cy + h / 2],\n    ['Q', cx - w / 2, cy, cx - w / 2, cy - h / 2],\n    ['Q', cx, cy - h / 2, cx + w / 2, cy - h / 2],\n    ['Q', cx + w / 2, cy, cx + w / 2, cy + h / 2],\n    ['Q', cx, cy + h / 2, cx - w / 2, cy + h / 2],\n    ['Z'],\n  ];\n  return path;\n}\n\nexport function getCirclePath(x, y, size) {\n  const path = [\n    ['M', x, y],\n    ['l', -size, 0],\n    ['a', size, size, 0, 1, 0, size * 2, 0],\n    ['a', size, size, 0, 1, 0, -(size * 2), 0],\n    ['Z'],\n  ];\n  return path;\n}\n\nexport function getCircleCurve(x, y, size) {\n  // 计算四个角和中点\n  const path = [\n    ['M', x - size, y],\n    ['Q', x - size, y - size, x, y - size],\n    ['Q', x + size, y - size, x + size, y],\n    ['Q', x + size, y + size, x, y + size],\n    ['Q', x - size, y + size, x - size, y],\n    ['Z'],\n  ];\n  return path;\n}\n\nregisterShape('polygon', 'rect', {\n  draw(cfg, container) {\n    const points = this.parsePoints(cfg.points);\n    const width = points[2].x - points[0].x;\n    const height = points[0].y - points[1].y;\n    const centerX = points[0].x + width / 2;\n    const centerY = points[1].y + height / 2;\n    /*\n        const path = [\n          ['M', centerX - w / 2, centerY + h / 2],\n          ['L', centerX - w / 2, centerY - h / 2],\n          ['L', centerX + w / 2, centerY - h / 2],\n          ['L', centerX + w / 2, centerY + h / 2],\n          ['Z'],\n        ];\n        */\n    const path = getRectPath(centerX, centerY, width, height, cfg.size);\n    return container.addShape('path', {\n      attrs: deepMix(\n        {},\n        {\n          path,\n          fill: cfg.color,\n          opacity: 1,\n        },\n        cfg.style\n      ),\n    });\n  },\n});\n\nregisterShape('point', 'curvePoint', {\n  draw(cfg, container) {\n    const path = getCirclePath(cfg.x, cfg.y, cfg.size);\n    return container.addShape('path', {\n      attrs: deepMix(\n        {},\n        {\n          path,\n          fill: cfg.color,\n          opacity: 1,\n        },\n        cfg.style\n      ),\n    });\n  },\n});\n","import MatrixLabel from './label';\nimport MatrixLegend from './legend';\n\nconst ComponentsInfo = {\n  label: { Ctr: MatrixLabel },\n  legend: { Ctr: MatrixLegend, padding: 'outer' },\n};\n\nexport function getPlotComponents(plot, type, cfg) {\n  if (plot.options[type] && plot.options[type].visible) {\n    const componentInfo = ComponentsInfo[type];\n    const component = new componentInfo.Ctr(cfg);\n    if (componentInfo.padding) {\n      plot.paddingController.registerPadding(component, componentInfo.padding);\n    }\n    return component;\n  }\n}\n","import { each, deepMix, clone } from '@antv/util';\nimport { View, IGroup } from '../../../dependents';\nimport { rgb2arr, mappingColor } from '../../../util/color';\n\nexport interface MatrixLabelConfig {\n  visible: boolean;\n  formatter?: (...args: any[]) => string;\n  offsetX?: number;\n  offsetY?: number;\n  style?: any;\n  adjustColor?: boolean;\n  adjustPosition?: boolean;\n}\n\nexport interface IMatrixLabel extends MatrixLabelConfig {\n  view: View;\n  plot: any;\n}\n\nexport default class MatrixLabel {\n  public options: MatrixLabelConfig;\n  public destroyed: boolean = false;\n  protected plot: any;\n  protected view: View;\n  private container: IGroup;\n\n  constructor(cfg: IMatrixLabel) {\n    this.view = cfg.view;\n    this.plot = cfg.plot;\n    const defaultOptions = this.getDefaultOptions();\n    this.options = deepMix(defaultOptions, cfg, {});\n    this.init();\n  }\n\n  protected init() {\n    this.container = this.view.geometries[0].labelsContainer;\n    this.view.on('beforerender', () => {\n      this.clear();\n      this.plot.canvas.draw();\n    });\n  }\n\n  public render() {\n    const elements = this.view.geometries[0].elements;\n    each(elements, (ele) => {\n      const { shape } = ele;\n      const { style, offsetX, offsetY } = this.options;\n      const formatter = this.options.formatter;\n      const content = formatter ? formatter(this.getContent(shape)) : this.getContent(shape);\n      const position = this.getPosition(shape);\n      const color = this.getTextColor(shape);\n      const label = this.container.addShape('text', {\n        attrs: deepMix({}, style, {\n          x: position.x + offsetX,\n          y: position.y + offsetY,\n          text: content,\n          fill: color,\n          textAlign: 'center',\n          textBaseline: 'middle',\n        }),\n        name: 'label',\n      });\n      if (this.options.adjustPosition) {\n        this.adjustLabel(label, shape);\n      }\n    });\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n  }\n\n  public hide() {\n    this.container.set('visible', false);\n    this.plot.canvas.draw();\n  }\n\n  public show() {\n    this.container.set('visible', true);\n    this.plot.canvas.draw();\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.remove();\n    }\n    this.destroyed = true;\n  }\n\n  public getBBox() {\n    return this.container.getBBox();\n  }\n\n  private getDefaultOptions() {\n    const { theme } = this.plot;\n    const labelStyle = theme.label.style;\n    return {\n      offsetX: 0,\n      offsetY: 0,\n      style: clone(labelStyle),\n    };\n  }\n\n  protected getContent(shape) {\n    const data = shape.get('origin').data;\n    const field = this.plot.options.colorField;\n    return data[field];\n  }\n\n  protected getPosition(shape) {\n    const bbox = shape.getBBox();\n    return {\n      x: bbox.minX + bbox.width / 2,\n      y: bbox.minY + bbox.height / 2,\n    };\n  }\n\n  protected getTextColor(shape) {\n    if (this.options.adjustColor) {\n      const shapeColor = shape.attr('fill');\n      const shapeOpacity = shape.attr('opacity') ? shape.attr('opacity') : 1;\n      const rgb = rgb2arr(shapeColor);\n      const gray = Math.round(rgb[0] * 0.299 + rgb[1] * 0.587 + rgb[2] * 0.114) / shapeOpacity;\n      const colorBand = [\n        { from: 0, to: 85, color: 'white' },\n        { from: 85, to: 170, color: '#F6F6F6' },\n        { from: 170, to: 255, color: 'black' },\n      ];\n      const reflect = mappingColor(colorBand, gray);\n      return reflect;\n    }\n    const defaultColor = this.options.style.fill;\n    return defaultColor;\n  }\n\n  protected adjustLabel(label, shape) {\n    const labelRange = label.getBBox();\n    const shapeRange = shape.getBBox();\n    if (labelRange.width > shapeRange.width || labelRange.height > shapeRange.height) {\n      label.attr('text', '');\n    }\n  }\n}\n","import { each, isArray, deepMix } from '@antv/util';\nimport BBox from '../../../util/bbox';\nimport { View, IGroup, IShape } from '../../../dependents';\nimport { LegendPosition, GraphicStyle, TextStyle, LineStyle } from '../../../interface/config';\n\nconst LABEL_MARGIN = 4;\n\nexport interface MatrixLegendConfig {\n  visible?: boolean;\n  position?: LegendPosition;\n  width?: number;\n  height?: number;\n  text?: {\n    style?: TextStyle;\n    formatter?: () => string;\n  };\n  ticklineStyle?: LineStyle;\n  anchorStyle?: GraphicStyle;\n  triggerOn?: string;\n}\n\nexport interface IMatrixLegend extends MatrixLegendConfig {\n  view: View;\n  plot: any;\n}\n\nexport default class MatrixLegend {\n  public options: IMatrixLegend;\n  public container: IGroup;\n  public anchor: IShape;\n  public afterRender: boolean;\n  public destroyed: boolean = false;\n  protected view: View;\n  protected layout: string;\n  protected width: number;\n  protected height: number;\n  protected position: string;\n  protected x: number;\n  protected y: number;\n  protected dataSlides: any = {};\n  protected colorScale: any;\n  private interactiveEvents: any = {};\n\n  constructor(cfg: IMatrixLegend) {\n    const defaultOptions = this.getDefaultOptions();\n    this.options = deepMix({}, defaultOptions, cfg);\n    this.view = this.options.view;\n    this.afterRender = true;\n    this.init();\n  }\n\n  public init() {\n    this.layout = this.getLayout();\n    this.width = this.options.width ? this.options.width : this.getDefaultWidth();\n    this.height = this.options.height ? this.options.height : this.getDefaultHeight();\n    const plotContainer = this.options.plot.container;\n    if (this.container) {\n      this.container.remove();\n    }\n    this.container = plotContainer.addGroup();\n    this.view.on('beforerender', () => {\n      this.clear();\n      this.options.plot.canvas.draw();\n    });\n  }\n\n  public render() {\n    const scales = this.view.geometries[0].scales;\n    const colorField = this.options.plot.options.colorField;\n    this.colorScale = scales[colorField];\n    const { min, max } = this.colorScale;\n    const { color } = this.options.plot.options;\n    if (this.layout === 'horizontal') {\n      this.renderHorizontal(min, max, color);\n    } else {\n      this.renderVertical(min, max, color);\n    }\n    this.legendLayout();\n    this.addInteraction();\n  }\n\n  public hide() {\n    this.container.set('visible', false);\n    this.options.plot.canvas.draw();\n  }\n\n  public show() {\n    this.container.set('visible', true);\n    this.options.plot.canvas.draw();\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.remove();\n    }\n    this.offEvent();\n    this.destroyed = true;\n  }\n\n  public getBBox() {\n    const origin_bbox = this.container.getBBox();\n    return new BBox(this.x, this.y, origin_bbox.width, origin_bbox.height);\n  }\n\n  protected renderVertical(min: number, max: number, colors: string[]) {\n    const valueStep = (max - min) / (colors.length - 1);\n    const colorStep = 1 / (colors.length - 1);\n    const tickStep = this.height / (colors.length - 1);\n    let gradientColor = 'l(90)';\n    each(colors, (c, index) => {\n      const stepNum = colorStep * index;\n      gradientColor += `${stepNum}:${c} `;\n    });\n    this.container.addShape('rect', {\n      attrs: {\n        x: 0,\n        y: 0,\n        width: this.width,\n        height: this.height,\n        fill: gradientColor,\n      },\n      name: 'legend',\n    });\n    // draw tick and label\n    each(colors, (c, index) => {\n      // tick\n      const step = tickStep * index;\n      this.container.addShape('path', {\n        attrs: {\n          path: [\n            ['M', 0, step],\n            ['L', this.width, step],\n          ],\n          ...this.options.ticklineStyle,\n        },\n      });\n      // value\n      const value = Math.round(valueStep * index);\n      this.container.addShape('text', {\n        attrs: {\n          text: value,\n          textAlign: 'left',\n          textBaseline: 'middle',\n          x: this.width + LABEL_MARGIN,\n          y: step,\n          ...this.options.text.style,\n        },\n        name: 'legend-label',\n      });\n    });\n    //anchor\n    const tri_width = 10;\n    const tri_height = 14;\n    const tri_path = [['M', -tri_width, -tri_height / 2], ['L', 0, 0], ['L', -tri_width, tri_height / 2], ['Z']];\n    this.anchor = this.container.addShape('path', {\n      attrs: {\n        path: tri_path,\n        ...this.options.anchorStyle,\n      },\n    });\n    this.anchor.set('visible', false);\n  }\n\n  protected renderHorizontal(min: number, max: number, colors: string[]) {\n    const valueStep = (max - min) / (colors.length - 1);\n    const colorStep = 1 / (colors.length - 1);\n    const tickStep = this.width / (colors.length - 1);\n    let gradientColor = 'l(0)';\n    each(colors, (c, index) => {\n      const stepNum = colorStep * index;\n      gradientColor += `${stepNum}:${c} `;\n    });\n    this.container.addShape('rect', {\n      attrs: {\n        x: 0,\n        y: 0,\n        width: this.width,\n        height: this.height,\n        fill: gradientColor,\n      },\n      name: 'legend',\n    });\n    // draw tick and label\n    each(colors, (c, index) => {\n      // tick\n      const step = tickStep * index;\n      this.container.addShape('path', {\n        attrs: {\n          path: [\n            ['M', step, 0],\n            ['L', step, this.height],\n          ],\n          ...this.options.ticklineStyle,\n        },\n        name: 'legend-label',\n      });\n      // value\n      const value = Math.round(valueStep * index);\n      this.container.addShape('text', {\n        attrs: {\n          text: value,\n          textAlign: 'center',\n          textBaseline: 'top',\n          x: step,\n          y: this.height + LABEL_MARGIN,\n          ...this.options.text.style,\n        },\n      });\n    });\n    //anchor\n    const tri_width = 14;\n    const tri_height = 10;\n    const tri_path = [['M', 0, 0], ['L', -tri_width / 2, -tri_height], ['L', tri_width / 2, -tri_height], ['Z']];\n    this.anchor = this.container.addShape('path', {\n      attrs: {\n        path: tri_path,\n        ...this.options.anchorStyle,\n      },\n    });\n    this.anchor.set('visible', false);\n  }\n\n  protected getLayout() {\n    const positions = this.options.position.split('-');\n    this.position = positions[0];\n    if (positions[0] === 'left' || positions[0] === 'right') {\n      return 'vertical';\n    }\n    return 'horizontal';\n  }\n\n  protected getDefaultWidth() {\n    if (this.layout === 'horizontal') {\n      const width = this.view.coordinateBBox.width;\n      return width;\n    }\n    return 10;\n  }\n\n  protected getDefaultHeight() {\n    if (this.layout === 'vertical') {\n      const height = this.view.coordinateBBox.height;\n      return height;\n    }\n    return 10;\n  }\n\n  protected legendLayout() {\n    const panelRange = this.view.coordinateBBox;\n    const { bleeding } = this.options.plot.getPlotTheme();\n    if (isArray(bleeding)) {\n      each(bleeding, (it, index) => {\n        if (typeof bleeding[index] === 'function') {\n          bleeding[index] = bleeding[index](this.options.plot.options);\n        }\n      });\n    }\n    const bbox = this.container.getBBox();\n    let x = 0;\n    let y = 0;\n    const positions = this.options.position.split('-');\n    const plotWidth = this.options.plot.width;\n    const plotHeight = this.options.plot.height;\n    // 先确定x\n    if (positions[0] === 'left') {\n      x = bleeding[3];\n    } else if (positions[0] === 'right') {\n      x = plotWidth - bleeding[1] - bbox.width;\n    } else if (positions[1] === 'center') {\n      // default\n      if (this.width === panelRange.width) {\n        x = panelRange.x;\n      } else {\n        x = (plotWidth - bbox.width) / 2;\n      }\n    } else if (positions[1] === 'left') {\n      x = bleeding[3];\n    } else if (positions[1] === 'right') {\n      x = this.options.plot.width - bleeding[1] - bbox.width;\n    }\n    // 再确定y\n    if (positions[0] === 'bottom') {\n      y = plotHeight - bleeding[2] - bbox.height;\n    } else if (positions[0] === 'top') {\n      y = this.getTopPosition(bleeding);\n    } else if (positions[1] === 'center') {\n      // default\n      if (this.height === panelRange.height) {\n        y = panelRange.y;\n      } else {\n        //用户自行设定\n        y = (plotHeight - bbox.height) / 2;\n      }\n    } else if (positions[1] === 'top') {\n      y = bleeding[0];\n    } else if (positions[1] === 'bottom') {\n      y = plotHeight - bleeding[2] - bbox.height;\n    }\n\n    this.x = x;\n    this.y = y;\n\n    this.container.translate(x, y);\n  }\n\n  protected getDefaultOptions() {\n    return {\n      text: {\n        style: {\n          fontSize: 12,\n          fill: 'rgba(0, 0, 0, 0.45)',\n        },\n      },\n      ticklineStyle: {\n        lineWidth: 1,\n        stroke: 'rgba(0, 0, 0, 0.8)',\n      },\n      anchorStyle: {\n        fill: 'rgba(0,0,0,0.5)',\n      },\n      triggerOn: 'mousemove',\n    };\n  }\n\n  protected addInteraction() {\n    let geomType;\n    if (this.options.plot.options.shapeType === 'rect') {\n      geomType = 'polygon';\n    } else {\n      geomType = 'point';\n    }\n\n    const eventName = `${geomType}:${this.options.triggerOn}`;\n    //const labelEventName = `label:${this.options.triggerOn}`;\n    const field = this.options.plot.options.colorField;\n    const { min, max } = this.colorScale;\n\n    const geomEventHandler = (ev) => {\n      const value = ev.data.data[field];\n      const ratio = (value - min) / (max - min);\n      this.moveAnchor(ratio);\n    };\n    this.view.on(eventName, geomEventHandler);\n    this.interactiveEvents[eventName] = {\n      target: this.view,\n      handler: geomEventHandler,\n    };\n\n    /*this.view.on(labelEventName, (ev) => {\n      const value = ev.data[field];\n      const ratio = (value - min) / (max - min);\n      this.moveAnchor(ratio);\n    });*/\n\n    const mouseleaveHandler = () => {\n      this.anchor.set('visible', false);\n    };\n    this.options.plot.canvas.on('mouseleave', mouseleaveHandler);\n    this.interactiveEvents.mouseleave = {\n      target: this.options.plot.canvas,\n      handler: mouseleaveHandler,\n    };\n  }\n\n  private moveAnchor(ratio: number) {\n    this.anchor.set('visible', true);\n    if (this.layout === 'vertical') {\n      const pos = this.height * ratio;\n      const ulMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n      ulMatrix[7] = pos;\n      this.anchor.stopAnimate();\n      this.anchor.animate(\n        {\n          matrix: ulMatrix,\n        },\n        400,\n        'easeLinear'\n      );\n    } else {\n      const pos = this.width * ratio;\n      const ulMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n      ulMatrix[6] = pos;\n      this.anchor.stopAnimate();\n      this.anchor.animate(\n        {\n          matrix: ulMatrix,\n        },\n        400,\n        'easeLinear'\n      );\n    }\n  }\n\n  private getTopPosition(bleeding) {\n    if (this.options.plot.description) {\n      const bbox = this.options.plot.description.getBBox();\n      return bbox.maxY + 10;\n    } else if (this.options.plot.title) {\n      const bbox = this.options.plot.title.getBBox();\n      return bbox.maxY + 10;\n    }\n    return bleeding[0];\n  }\n\n  private offEvent() {\n    each(this.interactiveEvents, (event, key) => {\n      const { target, handler } = event;\n      target.off(key, handler);\n    });\n  }\n}\n","/**\n * Create By Bruce Too\n * On 2020-02-14\n */\nimport { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport WordCloudLayer, { WordCloudViewConfig } from './layer';\nimport { registerPlotType } from '../../base/global';\n\nexport interface WordCloudPlotConfig extends PlotConfig {\n  container?: HTMLDivElement;\n}\nexport interface WordCloudConfig extends WordCloudViewConfig, WordCloudPlotConfig {}\n\nexport default class WordCloud extends BasePlot<WordCloudConfig> {\n  constructor(container: HTMLElement, props: WordCloudConfig) {\n    // only canvas works for now\n    props.renderer = 'canvas';\n    super(container, props);\n  }\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'wordCloud';\n    layerProps.container = this.containerDOM;\n    super.createLayers(layerProps);\n  }\n}\nregisterPlotType('wordCloud', WordCloudLayer);\n","/**\n * Create By Bruce Too\n * On 2020-02-14\n */\nimport { LayerConfig } from '../..';\nimport { get, deepMix } from '@antv/util';\nimport Layer from '../../base/layer';\nimport WordCloudTooltips from './word-cloud-tooltips';\n\nimport WordCloud from './wordcloud2';\nimport { WordCloudPlotConfig } from './index';\n\nexport type CloudShape =\n  | 'circle'\n  | 'square'\n  | 'cardioid'\n  | 'diamond'\n  | 'triangle'\n  | 'triangle-forward'\n  | 'triangle-backward'\n  | 'triangle-up'\n  | 'triangle-down'\n  | 'pentagon'\n  | 'star';\nexport type Dimension = {\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n};\n\ntype MaskImage = {\n  maskImageCanvas: HTMLCanvasElement;\n  maskImageContext: CanvasRenderingContext2D;\n};\n\nexport type WordCloudData = {\n  word: string;\n  weight: number;\n  id: number; // index in data array. treat as unique id\n  color?: string; // cloud's color\n};\n\n/**\n * Inner start function, refresh canvas immediately(no any delay draw all 'cloud'\n * nearly at same time) with specific id\n */\nexport type InnerStartFunction = (selected: number) => void;\n\nexport type Active = {\n  shadowColor?: string;\n  shadowBlur?: number;\n};\n\nexport type WordStyle = {\n  fontFamily?: string;\n  // normal, lighter, bold, bolder, 100~900\n  fontWeight?: string | ((word: string, weight: number) => string);\n  color?: string | ((word: string, weight: number) => string);\n\n  active?: Active;\n  animatable?: boolean;\n\n  // [min, max] ->  random by steps(each step (max - min) / steps))\n  rotation?: [number, number];\n  rotationSteps?: number;\n  // the ratio of rotate\n  rotateRatio?: number;\n\n  // font's max and min size(determine by cloud's weight)\n  fontSize?: [number, number];\n\n  gridSize?: number;\n  drawOutOfBound?: boolean;\n\n  // scale 1/4 font weight each time till fit in\n  // shrinkToFit?: boolean;\n  // reset cloud's [x,y]\n  // origin?: [number, number];\n};\n\nexport interface WordCloudViewConfig extends WordCloudPlotConfig {\n  data: Array<WordCloudData> | Function;\n  // mask image, black-white pixel image will be better\n  maskImage?: string;\n  backgroundColor?: string;\n  wordStyle?: WordStyle;\n  shuffle?: boolean;\n  selected?: number;\n  tooltip?: {\n    visible: boolean;\n  };\n  shape?: CloudShape | Function;\n\n  onWordCloudHover?: (item: WordCloudData, dimension: Dimension, evt: MouseEvent, start: InnerStartFunction) => {};\n  onWordCloudClick?: (item: WordCloudData, dimension: Dimension, evt: MouseEvent) => {};\n\n  // clear before start\n  // clearCanvas?: boolean;\n  // wait milliseconds before next item show\n  // wait?: number;\n  // If the call with in the loop takes more than x milliseconds (and blocks the browser), abort immediately.\n  // abortThreshold?: number;\n  // abort callback\n  // abort?: () => {};\n  // shape's ellipticity [0,1]\n  // ellipticity?: number;\n  // ONLY FOR DEBUG, DON'T USE US\n  // drawMask?: boolean;\n  // maskColor?: string;\n  // maskGapWidth?: number;\n  // hide for now\n  // classes?: (word: string, weight: number) => string;\n}\n\ninterface WordCloudLayerConfig extends WordCloudViewConfig, LayerConfig {}\n\nexport default class WordCloudLayer extends Layer<WordCloudLayerConfig> {\n  private _targetCanvas: HTMLCanvasElement;\n  private _toolTips: WordCloudTooltips;\n  private readonly _configHoverAction: Function;\n  private readonly _enableToolTips: boolean;\n\n  constructor(props: WordCloudLayerConfig) {\n    super(props);\n    this._configHoverAction = props.onWordCloudHover;\n    this._enableToolTips = get(props, 'tooltip.visible', true);\n    this.options = deepMix(\n      {},\n      {\n        width: 400,\n        height: 400,\n        enableToolTips: true,\n      },\n      props,\n      // replace use config's hover action if needed, and trigger later\n      {\n        onWordCloudHover: this._enableToolTips ? this._toolTipsAction : this._configHoverAction,\n      }\n    );\n  }\n\n  public init() {\n    super.init();\n    this._initToolTips();\n  }\n\n  public render() {\n    super.render();\n    this._render();\n  }\n\n  private _toolTipsAction = (item: WordCloudData, dimension: Dimension, evt: MouseEvent, start: InnerStartFunction) => {\n    if (dimension) {\n      this._toolTips.update({\n        items: [\n          {\n            color: item.color || 'red',\n            name: item.word,\n            value: item.weight,\n          },\n        ],\n        x: evt.offsetX,\n        y: evt.offsetY,\n      });\n      this._toolTips.show();\n    } else {\n      this._toolTips.hide();\n    }\n    this._toolTips.render();\n    this._configHoverAction && this._configHoverAction(item, dimension, evt, start);\n  };\n\n  private _initToolTips() {\n    this._toolTips = new WordCloudTooltips({\n      showTitle: false,\n      visible: false,\n      parent: this.options.container,\n      follow: true,\n      inPanel: false, // must be false\n      items: [],\n    });\n    this._toolTips.init();\n  }\n\n  private _render() {\n    this._targetCanvas = this.canvas.get('el');\n    if (this.options.maskImage) {\n      this._handleMaskImage();\n    } else {\n      // mask image not exist\n      this._start();\n    }\n  }\n\n  private _handleMaskImage() {\n    const image = new Image();\n    image.src = this.options.maskImage + '?' + new Date().getTime();\n    image.crossOrigin = 'Anonymous';\n    image.onload = () => {\n      if (image.naturalHeight + image.naturalWidth === 0 || image.width + image.height === 0) {\n        this._start();\n      } else {\n        // handle no-zero image silhouette\n        this._startWithMaskImage(image);\n      }\n    };\n    image.onerror = () => {\n      console.error('image %s load failed !!!', this.options.maskImage);\n      // load image error, ignore this mask\n      this._start();\n    };\n  }\n\n  private _start() {\n    this._handleG2PlotConfig();\n    const targetCtx = this._targetCanvas.getContext('2d');\n    // it's a trick, because 「g」 use context to scale canvas by pixelRatio,\n    // but here i need scale it back\n    const pixelRatio = this.canvas.get('width') / this.canvas.get('el').width;\n    targetCtx.scale(pixelRatio, pixelRatio);\n    WordCloud(this._targetCanvas, this.options);\n  }\n\n  private _handleG2PlotConfig() {\n    const fontSize = this.options.wordStyle.fontSize || [10, 60];\n    const rotation = this.options.wordStyle.rotation || [-Math.PI / 2, Math.PI / 2];\n    let active, shadowColor, shadowBlur;\n    if (this.options.wordStyle.active) {\n      active = true;\n      shadowColor = this.options.wordStyle.active.shadowColor || '#333';\n      shadowBlur = this.options.wordStyle.active.shadowBlur || 10;\n    } else {\n      active = false;\n    }\n    this.options = deepMix({}, this.options, {\n      minFontSize: fontSize[0],\n      maxFontSize: fontSize[1],\n      minRotation: rotation[0],\n      maxRotation: rotation[1],\n      active,\n      shadowColor,\n      shadowBlur,\n    });\n  }\n\n  private _startWithMaskImage(image: HTMLImageElement) {\n    const { maskImageCanvas, maskImageContext } = this._scaleMaskImageCanvas(this._transformWhite2BlackPixels(image));\n    /* Determine bgPixel by creating\n     another canvas and fill the specified background color. */\n    const bctx = document.createElement('canvas').getContext('2d');\n\n    bctx.fillStyle = this.options.backgroundColor || '#fff';\n    bctx.fillRect(0, 0, 1, 1);\n    const bgPixel = bctx.getImageData(0, 0, 1, 1).data;\n\n    const imageData = maskImageContext.getImageData(0, 0, maskImageCanvas.width, maskImageCanvas.height);\n    const newImageData = maskImageContext.createImageData(imageData);\n    for (let i = 0; i < imageData.data.length; i += 4) {\n      if (imageData.data[i + 3] > 128) {\n        // keep this area's data the same as pixel color\n        newImageData.data[i] = bgPixel[0];\n        newImageData.data[i + 1] = bgPixel[1];\n        newImageData.data[i + 2] = bgPixel[2];\n        newImageData.data[i + 3] = bgPixel[3];\n      } else {\n        // This color must not be the same as the bgPixel.\n        // check wordcloud2.js#1192 's condition\n        newImageData.data[i] = bgPixel[0];\n        newImageData.data[i + 1] = bgPixel[1];\n        newImageData.data[i + 2] = bgPixel[2];\n        newImageData.data[i + 3] = 254; // just for not same as the bg color\n      }\n    }\n\n    maskImageContext.putImageData(newImageData, 0, 0);\n\n    const targetCtx = this._targetCanvas.getContext('2d');\n    targetCtx.drawImage(maskImageCanvas, 0, 0);\n    this.options = deepMix({}, this.options, { clearCanvas: false });\n\n    this._start();\n  }\n\n  private _scaleMaskImageCanvas(maskImageCanvas: HTMLCanvasElement): MaskImage {\n    const maskCanvasScaled = document.createElement('canvas');\n    // get real canvas determined by pixelRatio\n    maskCanvasScaled.width = this.canvas.get('width');\n    maskCanvasScaled.height = this.canvas.get('height');\n    const ctx = maskCanvasScaled.getContext('2d');\n    // keep scale smooth\n    ctx.imageSmoothingEnabled = true;\n    // ctx.mozImageSmoothingEnabled = true;\n    // ctx.webkitImageSmoothingEnabled = true;\n    // ctx.msImageSmoothingEnabled = true;\n    ctx.drawImage(\n      maskImageCanvas,\n      0,\n      0,\n      maskImageCanvas.width,\n      maskImageCanvas.height,\n      0,\n      0,\n      maskCanvasScaled.width,\n      maskCanvasScaled.height\n    );\n    return {\n      maskImageCanvas: maskCanvasScaled,\n      maskImageContext: ctx,\n    };\n  }\n\n  private _transformWhite2BlackPixels(image: HTMLImageElement): HTMLCanvasElement {\n    const maskImageCanvas = document.createElement('canvas');\n    maskImageCanvas.width = image.width;\n    maskImageCanvas.height = image.height;\n    const ctx = maskImageCanvas.getContext('2d');\n    ctx.drawImage(image, 0, 0, image.width, image.height);\n    const imageData = ctx.getImageData(0, 0, maskImageCanvas.width, maskImageCanvas.height);\n    const SINGLE_COMPONENT_SIZE = 4;\n    const BLACK_PIXEL = 0;\n    const FULL_PIXEL = 255;\n    // R - G - B - A\n    for (let i = 0; i < imageData.data.length; i += SINGLE_COMPONENT_SIZE) {\n      const rgb = imageData.data[i] + imageData.data[i + 1] + imageData.data[i + 2];\n      const alpha = imageData.data[i + 3];\n\n      if (alpha < 128 || rgb > 250 * 3) {\n        // white area(not to draw)\n        imageData.data[i] = FULL_PIXEL;\n        imageData.data[i + 1] = FULL_PIXEL;\n        imageData.data[i + 2] = FULL_PIXEL;\n        imageData.data[i + 3] = BLACK_PIXEL;\n      } else {\n        // black area wait to draw(image black silhouette)\n        imageData.data[i] = BLACK_PIXEL;\n        imageData.data[i + 1] = BLACK_PIXEL;\n        imageData.data[i + 2] = BLACK_PIXEL;\n        imageData.data[i + 3] = FULL_PIXEL;\n      }\n    }\n\n    ctx.putImageData(imageData, 0, 0);\n    return maskImageCanvas;\n  }\n}\n","/**\n * Create By Bruce Too\n * On 2020-02-14\n */\nimport { deepMix } from '@antv/util';\nimport { HtmlTooltip, TooltipCfg } from '../../dependents';\n\nexport default class WordCloudTooltips extends HtmlTooltip {\n  constructor(cfg: TooltipCfg) {\n    const newCfg = deepMix(\n      {},\n      cfg,\n      {\n        itemTpl: `<div data-index={index}>\n        <span style=\"background-color:{color};\" class=\"g2-tooltip-marker\"></span>\n        {name}<span class=\"g2-tooltip-value\">{value}</span></div>`,\n      },\n      cfg\n    );\n    super(newCfg);\n  }\n}\n","/**\n * Create By Bruce Too\n * On 2020-02-14\n */\n/* eslint-disable unicorn/no-abusive-eslint-disable */\n/* eslint-disable */\n// @ts-nocheck\n\n// TODO rewrite with typescript @brucetoo\n\n/*!\n * wordcloud2.js\n * http://timdream.org/wordcloud2.js/\n *\n * Copyright 2011 - 2013 Tim Chien\n * Released under the MIT license\n */\n\n'use strict';\n\n// setImmediate\nif (!window.setImmediate) {\n  window.setImmediate = (function setupSetImmediate() {\n    return (\n      window.msSetImmediate ||\n      window.webkitSetImmediate ||\n      window.mozSetImmediate ||\n      window.oSetImmediate ||\n      (function setupSetZeroTimeout() {\n        if (!window.postMessage || !window.addEventListener) {\n          return null;\n        }\n\n        var callbacks = [undefined];\n        var message = 'zero-timeout-message';\n\n        // Like setTimeout, but only takes a function argument.  There's\n        // no time argument (always zero) and no arguments (you have to\n        // use a closure).\n        var setZeroTimeout = function setZeroTimeout(callback) {\n          var id = callbacks.length;\n          callbacks.push(callback);\n          window.postMessage(message + id.toString(36), '*');\n\n          return id;\n        };\n\n        window.addEventListener(\n          'message',\n          function setZeroTimeoutMessage(evt) {\n            // Skipping checking event source, retarded IE confused this window\n            // object with another in the presence of iframe\n            if (\n              typeof evt.data !== 'string' ||\n              evt.data.substr(0, message.length) !== message /* ||\n            evt.source !== window */\n            ) {\n              return;\n            }\n\n            evt.stopImmediatePropagation();\n\n            var id = parseInt(evt.data.substr(message.length), 36);\n            if (!callbacks[id]) {\n              return;\n            }\n\n            callbacks[id]();\n            callbacks[id] = undefined;\n          },\n          true\n        );\n\n        /* specify clearImmediate() here since we need the scope */\n        window.clearImmediate = function clearZeroTimeout(id) {\n          if (!callbacks[id]) {\n            return;\n          }\n\n          callbacks[id] = undefined;\n        };\n\n        return setZeroTimeout;\n      })() ||\n      // fallback\n      function setImmediateFallback(fn) {\n        window.setTimeout(fn, 0);\n      }\n    );\n  })();\n}\n\nif (!window.clearImmediate) {\n  window.clearImmediate = (function setupClearImmediate() {\n    return (\n      window.msClearImmediate ||\n      window.webkitClearImmediate ||\n      window.mozClearImmediate ||\n      window.oClearImmediate ||\n      // \"clearZeroTimeout\" is implement on the previous block ||\n      // fallback\n      function clearImmediateFallback(timer) {\n        window.clearTimeout(timer);\n      }\n    );\n  })();\n}\n\n// Check if WordCloud can run on this browser\nvar isSupported = (function isSupported() {\n  var canvas = document.createElement('canvas');\n  if (!canvas || !canvas.getContext) {\n    return false;\n  }\n\n  var ctx = canvas.getContext('2d');\n  if (!ctx.getImageData) {\n    return false;\n  }\n  if (!ctx.fillText) {\n    return false;\n  }\n\n  if (!Array.prototype.some) {\n    return false;\n  }\n  if (!Array.prototype.push) {\n    return false;\n  }\n\n  return true;\n})();\n\n// Find out if the browser impose minium font size by\n// drawing small texts on a canvas and measure it's width.\nvar minFontSize = (function getMinFontSize() {\n  if (!isSupported) {\n    return;\n  }\n\n  var ctx = document.createElement('canvas').getContext('2d');\n\n  // start from 20\n  var size = 20;\n\n  // two sizes to measure\n  var hanWidth, mWidth;\n\n  while (size) {\n    ctx.font = size.toString(10) + 'px sans-serif';\n    if (ctx.measureText('\\uFF37').width === hanWidth && ctx.measureText('m').width === mWidth) {\n      return size + 1;\n    }\n\n    hanWidth = ctx.measureText('\\uFF37').width;\n    mWidth = ctx.measureText('m').width;\n\n    size--;\n  }\n\n  return 0;\n})();\n\n// Based on http://jsfromhell.com/array/shuffle\nvar shuffleArray = function shuffleArray(arr) {\n  for (var j, x, i = arr.length; i; j = Math.floor(Math.random() * i), x = arr[--i], arr[i] = arr[j], arr[j] = x) {}\n  return arr;\n};\n\nvar WordCloud = function WordCloud(elements, options) {\n  if (!isSupported) {\n    return;\n  }\n\n  if (!Array.isArray(elements)) {\n    elements = [elements];\n  }\n\n  elements.forEach(function (el, i) {\n    if (typeof el === 'string') {\n      elements[i] = document.getElementById(el);\n      if (!elements[i]) {\n        throw 'The element id specified is not found.';\n      }\n    } else if (!el.tagName && !el.appendChild) {\n      throw 'You must pass valid HTML elements, or ID of the element.';\n    }\n  });\n\n  /* Default values to be overwritten by options object */\n  var settings = {\n    data: [],\n    fontFamily: '\"Trebuchet MS\", \"Heiti TC\", \"微軟正黑體\", ' + '\"Arial Unicode MS\", \"Droid Fallback Sans\", sans-serif',\n    fontWeight: 'normal',\n    color: 'random-dark',\n    animatable: true,\n\n    minFontSize: minFontSize, // browser's min font size default\n    maxFontSize: 60, // max font size default is 60\n\n    clearCanvas: true,\n    backgroundColor: '#fff', // opaque white = rgba(255, 255, 255, 1)\n\n    gridSize: 8,\n    drawOutOfBound: false,\n    origin: null,\n\n    drawMask: false,\n    maskColor: 'rgba(255,0,0,0.3)',\n    maskGapWidth: 0.3,\n\n    wait: 0,\n    abortThreshold: 0, // disabled\n    abort: function noop() {},\n\n    minRotation: -Math.PI / 2,\n    maxRotation: Math.PI / 2,\n    rotateRatio: 0.5,\n    rotationSteps: 1,\n\n    shuffle: true,\n\n    shape: 'circle',\n    ellipticity: 1,\n\n    active: true,\n    selected: -1,\n    shadowColor: '#333',\n    shadowBlur: 10,\n\n    classes: null,\n\n    onWordCloudHover: null,\n    onWordCloudClick: null,\n  };\n\n  const interactionItems = [];\n\n  if (options) {\n    for (var key in options) {\n      if (key === 'wordStyle') {\n        for (let fontKey in options[key]) {\n          if (fontKey in settings) {\n            settings[fontKey] = options[key][fontKey];\n          }\n        }\n      } else {\n        if (key in settings) {\n          settings[key] = options[key];\n        }\n      }\n    }\n  }\n\n  if (settings.minFontSize < minFontSize) {\n    // can't less than browse's min font size\n    settings.minFontSize = minFontSize;\n  }\n\n  if (settings.minFontSize > settings.maxFontSize) {\n    console.error('minSize cant bigger than maxSize');\n    return;\n  }\n\n  let maxWeight = 0;\n  for (let i = 0; i < settings.data.length; i++) {\n    if (maxWeight < settings.data[i].weight) {\n      maxWeight = settings.data[i].weight;\n    }\n  }\n\n  var getRealFontSize = function getRealFontSize(weight) {\n    return Math.min(Math.max(settings.minFontSize, (settings.maxFontSize * weight) / maxWeight), settings.maxFontSize);\n  };\n\n  var isCardioid = false;\n  /* Convert shape into a function */\n  if (typeof settings.shape !== 'function') {\n    switch (settings.shape) {\n      case 'circle':\n      /* falls through */\n      default:\n        // 'circle' is the default and a shortcut in the code loop.\n        settings.shape = 'circle';\n        break;\n\n      case 'cardioid':\n        // https://baike.baidu.com/item/%E5%BF%83%E8%84%8F%E7%BA%BF/10323843?fromtitle=%E5%BF%83%E5%BD%A2%E7%BA%BF&fromid=10018818\n        settings.shape = function shapeCardioid(theta) {\n          return 1 - Math.sin(theta);\n        };\n        isCardioid = true;\n        break;\n\n      /*\n      To work out an X-gon, one has to calculate \"m\",\n      where 1/(cos(2*PI/X)+m*sin(2*PI/X)) = 1/(cos(0)+m*sin(0))\n      http://www.wolframalpha.com/input/?i=1%2F%28cos%282*PI%2FX%29%2Bm*sin%28\n      2*PI%2FX%29%29+%3D+1%2F%28cos%280%29%2Bm*sin%280%29%29\n      Copy the solution into polar equation r = 1/(cos(t') + m*sin(t'))\n      where t' equals to mod(t, 2PI/X);\n      */\n\n      case 'diamond':\n        settings.shape = function shapeSquare(theta) {\n          const thetaPrime = theta % ((2 * Math.PI) / 4);\n          return 1 / (Math.cos(thetaPrime) + Math.sin(thetaPrime));\n        };\n        break;\n      case 'square':\n        // http://www.wolframalpha.com/input/?i=plot+r+%3D+1%2F%28cos%28mod+\n        // %28t%2C+PI%2F2%29%29%2Bsin%28mod+%28t%2C+PI%2F2%29%29%29%2C+t+%3D\n        // +0+..+2*PI\n        settings.shape = function shapeSquare(theta) {\n          const thetaPrime = (theta + Math.PI / 4) % ((2 * Math.PI) / 4);\n          return 1 / (Math.cos(thetaPrime) + Math.sin(thetaPrime));\n        };\n        break;\n\n      case 'triangle-forward':\n        // http://www.wolframalpha.com/input/?i=plot+r+%3D+1%2F%28cos%28mod+\n        // %28t%2C+2*PI%2F3%29%29%2Bsqrt%283%29sin%28mod+%28t%2C+2*PI%2F3%29\n        // %29%29%2C+t+%3D+0+..+2*PI\n        settings.shape = function shapeTriangle(theta) {\n          const thetaPrime = theta % ((2 * Math.PI) / 3);\n          return 1 / (Math.cos(thetaPrime) + Math.sqrt(3) * Math.sin(thetaPrime));\n        };\n        break;\n\n      case 'triangle-backward':\n        settings.shape = function shapeTriangle(theta) {\n          const thetaPrime = (theta + Math.PI) % ((2 * Math.PI) / 3);\n          return 1 / (Math.cos(thetaPrime) + Math.sqrt(3) * Math.sin(thetaPrime));\n        };\n        break;\n\n      case 'triangle':\n      case 'triangle-up':\n        settings.shape = function shapeTriangle(theta) {\n          const thetaPrime = (theta + (Math.PI * 3) / 2) % ((2 * Math.PI) / 3);\n          return 1 / (Math.cos(thetaPrime) + Math.sqrt(3) * Math.sin(thetaPrime));\n        };\n        break;\n      case 'triangle-down':\n        settings.shape = function shapeTriangle(theta) {\n          const thetaPrime = (theta + (Math.PI * 5) / 2) % ((2 * Math.PI) / 3);\n          return 1 / (Math.cos(thetaPrime) + Math.sqrt(3) * Math.sin(thetaPrime));\n        };\n        break;\n\n      case 'pentagon':\n        settings.shape = function shapePentagon(theta) {\n          const thetaPrime = (theta + 0.955) % ((2 * Math.PI) / 5);\n          return 1 / (Math.cos(thetaPrime) + 0.726543 * Math.sin(thetaPrime));\n        };\n        break;\n\n      case 'star':\n        settings.shape = function shapeStar(theta) {\n          const thetaPrime = (theta + 0.955) % ((2 * Math.PI) / 10);\n          if (((theta + 0.955) % ((2 * Math.PI) / 5)) - (2 * Math.PI) / 10 >= 0) {\n            return (\n              1 / (Math.cos((2 * Math.PI) / 10 - thetaPrime) + 3.07768 * Math.sin((2 * Math.PI) / 10 - thetaPrime))\n            );\n          } else {\n            return 1 / (Math.cos(thetaPrime) + 3.07768 * Math.sin(thetaPrime));\n          }\n        };\n        break;\n    }\n  }\n\n  /* Make sure gridSize is a whole number and is not smaller than 4px */\n  settings.gridSize = Math.max(Math.floor(settings.gridSize), 4);\n\n  /* shorthand */\n  var g = settings.gridSize;\n  var maskRectWidth = g - settings.maskGapWidth;\n\n  /* normalize rotation settings */\n  var rotationRange = Math.abs(settings.maxRotation - settings.minRotation);\n  var minRotation = Math.min(settings.maxRotation, settings.minRotation);\n  var rotationSteps = settings.rotationSteps;\n\n  /* information/object available to all functions, set when start() */\n  var grid, // 2d array containing filling information\n    ngx,\n    ngy, // width and height of the grid\n    center, // position of the center of the cloud\n    maxRadius;\n\n  /* timestamp for measuring each putWord() action */\n  var escapeTime;\n\n  /* function for getting the color of the text */\n  var getTextColor;\n  function random_hsl_color(min, max) {\n    return (\n      'hsl(' +\n      (Math.random() * 360).toFixed() +\n      ',' +\n      (Math.random() * 30 + 70).toFixed() +\n      '%,' +\n      (Math.random() * (max - min) + min).toFixed() +\n      '%)'\n    );\n  }\n  switch (settings.color) {\n    case 'random-dark':\n      getTextColor = function getRandomDarkColor() {\n        return random_hsl_color(10, 50);\n      };\n      break;\n\n    case 'random-light':\n      getTextColor = function getRandomLightColor() {\n        return random_hsl_color(50, 90);\n      };\n      break;\n\n    default:\n      if (typeof settings.color === 'function') {\n        getTextColor = settings.color;\n      }\n      break;\n  }\n\n  /* function for getting the classes of the text */\n  var getTextClasses = null;\n  if (typeof settings.classes === 'function') {\n    getTextClasses = settings.classes;\n  }\n\n  /* Interactive */\n  var interactive = false;\n  var infoGrid = [];\n  var hovered;\n\n  var getInfoGridFromMouseTouchEvent = function getInfoGridFromMouseTouchEvent(evt) {\n    var canvas = evt.currentTarget;\n    var rect = canvas.getBoundingClientRect();\n    var clientX;\n    var clientY;\n    /** Detect if touches are available */\n    if (evt.touches) {\n      clientX = evt.touches[0].clientX;\n      clientY = evt.touches[0].clientY;\n    } else {\n      clientX = evt.clientX;\n      clientY = evt.clientY;\n    }\n    var eventX = clientX - rect.left;\n    var eventY = clientY - rect.top;\n\n    var x = Math.floor((eventX * (canvas.width / rect.width || 1)) / g);\n    var y = Math.floor((eventY * (canvas.height / rect.height || 1)) / g);\n\n    return infoGrid && infoGrid[x] && infoGrid[x][y];\n  };\n\n  var defaultHoverAction = function defaultHoverAction(item, dimension, evt, start) {\n    if (item) {\n      start(item.id);\n    } else {\n      start(-1);\n    }\n  };\n\n  var wordcloudhover = function wordcloudhover(evt) {\n    var info = getInfoGridFromMouseTouchEvent(evt);\n\n    if (hovered === info) {\n      return;\n    }\n\n    if (!info) {\n      settings.onWordCloudHover(undefined, undefined, evt, start);\n      if (settings.active) {\n        defaultHoverAction(undefined, undefined, evt, start);\n      }\n      return;\n    }\n\n    settings.onWordCloudHover(info.item, info.dimension, evt, start);\n    if (settings.active) {\n      defaultHoverAction(info.item, info.dimension, evt, start);\n    }\n    hovered = info;\n  };\n\n  var wordcloudclick = function wordcloudclick(evt) {\n    var info = getInfoGridFromMouseTouchEvent(evt);\n    if (!info) {\n      return;\n    }\n\n    settings.onWordCloudClick(info.item, info.dimension, evt);\n    evt.preventDefault();\n  };\n\n  /* Get points on the grid for a given radius away from the center */\n  var pointsAtRadius = [];\n  var getPointsAtRadius = function getPointsAtRadius(radius) {\n    if (pointsAtRadius[radius]) {\n      return pointsAtRadius[radius];\n    }\n\n    // Look for these number of points on each radius\n    var T = radius * 8;\n\n    // Getting all the points at this radius\n    var t = T;\n    var points = [];\n\n    if (radius === 0) {\n      points.push([center[0], center[1], 0]);\n    }\n\n    while (t--) {\n      // distort the radius to put the cloud in shape\n      var rx = 1;\n      if (settings.shape !== 'circle') {\n        rx = settings.shape((t / T) * 2 * Math.PI); // 0 to 1\n      }\n\n      // Push [x, y, t]; t is used solely for getTextColor()\n      points.push([\n        center[0] + radius * rx * Math.cos((-t / T) * 2 * Math.PI),\n        center[1] + radius * rx * Math.sin((-t / T) * 2 * Math.PI) * settings.ellipticity,\n        (t / T) * 2 * Math.PI,\n      ]);\n    }\n\n    pointsAtRadius[radius] = points;\n    return points;\n  };\n\n  /* Return true if we had spent too much time */\n  var exceedTime = function exceedTime() {\n    return settings.abortThreshold > 0 && new Date().getTime() - escapeTime > settings.abortThreshold;\n  };\n\n  /* Get the deg of rotation according to settings, and luck. */\n  var getRotateDeg = function getRotateDeg() {\n    if (settings.rotateRatio === 0) {\n      return 0;\n    }\n\n    if (Math.random() > settings.rotateRatio) {\n      return 0;\n    }\n\n    if (rotationRange === 0) {\n      return minRotation;\n    }\n\n    // return minRotation + Math.round(Math.random() * rotationRange / rotationSteps) * rotationSteps;\n\n    if (rotationSteps > 0) {\n      // Min rotation + zero or more steps * span of one step\n      return minRotation + (Math.floor(Math.random() * rotationSteps) * rotationRange) / rotationSteps;\n    } else {\n      return minRotation + Math.random() * rotationRange;\n    }\n  };\n\n  var getTextInfo = function getTextInfo(word, weight, rotateDeg) {\n    // calculate the acutal font size\n    // fontSize === 0 means wants the text skipped,\n    // and size < minSize means we cannot draw the text\n    var debug = false;\n    var fontSize = getRealFontSize(weight);\n    if (fontSize <= 0) {\n      return false;\n    }\n\n    // Scale factor here is to make sure fillText is not limited by\n    // the minium font size set by browser.\n    // It will always be 1 or 2n.\n    var mu = 1;\n    if (fontSize < minFontSize) {\n      mu = (function calculateScaleFactor() {\n        var mu = 2;\n        while (mu * fontSize < minFontSize) {\n          mu += 2;\n        }\n        return mu;\n      })();\n    }\n\n    var fcanvas = document.createElement('canvas');\n    var fctx = fcanvas.getContext('2d', { willReadFrequently: true });\n\n    fctx.font = settings.fontWeight + ' ' + (fontSize * mu).toString(10) + 'px ' + settings.fontFamily;\n\n    // Estimate the dimension of the text with measureText().\n    var fw = fctx.measureText(word).width / mu;\n    var fh = Math.max(fontSize * mu, fctx.measureText('m').width, fctx.measureText('\\uFF37').width) / mu;\n\n    // Create a boundary box that is larger than our estimates,\n    // so text don't get cut of (it sill might)\n    var boxWidth = fw + fh * 2;\n    var boxHeight = fh * 3;\n    var fgw = Math.ceil(boxWidth / g);\n    var fgh = Math.ceil(boxHeight / g);\n    boxWidth = fgw * g;\n    boxHeight = fgh * g;\n\n    // Calculate the proper offsets to make the text centered at\n    // the preferred position.\n\n    // This is simply half of the width.\n    var fillTextOffsetX = -fw / 2;\n    // Instead of moving the box to the exact middle of the preferred\n    // position, for Y-offset we move 0.4 instead, so Latin alphabets look\n    // vertical centered.\n    var fillTextOffsetY = -fh * 0.4;\n\n    // Calculate the actual dimension of the canvas, considering the rotation.\n    var cgh = Math.ceil((boxWidth * Math.abs(Math.sin(rotateDeg)) + boxHeight * Math.abs(Math.cos(rotateDeg))) / g);\n    var cgw = Math.ceil((boxWidth * Math.abs(Math.cos(rotateDeg)) + boxHeight * Math.abs(Math.sin(rotateDeg))) / g);\n    var width = cgw * g;\n    var height = cgh * g;\n\n    fcanvas.setAttribute('width', width);\n    fcanvas.setAttribute('height', height);\n\n    if (debug) {\n      // Attach fcanvas to the DOM\n      document.body.appendChild(fcanvas);\n      // Save it's state so that we could restore and draw the grid correctly.\n      fctx.save();\n    }\n\n    // Scale the canvas with |mu|.\n    fctx.scale(1 / mu, 1 / mu);\n    fctx.translate((width * mu) / 2, (height * mu) / 2);\n    fctx.rotate(-rotateDeg);\n\n    // Once the width/height is set, ctx info will be reset.\n    // Set it again here.\n    fctx.font = settings.fontWeight + ' ' + (fontSize * mu).toString(10) + 'px ' + settings.fontFamily;\n\n    // Fill the text into the fcanvas.\n    // XXX: We cannot because textBaseline = 'top' here because\n    // Firefox and Chrome uses different default line-height for canvas.\n    // Please read https://bugzil.la/737852#c6.\n    // Here, we use textBaseline = 'middle' and draw the text at exactly\n    // 0.5 * fontSize lower.\n    fctx.fillStyle = '#000';\n    fctx.textBaseline = 'middle';\n    fctx.fillText(word, fillTextOffsetX * mu, (fillTextOffsetY + fontSize * 0.5) * mu);\n\n    // Get the pixels of the text\n    var imageData;\n    try {\n      imageData = fctx.getImageData(0, 0, width, height).data;\n    } catch (e) {\n      // data not long type\n      return false;\n    }\n\n    if (exceedTime()) {\n      return false;\n    }\n\n    if (debug) {\n      // Draw the box of the original estimation\n      fctx.strokeRect(fillTextOffsetX * mu, fillTextOffsetY, fw * mu, fh * mu);\n      fctx.restore();\n    }\n\n    // Read the pixels and save the information to the occupied array\n    var occupied = [];\n    var gx = cgw,\n      gy,\n      x,\n      y;\n    var bounds = [cgh / 2, cgw / 2, cgh / 2, cgw / 2];\n    while (gx--) {\n      gy = cgh;\n      while (gy--) {\n        y = g;\n        singleGridLoop: {\n          while (y--) {\n            x = g;\n            while (x--) {\n              if (imageData[((gy * g + y) * width + (gx * g + x)) * 4 + 3]) {\n                occupied.push([gx, gy]);\n\n                if (gx < bounds[3]) {\n                  bounds[3] = gx;\n                }\n                if (gx > bounds[1]) {\n                  bounds[1] = gx;\n                }\n                if (gy < bounds[0]) {\n                  bounds[0] = gy;\n                }\n                if (gy > bounds[2]) {\n                  bounds[2] = gy;\n                }\n\n                if (debug) {\n                  fctx.fillStyle = 'rgba(255, 0, 0, 0.5)';\n                  fctx.fillRect(gx * g, gy * g, g - 0.5, g - 0.5);\n                }\n                break singleGridLoop;\n              }\n            }\n          }\n          if (debug) {\n            fctx.fillStyle = 'rgba(0, 0, 255, 0.5)';\n            fctx.fillRect(gx * g, gy * g, g - 0.5, g - 0.5);\n          }\n        }\n      }\n    }\n\n    if (debug) {\n      // real bounds\n      fctx.fillStyle = 'rgba(0, 255, 0, 0.5)';\n      fctx.fillRect(bounds[3] * g, bounds[0] * g, (bounds[1] - bounds[3] + 1) * g, (bounds[2] - bounds[0] + 1) * g);\n    }\n\n    // Return information needed to create the text on the real canvas\n    return {\n      mu: mu,\n      occupied: occupied,\n      bounds: bounds,\n      gw: cgw,\n      gh: cgh,\n      fillTextOffsetX: fillTextOffsetX,\n      fillTextOffsetY: fillTextOffsetY,\n      fillTextWidth: fw,\n      fillTextHeight: fh,\n      fontSize: fontSize,\n    };\n  };\n\n  /* Determine if there is room available in the given dimension */\n  var canFitText = function canFitText(gx, gy, gw, gh, occupied) {\n    // Go through the occupied points,\n    // return false if the space is not available.\n    var i = occupied.length;\n    while (i--) {\n      var px = gx + occupied[i][0];\n      var py = gy + occupied[i][1];\n\n      if (px >= ngx || py >= ngy || px < 0 || py < 0) {\n        if (!settings.drawOutOfBound) {\n          return false;\n        }\n        continue;\n      }\n\n      if (!grid[px][py]) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  /* Actually draw the text on the grid */\n  var drawText = function drawText(gx, gy, info, word, weight, distance, theta, rotateDeg, attributes, id, refresh) {\n    var fontSize = info.fontSize;\n    var color = settings.color;\n    var classes = settings.classes;\n    if (!refresh) {\n      if (getTextColor) {\n        color = getTextColor(word, weight, fontSize, distance, theta);\n      } else {\n        color = settings.color;\n      }\n\n      if (getTextClasses) {\n        classes = getTextClasses(word, weight, fontSize, distance, theta);\n      } else {\n        classes = settings.classes;\n      }\n    } else {\n      const find = getInteractionItemById(id);\n      color = find ? find.color : settings.color;\n    }\n\n    var dimension;\n    var bounds = info.bounds;\n    dimension = {\n      x: (gx + bounds[3]) * g,\n      y: (gy + bounds[0]) * g,\n      w: (bounds[1] - bounds[3] + 1) * g,\n      h: (bounds[2] - bounds[0] + 1) * g,\n    };\n\n    elements.forEach(function (el) {\n      if (el.getContext) {\n        var ctx = el.getContext('2d');\n        var mu = info.mu;\n\n        // Save the current state before messing it\n        ctx.save();\n        const font = settings.fontWeight + ' ' + (fontSize * mu).toString(10) + 'px ' + settings.fontFamily;\n        ctx.scale(1 / mu, 1 / mu);\n\n        ctx.font = font;\n        ctx.fillStyle = color;\n\n        // Translate the canvas position to the origin coordinate of where\n        // the text should be put.\n        let transX = (gx + info.gw / 2) * g * mu;\n        let transY = (gy + info.gh / 2) * g * mu;\n        ctx.translate(transX, transY);\n\n        if (rotateDeg !== 0) {\n          ctx.rotate(-rotateDeg);\n        }\n\n        // Finally, fill the text.\n\n        // XXX: We cannot because textBaseline = 'top' here because\n        // Firefox and Chrome uses different default line-height for canvas.\n        // Please read https://bugzil.la/737852#c6.\n        // Here, we use textBaseline = 'middle' and draw the text at exactly\n        // 0.5 * fontSize lower.\n        ctx.textBaseline = 'middle';\n        if (settings.selected === id) {\n          ctx.shadowColor = settings.shadowColor;\n          ctx.shadowBlur = settings.shadowBlur;\n        }\n        ctx.fillText(word, info.fillTextOffsetX * mu, (info.fillTextOffsetY + fontSize * 0.5) * mu);\n\n        // The below box is always matches how <span>s are positioned\n        // ctx.strokeRect(info.fillTextOffsetX, info.fillTextOffsetY,\n        //   info.fillTextWidth, info.fillTextHeight);\n\n        if (!refresh) {\n          interactionItems.push({\n            gx: gx,\n            gy: gy,\n            info: info,\n            word: word,\n            weight: weight,\n            distance: distance,\n            theta: theta,\n            rotateDeg: rotateDeg,\n            attributes: attributes,\n            id: id,\n            color: color,\n          });\n        }\n        // Restore the state.\n        ctx.restore();\n      } else {\n        // drawText on DIV element\n        var span = document.createElement('span');\n        var transformRule = '';\n        transformRule = 'rotate(' + (-rotateDeg / Math.PI) * 180 + 'deg) ';\n        if (info.mu !== 1) {\n          transformRule += 'translateX(-' + info.fillTextWidth / 4 + 'px) ' + 'scale(' + 1 / info.mu + ')';\n        }\n        var styleRules = {\n          position: 'absolute',\n          display: 'block',\n          font: settings.fontWeight + ' ' + fontSize * info.mu + 'px ' + settings.fontFamily,\n          left: (gx + info.gw / 2) * g + info.fillTextOffsetX + 'px',\n          top: (gy + info.gh / 2) * g + info.fillTextOffsetY + 'px',\n          width: info.fillTextWidth + 'px',\n          height: info.fillTextHeight + 'px',\n          lineHeight: fontSize + 'px',\n          whiteSpace: 'nowrap',\n          transform: transformRule,\n          webkitTransform: transformRule,\n          msTransform: transformRule,\n          transformOrigin: '50% 40%',\n          webkitTransformOrigin: '50% 40%',\n          msTransformOrigin: '50% 40%',\n        };\n        if (color) {\n          styleRules.color = color;\n        }\n        span.textContent = word;\n        for (var cssProp in styleRules) {\n          span.style[cssProp] = styleRules[cssProp];\n        }\n        if (attributes) {\n          for (var attribute in attributes) {\n            span.setAttribute(attribute, attributes[attribute]);\n          }\n        }\n        if (classes) {\n          span.className += classes;\n        }\n        el.appendChild(span);\n      }\n    });\n  };\n\n  /* Help function to updateGrid */\n  var fillGridAt = function fillGridAt(x, y, drawMask, dimension, item) {\n    if (x >= ngx || y >= ngy || x < 0 || y < 0) {\n      return;\n    }\n\n    grid[x][y] = false;\n\n    if (drawMask) {\n      var ctx = elements[0].getContext('2d');\n      ctx.fillRect(x * g, y * g, maskRectWidth, maskRectWidth);\n    }\n\n    if (interactive) {\n      infoGrid[x][y] = { item: item, dimension: dimension };\n    }\n  };\n\n  /* Update the filling information of the given space with occupied points.\n     Draw the mask on the canvas if necessary. */\n  var updateGrid = function updateGrid(gx, gy, gw, gh, info) {\n    var occupied = info.occupied;\n    var drawMask = settings.drawMask;\n    var ctx;\n    if (drawMask) {\n      ctx = elements[0].getContext('2d');\n      ctx.save();\n      ctx.fillStyle = settings.maskColor;\n    }\n\n    var dimension;\n    if (interactive) {\n      var bounds = info.bounds;\n      dimension = {\n        x: (gx + bounds[3]) * g,\n        y: (gy + bounds[0]) * g,\n        w: (bounds[1] - bounds[3] + 1) * g,\n        h: (bounds[2] - bounds[0] + 1) * g,\n      };\n    }\n\n    var i = occupied.length;\n    while (i--) {\n      var px = gx + occupied[i][0];\n      var py = gy + occupied[i][1];\n\n      if (px >= ngx || py >= ngy || px < 0 || py < 0) {\n        continue;\n      }\n\n      // save item's color from info\n      const find = getInteractionItemById(info.item.id);\n      if (find) {\n        info.item.color = find.color;\n      }\n      fillGridAt(px, py, drawMask, dimension, info.item);\n    }\n\n    if (drawMask) {\n      ctx.restore();\n    }\n  };\n\n  var tryToPutWordAtPoint = function tryToPutWordAtPoint(gxy, info, word, weight, distance, rotateDeg, attributes, id) {\n    var gx = Math.floor(gxy[0] - info.gw / 2);\n    var gy = Math.floor(gxy[1] - info.gh / 2);\n    var gw = info.gw;\n    var gh = info.gh;\n\n    // If we cannot fit the text at this position, return false\n    // and go to the next position.\n    if (!canFitText(gx, gy, gw, gh, info.occupied)) {\n      return false;\n    }\n\n    // Actually put the text on the canvas\n    drawText(gx, gy, info, word, weight, distance, gxy[2], rotateDeg, attributes, id, false);\n\n    // Mark the spaces on the grid as filled\n    updateGrid(gx, gy, gw, gh, info);\n\n    return {\n      gx: gx,\n      gy: gy,\n      rot: rotateDeg,\n      info: info,\n    };\n  };\n\n  /* putWord() processes each item on the list,\n     calculate it's size and determine it's position, and actually\n     put it on the canvas. */\n  var putWord = function putWord(item) {\n    var word, weight, attributes, id;\n    if (Array.isArray(item)) {\n      word = item[0];\n      weight = item[1];\n    } else {\n      word = item.word;\n      weight = item.weight;\n      attributes = item.attributes;\n      id = item.id;\n    }\n    var rotateDeg = getRotateDeg();\n\n    // get info needed to put the text onto the canvas\n    var info = getTextInfo(word, weight, rotateDeg);\n    if (info) {\n      info['item'] = item;\n    }\n\n    // not getting the info means we shouldn't be drawing this one.\n    if (!info) {\n      return false;\n    }\n\n    if (exceedTime()) {\n      return false;\n    }\n\n    // If drawOutOfBound is set to false,\n    // skip the loop if we have already know the bounding box of\n    // word is larger than the canvas.\n    if (!settings.drawOutOfBound) {\n      var bounds = info.bounds;\n      if (bounds[1] - bounds[3] + 1 > ngx || bounds[2] - bounds[0] + 1 > ngy) {\n        return false;\n      }\n    }\n\n    // Determine the position to put the text by\n    // start looking for the nearest points\n    var r = maxRadius + 1;\n\n    while (r--) {\n      var points = getPointsAtRadius(maxRadius - r);\n\n      if (settings.shuffle) {\n        points = [].concat(points);\n        shuffleArray(points);\n      }\n\n      // Try to fit the words by looking at each point.\n      // array.some() will stop and return true\n      // when putWordAtPoint() returns true.\n      for (var i = 0; i < points.length; i++) {\n        var res = tryToPutWordAtPoint(points[i], info, word, weight, maxRadius - r, rotateDeg, attributes, id);\n        if (res) {\n          return res;\n        }\n      }\n\n      // var drawn = points.some(tryToPutWordAtPoint);\n      // if (drawn) {\n      //   // leave putWord() and return true\n      //   return true;\n      // }\n    }\n    // we tried all distances but text won't fit, return null\n    return null;\n  };\n\n  /* Send DOM event to all elements. Will stop sending event and return\n     if the previous one is canceled (for cancelable events). */\n  var sendEvent = function sendEvent(type, cancelable, detail) {\n    if (cancelable) {\n      return !elements.some(function (el) {\n        var evt = document.createEvent('CustomEvent');\n        evt.initCustomEvent(type, true, cancelable, detail || {});\n        return !el.dispatchEvent(evt);\n      }, this);\n    } else {\n      elements.forEach(function (el) {\n        var evt = document.createEvent('CustomEvent');\n        evt.initCustomEvent(type, true, cancelable, detail || {});\n        el.dispatchEvent(evt);\n      }, this);\n    }\n  };\n\n  var getInteractionItemById = function getInteractionItemById(id) {\n    for (let i = 0; i < interactionItems.length; i++) {\n      const find = interactionItems[i];\n      if (interactionItems[i].id === id) {\n        return find;\n      }\n    }\n    return undefined;\n  };\n\n  /* Start drawing on a canvas */\n  var start = function start(selected) {\n    if (selected !== undefined) {\n      // re-refresh canvas with selected\n      // work in canvas only for now\n      if (settings.selected !== selected && elements[0].getContext) {\n        settings.selected = selected;\n        const ctx = elements[0].getContext('2d');\n        // draw background\n        ctx.fillStyle = settings.backgroundColor;\n        ctx.clearRect(0, 0, elements[0].width, elements[0].height);\n        ctx.fillRect(0, 0, elements[0].width, elements[0].height);\n\n        // draw text\n        for (let i = 0; i < interactionItems.length; i++) {\n          const find = interactionItems[i];\n          drawText(\n            find.gx,\n            find.gy,\n            find.info,\n            find.word,\n            find.weight,\n            find.distance,\n            find.theta,\n            find.rotateDeg,\n            find.attributes,\n            find.id,\n            true\n          );\n        }\n      }\n      return;\n    }\n    // For dimensions, clearCanvas etc.,\n    // we only care about the first element.\n    var canvas = elements[0];\n\n    if (canvas.getContext) {\n      ngx = Math.ceil(canvas.width / g);\n      ngy = Math.ceil(canvas.height / g);\n    } else {\n      var rect = canvas.getBoundingClientRect();\n      ngx = Math.ceil(rect.width / g);\n      ngy = Math.ceil(rect.height / g);\n    }\n\n    // Sending a wordcloudstart event which cause the previous loop to stop.\n    // Do nothing if the event is canceled.\n    if (!sendEvent('wordcloudstart', true)) {\n      return;\n    }\n\n    // Determine the center of the word cloud\n    center = settings.origin ? [settings.origin[0] / g, settings.origin[1] / g] : [ngx / 2, ngy / (isCardioid ? 4 : 2)];\n\n    // Maxium radius to look for space\n    maxRadius = Math.floor(Math.sqrt(ngx * ngx + ngy * ngy));\n\n    /* Clear the canvas only if the clearCanvas is set,\n       if not, update the grid to the current canvas state */\n    grid = [];\n\n    var gx, gy, i;\n    if (!canvas.getContext || settings.clearCanvas) {\n      elements.forEach(function (el) {\n        if (el.getContext) {\n          var ctx = el.getContext('2d');\n          ctx.fillStyle = settings.backgroundColor;\n          ctx.clearRect(0, 0, ngx * (g + 1), ngy * (g + 1));\n          ctx.fillRect(0, 0, ngx * (g + 1), ngy * (g + 1));\n        } else {\n          el.textContent = '';\n          el.style.backgroundColor = settings.backgroundColor;\n          el.style.position = 'relative';\n        }\n      });\n\n      /* fill the grid with empty state */\n      gx = ngx;\n      while (gx--) {\n        grid[gx] = [];\n        gy = ngy;\n        while (gy--) {\n          grid[gx][gy] = true;\n        }\n      }\n    } else {\n      /* Determine bgPixel by creating\n         another canvas and fill the specified background color. */\n      var bctx = document.createElement('canvas').getContext('2d');\n\n      bctx.fillStyle = settings.backgroundColor;\n      bctx.fillRect(0, 0, 1, 1);\n      var bgPixel = bctx.getImageData(0, 0, 1, 1).data;\n\n      /* Read back the pixels of the canvas we got to tell which part of the\n         canvas is empty.\n         (no clearCanvas only works with a canvas, not divs) */\n      var imageData = canvas.getContext('2d').getImageData(0, 0, ngx * g, ngy * g).data;\n\n      gx = ngx;\n      var x, y;\n      while (gx--) {\n        grid[gx] = [];\n        gy = ngy;\n        while (gy--) {\n          y = g;\n          singleGridLoop: while (y--) {\n            x = g;\n            while (x--) {\n              i = 4;\n              while (i--) {\n                if (imageData[((gy * g + y) * ngx * g + (gx * g + x)) * 4 + i] !== bgPixel[i]) {\n                  grid[gx][gy] = false;\n                  break singleGridLoop;\n                }\n              }\n            }\n          }\n          if (grid[gx][gy] !== false) {\n            grid[gx][gy] = true;\n          }\n        }\n      }\n\n      imageData = bctx = bgPixel = undefined;\n    }\n\n    // fill the infoGrid with empty state if we need it\n    if (settings.onWordCloudHover || settings.onWordCloudClick) {\n      interactive = true;\n\n      /* fill the grid with empty state */\n      gx = ngx + 1;\n      while (gx--) {\n        infoGrid[gx] = [];\n      }\n\n      if (settings.onWordCloudHover) {\n        canvas.addEventListener('mousemove', wordcloudhover);\n      }\n\n      if (settings.onWordCloudClick) {\n        canvas.addEventListener('click', wordcloudclick);\n        canvas.addEventListener('touchstart', wordcloudclick);\n        canvas.addEventListener('touchend', function (e) {\n          e.preventDefault();\n        });\n        canvas.style.webkitTapHighlightColor = 'rgba(0, 0, 0, 0)';\n      }\n\n      canvas.addEventListener('wordcloudstart', function stopInteraction() {\n        canvas.removeEventListener('wordcloudstart', stopInteraction);\n\n        canvas.removeEventListener('mousemove', wordcloudhover);\n        canvas.removeEventListener('click', wordcloudclick);\n        hovered = undefined;\n      });\n    }\n\n    if (!settings.animatable) {\n      for (let i = 0; i < settings.data.length; i++) {\n        putWord(settings.data[i]);\n      }\n    } else {\n      i = 0;\n      var loopingFunction, stoppingFunction;\n      if (settings.wait !== 0) {\n        loopingFunction = window.setTimeout;\n        stoppingFunction = window.clearTimeout;\n      } else {\n        loopingFunction = window.setImmediate;\n        stoppingFunction = window.clearImmediate;\n      }\n\n      var addEventListener = function addEventListener(type, listener) {\n        elements.forEach(function (el) {\n          el.addEventListener(type, listener);\n        }, this);\n      };\n\n      var removeEventListener = function removeEventListener(type, listener) {\n        elements.forEach(function (el) {\n          el.removeEventListener(type, listener);\n        }, this);\n      };\n\n      var anotherWordCloudStart = function anotherWordCloudStart() {\n        removeEventListener('wordcloudstart', anotherWordCloudStart);\n        stoppingFunction(timer);\n      };\n\n      addEventListener('wordcloudstart', anotherWordCloudStart);\n\n      var timer = loopingFunction(function loop() {\n        if (i >= settings.data.length) {\n          stoppingFunction(timer);\n          sendEvent('wordcloudstop', false);\n          removeEventListener('wordcloudstart', anotherWordCloudStart);\n\n          return;\n        }\n        escapeTime = new Date().getTime();\n        var drawn = putWord(settings.data[i]);\n        var canceled = !sendEvent('wordclouddrawn', true, {\n          item: settings.data[i],\n          drawn: drawn,\n        });\n        if (exceedTime() || canceled) {\n          stoppingFunction(timer);\n          settings.abort();\n          sendEvent('wordcloudabort', false);\n          sendEvent('wordcloudstop', false);\n          removeEventListener('wordcloudstart', anotherWordCloudStart);\n          return;\n        }\n        i++;\n        timer = loopingFunction(loop, settings.wait);\n      }, settings.wait);\n    }\n  };\n\n  // All set, start the drawing\n  start();\n};\n\nWordCloud.isSupported = isSupported;\nWordCloud.minFontSize = minFontSize;\n\nexport default WordCloud;\n","/**\n * Create By Bruce Too\n * On 2020-02-17\n */\nimport { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport RoseLayer, { RoseViewConfig } from './layer';\n\nexport interface RoseConfig extends RoseViewConfig, PlotConfig {}\n\n// TODO label的优化，可能要重新参考 https://github.com/antvis/G2Plot/blob/master/src/plots/rose/component/label/rose-label.ts\nexport default class Rose extends BasePlot<RoseConfig> {\n  public static getDefaultOptions: typeof RoseLayer.getDefaultOptions = RoseLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'rose';\n    super.createLayers(layerProps);\n  }\n}\n","import { assign } from '@antv/util';\nimport { getEventMap, EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst componentMap = {\n  rose: 'interval',\n};\n\nconst SHAPE_EVENT_MAP: IEventmap = getEventMap(componentMap);\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport FunnelLayer, { FunnelViewConfig } from './layer';\n\nexport interface FunnelConfig extends FunnelViewConfig, PlotConfig {}\n\nexport default class Funnel extends BasePlot<FunnelConfig> {\n  public static getDefaultOptions: typeof FunnelLayer.getDefaultOptions = FunnelLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'funnel';\n    super.createLayers(layerProps);\n  }\n}\n","import { deepMix, contains, isFunction, get, findIndex, isEqual, each, set, isArray, assign } from '@antv/util';\nimport { createDom, modifyCSS } from '@antv/dom-util';\nimport { IGroup, IShape, HtmlTooltipTheme, TooltipCssConst, DEFAULT_ANIMATE_CFG } from '../../dependents';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport ViewLayer, { ViewConfig } from '../../base/view-layer';\nimport { getGeom } from '../../geoms/factory';\nimport { ElementOption, DataItem, LineStyle, TextStyle } from '../../interface/config';\nimport './theme';\nimport './geometry/shape/funnel-basic-rect';\nimport './geometry/shape/funnel-dynamic-rect';\nimport './animation/funnel-scale-in-x';\nimport './animation/funnel-scale-in-y';\nimport { mappingColor, rgb2arr } from '../../util/color';\n\nfunction lerp(a, b, factor) {\n  return (1 - factor) * a + factor * b;\n}\n\nconst G2_GEOM_MAP = {\n  column: 'interval',\n};\n\nconst PLOT_GEOM_MAP = {\n  interval: 'funnel',\n};\n\nexport interface FunnelStyle {\n  [k: string]: any;\n}\n\nexport interface FunnelViewConfig extends ViewConfig {\n  funnelStyle?: FunnelStyle | ((...args: any[]) => FunnelStyle);\n  percentage?: Partial<{\n    visible: boolean;\n    line: Partial<{\n      visible: boolean;\n      style: LineStyle;\n    }>;\n    text: Partial<{\n      visible: boolean;\n      content: string;\n      style: TextStyle;\n    }>;\n    value: Partial<{\n      visible: boolean;\n      style: TextStyle;\n      formatter: (yValueUpper: any, yValueLower: any) => string;\n    }>;\n    offsetX: number;\n    offsetY: number;\n    spacing: number;\n  }>;\n  transpose?: boolean;\n  dynamicHeight?: boolean;\n  compareField?: string;\n  compareText?: Partial<{\n    visible: boolean;\n    offsetX: number;\n    offsetY: number;\n    style: TextStyle;\n  }>;\n}\n\nexport interface FunnelLayerConfig extends FunnelViewConfig, LayerConfig {}\n\nexport default class FunnelLayer<T extends FunnelLayerConfig = FunnelLayerConfig> extends ViewLayer<T> {\n  public static getDefaultOptions(props?: Partial<FunnelViewConfig>): Partial<FunnelViewConfig> {\n    const cfg: Partial<FunnelViewConfig> = {\n      label: {\n        visible: true,\n        adjustColor: true,\n        formatter:\n          props && (props.compareField || props.transpose)\n            ? (yValue) => `${yValue}`\n            : (xValue, yValue) => `${xValue} ${yValue}`,\n      },\n      percentage: {\n        visible: true,\n        offsetX: props.transpose ? 0 : 40,\n        offsetY: props.transpose ? 40 : 0,\n        spacing: 4,\n        line: {\n          visible: true,\n          style: {\n            lineWidth: 1,\n            stroke: 'rgba(0, 0, 0, 0.15)',\n          },\n        },\n        text: {\n          content: '转化率',\n          style: {\n            fill: 'rgba(0, 0, 0, 0.65)',\n          },\n        },\n        value: {\n          visible: true,\n          style: {\n            fill: 'black',\n          },\n          formatter: (yValueUpper, yValueLower) => `${((100 * yValueLower) / yValueUpper).toFixed(2)}%`,\n        },\n      },\n      tooltip: {\n        visible: true,\n        shared: true,\n        showTitle: false,\n        showCrosshairs: false,\n        showMarkers: false,\n      },\n      animation: deepMix({}, DEFAULT_ANIMATE_CFG, {\n        appear: {\n          duration: 800,\n        },\n      }),\n      dynamicHeight: false,\n      compareText: {\n        visible: true,\n        offsetX: -16,\n        offsetY: -16,\n        style: {\n          fill: 'black',\n        },\n      },\n      legend: {\n        position: 'bottom-center',\n      },\n      interactions: [{ type: 'tooltip' }, { type: 'legend-filter' }],\n    };\n    return deepMix({}, super.getDefaultOptions(), cfg);\n  }\n\n  public readonly type: string = 'funnel';\n  public funnel: any;\n\n  private _animationAppearTimeoutHandler: any;\n  private _shouldResetPercentages: boolean = true;\n  private _shouldResetLabels: boolean = true;\n  private _shouldResetCompareTexts: boolean = true;\n  private _legendsListenerAttached: boolean = false;\n\n  constructor(props: T) {\n    super(props);\n    this.adjustProps(this.options);\n\n    if (props.dynamicHeight) {\n      this._genCustomFieldForDynamicHeight(this.getData());\n    }\n\n    if (props.compareField) {\n      this.options.data = this._reduceDataForCompare(this.getData());\n    }\n  }\n\n  protected coord() {\n    const props = this.options;\n    const coordConfig = {\n      actions: props.transpose\n        ? props.dynamicHeight\n          ? [['transpose'], ['scale', 1, -1]]\n          : [['scale', 1, -1]]\n        : props.dynamicHeight\n        ? []\n        : [['transpose'], ['scale', 1, -1]],\n    };\n    // @ts-ignore\n    this.setConfig('coordinate', coordConfig);\n  }\n\n  protected axis(): void {\n    this.setConfig('axes', false);\n  }\n\n  protected adjustFunnel(funnel: ElementOption) {\n    const props = this.options;\n\n    // @ts-ignore\n    funnel.shape = props.dynamicHeight ? 'funnel-dynamic-rect' : 'funnel-basic-rect';\n\n    funnel.color = {\n      fields: [props.xField],\n      values: props.color && (Array.isArray(props.color) ? props.color : [props.color]),\n    };\n\n    if (isFunction(props.funnelStyle)) {\n      // @ts-ignore\n      funnel.style = { callback: props.funnelStyle };\n    } else {\n      // @ts-ignore\n      funnel.style = { cfg: props.funnelStyle };\n    }\n\n    funnel.adjust = [\n      {\n        type: props.dynamicHeight ? 'stack' : 'symmetric',\n      },\n    ];\n  }\n\n  protected tooltip() {\n    const props = this.options;\n\n    if (props.compareField) {\n      deepMix(props.tooltip, {\n        htmlContent: (title, items) => {\n          let clss, el, color, elMarker;\n\n          clss = TooltipCssConst.CONTAINER_CLASS;\n          el = createDom(`<div class=\"${clss}\"></div>`);\n          modifyCSS(el, HtmlTooltipTheme[clss]);\n          const elRoot = el;\n\n          if (title) {\n            clss = TooltipCssConst.TITLE_CLASS;\n            el = createDom(`<div class=\"${clss}\"></div>`);\n            modifyCSS(el, HtmlTooltipTheme[clss]);\n            elRoot.appendChild(el);\n            const elTitle = el;\n\n            clss = TooltipCssConst.MARKER_CLASS;\n            el = createDom(`<span class=\"${clss}\"></span>`);\n            modifyCSS(el, HtmlTooltipTheme[clss]);\n            modifyCSS(el, { width: '10px', height: '10px' });\n            elTitle.appendChild(el);\n            elMarker = el;\n\n            el = createDom(`<span>${title}</span>`);\n            elTitle.appendChild(el);\n          }\n\n          if (items) {\n            clss = TooltipCssConst.LIST_CLASS;\n            el = createDom(`<ul class=\"${clss}\"></ul>`);\n            modifyCSS(el, HtmlTooltipTheme[clss]);\n            elRoot.appendChild(el);\n            const elList = el;\n\n            items\n              .reduce((pairs, item) => {\n                if (!color) {\n                  color = item.color;\n                }\n                const compareValues = get(item, 'point._origin.__compare__.compareValues');\n                const yValues = get(item, 'point._origin.__compare__.yValues');\n                yValues.forEach((yValue, i) => pairs.push([compareValues[i], yValue]));\n                return pairs;\n              }, [])\n              .forEach(([compareValue, yValue], index) => {\n                clss = TooltipCssConst.LIST_ITEM_CLASS;\n                el = createDom(`<li class=\"${clss}\" data-index=${index}></li>`);\n                modifyCSS(el, HtmlTooltipTheme[clss]);\n                elList.appendChild(el);\n                const elListItem = el;\n\n                clss = TooltipCssConst.NAME_CLASS;\n                el = createDom(`<span class=\"${clss}\">${compareValue}</span>`);\n                modifyCSS(el, HtmlTooltipTheme[clss]);\n                elListItem.appendChild(el);\n\n                clss = TooltipCssConst.VALUE_CLASS;\n                el = createDom(`<span class=\"${clss}\">${yValue}</span>`);\n                modifyCSS(el, HtmlTooltipTheme[clss]);\n                elListItem.appendChild(el);\n              });\n          }\n\n          if (color && elMarker) {\n            modifyCSS(elMarker, { backgroundColor: color });\n          }\n\n          return elRoot;\n        },\n      });\n    }\n\n    super.tooltip();\n  }\n\n  protected addGeometry() {\n    const props = this.options;\n    const funnel = getGeom('interval', 'main', {\n      positionFields: [props.dynamicHeight ? '_' : props.xField, props.yField],\n      plot: this,\n    });\n    this.adjustFunnel(funnel);\n    this.funnel = funnel;\n    this.setConfig('geometry', funnel);\n  }\n\n  protected animation() {\n    super.animation();\n    const props = this.options;\n    if (props.animation === false) {\n      /** 关闭动画 */\n      this.funnel.animate = false;\n    } else {\n      const data = this.getData();\n      const appearDuration = get(props, 'animation.appear.duration');\n      const appearDurationEach = appearDuration / (data.length || 1);\n\n      if (this._animationAppearTimeoutHandler) {\n        clearTimeout(this._animationAppearTimeoutHandler);\n        delete this._animationAppearTimeoutHandler;\n      }\n      this._animationAppearTimeoutHandler = setTimeout(() => {\n        this.fadeInPercentages(appearDurationEach);\n        if (props.compareField) {\n          this.fadeInCompareTexts(appearDurationEach);\n        }\n        delete this._animationAppearTimeoutHandler;\n      }, appearDuration);\n\n      this.funnel.animate = deepMix({}, props.animation, {\n        appear: {\n          animation: props.transpose ? 'funnelScaleInX' : 'funnelScaleInY',\n          duration: appearDurationEach,\n          delay: (datum) => findIndex(data, (o) => isEqual(o, datum)) * appearDurationEach,\n          callback: (shape) => {\n            this.fadeInLabels(shape, 0.5 * appearDurationEach);\n          },\n        },\n        enter: {\n          animation: 'fade-in',\n        },\n      });\n    }\n  }\n\n  public afterRender() {\n    const props = this.options;\n    this.resetLabels();\n    this.resetPercentages();\n    if (props.compareField) {\n      this.resetCompareTexts();\n    }\n\n    if (props.padding == 'auto') {\n      const percentageContainer = this._findPercentageContainer();\n      if (percentageContainer) {\n        this.paddingController.registerPadding(percentageContainer, 'inner', true);\n      }\n      const compareTextContainer = this._findCompareTextContainer();\n      if (compareTextContainer) {\n        this.paddingController.registerPadding(compareTextContainer, 'inner', true);\n      }\n    }\n\n    super.afterRender();\n\n    if (props.animation === false) {\n      this.fadeInLabels();\n      this.fadeInPercentages();\n      if (props.compareField) {\n        this.fadeInCompareTexts();\n      }\n    }\n\n    if (!this._legendsListenerAttached) {\n      this._legendsListenerAttached = true;\n      // @ts-ignore\n      const legendContainer = this.view.getController('legend').container;\n      legendContainer.on('mousedown', this._onLegendContainerMouseDown);\n    }\n  }\n\n  public updateConfig(cfg: Partial<T>): void {\n    cfg = this.adjustProps(cfg);\n    super.updateConfig(cfg);\n    this._legendsListenerAttached = false;\n  }\n\n  public changeData(data: DataItem[]): void {\n    const props = this.options;\n\n    if (props.animation !== false) {\n      this._shouldResetPercentages = false;\n      this._shouldResetLabels = false;\n    }\n\n    if (props.dynamicHeight) {\n      const checkedData = this._findCheckedDataInNewData(data);\n      this._genCustomFieldForDynamicHeight(checkedData);\n    }\n\n    if (props.compareField) {\n      data = this._reduceDataForCompare(data);\n      const checkedData = this._findCheckedDataInNewData(data);\n      this._updateDataForCompare(checkedData);\n    }\n\n    super.changeData(data);\n\n    this.refreshPercentages();\n    this.refreshLabels();\n    if (props.compareField) {\n      this.fadeInCompareTexts();\n    }\n  }\n\n  protected geometryParser(dim, type) {\n    if (dim === 'g2') {\n      return G2_GEOM_MAP[type];\n    }\n    return PLOT_GEOM_MAP[type];\n  }\n\n  protected adjustProps(props: Partial<T>) {\n    if (props.compareField) {\n      props.dynamicHeight = false;\n    }\n\n    if (props.dynamicHeight) {\n      set(props, `meta.${props.yField}.nice`, false);\n      set(props, 'tooltip.shared', false);\n    }\n    return props;\n  }\n\n  protected resetPercentages() {\n    if (!this._shouldResetPercentages) return;\n\n    const props = this.options;\n    const {\n      offsetX,\n      offsetY,\n      spacing,\n      line: percentageLine = {},\n      text: percentageText = {},\n      value: percentageValue = {},\n    } = props.percentage || {};\n\n    const adjustTimestamp = Date.now();\n    const container = this._findPercentageContainer(true);\n\n    this._eachShape((shape, index, datumLower, datumUpper) => {\n      if (index > 0) {\n        const { minX, maxX, maxY, minY } = shape.getBBox();\n        const x1 = props.transpose ? minX : maxX;\n        const y1 = props.transpose ? (props.compareField ? maxY : minY) : minY;\n\n        const { line, text, value } = this._findPercentageMembersInContainerByIndex(container, index, true);\n\n        const eachProcs = [\n          (x, y, line, text, value) => {\n            if (line) {\n              line.attr(\n                deepMix({}, percentageLine.style, {\n                  x1: x,\n                  y1: y,\n                  x2: props.transpose ? x + offsetX : x - offsetX,\n                  y2: props.transpose ? y - offsetY : y + offsetY,\n                  opacity: 0,\n                })\n              );\n              line.set('adjustTimestamp', adjustTimestamp);\n            }\n\n            let textWidth = 0;\n            let valueWidth = 0;\n\n            const textProc = () => {\n              if (text) {\n                text.attr(\n                  deepMix({}, percentageText.style, {\n                    x: props.transpose ? x + offsetX : x - offsetX - spacing - valueWidth - spacing,\n                    y: props.transpose ? y - offsetY - spacing : y + offsetY,\n                    opacity: 0,\n                    text: percentageText.content,\n                    textAlign: props.transpose ? 'left' : 'right',\n                    textBaseline: props.transpose ? 'bottom' : 'middle',\n                  })\n                );\n                text.set('adjustTimestamp', adjustTimestamp);\n                textWidth = text.getBBox().width;\n              }\n            };\n\n            const valueProc = () => {\n              if (value) {\n                value.attr(\n                  deepMix({}, percentageValue.style, {\n                    x: props.transpose ? x + offsetX + textWidth + spacing : x - offsetX - spacing,\n                    y: props.transpose ? y - offsetY - spacing : y + offsetY,\n                    opacity: 0,\n                    text: isFunction(percentageValue.formatter)\n                      ? props.compareField\n                        ? percentageValue.formatter(\n                            get(datumUpper, '__compare__.yValues.0'),\n                            get(datumLower, '__compare__.yValues.0')\n                          )\n                        : percentageValue.formatter(datumUpper[props.yField], datumLower[props.yField])\n                      : '',\n                    textAlign: props.transpose ? 'left' : 'right',\n                    textBaseline: props.transpose ? 'bottom' : 'middle',\n                  })\n                );\n                value.set('adjustTimestamp', adjustTimestamp);\n                valueWidth = value.getBBox().width;\n              }\n            };\n\n            if (props.transpose) {\n              textProc();\n              valueProc();\n            } else {\n              valueProc();\n              textProc();\n            }\n          },\n          (x, y, line, text, value) => {\n            if (line) {\n              line.attr(\n                deepMix({}, percentageLine.style, {\n                  x1: x,\n                  y1: y,\n                  x2: x + offsetX,\n                  y2: props.transpose ? (props.compareField ? y + offsetY : y - offsetY) : y + offsetY,\n                  opacity: 0,\n                })\n              );\n              line.set('adjustTimestamp', adjustTimestamp);\n            }\n\n            let textWidth = 0;\n            if (text) {\n              text.attr(\n                deepMix({}, percentageText.style, {\n                  x: props.transpose ? x + offsetX : x + offsetX + spacing,\n                  y: props.transpose\n                    ? props.compareField\n                      ? y + offsetY + spacing\n                      : y - offsetY - spacing\n                    : y + offsetY,\n                  opacity: 0,\n                  text: percentageText.content,\n                  textAlign: 'left',\n                  textBaseline: props.transpose ? (props.compareField ? 'top' : 'bottom') : 'middle',\n                })\n              );\n              text.set('adjustTimestamp', adjustTimestamp);\n              textWidth = text.getBBox().width;\n            }\n\n            if (value) {\n              value.attr(\n                deepMix({}, percentageValue.style, {\n                  x: props.transpose ? x + offsetX + textWidth + spacing : x + offsetX + spacing + textWidth + spacing,\n                  y: props.transpose\n                    ? props.compareField\n                      ? y + offsetY + spacing\n                      : y - offsetY - spacing\n                    : y + offsetY,\n                  opacity: 0,\n                  text: isFunction(percentageValue.formatter)\n                    ? props.compareField\n                      ? percentageValue.formatter(\n                          get(datumUpper, `__compare__.yValues.1`),\n                          get(datumLower, `__compare__.yValues.1`)\n                        )\n                      : percentageValue.formatter(datumUpper[props.yField], datumLower[props.yField])\n                    : '',\n                  textAlign: 'left',\n                  textBaseline: props.transpose ? (props.compareField ? 'top' : 'bottom') : 'middle',\n                })\n              );\n              value.set('adjustTimestamp', adjustTimestamp);\n            }\n          },\n        ];\n\n        if (props.compareField) {\n          const [x0, y0] = [minX, minY];\n          [\n            [x0, y0],\n            [x1, y1],\n          ].forEach(([x, y], i) => eachProcs[i](x, y, line && line[i], text && text[i], value && value[i]));\n        } else {\n          eachProcs[1](x1, y1, line, text, value);\n        }\n      }\n      datumUpper = datumLower;\n      index++;\n    });\n\n    container.get('children').forEach((child) => {\n      if (child.get('adjustTimestamp') != adjustTimestamp) {\n        child.attr({ opacity: 0 });\n        container.set(child.get('id'), null);\n        setTimeout(() => child.remove(), 0);\n      }\n    });\n  }\n\n  protected fadeInPercentages(duration?, callback?) {\n    const props = this.options;\n    const container = this._findPercentageContainer();\n\n    const eachProc = (i?) => {\n      const lastBBox = { minX: Infinity, maxX: -Infinity, minY: Infinity, maxY: -Infinity };\n      this._eachShape((shape, index) => {\n        const members = this._findPercentageMembersInContainerByIndex(container, index);\n\n        const currBBox = { minX: Infinity, maxX: -Infinity, minY: Infinity, maxY: -Infinity };\n        const eachCalc = (member) => {\n          if (member && member.get('type') == 'text') {\n            const { minX, maxX, minY, maxY } = member.getBBox();\n            if (minX < currBBox.minX) currBBox.minX = minX;\n            if (maxX > currBBox.maxX) currBBox.maxX = maxX;\n            if (minY < currBBox.minY) currBBox.minY = minY;\n            if (maxY > currBBox.maxY) currBBox.maxY = maxY;\n          }\n        };\n        each(members, (member) => (isArray(member) ? eachCalc(member[i]) : eachCalc(member)));\n\n        if (\n          currBBox.minX > lastBBox.maxX ||\n          currBBox.maxX < lastBBox.minX ||\n          currBBox.minY > lastBBox.maxY ||\n          currBBox.maxY < lastBBox.minY\n        ) {\n          const eachShow = (member) => {\n            if (member) {\n              const attrs = {\n                opacity: 1,\n              };\n              duration ? member.animate(attrs, duration) : member.attr(attrs);\n            }\n          };\n          each(members, (member) => (isArray(member) ? eachShow(member[i]) : eachShow(member)));\n          assign(lastBBox, currBBox);\n        }\n      });\n    };\n\n    props.compareField ? [0, 1].forEach(eachProc) : eachProc();\n\n    duration && callback && setTimeout(callback, duration);\n  }\n\n  protected fadeOutPercentages(duration?, callback?) {\n    const container = this._findPercentageContainer();\n\n    this._eachShape((shape, index) => {\n      const members = this._findPercentageMembersInContainerByIndex(container, index);\n\n      const eachProc = (member) => {\n        if (member) {\n          const attrs = {\n            opacity: 0,\n          };\n          duration ? member.animate(attrs, duration) : member.attr(attrs);\n        }\n      };\n      each(members, (member) => (isArray(member) ? member.forEach(eachProc) : eachProc(member)));\n    });\n\n    duration && callback && setTimeout(callback, duration);\n  }\n\n  protected refreshPercentages(callback?) {\n    const props = this.options;\n\n    if (props.animation !== false) {\n      const { fadeOutDuration, fadeInDuration } = this._calcRefreshFadeDurations();\n\n      this._shouldResetPercentages = false;\n      this.fadeOutPercentages(fadeOutDuration, () => {\n        this._shouldResetPercentages = true;\n        this.resetPercentages();\n        this.fadeInPercentages(fadeInDuration, callback);\n      });\n    }\n  }\n\n  private _findPercentageContainer(createIfNotFound: boolean = false): IGroup | undefined {\n    const { middleGroup } = this.view;\n\n    let percentageContainer = middleGroup.get('percentageContainer');\n    if (!percentageContainer && createIfNotFound) {\n      percentageContainer = middleGroup.addGroup();\n      middleGroup.set('percentageContainer', percentageContainer);\n    }\n\n    return percentageContainer;\n  }\n\n  private _findPercentageMembersInContainerByIndex(\n    container: IGroup,\n    index: number,\n    createIfNotFound: boolean = false\n  ) {\n    const props = this.options;\n    const { visible, line: percentageLine = {}, text: percentageText = {}, value: percentageValue = {} } =\n      props.percentage || {};\n\n    const members = {\n      line: undefined,\n      text: undefined,\n      value: undefined,\n    };\n\n    if (visible === false || !container) {\n      return members;\n    }\n\n    if (percentageLine.visible !== false) {\n      const find = (i) => {\n        const lineId = `_percentage-line-${index}-${i}`;\n        let line = container.get(lineId);\n        if (!line && createIfNotFound) {\n          line = container.addShape({ id: lineId, type: 'line', attrs: {} });\n          container.set(lineId, line);\n        }\n        return line;\n      };\n      const line = props.compareField ? [0, 1].map(find) : find(0);\n      members.line = line;\n    }\n\n    if (percentageText.visible !== false) {\n      const find = (i) => {\n        const textId = `_percentage-text-${index}-${i}`;\n        let text = container.get(textId);\n        if (!text && createIfNotFound) {\n          text = container.addShape({ id: textId, type: 'text', attrs: {} });\n          container.set(textId, text);\n        }\n        return text;\n      };\n      const text = props.compareField ? [0, 1].map(find) : find(0);\n      members.text = text;\n    }\n\n    if (percentageValue.visible !== false) {\n      const find = (i) => {\n        const valueId = `_percentage-value-${index}-${i}`;\n        let value = container.get(valueId);\n        if (!value && createIfNotFound) {\n          value = container.addShape({ id: valueId, type: 'text', attrs: {} });\n          container.set(valueId, value);\n        }\n        return value;\n      };\n      const value = props.compareField ? [0, 1].map(find) : find(0);\n      members.value = value;\n    }\n\n    return members;\n  }\n\n  private _calcRefreshFadeDurations() {\n    const props = this.options;\n\n    const updateDuration = get(props, 'animation.update.duration');\n    const enterDuration = get(props, 'animation.enter.duration');\n    const fadeInDuration = Math.min(enterDuration, updateDuration) * 0.6;\n    const fadeOutDuration = Math.max(enterDuration, updateDuration) * 1.2;\n\n    return { fadeInDuration, fadeOutDuration };\n  }\n\n  protected resetLabels() {\n    if (!this._shouldResetLabels) return;\n\n    const props = this.options;\n    const { xField, yField } = props;\n\n    const adjustTimestamp = Date.now();\n    const { labelsContainer } = this._getGeometry();\n\n    const labelProps = props.label || {};\n    const labelStyle = deepMix(\n      {\n        ...this.theme.label,\n      },\n      props.label.style,\n      {\n        opacity: 0,\n        textAlign: 'center',\n        textBaseline: 'middle',\n      }\n    );\n    const { formatter } = labelProps;\n\n    let datumTop;\n    let compareTop;\n    this._eachShape((shape, index, datum) => {\n      if (index == 0) {\n        datumTop = datum;\n        compareTop = datumTop.__compare__;\n      }\n\n      const { minX, maxX, minY, maxY } = shape.getBBox();\n      const xValue = datum[xField];\n      const yValue = datum[yField];\n\n      if (labelProps.adjustColor) {\n        labelStyle.fill = this._getAdjustedTextFillByShape(shape);\n      }\n\n      const compare = datum.__compare__;\n      let content;\n      if (compare) {\n        content = [0, 1]\n          .map((i) => formatter(xValue, shape, index, compare.yValues[i], compareTop.yValues[i]))\n          .join(props.transpose ? '\\n\\n' : '    ');\n      } else {\n        content = formatter(xValue, shape, index, yValue, datumTop[yField]);\n      }\n\n      const label = this._findLabelInContainerByIndex(labelsContainer, index, true);\n      const ratio = compare ? compare.yValues[0] / (compare.yValues[0] + compare.yValues[1]) : 0.5;\n      label.attr({\n        ...labelStyle,\n        x: lerp(minX, maxX, !props.transpose ? ratio : 0.5),\n        y: lerp(minY, maxY, props.transpose ? ratio : 0.5),\n        text: content,\n      });\n\n      label.set('adjustTimestamp', adjustTimestamp);\n    });\n\n    labelsContainer.get('children').forEach((label) => {\n      if (label.get('adjustTimestamp') != adjustTimestamp) {\n        label.attr({ opacity: 0 });\n        labelsContainer.set(label.get('id'), null);\n        setTimeout(() => label.remove());\n      }\n    });\n  }\n\n  protected fadeInLabels(targetShape?, duration?, callback?) {\n    const { labelsContainer } = this._getGeometry();\n    this._eachShape((shape, index) => {\n      if (!targetShape || targetShape == shape) {\n        const label = this._findLabelInContainerByIndex(labelsContainer, index);\n        if (label) {\n          const shapeBBox = shape.getBBox();\n          const labelBBox = label.getBBox();\n          if (\n            labelBBox.minX >= shapeBBox.minX &&\n            labelBBox.maxX <= shapeBBox.maxX &&\n            labelBBox.minY >= shapeBBox.minY &&\n            labelBBox.maxY <= shapeBBox.maxY\n          ) {\n            const attrs = {\n              opacity: 1,\n            };\n            duration ? label.animate(attrs, duration) : label.attr(attrs);\n          }\n        }\n      }\n    });\n\n    duration && callback && setTimeout(callback, duration);\n  }\n\n  protected fadeOutLabels(targetShape?, duration?, callback?) {\n    const { labelsContainer } = this._getGeometry();\n    this._eachShape((shape, index) => {\n      if (!targetShape || targetShape == shape) {\n        const label = this._findLabelInContainerByIndex(labelsContainer, index);\n        if (label) {\n          const attrs = {\n            opacity: 0,\n          };\n          duration ? label.animate(attrs, duration) : label.attr(attrs);\n        }\n      }\n    });\n\n    duration && callback && setTimeout(callback, duration);\n  }\n\n  protected refreshLabels(callback?) {\n    const props = this.options;\n\n    if (props.animation !== false) {\n      const { fadeOutDuration, fadeInDuration } = this._calcRefreshFadeDurations();\n\n      this._shouldResetLabels = false;\n      this.fadeOutLabels(null, fadeOutDuration, () => {\n        this._shouldResetLabels = true;\n        this.resetLabels();\n        this.fadeInLabels(null, fadeInDuration, callback);\n      });\n    }\n  }\n\n  private _findLabelInContainerByIndex(container: IGroup, index: number, createIfNotFound: boolean = false) {\n    const props = this.options;\n\n    let label;\n\n    if (props.label?.visible === false) {\n      return label;\n    }\n\n    const labelId = `_label-${index}`;\n    label = container.get(labelId);\n    if (!label && createIfNotFound) {\n      label = container.addShape({\n        id: labelId,\n        type: 'text',\n        attrs: {},\n      });\n      container.set(labelId, label);\n    }\n\n    return label;\n  }\n\n  protected resetCompareTexts() {\n    if (!this._shouldResetCompareTexts) return;\n\n    const props = this.options;\n\n    let shapeParentBBox;\n    let compare;\n    this._eachShape((shape, index, datum) => {\n      if (index == 0) {\n        shapeParentBBox = shape.get('parent').getBBox();\n        compare = get(datum, '__compare__');\n      }\n    });\n\n    if (shapeParentBBox && compare && get(props, 'compareText.visible') !== false) {\n      const container = this._findCompareTextContainer(true);\n      const { yValuesMax, compareValues } = compare;\n      const { minX, maxX, minY, maxY } = shapeParentBBox;\n\n      const compareTexts = container.get('children');\n      [0, 1].forEach((i) => {\n        let compareText = compareTexts[i];\n        if (!compareText) {\n          compareText = container.addShape({ type: 'text' });\n        }\n        compareText.attr(\n          deepMix({}, get(props, 'compareText.style'), {\n            text: props.transpose ? compareValues[i] : i ? `  ${compareValues[i]}` : `${compareValues[i]}  `,\n            x: props.transpose\n              ? minX + get(props, 'compareText.offsetX')\n              : lerp(minX, maxX, yValuesMax[0] / (yValuesMax[0] + yValuesMax[1])),\n            y: props.transpose\n              ? lerp(minY, maxY, yValuesMax[0] / (yValuesMax[0] + yValuesMax[1])) + (i ? 8 : -8)\n              : minY + get(props, 'compareText.offsetY'),\n            opacity: 0,\n            textAlign: props.transpose ? 'right' : i ? 'left' : 'right',\n            textBaseline: props.transpose ? (i ? 'top' : 'bottom') : 'bottom',\n          })\n        );\n      });\n    }\n  }\n\n  protected fadeInCompareTexts(duration?, callback?) {\n    const container = this._findCompareTextContainer();\n    if (container) {\n      const compareTexts = container.get('children');\n      [0, 1].forEach((i) => {\n        const compareText = compareTexts[i];\n\n        if (compareText) {\n          const attrs = {\n            opacity: 1,\n          };\n          duration ? compareText.animate(attrs, duration) : compareText.attr(attrs);\n        }\n      });\n    }\n\n    duration && callback && setTimeout(callback, duration);\n  }\n\n  protected fadeOutCompareTexts(duration?, callback?) {\n    const container = this._findCompareTextContainer();\n    if (container) {\n      const compareTexts = container.get('children');\n      [0, 1].forEach((i) => {\n        const compareText = compareTexts[i];\n\n        if (compareText) {\n          const attrs = {\n            opacity: 0,\n          };\n          duration ? compareText.animate(attrs, duration) : compareText.attr(attrs);\n        }\n      });\n    }\n\n    duration && callback && setTimeout(callback, duration);\n  }\n\n  protected refreshCompareTexts(callback?) {\n    const props = this.options;\n\n    if (props.animation !== false) {\n      const { fadeInDuration, fadeOutDuration } = this._calcRefreshFadeDurations();\n\n      this._shouldResetCompareTexts = false;\n      this.fadeOutCompareTexts(fadeOutDuration, () => {\n        this._shouldResetCompareTexts = true;\n        this.resetCompareTexts();\n        this.fadeInCompareTexts(fadeInDuration, callback);\n      });\n    }\n  }\n\n  private _findCompareTextContainer(createIfNotFound: boolean = false) {\n    const { middleGroup } = this.view;\n\n    let compareTextContainer = middleGroup.get('compareTextContainer');\n    if (!compareTextContainer && createIfNotFound) {\n      compareTextContainer = middleGroup.addGroup();\n      middleGroup.set('compareTextContainer', compareTextContainer);\n    }\n\n    return compareTextContainer;\n  }\n\n  private _eachShape(fn: (shape: IShape | IGroup, index: number, datumLower: any, datumUpper: any) => void) {\n    const data = this._findCheckedData(this.getData());\n    const dataLen = data.length;\n    let index = 0;\n    let datumUpper;\n    this._getGeometry()?.elements.forEach((element) => {\n      const { shape } = element;\n      const datumLower = data[index];\n      if (index < dataLen) {\n        fn(shape, index, datumLower, datumUpper);\n      }\n      datumUpper = datumLower;\n      index++;\n    });\n  }\n\n  private _getGeometry() {\n    return this.view.geometries[0];\n  }\n\n  private _getAdjustedTextFillByShape(shape: IShape | IGroup) {\n    const shapeColor = shape.attr('fill');\n    const shapeOpacity = shape.attr('opacity') ? shape.attr('opacity') : 1;\n    const rgb = rgb2arr(shapeColor);\n    const gray = Math.round(rgb[0] * 0.299 + rgb[1] * 0.587 + rgb[2] * 0.114) / shapeOpacity;\n    const colorBand = [\n      { from: 0, to: 85, color: 'white' },\n      { from: 85, to: 170, color: '#F6F6F6' },\n      { from: 170, to: 255, color: 'black' },\n    ];\n    const reflect = mappingColor(colorBand, gray);\n    return reflect;\n  }\n\n  private _genCustomFieldForDynamicHeight(data: any[]) {\n    const props = this.options;\n\n    const total = data.reduce((total, datum) => total + datum[props.yField], 0);\n\n    let ratioUpper = 1;\n    data.forEach((datum, index) => {\n      const value = datum[props.yField];\n      const share = value / total;\n      const ratioLower = ratioUpper - share;\n\n      datum['__custom__'] = {\n        datumIndex: index,\n        dataLength: data.length,\n        ratioUpper,\n        ratioLower,\n        reverse: props.transpose,\n      };\n\n      ratioUpper = ratioLower;\n    });\n  }\n\n  private _findCheckedDataByMouseDownLegendItem(legendItem: IGroup) {\n    const flags = legendItem\n      .get('parent')\n      .get('children')\n      .map((legendItem) => !legendItem.get('unchecked'));\n\n    const data = this.getData().filter((datum, index) => flags[index]);\n\n    return data;\n  }\n\n  private _findCheckedDataInNewData(newData: any[]) {\n    const props = this.options;\n\n    // @ts-ignore\n    const legendContainer = this.view.getController('legend').container;\n\n    const uncheckedXValues = legendContainer\n      .findAll((shape) => shape.get('name') == 'legend-item')\n      .filter((legendItem) => legendItem.get('unchecked'))\n      .map((legendItem) => legendItem.get('id').replace('-legend-item-', ''));\n\n    const checkedData = newData.filter((datum) => !contains(uncheckedXValues, datum[props.xField]));\n\n    return checkedData;\n  }\n\n  private _findCheckedData(data: any[]) {\n    const props = this.options;\n\n    // @ts-ignore\n    const legendContainer = this.view.getController('legend').container;\n\n    const checkedXValues = legendContainer\n      .findAll((shape) => shape.get('name') == 'legend-item')\n      .filter((legendItem) => !legendItem.get('unchecked'))\n      .map((legendItem) => legendItem.get('id').replace('-legend-item-', ''));\n\n    const checkedData = data.filter((datum) => contains(checkedXValues, datum[props.xField]));\n\n    return checkedData;\n  }\n\n  private _reduceDataForCompare(data: any[]) {\n    const props = this.options;\n\n    let compareValueFirstVisited;\n    const yValuesMax = [-Infinity, -Infinity];\n    data = data.reduce((newData, datum) => {\n      const xValue = datum[props.xField];\n      const yValue = datum[props.yField];\n      const compareValue = datum[props.compareField];\n      if (!compareValueFirstVisited) compareValueFirstVisited = compareValue;\n\n      let newDatum = newData.find((newDatum) => newDatum[props.xField] == xValue);\n      if (!newDatum) {\n        newDatum = {\n          [props.xField]: xValue,\n          [props.yField]: 0,\n          ['__compare__']: {\n            compareValues: [],\n            yValues: [],\n            yValuesMax: [],\n            yValuesNext: undefined,\n            transpose: props.transpose,\n          },\n        };\n        newData.push(newDatum);\n      }\n      const idx = compareValue == compareValueFirstVisited ? 0 : 1;\n      newDatum['__compare__'].yValues[idx] = yValue;\n      if (yValuesMax[idx] < yValue) {\n        yValuesMax[idx] = yValue as number;\n      }\n      newDatum['__compare__'].compareValues[idx] = compareValue;\n\n      return newData;\n    }, []);\n\n    data.forEach((datum, index) => {\n      datum[props.yField] = get(datum, '__compare__.yValues', []).reduce((yTotal, yValue) => (yTotal += yValue), 0);\n      set(datum, '__compare__.yValuesMax', yValuesMax);\n      set(datum, '__compare__.yValuesNext', get(data, `${index + 1}.__compare__.yValues`));\n    });\n\n    return data;\n  }\n\n  private _updateDataForCompare(data: any[]) {\n    const yValuesMax = [-Infinity, -Infinity];\n    data.forEach((datum) => {\n      const yValues = get(datum, '__compare__.yValues');\n      [0, 1].forEach((i) => {\n        if (yValues[i] > yValuesMax[i]) {\n          yValuesMax[i] = yValues[i];\n        }\n      });\n    });\n\n    data.forEach((datum, index) => {\n      set(datum, '__compare__.yValuesMax', yValuesMax);\n      set(datum, '__compare__.yValuesNext', get(data, `${index + 1}.__compare__.yValues`));\n    });\n  }\n\n  private _onLegendContainerMouseDown = (e) => {\n    const props = this.options;\n\n    const targetName = e.target.get('name');\n    if (targetName.startsWith('legend-item')) {\n      const legendItem = e.target.get('parent');\n      legendItem.set('unchecked', !legendItem.get('unchecked'));\n\n      this.refreshPercentages();\n      this.refreshLabels();\n\n      if (props.dynamicHeight) {\n        const data = this._findCheckedDataByMouseDownLegendItem(legendItem);\n        this._genCustomFieldForDynamicHeight(data);\n      }\n\n      if (props.compareField) {\n        const data = this._findCheckedDataByMouseDownLegendItem(legendItem);\n        this._updateDataForCompare(data);\n        this.refreshCompareTexts();\n      }\n    }\n  };\n}\n\nregisterPlotType('funnel', FunnelLayer);\n","import { registerTheme } from '../../theme';\n\nconst BAR_ACTIVE_STYLE = (style) => {\n  const opacity = style.opacity || 1;\n  return { opacity: opacity * 0.5 };\n};\n\nconst BAR_DISABLE_STYLE = (style) => {\n  const opacity = style.opacity || 1;\n  return { opacity: opacity * 0.5 };\n};\n\nregisterTheme('funnel', {\n  columnStyle: {\n    normal: {},\n    active: BAR_ACTIVE_STYLE,\n    disable: BAR_DISABLE_STYLE,\n    selected: { lineWidth: 1, stroke: 'black' },\n  },\n});\n","import { get, isNil, isArray } from '@antv/util';\nimport { IGroup } from '@antv/g-base';\nimport { registerShape } from '@antv/g2';\nimport { ShapeMarkerCfg, ShapePoint, ShapeInfo } from '@antv/g2/lib/interface';\nimport { getStyle } from '@antv/g2/lib/geometry/shape/util/get-style';\n\n// 根据数据点生成矩形的四个关键点\nfunction _getRectPoints(cfg, isPyramid = false) {\n  const { x, y, y0, size } = cfg;\n  // 有 4 种情况，\n  // 1. x, y 都不是数组\n  // 2. y是数组，x不是\n  // 3. x是数组，y不是\n  // 4. x, y 都是数组\n  let yMin;\n  let yMax;\n  if (isArray(y)) {\n    yMin = y[0];\n    yMax = y[1];\n  } else {\n    yMin = y0;\n    yMax = y;\n  }\n\n  let xMin;\n  let xMax;\n  if (isArray(x)) {\n    xMin = x[0];\n    xMax = x[1];\n  } else {\n    xMin = x - size / 2;\n    xMax = x + size / 2;\n  }\n\n  const points = [\n    { x: xMin, y: yMin },\n    { x: xMin, y: yMax },\n  ];\n\n  if (isPyramid) {\n    // 绘制尖底漏斗图\n    // 金字塔漏斗图的关键点\n    // 1\n    // |   2\n    // 0\n    points.push({\n      x: xMax,\n      y: (yMax + yMin) / 2,\n    });\n  } else {\n    // 矩形的四个关键点，结构如下（左下角顺时针连接）\n    // 1 ---- 2\n    // |      |\n    // 0 ---- 3\n    points.push({ x: xMax, y: yMax }, { x: xMax, y: yMin });\n  }\n\n  return points;\n}\n\n// 根据关键点绘制漏斗图的 path\nfunction _getFunnelPath(cfg, compare) {\n  const path = [];\n  const { points, nextPoints } = cfg;\n\n  if (compare) {\n    // 对比漏斗\n    const { yValues, yValuesMax, yValuesNext } = compare;\n    const originY = (points[0].y + points[1].y) / 2;\n\n    const yValueTotal = yValues[0] + yValues[1];\n    const yRatios = yValues.map((yValue) => yValue / yValueTotal / 0.5);\n    const yOffset = (yValuesMax[0] / (yValuesMax[0] + yValuesMax[1]) - 0.5) * 0.9;\n    const spacing = 0.001;\n\n    if (!isNil(nextPoints)) {\n      const yValueTotalNext = yValuesNext[0] + yValuesNext[1];\n      const yRatiosNext = yValuesNext.map((yValueNext) => yValueNext / yValueTotalNext / 0.5);\n      path.push(\n        ['M', points[0].x, yOffset + (points[0].y - originY) * yRatios[0] + originY - spacing],\n        ['L', points[1].x, yOffset + originY - spacing],\n        ['L', nextPoints[1].x, yOffset + originY - spacing],\n        ['L', nextPoints[0].x, yOffset + (nextPoints[3].y - originY) * yRatiosNext[0] + originY - spacing],\n        ['Z']\n      );\n      path.push(\n        ['M', points[0].x, yOffset + originY + spacing],\n        ['L', points[1].x, yOffset + (points[1].y - originY) * yRatios[1] + originY + spacing],\n        ['L', nextPoints[1].x, yOffset + (nextPoints[2].y - originY) * yRatiosNext[1] + originY + spacing],\n        ['L', nextPoints[0].x, yOffset + originY + spacing],\n        ['Z']\n      );\n    } else {\n      path.push(\n        ['M', points[0].x, yOffset + (points[0].y - originY) * yRatios[0] + originY],\n        ['L', points[1].x, yOffset + originY],\n        ['L', points[2].x, yOffset + originY],\n        ['L', points[3].x, yOffset + (points[3].y - originY) * yRatios[0] + originY],\n        ['Z']\n      );\n      path.push(\n        ['M', points[0].x, yOffset + 0.002 + originY],\n        ['L', points[1].x, yOffset + 0.002 + (points[1].y - originY) * yRatios[1] + originY],\n        ['L', points[2].x, yOffset + 0.002 + (points[2].y - originY) * yRatios[1] + originY],\n        ['L', points[3].x, yOffset + 0.002 + originY],\n        ['Z']\n      );\n    }\n  } else {\n    // 标准漏斗\n    if (!isNil(nextPoints)) {\n      path.push(\n        ['M', points[0].x, points[0].y],\n        ['L', points[1].x, points[1].y],\n        ['L', nextPoints[1].x, nextPoints[1].y],\n        ['L', nextPoints[0].x, nextPoints[0].y],\n        ['Z']\n      );\n    } else {\n      path.push(\n        ['M', points[0].x, points[0].y],\n        ['L', points[1].x, points[1].y],\n        ['L', points[2].x, points[2].y],\n        ['L', points[3].x, points[3].y],\n        ['Z']\n      );\n    }\n  }\n\n  return path;\n}\n\nregisterShape('interval', 'funnel-basic-rect', {\n  getPoints(pointInfo: ShapePoint) {\n    pointInfo.size = pointInfo.size * 1.8; // 调整面积\n    return _getRectPoints(pointInfo);\n  },\n  draw(cfg: ShapeInfo, container: IGroup) {\n    const style = getStyle(cfg, false, true);\n    const compare = get(cfg, 'data.__compare__');\n    const path = this.parsePath(_getFunnelPath(cfg, compare));\n\n    return container.addShape('path', {\n      name: 'interval',\n      attrs: {\n        ...style,\n        path,\n      },\n      ['__compare__']: compare,\n    });\n  },\n  getMarker(markerCfg: ShapeMarkerCfg) {\n    const { color } = markerCfg;\n    return {\n      symbol: 'square',\n      style: {\n        r: 4,\n        fill: color,\n      },\n    };\n  },\n});\n","import { get } from '@antv/util';\nimport { IGroup } from '@antv/g-canvas';\nimport { registerShape } from '@antv/g2';\nimport { ShapeMarkerCfg, ShapeInfo } from '@antv/g2/lib/interface';\nimport { getStyle } from '@antv/g2/lib/geometry/shape/util/get-style';\n\nfunction lerp(a, b, factor) {\n  return (1 - factor) * a + factor * b;\n}\n\n// 根据矩形关键点绘制 path\nfunction _getRectPath(points, { reverse, ratioUpper, ratioLower }) {\n  const path = [];\n  const firstPoint = points[0];\n\n  const originX = (points[1].x + points[2].x) / 2;\n  const factorTop = 1.2;\n  const factorBottom = 0.6;\n\n  if (reverse) {\n    const tmp = ratioLower;\n    ratioLower = ratioUpper;\n    ratioUpper = tmp;\n  }\n\n  const firstPointX = (firstPoint.x - originX) * lerp(factorBottom, factorTop, ratioLower) + originX;\n  path.push(['M', firstPointX, firstPoint.y]);\n\n  for (let i = 1, len = points.length; i < len; i++) {\n    let pointX = points[i].x;\n    switch (i) {\n      case 1:\n      case 2:\n        pointX = (pointX - originX) * lerp(factorBottom, factorTop, ratioUpper) + originX;\n        break;\n\n      case 3:\n        pointX = (pointX - originX) * lerp(factorBottom, factorTop, ratioLower) + originX;\n        break;\n    }\n    path.push(['L', pointX, points[i].y]);\n  }\n  path.push(['L', firstPointX, firstPoint.y]); // 需要闭合\n  path.push(['z']);\n  return path;\n}\n\nregisterShape('interval', 'funnel-dynamic-rect', {\n  draw(cfg: ShapeInfo, container: IGroup) {\n    const style = getStyle(cfg, false, true);\n    const custom = get(cfg, 'data.__custom__');\n    const path = this.parsePath(_getRectPath(cfg.points, custom));\n\n    return container.addShape('path', {\n      attrs: {\n        ...style,\n        path,\n      },\n    });\n  },\n\n  getMarker(markerCfg: ShapeMarkerCfg) {\n    const { color, isInPolar } = markerCfg;\n    return {\n      symbol: isInPolar ? 'circle' : 'square',\n      style: {\n        r: isInPolar ? 4.5 : 4,\n        fill: color,\n      },\n    };\n  },\n});\n","import { transform } from '@antv/matrix-util';\nimport { registerAnimation } from '@antv/g2';\n\nfunction funnelScaleInX(shape, animateCfg) {\n  const { duration = 200, delay, easing, callback, reverse } = animateCfg || {};\n\n  const bbox = shape.getBBox();\n  const originX = reverse ? bbox.maxX : bbox.minX;\n  const originY = (bbox.minY + bbox.maxY) / 2;\n\n  const clip = shape.setClip({\n    type: 'rect',\n    attrs: {\n      x: bbox.x,\n      y: bbox.y,\n      width: bbox.width,\n      height: bbox.height,\n    },\n  });\n  const clipTargetAttrs = {\n    matrix: [1, 0, 0, 0, 1, 0, 0, 0, 1],\n  };\n  clip.setMatrix(\n    transform(clip.getMatrix(), [\n      ['t', -originX, -originY],\n      ['s', 0, 1],\n      ['t', originX, originY],\n    ])\n  );\n\n  const shapeTargetAttrs = {\n    fillOpacity: shape.attr('fillOpacity'),\n    strokeOpacity: shape.attr('strokeOpacity'),\n    opacity: shape.attr('opacity'),\n  };\n  shape.attr({\n    fillOpacity: 0,\n    strokeOpacity: 0,\n    opacity: 0,\n  });\n\n  clip.animate(clipTargetAttrs, {\n    duration: 200,\n    easing,\n    callback() {\n      shape.setClip(null);\n      clip.remove();\n    },\n    delay,\n  });\n\n  shape.animate(shapeTargetAttrs, { duration, easing, delay });\n\n  callback && setTimeout(() => callback(shape), duration + delay);\n}\n\nfunnelScaleInX.animationName = 'funnelScaleInX';\nregisterAnimation('funnelScaleInX', funnelScaleInX);\n","import { transform } from '@antv/matrix-util';\nimport { registerAnimation } from '@antv/g2';\n\nfunction funnelScaleInY(shape, animateCfg) {\n  const { duration = 200, delay, easing, callback, reverse } = animateCfg || {};\n\n  const bbox = shape.getBBox();\n  const originX = (bbox.minX + bbox.maxX) / 2;\n  const originY = reverse ? bbox.maxY : bbox.minY;\n\n  const clip = shape.setClip({\n    type: 'rect',\n    attrs: {\n      x: bbox.x,\n      y: bbox.y,\n      width: bbox.width,\n      height: bbox.height,\n    },\n  });\n  const clipTargetAttrs = {\n    matrix: [1, 0, 0, 0, 1, 0, 0, 0, 1],\n  };\n  clip.setMatrix(\n    transform(clip.getMatrix(), [\n      ['t', -originX, -originY],\n      ['s', 1, 0],\n      ['t', originX, originY],\n    ])\n  );\n\n  const shapeTargetAttrs = {\n    fillOpacity: shape.attr('fillOpacity'),\n    strokeOpacity: shape.attr('strokeOpacity'),\n    opacity: shape.attr('opacity'),\n  };\n  shape.attr({\n    fillOpacity: 0,\n    strokeOpacity: 0,\n    opacity: 0,\n  });\n\n  clip.animate(clipTargetAttrs, {\n    duration: 200,\n    easing,\n    callback() {\n      shape.setClip(null);\n      clip.remove();\n    },\n    delay,\n  });\n\n  shape.animate(shapeTargetAttrs, { duration, easing, delay });\n\n  callback && setTimeout(() => callback(shape), duration + delay);\n}\n\nfunnelScaleInY.animationName = 'funnelScaleInY';\nregisterAnimation('funnelScaleInY', funnelScaleInY);\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport StackedRoseLayer, { StackedRoseViewConfig } from './layer';\n\nexport interface StackedRoseConfig extends StackedRoseViewConfig, PlotConfig {}\n\nexport default class StackedRose extends BasePlot<StackedRoseConfig> {\n  public static getDefaultOptions: typeof StackedRoseLayer.getDefaultOptions = StackedRoseLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'stackedRose';\n    super.createLayers(layerProps);\n  }\n}\n","import { deepMix } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport RoseLayer, { RoseViewConfig } from '../rose/layer';\n\nexport interface StackedRoseViewConfig extends RoseViewConfig {\n  stackField: string;\n}\n\nexport interface StackedRoseLayerConfig extends StackedRoseViewConfig, LayerConfig {}\n\nexport default class StackedRoseLayer<T extends StackedRoseLayerConfig = StackedRoseLayerConfig> extends RoseLayer<T> {\n  public static getDefaultOptions() {\n    return deepMix({}, super.getDefaultOptions(), {\n      xAxis: {\n        visible: true,\n        line: {\n          visible: false,\n        },\n        tickLine: {\n          visible: false,\n        },\n        grid: {\n          visible: true,\n          alignTick: false,\n          style: {\n            lineWidth: 0.5,\n          },\n        },\n        label: {\n          offset: 5,\n          autoRotate: true,\n        },\n      },\n      yAxis: {\n        visible: false,\n      },\n    });\n  }\n\n  public type: string = 'stackedRose';\n\n  protected adjustRoseAdjust() {\n    return [\n      {\n        type: 'stack',\n      },\n    ];\n  }\n\n  protected geometryTooltip() {\n    this.rose.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      this.rose.tooltip.fields = tooltipOptions.fields;\n    }\n    if (tooltipOptions.formatter) {\n      this.rose.tooltip.callback = tooltipOptions.formatter;\n      if (!tooltipOptions.fields) {\n        this.rose.tooltip.fields = [this.options.radiusField, this.options.categoryField, this.options.stackField];\n      }\n    }\n  }\n}\n\nregisterPlotType('stackedRose', StackedRoseLayer);\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport GroupedRoseLayer, { GroupedRoseViewConfig } from './layer';\n\nexport interface GroupedRoseConfig extends GroupedRoseViewConfig, PlotConfig {}\n\nexport default class GroupedRose extends BasePlot<GroupedRoseConfig> {\n  public static getDefaultOptions: typeof GroupedRoseLayer.getDefaultOptions = GroupedRoseLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'groupedRose';\n    super.createLayers(layerProps);\n  }\n}\n","import { deepMix } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport RoseLayer, { RoseViewConfig } from '../rose/layer';\n\nexport interface GroupedRoseViewConfig extends RoseViewConfig {\n  groupField: string;\n}\n\nexport interface GroupedRoseLayerConfig extends GroupedRoseViewConfig, LayerConfig {}\n\nexport default class GroupedRoseLayer<T extends GroupedRoseLayerConfig = GroupedRoseLayerConfig> extends RoseLayer<T> {\n  public static getDefaultOptions() {\n    return deepMix({}, super.getDefaultOptions(), {\n      xAxis: {\n        visible: true,\n        line: {\n          visible: false,\n        },\n        tickLine: {\n          visible: false,\n        },\n        grid: {\n          visible: true,\n          alignTick: false,\n          style: {\n            lineWidth: 0.5,\n          },\n        },\n        label: {\n          offset: 5,\n          autoRotate: true,\n        },\n      },\n      yAxis: {\n        visible: false,\n      },\n    });\n  }\n\n  public type: string = 'groupedRose';\n\n  protected adjustRoseAdjust() {\n    return [\n      {\n        type: 'dodge',\n        marginRatio: 1,\n      },\n    ];\n  }\n\n  protected geometryTooltip() {\n    this.rose.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      this.rose.tooltip.fields = tooltipOptions.fields;\n    }\n    if (tooltipOptions.formatter) {\n      this.rose.tooltip.callback = tooltipOptions.formatter;\n      if (!tooltipOptions.fields) {\n        this.rose.tooltip.fields = [this.options.radiusField, this.options.categoryField, this.options.groupField];\n      }\n    }\n  }\n}\n\nregisterPlotType('groupedRose', GroupedRoseLayer);\n","/**\n * Create By Bruce Too\n * On 2020-02-14\n */\nimport { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport RadarLayer, { RadarViewConfig } from './layer';\n\nexport interface RadarConfig extends RadarViewConfig, PlotConfig {}\n\nexport default class Radar extends BasePlot<RadarConfig> {\n  public static getDefaultOptions: typeof RadarLayer.getDefaultOptions = RadarLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'radar';\n    super.createLayers(layerProps);\n  }\n}\n","/**\n * Create By Bruce Too\n * On 2020-02-14\n */\nimport { deepMix, has } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport ViewLayer, { ViewConfig } from '../../base/view-layer';\nimport { getComponent } from '../../components/factory';\nimport { getGeom } from '../../geoms/factory';\nimport { extractScale } from '../../util/scale';\nimport * as EventParser from './event';\nimport { IValueAxis, ICatAxis, GraphicStyle, LineStyle } from '../../interface/config';\nimport './theme';\n\nexport interface RadarViewConfig extends ViewConfig {\n  /** 角度字段 */\n  angleField: string;\n  /** 径向字段 */\n  radiusField: string;\n  /** 分组字段 */\n  seriesField?: string;\n  /** 是否平滑 */\n  smooth?: boolean;\n  /** 折线图形样式 */\n  line?: {\n    visible?: boolean;\n    size?: number;\n    color?: string;\n    style?: LineStyle | ((...args: any[]) => LineStyle);\n  };\n  /** 数据点图形样式 */\n  point?: {\n    visible?: boolean;\n    shape?: string;\n    size?: number;\n    color?: string;\n    style?: GraphicStyle | ((...args: any[]) => GraphicStyle);\n  };\n  /** area图形样式 */\n  area?: {\n    visible?: boolean;\n    style?: GraphicStyle | ((...args: any[]) => GraphicStyle);\n  };\n  /** 角度轴配置 */\n  angleAxis?: ICatAxis;\n  /** 径向轴配置 */\n  radiusAxis?: IValueAxis;\n  /** 雷达图半径 */\n  radius?: number;\n}\n\nexport interface RadarLayerConfig extends RadarViewConfig, LayerConfig {}\n\nconst GEOM_MAP = {\n  area: 'area',\n  line: 'line',\n  point: 'point',\n};\n\nexport default class RadarLayer extends ViewLayer<RadarLayerConfig> {\n  public static getDefaultOptions(): any {\n    return deepMix({}, super.getDefaultOptions(), {\n      width: 400,\n      height: 400,\n      title: {\n        visible: false,\n      },\n      description: {\n        visible: false,\n      },\n      forceFit: true,\n      padding: 'auto',\n      radius: 0.8,\n      smooth: false,\n      line: {\n        visible: true,\n        size: 2,\n        style: {\n          opacity: 1,\n        },\n      },\n      area: {\n        visible: true,\n        style: {\n          opacity: 0.25,\n        },\n      },\n      point: {\n        visible: false,\n        size: 4,\n        shape: 'point',\n        style: {\n          opacity: 1,\n        },\n      },\n      angleAxis: {\n        visible: true,\n        autoRotateTitle: true,\n        line: {\n          visible: false,\n        },\n        tickLine: {\n          visible: false,\n        },\n        grid: {\n          visible: true,\n          line: {\n            style: {\n              lineDash: [0, 0],\n            },\n          },\n        },\n        label: {\n          visible: true,\n          offset: 16,\n          autoRotate: true,\n          autoHide: true,\n        },\n        title: {\n          visible: false,\n        },\n      },\n      radiusAxis: {\n        min: 0,\n        visible: true,\n        /** G2 4.0 默认 nice 不生效，需要手动添加 */\n        nice: true,\n        autoRotateTitle: true,\n        line: {\n          visible: true,\n        },\n        tickLine: {\n          visible: true,\n        },\n        gridType: 'line',\n        grid: {\n          visible: true,\n          line: {\n            style: {\n              lineDash: [0, 0],\n            },\n          },\n        },\n        label: {\n          visible: true,\n          autoHide: true,\n          autoRotate: true,\n        },\n        title: {\n          visible: false,\n        },\n      },\n      label: {\n        visible: false,\n        type: 'point',\n      },\n      legend: {\n        visible: true,\n        position: 'left-top',\n      },\n      tooltip: {\n        visible: true,\n        shared: true,\n        showCrosshairs: false,\n      },\n    });\n  }\n  public type: string = 'radar';\n  public line: any;\n  public point: any;\n  public area: any;\n  public baseElement: any;\n  public lineElement: any; // 保存line、area、point的配置项，用于后续的label、tooltip\n  public pointElement: any;\n  public areaElement: any;\n\n  public init() {\n    const props = this.options;\n    props.xField = props.angleField;\n    props.yField = props.radiusField;\n    super.init();\n  }\n\n  protected geometryParser(dim, type) {\n    return GEOM_MAP[type];\n  }\n\n  protected scale() {\n    const props = this.options;\n    const scales = {};\n    /** 配置x-scale */\n    scales[props.angleField] = {};\n    if (has(props, 'angleAxis')) {\n      extractScale(scales[props.angleField], props.angleAxis);\n    }\n    /** 配置y-scale */\n    scales[props.radiusField] = {};\n    if (has(props, 'radiusAxis')) {\n      extractScale(scales[props.radiusField], props.radiusAxis);\n    }\n    this.setConfig('scales', scales);\n    super.scale();\n  }\n\n  protected coord() {\n    const props = this.options;\n    const coordConfig: any = {\n      type: 'polar',\n      cfg: {\n        radius: props.radius,\n      },\n    };\n    this.setConfig('coordinate', coordConfig);\n  }\n\n  protected axis(): void {\n    const props = this.options;\n    const xAxis_parser = getComponent('axis', {\n      plot: this,\n      dim: 'angle',\n    });\n    const yAxis_parser = getComponent('axis', {\n      plot: this,\n      dim: 'radius',\n    });\n    const axesConfig = {};\n    axesConfig[props.angleField] = xAxis_parser;\n    axesConfig[props.radiusField] = yAxis_parser;\n    /** 存储坐标轴配置项到config */\n    this.setConfig('axes', axesConfig);\n  }\n\n  protected addGeometry() {\n    const props = this.options;\n    /** 配置面积 */\n    if (props.area.visible) {\n      const area = getGeom('area', 'main', {\n        plot: this,\n      });\n      this.setConfig('geometry', area);\n      this.area = area;\n    }\n    /** 配置线 */\n    if (props.line && props.line.visible) {\n      const line = getGeom('line', 'guide', {\n        plot: this,\n      });\n      this.setConfig('geometry', line);\n      this.line = line;\n    }\n    /** 配置点 */\n    if (props.point && props.point.visible) {\n      const point = getGeom('point', 'guide', {\n        plot: this,\n      });\n      this.setConfig('geometry', point);\n      this.point = point;\n    }\n    if (props.label) {\n      this.label();\n    }\n    if (props.tooltip && (props.tooltip.fields || props.tooltip.formatter)) {\n      this.geometryTooltip();\n    }\n  }\n\n  protected geometryTooltip() {\n    const geomConfig = this.line ? this.line : this.area;\n    geomConfig.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      geomConfig.tooltip.fields = tooltipOptions.fields;\n    }\n    if (tooltipOptions.formatter) {\n      geomConfig.tooltip.callback = tooltipOptions.formatter;\n      if (!tooltipOptions.fields) {\n        geomConfig.tooltip.fields = [this.options.angleField, this.options.radiusField];\n      }\n      if (this.options.seriesField) {\n        geomConfig.tooltip.fields.push(this.options.seriesField);\n      }\n    }\n  }\n\n  protected label() {\n    const props = this.options;\n\n    if (props.label.visible === false) {\n      if (this.point) {\n        this.point.label = false;\n      }\n      if (this.line) {\n        this.line.label = false;\n      }\n      if (this.area) {\n        this.area.label = false;\n      }\n      return;\n    }\n\n    // @Todo 雷达图标签布局算法后续补充\n    const label = getComponent('label', {\n      fields: [props.radiusField],\n      cfg: {\n        type: 'polar',\n        autoRotate: false,\n      },\n      plot: this,\n      ...props.label,\n    });\n\n    if (this.point) {\n      this.point.label = label;\n    } else if (this.line) {\n      this.line.label = label;\n    } else if (this.area) {\n      this.area.label = label;\n    }\n  }\n\n  protected annotation() {\n    return;\n  }\n\n  protected animation() {\n    super.animation();\n    const props = this.options;\n    if (props.animation === false) {\n      // 关闭动画\n      if (this.area) this.area.animate = false;\n      if (this.line) this.line.animate = false;\n      if (this.point) this.point.animate = false;\n    }\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n}\n\nregisterPlotType('radar', RadarLayer);\n","/**\n * Create By Bruce Too\n * On 2020-02-14\n */\nimport { assign } from '@antv/util';\nimport { getEventMap, EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst componentMap = {\n  area: 'area',\n  line: 'line',\n  point: 'point',\n};\n\nconst SHAPE_EVENT_MAP: IEventmap = getEventMap(componentMap);\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","/**\n * Create By Bruce Too\n * On 2020-02-14\n */\nimport { registerTheme } from '../../theme';\n\nconst AREA_ACTIVE_STYLE = (style) => {\n  const opacity = style.opacity || 1;\n  return { opacity };\n};\n\nconst AREA_DISABLE_STYLE = (style) => {\n  const opacity = style.opacity || 1;\n  return { opacity: opacity * 0.5 };\n};\n\nconst LINE_ACTIVE_STYLE = (style) => {\n  const opacity = style.opacity || 1;\n  return { opacity };\n};\n\nconst LINE_DISABLE_STYLE = (style) => {\n  const opacity = style.opacity || 1;\n  return { opacity: opacity * 0.5 };\n};\n\nconst LINE_SELECTED_STYLE = (style) => {\n  const lineWidth = style.lineWidth || 1;\n  return { lineWidth: lineWidth + 2 };\n};\n\nconst POINT_ACTIVE_STYLE = (style) => {\n  const color = style.fill || style.fillStyle;\n  const radius = style.size || style.radius;\n\n  return {\n    radius: radius + 1,\n    shadowBlur: radius,\n    shadowColor: color,\n    stroke: color,\n    strokeOpacity: 1,\n    lineWidth: 1,\n  };\n};\n\nconst POINT_SELECTED_STYLE = (style) => {\n  const color = style.fill || style.fillStyle;\n  const radius = style.size || style.radius;\n\n  return {\n    radius: radius + 2,\n    shadowBlur: radius,\n    shadowColor: color,\n    stroke: color,\n    strokeOpacity: 1,\n    lineWidth: 2,\n  };\n};\n\nconst POINT_DISABLED_STYLE = (style) => {\n  const opacity = style.opacity || style.fillOpacity || 1;\n  return { opacity: opacity * 0.5 };\n};\n\nregisterTheme('radar', {\n  areaStyle: {\n    normal: {},\n    active: AREA_ACTIVE_STYLE,\n    disable: AREA_DISABLE_STYLE,\n    selected: { lineWidth: 1, stroke: '#333333' },\n  },\n  lineStyle: {\n    normal: {},\n    active: LINE_ACTIVE_STYLE,\n    disable: LINE_DISABLE_STYLE,\n    selected: LINE_SELECTED_STYLE,\n  },\n  pointStyle: {\n    normal: {},\n    active: POINT_ACTIVE_STYLE,\n    disable: POINT_DISABLED_STYLE,\n    selected: POINT_SELECTED_STYLE,\n  },\n});\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport LiquidLayer, { LiquidViewConfig } from './layer';\n\nexport interface LiquidConfig extends LiquidViewConfig, PlotConfig {}\n\nexport default class Liquid extends BasePlot<LiquidConfig> {\n  public static getDefaultOptions: typeof LiquidLayer.getDefaultOptions = LiquidLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'liquid';\n    super.createLayers(layerProps);\n  }\n\n  public changeValue(value: number, all: boolean = false) {\n    if (all) {\n      this.eachLayer((layer) => {\n        if (layer instanceof LiquidLayer) {\n          layer.changeValue(value);\n        }\n      });\n    } else {\n      const layer: any = this.layers[0];\n      if (layer instanceof LiquidLayer) {\n        layer.changeValue(value);\n      }\n    }\n  }\n}\n","import { deepMix, isFunction, get, forIn, isNumber } from '@antv/util';\nimport BBox from '../../util/bbox';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport ViewLayer, { ViewConfig } from '../../base/view-layer';\nimport { getGeom } from '../../geoms/factory';\nimport { extractScale } from '../../util/scale';\nimport { DataItem, TextStyle } from '../../interface/config';\nimport { rgb2arr } from '../../util/color';\nimport * as EventParser from './event';\nimport './geometry/shape/liquid';\nimport './animation/liquid-move-in';\n\nconst G2_GEOM_MAP = {\n  column: 'interval',\n};\n\nconst PLOT_GEOM_MAP = {\n  interval: 'liquid',\n};\n\nexport interface LiquidStyle {}\n\nexport interface LiquidViewConfig extends Partial<ViewConfig> {\n  statistic?: {\n    visible?: boolean;\n    adjustColor?: boolean;\n    formatter?: (value) => string;\n    style?: TextStyle;\n  };\n  min: number;\n  max: number;\n  value: number;\n  liquidStyle?: LiquidStyle | ((...args: any[]) => LiquidStyle);\n}\n\nexport interface LiquidLayerConfig extends LiquidViewConfig, LayerConfig {\n  data: DataItem[];\n}\n\nexport default class LiquidLayer<T extends LiquidLayerConfig = LiquidLayerConfig> extends ViewLayer<T> {\n  public static getDefaultOptions(): Partial<LiquidViewConfig> {\n    const cfg: Partial<LiquidViewConfig> = {\n      padding: [0, 0, 0, 0],\n      animation: {\n        factor: 0.4,\n        easing: 'easeExpOut',\n        duration: 800,\n      },\n      liquidStyle: {\n        lineWidth: 2,\n      },\n      color: '#6a99f9',\n      interactions: [],\n      statistic: {\n        visible: true,\n      },\n    };\n    return deepMix({}, super.getDefaultOptions(), cfg);\n  }\n\n  public liquid: any;\n  public type: string = 'liquid';\n  private shouldFadeInAnnotation: boolean = true;\n\n  public beforeInit() {\n    const { min, max, value } = this.options;\n    if (!isNumber(min)) {\n      throw new Error('The min value of Liquid is required, and the type of min must be Number.');\n    }\n    if (!isNumber(max)) {\n      throw new Error('The max value of Liquid is required, and the type of max must be Number.');\n    }\n    if (!isNumber(value)) {\n      throw new Error('The value of Liquid is required, and the type of value must be Number.');\n    }\n  }\n\n  public init() {\n    this.options.data = [{}];\n    super.init();\n  }\n\n  protected coord() {\n    return;\n  }\n\n  protected scale() {\n    const props = this.options;\n    const { min, max } = props;\n    const scales = {\n      value: {},\n    };\n    extractScale(scales.value, {\n      min: Math.min(min, max),\n      max: Math.max(min, max),\n    });\n    // @ts-ignore\n    this.setConfig('scales', scales);\n    super.scale();\n  }\n\n  protected axis(): void {\n    this.setConfig('axes', false);\n  }\n\n  protected adjustLiquid(liquid) {\n    const { options: props } = this;\n\n    liquid.shape = {\n      values: ['liquid-fill-gauge'],\n    };\n\n    liquid.tooltip = false;\n\n    let liquidStyle = props.liquidStyle;\n    if (isFunction(liquidStyle)) liquidStyle = liquidStyle();\n    if (liquidStyle) {\n      liquid.style = liquidStyle;\n    }\n  }\n\n  protected addGeometry(): void {\n    const liquid = getGeom('interval', 'main', {\n      positionFields: [1, 'value'],\n      plot: this,\n    });\n    this.adjustLiquid(liquid);\n    this.liquid = liquid;\n    this.setConfig('geometry', liquid);\n  }\n\n  protected animation() {\n    const props = this.options;\n    if (props.animation === false) {\n      /** 关闭动画 */\n      this.liquid.animate = false;\n    } else {\n      const factor = get(props, 'animation.factor');\n      const easing = get(props, 'animation.easing');\n      const duration = get(props, 'animation.duration');\n      this.liquid.animate = {\n        appear: {\n          animation: 'liquidMoveIn',\n          factor,\n          easing,\n          duration,\n        },\n      };\n    }\n  }\n\n  protected geometryParser(dim: string, type: string): string {\n    if (dim === 'g2') {\n      return G2_GEOM_MAP[type];\n    }\n    return PLOT_GEOM_MAP[type];\n  }\n\n  protected annotation() {\n    const annotationConfigs = [];\n\n    const statisticConfig = this.extractStatistic();\n    annotationConfigs.push(statisticConfig);\n\n    this.setConfig('annotations', annotationConfigs);\n  }\n\n  protected extractStatistic() {\n    const props = this.options;\n    const statistic: any = props.statistic || {};\n\n    let content;\n    if (isFunction(statistic.formatter)) {\n      content = statistic.formatter(props.value);\n    } else {\n      content = `${props.value}`;\n    }\n\n    let fontSize;\n    let shadowBlur;\n    if (content) {\n      const contentWidth = Math.min(this.width, this.height);\n      fontSize = (contentWidth / content.length) * 0.5;\n      shadowBlur = Math.max(1, Math.ceil(0.025 * fontSize));\n    }\n    let opacity;\n    if (statistic.visible === false) {\n      return;\n    }\n\n    const statisticConfig = deepMix(\n      {\n        style: {\n          fontSize,\n          shadowBlur,\n        },\n      },\n      statistic,\n      {\n        top: true,\n        content,\n        type: 'text',\n        position: ['50%', '50%'],\n        style: {\n          opacity,\n          fill: 'transparent',\n          shadowColor: 'transparent',\n          textAlign: 'center',\n        },\n      }\n    );\n    delete statisticConfig.visible;\n    delete statisticConfig.formatter;\n    delete statisticConfig.adjustColor;\n    return statisticConfig;\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n\n  public afterRender() {\n    if (this.options.statistic?.visible) {\n      this.fadeInAnnotation();\n    }\n    const { options } = this;\n    const padding = options.padding ? options.padding : this.config.theme.padding;\n    /** defaultState */\n    if (options.defaultState && padding !== 'auto') {\n      this.stateController.defaultStates(options.defaultState);\n    }\n    /** autopadding */\n    if (padding === 'auto') {\n      this.paddingController.processAutoPadding();\n    }\n  }\n\n  protected processData(): DataItem[] | undefined {\n    const props = this.options;\n    return [{ _: '_', value: props.value }];\n  }\n\n  public changeValue(value: number): void {\n    const props = this.options;\n    props.value = value;\n    this.changeData([]);\n  }\n\n  protected fadeInAnnotation() {\n    const props = this.options;\n    const textShape = this.view.foregroundGroup.findAll((el) => {\n      return el.get('name') === 'annotation-text';\n    })[0];\n    const animation: any = props.animation || {};\n    const colorStyle = this.calcAnnotationColorStyle();\n    if (this.shouldFadeInAnnotation) {\n      textShape.animate(colorStyle, animation.duration * Math.min(1, 1.5 * animation.factor), null, () => {\n        this.shouldFadeInAnnotation = false;\n      });\n    } else {\n      forIn(colorStyle, (v, k) => textShape.attr(k, v));\n    }\n  }\n\n  protected calcAnnotationColorStyle() {\n    const { options: props } = this;\n\n    const lightColorStyle = { fill: '#f6f6f6', shadowColor: 'black' };\n    const darkColorStyle = { fill: '#303030', shadowColor: 'white' };\n\n    if (get(props, 'statistic.adjustColor') === false) {\n      return {\n        fill: get(props, 'statistic.style.fill', darkColorStyle.fill),\n        shadowColor: get(props, 'statistic.style.shadowColor', darkColorStyle.shadowColor),\n      };\n    }\n\n    let { min, max } = props;\n    const { value } = props;\n    min = Math.min(min, max);\n    max = Math.max(min, max);\n    let percent;\n    if (min == max) {\n      percent = 1;\n    } else {\n      percent = (value - min) / (max - min);\n    }\n\n    if (percent > 0.55) {\n      const waveColor = this.options.color as string;\n      const waveOpacity = 0.8;\n      const rgb = rgb2arr(waveColor);\n      const gray = Math.round(rgb[0] * 0.299 + rgb[1] * 0.587 + rgb[2] * 0.114) / waveOpacity;\n      return gray < 156 ? lightColorStyle : darkColorStyle;\n    }\n\n    return darkColorStyle;\n  }\n\n  public updateConfig(cfg: Partial<T>): void {\n    super.updateConfig(cfg);\n    this.shouldFadeInAnnotation = true;\n  }\n\n  protected getViewRange() {\n    const viewRange = super.getViewRange();\n    const liquidStyle: any = this.options.liquidStyle;\n    const strokeWidth = liquidStyle.lineWidth ? liquidStyle.lineWidth : 2;\n    const { minX, minY, width, height } = viewRange;\n    const size = Math.min(width, height) - strokeWidth * 2;\n    const cx = minX + width / 2;\n    const cy = minY + height / 2;\n    const x = cx - size / 2;\n    const y = cy - size / 2;\n    return new BBox(x, y, size, size);\n  }\n}\n\nregisterPlotType('liquid', LiquidLayer);\n","import { assign } from '@antv/util';\nimport { getEventMap, EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst componentMap = {\n  liquid: 'intervl',\n  statistic: 'annotation-text',\n};\n\nconst SHAPE_EVENT_MAP: IEventmap = getEventMap(componentMap);\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","import { registerShape } from '../../../../dependents';\nimport { isArray, each, isNumber, mix } from '@antv/util';\nimport { getGlobalTheme } from '../../../../theme';\nimport { transform } from '../../../../util/g-util';\n\nconst globalTheme = getGlobalTheme();\n\nconst ShapeUtil = {\n  splitPoints(obj) {\n    const points = [];\n    const x = obj.x;\n    let y = obj.y;\n    y = isArray(y) ? y : [y];\n    each(y, (yItem, index) => {\n      const point = {\n        x: isArray(x) ? x[index] : x,\n        y: yItem,\n      };\n      points.push(point);\n    });\n    return points;\n  },\n  addFillAttrs(attrs, cfg) {\n    if (cfg.color && !attrs.fill) {\n      attrs.fill = cfg.color;\n    }\n    if (isNumber(cfg.opacity)) {\n      attrs.opacity = attrs.fillOpacity = cfg.opacity;\n    }\n  },\n  addStrokeAttrs(attrs, cfg) {\n    if (cfg.color && !attrs.stroke) {\n      attrs.stroke = cfg.color;\n    }\n    if (isNumber(cfg.opacity)) {\n      attrs.opacity = attrs.strokeOpacity = cfg.opacity;\n    }\n  },\n};\n\nconst ValueUtil = {\n  lerp(a, b, factor) {\n    return (1 - factor) * a + factor * b;\n  },\n};\n\nconst getFillAttrs = (cfg) => {\n  const defaultAttrs = {\n    lineWidth: 0,\n    fill: globalTheme.color,\n    fillOpacity: 0.85,\n  };\n  const attrs = mix({}, defaultAttrs, cfg.style);\n  ShapeUtil.addFillAttrs(attrs, cfg);\n  if (cfg.color && !attrs.stroke) {\n    attrs.stroke = attrs.stroke || cfg.color;\n  }\n  return attrs;\n};\n\nconst getLineAttrs = (cfg) => {\n  const defaultAttrs = {\n    fill: '#fff',\n    stroke: globalTheme.color,\n    fillOpacity: 0,\n    lineWidth: 2,\n  };\n  const attrs = mix({}, defaultAttrs, cfg.style);\n  ShapeUtil.addStrokeAttrs(attrs, cfg);\n  return attrs;\n};\n\n/**\n * 用贝塞尔曲线模拟正弦波\n * Using Bezier curves to fit sine wave.\n * There is 4 control points for each curve of wave,\n * which is at 1/4 wave length of the sine wave.\n *\n * The control points for a wave from (a) to (d) are a-b-c-d:\n *          c *----* d\n *     b *\n *       |\n * ... a * ..................\n *\n * whose positions are a: (0, 0), b: (0.5, 0.5), c: (1, 1), d: (PI / 2, 1)\n *\n * @param {number} x          x position of the left-most point (a)\n * @param {number} stage      0-3, stating which part of the wave it is\n * @param {number} waveLength wave length of the sine wave\n * @param {number} amplitude  wave amplitude\n * @return {Array} 正弦片段曲线\n */\nfunction getWaterWavePositions(x, stage, waveLength, amplitude) {\n  if (stage === 0) {\n    return [\n      [x + ((1 / 2) * waveLength) / Math.PI / 2, amplitude / 2],\n      [x + ((1 / 2) * waveLength) / Math.PI, amplitude],\n      [x + waveLength / 4, amplitude],\n    ];\n  }\n  if (stage === 1) {\n    return [\n      [x + (((1 / 2) * waveLength) / Math.PI / 2) * (Math.PI - 2), amplitude],\n      [x + (((1 / 2) * waveLength) / Math.PI / 2) * (Math.PI - 1), amplitude / 2],\n      [x + waveLength / 4, 0],\n    ];\n  }\n  if (stage === 2) {\n    return [\n      [x + ((1 / 2) * waveLength) / Math.PI / 2, -amplitude / 2],\n      [x + ((1 / 2) * waveLength) / Math.PI, -amplitude],\n      [x + waveLength / 4, -amplitude],\n    ];\n  }\n  return [\n    [x + (((1 / 2) * waveLength) / Math.PI / 2) * (Math.PI - 2), -amplitude],\n    [x + (((1 / 2) * waveLength) / Math.PI / 2) * (Math.PI - 1), -amplitude / 2],\n    [x + waveLength / 4, 0],\n  ];\n}\n/**\n * 获取水波路径\n * @param  {number} radius          半径\n * @param  {number} waterLevel      水位\n * @param  {number} waveLength      波长\n * @param  {number} phase           相位\n * @param  {number} amplitude       震幅\n * @param  {number} cx              圆心x\n * @param  {number} cy              圆心y\n * @return {Array}  path            路径\n * @reference http://gitlab.alipay-inc.com/datavis/g6/blob/1.2.0/src/graph/utils/path.js#L135\n */\nfunction getWaterWavePath(radius, waterLevel, waveLength, phase, amplitude, cx, cy) {\n  const curves = Math.ceil(((2 * radius) / waveLength) * 4) * 2;\n  const path = [];\n  let _phase = phase;\n\n  // map phase to [-Math.PI * 2, 0]\n  while (_phase < -Math.PI * 2) {\n    _phase += Math.PI * 2;\n  }\n  while (_phase > 0) {\n    _phase -= Math.PI * 2;\n  }\n  _phase = (_phase / Math.PI / 2) * waveLength;\n\n  const left = cx - radius + _phase - radius * 2;\n  /**\n   * top-left corner as start point\n   *\n   * draws this point\n   *  |\n   * \\|/\n   *  ~~~~~~~~\n   *  |      |\n   *  +------+\n   */\n  path.push(['M', left, waterLevel]);\n\n  /**\n   * top wave\n   *\n   * ~~~~~~~~ <- draws this sine wave\n   * |      |\n   * +------+\n   */\n  let waveRight = 0;\n  for (let c = 0; c < curves; ++c) {\n    const stage = c % 4;\n    const pos = getWaterWavePositions((c * waveLength) / 4, stage, waveLength, amplitude);\n    path.push([\n      'C',\n      pos[0][0] + left,\n      -pos[0][1] + waterLevel,\n      pos[1][0] + left,\n      -pos[1][1] + waterLevel,\n      pos[2][0] + left,\n      -pos[2][1] + waterLevel,\n    ]);\n\n    if (c === curves - 1) {\n      waveRight = pos[2][0];\n    }\n  }\n\n  /**\n   * top-right corner\n   *\n   *                       ~~~~~~~~\n   * 3. draws this line -> |      | <- 1. draws this line\n   *                       +------+\n   *                          ^\n   *                          |\n   *                  2. draws this line\n   */\n  path.push(['L', waveRight + left, cy + radius]);\n  path.push(['L', left, cy + radius]);\n  path.push(['L', left, waterLevel]);\n  return path;\n}\n\n/**\n * 添加水波\n * @param {number} x           中心x\n * @param {number} y           中心y\n * @param {number} level       水位等级 0～1\n * @param {number} waveCount   水波数\n * @param {number} colors      色值\n * @param {number} group       图组\n * @param {number} clip        用于剪切的图形\n * @param {number} radius      绘制图形的高度\n */\nfunction addWaterWave(x, y, level, waveCount, color, group, clip, radius) {\n  const bbox = clip.getBBox();\n  const width = bbox.maxX - bbox.minX;\n  const height = bbox.maxY - bbox.minY;\n  const duration = 5000;\n  for (let i = 0; i < waveCount; i++) {\n    const factor = waveCount <= 1 ? 0 : i / (waveCount - 1);\n    const wave = group.addShape('path', {\n      attrs: {\n        path: getWaterWavePath(\n          radius,\n          bbox.minY + height * level,\n          width / 4,\n          0,\n          width / ValueUtil.lerp(56, 64, factor),\n          x,\n          y\n        ),\n        fill: color,\n        opacity: ValueUtil.lerp(0.6, 0.3, factor),\n      },\n    });\n    /*wave.setClip({\n      type:'circle',\n      attrs: clip.attrs\n    })*/\n    // FIXME wave animation error in svg\n    // if (Global.renderer === 'canvas') {\n    const matrix = transform([['t', width / 2, 0]]);\n    wave.animate(\n      { matrix },\n      {\n        duration: ValueUtil.lerp(duration, 0.7 * duration, factor),\n        repeat: true,\n      }\n    );\n    //}\n  }\n}\n\nregisterShape('interval', 'liquid-fill-gauge', {\n  draw(cfg: any, container) {\n    const cy = 0.5;\n    let minX = Infinity;\n    each(cfg.points, (p: any) => {\n      if (p.x < minX) {\n        minX = p.x;\n      }\n    });\n    const cx = 0.5;\n    const cp = this.parsePoint({ x: cx, y: cy });\n    const minP = this.parsePoint({ x: minX, y: 0.5 });\n    const xWidth = cp.x - minP.x;\n    const radius = Math.min(xWidth, minP.y);\n    const { fill } = getFillAttrs(cfg);\n    const waves = container.addGroup({\n      name: 'waves',\n      attrs: {\n        x: cp.x,\n        y: cp.y,\n      },\n    });\n    waves.setClip({\n      type: 'circle',\n      attrs: {\n        x: cp.x,\n        y: cp.y,\n        r: radius,\n      },\n    });\n    const clipCircle = waves.get('clipShape');\n    addWaterWave(\n      cp.x,\n      cp.y,\n      1 - cfg.points[1].y, // cfg.y / (2 * cp.y),\n      3,\n      fill,\n      waves,\n      clipCircle,\n      radius * 4\n    );\n    container.addShape('circle', {\n      name: 'wrap',\n      attrs: mix(getLineAttrs(cfg), {\n        x: cp.x,\n        y: cp.y,\n        r: radius,\n        fill: 'transparent',\n      }),\n    });\n    return waves[0];\n  },\n});\n","import { registerAnimation } from '../../../dependents';\nimport { get, clone } from '@antv/util';\nimport { transform } from '../../../util/g-util';\n\nfunction liquidMoveIn(shape, animateCfg) {\n  const container = shape.get('parent');\n  const box = container.getBBox();\n  const factor = Math.min(Math.max(0, get(animateCfg, 'factor', 0.5)), 1);\n  const delay = get(animateCfg, 'delay', 0);\n  const duration = get(animateCfg, 'duration', 800);\n  const { callback } = animateCfg;\n\n  const originX = (box.minX + box.maxX) / 2;\n  const originY = box.maxY;\n\n  const wrap = container.find((shape) => shape.get('name') == 'wrap');\n  const wrapTargetOpacity = wrap.attr('opacity');\n  wrap.attr('opacity', 0);\n  wrap.animate({ opacity: wrapTargetOpacity }, duration * factor, 'easeLinear', null, delay);\n  const waves = container.find((shape) => shape.get('name') == 'waves');\n  const wavesTargetMatrix = clone(waves.attr('matrix')) || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n  const transformMatrix = transform(wavesTargetMatrix, [\n    ['t', -originX, -originY],\n    ['s', 1, 0],\n    ['t', originX, originY],\n  ]);\n  waves.setMatrix(transformMatrix);\n  waves.animate(\n    { matrix: wavesTargetMatrix },\n    duration,\n    animateCfg.easing,\n    () => callback && callback(container, wrap, waves),\n    delay\n  );\n}\nliquidMoveIn.animationName = 'liquidMoveIn';\nregisterAnimation('liquidMoveIn', liquidMoveIn);\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport HistogramLayer, { HistogramViewConfig } from './layer';\n\nexport interface HistogramConfig extends HistogramViewConfig, PlotConfig {}\n\nexport default class Histogram extends BasePlot<HistogramConfig> {\n  public static getDefaultOptions: typeof HistogramLayer.getDefaultOptions = HistogramLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'histogram';\n    super.createLayers(layerProps);\n  }\n}\n","import { clone, sortBy, valuesOfKey, getRange, each, hasKey } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport { sturges } from '../../util/math';\nimport Column from '../column/layer';\nimport { ColumnViewConfig } from '../column/interface';\nimport { DataItem } from '../../interface/config';\n\nexport interface HistogramViewConfig extends ColumnViewConfig {\n  binField: string;\n  binWidth?: number;\n  binNumber?: number;\n}\n\nexport interface HistogramLayerConfig extends HistogramViewConfig, LayerConfig {}\n\nexport default class HistogramLayer extends Column<HistogramLayerConfig> {\n  public type: string = 'histogram';\n\n  public init() {\n    this.options.xField = 'range';\n    this.options.yField = 'count';\n    super.init();\n  }\n\n  protected processData(originData?: DataItem[]) {\n    const { binField, binWidth, binNumber } = this.options;\n    const originData_copy = clone(originData);\n    // 根据binField value对源数据进行排序\n    sortBy(originData_copy, binField);\n    // 获取源数据binField values的range\n    const values = valuesOfKey(originData_copy, binField);\n    const range = getRange(values);\n    const rangeWidth = range.max - range.min;\n    // 计算分箱，直方图分箱的计算基于binWidth，如配置了binNumber则将其转为binWidth进行计算\n    let _binWidth = binWidth;\n    if (!binWidth && binNumber) {\n      _binWidth = rangeWidth / binNumber;\n    }\n    // 当binWidth和binNumber都没有指定的情况，采用Sturges formula自动生成binWidth\n    if (!binWidth && !binNumber) {\n      const _defaultBinNumber = sturges(values);\n      _binWidth = rangeWidth / _defaultBinNumber;\n    }\n    const bins = {};\n    each(originData_copy, (data) => {\n      const value = data[binField];\n      const bin = this.getBin(value, _binWidth);\n      const binName = `${bin[0]}-${bin[1]}`;\n      if (!hasKey(bins, binName)) {\n        bins[binName] = { name: binName, range: bin, count: 0, data: [] };\n      }\n      bins[binName].data.push(data);\n      bins[binName].count += 1;\n    });\n    // 将分箱数据转换为plotData\n    const plotData = [];\n    each(bins, (bin) => {\n      plotData.push(bin);\n    });\n    return plotData;\n  }\n\n  protected scale() {\n    super.scale();\n    // fixme: 类型定义\n    const range = this.config.scales.range as any;\n    range.nice = false;\n    range.type = 'linear';\n  }\n\n  private getBin(value, binWidth) {\n    const index = Math.floor(value / binWidth);\n    return [binWidth * index, binWidth * (index + 1)];\n  }\n}\n\nregisterPlotType('histogram', HistogramLayer);\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport DensityLayer, { DensityViewConfig } from './layer';\n\nexport interface DensityConfig extends DensityViewConfig, PlotConfig {}\n\nexport default class Density extends BasePlot<DensityConfig> {\n  public static getDefaultOptions: typeof DensityLayer.getDefaultOptions = DensityLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'density';\n    super.createLayers(layerProps);\n  }\n}\n","import { getScale } from '@antv/scale';\nimport { clone, deepMix, sortBy, valuesOfKey, getRange, each } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport { sturges } from '../../util/math';\nimport Area from '../area/layer';\nimport { AreaViewConfig } from '../area/interface';\nimport { DataItem } from '../../interface/config';\nimport { LooseMap } from '../../interface/types';\n\nexport interface DensityViewConfig extends AreaViewConfig {\n  binField: string;\n  binWidth?: number;\n  binNumber?: number;\n  kernel?: 'uniform' | 'triangle' | 'epanechnikov' | 'quartic' | 'triweight' | 'gaussian' | 'cosinus';\n}\n\nexport interface DensityLayerConfig extends DensityViewConfig, LayerConfig {}\n\nconst kernels = {\n  epanechnikov: (dist: number) => {\n    return Math.abs(dist) <= 1 ? 0.75 * (1 - dist * dist) : 0;\n  },\n  gaussian: (dist: number) => {\n    return (1 / Math.sqrt(Math.PI * 2)) * Math.exp(-0.5 * Math.pow(dist, 2));\n  },\n  uniform: (dist: number) => {\n    return Math.abs(dist) <= 1 ? 0.5 : 0;\n  },\n  triangle: (dist: number) => {\n    return Math.abs(dist) <= 1 ? 1 - Math.abs(dist) : 0;\n  },\n  quartic: (dist: number) => {\n    const v = 1 - dist * dist;\n    return Math.abs(dist) <= 1 ? (15 / 16) * v * v : 0;\n  },\n  triweight: (dist: number) => {\n    const v = 1 - dist * dist;\n    return Math.abs(dist) <= 1 ? (15 / 16) * Math.pow(v, 3) : 0;\n  },\n  cosinus: (dist: number) => {\n    const v = (Math.PI / 4) * Math.cos(0.5 * Math.PI * dist);\n    return Math.abs(dist) <= 1 ? v : 0;\n  },\n};\n\nexport default class DensityLayer<T extends DensityLayerConfig = DensityLayerConfig> extends Area<T> {\n  public type: string = 'density';\n\n  public init() {\n    const originXAxisConfig = this.options.xAxis ? clone(this.options.xAxis) : {};\n    this.options.xField = 'value';\n    this.options.yField = 'density';\n    this.options.xAxis = deepMix({}, originXAxisConfig, { type: 'linear' });\n    this.options.smooth = true;\n    super.init();\n  }\n\n  protected processData(originData?: DataItem[]) {\n    const { binField, binWidth, binNumber, kernel } = this.options;\n    const _kernel = kernel ? kernel : 'epanechnikov';\n    const kernelFunc = kernels[_kernel];\n    const originDataCopy = clone(originData);\n    sortBy(originDataCopy, binField);\n    // 计算分箱，直方图分箱的计算基于binWidth，如配置了binNumber则将其转为binWidth进行计算\n    const values = valuesOfKey(originDataCopy, binField);\n    const range = getRange(values);\n    const rangeWidth = range.max - range.min;\n    let _binNumber = binNumber;\n    let _binWidth = binWidth;\n    if (!binNumber && binWidth) {\n      _binNumber = Math.floor(rangeWidth / binWidth);\n    }\n    if (!binWidth && binNumber) {\n      _binWidth = rangeWidth / binNumber;\n    }\n    // 当binWidth和binNumber都没有指定的情况，采用Sturges formula自动生成binWidth\n    if (!binNumber && !binWidth) {\n      _binNumber = sturges(values);\n      _binWidth = rangeWidth / binNumber;\n    }\n    // 根据binNumber获取samples\n    const LinearScale = getScale('linear');\n    const scale = new LinearScale({\n      min: range.min,\n      max: range.max,\n      tickCount: _binNumber,\n      nice: false,\n    });\n    const samples = scale.getTicks();\n    // 计算KDE\n    const densities = [];\n    each(samples, (s) => {\n      const density = this.kernelDensityEstimator(_binWidth, kernelFunc, s, values);\n      densities.push({ value: s.text, density });\n    });\n\n    return densities;\n  }\n\n  private kernelDensityEstimator(\n    binWidth: number,\n    kernelFunc: (dist: number) => number,\n    x: LooseMap,\n    values: number[]\n  ) {\n    let sum = 0;\n    each(values, (v) => {\n      const dist = (x.tickValue - v) / binWidth;\n      sum += kernelFunc(dist);\n    });\n    return values.length === 0 ? 0 : sum / values.length;\n  }\n}\n\nregisterPlotType('density', DensityLayer);\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport DonutLayer, { DonutViewConfig } from './layer';\n\nexport interface DonutConfig extends DonutViewConfig, PlotConfig {}\n\nexport default class Donut extends BasePlot<DonutConfig> {\n  public static getDefaultOptions: typeof DonutLayer.getDefaultOptions = DonutLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'donut';\n    super.createLayers(layerProps);\n  }\n}\n","import responsiveRing from './geometry';\n\nconst preRenderResponsive = [{ name: 'responsiveRing', method: responsiveRing }];\n\nexport default {\n  preRender: preRenderResponsive,\n};\n","import { getCoordinate } from '@antv/coord';\nimport VariableNodes from '../../../util/responsive/node/variable-node';\nimport Responsive from '../../../util/responsive/responsive';\nimport RingLayer from '../layer';\n\nexport default function responsiveRing(layer: RingLayer) {\n  const props = layer.options;\n  const responsiveTheme = layer.getResponsiveTheme();\n  const padding = props.padding;\n  const radius = props.radius ? props.radius : 1;\n  const { width, height } = layer;\n  /** 创建坐标系 */\n  const polar = getCoordinate('polar');\n  const coord = new polar({\n    radius,\n    start: { x: padding[3], y: padding[0] },\n    end: { x: width - padding[1], y: height - padding[2] },\n  });\n  const region = {\n    radius,\n    coord,\n  };\n  const nodes = new VariableNodes({\n    nodes: [{ name: 'innerRadius', value: 0 }],\n  });\n\n  const { constraints } = responsiveTheme.ring;\n  new Responsive({\n    nodes,\n    constraints,\n    region,\n    plot: layer,\n    onEnd: () => {\n      props.innerRadius = nodes.nodes[0].value;\n    },\n  });\n}\n","import { assign } from '@antv/util';\n\ninterface NodesCfg {\n  nodes: IVariableNode[];\n}\n\ninterface IVariableNode {\n  name: string;\n  value: any;\n}\n\nexport default class VariableNodes {\n  public nodes: IVariableNode[];\n  public type: string = 'variable';\n  constructor(cfg: NodesCfg) {\n    assign(this, cfg);\n  }\n}\n","import { registerResponsiveTheme } from '../../../util/responsive/theme';\n\n/** 组装theme\n * 其实这个应该是扩展自pie的，anyway，先这样写\n */\nconst ringTheme = {\n  ring: {\n    constraints: [{ name: 'ringThickness' }, { name: 'minRingThickness' }],\n  },\n};\n\nregisterResponsiveTheme('ring', ringTheme);\n","import { assign } from '@antv/util';\nimport { getEventMap, EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst componentMap = {\n  ring: 'interval',\n};\n\nconst SHAPE_EVENT_MAP: IEventmap = getEventMap(componentMap);\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","import { View } from '../../../dependents';\nimport StatisticHtml, { IStaticticHtml } from './statistic';\nimport * as statisticTemplate from './statistic-template';\nimport { debounce, each, isString, isObject, isFunction, keys } from '@antv/util';\nimport { LooseMap } from '../../../interface/types';\nimport Ring, { DonutViewConfig } from '../layer';\n\ninterface IRingStatictic extends IStaticticHtml {\n  view: View;\n  plot: any;\n}\n\nexport default class RingStatistic extends StatisticHtml {\n  protected view: View;\n  protected plot: Ring;\n  protected statisticClass: string;\n  protected options: DonutViewConfig['statistic'];\n\n  constructor(cfg: IRingStatictic) {\n    super(cfg);\n    this.view = cfg.view;\n    this.plot = cfg.plot;\n    this.statisticClass = cfg.statisticClass;\n    this.adjustOptions();\n  }\n\n  public triggerOn() {\n    const triggerOnEvent = this.options.triggerOn;\n    this.view.on(\n      `interval:${triggerOnEvent}`,\n      debounce((e) => {\n        const displayData = this.parseStatisticData(e.data.data);\n        const htmlString = this.getStatisticHtmlString(displayData);\n        this.updateHtml(htmlString);\n      }, 150)\n    );\n    const triggerOffEvent = this.options.triggerOff ? this.options.triggerOff : 'mouseleave';\n    this.view.on(\n      `interval:${triggerOffEvent}`,\n      debounce(() => {\n        const totalValue = this.getTotalValue();\n        const displayData = this.parseStatisticData(totalValue);\n        const htmlString = this.getStatisticHtmlString(displayData);\n        this.updateHtml(htmlString);\n      }, 150)\n    );\n  }\n\n  protected adjustOptions() {\n    let displayData;\n    if (this.options.content) {\n      displayData = this.options.content;\n    } else {\n      /** 用户没有指定文本内容时，默认显示总计 */\n      const data = this.getTotalValue();\n      displayData = this.parseStatisticData(data);\n    }\n    /** 中心文本显示 */\n    let htmlString;\n    if (this.options.htmlContent) {\n      htmlString = this.options.htmlContent(displayData);\n    } else {\n      htmlString = this.getStatisticTemplate(displayData);\n    }\n\n    this.html = htmlString;\n\n    const { minX, minY, width, height } = this.view.coordinateBBox;\n    this.x = minX + width / 2;\n    this.y = minY + height / 2;\n  }\n\n  private getTotalValue() {\n    let total = 0;\n    const { angleField, colorField } = this.plot.options;\n    const { totalLabel } = this.options;\n    each(this.plot.options.data, (item) => {\n      if (typeof item[angleField] === 'number') {\n        total += item[angleField];\n      }\n    });\n    const data = {\n      [angleField]: total,\n      [colorField]: totalLabel,\n    };\n    return data;\n  }\n\n  private parseStatisticData(data) {\n    const { angleField, colorField } = this.plot.options;\n    return colorField ? { name: data[colorField], value: data[angleField] } : data[angleField];\n  }\n\n  private getStatisticTemplate(data) {\n    const size = this.getStatisticSize();\n    let htmlString;\n    /** 如果文本内容为string或单条数据 */\n    if (isString(data)) {\n      htmlString = statisticTemplate.getSingleDataTemplate(data, this.statisticClass, size);\n    } else if (isObject(data) && keys(data).length === 2) {\n      /** 如果文本内容为两条数据 */\n      const content = data as LooseMap;\n      htmlString = statisticTemplate.getTwoDataTemplate(content.name, content.value, this.statisticClass, size);\n    }\n    /** 更为复杂的文本要求用户自行制定html模板 */\n    return htmlString;\n  }\n\n  private getStatisticSize() {\n    const viewRange = this.plot.view.coordinateBBox;\n    const { radius, innerRadius } = this.plot.options;\n    const minContainerSize = Math.min(viewRange.width, viewRange.height);\n    const size = minContainerSize * radius * innerRadius;\n    return size;\n  }\n\n  private getStatisticHtmlString(data): string {\n    const triggerOnConfig = this.options.triggerOn;\n    let htmlString: string;\n    if (isString(triggerOnConfig)) {\n      htmlString = this.getStatisticTemplate(data);\n    }\n    if (isFunction(triggerOnConfig)) {\n      htmlString = triggerOnConfig(data);\n      htmlString = `<div class=\"ring-guide-html ${this.statisticClass}\">${htmlString}</div>`;\n    }\n    return htmlString;\n  }\n}\n","import { deepMix, isElement } from '@antv/util';\nimport { createDom, modifyCSS, getOuterWidth, getOuterHeight } from '@antv/dom-util';\n\nexport interface IStaticticHtml {\n  x?: number;\n  y?: number;\n  html?: string;\n  alignX?: string;\n  alignY?: string;\n  container?: any;\n  statisticClass?: string;\n  [key: string]: any;\n}\n\nexport default class StatisticHtml {\n  public wrapperNode: HTMLElement;\n  protected x: number;\n  protected y: number;\n  protected html: string;\n  protected container: any;\n  protected options: any;\n\n  constructor(cfg: IStaticticHtml) {\n    const defaultOptions = this.getDefaultOptions();\n    this.options = deepMix(defaultOptions, cfg, {});\n    this.x = this.options.x;\n    this.y = this.options.y;\n    this.html = this.options.html;\n    this.container = this.options.container;\n  }\n\n  protected render() {\n    if (isElement(this.container)) {\n      this.wrapperNode = createDom('<div class=\"g2plot-htmlStatistic\"></div>');\n      this.container.appendChild(this.wrapperNode);\n      modifyCSS(this.wrapperNode, {\n        position: 'absolute',\n      });\n      const htmlNode = createDom(this.html);\n      this.wrapperNode.appendChild(htmlNode);\n      this.setDomPosition(this.x, this.y);\n    }\n  }\n\n  public updateHtml(content: string) {\n    this.wrapperNode.innerHTML = content;\n  }\n\n  public updatePosition(x, y) {\n    this.x = x;\n    this.y = y;\n    this.setDomPosition(x, y);\n  }\n\n  public destroy() {\n    this.container.removeChild(this.wrapperNode);\n  }\n\n  protected getDefaultOptions() {\n    return {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0,\n      html: '',\n      container: null,\n      alignX: 'middle',\n      alignY: 'middle',\n    };\n  }\n\n  protected setDomPosition(x: number, y: number) {\n    let xPosition = x;\n    let yPosition = y;\n    const width = getOuterWidth(this.wrapperNode);\n    const height = getOuterHeight(this.wrapperNode);\n    if (this.options.alignX === 'middle') {\n      xPosition = x - width / 2;\n    }\n    if (this.options.alignY === 'middle') {\n      yPosition = y - height / 2;\n    }\n    modifyCSS(this.wrapperNode, {\n      top: `${Math.round(yPosition)}px`,\n      left: `${Math.round(xPosition)}px`,\n    });\n  }\n}\n","/*tslint:disable*/\nconst containerStyle =\n  \"color:#4d4d4d;font-size:14px;text-align:center;line-height:2;font-family:'-apple-system',BlinkMacSystemFont,'SegoeUI',Roboto,'HelveticaNeue',Helvetica,'PingFangSC','HiraginoSansGB','MicrosoftYaHei',SimSun,'sans-serif';pointer-events:none;\";\n\nconst nameStyle = 'font-weight:300;';\n\nconst valueStyle = 'font-size:32px;font-weight:bold;color:#4D4D4D';\n\nfunction getSingleDataTemplate(value, classId, size) {\n  const domStyle = `${containerStyle}width:${size}px;`;\n  return `<div class=\"ring-guide-html ${classId}\" style=${domStyle}><span class=\"ring-guide-value\" style=${valueStyle}>${value}</span></div>`;\n}\n\nfunction getTwoDataTemplate(name, value, classId, size) {\n  const domStyle = `${containerStyle}width:${size}px;`;\n  return `<div class=\"ring-guide-html ${classId}\" style=${domStyle}><span class=\"ring-guide-name\" style=${nameStyle}>${name}</span><br/><span class=\"ring-guide-value\" style=${valueStyle}>${value}</span></div>`;\n}\n\nexport { getSingleDataTemplate, getTwoDataTemplate };\n","/**\n * Create By Bruce Too\n * On 2020-02-18\n */\nimport { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport WaterfallLayer, { WaterfallViewConfig } from './layer';\n\nexport interface WaterfallConfig extends WaterfallViewConfig, PlotConfig {}\n\nexport default class Waterfall extends BasePlot<WaterfallConfig> {\n  public static getDefaultOptions: typeof WaterfallLayer.getDefaultOptions = WaterfallLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'waterfall';\n    super.createLayers(layerProps);\n  }\n}\n","/**\n * Create By Bruce Too\n * On 2020-02-18\n */\nimport { get } from '@antv/util';\nimport { IGroup, registerShape, Point, ShapeInfo } from '../../../../dependents';\n\nfunction getStyle(cfg: ShapeInfo, isStroke: boolean, isFill: boolean) {\n  const { style, defaultStyle, color } = cfg;\n  const attrs = {\n    ...defaultStyle,\n    ...style,\n  };\n  if (color) {\n    if (isStroke) {\n      attrs.stroke = color;\n    }\n    if (isFill) {\n      attrs.fill = color;\n    }\n  }\n  return attrs;\n}\n\nfunction getRectPath(points: Point[]) {\n  const path = [];\n  const firstPoint = points[0];\n  path.push(['M', firstPoint.x, firstPoint.y]);\n  for (let i = 1, len = points.length; i < len; i++) {\n    path.push(['L', points[i].x, points[i].y]);\n  }\n  path.push(['L', firstPoint.x, firstPoint.y]); // 需要闭合\n  path.push(['z']);\n  return path;\n}\n\n// @ts-ignore\nregisterShape('interval', 'waterfall', {\n  // @ts-ignore\n  draw(cfg: ShapeInfo, container: IGroup) {\n    const style = getStyle(cfg, false, true);\n    const path = this.parsePath(getRectPath(cfg.points as Point[]));\n    const shape = container.addShape('path', {\n      attrs: {\n        ...style,\n        path,\n      },\n      name: 'interval',\n    });\n    const leaderLine = get(cfg.style, 'leaderLine');\n    if (leaderLine && leaderLine.visible) {\n      const lineStyle = leaderLine.style || {};\n      // 2. 虚线连线\n      if (cfg.nextPoints) {\n        let linkPath = [\n          // @ts-ignore\n          ['M', cfg.points[2].x, cfg.points[2].y],\n          // @ts-ignore\n          ['L', cfg.nextPoints[0].x, cfg.nextPoints[0].y],\n        ];\n        linkPath = this.parsePath(linkPath);\n        container.addShape('path', {\n          attrs: {\n            path: linkPath,\n            stroke: '#d3d3d3',\n            lineDash: [4, 2],\n            lineWidth: 1,\n            ...lineStyle,\n          },\n          name: 'leader-line',\n        });\n      }\n    }\n    return shape;\n  },\n});\n","/**\n * Create By Bruce Too\n * On 2020-02-18\n */\n/**\n * @file events of waterfall chart is equal to column chart\n */\nexport { EVENT_MAP, onEvent } from '../column/event';\n","/**\n * Create By Bruce Too\n * On 2020-02-18\n */\nimport { isArray } from '@antv/util';\n\nimport ColumnLabel from '../../../column/component/label';\nimport { IShape, Element } from '../../../../dependents';\nimport { VALUE_FIELD } from '../../layer';\nimport { registerLabelComponent } from '../../../../components/label/base';\n\nconst MARGIN = 2;\n\nexport default class WaterfallLabel extends ColumnLabel {\n  protected adjustLabel(label: IShape, element: Element): void {\n    const { shape } = element;\n    const shapeBox = shape.getBBox();\n    const data = element.getData();\n    const values = data[VALUE_FIELD];\n    const diff = data[this.layer.options.yField];\n    const value = isArray(values) ? values[1] : values;\n    let yPos = (shapeBox.minY + shapeBox.maxY) / 2;\n    let textBaseline = 'bottom';\n\n    if (diff < 0) {\n      yPos = shapeBox.maxY + MARGIN;\n      textBaseline = 'top';\n    } else {\n      yPos = shapeBox.minY - MARGIN;\n    }\n\n    label.attr('y', yPos);\n    label.attr('text', value);\n    label.attr('textBaseline', textBaseline);\n  }\n}\n\nregisterLabelComponent('waterfall', WaterfallLabel);\n","/**\n * Create By Bruce Too\n * On 2020-02-18\n */\nimport { mix, clone, each, isArray } from '@antv/util';\nimport { VALUE_FIELD, IS_TOTAL } from '../../layer';\nimport { IGroup, View, VIEW_LIFE_CIRCLE } from '../../../../dependents';\nimport { TextStyle } from '../../../../interface/config';\n\nexport interface DiffLabelcfg {\n  view: View;\n  fields: string[];\n  formatter: (text: string, item: object, idx: number) => string;\n  style?: TextStyle;\n}\n\nfunction getDefaultCfg() {\n  return {\n    fill: '#fff',\n    fontSize: 12,\n    lineHeight: 12,\n    stroke: 'rgba(0, 0, 0, 0.45)',\n  };\n}\n\nexport default class DiffLabel {\n  private view: View;\n  private fields: string[];\n  private container: IGroup;\n  private formatter: (text: string, item: object, idx: number) => string;\n  private textAttrs: object = {};\n\n  constructor(cfg: DiffLabelcfg) {\n    this.view = cfg.view;\n    this.fields = cfg.fields;\n    this.formatter = cfg.formatter;\n    this.textAttrs = mix(getDefaultCfg(), cfg.style);\n\n    this._init();\n  }\n\n  /** 绘制辅助labels */\n  public draw() {\n    if (!this.view || this.view.destroyed) {\n      return;\n    }\n    const data = clone(this.view.getData());\n    this.container = this.view.foregroundGroup.addGroup();\n    const shapes = this.view.geometries[0].elements.map((value) => value.shape);\n    each(shapes, (shape, idx) => {\n      if (!shape.cfg.origin) return;\n      const _origin = shape.cfg.origin.data;\n      const shapeBox = shape.getBBox();\n      const values = _origin[VALUE_FIELD];\n      let diff = values;\n      if (isArray(values)) {\n        diff = values[1] - values[0];\n      }\n      diff = diff > 0 ? `+${diff}` : diff;\n      /** is total, total do not need `+` sign */\n      if (_origin[IS_TOTAL]) {\n        diff = values[0] - values[1];\n      }\n      let formattedText = diff;\n      if (this.formatter) {\n        const color = shapes[idx].attr('fill');\n        formattedText = this.formatter(`${diff}`, { _origin: data[idx], color }, idx);\n      }\n      const text = this.container.addShape('text', {\n        attrs: {\n          text: formattedText,\n          textBaseline: 'middle',\n          textAlign: 'center',\n          x: (shapeBox.minX + shapeBox.maxX) / 2,\n          y: (shapeBox.minY + shapeBox.maxY) / 2,\n          ...this.textAttrs,\n        },\n        name: 'dill-label',\n      });\n      if (text.getBBox().height > shapeBox.height) {\n        text.set('visible', false);\n      }\n    });\n    this.view.getCanvas().draw();\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n  }\n\n  private _init() {\n    this.view.on(VIEW_LIFE_CIRCLE.BEFORE_RENDER, () => {\n      this.clear();\n    });\n\n    this.view.on(VIEW_LIFE_CIRCLE.AFTER_RENDER, () => {\n      this.draw();\n    });\n  }\n}\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport ScatterLayer, { ScatterViewConfig } from './layer';\n\nexport interface ScatterConfig extends ScatterViewConfig, PlotConfig {}\n\nexport default class Scatter extends BasePlot<ScatterConfig> {\n  public static getDefaultOptions: typeof ScatterLayer.getDefaultOptions = ScatterLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'scatter';\n    super.createLayers(layerProps);\n  }\n}\n","import { each, isArray, isFunction, deepMix } from '@antv/util';\nimport BBox from '../../../util/bbox';\nimport { View, IGroup } from '../../../dependents';\n\ninterface ILabel {\n  position?: string;\n  text: string[] | Function;\n  offset?: number | Function;\n  style?: any;\n}\n\nexport interface QuadrantConfig {\n  visible?: boolean;\n  xBaseline?: number;\n  yBaseline?: number;\n  regionStyle?: any[] | any;\n  lineStyle?: any;\n  label?: ILabel;\n}\n\nexport interface IQuadrant extends QuadrantConfig {\n  view: View;\n  plotOptions: any;\n}\n\nexport default class Quadrant {\n  public options: IQuadrant;\n  protected view: View;\n  protected quadrantGroups: IGroup[] = [];\n  protected container: IGroup;\n  protected regionData: any[] = [];\n  protected lineData: any[] = [];\n\n  constructor(cfg: IQuadrant) {\n    this.options = cfg;\n    this.view = this.options.view;\n    this.init();\n  }\n\n  public init() {\n    const { xBaseline, yBaseline } = this.options;\n    const coord = this.view.getCoordinate();\n    // TODO: xBaseline和yBaseline支持百分比\n    // 根据 xBaseline 和 yBaseline 分割象限\n    const xScale = this.view.getScaleByField(this.options.plotOptions.xField);\n    const yScale = this.view.getScaleByField(this.options.plotOptions.yField);\n    // 先进行 x 方向的分割\n    let xRegion;\n    if (xBaseline > xScale.min && xBaseline < xScale.max) {\n      const ratio = (xBaseline - xScale.min) / (xScale.max - xScale.min);\n      xRegion = [\n        new BBox(coord.start.x, coord.end.y, coord.getWidth() * ratio, coord.getHeight()),\n        new BBox(\n          coord.start.x + coord.getWidth() * ratio,\n          coord.end.y,\n          coord.getWidth() * (1 - ratio),\n          coord.getHeight()\n        ),\n      ];\n      const verticalLineData = {\n        start: { x: coord.start.x + coord.getWidth() * ratio, y: coord.end.y },\n        end: { x: coord.start.x + coord.getWidth() * ratio, y: coord.start.y },\n      };\n      this.lineData.push(verticalLineData);\n    } else {\n      xRegion = [new BBox(coord.start.x, coord.end.y, coord.getWidth(), coord.getHeight())];\n    }\n    // 再进行 y 方向的分割\n    if (yBaseline > yScale.min && yBaseline < yScale.max) {\n      const ratio = (yBaseline - yScale.min) / (yScale.max - yScale.min);\n      const horizontalLineData = {\n        start: { x: coord.start.x, y: coord.start.y - coord.getHeight() * ratio },\n        end: { x: coord.end.x, y: coord.start.y - coord.getHeight() * ratio },\n      };\n      this.lineData.push(horizontalLineData);\n      const topQuadrant = {\n        name: xBaseline <= xScale.min ? 'top-right' : 'top-left',\n        bbox: new BBox(xRegion[0].minX, xRegion[0].minY, xRegion[0].width, xRegion[0].height * (1 - ratio)),\n        index: xBaseline <= xScale.min ? 2 : 0,\n      };\n      this.regionData.push(topQuadrant);\n      const bottomQuadrant = {\n        name: xBaseline <= xScale.min ? 'bottom-right' : 'bottom-left',\n        bbox: new BBox(\n          xRegion[0].minX,\n          xRegion[0].minY + xRegion[0].height * (1 - ratio),\n          xRegion[0].width,\n          xRegion[0].height * ratio\n        ),\n        index: xBaseline <= xScale.min ? 3 : 1,\n      };\n      this.regionData.push(bottomQuadrant);\n      // 四象限齐全\n      if (xRegion.length > 1) {\n        const rightTopQuadrant = {\n          name: 'top-right',\n          bbox: new BBox(xRegion[1].minX, xRegion[1].minY, xRegion[1].width, xRegion[1].height * (1 - ratio)),\n          index: 2,\n        };\n        this.regionData.push(rightTopQuadrant);\n        const rightBottomQuadrant = {\n          name: 'bottom-right',\n          bbox: new BBox(\n            xRegion[1].minX,\n            xRegion[1].minY + xRegion[1].height * (1 - ratio),\n            xRegion[1].width,\n            xRegion[1].height * ratio\n          ),\n          index: 3,\n        };\n        this.regionData.push(rightBottomQuadrant);\n      }\n    } else if (xRegion.length === 2) {\n      if (yBaseline <= yScale.min) {\n        const leftTopQuadrant = {\n          name: 'top-left',\n          bbox: xRegion[0],\n          index: 0,\n        };\n        this.regionData.push(leftTopQuadrant);\n        const rightTopQuadrant = {\n          name: 'top-right',\n          bbox: xRegion[1],\n          index: 2,\n        };\n        this.regionData.push(rightTopQuadrant);\n      } else {\n        const leftBottomQuadrant = {\n          name: 'bottom-left',\n          bbox: xRegion[0],\n          index: 1,\n        };\n        this.regionData.push(leftBottomQuadrant);\n        const rightBottomQuadrant = {\n          name: 'bottom-right',\n          bbox: xRegion[1],\n          index: 3,\n        };\n        this.regionData.push(rightBottomQuadrant);\n      }\n    } else {\n      // 当前绘制区域全部在一个象限中\n      if (xBaseline <= xScale.min) {\n        if (yBaseline <= yScale.min) {\n          const rightTopQuadrant = {\n            name: 'top-right',\n            bbox: xRegion[0],\n            index: 2,\n          };\n          this.regionData.push(rightTopQuadrant);\n        } else {\n          const rightBottomQuadrant = {\n            name: 'bottom-right',\n            bbox: xRegion[0],\n            index: 3,\n          };\n          this.regionData.push(rightBottomQuadrant);\n        }\n      } else {\n        if (yBaseline <= yScale.min) {\n          const leftTopQuadrant = {\n            name: 'top-left',\n            bbox: xRegion[0],\n            index: 0,\n          };\n          this.regionData.push(leftTopQuadrant);\n        } else {\n          const leftBottomQuadrant = {\n            name: 'bottom-left',\n            bbox: xRegion[0],\n            index: 1,\n          };\n          this.regionData.push(leftBottomQuadrant);\n        }\n      }\n    }\n    // 创建container\n    this.container = this.view.backgroundGroup.addGroup();\n  }\n\n  public render() {\n    if (this.regionData.length > 0) {\n      const defaultStyle = this.getDefaultStyle();\n      const regionStyle = this.getRegionStyle(this.regionData);\n      each(this.regionData, (d) => {\n        const { index } = d;\n        const group = this.container.addGroup();\n        const rect = group.addShape('rect', {\n          attrs: {\n            x: d.bbox.minX,\n            y: d.bbox.minY,\n            width: d.bbox.width,\n            height: d.bbox.height,\n            ...regionStyle[index],\n          },\n          name: 'quadrant',\n        });\n        if (this.options.label && this.options.label.text) {\n          const labelOptions = deepMix({}, defaultStyle.label, this.options.label);\n          const labelCfg = this.getLabelConfig(d, labelOptions);\n          group.addShape('text', {\n            attrs: {\n              ...labelCfg,\n            },\n            name: 'quadrant-label',\n          });\n        }\n        // rect.setSilent('data', d);\n        rect.set('data', d);\n        this.quadrantGroups.push(group);\n      });\n\n      // 绘制象限辅助线\n      const lineStyle = deepMix({}, defaultStyle.line, this.options.lineStyle);\n      each(this.lineData, (d) => {\n        this.container.addShape('path', {\n          attrs: {\n            path: [\n              ['M', d.start.x, d.start.y],\n              ['L', d.end.x, d.end.y],\n            ],\n            ...lineStyle,\n          },\n          name: 'quadrant-line',\n        });\n      });\n      this.view.canvas.draw();\n    }\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.remove();\n    }\n  }\n\n  protected getDefaultStyle() {\n    return {\n      line: {\n        stroke: '#9ba29a',\n        lineWidth: 1,\n      },\n      regionStyle: [\n        { fill: '#000000', opacity: 0.05 },\n        { fill: '#ffffff', opacity: 0 },\n        { fill: '#ffffff', opacity: 0 },\n        { fill: '#000000', opacity: 0.05 },\n      ],\n      label: {\n        position: 'outter-inner',\n        offset: 10,\n        style: {\n          fontSize: 14,\n          fill: '#ccc',\n          // fontWeight: 100\n        },\n      },\n    };\n  }\n\n  private getRegionStyle(regionData) {\n    const defaultStyle = this.getDefaultStyle();\n    let style = defaultStyle.regionStyle;\n    if (this.options.regionStyle) {\n      const { regionStyle } = this.options;\n      if (isArray(regionStyle)) {\n        style = style.map((s, index) => {\n          if (regionStyle.length > index && regionStyle[index]) {\n            return regionStyle[index];\n          }\n          return s;\n        });\n      } else if (isFunction(regionStyle)) {\n        each(regionData, (d, index) => {\n          style[index] = regionStyle(d);\n        });\n      }\n    }\n\n    return style;\n  }\n\n  private getLabelConfig(region, labelOptions) {\n    const { index } = region;\n    let x = 0;\n    let y = 0;\n    let style: any = {};\n    let text = labelOptions.text;\n    if (isFunction(text)) {\n      text = text(region);\n    } else if (isArray(text)) {\n      text = text[index];\n    }\n    const { position } = labelOptions;\n    const pos = position.split('-');\n    const dim = region.name.split('-');\n    // x方向\n    if (dim[1] === 'left') {\n      if (pos[0] === 'inner') {\n        x = region.bbox.maxX - labelOptions.offset;\n        style.textAlign = 'right';\n      }\n      if (pos[0] === 'outter') {\n        x = region.bbox.minX + labelOptions.offset;\n        style.textAlign = 'left';\n      }\n    } else if (dim[1] === 'right') {\n      if (pos[0] === 'inner') {\n        x = region.bbox.minX + labelOptions.offset;\n        style.textAlign = 'left';\n      }\n      if (pos[0] === 'outter') {\n        x = region.bbox.maxX - labelOptions.offset;\n        style.textAlign = 'right';\n      }\n    }\n    // y方向\n    if (dim[0] === 'top') {\n      if (pos[1] === 'inner') {\n        y = region.bbox.maxY - labelOptions.offset;\n        style.textBaseline = 'bottom';\n      }\n      if (pos[1] === 'outter') {\n        y = region.bbox.minY + labelOptions.offset;\n        style.textBaseline = 'top';\n      }\n    } else if (dim[0] === 'bottom') {\n      if (pos[1] === 'inner') {\n        y = region.bbox.minY + labelOptions.offset;\n        style.textBaseline = 'top';\n      }\n      if (pos[1] === 'outter') {\n        y = region.bbox.maxY - labelOptions.offset;\n        style.textBaseline = 'bottom';\n      }\n    }\n    style = deepMix({}, labelOptions.style, style);\n    style.lineHeight = style.fontSize;\n    return {\n      x,\n      y,\n      text,\n      ...style,\n    };\n  }\n}\n","import { each, deepMix, minBy, maxBy } from '@antv/util';\nimport { View, IGroup, IShape } from '../../../dependents';\nimport { getScale } from '@antv/scale';\nimport {\n  regressionLinear,\n  regressionExp,\n  regressionLoess,\n  regressionLog,\n  regressionPoly,\n  regressionPow,\n  regressionQuad,\n} from 'd3-regression';\n\nimport { getSplinePath } from '../../../util/path';\n\nconst REGRESSION_MAP = {\n  exp: regressionExp,\n  linear: regressionLinear,\n  loess: regressionLoess,\n  log: regressionLog,\n  poly: regressionPoly,\n  pow: regressionPow,\n  quad: regressionQuad,\n};\n\nexport interface TrendlineConfig {\n  visible?: boolean;\n  type?: string;\n  style?: any;\n  showConfidence?: boolean;\n  confidenceStyle?: any;\n}\n\nexport interface ITrendline extends TrendlineConfig {\n  view: View;\n  plotOptions: any;\n}\n\nfunction se95(p, n) {\n  return Math.sqrt((p * (1 - p)) / n) * 1.96;\n}\n\nexport default class TrendLine {\n  public data: { trendlineData: any[]; confidenceData: any[] };\n  protected options: any;\n  protected view: View;\n  protected container: IGroup;\n  protected shape: IShape;\n\n  constructor(cfg: ITrendline) {\n    const defaultOptions = {\n      type: 'linear',\n      style: {\n        stroke: '#9ba29a',\n        lineWidth: 2,\n        opacity: 0.5,\n        lineJoin: 'round',\n        lineCap: 'round',\n      },\n      showConfidence: false,\n      confidenceStyle: {\n        fill: '#ccc',\n        opacity: 0.1,\n      },\n    };\n    this.options = deepMix({}, defaultOptions, cfg);\n    this.view = this.options.view;\n    this.init();\n  }\n\n  public init() {\n    // 处理数据\n    const { xField, yField, data } = this.options.plotOptions;\n    const reg = REGRESSION_MAP[this.options.type]()\n      .x((d) => d[xField])\n      .y((d) => d[yField]);\n    this.data = this.processData(reg(data));\n    // 创建container\n    this.container = this.view.backgroundGroup.addGroup();\n  }\n\n  public render() {\n    const xscale_view = this.view.getScaleByField(this.options.plotOptions.xField);\n    const yscale_view = this.view.getScaleByField(this.options.plotOptions.yField);\n    const coord = this.view.getCoordinate();\n    const { trendlineData } = this.data;\n    // 创建图形绘制的scale\n    const LinearScale = getScale('linear');\n    const xRange = this.adjustScale(xscale_view, trendlineData, 'x');\n    const xScale = new LinearScale({\n      min: xRange.min,\n      max: xRange.max,\n      // nice: xscale_view.nice,\n    });\n    const yRange = this.adjustScale(yscale_view, trendlineData, 'y');\n    const yScale = new LinearScale({\n      min: yRange.min,\n      max: yRange.max,\n      // nice: yscale_view.nice,\n    });\n    // 绘制置信区间曲线\n    if (this.options.showConfidence) {\n      const confidencePath = this.getConfidencePath(xScale, yScale, coord);\n      this.container.addShape('path', {\n        attrs: {\n          path: confidencePath,\n          ...this.options.confidenceStyle,\n        },\n        name: 'confidence',\n      });\n    }\n    // 绘制trendline\n    const points = this.getTrendlinePoints(xScale, yScale, coord);\n    const constraint = [\n      [0, 0],\n      [1, 1],\n    ];\n    const path = getSplinePath(points, false, constraint);\n    this.shape = this.container.addShape('path', {\n      attrs: {\n        path,\n        ...this.options.style,\n      },\n      name: 'trendline',\n    });\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.destroy();\n    }\n  }\n\n  private processData(data) {\n    const trendline = [];\n    const confidence = [];\n    each(data, (d) => {\n      trendline.push({ x: d[0], y: d[1] });\n      const conf = se95(data.rSquared, d[1]);\n      confidence.push({ x: d[0], y0: d[1] - conf, y1: d[1] + conf });\n    });\n    return { trendlineData: trendline, confidenceData: confidence };\n  }\n\n  private getTrendlinePoints(xScale, yScale, coord) {\n    const points = [];\n    each(this.data.trendlineData, (d) => {\n      const xRatio = xScale.scale(d.x);\n      const yRatio = yScale.scale(d.y);\n      const x = coord.start.x + coord.width * xRatio;\n      const y = coord.start.y - coord.height * yRatio;\n      points.push({ x, y });\n    });\n    return points;\n  }\n\n  private getConfidencePath(xScale, yScale, coord) {\n    const upperPoints = [];\n    const lowerPoints = [];\n    const path = [];\n    each(this.data.confidenceData, (d) => {\n      const xRatio = xScale.scale(d.x);\n      const y0Ratio = yScale.scale(d.y0);\n      const y1Ratio = yScale.scale(d.y1);\n      const x = coord.start.x + coord.width * xRatio;\n      const y0 = coord.start.y - coord.height * y0Ratio;\n      const y1 = coord.start.y - coord.height * y1Ratio;\n      upperPoints.push({ x, y: y0 });\n      lowerPoints.push({ x, y: y1 });\n    });\n    for (let i = 0; i < upperPoints.length; i++) {\n      const flag = i === 0 ? 'M' : 'L';\n      const p = upperPoints[i];\n      if (!isNaN(p.x) && !isNaN(p.y)) {\n        path.push([flag, p.x, p.y]);\n      }\n    }\n    for (let j = lowerPoints.length - 1; j > 0; j--) {\n      const p = lowerPoints[j];\n      if (!isNaN(p.x) && !isNaN(p.y)) {\n        path.push(['L', p.x, p.y]);\n      }\n    }\n    return path;\n  }\n\n  private adjustScale(viewScale, trendlineData, dim) {\n    // 处理用户自行配置min max的情况\n    const { min, max } = viewScale;\n    const { data, xField, yField } = this.options.plotOptions;\n    const field = dim === 'x' ? xField : yField;\n    const dataMin = minBy(data, field)[field];\n    const dataMax = maxBy(data, field)[field];\n    const minRatio = (min - dataMin) / (dataMax - dataMin);\n    const maxRatio = (max - dataMax) / (dataMax - dataMin);\n    const trendMin = minBy(trendlineData, dim)[dim];\n    const trendMax = maxBy(trendlineData, dim)[dim];\n    return {\n      min: trendMin + minRatio * (trendMax - trendMin),\n      max: trendMax + maxRatio * (trendMax - trendMin),\n    };\n  }\n}\n","import { registerTheme } from '../../theme';\n\nconst POINT_ACTIVE_STYLE = (style) => {\n  const stroke = style.stroke || '#000';\n  return {\n    stroke,\n  };\n};\n\nconst POINT_SELECTED_STYLE = (style) => {\n  const stroke = style.stroke || '#000';\n  const lineWidth = style.lineWidth || 2;\n  return {\n    stroke,\n    lineWidth,\n  };\n};\n\nconst POINT_INACTIVE_STYLE = (style) => {\n  const fillOpacity = style.fillOpacity || style.opacity || 0.3;\n  return {\n    fillOpacity,\n  };\n};\n\nregisterTheme('scatter', {\n  pointStyle: {\n    normal: {},\n    active: POINT_ACTIVE_STYLE,\n    selected: POINT_SELECTED_STYLE,\n    inactive: POINT_INACTIVE_STYLE,\n  },\n});\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport BubbleLayer, { BubbleViewConfig } from './layer';\n\nexport interface BubbleConfig extends BubbleViewConfig, PlotConfig {}\n\nexport default class Bubble extends BasePlot<BubbleConfig> {\n  public static getDefaultOptions: typeof BubbleLayer.getDefaultOptions = BubbleLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'bubble';\n    super.createLayers(layerProps);\n  }\n}\n","import { deepMix } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport * as EventParser from '../scatter/event';\nimport ScatterLayer, { ScatterViewConfig } from '../scatter/layer';\nimport './shape';\nimport './theme';\n\nexport interface BubbleViewConfig extends ScatterViewConfig {\n  /** 气泡大小 */\n  pointSize?: [number, number];\n  /** 气泡大小字段 */\n  sizeField?: string;\n}\n\nexport interface BubbleLayerConfig extends BubbleViewConfig, LayerConfig {}\n\nexport default class BubbleLayer<T extends BubbleLayerConfig = BubbleLayerConfig> extends ScatterLayer<T> {\n  public static getDefaultOptions(): any {\n    return deepMix({}, super.getDefaultOptions(), {\n      // 直径 min 4px；max 64px\n      pointSize: [2, 32],\n      pointStyle: {\n        stroke: null,\n        strokeOpacity: 1,\n        fillOpacity: 0.5,\n      },\n      label: {\n        position: 'middle',\n        style: {\n          stroke: '#fff',\n          lineWidth: 2,\n        },\n      },\n      shape: 'bubble-point',\n    });\n  }\n\n  public type: string = 'bubble';\n\n  protected legend() {\n    super.legend();\n\n    if (this.options.legend && this.options.legend.visible === false) {\n      return;\n    }\n\n    this.setConfig('legends', {\n      [this.options.sizeField]: false,\n    });\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n}\n\nregisterPlotType('bubble', BubbleLayer);\n","import { registerShape } from '@antv/g2';\nimport { drawPoints } from '@antv/g2/lib/geometry/shape/point/util';\nimport { ShapeInfo, ShapeMarkerCfg } from '@antv/g2/lib/interface';\nimport { IGroup } from '@antv/g-base';\n\nregisterShape('point', 'bubble-point', {\n  draw(cfg: ShapeInfo, container: IGroup) {\n    const point = drawPoints(this, cfg, container, 'circle', false);\n    // 如果用户未配置 stroke，气泡图 stroke 默认用 fill 颜色\n    if (!cfg.style.stroke) {\n      const fill = point.attr('fill');\n      point.attr('stroke', fill);\n    }\n    return point;\n  },\n  getMarker(markerCfg: ShapeMarkerCfg) {\n    const { color } = markerCfg;\n    return {\n      symbol: 'circle',\n      style: {\n        r: 4.5,\n        fill: color,\n      },\n    };\n  },\n});\n","import { registerTheme } from '../../theme';\n\nconst POINT_ACTIVE_STYLE = (style) => {\n  const stroke = style.stroke || '#000';\n  const fillOpacity = style.fillOpacity || style.opacity || 0.95;\n  return {\n    stroke,\n    fillOpacity,\n  };\n};\n\nconst POINT_SELECTED_STYLE = (style) => {\n  const stroke = style.stroke || '#000';\n  const lineWidth = style.lineWidth || 2;\n  return {\n    stroke,\n    lineWidth,\n  };\n};\n\nconst POINT_INACTIVE_STYLE = (style) => {\n  const fillOpacity = style.fillOpacity || style.opacity || 0.3;\n  return {\n    fillOpacity,\n  };\n};\n\nregisterTheme('bubble', {\n  pointStyle: {\n    normal: {},\n    active: POINT_ACTIVE_STYLE,\n    selected: POINT_SELECTED_STYLE,\n    inactive: POINT_INACTIVE_STYLE,\n  },\n});\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport BulletLayer, { BulletViewConfig } from './layer';\n\nexport interface BulletConfig extends BulletViewConfig, PlotConfig {}\n\nexport default class Bullet extends BasePlot<BulletConfig> {\n  public static getDefaultOptions: typeof BulletLayer.getDefaultOptions = BulletLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'bullet';\n    super.createLayers(layerProps);\n  }\n}\n","import { deepMix, has } from '@antv/util';\nimport * as EventParser from './event';\nimport ViewLayer, { ViewConfig } from '../../base/view-layer';\nimport { extractScale } from '../../util/scale';\nimport { getComponent } from '../../components/factory';\nimport { getGeom } from '../../geoms/factory';\nimport { LayerConfig } from '../../base/layer';\nimport { registerPlotType } from '../../base/global';\nimport BulletRect from './component/bulletRect';\nimport BulletTarget from './component/bulletTarget';\nimport { TextStyle, LineStyle } from '../../interface/config';\nimport './theme';\n\nconst G2_GEOM_MAP = {\n  bullet: 'interval',\n};\n\nconst PLOT_GEOM_MAP = {\n  interval: 'bullet',\n};\n\nexport const STACK_FIELD = '$$stackField$$';\nexport const X_FIELD = '$$xField$$';\nexport const Y_FIELD = '$$yField$$';\n\ninterface BulletAxisTickLine extends LineStyle {\n  visible?: boolean;\n}\n\nexport interface BulletAxis {\n  visible: boolean;\n  position?: 'before' | 'after';\n  style?: TextStyle;\n  tickCount?: number;\n  tickLine?: BulletAxisTickLine;\n  formatter?: (text: string, idx: number) => string;\n}\n\nexport interface BulletViewConfig extends ViewConfig {\n  data: {\n    /** 子弹图标题 */\n    title?: string;\n    /** 进度值，array类型。支持阶段性的进度值（即堆叠） */\n    measures: number[];\n    /** 进度条的色条范围区间，相对数值：[0, 1] */\n    ranges?: number[];\n    /** 目标值，array类型。支持多目标设置 */\n    targets: number[];\n  }[];\n  /** 进度条的色条范围区间的最大值 */\n  rangeMax: number;\n  /** 实际进度条大小设置 */\n  measureSize?: number;\n  measureColors?: string[];\n  /** 区间背景条大小设置。ratio number, relative to measureSize */\n  rangeSize?: number;\n  /** 进度条背景颜色 */\n  rangeColors?: string[];\n  /** 目标值 marker 大小设置。ratio number, relative to measureSize */\n  markerSize?: number;\n  /** marker 的填充色 */\n  markerColors?: string[];\n  markerStyle?: {\n    /** marker 的宽度，default: 1 */\n    width?: number;\n    /** marker 的填充色, 若存在 markerColors, 优先取 markerColors */\n    fill?: string;\n    [k: string]: any;\n  };\n  /** 进度条刻度轴设置 */\n  axis?: BulletAxis;\n  stackField?: string;\n}\n\nexport interface BulletLayerConfig extends BulletViewConfig, LayerConfig {}\n\nexport default abstract class BulletLayer extends ViewLayer<BulletViewConfig> {\n  public bullet;\n  protected bulletRect;\n  protected bulletTarget;\n  public type: string = 'bullet';\n  public static getDefaultOptions(): Partial<BulletViewConfig> {\n    return deepMix({}, super.getDefaultOptions(), {\n      data: [],\n      stackField: STACK_FIELD,\n      xField: X_FIELD,\n      yField: Y_FIELD,\n      rangeColors: ['rgba(91, 143, 249, 0.45)'],\n      measureSize: 12,\n      rangeSize: 2,\n      markerSize: 2,\n      markerColors: [],\n      markerStyle: {\n        width: 2,\n        fill: '#5B8FF9',\n        lineWidth: 0,\n      },\n      axis: {\n        visible: false,\n        position: 'before',\n        tickCount: 6,\n        formatter: (text, idx) => `${idx}`,\n        style: {\n          fill: 'rgba(0, 0, 0, 0.25)',\n          textBaseline: 'middle',\n          textAlign: 'center',\n          fontSize: 12,\n          lineHeight: 16,\n        },\n        tickLine: {\n          visible: true,\n          lineWidth: 1,\n          stroke: '#FFF',\n          lineDash: [4, 2],\n        },\n      },\n      xAxis: {\n        visible: true,\n        line: {\n          visible: false,\n        },\n        tickLine: {\n          visible: false,\n        },\n        label: {\n          visible: true,\n        },\n      },\n      yAxis: {\n        visible: false,\n        nice: false,\n      },\n      tooltip: {\n        visible: false,\n        trigger: 'item',\n        crosshairs: false,\n      },\n      label: {\n        visible: true,\n        offset: 4,\n        style: {\n          fill: 'rgba(0, 0, 0, 0.45)',\n          stroke: '#fff',\n          lineWidth: 1,\n        },\n      },\n    });\n  }\n\n  public afterRender() {\n    super.afterRender();\n    this.view.removeInteraction('legend-filter');\n  }\n\n  protected scale() {\n    const options = this.options;\n    const scales = {};\n    /** 配置y-scale */\n    scales[options.yField] = {};\n    if (has(options, 'yAxis')) {\n      extractScale(scales[options.yField], options.yAxis);\n    }\n    /** 配置x-scale */\n    scales[options.xField] = {\n      type: 'cat',\n    };\n    if (has(options, 'xAxis')) {\n      extractScale(scales[options.xField], options.xAxis);\n    }\n    this.setConfig('scales', scales);\n    super.scale();\n  }\n\n  public getOptions(props: BulletViewConfig) {\n    const options = super.getOptions(props);\n    this.adjustOptions(options);\n    return options;\n  }\n\n  public afterInit() {\n    super.afterInit();\n    const options = this.options;\n    const ranges = options.data.map((d) => d.ranges);\n    const targets = options.data.map((d) => d.targets);\n    this.bulletRect = new BulletRect(this.view, {\n      ranges,\n      rangeMax: options.rangeMax,\n      yField: options.yField,\n      rangeSize: options.rangeSize,\n      rangeColors: options.rangeColors || [],\n      axis: options.axis,\n    });\n    this.bulletTarget = new BulletTarget(this.view, {\n      targets,\n      yField: options.yField,\n      markerSize: options.markerSize,\n      markerColors: options.markerColors || [],\n      markerStyle: options.markerStyle,\n    });\n  }\n\n  protected geometryParser(dim, type) {\n    if (dim === 'g2') {\n      return G2_GEOM_MAP[type];\n    }\n    return PLOT_GEOM_MAP[type];\n  }\n\n  protected coord() {\n    this.setConfig('coordinate', {\n      actions: [['transpose']],\n    });\n  }\n\n  /** 自定义子弹图图例 */\n  protected legend() {\n    const options = this.options;\n    const markerColor = options.markerStyle.fill;\n    const measureColors = options.measureColors || this.theme.colors;\n    const items = [\n      {\n        name: '实际进度', // 图例项的文本内容\n        value: '实际进度',\n        marker: {\n          symbol: 'square', // 该图例项 marker 的形状，参见 marker 参数的说明\n          style: {\n            fill: measureColors[0], // 该图例项 marker 的填充颜色\n          },\n        },\n      },\n      {\n        name: '目标值', // 图例项的文本内容\n        value: '目标值',\n        marker: {\n          symbol: 'line', // 该图例项 marker 的形状，参见 marker 参数的说明\n          style: {\n            stroke: markerColor, // 该图例项 marker 的填充颜色\n            lineWidth: 2, // 该图例项 marker 的填充颜色\n          },\n        },\n      },\n    ];\n    const legendOptions = {\n      custom: true,\n      position: 'bottom',\n      items,\n      ...options.legend,\n    };\n    // @ts-ignore\n    this.setConfig('legends', legendOptions);\n  }\n\n  protected addGeometry() {\n    const options = this.options;\n    const bullet = getGeom('interval', 'main', {\n      positionFields: [options.xField, options.yField],\n      plot: this,\n    });\n    bullet.adjust = [\n      {\n        type: 'stack',\n      },\n    ];\n    if (options.label) {\n      bullet.label = this.extractLabel();\n    }\n    this.bullet = bullet;\n    this.setConfig('geometry', bullet);\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n\n  protected extractLabel() {\n    const options = this.options;\n    const label = deepMix({}, options.label);\n    if (label.visible === false) {\n      return false;\n    }\n    const labelConfig = getComponent('label', {\n      plot: this,\n      labelType: 'barLabel',\n      fields: [options.yField],\n      ...label,\n    });\n    return labelConfig;\n  }\n\n  protected adjustOptions(options): void {\n    options.barSize = options.measureSize || 12;\n    this.adjustYAxisOptions(options);\n  }\n\n  protected adjustYAxisOptions(options): void {\n    const values = [];\n    options.data.forEach((d) => values.push(d.measures.reduce((a, b) => a + b, 0)));\n    values.push(options.rangeMax);\n    options.yAxis.max = Math.max.apply([], values);\n  }\n\n  protected processData(dataOptions: BulletViewConfig['data']) {\n    const options = this.options;\n    const data = [];\n    dataOptions.forEach((dataItem, dataIdx) => {\n      for (let valueIdx = 0; valueIdx < dataItem.measures.length; valueIdx += 1) {\n        const value = dataItem.measures[valueIdx];\n        const xField = dataItem.title || `${dataIdx}`;\n        data.push({\n          [options.xField]: xField,\n          [options.yField]: value,\n          [options.stackField]: `${valueIdx}`,\n        });\n      }\n    });\n    return data;\n  }\n}\n\nregisterPlotType('bullet', BulletLayer);\n","import { assign } from '@antv/util';\nimport { getEventMap, EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst componentMap = {\n  bullet: 'interval',\n  bulletTarget: 'bullet-target',\n};\n\nconst SHAPE_EVENT_MAP: IEventmap = getEventMap(componentMap);\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","import { IGroup, View } from '../../../dependents';\nimport { find, map, get } from '@antv/util';\nimport { BulletAxis } from '../layer';\nimport BBox from '../../../util/bbox';\n\nexport interface BulletRectCfg {\n  /** 背景区间的区间范围 */\n  ranges: number[][];\n  yField: string;\n  rangeColors: string[];\n  rangeMax: number;\n  rangeSize: number;\n  axis?: BulletAxis;\n  style?: {\n    fill?: string;\n    stroke?: string;\n    strokeOpacity?: number;\n    [k: string]: any;\n  };\n}\n\nexport default class BulletRect {\n  private view: View;\n  private container: IGroup;\n  private cfg: BulletRectCfg;\n\n  constructor(view: View, cfg: BulletRectCfg) {\n    this.view = view;\n    this.cfg = cfg;\n    this._init();\n  }\n\n  /** 绘制辅助labels */\n  public draw() {\n    if (!this.view || this.view.destroyed) {\n      return;\n    }\n    this.container = this.view.middleGroup.addGroup();\n    this.container.set('name', 'rectGroups');\n    this.container.setZIndex(-100);\n    const geometry = this.getGeometry();\n    const shapes = map(geometry?.elements, (element) => element.shape);\n    for (let i = 0; i < this.cfg.ranges.length; i += 1) {\n      const shapeBox = shapes[i].getBBox();\n      const widthRatio = shapeBox.width / shapes[i].get('origin').data[this.cfg.yField];\n      this.drawRect(shapeBox, this.cfg.ranges[i] || [0, 1], widthRatio);\n    }\n    this.view.canvas.draw();\n  }\n\n  protected drawRect(box: BBox, ranges: number[], widthRatio: number) {\n    const options = this.cfg;\n    const rangeColors = options.rangeColors;\n    let xPos = box.minX;\n    const yPos = box.minY - (box.height * (options.rangeSize - 1)) / 2;\n    for (let i = 1; i < ranges.length; i += 1) {\n      const width = (ranges[i] - ranges[i - 1]) * options.rangeMax * widthRatio;\n      this.container\n        .addShape('rect', {\n          name: 'bullet-rect',\n          attrs: {\n            width,\n            height: box.height * options.rangeSize,\n            x: xPos,\n            y: yPos,\n            fill: rangeColors[(i - 1) % rangeColors.length],\n            fillOpacity: 0.25,\n          },\n        })\n        .set('zIndex', -1);\n      xPos += width;\n    }\n    if (options.axis && options.axis.visible) {\n      const tickInterval = options.rangeMax / (options.axis.tickCount - 1);\n      const rangeBox = new BBox(box.x, yPos, xPos, box.height * options.rangeSize);\n      this.drawBulletTicks(rangeBox, tickInterval, widthRatio);\n    }\n  }\n\n  /** 添加 ticks  */\n  protected drawBulletTicks(box: BBox, tickInterval: number, widthRatio: number) {\n    const options = this.cfg;\n    const ticksStyle = options.axis.style;\n    const tickCount = options.axis.tickCount;\n    const tickPosition = options.axis.position;\n    const tickOffset = get(ticksStyle, 'lineHeight', 0) - ticksStyle.fontSize / 2;\n    for (let tickIdx = 0; tickIdx < tickCount; tickIdx += 1) {\n      const x = box.minX + tickInterval * tickIdx * widthRatio;\n      let tickText = `${tickInterval * tickIdx}`;\n      if (options.axis.formatter) {\n        tickText = options.axis.formatter(tickText, tickIdx);\n      }\n      this.container.addShape('text', {\n        name: 'tick',\n        attrs: {\n          x,\n          y: tickPosition === 'before' ? box.minY - tickOffset : box.maxY + tickOffset,\n          text: `${tickText}`,\n          ...ticksStyle,\n        },\n      });\n      if (options.axis.tickLine && options.axis.tickLine.visible) {\n        const tickLineCfg = options.axis.tickLine;\n        if (tickIdx > 0 && tickIdx !== tickCount - 1) {\n          this.container\n            .addShape('path', {\n              attrs: {\n                path: [\n                  ['M', x, box.minY],\n                  ['L', x, box.maxY],\n                ],\n                ...tickLineCfg,\n              },\n            })\n            .set('zIndex', -1);\n        }\n      }\n    }\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.remove();\n    }\n  }\n\n  private _init() {\n    this.view.on('beforerender', () => {\n      this.clear();\n    });\n\n    this.view.on('afterrender', () => {\n      this.draw();\n    });\n  }\n\n  private getGeometry() {\n    return find(this.view.geometries, (geometry) => geometry.type === 'interval');\n  }\n}\n","import BBox from '../../../util/bbox';\nimport { View, Geometry, IGroup } from '../../../dependents';\nimport { find, map } from '@antv/util';\n\nexport interface BulletTargetCfg {\n  targets: number[][];\n  markerSize: number;\n  yField: string;\n  markerColors: string[];\n  markerStyle?: {\n    fill?: string;\n    stroke?: string;\n    strokeOpacity?: number;\n    [k: string]: any;\n  };\n}\n\nexport default class BulletTarget {\n  private view: View;\n  private container: IGroup;\n  private cfg: BulletTargetCfg;\n\n  constructor(view: View, cfg: BulletTargetCfg) {\n    this.view = view;\n    this.cfg = cfg;\n    this._init();\n  }\n\n  /** 绘制辅助labels */\n  public draw() {\n    if (!this.view || this.view.destroyed) {\n      return;\n    }\n    this.container = this.view.foregroundGroup.addGroup();\n    this.container.set('name', 'targetGroups');\n    const shapes = map(this.getGeometry().elements, (element: any) => element.shape);\n    for (let i = 0; i < this.cfg.targets.length; i += 1) {\n      const shapeBox = shapes[i].getBBox();\n      const widthRatio = shapeBox.width / shapes[i].get('origin').data[this.cfg.yField];\n      this.drawTarget(shapeBox, this.cfg.targets[i], widthRatio);\n    }\n    this.view.canvas.draw();\n  }\n\n  protected drawTarget(box: BBox, targets: number[], widthRatio: number) {\n    const options = this.cfg;\n    const colors = options.markerColors;\n    /** 添加目标值 */\n    targets.forEach((target: number, i) => {\n      const markerStyle = options.markerStyle;\n      this.container.addShape('rect', {\n        name: 'bullet-target',\n        attrs: {\n          width: markerStyle.width,\n          height: box.height * options.markerSize - markerStyle.width / 2,\n          x: box.minX + target * widthRatio,\n          y: box.minY - (box.height * (options.markerSize - 1)) / 2,\n          ...markerStyle,\n          fill: colors[i % colors.length] || markerStyle.fill,\n        },\n      });\n    });\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.remove();\n    }\n  }\n\n  private _init() {\n    this.view.on('beforerender', () => {\n      this.clear();\n    });\n\n    this.view.on('afterrender', () => {\n      this.draw();\n    });\n  }\n\n  private getGeometry() {\n    return find(this.view.geometries, (geometry) => geometry.type === 'interval') as Geometry;\n  }\n}\n","import { registerTheme } from '../../theme';\n\nconst BULLET_ACTIVE_STYLE = (style) => {\n  const opacity = style.opacity || 1;\n  return { opacity: opacity * 0.5, lineWidth: 0 };\n};\n\nconst BULLET_DISABLE_STYLE = (style) => {\n  const opacity = style.opacity || 1;\n  return { opacity: opacity * 0.5 };\n};\n\nregisterTheme('bullet', {\n  columnStyle: {\n    normal: {},\n    active: BULLET_ACTIVE_STYLE,\n    disable: BULLET_DISABLE_STYLE,\n    selected: {},\n  },\n});\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport CalenderLayer from './layer';\n\n// 注册日历图的自定义 shape\nimport './shape';\n\nexport type CalendarConfig = PlotConfig;\n\n/**\n * 日历图\n */\nexport default class Calendar extends BasePlot<any> {\n  public static getDefaultOptions: typeof CalenderLayer.getDefaultOptions = CalenderLayer.getDefaultOptions;\n\n  /**\n   * 复写父类方法\n   * @param props\n   */\n  protected createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'calendar';\n    super.createLayers(layerProps);\n  }\n}\n","import { deepMix, isNil, map, get } from '@antv/util';\nimport fecha from 'fecha';\nimport { DataItem, LayerConfig, ViewConfig } from '../..';\nimport ViewLayer from '../../base/view-layer';\nimport { DAY_FIELD, FORMATTER, MONTHS, WEEK_FIELD, WEEKS } from './constant';\nimport { generateCalendarData, getMonthCenterWeek } from './util';\nimport { registerPlotType } from '../../base/global';\nimport { getDateRange } from '../../util/date';\nimport { getComponent } from '../../components/factory';\nimport * as EventParser from './event';\n\n/** 日历图配置定义 */\nexport interface CalendarViewConfig extends ViewConfig {\n  /** 字段信息 */\n  readonly dateField: string; // YYYY-MM-DD\n  /** 映射的颜色值字段 */\n  readonly valueField: string;\n  /** 日历图的起止时间：[2019-10, 2020-03] */\n  readonly dateRange?: string[];\n  // 映射的颜色色板\n  readonly colors?: string[] | string;\n  // 对应的月份枚举\n  readonly months?: string[];\n  // 对应的星期枚举值\n  readonly weeks?: string[];\n}\n\ninterface CalendarLayerConfig extends CalendarViewConfig, LayerConfig {}\n\n/**\n * 日历图\n */\nexport default class CalendarLayer extends ViewLayer<CalendarLayerConfig> {\n  public type: string = 'calendar';\n\n  public static getDefaultOptions(): Partial<CalendarLayerConfig> {\n    return deepMix({}, super.getDefaultOptions(), {\n      xAxis: {\n        line: {\n          visible: false,\n        },\n        grid: {\n          visible: false,\n        },\n        tickLine: {\n          visible: false,\n        },\n        label: {\n          visible: true,\n          autoRotate: false,\n          autoHide: false,\n        },\n      },\n      yAxis: {\n        line: {\n          visible: false,\n        },\n        grid: {\n          visible: false,\n        },\n        tickLine: {\n          visible: false,\n        },\n        label: {\n          visible: true,\n          autoRotate: false,\n          autoHide: false,\n        },\n      },\n      legend: { visible: false },\n      meta: {\n        [DAY_FIELD]: {\n          type: 'cat',\n          alias: 'Day',\n          values: [0, 1, 2, 3, 4, 5, 6],\n        },\n        [WEEK_FIELD]: {\n          type: 'cat',\n          alias: 'Month',\n        },\n      },\n      tooltip: {\n        visible: true,\n        showTitle: true,\n        showCrosshairs: false,\n        showMarkers: false,\n        title: 'date',\n      },\n    });\n  }\n\n  /**\n   * 复写父类的数据处理类，主要完成：\n   * 1. 生成 polygon 的 x y field（虚拟的，无需用户传入）\n   *\n   * @param data\n   */\n  protected processData(data?: DataItem[]): DataItem[] | undefined {\n    const { dateField } = this.options;\n    let { dateRange } = this.options;\n\n    // 给与默认值是当前这一年\n    if (isNil(dateRange)) {\n      const dates = map(data, (datum: DataItem) => fecha.parse(`${datum[dateField]}`, FORMATTER));\n      dateRange = getDateRange(dates);\n    }\n\n    return generateCalendarData(data, dateRange, dateField);\n  }\n\n  protected addGeometry(): void {\n    const { valueField, colors, tooltip } = this.options;\n    const polygonConfig: any = {\n      type: 'polygon',\n      position: {\n        fields: [WEEK_FIELD, DAY_FIELD],\n      },\n      shape: {\n        values: ['calendar-polygon'],\n      },\n      color: {\n        fields: [valueField],\n        values: colors,\n      },\n      label: this.extractLabel(),\n    };\n\n    if (tooltip && (tooltip.fields || tooltip.formatter)) {\n      this.geometryTooltip(polygonConfig);\n    }\n\n    this.setConfig('geometry', polygonConfig);\n  }\n\n  protected geometryTooltip(geomConfig) {\n    geomConfig.tooltip = {};\n    const tooltipOptions: any = this.options.tooltip;\n    if (tooltipOptions.fields) {\n      geomConfig.tooltip.fields = tooltipOptions.fields;\n    }\n    if (tooltipOptions.formatter) {\n      geomConfig.tooltip.callback = tooltipOptions.formatter;\n      if (!tooltipOptions.fields) {\n        geomConfig.tooltip.fields = [WEEK_FIELD, DAY_FIELD];\n      }\n    }\n  }\n\n  private extractLabel() {\n    const props = this.options;\n    const label = props.label;\n    if (label && label.visible === false) {\n      return false;\n    }\n    const { valueField } = this.options;\n\n    return getComponent('label', {\n      plot: this,\n      fields: [valueField],\n      position: 'top',\n      offset: 0,\n      ...label,\n    });\n  }\n\n  /**\n   * 写入坐标系配置，默认增加镜像\n   */\n  protected coord(): void {\n    // 默认做镜像处理\n    const coordinateConfig = {\n      type: 'rect',\n      cfg: {},\n      actions: [['reflect', 'y']],\n    } as any;\n    this.setConfig('coordinate', coordinateConfig);\n  }\n\n  /**\n   * 无需 geometry parser，直接使用 polygon 即可\n   */\n  protected geometryParser(): string {\n    return '';\n  }\n\n  protected axis(): void {\n    const xAxis_parser = getComponent('axis', {\n      plot: this,\n      dim: 'x',\n    });\n    const yAxis_parser = getComponent('axis', {\n      plot: this,\n      dim: 'y',\n    });\n    const axesConfig = {};\n    axesConfig[WEEK_FIELD] = xAxis_parser;\n    axesConfig[DAY_FIELD] = yAxis_parser;\n    /** 存储坐标轴配置项到config */\n    this.setConfig('axes', axesConfig);\n  }\n\n  protected scale(): void {\n    super.scale();\n\n    const monthWeek = getMonthCenterWeek(this.options.dateRange);\n\n    // 拿出 scale 二次加工，主要是配置 x y 中的标题显示\n    const scales = this.config.scales;\n    const { weeks = WEEKS, months = MONTHS } = this.options;\n\n    const x = scales[WEEK_FIELD];\n    const y = scales[DAY_FIELD];\n    // 1. 设置 formatter\n    x.formatter = (v) => {\n      const m = monthWeek[v];\n      return m !== undefined ? months[m] : '';\n    };\n\n    y.formatter = (v) => weeks[v] || '';\n\n    // 2. 设置 alias\n    const { xAxis, yAxis } = this.options;\n    x.alias = get(xAxis, ['title', 'text'], x.alias);\n    y.alias = get(yAxis, ['title', 'text'], y.alias);\n\n    this.setConfig('scales', scales);\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n}\n\n// 注册到池子中\nregisterPlotType('calendar', CalendarLayer);\n","import fecha from 'fecha';\nimport { head, last, find } from '@antv/util';\nimport { DataItem } from '../..';\nimport { DATE_FIELD, DAY_FIELD, FORMATTER, WEEK_FIELD } from './constant';\nimport { advanceBy, DAY_MS, getDay, getWeek } from '../../util/date';\n\n/**\n * 解析日期\n * @param dateRange\n */\nfunction parseDateRange(dateRange: string[]): Date[] {\n  const [from, to] = dateRange;\n\n  let fromDate = fecha.parse(from, FORMATTER);\n  let toDate = fecha.parse(to, FORMATTER);\n\n  // 交换顺序\n  if (fromDate > toDate) {\n    [toDate, fromDate] = [fromDate, toDate];\n  }\n\n  return [fromDate, toDate];\n}\n\n/**\n * 根据 range 补齐日历图的数据\n * @param data 传入数据\n * @param dateRange 日期区间\n * @param dateField 日期字段\n */\nexport function generateCalendarData(data: DataItem[], dateRange: string[], dateField: string): DataItem[] {\n  const all = [];\n\n  const [fromDate, toDate] = parseDateRange(dateRange);\n  // copy 一份\n  const curr = new Date(fromDate);\n  while (curr <= toDate) {\n    const dateString = fecha.format(curr, FORMATTER);\n    // 找到对应的数据\n    const datum = find(data, (datum: DataItem) => datum[dateField] === dateString);\n\n    all.push({\n      [DAY_FIELD]: getDay(curr),\n      [WEEK_FIELD]: `${getWeek(curr)}`,\n      [dateField]: dateString,\n      [DATE_FIELD]: new Date(curr), // copy\n      ...datum,\n    });\n\n    // 向前移动一天\n    advanceBy(curr, DAY_MS);\n  }\n\n  return all;\n}\n\n/**\n * 计算每个月的中间周。\n */\nexport function getMonthCenterWeek(dateRange: string[]): Record<number, number> {\n  const [fromDate, toDate] = parseDateRange(dateRange);\n\n  const monthWeekMap = new Map<number, number[]>();\n\n  function append(current: Date) {\n    const month = current.getMonth(); // 从 0 开始\n    const week = getWeek(current);\n\n    if (!monthWeekMap.has(month)) {\n      monthWeekMap.set(month, []);\n    }\n\n    monthWeekMap.get(month).push(week);\n  }\n\n  // copy 一份\n  const curr = new Date(fromDate);\n  while (curr <= toDate) {\n    // 设置到 map 中\n    append(curr);\n\n    // 向前移动 7 天（一周）\n    advanceBy(curr, DAY_MS * 7);\n  }\n\n  // 增加最后一个日期的计算\n  if (toDate < curr) {\n    append(toDate);\n  }\n\n  // 处理数据，返回结果\n  const result: Record<number, number> = {}; // week -> month\n\n  monthWeekMap.forEach((v: number[], k: number) => {\n    const w = Math.ceil((head(v) + last(v)) / 2); // 取平均值\n    result[w] = k;\n  });\n\n  return result;\n}\n","import { assign } from '@antv/util';\nimport { getEventMap, EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst componentMap = {\n  rect: 'polygon',\n};\n\nconst SHAPE_EVENT_MAP: IEventmap = getEventMap(componentMap);\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","import { isEmpty } from '@antv/util';\nimport { registerShape } from '@antv/g2';\nimport { DATE_FIELD } from './constant';\nimport { isLastDayOfMonth, isLastWeekOfMonth } from '../../util/date';\nimport { Point } from '../..';\n\n/**\n * 注册自定义日历图的 shape\n * code from https://g2.antv.vision/zh/examples/heatmap/heatmap#calendar-horizontal\n */\nregisterShape('polygon', 'calendar-polygon', {\n  draw(cfg, container) {\n    if (!isEmpty(cfg.points)) {\n      const points = cfg.points as Point[];\n      // rect path\n      let path = [\n        ['M', points[0].x, points[0].y],\n        ['L', points[1].x, points[1].y],\n        ['L', points[2].x, points[2].y],\n        ['L', points[3].x, points[3].y],\n        ['Z'],\n      ];\n      path = this.parsePath(path);\n\n      const attrs = {\n        stroke: '#fff',\n        lineWidth: 1,\n        fill: cfg.color,\n        ...cfg.style,\n        path,\n      };\n\n      const polygon = container.addShape('path', {\n        attrs,\n      });\n\n      const date: Date = cfg.data[DATE_FIELD];\n\n      if (isLastWeekOfMonth(date)) {\n        const linePath = [\n          ['M', points[2].x, points[2].y],\n          ['L', points[3].x, points[3].y],\n        ];\n        // 最后一周的多边形添加右侧边框\n        container.addShape('path', {\n          zIndex: 1,\n          attrs: {\n            path: this.parsePath(linePath),\n            lineWidth: 1,\n            stroke: '#404040',\n          },\n        });\n        if (isLastDayOfMonth(date)) {\n          container.addShape('path', {\n            zIndex: 1,\n            attrs: {\n              path: this.parsePath([\n                ['M', points[1].x, points[1].y],\n                ['L', points[2].x, points[2].y],\n              ]),\n              lineWidth: 1,\n              stroke: '#404040',\n            },\n          });\n        }\n      }\n\n      container.sort();\n\n      return polygon;\n    }\n  },\n});\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport GaugeLayer, { GaugeLayerConfig } from './layer';\n\nexport interface GaugeConfig extends GaugeLayerConfig, PlotConfig {}\n\nexport default class Gauge extends BasePlot<GaugeConfig> {\n  public static getDefaultOptions: typeof GaugeLayer.getDefaultOptions = GaugeLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'gauge';\n    super.createLayers(layerProps);\n  }\n}\n","import { assign } from '@antv/util';\nimport { getEventMap, EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst componentMap = {\n  range: 'point',\n  statistic: 'annotation-text',\n};\n\nconst SHAPE_EVENT_MAP: IEventmap = getEventMap(componentMap);\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport FanGaugeLayer, { FanGaugeLayerConfig } from './layer';\n\nexport interface FanGaugeConfig extends FanGaugeLayerConfig, PlotConfig {}\n\nexport default class FanGauge extends BasePlot<FanGaugeConfig> {\n  public static getDefaultOptions: typeof FanGaugeLayer.getDefaultOptions = FanGaugeLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'fanGauge';\n    super.createLayers(layerProps);\n  }\n}\n","import { deepMix, uniqueId } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport GaugeLayer from '../gauge/layer';\nimport { GaugeShape } from '../gauge/geometry/shape/gauge-shape';\nimport { GaugeViewConfig } from '../gauge/interface';\nimport { LayerConfig } from '../../base/layer';\n\nexport interface FanGaugeViewConfig extends GaugeViewConfig {}\n\nexport interface FanGaugeLayerConfig extends FanGaugeViewConfig, LayerConfig {}\n\nexport default class FanGaugeLayer<T extends FanGaugeLayerConfig = FanGaugeLayerConfig> extends GaugeLayer<T> {\n  public static getDefaultOptions() {\n    return deepMix({}, super.getDefaultOptions(), {\n      rangeColor: '#F6445A',\n      rangeSize: 70,\n      axis: {\n        visible: true,\n        offset: 5,\n        tickCount: 10,\n        subTickCount: 4,\n        tickLine: {\n          visible: true,\n          length: 3,\n          style: {\n            stroke: '#aaa',\n            lineWidth: 3,\n          },\n        },\n        label: {\n          visible: true,\n          style: {\n            fill: '#aaa',\n            fontSize: 16,\n            textAlign: 'center',\n            textBaseline: 'middle',\n          },\n        },\n      },\n    });\n  }\n\n  public type: string = 'fanGauge';\n\n  protected initG2Shape() {\n    this.gaugeShape = new GaugeShape(uniqueId());\n    this.gaugeShape.setOption(\n      this.type,\n      deepMix({}, this.options, {\n        radius: 1,\n        angle: 120,\n        textPosition: '125%',\n        bottomRatio: 3.5,\n      })\n    );\n    this.gaugeShape.render();\n  }\n\n  protected axis() {\n    const axesConfig: any = {\n      value: false,\n      1: false,\n    };\n    this.setConfig('axes', axesConfig);\n  }\n\n  protected annotation() {\n    const { statistic } = this.options;\n    const annotationConfigs = [];\n    // @ts-ignore\n    if (statistic && statistic.visible) {\n      const statistics = this.renderStatistic();\n      annotationConfigs.push(statistics);\n    }\n    const siderTexts = this.renderSideText();\n    const allAnnotations = annotationConfigs.concat(siderTexts);\n    this.setConfig('annotations', allAnnotations);\n  }\n\n  protected renderSideText() {\n    const { max, min, format, rangeSize, axis } = this.options;\n    const OFFSET_Y = 12;\n    return [min, max].map((value, index) => {\n      return {\n        type: 'text',\n        top: true,\n        position: ['50%', '50%'],\n        content: format(value),\n        style: deepMix({}, axis.label.style, {\n          textAlign: 'center',\n        }),\n        offsetX: !index ? -rangeSize : rangeSize,\n        offsetY: OFFSET_Y,\n      };\n    });\n  }\n}\n\nregisterPlotType('fanGauge', FanGaugeLayer);\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport MeterGaugeLayer, { MeterGaugeLayerConfig } from './layer';\n\nexport interface MeterGaugeConfig extends MeterGaugeLayerConfig, PlotConfig {}\n\nexport default class MeterGauge extends BasePlot<MeterGaugeConfig> {\n  public static getDefaultOptions: typeof MeterGaugeLayer.getDefaultOptions = MeterGaugeLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'meterGauge';\n    super.createLayers(layerProps);\n  }\n}\n","import { deepMix } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport GaugeLayer from '../gauge/layer';\nimport { GaugeViewConfig } from '../gauge/interface';\n\nexport type MeterGaugeViewConfig = GaugeViewConfig;\n\nexport interface MeterGaugeLayerConfig extends MeterGaugeViewConfig, LayerConfig {}\n\nexport default class MeterGaugeLayer<T extends MeterGaugeLayerConfig = MeterGaugeLayerConfig> extends GaugeLayer<T> {\n  public static getDefaultOptions() {\n    return deepMix({}, super.getDefaultOptions(), {\n      axis: {\n        visible: true,\n        offset: -10,\n        tickCount: 25,\n        subTickCount: 4,\n        tickLine: {\n          visible: true,\n          length: 2,\n          style: {\n            stroke: '#aaa',\n            lineWidth: 1,\n          },\n        },\n      },\n    });\n  }\n\n  public type: string = 'meterGauge';\n}\n\nregisterPlotType('meterGauge', MeterGaugeLayer);\n","// 兼容 0.x的图表类型\nexport { default as Ring, RingConfig } from './ring';\nexport { default as GroupColumn, GroupColumnConfig } from './group-column';\nexport { default as GroupBar, GroupBarConfig } from './group-bar';\nexport { default as PercentageStackArea, PercentageStackAreaConfig } from './percentage-stack-area';\nexport { default as PercentageStackBar, PercentageStackBarConfig } from './percentage-stack-bar';\nexport { default as PercentageStackColumn, PercentageStackColumnConfig } from './percentage-stack-column';\nexport { default as StackArea, StackAreaConfig } from './stack-area';\nexport { default as StackBar, StackBarConfig } from './stack-bar';\nexport { default as StackColumn, StackColumnConfig } from './stack-column';\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../../base/plot';\nimport warning from 'warning';\nimport DonutLayer, { DonutViewConfig } from '../../donut/layer';\n\nexport interface RingConfig extends DonutViewConfig, PlotConfig {}\n\nexport default class Ring extends BasePlot<RingConfig> {\n  public static getDefaultOptions: typeof DonutLayer.getDefaultOptions = DonutLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'donut';\n    super.createLayers(layerProps);\n    warning(false, 'Please use \"Donut\" instead of \"Ring\" which was not recommended.');\n  }\n}\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../../base/plot';\nimport warning from 'warning';\nimport GroupedColumnLayer, { GroupedColumnViewConfig } from '../../grouped-column/layer';\n\nexport interface GroupColumnConfig extends GroupedColumnViewConfig, PlotConfig {}\n\nexport default class GroupColumn extends BasePlot<GroupColumnConfig> {\n  public static getDefaultOptions: typeof GroupedColumnLayer.getDefaultOptions = GroupedColumnLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'groupedColumn';\n    super.createLayers(layerProps);\n    warning(false, 'Please use \"GroupedColumn\" instead of \"GroupColumn\" which was not recommended.');\n  }\n}\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../../base/plot';\nimport warning from 'warning';\nimport GroupedBarLayer, { GroupedBarViewConfig } from '../../grouped-bar/layer';\n\nexport interface GroupBarConfig extends GroupedBarViewConfig, PlotConfig {}\n\nexport default class GroupBar extends BasePlot<GroupBarConfig> {\n  public static getDefaultOptions: typeof GroupedBarLayer.getDefaultOptions = GroupedBarLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'groupedBar';\n    super.createLayers(layerProps);\n    warning(false, 'Please use \"GroupedBar\" instead of \"GroupBar\" which was not recommended.');\n  }\n}\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../../base/plot';\nimport warning from 'warning';\nimport PercentStackedAreaLayer, { PercentStackedAreaViewConfig } from '../../percent-stacked-area/layer';\n\nexport interface PercentageStackAreaConfig extends PercentStackedAreaViewConfig, PlotConfig {}\n\nexport default class PercentageStackArea extends BasePlot<PercentageStackAreaConfig> {\n  public static getDefaultOptions: typeof PercentStackedAreaLayer.getDefaultOptions =\n    PercentStackedAreaLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'percentStackedArea';\n    super.createLayers(layerProps);\n    warning(false, 'Please use \"PercentStackedArea\" instead of \"PercentageStackArea\" which was not recommended.');\n  }\n}\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../../base/plot';\nimport warning from 'warning';\nimport PercentStackedBarLayer, { PercentStackedBarViewConfig } from '../../percent-stacked-bar/layer';\n\nexport interface PercentageStackBarConfig extends PercentStackedBarViewConfig, PlotConfig {}\n\nexport default class PercentageStackBar extends BasePlot<PercentageStackBarConfig> {\n  public static getDefaultOptions: typeof PercentStackedBarLayer.getDefaultOptions =\n    PercentStackedBarLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'percentStackedBar';\n    super.createLayers(layerProps);\n    warning(false, 'Please use \"PercentStackedBar\" instead of \"PercentageStackBar\" which was not recommended.');\n  }\n}\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../../base/plot';\nimport warning from 'warning';\nimport PercentStackedColumnLayer, { PercentStackedColumnViewConfig } from '../../percent-stacked-column/layer';\n\nexport interface PercentageStackColumnConfig extends PercentStackedColumnViewConfig, PlotConfig {}\n\nexport default class PercentageStackColumn extends BasePlot<PercentageStackColumnConfig> {\n  public static getDefaultOptions: typeof PercentStackedColumnLayer.getDefaultOptions =\n    PercentStackedColumnLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'percentStackedColumn';\n    super.createLayers(layerProps);\n    warning(false, 'Please use \"PercentStackedColumn\" instead of \"PercentageStackColumn\" which was not recommended.');\n  }\n}\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../../base/plot';\nimport warning from 'warning';\nimport StackedAreaLayer from '../../stacked-area/layer';\nimport { StackedAreaViewConfig } from '../../stacked-area/interface';\n\nexport interface StackAreaConfig extends StackedAreaViewConfig, PlotConfig {}\n\nexport default class StackArea extends BasePlot<StackAreaConfig> {\n  public static getDefaultOptions: typeof StackedAreaLayer.getDefaultOptions = StackedAreaLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'stackedArea';\n    super.createLayers(layerProps);\n    warning(false, 'Please use \"StackedArea\" instead of \"StackArea\" which was not recommended.');\n  }\n}\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../../base/plot';\nimport warning from 'warning';\nimport StackedBarLayer, { StackedBarViewConfig } from '../../stacked-bar/layer';\n\nexport interface StackBarConfig extends StackedBarViewConfig, PlotConfig {}\n\nexport default class StackBar extends BasePlot<StackBarConfig> {\n  public static getDefaultOptions: typeof StackedBarLayer.getDefaultOptions = StackedBarLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'stackedBar';\n    super.createLayers(layerProps);\n    warning(false, 'Please use \"StackedBar\" instead of \"StackBar\" which was not recommended.');\n  }\n}\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../../base/plot';\nimport warning from 'warning';\nimport StackedColumnLayer, { StackedColumnViewConfig } from '../../stacked-column/layer';\n\nexport interface StackColumnConfig extends StackedColumnViewConfig, PlotConfig {}\n\nexport default class StackColumn extends BasePlot<StackColumnConfig> {\n  public static getDefaultOptions: typeof StackedColumnLayer.getDefaultOptions = StackedColumnLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'stackedColumn';\n    super.createLayers(layerProps);\n    warning(false, 'Please use \"StackedColumn\" instead of \"StackColumn\" which was not recommended.');\n  }\n}\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport ProgressLayer, { ProgressViewConfig } from './layer';\n\nexport interface ProgressConfig extends ProgressViewConfig, PlotConfig {}\n\nexport default class Progress extends BasePlot<ProgressConfig> {\n  public static getDefaultOptions: typeof ProgressLayer.getDefaultOptions = ProgressLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'progress';\n    super.createLayers(layerProps);\n  }\n\n  public update(value: number, style?) {\n    const layer = this.layers[0] as any;\n    layer.update(value, style);\n  }\n}\n","import { assign, deepMix } from '@antv/util';\nimport { View, IGroup, IShape, Canvas } from '../../../dependents';\n\nexport interface MarkerConfig {\n  view?: View;\n  canvas?: Canvas;\n  progressSize?: number;\n  value: number;\n  style?: any;\n}\n\nexport default class Marker {\n  public canvas: Canvas;\n  public view: View;\n  public progressSize: number;\n  public value: number;\n  public style: any;\n  protected coord: any; //fixme: 类型定义\n  protected container: IGroup;\n  protected shape: IShape;\n\n  constructor(cfg: MarkerConfig) {\n    assign(this, cfg);\n    this.init();\n  }\n\n  public destroy() {\n    if (this.shape) {\n      this.shape.destroy();\n    }\n  }\n\n  public update(cfg: MarkerConfig, duration: number, easing: string) {\n    let updateCfg: any = {};\n    assign(this, cfg);\n    this.coord = this.view.geometries[0].coordinate;\n    if (cfg.value) {\n      const x = this.coord.convert({ x: 0, y: this.value }).x;\n      const matrix = [1, 0, 0, 0, 1, 0, x, 0, 1];\n      updateCfg.matrix = matrix;\n    }\n    if (cfg.style) {\n      const shape: any = this.shape;\n      const origin_attr = shape.attrs;\n      const attrs = deepMix({}, origin_attr, cfg.style);\n      updateCfg = deepMix({}, attrs, updateCfg);\n    }\n    this.shape.stopAnimate();\n    this.shape.animate(updateCfg, duration, easing);\n  }\n\n  protected init() {\n    this.coord = this.view.geometries[0].coordinate;\n    this.container = this.view.foregroundGroup.addGroup();\n    const x = this.coord.convert({ x: 0, y: this.value }).x; // progress坐标系是转置坐标系\n    const y0 = this.coord.center.y - this.progressSize / 2 - 2;\n    const y1 = this.coord.center.y + this.progressSize / 2 + 2;\n    const style = deepMix({}, { stroke: 'grey', lineWidth: 1 }, this.style);\n    this.shape = this.container.addShape('path', {\n      attrs: {\n        path: [\n          ['M', 0, y0],\n          ['L', 0, y1],\n        ],\n        ...style,\n      },\n      name: 'progress-marker',\n    });\n    this.shape.move(x, 0);\n    this.canvas.draw();\n  }\n}\n","import { assign } from '@antv/util';\nimport { getEventMap, EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst componentMap = {\n  progress: 'interval',\n};\n\nconst SHAPE_EVENT_MAP: IEventmap = getEventMap(componentMap);\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport RingProgressLayer, { RingProgressViewConfig } from './layer';\n\nexport interface RingProgressConfig extends RingProgressViewConfig, PlotConfig {}\n\nexport default class RingProgress extends BasePlot<RingProgressConfig> {\n  public static getDefaultOptions: typeof RingProgressLayer.getDefaultOptions = RingProgressLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'ringProgress';\n    super.createLayers(layerProps);\n  }\n\n  public update(value: number) {\n    const layer = this.layers[0] as any;\n    layer.update(value);\n  }\n}\n","import { mix } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport { getGeom } from '../../geoms/factory';\nimport ProgressLayer, { ProgressViewConfig } from '../progress/layer';\nimport * as EventParser from './event';\n\nconst DEFAULT_COLOR = ['#55A6F3', '#E8EDF3'];\n\nexport type RingProgressViewConfig = ProgressViewConfig;\nexport interface RingProgressLayerConfig extends RingProgressViewConfig, LayerConfig {}\n\nexport default class RingProgressLayer extends ProgressLayer<RingProgressLayerConfig> {\n  public ring: any;\n  public type: string = 'ringProgrsss';\n\n  public processProps() {\n    let props = this.options;\n    props.data = this.processData();\n    const cfg = {\n      padding: [0, 0, 0, 0],\n      xField: 'value',\n      yField: '1',\n      stackField: 'type',\n      barStyle: props.progressStyle,\n      color: this.parseColorProps(props) || DEFAULT_COLOR,\n    } as any;\n    props = mix(props, cfg);\n  }\n\n  protected coord() {\n    const coordConfig: any = {\n      type: 'theta',\n      cfg: {\n        radius: 1.0,\n        innerRadius: this.getThickness(this.options.size),\n      },\n    };\n    this.setConfig('coordinate', coordConfig);\n  }\n\n  protected annotation() {\n    return;\n  }\n\n  protected addGeometry() {\n    const props = this.options;\n    this.ring = getGeom('interval', 'main', {\n      positionFields: [props.yField, props.xField],\n      plot: this,\n    });\n    this.ring.adjust = [\n      {\n        type: 'stack',\n      },\n    ];\n    this.setConfig('geometry', this.ring);\n  }\n\n  protected animation() {\n    this.ring.animate = {\n      appear: {\n        duration: 1000,\n      },\n    };\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n\n  private getThickness(value?: number): number {\n    const width = this.width;\n    const height = this.height;\n    const size = Math.min(width, height);\n\n    if (value) {\n      return 1.0 - value / size;\n    }\n\n    if (size >= 60) {\n      return 1.0 - 20 / size;\n    }\n    return 1.0 - 10 / size;\n  }\n}\n\nregisterPlotType('ringProgress', RingProgressLayer);\n","import { assign } from '@antv/util';\nimport { getEventMap, EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst componentMap = {\n  ringProgress: 'interval',\n};\n\nconst SHAPE_EVENT_MAP: IEventmap = getEventMap(componentMap);\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport TinyColumnLayer, { TinyColumnLayerConfig } from './layer';\n\nexport interface TinyColumnConfig extends TinyColumnLayerConfig, PlotConfig {}\n\nexport default class TinyColumn extends BasePlot<TinyColumnConfig> {\n  public static getDefaultOptions: typeof TinyColumnLayer.getDefaultOptions = TinyColumnLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'tinyColumn';\n    super.createLayers(layerProps);\n  }\n}\n","import { mix, each } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport { getGeom } from '../../geoms/factory';\nimport TinyLayer, { TinyViewConfig } from '../tiny-layer';\nimport * as EventParser from './event';\nimport { IStyle } from '../../interface/config';\n\nconst WIDTH_RATIO = 0.6;\n\nconst G2_GEOM_MAP = {\n  column: 'interval',\n};\n\nconst PLOT_GEOM_MAP = {\n  interval: 'column',\n};\n\nexport interface TinyColumnViewConfig extends TinyViewConfig {\n  columnStyle?: IStyle;\n}\nexport interface TinyColumnLayerConfig extends TinyColumnViewConfig, LayerConfig {}\n\nexport default class TinyColumnLayer extends TinyLayer<TinyColumnLayerConfig> {\n  public line: any;\n  public area: any;\n  public type: string = 'tinyColumn';\n\n  public init() {\n    this.processProps();\n    super.init();\n  }\n\n  protected geometryParser(dim: string, type: string): string {\n    if (dim === 'g2') {\n      return G2_GEOM_MAP[type];\n    }\n    return PLOT_GEOM_MAP[type];\n  }\n\n  protected scale() {\n    const { options } = this;\n    const scales = {};\n    /** 配置x-scale */\n    scales[options.xField] = { type: 'cat' };\n    this.setConfig('scales', scales);\n  }\n\n  protected addGeometry() {\n    const props = this.options;\n    const column = getGeom('interval', 'main', {\n      positionFields: [props.xField, props.yField],\n      plot: this,\n    });\n    this.setConfig('geometry', column);\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n\n  private processProps() {\n    const cfg = {\n      padding: [0, 0, 0, 0],\n      columnSize: this.getSize(),\n    } as any;\n    this.options = mix(this.options, cfg);\n  }\n\n  private getSize() {\n    const props = this.options;\n    const columnNumber = this.getColumnNum(props.data, props.xField);\n    const width = this.width;\n    return (width / columnNumber) * WIDTH_RATIO;\n  }\n\n  private getColumnNum(data, field) {\n    const values = [];\n    each(data, (d) => {\n      const v = d[field];\n      if (values.indexOf(v) < 0) {\n        values.push(v);\n      }\n    });\n    return values.length;\n  }\n}\n\nregisterPlotType('tinyColumn', TinyColumnLayer);\n","import { assign } from '@antv/util';\nimport { EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst SHAPE_EVENT_MAP: IEventmap = {\n  onColumnClick: 'interval:click',\n  onColumnDblclick: 'interval:dblclick',\n  onColumnMousemove: 'interval:mousemove',\n  onColumnMousedown: 'interval:mousedown',\n  onColumnMouseup: 'interval:mouseup',\n  onColumnMouseenter: 'interval:mouseenter',\n  onColumnMouseleave: 'interval:mouseleave',\n  onColumnContextmenu: 'interval:contextmenu',\n};\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport TinyAreaLayer, { TinyAreaViewConfig } from './layer';\n\nexport interface TinyAreaConfig extends TinyAreaViewConfig, PlotConfig {}\n\nexport default class TinyArea extends BasePlot<TinyAreaConfig> {\n  public static getDefaultOptions: typeof TinyAreaLayer.getDefaultOptions = TinyAreaLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'tinyArea';\n    super.createLayers(layerProps);\n  }\n}\n","import { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport { getGeom } from '../../geoms/factory';\nimport TinyLayer, { TinyViewConfig } from '../tiny-layer';\nimport * as EventParser from './event';\nimport { IStyle } from '../../interface/config';\n\nconst GEOM_MAP = {\n  area: 'area',\n  line: 'line',\n};\n\nexport interface TinyAreaViewConfig extends TinyViewConfig {\n  areaStyle?: IStyle;\n  lineStyle?: IStyle;\n  smooth?: boolean;\n}\n\nexport interface TinyAreaLayerConfig extends TinyAreaViewConfig, LayerConfig {}\n\nexport default class TinyAreaLayer extends TinyLayer<TinyAreaLayerConfig> {\n  public line: any;\n  public area: any;\n  public type: string = 'tinyArea';\n\n  protected geometryParser(dim: string, type: string): string {\n    return GEOM_MAP[type];\n  }\n\n  protected addGeometry() {\n    this.area = getGeom('area', 'mini', {\n      plot: this,\n    });\n    this.setConfig('geometry', this.area);\n\n    this.line = getGeom('line', 'mini', {\n      plot: this,\n    });\n    this.setConfig('geometry', this.line);\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n}\n\nregisterPlotType('tinyArea', TinyAreaLayer);\n","import { assign } from '@antv/util';\nimport { EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst SHAPE_EVENT_MAP: IEventmap = {\n  onAreaClick: 'area:click',\n  onAreaDblclick: 'area:dblclick',\n  onAreaMousemove: 'area:mousemove',\n  onAreaMousedown: 'area:mousedown',\n  onAreaMouseup: 'area:mouseup',\n  onAreaMouseenter: 'area:mouseenter',\n  onAreaMouseleave: 'area:mouseleave',\n  onAreaContextmenu: 'area:contextmenu',\n  onLineClick: 'line:click',\n  onLineDblclick: 'line:dblclick',\n  onLineMousemove: 'line:mousemove',\n  onLineMousedown: 'line:mousedown',\n  onLineMouseup: 'line:mouseup',\n  onLineMouseenter: 'line:mouseenter',\n  onLineMouseleave: 'line:mouseleave',\n  onLineContextmenu: 'line:contextmenu',\n};\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","import { deepMix } from '@antv/util';\nimport BasePlot, { PlotConfig } from '../../base/plot';\nimport TinyLineLayer, { TinyLineViewConfig } from './layer';\n\nexport interface TinyLineConfig extends TinyLineViewConfig, PlotConfig {}\n\nexport default class TinyLine extends BasePlot<TinyLineConfig> {\n  public static getDefaultOptions: typeof TinyLineLayer.getDefaultOptions = TinyLineLayer.getDefaultOptions;\n\n  public createLayers(props) {\n    const layerProps = deepMix({}, props);\n    layerProps.type = 'tinyLine';\n    super.createLayers(layerProps);\n  }\n}\n","import { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport { getGeom } from '../../geoms/factory';\nimport TinyLayer, { TinyViewConfig } from '../tiny-layer';\nimport * as EventParser from './event';\nimport { IStyle } from '../../interface/config';\n\nconst GEOM_MAP = {\n  line: 'line',\n};\n\nexport interface TinyLineViewConfig extends TinyViewConfig {\n  lineStyle?: IStyle;\n  smooth?: boolean;\n}\nexport interface TinyLineLayerConfig extends TinyLineViewConfig, LayerConfig {}\n\nexport default class TinyLineLayer extends TinyLayer<TinyLineLayerConfig> {\n  public line: any;\n  public type: string = 'tinyLine';\n\n  protected geometryParser(dim: string, type: string): string {\n    return GEOM_MAP[type];\n  }\n\n  protected addGeometry() {\n    this.line = getGeom('line', 'mini', {\n      plot: this,\n    });\n    this.setConfig('geometry', this.line);\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n}\n\nregisterPlotType('tinyLine', TinyLineLayer);\n","import { assign } from '@antv/util';\nimport { EVENT_MAP, IEventmap, onEvent } from '../../util/event';\n\nconst SHAPE_EVENT_MAP: IEventmap = {\n  onLineClick: 'line:click',\n  onLineDblclick: 'line:dblclick',\n  onLineMousemove: 'line:mousemove',\n  onLineMousedown: 'line:mousedown',\n  onLineMouseup: 'line:mouseup',\n  onLineMouseenter: 'line:mouseenter',\n  onLineMouseleave: 'line:mouseleave',\n  onLineContextmenu: 'line:contextmenu',\n};\n\nassign(EVENT_MAP, SHAPE_EVENT_MAP);\n\nexport { EVENT_MAP, onEvent };\n","import ComboPlot, { ComboPlotConfig } from './base';\nimport { IGroup } from '@antv/g-base';\nimport * as _ from '@antv/util';\nimport { getPlotType } from '../base/global';\nimport Layer from '../base/layer';\nimport '../plots/index';\nimport * as ComboUtil from './util';\nimport { getOverlappingPadding } from './util/padding';\nimport { getGlobalTheme } from '../theme/global';\nimport { ViewLayer } from '..';\n\nexport type OverlappedComboPlotConfig = ComboPlotConfig;\n\nexport default class OverlappedComboPlot<\n  T extends OverlappedComboPlotConfig = OverlappedComboPlotConfig\n> extends ComboPlot<T> {\n  protected isOverlapped: boolean;\n  protected topLayer: Layer;\n  protected backLayer: Layer;\n  protected legendInfo: any[];\n  protected axisInfo: any[];\n  protected legendContainer: IGroup;\n  protected paddingComponents: any[];\n  protected globalOptions: any;\n  protected globalComponents: any[];\n  protected singleGeomCount: number;\n\n  public getDefaultOptions() {\n    return {\n      xAxis: {\n        visible: true,\n        autoHideLabel: false,\n        autoRotateLabel: false,\n        autoRotateTitle: false,\n        grid: {\n          visible: false,\n        },\n        line: {\n          visible: true,\n        },\n        tickLine: {\n          visible: true,\n        },\n        label: {\n          visible: true,\n        },\n        title: {\n          visible: false,\n          offset: 12,\n        },\n      },\n      yAxis: {\n        visible: true,\n        autoHideLabel: false,\n        autoRotateLabel: false,\n        autoRotateTitle: true,\n        grid: {\n          visible: true,\n        },\n        line: {\n          visible: true,\n        },\n        tickLine: {\n          visible: true,\n        },\n        label: {\n          visible: true,\n        },\n        title: {\n          visible: false,\n          offset: 12,\n        },\n        colorMapping: true,\n        synchroTick: true,\n      },\n      label: {\n        visible: false,\n      },\n      tooltip: {\n        visible: true,\n        sort: true,\n      },\n      legend: {\n        visible: true,\n        position: 'top-left',\n      },\n      animation: false,\n    };\n  }\n\n  constructor(container: HTMLElement, props: T) {\n    super(container, props);\n    this.options = props;\n  }\n\n  protected createComboLayers() {\n    this.options.layers = this.layerOptionsFilter(this.options.layers);\n    super.createComboLayers();\n    this.legendInfo = [];\n    this.axisInfo = [];\n    this.paddingComponents = [];\n    this.globalComponents = [];\n    this.singleGeomCount = 0;\n\n    this.backLayer = new Layer({\n      canvas: this.getCanvas(),\n      width: this.width,\n      height: this.height,\n    });\n\n    if (this.options.layers.length > 0) {\n      /** create layers */\n      _.each(this.options.layers, (layerCfg) => {\n        const overlapConfig = this.getOverlappedConfig(layerCfg);\n        const viewLayerCtr = getPlotType(layerCfg.type);\n        const viewLayerProps: T = _.deepMix(\n          {},\n          layerCfg,\n          {\n            canvas: this.canvas,\n            x: 0,\n            y: 0,\n            width: this.width,\n            height: this.height,\n            tooltip: {\n              domStyles: {\n                'g2-tooltip': {\n                  display: 'none',\n                },\n              },\n            },\n          },\n          overlapConfig\n        );\n        const viewLayer = new viewLayerCtr(viewLayerProps);\n        viewLayer.render();\n        viewLayer.hide();\n        this.axisInfo.push(...ComboUtil.getAxisData(viewLayer, viewLayerProps, this.globalOptions));\n        this.legendInfo.push(...ComboUtil.getLegendData(viewLayer, viewLayerProps));\n        this.addLayer(viewLayer);\n      });\n    }\n\n    /** add top layer for legend & tooltip */\n    this.topLayer = new Layer({\n      canvas: this.getCanvas(),\n      width: this.width,\n      height: this.height,\n    });\n    this.topLayer.render();\n  }\n\n  /** 图层叠加时的layer config */\n  protected getOverlappedConfig(layerCfg) {\n    const colorCfg = ComboUtil.getColorConfig(layerCfg.type, layerCfg, this.singleGeomCount);\n    if (colorCfg && colorCfg.single) {\n      this.singleGeomCount++;\n    }\n    return _.deepMix(\n      {},\n      {\n        xAxis: {\n          visible: false,\n        },\n        yAxis: {\n          visible: false,\n        },\n        legend: {\n          visible: false,\n        },\n        /* tooltip: {\n          visible: false,\n        },*/\n        padding: [0, 0, 0, 0],\n        color: colorCfg ? colorCfg.color : null,\n      }\n    );\n  }\n\n  protected overlappingLegend() {\n    const legendItems = ComboUtil.mergeLegendData(this.legendInfo);\n    this.legendContainer = this.topLayer.container.addGroup();\n    return ComboUtil.createLegend(\n      legendItems,\n      this.width,\n      this.height,\n      this.getCanvas(),\n      this.globalOptions.legend.position\n    );\n  }\n\n  public render() {\n    this.doDestroy();\n    this.createComboLayers();\n    if (this.layers.length < 1) {\n      return;\n    }\n    const { bleeding } = getGlobalTheme();\n    if (this.globalOptions.legend.visible) {\n      const legend = this.overlappingLegend();\n      this.globalComponents.push({ type: 'legend', component: legend.component });\n      this.paddingComponents.push(legend);\n    }\n    // 先获取legend的padding\n    const legendPadding = getOverlappingPadding(this.layers[0], this.paddingComponents);\n    const axisComponents = ComboUtil.axesLayout(\n      this.globalOptions,\n      this.axisInfo,\n      legendPadding,\n      this.layers[0],\n      this.width,\n      this.height,\n      this.getCanvas()\n    );\n    this.paddingComponents.push(...axisComponents);\n    _.each(axisComponents, (axis) => {\n      this.globalComponents.push({ type: 'axis', component: axis.component });\n    });\n    // 计算padding\n    const padding = getOverlappingPadding(this.layers[0], this.paddingComponents);\n    if (!this.globalOptions.xAxis.visible) {\n      padding[2] += bleeding[2];\n    }\n    // 更新layers\n    _.each(this.layers, (layer) => {\n      layer.updateConfig({\n        padding,\n      });\n\n      layer.render();\n      layer.show();\n    });\n\n    //补画坐标轴grid\n    if (this.globalOptions.yAxis.grid.visible) {\n      const leftAxis = axisComponents[0].component;\n      const containerLayer = this.layers[0] as ViewLayer;\n      const coord = containerLayer.view.geometries[0].coordinate;\n      const container = containerLayer.view.backgroundGroup;\n      ComboUtil.drawYGrid(leftAxis, coord, container, this.globalOptions);\n    }\n\n    this.canvas.draw();\n\n    if (this.globalOptions.tooltip.visible) {\n      const tooltip = ComboUtil.showTooltip(this.canvas, this.layers);\n      this.globalComponents.push({ type: 'tooltip', component: tooltip });\n    }\n  }\n\n  protected doDestroy() {\n    this.clearComponents();\n    this.eachLayer((layer) => {\n      layer.destroy();\n    });\n    this.layers = [];\n  }\n\n  protected clearComponents() {\n    _.each(this.globalComponents, (c) => {\n      if (c.type === 'legend' || c.type === 'tooltip') {\n        c.component.destroy();\n      }\n      if (c.type === 'axis') {\n        c.component.clear();\n      }\n    });\n    this.paddingComponents = [];\n    this.globalComponents = [];\n  }\n\n  private layerOptionsFilter(options) {\n    const filterOptions = [];\n    _.each(options, (option) => {\n      if (!_.isNil(option.data) && option.data.length > 0) {\n        filterOptions.push(option);\n      }\n    });\n    return filterOptions;\n  }\n}\n","import Plot, { PlotConfig } from '../base/plot';\nimport { deepMix } from '@antv/util';\nimport { ViewLayerConfig } from '../base/view-layer';\n\ninterface ComboPlotLayerConfig extends ViewLayerConfig {\n  type: string;\n}\n\nexport interface ComboPlotConfig extends PlotConfig {\n  layers: ComboPlotLayerConfig[];\n}\n\nexport default class ComboPlot<T extends ComboPlotConfig = ComboPlotConfig> extends Plot<T> {\n  public options: any;\n  protected globalOptions: any;\n\n  public getDefaultOptions() {\n    return {};\n  }\n\n  protected getGlobalOptions(props) {\n    return {\n      xAxis: props.xAxis,\n      yAxis: props.yAxis,\n      theme: props.theme,\n      legend: props.legend,\n    };\n  }\n\n  protected createComboLayers() {\n    this.globalOptions = deepMix({}, this.getDefaultOptions(), this.getGlobalOptions(this.options));\n  }\n}\n","export { getColorConfig } from './adjustColorConfig';\nexport { getLegendData, mergeLegendData, createLegend } from './globalLegend';\nexport { getAxisData, mergeAxisScale, createAxis, axesLayout, drawYGrid } from './globalAxis';\nexport { showTooltip } from './globalTooltip';\n","import { Legend } from '../../dependents';\nimport BBox from '../../util/bbox';\nimport * as _ from '@antv/util';\nimport ViewLayer from '../../base/view-layer';\nimport { getGlobalTheme } from '../../theme/global';\n\nexport function getLegendData(viewLayer: ViewLayer, props) {\n  const legendItems = [];\n  const view = viewLayer.view;\n  const geometry = view.geometries[0];\n  const colorAttr = geometry.attributes.color; // color和shape决定cat legend的生成，暂时先不考虑shape\n  const markerCfg: any = {\n    isInCircle: false,\n    color: colorAttr.values[0],\n  };\n\n  let marker = {\n    symbol: 'circle',\n    style: {\n      r: 4,\n      fill: markerCfg.fill,\n    },\n  };\n  // @ts-ignore\n  if (geometry.shapeFactory) {\n    // @ts-ignore\n    marker = geometry.shapeFactory.getMarker(geometry.type, markerCfg);\n  }\n  /** 处理default不生成图例的场景 */\n  if (colorAttr.scales.length === 1 && colorAttr.scales[0].type == 'identity') {\n    legendItems.push({\n      value: props.name,\n      checked: true,\n      marker,\n      isSingle: true,\n      layer: viewLayer,\n      name: props.name || geometry.type,\n    });\n  } else {\n    /** 正常生成图例 */\n    const values = colorAttr.scales[0].values;\n    _.each(values, (v, index) => {\n      const markerColor = colorAttr.values[index];\n      const markerValue = v;\n      const cfg: any = {\n        isInCircle: false,\n        color: markerColor,\n      };\n      let marker = {\n        symbol: 'circle',\n        style: {\n          r: 4,\n          fill: markerCfg.color,\n        },\n      };\n      // @ts-ignore\n      if (geometry.shapeFactory) {\n        // @ts-ignore\n        marker = geometry.shapeFactory.getMarker(geometry.type, cfg);\n      }\n      legendItems.push({\n        field: colorAttr.scales[0].field,\n        value: markerValue,\n        checked: true,\n        marker,\n        isSingle: false,\n        layer: viewLayer,\n        name: markerValue,\n      });\n    });\n  }\n\n  return legendItems;\n}\n\nexport function mergeLegendData(items) {\n  return items;\n}\n\nexport function createLegend(items, width, height, canvas, position) {\n  const legendTheme = getGlobalTheme().legend;\n  const positions = position.split('-');\n  let layout = 'horizontal';\n  if (positions[0] === 'left' || positions[0] === 'right') {\n    layout = 'vertical';\n  }\n  const container = canvas.addGroup();\n  const legendCfg = {\n    type: 'category-legend',\n    items,\n    maxSize: width,\n    container,\n    group: container,\n    layout: layout,\n    textStyle: {\n      fill: '#8C8C8C',\n      fontSize: 12,\n      textAlign: 'start',\n      textBaseline: 'middle',\n      lineHeight: 20,\n    }, // 图例项目文本样式\n    titleDistance: 10, // 标题和图例项的间距\n    autoWrap: true, // 图例项是否自动换行\n    itemMarginBottom: 4, // 图例项之间的底部间距\n    backgroundPadding: 0, // 背景内边距\n    maxLength: width, // 图例的最大高度或者宽度\n  };\n  const legend = new Legend.Category(legendCfg as any);\n  legendLayout(width, height, legend, position);\n  addLegendInteraction(legend);\n  /** return legend as a padding component */\n  const bbox = legend.get('container').getBBox();\n  let paddingBbox;\n  // merge legend inner padding\n  const { innerPadding } = legendTheme;\n\n  if (positions[0] === 'left') {\n    paddingBbox = new BBox(legend.get('x') + innerPadding[3], legend.get('y'), bbox.width, bbox.height);\n  } else if (positions[0] === 'right') {\n    paddingBbox = new BBox(legend.get('x') - innerPadding[1], legend.get('y'), bbox.width, bbox.height);\n  } else if (positions[0] === 'top') {\n    paddingBbox = new BBox(legend.get('x'), legend.get('y') + innerPadding[0], bbox.width, bbox.height);\n  } else if (positions[0] === 'bottom') {\n    paddingBbox = new BBox(legend.get('x'), legend.get('y') - innerPadding[2], bbox.width, bbox.height);\n  }\n  return {\n    position: positions[0],\n    component: legend,\n    getBBox: () => {\n      return paddingBbox;\n    },\n  };\n}\n\nfunction addLegendInteraction(legend) {\n  const filteredValue = [];\n  legend.get('group').on('click', (ev) => {\n    const item = ev.target.get('delegateObject').item;\n    // 如果是单图例模式\n    if (item.isSingle) {\n      if (item.checked) {\n        ev.target.get('parent').attr('opacity', 0.3);\n        item.layer.hide();\n        item.checked = false;\n      } else {\n        ev.target.get('parent').attr('opacity', 1);\n        item.layer.show();\n        item.checked = true;\n      }\n    } else {\n      // 正常的图例筛选数据逻辑\n      const view = item.layer.view;\n      if (item.checked) {\n        ev.target.get('parent').attr('opacity', 0.3);\n        filteredValue.push(item.value);\n        view.filter(item.field, (f) => {\n          return !_.contains(filteredValue, f);\n        });\n        view.render();\n        const filteredData = view.filteredData;\n        if (filteredData.length === 0) {\n          item.layer.hide();\n        } else if (!item.layer.visibility) {\n          item.layer.show();\n        }\n        item.checked = false;\n      } else {\n        ev.target.get('parent').attr('opacity', 1);\n        _.pull(filteredValue, item.value);\n        view.filter(item.value, (f) => {\n          return !_.contains(filteredValue, f);\n        });\n        view.render();\n        if (!item.layer.visibility) {\n          item.layer.show();\n        }\n        item.checked = true;\n      }\n    }\n  });\n}\n\nfunction legendLayout(width, height, legend, position) {\n  const { bleeding } = getGlobalTheme();\n  if (_.isArray(bleeding)) {\n    _.each(bleeding, (it, index) => {\n      if (typeof bleeding[index] === 'function') {\n        bleeding[index] = bleeding[index]({});\n      }\n    });\n  }\n  const bbox = legend.get('container').getBBox();\n  let x = 0;\n  let y = 0;\n  const positions = position.split('-');\n  // 先确定x\n  if (positions[0] === 'left') {\n    x = bleeding[3];\n  } else if (positions[0] === 'right') {\n    x = width - bleeding[1] - bbox.width;\n  } else if (positions[1] === 'center') {\n    x = (width - bbox.width) / 2;\n  } else if (positions[1] === 'left') {\n    x = bleeding[3];\n  } else if (positions[1] === 'right') {\n    x = width - bleeding[1] - bbox.width;\n  }\n  // 再确定y\n  if (positions[0] === 'bottom') {\n    y = height - bleeding[2] - bbox.height;\n  } else if (positions[0] === 'top') {\n    y = bleeding[0];\n  } else if (positions[1] === 'center') {\n    y = (height - bbox.height) / 2;\n  } else if (positions[1] === 'top') {\n    y = bleeding[0];\n  } else if (positions[1] === 'bottom') {\n    y = height - bleeding[2] - bbox.height;\n  }\n  //legend.moveTo(x, y);\n  legend.setLocation({ x, y });\n  legend.render();\n  //legend.draw();\n}\n","import BBox from '../../util/bbox';\nimport { getScale } from '@antv/scale';\nimport { isArray, uniq, deepMix, each, hasKey, isString, isObject } from '@antv/util';\nimport ViewLayer from '../../base/view-layer';\nimport { getGlobalTheme } from '../../theme';\nimport { isSingleGraph } from './adjustColorConfig';\nimport { getOverlappingPadding } from './padding';\nimport { getComponent } from '../../components/factory';\nimport { translate } from '../../util/g-util';\nimport { Axis } from '../../dependents';\n\nconst AXIS_GAP = 4;\n\nexport function getAxisData(viewLayer: ViewLayer, props, globalOptions) {\n  const { view } = viewLayer;\n  const scales = view.geometries[0].scales;\n  const scalesInfo = [];\n  const singleGraph = isSingleGraph(viewLayer.type, props);\n  // get xscale info\n  if (props.xField) {\n    const xscale = scales[props.xField];\n    const scaleInfo = {\n      dim: 'x',\n      scale: xscale,\n      originalData: props.data,\n    };\n    scalesInfo.push(scaleInfo);\n  }\n  // get yscale info\n  if (props.yField) {\n    const yscale = scales[props.yField];\n    const scaleInfo = {\n      dim: 'y',\n      scale: yscale,\n      originalData: props.data,\n      color: singleGraph && globalOptions.yAxis.colorMapping ? props.color : null,\n      layer: viewLayer,\n    };\n    scalesInfo.push(scaleInfo);\n  }\n  return scalesInfo;\n}\n\nexport function mergeAxisScale(axisInfo, dim, axisOptions?) {\n  if (dim === 'x') {\n    const xAxisInfo = axisInfo.filter((axis) => {\n      if (axis.dim === 'x') {\n        return axis;\n      }\n    });\n    return mergeXAxis(xAxisInfo);\n  } else {\n    const yAxisInfo = axisInfo.filter((axis) => {\n      if (axis.dim === 'y') {\n        return axis;\n      }\n    });\n    return mergeYAxis(yAxisInfo, axisOptions.synchroTick);\n  }\n}\n\nfunction mergeXAxis(axisInfo) {\n  // 判断是否能够合并度量\n  const isSameScale = sameScaleTest(axisInfo);\n  if (!isSameScale) {\n    return [axisInfo[0].scale];\n  }\n  if (axisInfo[0].scale.type === 'cat') {\n    return getCatScale(axisInfo);\n  } else {\n    return getLinearScale(axisInfo, 5);\n  }\n}\n\nfunction mergeYAxis(axisInfo, synchroTick: boolean) {\n  const isSameScale = sameScaleTest(axisInfo);\n  // 默认全部采用左轴的tickCount，具体标度对齐逻辑留待以后优化\n  const tickCount = axisInfo[0].scale.tickCount;\n  const LinearScale = getScale('linear');\n  if (!isSameScale) {\n    return axisInfo.map((axis) => {\n      const scale = axis.scale;\n      const values = calValues(scale, tickCount);\n      if (synchroTick) {\n        const linearScale: any = new LinearScale({\n          min: scale.min,\n          max: scale.max,\n          ticks: values,\n          tickCount,\n          color: axis.color,\n        } as any);\n        linearScale.layer = axis.layer;\n        return linearScale;\n      } else {\n        scale.layer = axis.layer;\n        scale.color = axis.color;\n        return scale;\n      }\n    });\n  } else {\n    return getLinearScale(axisInfo, tickCount);\n  }\n}\n\nfunction getLinearScale(axisInfo, tickCount) {\n  let scaleMin = axisInfo[0].scale.min;\n  let scaleMax = axisInfo[0].scale.max;\n  for (const axis of axisInfo) {\n    scaleMin = Math.min(scaleMin, axis.scale.min);\n    scaleMax = Math.max(scaleMax, axis.scale.max);\n  }\n  const LinearScale = getScale('linear');\n  const scale = new LinearScale({\n    min: scaleMin,\n    max: scaleMax,\n    tickCount,\n  });\n\n  return scale;\n}\n\nfunction getCatScale(axisInfo) {\n  const scaleValues = [];\n  for (const axis of axisInfo) {\n    scaleValues.push(...axis.scale.values);\n  }\n  // todo: time cat 重新排序\n  const CatScale = getScale('cat');\n  const scale = new CatScale({\n    values: uniq(scaleValues),\n  });\n\n  return scale;\n}\n\nfunction sameScaleTest(axisInfo) {\n  const sampleDataSource = axisInfo[0].originalData;\n  const sampleField = axisInfo[0].scale.field;\n  for (const axis of axisInfo) {\n    const data = axis.originalData;\n    const field = axis.scale.field;\n    // 判断数据源和scale字段\n    if (data !== sampleDataSource || field !== sampleField) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function createAxis(scale, dim, canvas, cfg, globalOptions) {\n  const theme = getTheme(globalOptions);\n  const isVertical = dim === 'x' ? false : true;\n  let group;\n  if (scale && scale.layer) {\n    group = scale.layer.container.addGroup();\n  } else {\n    group = canvas.addGroup();\n  }\n  const ticks = getAxisTicks(scale, dim);\n  const parser = getComponent('axis', {\n    dim,\n    plot: {\n      options: globalOptions,\n      getPlotTheme: () => {\n        return getGlobalTheme();\n      },\n    } as any,\n  });\n  let defaultStyle = theme.axis && theme.axis[dim] ? toAxisStyle(theme.axis[dim]) : {};\n  if (scale && scale.color) {\n    defaultStyle = adjustColorStyle(scale.color, parser);\n  }\n\n  const axisConfig = deepMix(\n    {},\n    parser,\n    {\n      type: 'line',\n      group,\n      canvas,\n      start: cfg.start,\n      end: cfg.end,\n      isVertical,\n      verticalFactor: cfg.factor,\n      ticks,\n      label(text) {\n        return {\n          text,\n          textStyle: parser.label.textStyle,\n        };\n      },\n    },\n    defaultStyle\n  );\n  const axis: any = new Axis.Line(axisConfig as any);\n  if (scale) {\n    axis.layer = scale.layer;\n  }\n  axis.render();\n  return axis;\n}\n\nfunction getAxisTicks(scale, dim) {\n  const tickValues = [];\n  if (!scale) {\n    return;\n  }\n  const { ticks, range } = scale;\n  if (!ticks || !range) {\n    return;\n  }\n  const step = (range[1] - range[0]) / (ticks.length - 1);\n  each(ticks, (tick, index) => {\n    const value = dim === 'y' ? 1.0 - (range[0] + step * index) : range[0] + step * index;\n    tickValues.push({ name: tick, value });\n  });\n\n  return tickValues;\n}\n\nfunction calValues(scale, tickCount) {\n  const values = [];\n  const { min, max } = scale;\n  const step = (max - min) / tickCount;\n  for (let i = 0; i < tickCount; i++) {\n    const value = min + step * i;\n    values.push(value);\n  }\n  return values;\n}\n\nexport function axesLayout(globalOptions, axisInfo, padding, layer, width, height, canvas) {\n  const { bleeding } = getGlobalTheme();\n  // merge padding and bleeding by zero value\n  each(padding, (p, index) => {\n    if (p === 0) {\n      padding[index] = bleeding[index];\n    }\n  });\n  const paddingComponents = [];\n  // 创建axis\n  const axes = [];\n  let xAxisScale;\n  let xAxis;\n  let xAxisHeight = 0;\n  if (globalOptions.xAxis.visible) {\n    xAxisScale = mergeAxisScale(axisInfo, 'x');\n    const scale = isArray(xAxisScale) ? xAxisScale[0] : xAxisScale;\n    xAxis = createAxis(\n      scale,\n      'x',\n      canvas,\n      {\n        start: { x: 0, y: 0 },\n        end: { x: width, y: 0 },\n        factor: -1,\n      },\n      globalOptions\n    );\n    xAxisHeight += xAxis.get('group').getBBox().height;\n  }\n\n  if (globalOptions.yAxis.visible) {\n    let yAxisScale = mergeAxisScale(axisInfo, 'y', globalOptions.yAxis);\n    if (isObject(yAxisScale)) {\n      yAxisScale = [yAxisScale];\n    }\n    each(yAxisScale, (scale, index) => {\n      const factor = index === 0 ? -1 : 1;\n      const axis = createAxis(\n        scale,\n        'y',\n        canvas,\n        {\n          start: { x: 0, y: padding[0] },\n          end: { x: 0, y: height - xAxisHeight - padding[2] },\n          factor,\n        },\n        globalOptions\n      );\n      if (index === 0) {\n        translate(axis.get('group'), padding[3], 0);\n      }\n      axes.push(axis);\n    });\n\n    axisLayout(axes, paddingComponents, width, padding);\n  }\n\n  if (globalOptions.xAxis.visible) {\n    const axisPadding = getOverlappingPadding(layer, paddingComponents);\n    const ypos = axes.length === 0 ? height - xAxisHeight - padding[2] : axes[0].get('group').getBBox().maxY;\n    xAxis.destroy();\n    xAxis = createAxis(\n      xAxisScale[0],\n      'x',\n      canvas,\n      {\n        start: { x: axisPadding[3], y: ypos },\n        end: { x: width - axisPadding[1], y: ypos },\n        factor: -1,\n      },\n      globalOptions\n    );\n    paddingComponents.push({\n      position: 'bottom',\n      component: xAxis,\n      getBBox: () => {\n        const container = xAxis.get('group');\n        const bbox = container.getBBox();\n        return new BBox(bbox.minX, bbox.minY, bbox.width, bbox.height);\n      },\n    });\n  }\n\n  return paddingComponents;\n}\n\nfunction axisLayout(axes, paddingComponents, width, padding) {\n  // 先处理最左边的\n  const leftAxis = axes[0];\n  const leftContainer = leftAxis.get('group');\n  const leftBbox = leftContainer.getBBox();\n  translate(leftContainer, leftBbox.width, 0);\n  paddingComponents.push({\n    position: 'left',\n    component: leftAxis,\n    getBBox: () => {\n      const matrix = leftContainer.attr('matrix');\n      return new BBox(leftBbox.minX + matrix[6], leftBbox.minY, leftBbox.width, leftBbox.height);\n    },\n  });\n  let temp_width = padding[1];\n  // 处理右边的\n  for (let i = axes.length - 1; i > 0; i--) {\n    const axis = axes[i];\n    const container = axis.get('group');\n    const bbox = container.getBBox();\n    translate(container, width - temp_width - bbox.width, 0);\n    temp_width += bbox.width + AXIS_GAP;\n    const component = {\n      position: 'right',\n      component: axis,\n      getBBox: () => {\n        const matrix = container.attr('matrix');\n        return new BBox(bbox.minX + matrix[6], bbox.minY, bbox.width, bbox.height);\n      },\n    };\n    paddingComponents.push(component);\n  }\n}\n\nfunction adjustColorStyle(color, options) {\n  return {\n    line: options.line\n      ? {\n          stroke: color,\n          lineWidth: 1,\n        }\n      : null,\n    tickLine: options.tickLine\n      ? {\n          stroke: color,\n          lineWidth: 1,\n          length: 5,\n        }\n      : null,\n    label: options.label\n      ? {\n          textStyle: {\n            fill: color,\n          },\n        }\n      : null,\n  };\n}\n\nexport function drawYGrid(axis, coord, container, globalOptions) {\n  const theme = getTheme(globalOptions);\n  const gridCfg = globalOptions.yAxis.grid;\n  const defaultStyle = theme.axis.y.grid.style;\n  const style = deepMix({}, defaultStyle, gridCfg.style);\n  const gridGroup = container.addGroup();\n  const labelItems = axis.get('labelItems');\n  each(labelItems, (item, index) => {\n    if (index > 0) {\n      gridGroup.addShape('path', {\n        attrs: {\n          path: [\n            ['M', coord.start.x, item.point.y],\n            ['L', coord.end.x, item.point.y],\n          ],\n          ...style,\n        },\n      });\n    }\n  });\n}\n\nfunction toAxisStyle(theme) {\n  const style = {};\n  each(theme, (t, key) => {\n    if (hasKey(t, 'style')) {\n      style[key] = t.style;\n    }\n  });\n  return style;\n}\n\nfunction getTheme(options) {\n  let theme = getGlobalTheme();\n  if (options.theme) {\n    if (isString(options.theme)) {\n      theme = getGlobalTheme(options.theme);\n    } else if (isObject(options.theme)) {\n      theme = options.theme;\n    }\n  }\n  return theme;\n}\n","import { each, isObject, has } from '@antv/util';\nimport { Tooltip } from '../../dependents';\nimport { getGlobalTheme } from '../../theme/global';\n\n//const TYPE_SHOW_MARKERS = ['line', 'area', 'path', 'areaStack'];\n\nexport function showTooltip(canvas, layers) {\n  const tooltip = renderTooltip(layers[0], canvas);\n  tooltip.init();\n  canvas.on('mousemove', (ev) => {\n    const tooltipItems = [];\n    const point = { x: ev.x, y: ev.y };\n    each(layers, (layer) => {\n      const { view } = layer;\n      if (view && layer.visibility) {\n        //const coord = view.geometries[0].coordinate;\n        //const geoms = view.geometries;\n        tooltipItems.push(...view.getTooltipItems(point));\n        /*each(geoms, (geom) => {\n          const type = geom.type;\n          const dataArray = geom.dataArray;\n          if (contains(['area', 'line', 'path', 'interval'], type)) {\n            const items = getTooltipItems(point, geom, type, dataArray, coord);\n            tooltipItems.push(...items);\n          } else {s\n            const shapeContainer = geom.container;\n            const shapes = getShapeByX(shapeContainer, point.x);\n            each(shapes, (shape) => {\n              if (shape.get('visible') && shape.get('origin')) {\n                const items = geom.getTooltipItems(shape.get('origin'), null);\n                tooltipItems.push(...items);\n              }\n            });\n          }\n        });*/\n      }\n    });\n    //adjustItems(tooltipItems, ev.target, tooltipCfg);\n    if (tooltipItems.length > 0) {\n      tooltip.setLocation(point);\n      tooltip.update({\n        items: getUniqueItems(tooltipItems),\n        domStyles: {\n          'g2-tooltip': {\n            opacity: 1,\n          },\n        },\n      });\n      tooltip.show();\n    } else if (tooltip.get('visible')) {\n      tooltip.hide();\n    }\n  });\n\n  return tooltip;\n}\n\n/*function getTooltipItems(point, geom, type, dataArray, coord) {\n  const items = [];\n  each(dataArray, (data) => {\n    const items = geom.findItemsFromView(geom.view, point);\n    const subItems = geom.getTooltipItems(point, null);\n    each(subItems, (v) => {\n      // tslint:disable-next-line: no-shadowed-variable\n      let point = v.point;\n      if (!isNil(point) && !isNil(point.x) && !isNil(point.y)) {\n        const x = isArray(point.x) ? point.x[point.x.length - 1] : point.x;\n        const y = isArray(point.y) ? point.y[point.y.length - 1] : point.y;\n        point = coord.applyMatrix(x, y, 1);\n        v.x = point[0];\n        v.y = point[1];\n        v.showMarker = true;\n        const itemMarker = getItemMarker(geom, v.color);\n        v.marker = itemMarker;\n        if (indexOf(TYPE_SHOW_MARKERS, type) !== -1) {\n          items.push(v);\n        }\n      }\n    });\n    items.push(...subItems);\n  });\n  return items;\n}*/\n\nfunction renderTooltip(layer, canvas) {\n  const tooltipTheme = getGlobalTheme().tooltip;\n  const options = {\n    parent: layer.canvas.get('container'),\n    panelGroup: layer.view.middleGroup,\n    panelRange: layer.view.coodinateBBox,\n    capture: false,\n    canvas,\n    frontgroundGroup: layer.view.frontgroundGroup,\n    theme: tooltipTheme,\n    backgroundGroup: layer.view.backgroundGroup,\n    items: [{ name: 0, value: 0 }],\n    domStyles: {\n      'g2-tooltip': {\n        opacity: 0,\n      },\n    },\n  };\n\n  return new Tooltip.Html(options);\n}\n\n/*function getItemMarker(geom, color) {\n  const shapeType = geom.get('shapeType') || 'point';\n  const shape = geom.getDefaultValue('shape') || 'circle';\n  const shapeObject = getShapeFactory(shapeType);\n  const cfg = { color, isInPolar: false };\n  const marker = shapeObject.getMarker(shape, cfg);\n  return marker;\n}*/\n\nfunction getUniqueItems(items) {\n  const tmp = [];\n  each(items, (item) => {\n    const index = indexOfArray(tmp, item);\n    if (index === -1) {\n      tmp.push(item);\n    }\n  });\n  return tmp;\n}\n\nfunction indexOfArray(items, item) {\n  let rst = -1;\n  each(items, (sub, index: number) => {\n    let isEqual = true;\n    for (const key in item) {\n      if (has(item, key)) {\n        if (!isObject(item[key]) && item[key] !== sub[key]) {\n          isEqual = false;\n          break;\n        }\n      }\n    }\n    if (isEqual) {\n      rst = index;\n      return false;\n    }\n  });\n  return rst;\n}\n\n/*function adjustItems(items, target, cfg) {\n  if (target.get('origin')) {\n    let data;\n    if (isArray(target.get('origin'))) {\n      data = getDataByTitle(items[0].title, target.get('origin')).data;\n    } else {\n      data = target.get('origin')._origin;\n    }\n    each(items, (item) => {\n      if (item.point._origin !== data) {\n        item.color = '#ccc';\n      }\n    });\n  }\n  if (cfg.sort) {\n    items.sort((a, b) => {\n      return parseFloat(b.value) - parseFloat(a.value);\n    });\n  }\n}\n\nfunction getDataByTitle(title, data) {\n  for (const i in data) {\n    const d = data[i]._origin;\n    const ks = keys(d);\n    for (const j in ks) {\n      const key = ks[j];\n      if (d[key] === title) {\n        return { data: d, key };\n      }\n    }\n  }\n}\n\nfunction getShapeByX(container, x) {\n  const shapes = [];\n  const children = container.get('children');\n  each(children, (c) => {\n    const bbox = c.getBBox();\n    if (bbox.minX < x && bbox.maxX > x) {\n      shapes.push(c);\n    }\n  });\n  return shapes;\n}*/\n","// Adapted from vega-statistics by Jeffrey Heer\n// License: https://github.com/vega/vega/blob/f058b099decad9db78301405dd0d2e9d8ba3d51a/LICENSE\n// Source: https://github.com/vega/vega/blob/f058b099decad9db78301405dd0d2e9d8ba3d51a/packages/vega-statistics/src/regression/points.js\nexport function points(data, x, y, sort) {\n  data = data.filter(d => {\n    let u = x(d), v = y(d);\n    return u != null && isFinite(u) && v != null && isFinite(v);\n  });\n\n  if (sort) {\n    data.sort((a, b) => x(a) - x(b));\n  }\n\n  const n = data.length,\n        X = new Float64Array(n),\n        Y = new Float64Array(n);\n\n  // extract values, calculate means\n  let ux = 0, uy = 0, xv, yv, d;\n  for (let i = 0; i < n; ) {\n    d = data[i];\n    X[i] = xv = +x(d);\n    Y[i] = yv = +y(d);\n    ++i;\n    ux += (xv - ux) / i;\n    uy += (yv - uy) / i;\n  }\n\n  // mean center the data\n  for (let i = 0; i < n; ++i) {\n    X[i] -= ux;\n    Y[i] -= uy;\n  }\n\n  return [X, Y, ux, uy];\n}\n\n\nexport function visitPoints(data, x, y, cb){\n  let iterations = 0;\n\n  for (let i = 0, n = data.length; i < n; i++) {\n    const d = data[i],\n          dx = +x(d),\n          dy = +y(d);\n    \n    if (dx != null && isFinite(dx) && dy != null && isFinite(dy)) {\n      cb(dx, dy, iterations++);\n    }\n  }\n}","import { visitPoints } from \"./points\";\n\n// Given a dataset, x- and y-accessors, the mean center of the y values, and a predict function,\n// return the coefficient of determination, or R squared.\nexport function determination(data, x, y, uY, predict){\n  let SSE = 0,\n      SST = 0;\n  \n  visitPoints(data, x, y, (dx, dy) => {\n    const sse = dy - predict(dx),\n          sst = dy - uY;\n\n    SSE += sse * sse;\n    SST += sst * sst;\n  });\n\n  return 1 - SSE / SST;\n}","// Returns the angle of a line in degrees.\nexport function angle(line){\n  return Math.atan2(line[1][1] - line[0][1], line[1][0] - line[0][0]) * 180 / Math.PI;\n}\n\n// Returns the midpoint of a line.\nexport function midpoint(line){\n  return [(line[0][0] + line[1][0]) / 2, (line[0][1] + line[1][1]) / 2];\n}","import { angle, midpoint } from \"./geometry\";\n\n// Given a start point, an end point, and a prediciton function,\n// returns a smooth line.\nexport function interpose(xmin, xmax, predict){\n  const l = Math.log(xmax - xmin) * Math.LOG10E + 1 | 0;\n  const precision = 1 * Math.pow(10, -l / 2 - 1), maxIter = 1e4;\n  let points = [px(xmin), px(xmax)], iter = 0;\n\n  while (find(points) && iter < maxIter);\n\n  return points;\n  \n  function px(x){\n    return [x, predict(x)];\n  }\n\n  function find(points){\n    iter++;\n    const n = points.length;\n    let found = false;\n    \n    for (let i = 0; i < n - 1; i++){\n      const p0 = points[i],\n          p1 = points[i + 1],\n          m = midpoint([p0, p1]),\n          mp = px(m[0]),\n          a0 = angle([p0, m]),\n          a1 = angle([p0, mp]),\n          a = Math.abs(a0 - a1);\n      \n      if (a > precision){\n        points.splice(i + 1, 0, mp);\n        found = true;\n      }\n    }\n    \n    return found;\n  }\n}","// Ordinary Least Squares from vega-statistics by Jeffrey Heer\n// License: https://github.com/vega/vega/blob/f058b099decad9db78301405dd0d2e9d8ba3d51a/LICENSE\n// Source: https://github.com/vega/vega/blob/f058b099decad9db78301405dd0d2e9d8ba3d51a/packages/vega-statistics/src/regression/ols.js\nexport function ols(uX, uY, uXY, uX2) {\n  const delta = uX2 - uX * uX,\n        slope = Math.abs(delta) < 1e-24 ? 0 : (uXY - uX * uY) / delta,\n        intercept = uY - slope * uX;\n\n  return [intercept, slope];\n}","import { determination } from \"./utils/determination\";\nimport { interpose } from \"./utils/interpose\";\nimport { ols } from \"./utils/ols\";\nimport { visitPoints } from \"./utils/points\";\n\nexport default function() {\n  let x = d => d[0],\n      y = d => d[1],\n      domain;\n   \n  function exponential(data){\n    let n = 0,\n        Y = 0,\n        YL = 0,\n        XY = 0,\n        XYL = 0,\n        X2Y = 0,\n        xmin = domain ? +domain[0] : Infinity,\n        xmax = domain ? +domain[1] : -Infinity;\n\n    visitPoints(data, x, y, (dx, dy) => {\n      const ly = Math.log(dy), xy = dx * dy;\n      ++n;\n      Y += (dy - Y) / n;\n      XY += (xy - XY) / n;\n      X2Y += (dx * xy - X2Y) / n;\n      YL += (dy * ly - YL) / n;\n      XYL += (xy * ly - XYL) / n;\n      \n      if (!domain){\n        if (dx < xmin) xmin = dx;\n        if (dx > xmax) xmax = dx;\n      }\n    });\n    \n    let [a, b] = ols(XY / Y, YL / Y, XYL / Y, X2Y / Y);\n    a = Math.exp(a);\n    const fn = x => a * Math.exp(b * x),\n          out = interpose(xmin, xmax, fn);\n    \n    out.a = a;\n    out.b = b;\n    out.predict = fn;\n    out.rSquared = determination(data, x, y, Y, fn);\n    \n    return out;  \n  }\n\n  exponential.domain = function(arr){\n    return arguments.length ? (domain = arr, exponential) : domain;\n  }  \n  \n  exponential.x = function(fn){\n    return arguments.length ? (x = fn, exponential) : x;\n  }\n\n  exponential.y = function(fn){\n    return arguments.length ? (y = fn, exponential) : y;\n  }\n  \n  return exponential;\n}","import { determination } from \"./utils/determination\";\nimport { ols } from \"./utils/ols\";\nimport { visitPoints } from \"./utils/points\";\n\nexport default function(){\n  let x = d => d[0],\n      y = d => d[1],\n      domain;\n\n  function linear(data){\n    let n = 0,\n        X = 0, // sum of x\n        Y = 0, // sum of y\n        XY = 0, // sum of x * y\n        X2 = 0, // sum of x * x\n        xmin = domain ? +domain[0] : Infinity,\n        xmax = domain ? +domain[1] : -Infinity;\n\n    visitPoints(data, x, y, (dx, dy) => {\n      ++n;\n      X += (dx - X) / n;\n      Y += (dy - Y) / n;\n      XY += (dx * dy - XY) / n;\n      X2 += (dx * dx - X2) / n;\n      \n      if (!domain){\n        if (dx < xmin) xmin = dx;\n        if (dx > xmax) xmax = dx;\n      }\n    });\n\n    const [intercept, slope] = ols(X, Y, XY, X2),\n        fn = x => slope * x + intercept,\n        out = [[xmin, fn(xmin)], [xmax, fn(xmax)]];\n    \n    out.a = slope;\n    out.b = intercept;\n    out.predict = fn;\n    out.rSquared = determination(data, x, y, Y, fn);\n\n    return out;\n  }\n\n  linear.domain = function(arr){\n    return arguments.length ? (domain = arr, linear) : domain;\n  }\n\n  linear.x = function(fn){\n    return arguments.length ? (x = fn, linear) : x;\n  }\n\n  linear.y = function(fn){\n    return arguments.length ? (y = fn, linear) : y;\n  }\n\n  return linear;\n}\n","// Returns the medium value of an array of numbers.\nexport function median(arr){\n  arr.sort((a, b) => a - b);\n  var i = arr.length / 2;\n  return i % 1 === 0 ? (arr[i - 1] + arr[i]) / 2 : arr[Math.floor(i)];\n}","// Adapted from science.js by Jason Davies\n// License: https://github.com/jasondavies/science.js/blob/master/LICENSE\n// Source: https://github.com/jasondavies/science.js/blob/master/src/stats/loess.js\n// Adapted from vega-statistics by Jeffrey Heer\n// License: https://github.com/vega/vega/blob/f058b099decad9db78301405dd0d2e9d8ba3d51a/LICENSE\n// Source: https://github.com/vega/vega/blob/f21cb8792b4e0cbe2b1a3fd44b0f5db370dbaadb/packages/vega-statistics/src/regression/loess.js\nimport { median } from \"./utils/median\";\nimport { ols } from \"./utils/ols\";\nimport { points } from \"./utils/points\";\n\nconst maxiters = 2, epsilon = 1e-12;\n\nexport default function() {\n  let x = d => d[0],\n      y = d => d[1],\n      bandwidth = .3;\n\n  function loess(data) {\n    const [xv, yv, ux, uy] = points(data, x, y, true),\n          n = xv.length,\n          bw = Math.max(2, ~~(bandwidth * n)), // # nearest neighbors\n          yhat = new Float64Array(n),\n          residuals = new Float64Array(n),\n          robustWeights = new Float64Array(n).fill(1);\n\n    for (let iter = -1; ++iter <= maxiters; ) {\n      const interval = [0, bw - 1];\n\n      for (let i = 0; i < n; ++i) {\n        const dx = xv[i],\n              i0 = interval[0],\n              i1 = interval[1],\n              edge = (dx - xv[i0]) > (xv[i1] - dx) ? i0 : i1;\n\n        let W = 0, X = 0, Y = 0, XY = 0, X2 = 0,\n            denom = 1 / Math.abs(xv[edge] - dx || 1); // Avoid singularity\n\n        for (let k = i0; k <= i1; ++k) {\n          const xk = xv[k],\n                yk = yv[k],\n                w = tricube(Math.abs(dx - xk) * denom) * robustWeights[k],\n                xkw = xk * w;\n\n          W += w;\n          X += xkw;\n          Y += yk * w;\n          XY += yk * xkw;\n          X2 += xk * xkw;\n        }\n\n        // Linear regression fit\n        const [a, b] = ols(X / W, Y / W, XY / W, X2 / W);\n        yhat[i] = a + b * dx;\n        residuals[i] = Math.abs(yv[i] - yhat[i]);\n\n        updateInterval(xv, i + 1, interval);\n      }\n\n      if (iter === maxiters) {\n        break;\n      }\n\n      const medianResidual = median(residuals);\n      if (Math.abs(medianResidual) < epsilon) break;\n\n      for (let i = 0, arg, w; i < n; ++i){\n        arg = residuals[i] / (6 * medianResidual);\n        // Default to epsilon (rather than zero) for large deviations\n        // Keeping weights tiny but non-zero prevents singularites\n        robustWeights[i] = (arg >= 1) ? epsilon : ((w = 1 - arg * arg) * w);\n      }\n    }\n\n    return output(xv, yhat, ux, uy);\n  }\n\n  loess.bandwidth = function(bw) {\n    return arguments.length ? (bandwidth = bw, loess) : bandwidth;\n  };\n\n  loess.x = function(fn) {\n    return arguments.length ? (x = fn, loess) : x;\n  };\n\n  loess.y = function(fn) {\n    return arguments.length ? (y = fn, loess) : y;\n  };\n\n  return loess;\n}\n\n// Weighting kernel for local regression\nfunction tricube(x) {\n  return (x = 1 - x * x * x) * x * x;\n}\n\n// Advance sliding window interval of nearest neighbors\nfunction updateInterval(xv, i, interval) {\n  let val = xv[i],\n      left = interval[0],\n      right = interval[1] + 1;\n\n  if (right >= xv.length) return;\n\n  // Step right if distance to new right edge is <= distance to old left edge\n  // Step when distance is equal to ensure movement over duplicate x values\n  while (i > left && (xv[right] - val) <= (val - xv[left])) {\n    interval[0] = ++left;\n    interval[1] = right;\n    ++right;\n  }\n}\n\n// Generate smoothed output points\n// Average points with repeated x values\nfunction output(xv, yhat, ux, uy) {\n  const n = xv.length, out = [];\n  let i = 0, cnt = 0, prev = [], v;\n\n  for (; i<n; ++i) {\n    v = xv[i] + ux;\n    if (prev[0] === v) {\n      // Average output values via online update\n      prev[1] += (yhat[i] - prev[1]) / (++cnt);\n    } else {\n      // Add new output point\n      cnt = 0;\n      prev[1] += uy;\n      prev = [v, yhat[i]];\n      out.push(prev);\n    }\n  }\n  prev[1] += uy;\n\n  return out;\n}","import { determination } from \"./utils/determination\";\nimport { interpose } from \"./utils/interpose\";\nimport { ols } from \"./utils/ols\";\nimport { visitPoints } from \"./utils/points\";\n\nexport default function() {\n  let x = d => d[0],\n      y = d => d[1],\n      domain;\n  \n  function logarithmic(data){\n    let n = 0,\n        X = 0,\n        Y = 0,\n        XY = 0,\n        X2 = 0,\n        xmin = domain ? +domain[0] : Infinity,\n        xmax = domain ? +domain[1] : -Infinity;\n    \n    visitPoints(data, x, y, (dx, dy) => {\n      const lx = Math.log(dx);\n      ++n;\n      X += (lx - X) / n;\n      Y += (dy - Y) / n;\n      XY += (lx * dy - XY) / n;\n      X2 += (lx * lx - X2) / n;\n      \n      if (!domain){\n        if (dx < xmin) xmin = dx;\n        if (dx > xmax) xmax = dx;\n      }\n    });\n    \n    const [intercept, slope] = ols(X, Y, XY, X2),\n        fn = x => slope * Math.log(x) + intercept,\n        out = interpose(xmin, xmax, fn);\n        \n    out.a = slope;\n    out.b = intercept;\n    out.predict = fn;\n    out.rSquared = determination(data, x, y, Y, fn);\n\n    return out; \n  }\n  \n  logarithmic.domain = function(arr){\n    return arguments.length ? (domain = arr, logarithmic) : domain;\n  }\n\n  logarithmic.x = function(fn){\n    return arguments.length ? (x = fn, logarithmic) : x;\n  }\n\n  logarithmic.y = function(fn){\n    return arguments.length ? (y = fn, logarithmic) : y;\n  }\n  \n  return logarithmic;\n}","import { determination } from \"./utils/determination\";\nimport { interpose } from \"./utils/interpose\";\nimport { points, visitPoints } from \"./utils/points\";\n\nexport default function(){\n  let x = d => d[0],\n      y = d => d[1],\n      domain;\n\n  function quadratic(data){\n    const [xv, yv, ux, uy] = points(data, x, y),\n          n = xv.length;\n    \n    let X2 = 0,\n        X3 = 0,\n        X4 = 0,\n        XY = 0,\n        X2Y = 0,\n        i, dx, dy, x2;\n\n    for (i = 0; i < n;) {\n      dx = xv[i];\n      dy = yv[i++];\n      x2 = dx * dx;\n      X2 += (x2 - X2) / i;\n      X3 += (x2 * dx - X3) / i;\n      X4 += (x2 * x2 - X4) / i;\n      XY += (dx * dy - XY) / i;\n      X2Y += (x2 * dy - X2Y) / i;\n    }\n    \n    let Y = 0,\n        n0 = 0,\n        xmin = domain ? +domain[0] : Infinity,\n        xmax = domain ? +domain[1] : -Infinity;\n    \n    visitPoints(data, x, y, (dx, dy) => {\n      n0++;\n      Y += (dy - Y) / n0;\n      if (!domain){\n        if (dx < xmin) xmin = dx;\n        if (dx > xmax) xmax = dx;\n      }\n    });\n    \n    const X2X2 = X4 - (X2 * X2),\n          d = (X2 * X2X2 - X3 * X3),\n          a = (X2Y * X2 - XY * X3) / d,\n          b = (XY * X2X2 - X2Y * X3) / d,\n          c = -a * X2,\n          fn = x => {\n            x = x - ux;\n            return a * x * x + b * x + c + uy;\n          };\n    \n    const out = interpose(xmin, xmax, fn);\n\n    out.a = a;\n    out.b = b - 2 * a * ux;\n    out.c = c - b * ux + a * ux * ux + uy;\n    out.predict = fn;\n    out.rSquared = determination(data, x, y, Y, fn);\n\n    return out;\n  }\n  \n  quadratic.domain = function(arr){\n    return arguments.length ? (domain = arr, quadratic) : domain;\n  }\n\n  quadratic.x = function(fn){\n    return arguments.length ? (x = fn, quadratic) : x;\n  }\n\n  quadratic.y = function(fn){\n    return arguments.length ? (y = fn, quadratic) : y;\n  }\n  \n  return quadratic;\n}","import { determination } from \"./utils/determination\";\nimport { interpose } from \"./utils/interpose\";\nimport { points, visitPoints } from \"./utils/points\";\nimport linear from \"./linear\";\nimport quad from \"./quadratic\";\n\n// Adapted from regression-js by Tom Alexander\n// Source: https://github.com/Tom-Alexander/regression-js/blob/master/src/regression.js#L246\n// License: https://github.com/Tom-Alexander/regression-js/blob/master/LICENSE\n// ...with ideas from vega-statistics by Jeffrey Heer\n// Source: https://github.com/vega/vega/blob/f21cb8792b4e0cbe2b1a3fd44b0f5db370dbaadb/packages/vega-statistics/src/regression/poly.js\n// License: https://github.com/vega/vega/blob/f058b099decad9db78301405dd0d2e9d8ba3d51a/LICENSE\nexport default function(){\n  let x = d => d[0],\n      y = d => d[1],\n      order = 3,\n      domain;\n  \n  function polynomial(data) {    \n    // Use more efficient methods for lower orders\n    if (order === 1) {\n      const o = linear().x(x).y(y).domain(domain)(data);\n      o.coefficients = [o.b, o.a];\n      delete o.a; delete o.b;\n      return o;\n    }\n    if (order === 2) {\n      const o = quad().x(x).y(y).domain(domain)(data);\n      o.coefficients = [o.c, o.b, o.a];\n      delete o.a; delete o.b; delete o.c;\n      return o;\n    }\n    \n    const [xv, yv, ux, uy] = points(data, x, y),\n        n = xv.length,\n        lhs = [],\n        rhs = [],\n        k = order + 1;\n\n    let Y = 0, n0 = 0,\n        xmin = domain ? +domain[0] : Infinity,\n        xmax = domain ? +domain[1] : -Infinity;\n    \n    visitPoints(data, x, y, (dx, dy) => {\n      ++n0\n      Y += (dy - Y) / n0;\n      if (!domain){\n        if (dx < xmin) xmin = dx;\n        if (dx > xmax) xmax = dx;        \n      }\n    });\n\n    let i, j, l, v, c;\n\n    for (i = 0; i < k; ++i) {\n      for (l = 0, v = 0; l < n; ++l) {\n        v += Math.pow(xv[l], i) * yv[l];\n      }\n      lhs.push(v);\n\n      c = new Float64Array(k);\n      for (j=0; j<k; ++j) {\n        for (l=0, v=0; l<n; ++l) {\n          v += Math.pow(xv[l], i + j);\n        }\n        c[j] = v;\n      }\n      rhs.push(c);\n    }\n    rhs.push(lhs);\n\n    const coef = gaussianElimination(rhs),\n          fn = x => {\n            x -= ux;\n            let y = uy + coef[0] + coef[1] * x + coef[2] * x * x;\n            for (i = 3; i < k; ++i) y += coef[i] * Math.pow(x, i);\n            return y;\n          },\n          out = interpose(xmin, xmax, fn);\n\n    out.coefficients = uncenter(k, coef, -ux, uy);\n    out.predict = fn;\n    out.rSquared = determination(data, x, y, Y, fn);\n    \n    return out;\n  }\n\n  polynomial.domain = function(arr){\n    return arguments.length ? (domain = arr, polynomial) : domain;\n  }\n\n  polynomial.x = function(fn){\n    return arguments.length ? (x = fn, polynomial) : x;\n  }\n\n  polynomial.y = function(fn){\n    return arguments.length ? (y = fn, polynomial) : y;\n  }\n\n  polynomial.order = function(n){\n    return arguments.length ? (order = n, polynomial) : order;\n  }\n  \n  return polynomial;\n}\n\nfunction uncenter(k, a, x, y) {\n  const z = Array(k);\n  let i, j, v, c;\n\n  // initialize to zero\n  for (i = 0; i < k; ++i) z[i] = 0;\n\n  // polynomial expansion\n  for (i = k - 1; i >= 0; --i) {\n    v = a[i];\n    c = 1;\n    z[i] += v;\n    for (j = 1; j <= i; ++j) {\n      c *= (i + 1 - j) / j; // binomial coefficent\n      z[i-j] += v * Math.pow(x, j) * c;\n    }\n  }\n\n  // bias term\n  z[0] += y;\n\n  return z;\n}\n\n// Given an array for a two-dimensional matrix and the polynomial order,\n// solve A * x = b using Gaussian elimination.\nfunction gaussianElimination(matrix) {\n  const n = matrix.length - 1,\n        coef = [];\n\n  let i, j, k, r, t;\n\n  for (i = 0; i < n; ++i) {\n    r = i; // max row\n    for (j = i + 1; j < n; ++j) {\n      if (Math.abs(matrix[i][j]) > Math.abs(matrix[i][r])) {\n        r = j;\n      }\n    }\n\n    for (k = i; k < n + 1; ++k) {\n      t = matrix[k][i];\n      matrix[k][i] = matrix[k][r];\n      matrix[k][r] = t;\n    }\n\n    for (j = i + 1; j < n; ++j) {\n      for (k = n; k >= i; k--) {\n        matrix[k][j] -= (matrix[k][i] * matrix[i][j]) / matrix[i][i];\n      }\n    }\n  }\n\n  for (j = n - 1; j >= 0; --j) {\n    t = 0;\n    for (k = j + 1; k < n; ++k) {\n      t += matrix[k][j] * coef[k];\n    }\n    coef[j] = (matrix[n][j] - t) / matrix[j][j];\n  }\n\n  return coef;\n}","import { determination } from \"./utils/determination\";\nimport { interpose } from \"./utils/interpose\";\nimport { ols } from \"./utils/ols\";\nimport { visitPoints } from \"./utils/points\";\n\nexport default function() {\n  let x = d => d[0],\n      y = d => d[1],\n      domain;\n  \n  function power(data){\n    let n = 0,\n        X = 0,\n        Y = 0,\n        XY = 0,\n        X2 = 0,\n        YS = 0,\n        xmin = domain ? +domain[0] : Infinity,\n        xmax = domain ? +domain[1] : -Infinity;\n    \n    visitPoints(data, x, y, (dx, dy) => {\n      const lx = Math.log(dx),\n            ly = Math.log(dy);\n      ++n;\n      X += (lx - X) / n;\n      Y += (ly - Y) / n;\n      XY += (lx * ly - XY) / n;\n      X2 += (lx * lx - X2) / n;\n      YS += (dy - YS) / n;\n\n      if (!domain){\n        if (dx < xmin) xmin = dx;\n        if (dx > xmax) xmax = dx;\n      }\n    });\n\n    let [a, b] = ols(X, Y, XY, X2);\n    a = Math.exp(a);\n    const fn = x => a * Math.pow(x, b),\n        out = interpose(xmin, xmax, fn);\n\n    out.a = a;\n    out.b = b;\n    out.predict = fn;\n    out.rSquared = determination(data, x, y, YS, fn);\n\n    return out; \n  }\n  \n  power.domain = function(arr){\n    return arguments.length ? (domain = arr, power) : domain;\n  }\n\n  power.x = function(fn){\n    return arguments.length ? (x = fn, power) : x;\n  }\n\n  power.y = function(fn){\n    return arguments.length ? (y = fn, power) : y;\n  }\n  \n  return power;\n}"],"sourceRoot":""}