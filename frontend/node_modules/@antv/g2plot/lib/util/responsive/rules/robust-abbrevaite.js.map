{"version":3,"file":"robust-abbrevaite.js","sourceRoot":"","sources":["../../../../src/util/responsive/rules/robust-abbrevaite.ts"],"names":[],"mappings":";;;AAEA,iGAAgF;AAChF,kFAAmD;AACnD,8EAA+C;AAS/C,SAAwB,gBAAgB,CAAC,KAAa,EAAE,MAA2B,EAAE,KAAK,EAAE,GAAG;IAC7F,IAAM,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC;IAC9B,IAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAChC,yBAAyB;IACzB,IAAM,KAAK,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACjC,IAAI,KAAK,EAAE;QACT,2BAAgB,CAAC,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;KAC/C;SAAM,IAAI,mCAAM,CAAC,IAAI,CAAC,EAAE;QACvB,oCAAwB,CAAC,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;KACvD;SAAM;QACL,yBAAc,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;KAC/B;AACH,CAAC;AAZD,mCAYC","sourcesContent":["import { IShape } from '@antv/g-base';\n\nimport datetimeStringAbbrevaite, { isTime } from './datetime-string-abbrevaite';\nimport digitsAbbreviate from './digits-abbreviate';\nimport textAbbreviate from './text-abbreviate';\n\ninterface RobustAbbrevaiteCfg {\n  keep?: string[];\n  abbreviateBy?: 'start' | 'middle' | 'end';\n  unit?: 'k' | 'm' | 'b' | 't' | 'auto';\n  decimal?: number;\n}\n\nexport default function robustAbbrevaite(shape: IShape, option: RobustAbbrevaiteCfg, index, cfg) {\n  const nodes = cfg.nodes.nodes;\n  const text = shape.attr('text');\n  /** 判断text类型： 数字、时间、文本 */\n  const isnum = /^\\d+$/.test(text);\n  if (isnum) {\n    digitsAbbreviate(shape, option, index, nodes);\n  } else if (isTime(text)) {\n    datetimeStringAbbrevaite(shape, option, index, nodes);\n  } else {\n    textAbbreviate(shape, option);\n  }\n}\n"]}